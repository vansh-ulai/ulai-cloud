"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67494],{134539:(e,t,o)=>{o.d(t,{NU:()=>v,O:()=>y,Rf:()=>f,SU:()=>g,cV:()=>I,fn:()=>_});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(536095),i=()=>o(888325),r=()=>o(898244),a=()=>o(278238),l=()=>o(201980),p=()=>o(534177),c=()=>o(403905),s=()=>o(972435),d=()=>o(913530),u=()=>o(913454),m=()=>o(476219);function f(e){var t;const{collectionViewBlockStore:o,collectionStore:f,instanceMap:y}=e,v=f.id,I=(0,i()._)({table:"collection",id:v}),_=y[I]??{};if(!o.isReady()||!f.isReady())return;let w,T=!1;const h=o.getCollectionViewIds().map((e=>{const t=d().p.createChildStore(o,{table:"collection_view",id:e}),i=t.getModel();if(!i)return void(T=!0);const r=t.getCollectionStore();if(!r)return void(T=!0);let a=!1;return w||"table"!==i.getType()||(w=e,a=!0),r.id===v?function(e){const{collectionViewStore:t,templateIdToInstancePointersMap:o,schema:i,isFirstTableView:r}=e,a=t.id;let l=t.getName();const p=t.getType(),d=g(o,"collection_view",a);let m;r&&!l&&(m=n().Gs,l=(0,u().getWorkflowTemplateName)(u().globalWorkflowTemplates.fromId(m)));!l&&p&&(l=s().A.intl.formatMessage(c().X[p]));return{type:"collection_view",name:l,id:a,viewType:p,format:t.getNormalizedFormat(i)??{},query:t.getRawQuery(),templateId:d,isFirstTableView:r,defaultBuiltinTemplateIdToMapTo:m}}({collectionViewStore:t,templateIdToInstancePointersMap:_,schema:r.getSchema(),isFirstTableView:a}):void 0})).filter(p().O9);if(T)return;const S=[];for(const n of h)if(n.isFirstTableView){const e=n.format;if(e.table_properties){for(const t of e.table_properties)t.visible&&S.push(t.property);if(S.length>0)break}}const b=f.getSchema(),C=Object.entries(b).map((([e,t])=>{if(t)return function(e){const{propertyId:t,schema:o,instanceMap:n,templateIdToInstancePointersMap:a}=e,l="relation"===o.type?(0,r().zO)(o):void 0,p=l?function(e,t){const o=(0,i()._)({table:"collection",id:t});return g(e[o]??{},"collection",t)}(n,l):void 0;return{type:"property",id:t,name:o.name,schema:o,relatedCollectionTemplateId:p,templateId:g(a,"property",t),isSupported:m().Pg(o)}}({propertyId:e,schema:t,instanceMap:y,templateIdToInstancePointersMap:_})})).filter(p().O9),k=f.getLayoutStore();if(k&&!k.isReady())return;const M=null==k?void 0:k.getModel(),O=M?function(e){const{layoutModel:t,templateIdToInstancePointersMap:o}=e,n=g(o,"layout",t.id);let i;if(n){const e=u().globalWorkflowTemplates.fromId(n);"layout"===e.type&&(i=e.name)}return{id:t.id,type:"layout",templateId:n,name:i,layout:t.getRawModules(),spaceId:t.spaceId}}({layoutModel:M,templateIdToInstancePointersMap:_}):void 0,P=f.getAutomationStores().map((e=>e.pointer)),N=null===(t=f.getIcon())||void 0===t?void 0:t.icon,x=N&&(0,a().T8)(N)?N:void 0,A=f.getDescription();return{type:"collection",id:v,description:A,descriptionAsString:(0,l().q4_)(A),schema:b,templateId:g(_,"collection",v),name:(0,l().q4_)(f.getName()),pageTemplateIds:f.getTemplatePages(),format:f.getFormat(),icon:x,properties:C,collectionViews:h,firstTableViewId:w,layout:O,templateIdToInstancePointersMap:_,tableOrderPropertyIds:S,automationPointers:P}}function y(e){return"property"===e.type&&"title"===e.id}function v(e){return y(e)&&"Name"===e.schema.name}function I(e){const{collectionInfo:t,pageStore:o,instanceMap:n,recordMap:r}=e,a=(0,l().q4_)(o.getTitleValue())||"Untitled",p=n[(0,i()._)({table:"collection",id:t.id})]??{},c=new Set,s=o.getProperties();for(const i of Object.keys(s))"title"!==i&&c.add(i);return{type:"block",id:o.id,recordMap:r,templateId:g(p,"block",o.id),name:a,propertyIds:c,spaceId:o.getSpaceId()}}function g(e,t,o){var n;return null===(n=_(e,t,o))||void 0===n?void 0:n.templateId}function _(e,t,o){for(const[n,i]of Object.entries(e))for(const e of i)if(e.type===t&&e.id===o)return{...e,templateId:n}}},247211:(e,t,o)=>{o.d(t,{D6:()=>h,Jp:()=>d,OU:()=>I,PT:()=>T,To:()=>v,rW:()=>g,rs:()=>f,vO:()=>y});o(898992),o(354520),o(672577),o(581454);var n=()=>o(496603),i=()=>o(534177),r=()=>o(913454),a=()=>o(134539);const l="content",p="item",c="items",s="optionalDefaultOn",d="/icons/document_gray.svg",u={collection_view:"View",layout:"Layout",collection:"Collection",property:"Property",compound:"Compound",block:"Block",automation:"Automation"},m=Symbol("BuilderKey"),f=y({type:"property",id:o(898244).rn});function y(e){return(0,i().GV)(`${e.type}:${e.id}`,m)}function v(e){if("explicit-undefined"!==e)return e}function I(e){return void 0===e?"explicit-undefined":e}function g(e,t){var o;const n=y(t),u=null===(o=e.state.builderSettings)||void 0===o?void 0:o[n],m=w(e,t),f=m?function(e,t){const o={},n=e.templateRegistryMap.get(t);if(!n)return o;o.name=(0,r().getWorkflowTemplateName)(n),"property"!==n.type&&"collection_view"!==n.type&&"block"!==n.type&&(o.description=n.description);"property"===n.type&&(o.propertyOptionsType=n.propertyOptionsType,o.relatedCollectionTemplateId=n.relatedCollectionTemplateId);if("collection"===n.type){var a;o.hasMinimalOnboarding=null===(a=n.value.onboarding)||void 0===a?void 0:a.isMinimal,o.singularItemName=n.value.targetCollection.itemName.singular,o.pluralItemName=n.value.targetCollection.itemName.plural,o.category=n.category}if("collection"!==n.type&&e.sourceCollectionTemplate){const n=e.sourceCollectionTemplate.value.templateItems.find((e=>e.pointer===t));n?(o.optionality=n.optionality,o.isInSettings=n.isInSettings):o.includeInCollectionTemplate=!1}"compound"===n.type&&(o.icon=n.icon,o.templateItems=n.value.templateItems.map((t=>{const o=e.templateIdToBuilderKeyMap.get(t.pointer);if(o)return{pointer:o,optionality:t.optionality}})).filter(i().O9));return o}(e,e.state.createCopy&&t.templateId?t.templateId:m):{};return{templateId:m,isDeleted:(null==u?void 0:u.isDeleted)??"uninstantiated_template"===t.type,description:((null==u?void 0:u.description)??f.description)||void 0,category:(null==u?void 0:u.category)??f.category,optionality:(0,a().O)(t)?"required":(null==u?void 0:u.optionality)??f.optionality??s,hasMinimalOnboarding:(null==u?void 0:u.hasMinimalOnboarding)??f.hasMinimalOnboarding??!1,singularItemName:(null==u?void 0:u.singularItemName)??f.singularItemName??p,pluralItemName:(null==u?void 0:u.pluralItemName)??f.pluralItemName??c,isInSettings:(null==u?void 0:u.isInSettings)??f.isInSettings??!1,propertyOptionsType:(null==u?void 0:u.propertyOptionsType)??(null==f?void 0:f.propertyOptionsType)??l,includeInCollectionTemplate:(null==u?void 0:u.includeInCollectionTemplate)??(null==f?void 0:f.includeInCollectionTemplate)??!0,templateItems:(null==u?void 0:u.templateItems)??(null==f?void 0:f.templateItems)??[],name:(null==u?void 0:u.name)??(null==f?void 0:f.name)??t.name??("layout"===t.type?"Layout":""),icon:(null==u?void 0:u.icon)??(null==f?void 0:f.icon)??d,bypassCreateCopy:_(u,t),relatedCollectionTemplateId:(null==u?void 0:u.relatedCollectionTemplateId)??(null==f?void 0:f.relatedCollectionTemplateId),ignore:(null==u?void 0:u.ignore)??!!(0,a().NU)(t),shouldMapToTemplate:(null==u?void 0:u.shouldMapToTemplate)??!("collection_view"!==t.type||!t.defaultBuiltinTemplateIdToMapTo)}}function _(e,t){return void 0!==(null==e?void 0:e.bypassCreateCopy)?e.bypassCreateCopy:"property"===t.type&&"relation"===t.schema.type}function w(e,t){var o;const n=y(t),i=null===(o=e.state.builderSettings)||void 0===o?void 0:o[n],r=_(i,t),l=e.state.createCopy&&!r?void 0:t.templateId;if(void 0!==(null==i?void 0:i.templateId))return null==i?void 0:i.templateId;if(void 0!==l)return l;const p="collection"===t.type?"":`${w(e,e.collectionInfo)}.`;return(0,a().O)(t)?`${p}title${u.property}`:"collection_view"===t.type&&t.defaultBuiltinTemplateIdToMapTo&&!1!==(null==i?void 0:i.shouldMapToTemplate)?t.defaultBuiltinTemplateIdToMapTo:t.name&&"uninstantiated_template"!==t.type?p+(c=t.name,s=t.type,`${T(c)}${u[s]}`):"layout"===t.type?`${p}default${u.layout}`:"automation"===t.type?`${p}${t.referrerName}${u.automation}`:void 0;var c,s}function T(e){return(0,n().xQ)(e)}function h(e,t,{includeType:o=!0}={}){let n,i,r;if("string"==typeof t?(i=t,r=e.featureInfoMap.get(t)):(r=t,i=y(r)),r){const t=g(e,r);n=`${t.name||t.templateId}${o?` (${a=r,a.type.replace(/_/g," ")})`:""}`}var a;return n||i}},290966:(e,t,o)=>{o.d(t,{E_:()=>A,HQ:()=>D,I5:()=>$,ZQ:()=>x});o(16280),o(898992),o(823215),o(354520),o(581454),o(296540);var n=()=>o(662303),i=()=>o(536095),r=()=>o(134025),a=()=>o(912720),l=()=>o(179034),p=()=>o(519831),c=()=>o(869558),s=()=>o(144081),d=()=>o(69708),u=()=>o(496603),m=()=>o(534177),f=()=>o(284371),y=()=>o(966759),v=()=>o(873039),I=()=>o(901389),g=()=>o(231297),_=()=>o(67103),w=()=>o(16006),T=()=>o(972435),h=()=>o(41223),S=()=>o(470928),b=()=>o(790392),C=()=>o(148832),k=()=>o(913530),M=()=>o(808655),O=()=>o(913454),P=()=>o(204067),N=o(474848);function x({transaction:e,collectionStore:t,templateId:o,instance:n,logger:i}){i.debug(`Creating/updating workflow template instance record for "${o}".`);const d=t.getSpaceId(),u=n.id;if("automation"===n.type){const n={table:a().yB,id:u,spaceId:d};g().applyOperation({store:b().d.createChildStore(t,n),operation:r().op.set({pointer:n,path:["properties","workflow_template_instance"],args:{template_id:o}}),transaction:e})}else if("block"===n.type){const n={table:l().ev,id:u,spaceId:d};g().applyOperation({store:C().B.createChildStore(t,n),operation:r().op.set({pointer:n,path:["format","workflow_template_instance"],args:{template_id:o}}),transaction:e})}else if("collection"===n.type){const n={table:p().Vl,id:u,spaceId:d};g().applyOperation({store:t,operation:r().op.set({pointer:n,path:["format","workflow_template_instance"],args:{template_id:o}}),transaction:e})}else if("collection_view"===n.type){const n={table:c().Gy,id:u,spaceId:d};g().applyOperation({store:k().p.createChildStore(t,n),operation:r().op.set({pointer:n,path:["format","workflow_template_instance"],args:{template_id:o}}),transaction:e})}else if("layout"===n.type){const n={table:s().zx,id:u,spaceId:d};g().applyOperation({store:M().K.createChildStore(t,n),operation:r().op.set({pointer:n,path:["format","workflow_template_instance"],args:{template_id:o}}),transaction:e})}else if("compound"===n.type){if(n.instancePointers.length<2)throw new Error(`Compound template instance ${n.id} must contain 2 or more instances`);const i=n.instancePointers.map((e=>{switch(e.type){case"automation":return{type:"automation",id:e.id};case"block":return{type:"block",id:e.id};case"collection_view":return{type:"collection_view",id:e.id};case"layout":return{type:"layout",id:e.id};case"property":return{type:"property",id:e.id}}(0,m().HB)(e)}));g().applyOperation({store:t,operation:{command:"keyedObjectListUpdate",pointer:t.pointer,path:["format","compound_workflow_template_instances"],args:{value:{template_id:o,id:n.id,instance_pointers:i}}},transaction:e})}else"property"===n.type?g().applyOperation({store:t,operation:r().op.update({pointer:t.pointer,path:["schema",n.id],args:{workflow_template_instance:{template_id:o}}}),transaction:e}):(0,m().HB)(n)}function A({environment:e,collectionStore:t,propertyId:o,compoundTemplateInstancesToDelete:n,collectionContextStore:r,from:a}){if(!n.every((e=>e.templateId===i().z$)))return!1;if(!(0,h().I)())return!1;const l=(0,P().aL)({environment:e,collectionStore:t,compoundTemplateInstancesToDelete:n}),p=u().sb(l.filter((e=>"property"===e.type)).map((e=>e.id))),c=t.getSchema(),s=p.map((e=>{var t;if(e===o)return;const n=c[e];if(!n)throw new Error(`Property ${e} not found`);if(n.name)return n.name;const i=null===(t=n.workflow_template_instance)||void 0===t?void 0:t.template_id;if(!i)throw new Error(`Property ${e} has no workflow template id`);const r=O().globalWorkflowTemplates.fromId(i);return(0,O().getWorkflowTemplateName)(r)})).filter(m().O9);return B({environment:e,collectionStore:t,propertyIds:p,otherPropertyNames:s,collectionContextStore:r,from:a}),!0}function $({environment:e,collectionStore:t,propertyId:o,collectionContextStore:n,from:i}){const r=t.getSchema(),a=Object.keys(r).filter((e=>(0,S().Do)({collectionStore:t,propertyId:e})||(0,S().k$)(e))),l=a.map((e=>{var n;if(e===o)return;const i=null===(n=r[e])||void 0===n?void 0:n.name;if(i)return i;if((0,S().Do)({collectionStore:t,propertyId:e}))return T().A.formatMessage(_().Gl.verificationPropertyName);if((0,S().k$)(e))return T().A.formatMessage(_().Gl.ownerPropertyName);throw new Error(`Property ${e} must be a verification or owner property`)})).filter(m().O9);return B({environment:e,collectionStore:t,propertyIds:a,otherPropertyNames:l,collectionContextStore:n,from:i}),!0}function B({environment:e,collectionStore:t,propertyIds:o,otherPropertyNames:i,collectionContextStore:r,from:a}){const l=[{label:(0,N.jsx)(d().sA,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deleteOption",defaultMessage:"{count, plural, one {Delete {count} property} other {Delete {count} properties}}",values:{count:o.length}}),color:"red",onAccept:()=>function({environment:e,collectionStore:t,collectionContextStore:o,propertyIds:n,from:i}){g().createAndCommit({userAction:"workflowTemplateInstanceActions.handleDeleteAccept",environment:e,canUndo:!0,perform:r=>{const a=t.getSchema();for(const l of n){(0,v().B)({environment:e,collectionStore:t,schema:a,property:l,transaction:r});const n=a[l];n&&(0,y().i)({environment:e,collectionContextStore:o,property_type:n.type,from:i,property:l})}}})}({environment:e,collectionStore:t,collectionContextStore:r,propertyIds:o,from:a})}],p=new Intl.ListFormat(n().locale,{style:"long",type:"conjunction"}),c=(0,N.jsx)(d().sA,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deletePropertyFromDb",defaultMessage:"Delete this property from <bold>{databaseName}</bold>? {otherPropertyNames} will also be deleted",values:{bold:e=>(0,N.jsx)("span",{style:{fontWeight:f().Wy.bold},children:e}),databaseName:(0,N.jsx)(w().A,{style:{display:"inline",fontWeight:f().Wy.bold},shouldWrap:!0,store:t}),otherPropertyNames:p.format(i)}});I().ui({message:(0,N.jsx)("span",{children:c}),showCancel:!0,keepFocus:!0,innerStyle:{width:400},items:l})}function D(e){const{environment:t,transaction:o,collectionStore:n,instance:i}=e;(0,P().aI)({environment:t,instancePointer:i,inMemoryRecordCache:n.inMemoryRecordCache})||g().applyOperation({store:n,operation:{pointer:n.pointer,command:"keyedObjectListRemove",path:["format","compound_workflow_template_instances"],args:{remove:{id:i.id}}},transaction:o})}},466934:(e,t,o)=>{o.d(t,{bd:()=>m,UA:()=>s,C8:()=>u,XM:()=>c,ET:()=>d,aO:()=>_,gP:()=>h,OX:()=>f,gM:()=>y,hq:()=>g,Wm:()=>I,Rh:()=>w,pp:()=>T,QT:()=>v,Ll:()=>b});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(663077);const i={select_and_customize_template:["templateSelection","features","viewsSelection"],customize_template:["features","viewsSelection"],select_and_build_with_ai:["templateSelection","setupGeneratorInput","setupGeneratorBuilding","features","viewsSelection"],build_with_ai:["setupGeneratorInput","setupGeneratorBuilding","features","viewsSelection"],new_user_template_onboarding:["templateSelection","setupGeneratorBuilding","features","viewsSelection"]};var r=()=>o(498212),a=()=>o(534177),l=()=>o(913454);const p=3;function c({origin:e,parentStore:t,flowId:o,dataSourceAnalytics:n}){return{collectionTemplate:void 0,origin:e,flowId:o??(0,r().Ay)(),collectionTemplatesSearchQuery:void 0,parentStore:t,dataSourceAnalytics:n}}function s({collectionViewTemplates:e,featureTemplateSelections:t}){const o=[];for(const i of e)o.push(...(0,n().CA)({template:i,dependencyMap:i.dependencyMap||{}}).map((e=>e.templateId)));return t.filter((e=>"required"!==e.optionality&&!o.includes(e.template.templateId)&&v(e.template)))}function d({template:e,existingCollectionInfo:t}){const o=new Array(p).fill(""),n=((null==t?void 0:t.collectionViewBlockStore.getCollectionViewIds())??[]).length>1,i=new Map;if(n){let t=!1;for(const o of e.value.templateItems){if("optionalDefaultOn"!==o.optionality)continue;if("collection_view"===l().globalWorkflowTemplates.featureFromId(o.pointer).type){if(!t){t=!0;continue}i.set(o.pointer,"optionalDefaultOff")}}}return{recordTitles:o,featureTemplateSelections:e.value.templateItems.map((e=>m(e.pointer,i.get(e.pointer)??e.optionality)))}}function u(e){const{collectionTemplate:t,origin:o,flowId:n,parentStore:i,dataSourceAnalytics:a,existingCollectionInfo:l}=e;return{collectionTemplate:t,userCustomizations:d({template:t,existingCollectionInfo:l}),origin:o,flowId:n??(0,r().Ay)(),parentStore:i,collectionTemplatesSearchQuery:void 0,previewCollectionInfo:void 0,dataSourceAnalytics:a}}function m(e,t,o=l().globalWorkflowTemplates){const i=o.fromId(e);if(!(0,n().Jb)(i))throw new Error(`Template ${e} in collection template is not a feature template`);return"required"===t?{template:i,optionality:"required",selected:!0}:"optionalDefaultOn"===t?{template:i,optionality:"optionalDefaultOn",selected:!0}:"optionalDefaultOff"===t?{template:i,optionality:"optionalDefaultOff",selected:!1}:void(0,a().HB)(t)}function f(e){if(!e.collectionTemplate)throw new Error("Collection template cannot be undefined");return{collectionTemplate:e.collectionTemplate,userCustomizations:e.userCustomizations,origin:e.origin,flowId:e.flowId,collectionTemplatesSearchQuery:e.collectionTemplatesSearchQuery,parentStore:e.parentStore,previewCollectionInfo:e.previewCollectionInfo,dataSourceAnalytics:e.dataSourceAnalytics}}function y(e){var t,o,n,i,r,a;return{origin:e.origin,has_selection_modal_search_query:((null===(t=e.collectionTemplatesSearchQuery)||void 0===t?void 0:t.length)??0)>0,flow_id:e.flowId,collection_template_id:null===(o=e.collectionTemplate)||void 0===o?void 0:o.templateId,data_source_from:null===(n=e.dataSourceAnalytics)||void 0===n?void 0:n.dataSourceFrom,data_source_session_id:null===(i=e.dataSourceAnalytics)||void 0===i?void 0:i.dataSourceSessionId,destination_type:null===(r=e.parentStore)||void 0===r?void 0:r.table,destination_id:null===(a=e.parentStore)||void 0===a?void 0:a.id}}function v(e){return"property"===e.type&&"relation"!==e.value.type||"compound"===e.type}function I(e){const{version:t}=e;return i[t]}function g(e){const{currentStepIndex:t}=e;return I(e)[t]}function _(e,t){const{currentStepIndex:o,collectionTemplate:n}=e,i=I(e);for(let r=o+1;r<i.length;r++){const e=i[r];if(!(n&&S({step:e,template:n,action:"next",isPhone:t})))return r}return-1}function w(e,t){return _(e,t)>=0}function T(e,t){return h(e,t)>=0}function h(e,t){const{currentStepIndex:o,collectionTemplate:n}=e,i=I(e);for(let r=o-1;r>=0;r--){const e=i[r];if(!(n&&S({step:e,template:n,action:"previous",isPhone:t})))return r}return-1}function S({step:e,template:t,action:o,isPhone:n}){switch(e){case"viewsSelection":return n||l().globalWorkflowTemplates.allOfType({templateIds:t.value.templateItems.map((e=>e.pointer)),type:"collection_view"}).length<=1;case"templateSelection":case"features":case"setupGeneratorInput":return!1;case"setupGeneratorBuilding":return"previous"===o;default:(0,a().HB)(e)}}function b({userCustomizations:e,templateId:t}){const o=e.featureTemplateSelections,n=o.find((e=>e.template.templateId===t));if(!n||"required"===n.optionality)return e;const i={...n,selected:!n.selected};return{...e,featureTemplateSelections:o.map((e=>e.template.templateId===t?i:e)),prevFeatureTemplateSelections:o}}},476219:(e,t,o)=>{o.d(t,{Kg:()=>p,Pg:()=>c,nN:()=>s,vW:()=>d});o(944114),o(898992),o(672577);var n=()=>o(663077),i=()=>o(898244),r=()=>o(496603),a=()=>o(534177),l=()=>o(247211);function p({propertyId:e,propertyTemplate:t,firstTableViewInfo:o}){var n;const i=null==o||null===(n=o.format.table_properties)||void 0===n?void 0:n.find((t=>t.property===e));if(i){const{property:e,...o}=i;t.tablePropertyFormat=o}}function c(e){const{type:t}=e;switch(t){case"title":case"text":case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"date":case"select":case"multi_select":case"status":case"formula":case"relation":case"auto_increment_id":case"button":return!0;case"rollup":case"location":case"verification":case"place":return!1;default:(0,a().HB)(t)}}function s(e){if("relation"===e.type)return{type:"relation",name:e.name,autoRelate:e.autoRelate};const t=(0,r().mg)(e);if(delete t.workflow_template_instance,(0,i().DQ)(t)&&t.options)for(const o of t.options)delete o.collectionIds;return t}function d({propertyTemplateValue:e,mapper:t}){const o=[];if((0,n().$G)({object:e,callback:e=>{const t=e.property;o.push(t)}}),0===o.length)return;const i={};for(const n of o)t.populateDependencyMap((0,l().vO)({type:"property",id:n}),i);return i}},731638:(e,t,o)=>{o.d(t,{CF:()=>l,f:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=()=>o(247211),i=()=>o(204067);function r({collectionStore:e,modules:t,dependencyMap:o}){return p({modules:t,mapper:a(e,o)})}function a(e,t){return o=>(0,i().CB)({collectionStore:e,sourceTemplateType:"property",sourcePrimitiveId:o,dependencyMap:t})}function l(e){const t=new Set;return p({modules:e,mapper:e=>(t.add((0,n().vO)({type:"property",id:e})),e)}),t}function p({modules:e,mapper:t}){const o=e=>e?e.map((e=>function({module:e,mapper:t}){switch(e.type){case"bottomControls":case"relationsGroup":case"cover":case"discussions":case"editor":case"expandedBacklinks":case"formQuestion":case"formSubmit":case"formTitle":case"inlinePageSections":case"placeholder":case"properties":case"transcript":case"viewsMain":return e;case"property":return{...e,propertyId:t(e.propertyId)};case"titleWithIcon":return{...e,propertyIds:e.propertyIds?e.propertyIds.map(t):void 0};case"views":return{...e,relation_pointer:e.relation_pointer?{...e.relation_pointer,property:t(e.relation_pointer.property)}:void 0}}return e}({module:e,mapper:t}))):void 0;return{page_layout_schema:o(e.page_layout_schema),page_info_layout_schema:o(e.page_info_layout_schema),form_layout_schema:o(e.form_layout_schema),person_profile_page_main:o(e.person_profile_page_main),person_profile_page_details:o(e.person_profile_page_details)}}}}]);