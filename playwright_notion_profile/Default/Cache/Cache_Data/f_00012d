"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[85553],{8227:(e,t,n)=>{n.d(t,{j:()=>M});n(898992),n(823215),n(296540);var i=()=>n(484714),o=()=>n(56366),s=()=>n(401497),a=()=>n(252291),r=()=>n(700500),l=()=>n(601813),d=()=>n(522419),c=()=>n(340498),u=n(474848);const m={viewBox:"0 0 16 16",fittedViewBox:"3.09 2.55 9.81 10.89",svg:(0,u.jsx)("path",{d:"M11.762 3.338a2.657 2.657 0 0 0-3.758 0L4.172 7.17a3.673 3.673 0 0 0 5.195 5.195l3.353-3.353a.625.625 0 0 0-.884-.884L8.484 11.48a2.423 2.423 0 1 1-3.427-3.427l3.832-3.832a1.407 1.407 0 0 1 1.99 1.99l-3.832 3.832a.391.391 0 0 1-.553-.553L8.41 7.575a.625.625 0 1 0-.884-.884L5.61 8.607a1.641 1.641 0 1 0 2.321 2.32l3.832-3.831a2.657 2.657 0 0 0 0-3.758"})},p=(0,c().wt)("paperClipSmall",m);var g=()=>n(782798);const f={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.37 11.75 9.25",svg:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M6.753 5.845a.383.383 0 0 0-.576.33v3.85c0 .295.321.477.576.33l3.332-1.926a.38.38 0 0 0 0-.658z"}),(0,u.jsx)("path",{d:"M4 3.375c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h8c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.036-.84-1.875-1.875-1.875zM3.375 5.25c0-.345.28-.625.625-.625h8c.345 0 .625.28.625.625v5.5c0 .345-.28.625-.625.625H4a.625.625 0 0 1-.625-.625z"})]})},x=(0,c().wt)("playButtonSmall",f),h={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.89 12.05 12.21",svg:(0,u.jsx)("path",{d:"M6.92 1.895a.625.625 0 0 0-.625.625v10.96a.625.625 0 1 0 1.25 0V2.52a.625.625 0 0 0-.625-.625m-2.16 1.84a.625.625 0 0 0-.625.625v7.28a.625.625 0 1 0 1.25 0V4.36a.625.625 0 0 0-.625-.625m6.48.4a.625.625 0 0 0-.625.625v6.48a.625.625 0 1 0 1.25 0V4.76a.625.625 0 0 0-.625-.625m-2.16 1.04a.625.625 0 0 0-.625.625v4.4a.625.625 0 1 0 1.25 0V5.8a.625.625 0 0 0-.625-.625M2.6 6.295a.625.625 0 0 0-.625.625v2.16a.625.625 0 1 0 1.25 0V6.92a.625.625 0 0 0-.625-.625m10.8 0a.625.625 0 0 0-.625.625v2.16a.625.625 0 0 0 1.25 0V6.92a.625.625 0 0 0-.625-.625"})},v=(0,c().wt)("waveformSmall",h);var S=()=>n(201980),y=()=>n(969842),b=()=>n(69708),w=()=>n(712030),j=()=>n(921855),A=()=>n(299545);const I=(0,b().YK)({filesString:{id:"commentText.filesString",defaultMessage:"{count, plural, one {# file} other {# files}}"}});function k(e){if("inbox_notification"===e)return 14}const T=96;function M(e){const{discussionStore:t,commentStore:n,location:c,fallbackText:m}=e,f=function(e){return"inbox_notification"===e?2:"unread_discussions_popup"===e?1:void 0}(c),h=(0,i().v3)(),M=(0,s().DP)(),C=(0,b().tz)(),D=(0,o().K8)((()=>{const e=A().gp(n).getValue();if(e&&(0,S().w9s)(e)&&t.isSuggestionDiscussion()){const e=t.getContext();if(e)return(0,l().l8)({discussionContextData:e,discussionType:"suggestion",discussionId:t.id,intl:C})}return e}),[n,t,C]),B=(0,o().K8)((()=>n.getSpaceId()),[n]),R=(0,o().K8)((()=>{const e=A().dd(n);if(!e||0===e.length)return null;const t=e[0],i=function(e){switch(e.getType()){case r().xd.image:return g().R;case r().xd.video:return x;case r().xd.audio:return v;default:return p}}(t),o=e.length,s=t.getProperties(),a=(0,S().q4_)(null==s?void 0:s.source),l=(0,S().q4_)(null==s?void 0:s.title),c=(0,d().SB)({title:l,source:a||""});if(1===o&&c)return{iconFunction:i,text:c,fileCount:1};const m=t.getType();return{iconFunction:e.every((e=>e.getType()===m))?i:p,fileCount:o,text:(0,u.jsx)(b().sA,{...I.filesString,values:{count:o}})}}),[n]),K=(0,o().K8)((()=>{if(!D||!B)return null;const e="inbox_notification"===c?(0,y().Eh)({textValue:D,currentUserId:h.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"}):D;return(0,j().S5)({environment:h,textValue:{value:e,spaceId:B},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:M,emojiType:(0,w().FN)(h),katex:h.KatexStore.getKatex(),formulaValueTypes:[]})}),[D,B,c,h,t,M]),N=(0,s().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:k(c),color:e.text.secondary,lineHeight:"21px",position:"relative",overflow:"hidden"},lineTruncation:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:f},lineTruncationFlex:{display:"flex",flexDirection:"row",width:"100%"},singleLineTruncation:{maxWidth:R?`calc(100% - ${T}px)`:void 0,...1===f&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},fileAttachment:{display:"inline-flex",alignItems:"baseline",gap:4,maxWidth:T,marginInlineStart:K?4:-2,color:e.text.tertiary,verticalAlign:"baseline"},fileIcon:{flexShrink:0,color:e.text.tertiary,alignSelf:"center"},fileText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:1===(null==R?void 0:R.fileCount)?T-20:void 0}})),[R,f,c,K]);return K||R?(0,u.jsxs)("span",{style:{...N.commentText,...1===f?N.lineTruncationFlex:N.lineTruncation},children:[K?(0,u.jsx)("span",{style:N.singleLineTruncation,children:K}):void 0,R?(0,u.jsxs)("span",{style:N.fileAttachment,children:[(0,u.jsx)(a().I,{icon:R.iconFunction,size:"sm",style:N.fileIcon}),(0,u.jsx)("span",{style:N.fileText,children:R.text})]}):void 0]}):(0,u.jsx)("span",{style:N.commentText,children:m||null})}},22426:(e,t,n)=>{n.d(t,{$w:()=>de,sE:()=>xe});n(944114),n(898992),n(354520),n(581454);var i=n(296540),o=()=>n(484714),s=()=>n(56366),a=()=>n(401497),r=()=>n(611648),l=()=>n(150669),d=()=>n(252291),c=()=>n(406094),u=()=>n(373009),m=()=>n(895189),p=()=>n(69708),g=()=>n(496603),f=()=>n(534177),x=()=>n(284371),h=()=>n(8227),v=()=>n(760217),S=()=>n(404277),y=()=>n(939740),b=()=>n(279047),w=()=>n(2143),j=()=>n(89924),A=()=>n(125565),I=()=>n(709438),k=()=>n(712030),T=()=>n(381678),M=()=>n(921855),C=()=>n(722872),D=()=>n(141333),B=()=>n(123021),R=()=>n(200688),K=()=>n(623275),N=()=>n(869562),U=()=>n(737230),z=()=>n(463830),E=()=>n(789557),P=()=>n(725332),V=()=>n(938045),F=()=>n(848565),L=()=>n(655236),_=()=>n(835066),H=()=>n(116008),O=()=>n(456101),W=n(474848);const G=(0,p().YK)({unreadDiscussions:{defaultMessage:"Discussions",id:"topbar.discussionsPopup.unreadDiscussions"},seeAll:{defaultMessage:"See all",id:"topbar.discussionsPopup.seeAll"},caughtUpMessage:{defaultMessage:"You’re all caught up",id:"topbar.discussionsPopup.caughtUpMessage"},caughtUpSubMessage:{defaultMessage:"There are no open discussions",id:"topbar.discussionsPopup.caughtUpSubMessage"},newSectionTitle:{defaultMessage:"New",id:"topbar.discussionsPopup.newSectionTitle"},previousSectionTitle:{defaultMessage:"Previous",id:"topbar.discussionsPopup.previousSectionTitle"},draftSectionTitle:{defaultMessage:"Draft",id:"topbar.discussionsPopup.draftSectionTitle"},viewCommentFallback:{defaultMessage:"View comment",id:"topbar.discussionsPopup.viewComment"},viewDraftCommentFallback:{defaultMessage:"View draft comment",id:"topbar.discussionsPopup.viewDraftComment"}}),$=14,J=16,Z=16,Y=20,q=10,X=2*q+F().eQ,Q=28+F().eQ,ee=268,te=25,ne=5,ie=384,oe=492,se=8,ae=32,re="unread_discussions_popup";function le(e){return e.sort(((e,t)=>{var n,i;const o=e.getUserSeenRecordStore(),s=t.getUserSeenRecordStore(),a=(null==o?void 0:o.getLastSeenAt())??0,r=(null==s?void 0:s.getLastSeenAt())??0;if(r-a!=0)return r-a;const l=(null===(n=e.getLastCommentStore())||void 0===n?void 0:n.getCreatedTime())??0;return((null===(i=t.getLastCommentStore())||void 0===i?void 0:i.getCreatedTime())??0)-l}))}function de(e){const{blockStore:t,unreadDiscussionsPopupStore:n}=e,i=(0,R().S)(t),o=(0,s().K8)((()=>i.filter((e=>!e.getResolved()))),[i]),a=(0,s().K8)((()=>H().A.isComposingNewDiscussion()),[]),r=0===o.length&&!a,{unreadDiscussions:l,readDiscussions:d}=(0,s().K8)((()=>{const[e,n]=g().jB(o,(e=>(0,L().s)({discussionStore:e,navigableBlockStore:t.getNavigableBlockStore()})));return{unreadDiscussions:le(e).slice(0,te),readDiscussions:le(n).slice(0,ne)}}),[o,t]);return(0,W.jsx)(ce,{blockStore:t,unreadDiscussions:l,readDiscussions:d,shouldRenderZeroState:r,unreadDiscussionsPopupStore:n})}function ce({blockStore:e,unreadDiscussions:t,readDiscussions:n,shouldRenderZeroState:d,unreadDiscussionsPopupStore:c}){const u=(0,s().uB)(void 0,z().A),m=(0,s().uB)(void 0,l().A),g=(0,a().IS)((e=>({container:{width:K().$D,fontSize:x().J.UIRegular.desktop,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",maxHeight:oe},header:{paddingTop:$,paddingBottom:q,paddingInlineStart:Z,paddingInlineEnd:Z,width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",color:e.text.primary,fontWeight:x().Wy.medium,flexShrink:0},notificationDropdown:{marginInlineEnd:-6},scroller:{flexGrow:1,minHeight:0,maxHeight:ie,width:"100%"},menuListStyle:{width:"100%",paddingInlineStart:0,paddingInlineEnd:0}})),[]),f=(0,o().v3)(),h=xe({unreadDiscussions:t,readDiscussions:n,handleDiscussionClick:(0,i.useCallback)((async t=>{var n;c.reset();const i=(0,_().$N)(f,e),o=(0,L().g)({discussionStore:t,navigableBlockStore:e.getNavigableBlockStore()});"unread"===o&&"page"===(null===(n=t.getParentStore())||void 0===n?void 0:n.getType())&&(0,P().X)({environment:f,discussionStores:[t]}),await E().DZ({discussionStore:t,currentBlockStore:e,environment:f,analyticsFrom:re,currentEl:null,shouldSetRect:!0,animateScroll:i,discussionReadStatus:o})}),[f,e,c]),handleDraftDiscussionClick:(0,i.useCallback)((()=>{c.reset();const t=H().A.getDiscussionInputStore();(0,V().x)({currentBlockStore:e,discussionInputStore:t,environment:f})}),[e,f,c]),isMobile:!1,hasDraftComment:(0,s().K8)((()=>H().A.isComposingNewDiscussion()),[])}),v=(0,i.useCallback)((()=>{c.reset(),U().Ay.setToShowAllDiscussions(),N().handleSidebarButtonClick(f,e,U().tF.Comments,"new_discussions_sheet")}),[f,e,c]);return(0,W.jsxs)("div",{style:g.container,children:[(0,W.jsxs)("div",{style:g.header,children:[(0,W.jsx)(p().sA,{...G.unreadDiscussions}),(0,W.jsx)("div",{style:g.notificationDropdown,children:(0,W.jsx)(B().O,{blockStore:e,from:re,buttonPopupStore:u,renderType:"button"})})]}),d?(0,W.jsx)(me,{handleSeeAllComments:v}):(0,W.jsxs)(S().A,{menuType:C().gu.Popup,width:K().$D,children:[(0,W.jsx)(w().H,{type:r().A.Y,style:g.scroller,store:m,children:(0,W.jsx)(y().Ay,{type:y().Oh.Vertical,sections:h,initialFocus:void 0,style:g.menuListStyle})}),(0,W.jsx)(ue,{scrollerStore:m,handleSeeAllComments:v})]})]})}function ue({scrollerStore:e,handleSeeAllComments:t}){const n=(0,s().K8)((()=>e.state.elementRef),[e]),i=(0,D().CR)(n)>(0,D().o7)(n),o=(0,a().IS)((e=>({footer:{display:"block",flexGrow:0,flexShrink:0,flexBasis:"auto",width:"100%"},footerContent:{width:"100%",paddingTop:i?16:8,paddingBottom:J,paddingInlineStart:Z,paddingInlineEnd:Z},seeAllButton:{width:"100%",height:ae}})),[i]);return(0,W.jsxs)("div",{style:o.footer,children:[(0,W.jsx)(b().A,{type:"bottom",scrollerStore:e}),(0,W.jsx)("div",{style:o.footerContent,children:(0,W.jsx)(u().E,{onClick:t,style:o.seeAllButton,children:(0,W.jsx)(A().A,{children:(0,W.jsx)(p().sA,{...G.seeAll})})})})]})}function me({handleSeeAllComments:e}){const t=(0,p().tz)(),n=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:ee,width:"100%",paddingBottom:J,paddingInlineStart:Z,paddingInlineEnd:Z},messageContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},caughtUpMessage:{marginTop:6,fontWeight:x().Wy.medium},caughtUpSubMessage:{marginTop:2},seeAllButton:{fontSize:x().J.UIRegular.desktop,marginTop:q}})),[]);return(0,W.jsxs)("div",{style:n.container,children:[(0,W.jsxs)("div",{style:n.messageContainer,children:[(0,W.jsx)(d().I,{icon:m().d,size:"xl",colorVariant:"tertiary"}),(0,W.jsx)(A().A,{isSecondaryColor:!0,style:n.caughtUpMessage,children:t.formatMessage(G.caughtUpMessage)}),(0,W.jsx)(A().A,{isSecondaryColor:!0,style:n.caughtUpSubMessage,children:t.formatMessage(G.caughtUpSubMessage)})]}),(0,W.jsx)(c().A,{onClick:e,style:n.seeAllButton,size:"lg",children:t.formatMessage(G.seeAll)})]})}function pe({focused:e,isMobile:t,onClick:n,authorElement:i,contentElement:o,rightElement:s}){const r=(0,a().IS)((e=>{const n=t?x().J.UIRegular.mobile:x().J.UIRegular.desktop,i=t?Y/2:Z/2,o=t?void 0:q;return{container:{paddingInlineStart:i,paddingInlineEnd:i,fontSize:n,width:"100%"},buttonStyle:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:6,paddingTop:o,paddingBottom:o,paddingInlineStart:i,paddingInlineEnd:i+(t?0:2),borderRadius:8,maxHeight:t?Q:X,minHeight:t?Q:void 0},left:{marginInlineStart:0},right:{marginInlineEnd:0},contentContainer:{display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden",flex:1,fontSize:n,gap:6,color:e.text.secondary},menuItem:{borderBottom:void 0,background:void 0,paddingInlineStart:0,paddingInlineEnd:0,gap:6}}}),[t]);return(0,W.jsx)("div",{style:r.container,children:(0,W.jsx)(v().A,{onClick:n,focused:e,buttonStyle:r.buttonStyle,style:r.menuItem,itemMarginLeft:0,itemMarginRight:0,leftStyle:r.left,left:i,title:(0,W.jsx)("div",{style:r.contentContainer,children:o}),right:s,rightStyle:r.right})})}function ge({discussionStore:e,handleClick:t,focused:n,isMobile:i,isUnread:o}){const r=(0,a().IS)((e=>({text:{color:e.text.secondary,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:x().Wy.regular}})),[]),l=(0,s().K8)((()=>e.getLastCommentStore()),[e]),{authorStore:d,createdTime:c,lastEditedTime:u}=(0,s().K8)((()=>({authorStore:null==l?void 0:l.getCreatedByStore(),createdTime:null==l?void 0:l.getCreatedTime(),lastEditedTime:null==l?void 0:l.getLastEditedTime()})),[l]),m=(0,s().K8)((()=>(0,W.jsx)("div",{style:r.text,children:(0,W.jsx)(p().sA,{...G.viewCommentFallback})})),[r.text]);if(!d||!c||!u)return null;const g=i?x().J.UIRegular.mobile:x().J.UIRegular.desktop;return(0,W.jsx)(pe,{focused:n,isMobile:i,onClick:async()=>await t(e),authorElement:(0,W.jsx)(O().Y,{authorStore:d,location:"updates_sidebar",createdTime:c,lastEditedTime:u,suppressMouse:!0,shouldOmitTimestamp:!0,authorFontSizeOverride:g}),contentElement:l?(0,W.jsx)(h().j,{discussionStore:e,commentStore:l,location:"unread_discussions_popup",fallbackText:m}):m,rightElement:o?(0,W.jsx)(I().m,{size:se}):void 0})}function fe({focused:e,isMobile:t,handleClick:n}){const i=(0,a().IS)((e=>({text:{color:e.text.secondary,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:x().Wy.regular}})),[]),r=(0,o().v3)(),l=(0,a().DP)(),d=(0,s().K8)((()=>(0,T()._)(r)),[r]),c=(0,s().K8)((()=>(0,W.jsx)("div",{style:i.text,children:(0,W.jsx)(p().sA,{...G.viewDraftCommentFallback})})),[i.text]),u=(0,s().K8)((()=>{var e;const t=null===(e=H().A.getDiscussionInputStore())||void 0===e?void 0:e.getState().textStore.getValue(),n=H().A.getBlockStore(),i=null==n?void 0:n.getSpaceId();return t&&(0,f().O9)(i)&&H().A.state.open&&n?(0,M().S5)({textValue:{value:t,spaceId:i},parentStore:n,environment:r,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:l,emojiType:(0,k().FN)(r),katex:r.KatexStore.getKatex(),formulaValueTypes:[]}):c}),[r,c,l]);if(!d)return null;const m=t?x().J.UIRegular.mobile:x().J.UIRegular.desktop;return(0,W.jsx)(pe,{focused:e,isMobile:t,onClick:n,authorElement:(0,W.jsx)(O().Y,{authorStore:d,location:"updates_sidebar",suppressMouse:!0,shouldOmitTimestamp:!0,authorFontSizeOverride:m,lastEditedTime:Date.now(),createdTime:Date.now()}),contentElement:u,rightElement:(0,W.jsx)(I().m,{size:se,color:"#CB9433"})})}function xe({unreadDiscussions:e,readDiscussions:t,handleDiscussionClick:n,handleDraftDiscussionClick:i,isMobile:o,hasDraftComment:s}){const a=(()=>{const n=[];return s&&n.push("draft"),e.length>0&&n.push("new"),t.length>0&&n.push("previous"),n})(),r=(e,t)=>{const n=(e=>{const t=a.length>0&&e===a[0];return{desktop:{paddingInlineStart:Z,paddingInlineEnd:Z,marginBottom:4,marginTop:t?2:8},mobile:{paddingInlineStart:Y,paddingInlineEnd:Y,marginTop:t?14:0}}})(e),i="draft"!==e&&1===a.length;return e=>(0,W.jsx)(j().A,{...e,disableMobilePadding:!0,disableDesktopPadding:!0,title:(0,W.jsx)(p().sA,{...t}),mobileTitleStyle:n.mobile,desktopTitleStyle:n.desktop,hideTitle:i})},l={draft:{key:"draft",render:r("draft",G.draftSectionTitle),items:[{key:"draft_discussion",render:e=>(0,W.jsx)(fe,{focused:e.focused,isMobile:o,handleClick:i}),action:i}]},new:{key:"new",render:r("new",G.newSectionTitle),items:e.map((e=>({key:e.id,render:t=>(0,W.jsx)(ge,{focused:t.focused,discussionStore:e,handleClick:n,isMobile:o,isUnread:!0}),action:async()=>{await n(e)}})))},previous:{key:"previous",render:r("previous",G.previousSectionTitle),items:t.map((e=>({key:e.id,render:t=>(0,W.jsx)(ge,{focused:t.focused,discussionStore:e,handleClick:n,isMobile:o,isUnread:!1}),action:async()=>{await n(e)}})))}};return a.map((e=>l[e]))}},27356:(e,t,n)=>{n.r(t),n.d(t,{UISpacePermissionGroupToken:()=>h});var i=n(296540),o=()=>n(726637),s=()=>n(484714),a=()=>n(56366),r=()=>n(401497),l=()=>n(784892),d=()=>n(437607),c=()=>n(914462),u=()=>n(69708),m=()=>n(284371),p=()=>n(764353),g=()=>n(848401),f=()=>n(580648),x=n(474848);function h(e){const{parentStore:t,style:n,format:h}=e,v=e.groupPointer.id,S=e.groupPointer.spaceId,y=(0,d().S4)({spacePermissionGroupId:v,spaceId:S}),b=(0,a().K8)((()=>{if(e.groupModel)return e.groupModel;if(!t)return;return p().C.createChildStore(t,y).getModel()}),[t,y,e.groupModel]),w=(0,s().Y0)(),{outerStyle:j,avatarWrapStyle:A}=(0,r().IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginInlineEnd:6},badgeStyle:{borderRadius:4,background:e.legacyDefaultSelectColor,fontSize:o().A.isMobile?11:9,lineHeight:w.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[w]),I=(0,u().tz)(),k=(0,a().K8)((()=>(0,c().n)({intl:I,permissionGroupModel:b})),[I,b]),T=(0,i.useCallback)((e=>h===l().NY.Inline?(0,x.jsx)(f().o,{group:b,size:e}):(0,x.jsxs)("div",{style:j,children:[(0,x.jsx)("div",{style:A,children:(0,x.jsx)(f().o,{group:b,size:e})}),(0,x.jsx)("div",{style:{...m().RC},children:k})]})),[h,j,A,b,k]);return(0,x.jsx)(g().Ay,{...e,style:{margin:0,...n},renderAvatar:T})}},53528:(e,t,n)=>{n.d(t,{OH:()=>r,T2:()=>l,do:()=>d});var i=()=>n(597777),o=()=>n(869190),s=()=>n(604995),a=()=>n(416504);function r(e){const{dateTime:t,intl:n,shortenDateAndRange:i}=e,a=s().C6.toPersistedDate(t.valueOf());return o().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:i,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:r}=e,l=s().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return o().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:r})}function d(e){const{luxonRange:t,intl:n}=e,r=s().C6.toPersistedDateRange(t),l=o().ZF({value:r,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),d=t.end.setZone((0,a().P)()),c=o().fU({start_time:d.toFormat(i().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}},104077:(e,t,n)=>{n.d(t,{r:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.79 2.35 14.41 15.68",svg:(0,n(474848).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},o=(0,n(340498).wt)("bell",i)},123021:(e,t,n)=>{n.d(t,{O:()=>I});n(898992),n(672577),n(581454);var i=n(296540),o=()=>n(484714),s=()=>n(56366),a=()=>n(401497),r=()=>n(631524),l=()=>n(104077),d=()=>n(588047),c=()=>n(668725),u=()=>n(69708),m=()=>n(284371),p=()=>n(10521),g=()=>n(848259),f=()=>n(452558),x=()=>n(406699),h=()=>n(404277),v=()=>n(89924),S=()=>n(859428),y=()=>n(722872),b=()=>n(553965),w=()=>n(538075),j=()=>n(518773),A=n(474848);function I(e){var t;const{blockStore:n,from:I,buttonPopupStore:k,renderType:T}=e,M=(0,o().v3)(),C=(0,s().K8)((()=>n.isPageBlock()),[n]),D=(0,s().K8)((()=>n.getFollowSettingsKey()),[n]),B=(0,i.useCallback)((()=>{g().zP({environment:M,pageId:n.pointer.id,isCurrentlyFollowing:(0,j().A)(D).following,from:I})}),[n.pointer.id,M,D,I]),R=(0,s().K8)((()=>w().H8({followSettingsKey:D,environment:M,blockStore:n,from:I})),[D,M,n,I]),K=(0,a().IS)((e=>({buttonContainer:{display:"flex",alignItems:"center",color:e.text.secondary,borderRadius:4,marginInlineEnd:0,fontSize:m().J.UIRegular.desktop,..."button"===T?{paddingInlineStart:2,paddingInlineEnd:2}:{padding:"4px 10px"}},chevronIcon:{marginInlineStart:4,width:10,height:10},spacer:{flexGrow:1}})),[T]),N=null===(t=R.find((e=>w().I7({key:e.action.analyticsName,userSelectedKey:D}))))||void 0===t?void 0:t.title;return C?(0,A.jsx)(x().A,{popupType:x().z.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",sameWidthAsOrigin:"select"===T,buttonPopupStore:k,render:e=>(0,A.jsx)(h().A,{menuType:y().gu.Popup,minWidth:290,maxHeight:"50vh",children:(0,A.jsx)(f().A,{context:{blocks:[],environment:M,publicEditMode:void 0},sections:[(0,p().gy)({key:"in-app-notifications-section",render:e=>(0,A.jsx)(v().A,{...e,title:"button"===T?(0,A.jsx)(u().sA,{id:"GetNotifiedDropdown.options.header",defaultMessage:"Page notification settings"}):void 0}),actions:R.map((e=>e.action))})],initialFocus:void 0,onAccept:()=>e.close()})}),renderOrigin:e=>"select"===T?(0,A.jsxs)(r().p,{...(0,b().A)(e,{onClick:B}),style:K.buttonContainer,iconLeading:{icon:d().k,size:"xs"},children:[N,(0,A.jsx)("div",{style:K.spacer}),(0,c().b)(K.chevronIcon)]}):(0,A.jsx)(S().A,{placement:"bottom",renderTooltip:()=>(0,A.jsx)(u().sA,{id:"GetNotifiedDropdown.button.tooltip",defaultMessage:"Page notification settings"}),render:t=>(0,A.jsx)(r().p,{...(0,b().A)((0,b().A)(t,{onClick:B}),e),style:K.buttonContainer,size:"sm",iconLeading:{icon:l().r,size:"default"}})})}):null}},200688:(e,t,n)=>{n.d(t,{B:()=>l,S:()=>r});n(898992),n(354520);var i=()=>n(56366),o=()=>n(774733),s=()=>n(655236),a=()=>n(645873);function r(e,t){const{value:n}=(0,a().fJ)(o().commentsDependency);return(0,i().K8)((()=>e&&n?n.discussionHelpers.getDiscussionsForSidebar({blockStore:e,currentUserId:e.userId,ignoreAfterTime:t??Date.now()}).filter((e=>e.isDefined()&&e.getCommentPointers().length>0)):[]),[n,e,t])}function l({navigableBlockStore:e}){const t=r(e);return(0,i().K8)((()=>t.filter((t=>(0,s().s)({discussionStore:t,navigableBlockStore:e})))),[t,e])}},279047:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(296540),o=()=>n(56366),s=()=>n(401497),a=()=>n(141333),r=n(474848);const l=4;function d({scrollerStore:e,type:t,dividerColor:n,errorMargin:d=l}){const c=(0,o().K8)((()=>e.state.elementRef),[e]),u=(0,a().Xg)(c),m=(0,a().CR)(c),p=(0,a().sj)(c),g=(0,a().yE)(c),f=(0,a().o7)(c),x=(0,a().HJ)(c),h=(0,i.useMemo)((()=>{if(!e)return!1;switch(t){case"top":return Math.round(g)>d;case"bottom":return Math.abs(Math.round(g)-(m-f))>d;case"left":return Math.round(p)>d;case"right":return Math.abs(Math.round(p)-(u-x))>d}}),[e,t,d,u,m,p,g,f,x]),v="left"===t||"right"===t,S=(0,s().IS)((e=>({divider:{flexShrink:0,boxShadow:h?v?`1px 0 0 ${n??e.regularDividerColor}`:`0 1px 0 ${n??e.regularDividerColor}`:"0 0 0 transparent",transition:"box-shadow 300ms",...v?{width:1,height:"100%",marginInlineStart:-1}:{height:1,width:"100%",marginTop:-1},zIndex:99}})),[v,h,n]);return(0,r.jsx)("div",{style:S.divider})}},300985:(e,t,n)=>{n.d(t,{Z:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.49 2.37 15.01 15.25",svg:(0,n(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},o=(0,n(340498).wt)("curlyBraces",i)},456101:(e,t,n)=>{n.d(t,{Y:()=>_,e:()=>L});var i=n(296540),o=()=>n(59226),s=()=>n(726637),a=()=>n(484714),r=()=>n(56366),l=()=>n(401497),d=()=>n(970236),c=()=>n(97294),u=()=>n(584262),m=()=>n(517198),p=()=>n(381553),g=()=>n(120739),f=()=>n(179034),x=()=>n(854150),h=()=>n(69708),v=()=>n(284371),S=()=>n(296798),y=()=>n(824160),b=()=>n(187820),w=()=>n(16006),j=()=>n(125565),A=()=>n(659799),I=()=>n(492414),k=()=>n(907514),T=()=>n(436525),M=()=>n(617711),C=()=>n(396933),D=()=>n(915019),B=()=>n(765957),R=()=>n(870092),K=()=>n(898808),N=()=>n(848565),U=()=>n(143943),z=()=>n(811879),E=n(474848);function P(e){const{authorStore:t,displayName:n,suppressMouse:i,styles:o}=e,s=(0,a().v3)(),l=(0,r().O$)(B().AppStoreSidebarSpaceStore),d=t instanceof R().L?t.id:void 0,m="show"===(0,C().$)({spaceStore:l,viewedUserId:d}),p=(0,r().K8)((()=>{const e=t.id;return(0,M().MN)({userId:e,currentSpaceStore:B().default.state.sidebarSpaceStore,environment:s,pageVisitSource:u().y8.CommentAuthor})}),[t,s]),g=(0,E.jsx)("div",{style:o.author,children:n||(0,E.jsx)("span",{style:o.placeholder})});return m&&!i?(0,E.jsx)(c().N,{href:p,children:g}):g}function V({sourceStore:e,iconSize:t,styles:n}){const i=(0,r().K8)((()=>null==e?void 0:e.getSpaceId()),[e]),o=null==e?void 0:e.table,s=(0,r().K8)((()=>o===x().yK?null==e?void 0:e.getName():void 0),[e,o]),a=(0,r().K8)((()=>o===f().ev?null==e?void 0:e.getIcon():void 0),[e,o]),l=(0,r().K8)((()=>(0,b().Te)(e)),[e]),d=(0,r().K8)((()=>{if(o)return o===f().ev?(0,I().Ay)({store:e,pageVisitSource:u().y8.UnifiedFeedScroll}):(0,g().a)({teamId:e.id,spaceId:i})}),[e,o,i]);return e?o===x().yK?(0,E.jsx)(S().A,{style:n.linkBox,href:d,children:(0,E.jsxs)("div",{style:n.teamIconAndName,children:[(0,E.jsx)(K().x,{size:t,store:e,disabled:!1}),(0,E.jsx)("span",{style:n.teamName,children:s})]})}):(0,E.jsx)(D().A,{store:e,render:i=>(0,E.jsx)(S().A,{href:d,style:n.linkBox,...i,children:(0,E.jsxs)("div",{style:n.teamIconAndName,children:[(0,E.jsx)(b().B6,{disabled:!0,isEmptyPage:!1,icon:a,iconRecordCategory:l,size:t,emojiSize:t,disableShrinking:!0,largeIcon:!0}),(0,E.jsx)(w().A,{style:n.teamName,store:e,underline:!1})]})})}):null}function F({createdTime:e,lastEditedTime:t,style:n,authorRowLocation:i}){const o=t&&t>e+5e3,s=(0,U().C)({type:"discussionLocation",location:i});return(0,E.jsx)(j().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:n,isMobile:s,children:o?(0,E.jsx)(O,{createdTime:e,lastEditedTime:t}):(0,E.jsx)(H,{createdTime:e})})}function L({lastEditedTime:e,createdTime:t,location:n,sourceStore:o,authorStore:s,isSuggested:a,commentStore:l}){const d=(0,h().tz)(),c=(0,i.useRef)(null),u=(0,r().K8)((()=>{const e=s.getDisplayName(d);return l?l.resolveAuthorDisplayName({intl:d,defaultDisplayName:e}):e}),[l,d,s]),m=W({location:n,authorFontSize:15,enableTeamNameUnderline:!1}),p=(0,r().K8)((()=>null==o?void 0:o.isTable(x().yK)),[o]);return t?(0,E.jsxs)("div",{style:{...m.mobileAuthorRow},children:[(0,E.jsx)("div",{style:{...m.user,...m.mobileUserAvatar},children:(0,E.jsx)(z().E,{authorStore:s,avatarSize:35,avatarStyle:m.avatar})}),(0,E.jsxs)("div",{style:{...m.mobileUserAndTeamLink},children:[(0,E.jsx)("div",{style:m.userRow,children:(0,E.jsxs)("div",{ref:c,style:m.user,children:[(0,E.jsx)(P,{authorStore:s,displayName:u,suppressMouse:!1,styles:m}),(0,E.jsx)(F,{createdTime:t,lastEditedTime:e,style:m.timestamp,authorRowLocation:n}),a?(0,E.jsx)(G,{}):null]})}),(0,E.jsx)("div",{style:{...m.user,...m.mobileTeamLink},children:p?(0,E.jsx)(V,{sourceStore:o,iconSize:15,styles:m}):null})]})]}):null}function _({lastEditedTime:e,createdTime:t,location:n,isResolved:i,isSuggestionComment:s,sourceStore:a,authorStore:l,isSuggested:d,commentStore:c,suppressMouse:u,shouldOmitTimestamp:p,authorFontSizeOverride:g}){const f=(0,h().tz)(),x=(0,U().C)({type:"discussionLocation",location:n}),S=(0,r().K8)((()=>{const e=l.getDisplayName(f);return c?c.resolveAuthorDisplayName({intl:f,defaultDisplayName:e}):e}),[c,f,l]),b=(0,o().X)("ken_new_home_design")&&"post_creator"===n,w=b?32:N().eQ,j=W({location:n,authorFontSize:g??(x?v().J.UIRegular.mobile:v().J.UIRegular.desktop),enableTeamNameUnderline:!1}),A=(0,r().K8)((()=>{if(l instanceof R().L)return l}),[l]);return t?(0,E.jsxs)("div",{style:j.userRow,children:[(0,E.jsx)(T().D,{userStore:A,suppressMouse:u,children:(0,E.jsxs)("div",{style:j.user,children:[s?(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsx)(z().E,{authorStore:l,avatarSize:w,avatarStyle:j.avatar}),(0,E.jsx)("div",{style:j.avatarSuggestionBadgeWrapper,children:(0,E.jsxs)("div",{style:j.avatarSuggestionBadge,children:[(0,m().f)({height:10}),(0,E.jsx)("div",{style:j.avatarSuggestionBadgeBacking})]})})]}):(0,E.jsx)(z().E,{authorStore:l,avatarSize:w,avatarStyle:j.avatar}),b?(0,E.jsx)("div",{style:j.avatarBubbleTipWrapper,children:(0,E.jsx)("div",{style:j.avatarBubbleTip})}):(0,E.jsx)(P,{authorStore:l,displayName:S,suppressMouse:u,styles:j})]})}),a?(0,E.jsxs)(E.Fragment,{children:[b?void 0:(0,E.jsx)("div",{style:j.in,children:(0,E.jsx)(h().sA,{id:"posts.post.inPreposition",defaultMessage:" in "})}),(0,E.jsx)(V,{sourceStore:a,iconSize:b?16:14,styles:j})]}):void 0,d?(0,E.jsx)(G,{}):void 0,p?void 0:(0,E.jsx)(F,{createdTime:t,lastEditedTime:e,style:j.timestamp,authorRowLocation:n}),"comment_unfurl"===n&&i?(0,E.jsx)("div",{style:{display:"inline-flex"},children:(0,E.jsx)(y().A,{children:(0,E.jsx)(h().sA,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})}):void 0]}):null}function H(e){const{createdTime:t}=e;return(0,E.jsx)(A().A,{text:(0,k().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,k().x$)(t),icon:p().Y})}function O(e){const{createdTime:t,lastEditedTime:n}=e;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(A().A,{text:(0,k().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,E.jsx)(h().sA,{defaultMessage:"Created {absoluteCreatedTime}",id:"comment.createdAtTime.label",values:{absoluteCreatedTime:(0,k().x$)(t)}}),icon:p().Y})," ",(0,E.jsx)(A().A,{text:(0,E.jsx)(h().sA,{defaultMessage:"(edited)",id:"comment.editedAtIndicator"}),tooltipText:(0,E.jsx)(h().sA,{defaultMessage:"Last edited {absoluteLastEditedTime}",id:"comment.editedAtTime.label",values:{absoluteLastEditedTime:(0,k().x$)(n)}}),icon:p().Y})]})}function W({location:e,authorFontSize:t,enableTeamNameUnderline:n}){const i=Boolean(s().A.isMobile),a=(0,o().X)("ken_new_home_design")&&"post_creator"===e;return(0,l().IS)((o=>({avatar:{marginTop:0,marginInlineEnd:i?1:2,userSelect:"none",...a&&{position:"absolute",insetInlineEnd:"100%",marginInlineEnd:16}},avatarBubbleTipWrapper:{position:"absolute",width:12,height:24,insetInlineEnd:"100%",paddingInlineStart:8,overflow:"hidden"},avatarBubbleTip:{borderRadius:3,transform:"rotate(45deg)",background:o.background.elevated,width:24,height:24,border:`1px solid ${o.regularDividerColor}`},avatarSuggestionBadgeWrapper:{position:"absolute",insetInlineEnd:-2,bottom:-4},avatarSuggestionBadge:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:100,background:"light"===o.mode?"#fff":"#000",width:16,height:16,border:`1px solid ${o.palette.uiBlue[200]}`,fill:o.palette.uiBlue[600]},avatarSuggestionBadgeBacking:{position:"absolute",width:"100%",height:"100%",borderRadius:100,background:o.palette.uiBlue[100]},in:{color:o.text.secondary},timestamp:{whiteSpace:"normal",flexGrow:"updates_sidebar"===e||"comment_unfurl"===e?void 0:1,display:"inline",color:o.text.tertiary},userRow:{display:"flex",flexDirection:"row",alignItems:"center",userSelect:"none",fontSize:t,gap:6},user:{display:"flex",alignItems:"center",gap:6},placeholder:{height:8,width:81,borderRadius:6,background:o.lightDividerColor},teamIconAndName:{display:"flex",alignItems:"center",gap:8},linkBox:{borderRadius:6,padding:"4px 6px",marginInline:-4},author:{fontWeight:v().Wy.medium,whiteSpace:"normal",flexShrink:0},teamName:{lineHeight:1.3,...n?{borderBottom:`1px solid ${o.darkDividerColor}`}:{}},mobileAuthorRow:{display:"flex",flexDirection:"row"},mobileUserAvatar:{marginInlineEnd:10},mobileUserAndTeamLink:{display:"flex",flexDirection:"column",gap:0},mobileTeamLink:{marginTop:-4,fontSize:t}})),[e,n,t,a,i])}function G(){const e=(0,l().IS)((()=>({badge:{marginInlineStart:0}})),[]);return(0,E.jsx)(d().E,{style:e.badge,color:"blue",content:(0,E.jsx)(h().sA,{defaultMessage:"Suggested",id:"AuthorRow.suggested.badge"})})}},538075:(e,t,n)=>{n.d(t,{H8:()=>f,I7:()=>h,aE:()=>g});n(296540);var i=()=>n(66689),o=()=>n(69708),s=()=>n(534177),a=()=>n(10521),r=()=>n(457190),l=()=>n(223393),d=()=>n(575143),c=()=>n(765957),u=()=>n(518773),m=n(474848);const p=(0,o().YK)({repliesAndMentions:{id:"pageNotificationSettings.repliesAndMentions.displayName",defaultMessage:"Mentions"},comments:{id:"pageNotificationSettings.comments.displayName",defaultMessage:"Comments"},allUpdates:{id:"pageNotificationSettings.allUpdates.displayName",defaultMessage:"All"},importantUpdates:{id:"pageNotificationSettings.importantUpdates.displayName",defaultMessage:"Important"}});function g(e){switch(e){case"Mentions":return p.repliesAndMentions;case"Comments":return p.comments;case"All":return p.allUpdates;case"Important":return p.importantUpdates;default:return}}function f(e){const{followSettingsKey:t,environment:n,blockStore:s,from:a}=e,r=x({key:"none",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.repliesAndMentions.label",defaultMessage:"Replies and @mentions"}),displayName:p.repliesAndMentions,environment:n,blockStore:s,from:a}),l=x({key:"comments",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.allComments.label",defaultMessage:"All comments"}),displayName:p.comments,environment:n,blockStore:s,from:a}),d=x({key:"all",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.allUpdates.label",defaultMessage:"All updates"}),caption:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.simpleAllUpdates.caption",defaultMessage:"All comments and property changes"}),displayName:p.allUpdates,environment:n,blockStore:s,from:a}),c=s.getAssociatedCollectionStore();if(!c)return[l,r];const u=c.getDatabaseType();if(u===i().dC){return[d,x({key:"important",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.importantUpdatesTasks.label",defaultMessage:"Important updates"}),caption:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.importantUpdatesTasks.caption",defaultMessage:"All comments and changes to Status, Assignee, or Due Date"}),displayName:p.importantUpdates,environment:n,blockStore:s,from:a}),r]}if(u===i().Tw){return[d,x({key:"important",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.importantUpdatesProjects.label",defaultMessage:"Important updates"}),caption:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.importantUpdatesProjects.caption",defaultMessage:"All comments and changes to Status or Date"}),displayName:p.importantUpdates,environment:n,blockStore:s,from:a}),r]}return[d,x({key:"comments",selectedKey:t,title:(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.onlyCommentsAllComments.label",defaultMessage:"All comments"}),displayName:p.comments,environment:n,blockStore:s,from:a}),r]}function x(e){const{key:t,title:n,caption:i,selectedKey:o,environment:s,blockStore:p,from:g,displayName:f}=e,x=h({key:t,userSelectedKey:o}),S={icon:{width:14,height:14}};return{action:(0,a().Ls)({key:t,displayName:f,analyticsName:t,validators:[],closeParentMenu:!0,action:()=>{const{currentUserRootStore:e}=c().default.state;if(e){const{following:n,followSettings:i}=(0,u().A)(t),a=e.id,d=p.id,c=p.getSpaceId();r().v({environment:s,following:n,followSettings:i,navigableBlockId:d,spaceId:c,userId:a,from:g,key:t,selectedKey:o}),"inbox"!==g&&"more_menu"!==g||(0,l().r)({item:{label:v(t)},undoFunc:()=>{const{following:e,followSettings:n}=(0,u().A)(o);r().v({environment:s,following:e,followSettings:n,navigableBlockId:d,spaceId:c,userId:a,from:g,key:t,selectedKey:o})}})}},render:e=>(0,m.jsx)(d().A,{...e,title:n,caption:i,shouldWrapCaption:!0,isChecked:x,right:!x&&(0,m.jsx)("div",{style:S.icon}),rightStyle:S.right})}),title:n,isSelectedOption:x}}function h(e){const{key:t,userSelectedKey:n}=e;return"important"===n||"comments"===n?"important"===t||"comments"===t:t===n}function v(e){switch(e){case"none":return(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.subscribedRepliesAndMentionsSuccess.snackbarMessage",defaultMessage:"Subscribed to replies and @mentions"});case"comments":return(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.subscribedAllCommentsSuccess.snackbarMessage",defaultMessage:"Subscribed to all comments"});case"important":return(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.subscribedImportantUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to important updates"});case"all":return(0,m.jsx)(o().sA,{id:"GetNotifiedDropdown.subscribedAllUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to all updates"});default:(0,s().HB)(e)}}},580648:(e,t,n)=>{n.d(t,{o:()=>d});n(296540);var i=()=>n(56366),o=()=>n(914462),s=()=>n(69708),a=()=>n(173783),r=()=>n(187820),l=n(474848);function d(e){const{group:t}=e,n=e.size??20,d=(0,s().tz)(),c=(0,i().K8)((()=>{if(t&&t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),u=(0,i().K8)((()=>(0,o().n)({intl:d,permissionGroupModel:t})),[d,t]);return(0,l.jsx)("div",{children:c?(0,l.jsx)(r().B6,{disabled:!0,size:n,icon:c,isEmptyPage:!1,title:u}):(0,l.jsx)(a().A,{size:n})})}},588047:(e,t,n)=>{n.d(t,{k:()=>o});n(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"2.42 2.11 11.16 12.13",svg:(0,n(474848).jsx)("path",{d:"M8 2.115c-.854 0-1.569.554-1.824 1.315a3.96 3.96 0 0 0-2.138 3.518v.895c0 .655-.238 1.287-.669 1.78l-.616.704c-.75.858-.141 2.202 1 2.202H5.89a2.156 2.156 0 0 0 4.218 0h2.139c1.14 0 1.75-1.344.999-2.202l-.616-.704a2.7 2.7 0 0 1-.669-1.78v-.895A3.96 3.96 0 0 0 9.824 3.43 1.92 1.92 0 0 0 8 2.115m-.669 1.839A.68.68 0 0 1 8 3.365c.34 0 .623.253.669.589l.048.353.33.138a2.71 2.71 0 0 1 1.665 2.503v.895c0 .958.348 1.882.978 2.603l.616.704a.078.078 0 0 1-.058.129H3.752a.078.078 0 0 1-.058-.129l.616-.704c.63-.72.978-1.645.978-2.603v-.895c0-1.126.686-2.093 1.665-2.503l.33-.138zM8 13.084c-.394 0-.735-.226-.9-.555h1.8c-.165.33-.506.556-.9.556"})},o=(0,n(340498).wt)("bellSmall",i)},625194:(e,t,n)=>{n.d(t,{m:()=>a});var i=n(296540),o=()=>n(96330),s=n(474848);const a=i.memo((function(e){const{textValue:t}=e,n=(0,i.useMemo)((()=>(0,o().X1)((0,o().eC)(t))),[t]);return(0,s.jsx)("span",{children:n})}))},654734:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(296540),o=()=>n(597777),s=()=>n(869190),a=()=>n(604995),r=()=>n(416504),l=n(474848);const d=function(e){const t=(0,n(69708).tz)(),d=(0,n(401497).DP)(),m=(0,n(396182).I)(),p=(0,i.useRef)(),g=(0,i.useCallback)((()=>{const t=e.value;if(!t)return;const i=a().q8(t,(0,r().P)());if(!i)return;const o=i.valueOf(),s=o-Date.now();s<0||s>n(720665).nD||p.current&&p.current.timestamp===o||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:o,timer:setTimeout((()=>m("DateBox","DateBox/createReminderTimer")),s)})}),[m,e.value]),f=(0,i.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,i.useEffect)((()=>{g()}),[g]),(0,i.useEffect)((()=>()=>{f()}),[f]);const{value:x,withComma:h}=e,v=(0,n(56366).K8)((()=>x?(0,s().ZF)({value:x,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,r().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,x]);if(!x)return null;const S=a().AA(x,(0,r().P)(),n(662303).locale);let y;if((0,o().Lh)(x)){const e=a().Zs(x,(0,r().P)());y=e?{color:d.errorText}:{color:n(100622).Tj.blue}}const b=(0,l.jsxs)(l.Fragment,{children:[v,(0,o().Lh)(x)?(0,n(599987).P)({display:"inline-block",width:"1em",marginInlineStart:6,marginInlineEnd:2,paddingBottom:4,verticalAlign:"middle"}):void 0,h?", ":null]});return e.disableTooltip?(0,l.jsx)("div",{className:e.className,style:{...e.style,...y},children:b}):(0,l.jsx)(n(859428).A,{renderTooltip:()=>(0,l.jsxs)(l.Fragment,{children:[e.tooltipHeader,(0,l.jsxs)("div",{style:u(d,e.tooltipHeader),children:[c(S.start),S.end?` → ${c(S.end)}`:""]})]}),render:t=>(0,l.jsx)("div",{className:e.className,style:{...e.style,...y},...t,children:b}),placement:e.tooltipPlacement})};function c(e){return(0,s().eV)({value:e,preset:"medium"})}function u(e,t){return t?{color:e.text.inverseSecondary}:{}}},659799:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var i=()=>n(401497),o=()=>n(284371),s=()=>n(859428),a=n(474848);function r({text:e,tooltipText:t,icon:n}){const r=(0,i().IS)((e=>({icon:{height:"1em",width:"1em",marginInlineEnd:"0.25em",fill:e.icon.secondary,marginBottom:"0.1em"},tooltip:{background:e.background.primary,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:o().Wy.regular,color:e.text.secondary,fontSize:o().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(s().A,{style:r.tooltip,render:t=>(0,a.jsx)("div",{style:r.text,...t,children:e}),renderTooltip:()=>(0,a.jsxs)("div",{style:r.container,children:[n(r.icon),(0,a.jsx)("div",{children:t})]}),alignment:"start",placement:"bottom"})}},782798:(e,t,n)=>{n.d(t,{R:()=>s});n(296540);var i=n(474848);const o={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.37 11.75 9.25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.75 5.073a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"}),(0,i.jsx)("path",{d:"M4 3.375c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h8c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.036-.84-1.875-1.875-1.875zM3.375 5.25c0-.345.28-.625.625-.625h8c.345 0 .625.28.625.625v2.537l-1.768-1.769a.575.575 0 0 0-.813 0L6.788 9.274l-1.531-1.53a.575.575 0 0 0-.814 0L3.375 8.811zm3.82 5.244 3.255-3.256 2.175 2.175v1.337c0 .345-.28.625-.625.625H4a.625.625 0 0 1-.625-.625v-.312L4.85 8.963l1.531 1.531a.575.575 0 0 0 .813 0"})]})},s=(0,n(340498).wt)("photoSmall",o)},837622:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(296540),o=()=>n(56366),s=()=>n(401497),a=()=>n(201980),r=()=>n(116008),l=()=>n(921855),d=()=>n(735372),c=n(474848);const u=i.memo((function(e){const{parentStore:t,withComma:u,linkifyUrls:m,disableCommentHighlight:p,disableLinks:g,shouldTruncate:f,clampLines:x,textValue:h}=e,v=(0,n(484714).v3)(),S=(0,s().DP)(),y=(0,n(712030).Ol)();(0,i.useEffect)((()=>{void 0!==h&&v.KatexStore.loadIfNeeded((()=>h))}),[v.KatexStore,h]);const{collectionContextStore:b,property:w}=(0,i.useContext)(n(971003).L8),{collectionViewBlockId:j,collectionViewId:A}=(0,o().K8)((()=>{var e,t;return{collectionViewId:null==b||null===(e=b.collectionViewStore())||void 0===e?void 0:e.id,collectionViewBlockId:null==b||null===(t=b.collectionViewBlockStore())||void 0===t?void 0:t.id}}),[b]),I=(0,o().K8)((()=>v.KatexStore.getKatex()),[v.KatexStore]),k=(0,o().K8)((()=>{const e=d().qu.state,n=d().wb.state;return e&&w&&h?l().nu({textValue:h,blockId:t.id,textProps:{type:"page_property_value_match",collectionViewBlockId:j,collectionViewId:A,propertyId:w},find:e,currentFocusedResult:n}):h}),[w,h,t.id,j,A]),T=(0,o().K8)((()=>{if(r().A.getPropertyId()!==w||r().A.getBlockStore()!==t)return k;const e=r().A.getMultiSelection();return e?a().Mwp({textValue:k,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[a().Ifu.TemporaryComment]}):h?a().Mwp({textValue:k,selection:{startIndex:0,endIndex:a().qAZ(h).length},annotation:[a().Ifu.TemporaryComment]}):k}),[t,w,h,k]),M=(0,o().K8)((()=>void 0===T?null:l().S5({environment:v,textValue:T&&{value:T,spaceId:(0,n(161479).e)(t.pointer.spaceId)},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:p??!1,disabled:!0,theme:S,disableLinks:g??!1,emojiType:y,katex:I,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[T,v,t,p,S,g,y,I]),C=(0,i.useMemo)((()=>{if(!m||void 0===h)return null;const e=(0,a().k4p)(h);return(0,n(735577).A)(e)?(0,n(713998).MO)(h):null}),[m,h]),D=(0,s().IS)((e=>({text:{...f&&!x?n(284371).RC:void 0,...f&&x?{...(0,n(115512).pA)(x),overflow:"hidden",textOverflow:"ellipsis"}:{}}})),[f,x]);return(0,c.jsxs)("span",{style:D.text,children:[C?(0,c.jsx)(n(97294).N,{href:C,style:{display:"inline",pointerEvents:"auto",...(0,n(468882).w_)(S)},external:!0,onClick:e=>e.stopPropagation(),children:M}):M,u?", ":null]})}))},895189:(e,t,n)=>{n.d(t,{d:()=>s});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"3.12 0.26 16.55 16.61",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M11.376 3.125c-.24.374-.336.818-.282 1.25H5.25a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875V8.84a1.87 1.87 0 0 0 1.25-.711v6.621a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125v-9.5c0-1.174.951-2.125 2.125-2.125z"}),(0,i.jsx)("path",{d:"M18.51.57a.625.625 0 0 1 1.073.642l-3.656 6.094a.626.626 0 0 1-1.011.086l-2.437-2.844-.073-.105a.626.626 0 0 1 .93-.796l.092.086L15.3 5.918z"})]})},s=(0,n(340498).wt)("markRead",o)},915019:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(296540),o=n(474848);function s({store:e,...t}){const s=(0,i.useCallback)((t=>(0,o.jsx)(n(877349).y,{store:e,events:t})),[e]);return(0,o.jsx)(n(859428).A,{noStyle:!0,delayThreshold:400,placement:"bottom",alignment:"start",renderTooltip:s,...t})}const a=i.memo(s)}}]);