"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21727],{21727:(e,t,n)=>{n.d(t,{Xv:()=>$t,_J:()=>Ht,qQ:()=>Yt,JS:()=>Ln,SH:()=>Vn,bH:()=>Dn,tA:()=>pt,O5:()=>vt,qI:()=>St,fg:()=>Vt,Fh:()=>Dt,cy:()=>Ft,TD:()=>jt,wy:()=>Xt,Zk:()=>Gt,oq:()=>Ot,b2:()=>yt});n(18107),n(967357),n(898992),n(823215),n(354520),n(430670),n(803949),n(581454),n(737550);var o=n(296540),a=()=>n(929219),i=()=>n(700500),r=()=>n(651124),s=()=>n(165358),c=()=>n(236892),l=()=>n(519143),d=()=>n(955363),u=()=>n(3284),m=()=>n(202017),g=()=>n(424139),p=()=>n(742852),f=()=>n(90907),v=n(474848);const y=(0,n(340498).wt)("timeBy",{viewBox:"0 0 30 30",svg:(0,v.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})});var b=()=>n(763884),k=()=>n(201980),S=()=>n(69708),A=()=>n(496603),h=()=>n(914577),M=()=>n(675074),C=()=>n(896628),w=()=>n(383594),_=()=>n(384944),I=()=>n(778417),N=()=>n(675925),x=()=>n(231297),L=()=>n(949237),T=()=>n(90654),P=()=>n(65402),B=()=>n(799832),j=()=>n(575143),V=()=>n(89924),D=()=>n(250202),F=()=>n(375078),R=()=>n(574357),U=()=>n(389456),z=()=>n(414479);function E(e){return t=>A().Si(t.blocks,(t=>t&&A().Tn(t.getType)&&t.getType()===e))}var O=()=>n(418731);var K=()=>n(158658),q=()=>n(788436),Y=()=>n(980914);const H=(0,n(921333).i)("source");function W(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(i().XC))}))}function G(e){if(!e.blocks)return!1;const t=e.blocks.at(0),o=t&&t.getProperties().source;if(!o)return!1;const a=n(713998).MO(o);return!!a&&n(522419)._J(a)}var X=()=>n(964179);var Z=()=>n(765957),$=()=>n(245128);function Q(e){const{sidebarSpaceViewStore:t}=Z().default.state,n=e.blocks.at(0);return Boolean(t&&n&&(0,$().A)({spaceViewStore:t,pageId:n.id}))}var J=()=>n(155963),ee=()=>n(460995),te=()=>n(129522);var ne=()=>n(343666);function oe(e){var t;return Boolean((null===(t=e.blocks.at(0))||void 0===t||null===(t=t.getFormat().alias_pointer)||void 0===t?void 0:t.table)===ne().SN)}var ae=()=>n(339425),ie=()=>n(963335);var re=()=>n(929084),se=()=>n(401665);var ce=()=>n(80257);function le(e){return e.blocks[0].isFirstBlockInCalloutV2Block()}function de(e){return t=>{if(1!==t.blocks.length)return!1;const n=t.blocks.at(0);if(!n)return!1;const o=n.getParentBlockStore(),a=null==o?void 0:o.getContentStores(),i=null==a?void 0:a.map((t=>t.getType()===e));if(!i||0===(null==i?void 0:i.length))return!1;const r=null==a?void 0:a.map((e=>e.id)).indexOf(n.id);return void 0!==r&&(0===r||!i[r-1])}}var ue=()=>n(333344);function me({blocks:e}){return e.some((e=>Boolean(e.isImmediateColumnChild())))}var ge=()=>n(393138),pe=()=>n(45214);var fe=()=>n(375308);function ve(e){var t;return Boolean(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getFormat().is_placeholder)}var ye=()=>n(606376),be=()=>n(514779),ke=()=>n(306113),Se=()=>n(775584),Ae=()=>n(918871),he=()=>n(733637),Me=()=>n(792415),Ce=()=>n(440902);function we(e){if(!(0,Ce().v)(e))return!1;const{publicPageData:t}=Me().A.state;return Boolean(null==t?void 0:t.isDLSViewer)}var _e=()=>n(730107);function Ie(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===i().xd.table}var Ne=()=>n(453237),xe=()=>n(419286),Le=()=>n(598101),Te=()=>n(422155),Pe=()=>n(943846),Be=()=>n(972435),je=()=>n(792609),Ve=()=>n(272509),De=()=>n(381895);function Fe(e){const t=(0,De().k)(e),n=Z().default.state.sidebarSpaceStore,o=(0,Ve().I)(n);return!(!t||o)&&t}var Re=()=>n(152895),Ue=()=>n(486666),ze=()=>n(565414),Ee=()=>n(919878),Oe=()=>n(857048),Ke=()=>n(178687),qe=()=>n(522200);var Ye=()=>n(12956),He=()=>n(10521);const We=(0,S().YK)({buttonEffectTitle:{id:"action.buttonEffect.title",defaultMessage:"Click effect"},confettiTitle:{id:"action.buttonEffect.confettiTitle",defaultMessage:"Confetti"},noneTitle:{id:"action.buttonEffect.noneTitle",defaultMessage:"None"}});function Ge(e){return(t,n)=>{const o=n.blocks[0];if(!o.isType(i().xd.button))return;const a=o.getAutomationStore();if(!a||!a.isTriggerType("button"))return;const{serverCommitResult:r}=x().createAndCommit({userAction:"actionRegistry.setButtonEffectAction",environment:n.environment,canUndo:!0,perform:t=>{_().KY({transaction:t,store:a.getPropertiesStore().getKeyStore("button_effect"),value:e?{type:e}:null})}});r.then(t)}}const Xe=(0,o.forwardRef)((function(e,t){const{blockStore:o,buttonEffectType:a,...i}=e,r=(0,n(56366).K8)((()=>{const e=o.getAutomationStore();if(!e)return!1;const t=e.getButtonEffect();return(null==t?void 0:t.type)===a}),[o,a]);return(0,v.jsx)(j().A,{ref:t,...i,isChecked:r})})),Ze=(0,He().gy)({key:"change button effect",render:e=>(0,v.jsx)(V().A,{...e}),actions:[(0,He().Ls)({key:"button effect confetti",displayName:We.confettiTitle,analyticsName:We.confettiTitle.defaultMessage,validators:[],closeParentMenu:!0,track:{actionName:"set_button_effect"},action:Ge("confetti"),render:(e,t)=>(0,v.jsx)(Xe,{...e,blockStore:t.blocks[0],title:(0,v.jsx)(S().sA,{...We.confettiTitle}),svg:n(585930).a,buttonEffectType:"confetti"})}),(0,He().Ls)({key:"button effect none",displayName:We.noneTitle,analyticsName:We.noneTitle.defaultMessage,validators:[],closeParentMenu:!0,track:{actionName:"set_button_effect"},action:Ge(void 0),render:(e,t)=>(0,v.jsx)(Xe,{...e,blockStore:t.blocks[0],title:(0,v.jsx)(S().sA,{...We.noneTitle}),svg:n(378409).xMarkCircleIcon,buttonEffectType:void 0})})]}),$e=(0,Ye().u)({key:"change button effect",displayName:We.buttonEffectTitle,analyticsName:We.buttonEffectTitle.defaultMessage,svg:n(675002).C,validators:[K().p,function(e){var t;return Boolean(1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.isType(i().xd.button)))},(0,ie().S)("automations_button_confetti_effect")],subActions:()=>[Ze]});var Qe=()=>n(789183),Je=()=>n(599364),et=()=>n(410767),tt=()=>n(774411),nt=()=>n(893306),ot=()=>n(37689),at=()=>n(426928),it=()=>n(22913),rt=()=>n(611357),st=()=>n(843005);const ct=(0,S().YK)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},simpleTableFitToPageWidth:{id:"action.fitToPageWidth.title",defaultMessage:"Fit to width"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline database"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},turnBookmarkIntoMention:{id:"action.convertToLinkMention.name",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},editIconName:{id:"action.editIcon.name",defaultMessage:"Edit icon"},addIcon:{id:"action.addIcon.name",defaultMessage:"Add icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},copyImage:{id:"action.copyImage",defaultMessage:"Copy image"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."},linkToImportModal:{id:"action.linkToImportModal",defaultMessage:"Import data"}}),lt=[n(125591).e,(0,Le().A)(n(776594).x),(0,Le().A)(n(467276).p),(0,Te().or)([O().C,(0,Le().A)(fe().v)]),...He().uo],dt=(0,He().Ls)({key:"fixLegacyTransclusion",displayName:ct.fixLegacyTransclusion,analyticsName:ct.fixLegacyTransclusion.defaultMessage,svg:l().D,validators:[function(e){return!!(0,n(611191).iE)()&&e.blocks.every((e=>{const t=e.getParentId(),n=e.recordStoreUIParentStore,o=null==n?void 0:n.id;return t&&o&&t!==o}))},Ce().v,...lt],closeParentMenu:!0,action:async({blocks:e,environment:t})=>{(await n(764061).l.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:t,store:e[0]})}}),ut=(0,Ye().u)({key:"turn into section",displayName:He().AY.turnIntoName,analyticsName:He().AY.turnIntoName.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[K().p,(0,Le().A)(fe().v),n(409076).p,je().Y,ge().P],subActions:()=>[{key:0,title:void 0,render:e=>(0,v.jsx)(V().A,{...e}),actions:st().t3.actions}]}),mt=(0,He().Ls)({key:"insert below",displayName:ct.insertBelowName,analyticsName:ct.insertBelowName.defaultMessage,svg:n(655923).arrowStraightDownIcon,validators:[K().p,(0,Le().A)(fe().v),(0,Le().A)(n(491250).p),z().c,Se().F],closeParentMenu:!0,action:({blocks:e,environment:t})=>{x().createAndCommit({userAction:"actionRegistry.insertBelow",environment:t,canUndo:!0,perform:o=>{n(87017).insertTextBelow({environment:t,blocks:e,transaction:o})}})}}),gt=(0,He().Ls)({key:"start presentation",displayName:ct.startPresentationName,analyticsName:ct.startPresentationName.defaultMessage,validators:[Ce().v,(0,xe().X)(i().xd.slide)],closeParentMenu:!0,svg:n(689825).U,action:({blocks:e})=>{n(447934).V_({slideBlockStore:e[0]})}}),pt=(0,He().Ls)({key:"copy direct link to content housed within block",displayName:ct.copyDirectLinkName,analyticsName:ct.copyDirectLinkName.defaultMessage,svg:p().linkIcon,validators:[be().M,Ce().v,(0,Le().A)(G),(0,Le().A)(Ae().w),(0,Te().or)([ke().I,ce().k,(0,xe().X)(i().xd.bookmark),(0,xe().X)(i().xd.externalObjectInstance),(0,xe().X)(i().xd.externalObjectInstancePage),se().I,oe]),(0,Le().A)(n(416433).I)],closeParentMenu:!0,track:{actionName:"copy_original_link"},action:(e,{lazyDependencies:t,...n},o)=>{const{clipboardActions:a}=t;a?a.copyDirectLinkToContent({...n,event:o,callback:e}):s().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),ft=(0,He().Ls)({key:"open collection as page",displayName:ct.openasPageName,analyticsName:ct.openasPageName.defaultMessage,svg:n(47218).arrowExpandDiagonalBottomLeftToTopRightIcon,validators:[pe().l,(0,Le().A)(O().C),(0,Le().A)((function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();if(!e)return!1;const o=e.getValue();if(o)return(0,n(107041).SJ)(o)}}return!1}))],closeParentMenu:!0,action:e=>n(391214).mP(e)}),vt=(0,He().Ls)({key:"copy links to blocks",displayName:ct.copyLinksName,analyticsName:ct.copyLinksName.defaultMessage,svg:p().linkIcon,validators:[be().M,n(772186).F,(0,Le().A)(ae().o)],closeParentMenu:!0,track:{actionName:"copy_multiple_block_links"},action:(e,{lazyDependencies:t,...n},o)=>{const{clipboardActions:a}=t;a?a.copyLinksToBlocks({...n,callback:e}):s().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),yt=(0,He().Ls)({key:"view original",displayName:ct.viewOriginalName,analyticsName:ct.viewOriginalName.defaultMessage,svg:d().arrowDiagonalUpRightIcon,validators:[(0,Le().A)(re().b),Ce().v,(0,Te().or)([ke().I,ce().k])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,{blocks:t,environment:n},o)=>{const a=t.at(0);a&&(0,Pe().hg)(a)&&M().oD(n,{store:a,from:"view_original",callback:e})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),bt=(0,He().Ls)({key:"view in browser",displayName:ct.openInBrowserName,analyticsName:ct.openInBrowserName.defaultMessage,svg:d().arrowDiagonalUpRightIcon,validators:[re().b,Ce().v,(0,Te().or)([ke().I,ce().k])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,{blocks:t,environment:n},o)=>{const a=t.at(0);a&&(0,Pe().hg)(a)&&M().oD(n,{store:a,from:"view_original",callback:e})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),kt=(0,He().Ls)({key:"copy image",displayName:ct.copyImage,analyticsName:ct.copyImage.defaultMessage,svg:n(764781).V,validators:[Ce().v,n(198365).w,H,(0,Le().A)(Se().F),(0,ie().S)("copy_image_to_clipboard")],closeParentMenu:!0,action:({blocks:e,environment:t})=>{var n;const o={action:"copy_image",block_type:null===(n=e[0])||void 0===n?void 0:n.getType(),from:"embed_block_actions"};(0,N().o)(t,o,(n=>{M().BL({blockStore:e[0],environment:t}),n()}))},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),St=(0,He().Ls)({key:"download source",displayName:ct.downloadName,analyticsName:ct.downloadName.defaultMessage,svg:n(973238).arrowInCircleDownIcon,validators:[Ce().v,(0,Te().or)([ce().k,ke().I]),(0,Te().or)([function(e){if(e.blocks){const t=e.blocks.at(0),n=null==t?void 0:t.getType();return Boolean(n&&(0,i().bI)(n))}return!1},G]),(0,Le().A)(Ae().w)],closeParentMenu:!0,track:{actionName:"download"},action:(e,{blocks:t,environment:n},o)=>{const a=t[0];a&&(0,Pe().hg)(a)&&M().qI({environment:n,store:a,callback:e})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),At=(0,He().Ls)({key:"replace source",displayName:ct.replaceName,analyticsName:ct.replaceName.defaultMessage,svg:l().D,validators:[K().p,(0,Le().A)(fe().v),Ce().v,(0,Te().or)([ce().k,ke().I])],closeParentMenu:!0,action:({blocks:e})=>{M().wA({store:e[0]})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),ht=(0,He().Ls)({key:"view as spreadsheet prototype",displayName:ct.viewAsSpreadsheetPrototype,analyticsName:ct.viewAsSpreadsheetPrototype.defaultMessage,svg:n(421559).T,validators:[()=>!1,(0,ie().S)("spreadsheet_prototype"),K().p,(0,Le().A)(X().w),Ie,je().Y,(0,Le().A)(me)],closeParentMenu:!0,action:({blocks:e})=>{const t=e[0];qe().A.setState({...qe().A.getState(),[t.id]:!0})}}),Mt=(0,He().Ls)({key:"link to import modal",displayName:ct.linkToImportModal,analyticsName:ct.linkToImportModal.defaultMessage,svg:n(820579).arrowLineDownIcon,validators:[K().p,(0,Le().A)(X().w),Ie,()=>"db_create_empty_state"===n(242422).default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})],closeParentMenu:!0,action:({environment:e})=>{n(209660).Ow({currentTab:"imports",openedFrom:"block_action_import"}),(0,n(160475).t)({environment:e,action:"click",from:"block_action_import"});const t=n(522094).A.getOrCreateFlowId();n(559926).kY(e,{from:"block_action_import",flowId:t})}}),Ct=(0,He().Ls)({key:"fit to page width",displayName:ct.simpleTableFitToPageWidth,analyticsName:ct.simpleTableFitToPageWidth.defaultMessage,svg:n(665589).l,validators:[Ie,K().p,(0,Le().A)(X().w),(0,Le().A)(fe().v),je().Y],closeParentMenu:!0,action:({blocks:e,environment:t})=>x().createAndCommit({userAction:"actionRegistry.fitSimpleTableToPageWidth",environment:t,canUndo:!0,perform:t=>{const n=e[0];Ee().AA({simpleTableStore:n,transaction:t})}})}),wt=(0,He().Ls)({key:"turn into collection",displayName:ct.turnSimpleTableIntoCollection,analyticsName:ct.turnSimpleTableIntoCollection.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[Ie,K().p,(0,Le().A)(X().w),(0,Le().A)(fe().v),je().Y,(0,Le().A)(me)],closeParentMenu:!0,action:({blocks:e,environment:t})=>x().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:t,canUndo:!0,perform:o=>{const a=e[0];a.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(n(534177).O9);return(0,k().vSn)(t)})).length>0?n(901389).rG({message:(0,v.jsx)(S().sA,{...ct.turnTableIntoDatabaseWarning})}):(Ee().cP({environment:t,simpleTableStore:a,transaction:o}),I().IU({environment:t}),Oe().wr())}})}),_t=[K().p,(0,Le().A)(ye().l),n(426716).$,(0,Le().A)(n(467294).P),(0,Le().A)(J().K),function(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}];function It(e){const{property:t,propertySchema:o}=e,i=o.name,r=!a().A.state.online&&(0,n(334684).$)({propertyType:o.type,propertySchema:o,allowAIProperty:!0});return{key:`Edit Property ${i} ${t}`,displayName:i,analyticsName:"Edit property",searchName:i,validators:_t,closeParentMenu:!0,action:({blocks:e,originRect:a,environment:i})=>{"checkbox"===o.type?x().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:i,canUndo:!0,perform:n=>{T().qS({stores:e,property:t,transaction:n})}}):a&&T().ho({environment:i,store:e[0],additionalStores:e.slice(1),property:t,surface:"page",rect:{...A().VP(a),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:(0,n(988268).j)(),collectionContextStore:(0,B().U)(e[0])})},render:e=>(0,v.jsx)(n(859428).A,{disableTooltip:!r,placement:"right",renderTooltip:()=>(0,v.jsx)(S().sA,{id:"collectionAction.editProperty.offlineTooltip",defaultMessage:"Go online to edit property"}),render:t=>(0,v.jsx)(D().G,{...(0,n(553965).A)(t,e),propertySchema:o,format:D().e.Name,disabled:r,disabledFeedback:!0})})}}const Nt=(0,Ye().u)({key:"edit property",displayName:ct.editPropertyName,analyticsName:ct.editPropertyName.defaultMessage,svg:m().n,validators:_t,subActions:({blocks:e})=>{const t=e.at(0);if(!t)return[];const o=(0,B().U)(t),a=t.getAssociatedCollectionStore();if(!a)return[];const i=(null==o?void 0:o.normalizedSchemaStore.state)??a.getSchema(),s=a.getFormat(),c=(0,n(390066).L)(s,i,void 0,r().jf.Collection);if(!c.collection_page_properties)return[];c.collection_page_properties.unshift({property:"title"});return[{key:0,title:void 0,render:e=>(0,v.jsx)(V().A,{...e}),actions:A().oE(c.collection_page_properties.map((t=>{const o=i[t.property],r=a.getSpaceStore();if(o&&(0,n(852353).g2)({propertySchema:o,property:t.property,blockStores:e,collectionSchema:i,collectionStore:a,spaceStore:r}))return It({property:t.property,propertySchema:o})})))}]}}),xt=(0,He().Ls)({key:"clear date",displayName:ct.clearDateName,analyticsName:ct.clearDateName.defaultMessage,svg:y,validators:[K().p,(0,Le().A)(fe().v),(0,Te().or)([(0,U().B)("timeline"),(0,U().B)("calendar")])],closeParentMenu:!0,action:({environment:e,blocks:t})=>{const o=(0,B().U)(t[0]);if(!o)return;const a=null==o?void 0:o.collectionViewStore();if(!a)return;const i=o.normalizedSchemaStore.state;x().createAndCommit({userAction:"actionRegistry.clearDate",environment:e,canUndo:!0,perform:e=>{n(317406).MQ({stores:t,collectionViewStore:a,schema:i,transaction:e})}})}}),Lt=(0,He().Ls)({key:"view collection view inline",displayName:ct.turnintoInlineName,analyticsName:ct.turnintoInlineName.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(i().xd.collectionViewPage)}return!1},(0,Le().A)(O().C),q().X,(0,Le().A)(X().w),(0,Le().A)(ee().A),ge().P],closeParentMenu:!0,action:({blocks:e,environment:t})=>x().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:t,canUndo:!0,perform:n=>{F().transformBlocks({environment:t,blocks:e,blockType:"collection_view",transaction:n}),I().IU({environment:t})}})}),Tt=(0,He().Ls)({key:"view collection view as page",displayName:ct.turnintoPageName,analyticsName:ct.turnintoPageName.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[pe().l,(0,Le().A)(O().C),q().X,(0,Le().A)(X().w),(0,Le().A)(fe().v),(0,Le().A)(se().I)],closeParentMenu:!0,action:({blocks:e,environment:t})=>x().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:t,canUndo:!0,perform:n=>{F().transformBlocks({environment:t,blocks:e,blockType:"collection_view_page",transaction:n})}})}),Pt=(0,He().Ls)({key:"turn into simple table",displayName:ct.turnCollectionIntoSimpleTable,analyticsName:ct.turnCollectionIntoSimpleTable.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[pe().l,(Bt="table",e=>{if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,n=te().K.findCollectionViewBlockFromStore(t);if(n&&"collectionContextStore"in n)return n.collectionContextStore.getViewType()===Bt}return!1}),function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.hasSingleSourceAndNoLinkedCollections()}return!1},(0,Le().A)(O().C),q().X,(0,Le().A)(X().w),(0,Le().A)(fe().v),function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return 1===t.getCollectionViewStores().length}return!1},function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,n=t.getCollectionStoreIfSingleSource();if(!n)return!1;const o=n.getSchema();return Object.values(o).map((e=>null==e?void 0:e.type)).every((e=>e&&Y().gx[e]))}return!0},(0,Le().A)(se().I)],closeParentMenu:!0,action:async({blocks:e,environment:t})=>{const o=e[0],a=o.useCrdt(),i=await Y().Bp({environment:t,collectionViewBlockStore:o});if(i.some((e=>e.useCrdt()!==a)))return n(471995).D6({label:a?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void s().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:a}}});x().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:t,canUndo:!0,perform:e=>{Ee().GD({environment:t,collectionViewBlockStore:o,pageStores:i,transaction:e}),I().IU({environment:t}),Oe().wr()}})}});var Bt;const jt=(0,He().Ls)({key:"merge with csv",displayName:ct.mergewithCSVName,analyticsName:ct.mergewithCSVName.defaultMessage,validators:[J().K,q().X,n(946561).s,_e().I,(0,Le().A)(fe().v),(0,Le().A)((function(e){return e.blocks.some((e=>{const{mainEditorCurrentBlockStore:t}=Z().default.state,n=te().K.findCollectionViewBlockFromStore(e),o=n&&"collectionContextStore"in n?n.collectionContextStore:void 0,a=null==o?void 0:o.collectionStore();return!(!o||!a||o.permissionScopesStore.state.canEditContent)||Boolean(t&&t.isCollectionView()&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))})),(0,Le().A)(n(333799).Q),(0,Le().A)(se().I),(0,Le().A)(ae().o)],closeParentMenu:!0,render:e=>(0,v.jsx)(j().A,{...e,svg:n(613850).G,title:(0,v.jsx)(S().sA,{...ct.mergewithCSVName}),tooltipText:(0,v.jsx)(S().sA,{...ct.mergewithCSVCaption})}),action:({blocks:[e],environment:t})=>{(0,n(727722).T)({environment:t,store:e,analytics:{from:"topbar_more_menu"}})}}),Vt=(0,He().fi)({key:"database lock",displayName:ct.lockDatabaseName,label:Be().A.formatMessage(ct.lockDatabaseName),renderTooltip:()=>Be().A.formatMessage(P().D.lockDatabaseMultiSourceTooltip),disableTooltip:e=>e.hasSingleSourceAndNoLinkedCollections(),getSvgIcon:({isChecked:e})=>t=>(0,v.jsx)(n(124524).I,{isLocked:e,style:t}),isChecked:e=>e.isLockedForAllUsers(),validators:[J().K,Ne().a,(0,Le().A)(ee().A),q().X,(0,Le().A)(ae().o)],action:(e,t,n)=>_().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),Dt=(0,He().fi)({key:"database views lock",displayName:ct.lockDatabaseViewsName,label:Be().A.formatMessage(ct.lockDatabaseViewsName),renderTooltip:()=>Be().A.formatMessage(P().D.lockDatabaseViewsTooltip),getSvgIcon:()=>f().h,isChecked:e=>e.isLockedForAllUsers(),validators:[J().K,(0,Le().A)(Ne().a),q().X,(0,Le().A)(ae().o)],action:(e,t,n)=>_().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),Ft=(0,He().fi)({key:"wiki lock",displayName:ct.lockWikiName,label:Be().A.formatMessage(ct.lockWikiName),getSvgIcon:()=>f().h,isChecked:e=>e.isLockedForAllUsers(),validators:[J().K,Ne().a,ee().A,q().X,(0,Le().A)(ae().o)],action:(e,t,n)=>_().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),Rt=(0,He().Ls)({key:"wiki unlock",displayName:ct.unlockWikiName,analyticsName:ct.unlockWikiName.defaultMessage,svg:n(701751).p,validators:[J().K,Ne().a,ee().A,q().X,ye().l],closeParentMenu:!1,action:({blocks:e,environment:t})=>{const o=e[0];n(222299).X6({environment:t,store:o,lock:!1})}}),Ut=[Ce().v,K().p,(0,Le().A)(fe().v),(0,Le().A)(ue().P)];function zt(e=!1){return[...Ut,e?(0,Te().or)([E("external_object_instance"),oe]):E("external_object_instance"),(0,Le().A)(ve)]}const Et=(0,He().Ls)({key:"reload link preview",displayName:ct.reloadPreview,analyticsName:ct.reloadPreview.defaultMessage,svg:l().D,validators:zt(!1),closeParentMenu:!0,action:({environment:e,blocks:t})=>{if(0===t.length)return;const n=t[0];n.isExternalObjectInstanceBlockStore()&&L().lf({environment:e,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),Ot=(0,He().Ls)({key:"turn preview into mention",displayName:ct.turnPreviewIntoMention,analyticsName:ct.turnPreviewIntoMention.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:zt(!0),closeParentMenu:!0,action:({environment:e,blocks:t})=>{0!==t.length&&x().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:e,canUndo:!0,perform:o=>{t[0].isType("alias")?n(813743).O8({blockStore:t[0],transaction:o}):L().PO({environment:e,block:t[0],transaction:o})}})}}),Kt=(0,He().Ls)({key:"turn bookmark into mention",displayName:ct.turnBookmarkIntoMention,analyticsName:ct.turnBookmarkIntoMention.defaultMessage,svg:u().arrowSquarePathUpDownIcon,validators:[E("bookmark"),...Ut],closeParentMenu:!0,action:(e,t)=>{n(443120).uS({...e,event:t})}});function qt(e=[]){return(0,He().Ls)({key:"add to favorites",displayName:ct.addtoFavoritesName,analyticsName:ct.addtoFavoritesName.defaultMessage,svg:n(877788).w,validators:[...e,be().M,n(49533)._,Ce().v,(0,Le().A)(Q),(0,Le().A)(n(9402).P),(0,Le().A)(we),(0,Le().A)((0,R().U)([Fe,(0,Le().A)(n(364859).q)])),(0,Le().A)(Re().Y)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const{sidebarSpaceViewStore:n}=Z().default.state;if(n){const o=e[0];x().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:t,canUndo:!0,perform:e=>{(0,ze().I)({spaceViewStore:n,store:o,transaction:e})}})}}})}const Yt=qt([Se().F]),Ht=qt();function Wt(e=[]){return(0,He().Ls)({key:"remove from favorites",displayName:ct.removefromFavoritesName,analyticsName:ct.removefromFavoritesName.defaultMessage,svg:n(523773).d,validators:[...e,Q,Ce().v,(0,Le().A)(Re().Y)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const{sidebarSpaceViewStore:n}=Z().default.state;n&&x().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:t,canUndo:!0,perform:t=>{(0,ze().x)({spaceViewStore:n,store:e[0],transaction:t})}})}})}const Gt=Wt([Se().F]),Xt=Wt(),Zt=(0,He().Ls)({key:"reload synced page",displayName:ct.reloadSyncedPage,analyticsName:ct.reloadSyncedPage.defaultMessage,svg:l().D,validators:[K().p,(0,Le().A)(fe().v),(0,Le().A)(ue().P),Ce().v,E("external_object_instance_page")],closeParentMenu:!0,action:({environment:e,blocks:t})=>{if(0===t.length)return;const n=t[0];n.isExternalObjectInstancePageBlockStore()&&L().lf({environment:e,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),$t=(0,He().Ls)({key:"add page icon",displayName:ct.addIcon,svg:g().emojiFaceIcon,analyticsName:ct.addIcon.defaultMessage,validators:[K().p,(0,Le().A)(fe().v),(0,Le().A)(ae().o),(0,Te().or)([W,J().K]),function(e){return e.blocks.every((e=>!(null!=e&&e.getIcon())))}],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,n)=>{Jt(e,t,n)}}),Qt=(0,He().Ls)({key:"edit icon",displayName:ct.editIconName,analyticsName:ct.editIconName.defaultMessage,svg:g().emojiFaceIcon,validators:[K().p,(0,Le().A)(fe().v),(0,Te().or)([W,J().K,(0,R().U)([he().i,le])])],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,n)=>{Jt(e,t,n)}});function Jt(e,t,o){const{environment:a,originRect:i}=t;let s=t.blocks;if((0,he().i)(t)&&le(t)){const e=s[0].getParentStore();e instanceof n(148832).B&&(s=[e])}const c=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},l=(e,t)=>{var o;s.forEach((t=>{(0,N().o)(a,{action:"edit_icon",block_type:t.getType(),from:"block_more_menu"},(n=>{const o=c(t);if(!o)return;const{serverCommitResult:i}=x().createAndCommit({userAction:"actionRegistry.editIcon",environment:a,canUndo:!0,perform:t=>{_().KY({store:o,value:e,transaction:t})}});i.then(n)}))})),"url"!==(null===(o=(0,r().WO)(e))||void 0===o?void 0:o.type)&&s.some((e=>e.isType("callout")))&&b().K.set({userId:a.currentUser.id,key:n(492696).c,value:e??""}),t&&t.keepVisible||w().I()},d=s.some((e=>{var t;return e.isType("button")?null===(t=c(e))||void 0===t?void 0:t.getValue():Boolean(e.getIcon())})),u=s.every((e=>e.isType("callout"))),m=[{type:"emoji",title:(0,v.jsx)(S().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:l},{type:"icon",title:(0,v.jsx)("div",{style:{display:"flex",gap:4},children:(0,v.jsx)(S().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:l}];w().W(a,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:i,popupWidth:Ue().jv,popupHeight:Ue().GF,isSmallWidth:!1,title:Be().A.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:d?()=>{s.forEach((e=>{const t=c(e);t&&x().createAndCommit({userAction:"actionRegistry.editIcon",environment:a,canUndo:!0,perform:e=>{_().KY({store:t,value:void 0,transaction:e})}})})),w().I()}:void 0,currentTab:"emoji",isCallout:u,tabs:m,disableClearSelection:!0}),e()}const en=(0,He().fi)({key:"code wrap",displayName:ct.wrapCodeKeywords,label:Be().A.formatMessage(ct.wrapCodeLabel),isChecked:e=>Boolean(e.getFormat().code_wrap),getSvgIcon:()=>n(412975).arrowTurnDownLeftIcon,validators:[Ce().v,(0,xe().X)("code"),K().p,(0,Le().A)(fe().v)],track:{actionName:"set_text_wrap"},action:(e,t,n)=>C().zA({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:n}),afterAction:(e,t)=>{b().K.set({userId:t.currentUser.id,key:Ke().j.localCodeWrapPreferenceKey,value:e})}}),tn=[K().p,(0,Le().A)(fe().v),z().c,E("code"),(0,Le().A)(O().C)],nn=(0,He().gy)({key:"code block languageMode actions",title:ct.languageModeName,render:e=>(0,v.jsx)(V().A,{...e}),actions:A().Ul((0,n(15440).qX)().__DANGEROUS_MANUALLY_CHECK_GATES.map((e=>{const t=e.featureFlag?[...tn,(0,ie().S)(e.featureFlag)]:tn,o=n(979004).languageModeMessages[e.name];return(0,He().Ls)({key:`set language ${e.name} action`,displayName:o,analyticsName:`set language ${e.name}`,validators:t,closeParentMenu:!0,fuzzySearchKeywords:e.fuzzySearchKeywords,track:{actionName:"set_language"},action:(t,{environment:n,blocks:o},a)=>{b().K.set({userId:n.currentUser.id,key:Ke().j.localLanguagePreferenceKey,value:e.name});const{serverCommitResult:i}=x().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:n,canUndo:!0,perform:t=>{h().IA({language:e.name,blocks:o,transaction:t})}});i.then(t)},render:e=>(0,v.jsx)(n(760217).A,{...e,title:Be().A.formatMessage(o)})})})),(e=>{var t;return null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()}))}),on=(0,Ye().u)({key:"languageMode section",displayName:ct.languageModeName,analyticsName:ct.languageModeName.defaultMessage,svg:n(300985).Z,validators:tn,subActions:()=>[nn]}),an=(0,He().Ls)({key:"format code",displayName:ct.formatCodeLabel,closeParentMenu:!0,analyticsName:ct.formatCodeLabel.defaultMessage,svg:n(200582).m,validators:[(0,xe().X)("code"),Ce().v,function(e){const t=e.blocks.at(0);if(!t)return!1;if(!t.isType("code"))return!1;const n=t.getLanguage();return Boolean(n.prettier)},K().p,(0,Le().A)(fe().v)],action:async({blocks:e,environment:t})=>{const n=e[0];await h().aZ({codeBlockStore:n,environment:t})}}),rn=(0,He().Ls)({key:"open html in browser",displayName:ct.openInBrowserLabel,closeParentMenu:!0,analyticsName:ct.openInBrowserLabel.defaultMessage,validators:[Ce().v,(0,xe().X)("code"),function(e){const t=e.blocks.at(0);if(!t)return!1;const{language:n}=t.getProperties();return"HTML"===(0,k().q4_)(n)},function(e){return!1}],action:({blocks:e,environment:t})=>{const n=e[0].getTitleValue(),o=(0,k().q4_)(n),a=window.open();a&&a.document.write(o)}}),sn=(0,He().Ls)({key:"work at notion",analyticsName:ct.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:ct.workAtNotion,svg:n(481721).codeIcon,validators:[(0,xe().X)("code"),function({environment:e}){const{sidebarSpaceStore:t}=Z().default.state;if(null==t||!t.id)return!1;const o=n(57605).T.getData(e,{spaceId:null==t?void 0:t.id});return"free"===(0,n(762433).AI)(o)}],action:()=>{window&&window.open(n(427704).JZ.careers)}}),cn=[K().p,(0,Le().A)(fe().v),E("quote")];function ln(e){return(t,n)=>{b().K.set({userId:n.environment.currentUser.id,key:Ke().w.localSizePreferenceKey,value:e});const{serverCommitResult:o}=x().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:n.environment,canUndo:!0,perform:t=>{C().zA({stores:n.blocks,update:{quote_size:e},transaction:t})}});o.then(t)}}const dn=(0,He().gy)({key:"quote size actions",title:ct.quoteSizeSection,render:e=>(0,v.jsx)(V().A,{...e}),actions:[(0,He().Ls)({key:"quote size default",displayName:ct.quoteSizeDefault,analyticsName:ct.quoteSizeDefault.defaultMessage,validators:cn,closeParentMenu:!0,track:{actionName:"set_size"},action:ln(void 0)}),(0,He().Ls)({key:"quote size large",displayName:ct.quoteSizeLarge,analyticsName:ct.quoteSizeLarge.defaultMessage,validators:cn,closeParentMenu:!0,track:{actionName:"set_size"},action:ln("large")})]}),un=(0,Ye().u)({key:"quote size",displayName:ct.quoteSize,analyticsName:ct.quoteSize.defaultMessage,svg:n(37719).P,validators:cn,subActions:()=>[dn]}),mn=[K().p,(0,Le().A)(fe().v),E("numbered_list"),de("numbered_list")],gn=[K().p,(0,Le().A)(fe().v),E("bulleted_list"),de("bulleted_list")],pn=(0,Ye().u)({key:"number format",displayName:ct.listFormat,analyticsName:ct.listFormat.defaultMessage,svg:m().n,validators:mn,subActions:()=>[vn]});function fn(e){return(t,n)=>{const{serverCommitResult:o}=x().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:n.environment,canUndo:!0,perform:t=>{C().zA({stores:n.blocks,update:{list_format:e},transaction:t})}});o.then(t)}}const vn=(0,He().gy)({key:"text color actions",title:ct.listFormatSection,render:e=>(0,v.jsx)(V().A,{...e}),actions:[(0,He().Ls)({key:"list format default",displayName:ct.listFormatDefault,analyticsName:ct.listFormatDefault.defaultMessage,validators:mn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:fn(void 0)}),(0,He().Ls)({key:"list format numbers",displayName:ct.listFormatNumbers,analyticsName:ct.listFormatNumbers.defaultMessage,validators:mn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:fn("numbers")}),(0,He().Ls)({key:"list format letters",displayName:ct.listFormatLetters,analyticsName:ct.listFormatLetters.defaultMessage,validators:mn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:fn("letters")}),(0,He().Ls)({key:"list format roman numerals",displayName:ct.listFormatRoman,analyticsName:ct.listFormatRoman.defaultMessage,validators:mn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:fn("roman")})]});function yn(e){return(t,n)=>{const{serverCommitResult:o}=x().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:n.environment,canUndo:!0,perform:t=>{C().zA({stores:n.blocks,update:{bullet_list_format:e},transaction:t})}});o.then(t)}}const bn=(0,He().gy)({key:"bullet list format actions",title:ct.listFormatSection,render:e=>(0,v.jsx)(V().A,{...e}),actions:[(0,He().Ls)({key:"list format default",displayName:ct.listFormatDefault,analyticsName:ct.listFormatDefault.defaultMessage,validators:gn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:yn(void 0)}),(0,He().Ls)({key:"list format disc",displayName:ct.listFormatDisc,analyticsName:ct.listFormatDisc.defaultMessage,validators:gn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:yn("disc")}),(0,He().Ls)({key:"list format circle",displayName:ct.listFormatCircle,analyticsName:ct.listFormatCircle.defaultMessage,validators:gn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:yn("circle")}),(0,He().Ls)({key:"list format square",displayName:ct.listFormatSquare,analyticsName:ct.listFormatSquare.defaultMessage,validators:gn,closeParentMenu:!0,track:{actionName:"set_list_format"},action:yn("square")})]}),kn=(0,Ye().u)({key:"bulleted format",displayName:ct.listFormat,analyticsName:ct.listFormat.defaultMessage,svg:m().n,validators:gn,subActions:()=>[bn]}),Sn=[be().M,K().p,(0,Le().A)(fe().v),(0,R().U)([Ce().v,ke().I,function({blocks:e}){const t=e.at(0);if(!t)return!1;const n=t.getType(),o=t.getFormat();return Boolean(o.block_width)&&!Boolean(o.block_page_width)&&!Boolean(o.block_full_width)&&Boolean(n&&(0,i().lL)(n))}])],An=(0,Ye().u)({key:"alignment",displayName:ct.alignmentName,analyticsName:ct.alignmentName.defaultMessage,svg:c().Q,validators:Sn,subActions:()=>[Cn]});function hn(e){return(t,n)=>{const{serverCommitResult:o}=x().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:n.environment,canUndo:!0,perform:t=>{if(n.blocks&&n.blocks.length>0)for(const o of n.blocks)C().TP({environment:n.environment,store:o,alignment:e,transaction:t})}});o.then(t)}}const Mn=(0,S().YK)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),Cn=(0,He().gy)({key:"alignment format actions",title:ct.alignmentName,render:e=>(0,v.jsx)(V().A,{...e}),actions:[(0,He().Ls)({key:"alignment format left",displayName:Mn.leftAlign,analyticsName:"Align left",validators:Sn,closeParentMenu:!0,svg:c().Q,track:{actionName:"set_alignment"},action:hn("left")}),(0,He().Ls)({key:"alignment format center",displayName:Mn.centerAlign,analyticsName:"Align center",validators:Sn,closeParentMenu:!0,svg:n(707872).I,track:{actionName:"set_alignment"},action:hn("center")}),(0,He().Ls)({key:"alignment format right",displayName:Mn.rightAlign,analyticsName:"Align right",validators:Sn,closeParentMenu:!0,svg:n(366545).p,track:{actionName:"set_alignment"},action:hn("right")})]}),wn=(0,He().Ls)({key:"edit image",displayName:ct.cropImage,analyticsName:ct.cropImage.defaultMessage,svg:n(754770).m,validators:[K().p,function(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("image"))&&(0,n(444796).AS)(t.getOriginalImageSource()))},_e().I,(0,Le().A)(fe().v)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const o=e[0],a=o.getOriginalImageSource();a&&n(471266).A.openModal({blockStore:o,originalSource:a})},disabled:()=>!a().A.state.online,renderTooltip:()=>Be().A.formatMessage(He().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),_n={key:"block menu primary",render:e=>(0,v.jsx)(V().A,{...e}),shouldShowMoreOptions:!0,actions:[...[...[ut,wt,Ct,Lt,Tt,Pt,Ot,Kt],n(741043).Rw,$e,Qt,dt,mt],...[At,kt,St,Qe().pG,wn,An,nt().N,nt().S,Qe().R5,n(571157).i,yt],...[un],...[kn],...[pn],...[Ht,Vt,it().U,jt],...[en,on,an,sn,rn],...[rt().Zm,rt().Lc],...[Et],...[gt],...[st().c5],...[Dt,Ft,Rt,bt,Mt,ht,it().H,Nt,xt,Zt]]},In={key:"block menu navigation",render:e=>(0,v.jsx)(V().A,{...e}),actions:[ft,...at().YO]},Nn={key:"block menu manage",render:e=>(0,v.jsx)(V().A,{...e}),actions:[pt,Je().k,Je().o,vt,tt().As,tt().nK,ot().tw,et().z,n(873306).$]},xn={key:"block menu comment",render:e=>(0,v.jsx)(V().A,{...e}),actions:[Qe().Im,(0,n(363019).F)("block_action_menu"),n(162301).KV]},Ln=[n(354406).LQ,_n,In,Nn,xn],Tn=(0,Ye().u)({key:"open in (group)",svg:d().arrowDiagonalUpRightIcon,displayName:ct.openIn,analyticsName:ct.openIn.defaultMessage,validators:[Ce().v,(0,Le().A)(Se().F),at().kf],subActions:()=>[{key:0,title:void 0,render:e=>(0,v.jsx)(V().A,{...e}),actions:at().Wq}]}),Pn={key:"collection menu primary",render:e=>(0,v.jsx)(V().A,{...e}),actions:[Ht,Xt,Qt,Nt]},Bn={key:"collection menu navigation",render:e=>(0,v.jsx)(V().A,{...e}),actions:[Tn]},jn={key:"collection menu manage",render:e=>(0,v.jsx)(V().A,{...e}),actions:[Je().o,vt,tt().As,ot().tw,et().z]},Vn=[Pn,Bn,jn,{key:"collection menu comment",render:e=>(0,v.jsx)(V().A,{...e}),actions:[Qe().Im]}],Dn=[Pn,In,jn]},77295:(e,t,n)=>{n.d(t,{K:()=>a});n(898992),n(823215);var o=()=>n(620149);function a(e){return!o().l.state&&e.blocks.every((e=>e.canAdmin()))}},124524:(e,t,n)=>{n.d(t,{I:()=>d});var o=n(296540),a=()=>n(484714),i=()=>n(401497),r=()=>n(340498),s=n(474848);const c="M19 6V4C19 2.34315 17.6569 1 16 1V1C14.3431 1 13 2.34315 13 4V8",l="M7 7.5V5.5C7 3.84315 8.34315 2.5 10 2.5V2.5C11.6569 2.5 13 3.84315 13 5.5V7.5";function d({isLocked:e,color:t="primary",size:n="default",style:d}){const{isMobile:u}=(0,a().Y0)(),m="number"==typeof n?n:u?r().lD[n]:r().Ev[n],g=(0,o.useRef)(!0),[p,f]=(0,o.useState)(""),v=(0,i().IS)((e=>({icon:{width:m,height:m,stroke:"inherit"===t?"inherit":e.icon[t],...d,fill:"none"}})),[t,m,d]);return(0,o.useEffect)((()=>{g.current?g.current=!1:f(e?"unlocked-to-locked":"locked-to-unlocked")}),[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:`\n\t\t\t\t.unlocked-to-locked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: unlocked-to-locked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t.locked-to-unlocked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: locked-to-unlocked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t@keyframes unlocked-to-locked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.11, 0, 0.5, 0);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes locked-to-unlocked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.36, 0, 0.66, -0.56);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.5, 1, 0.89, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`}),(0,s.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:v.icon,children:[(0,s.jsx)("rect",{x:"4.5",y:"8",width:"11",height:"9",rx:"2",strokeWidth:"1.25"}),(0,s.jsx)("circle",{cx:"10",cy:"11.5",r:"0.5",strokeWidth:"1.25"}),(0,s.jsx)("path",{d:"M10 14V11.5",strokeWidth:"1.25",strokeLinecap:"round"}),(0,s.jsx)("path",{className:p,d:e?l:c,strokeWidth:"1.25",strokeLinecap:"round"})]})]})}},163580:(e,t,n)=>{n.d(t,{VT:()=>c,b0:()=>l,gz:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(799288),a=()=>n(45331),i=()=>n(332393),r=()=>n(765957),s=()=>n(878710);function c(e,t){const n=t.getAlive(),i=(0,o().hu)(t),r=!l(t),s=l(t),c=Boolean(e.currentUser.id===t.getParentId()),d=s&&c&&!(0,a().Y)(t.getIntegrationId());return n&&i&&(d||r)}function l(e){if(!e.getAlive||!(0,o().hu)(e))return!1;const{currentUserRootStore:t}=r().default.state,n=e.getIntegrationId();if(!t||!n)return!1;const a=(0,s().v3)(t,{id:n,table:i().Li}).getKeyStore("type").getValue();return!e.isInternalBot(a?{type:a}:void 0)}function d(e){const{externalIntegrationStoreState:t,integrationId:n}=e;if(!t.loaded)return;const a=t.externalAuthentications.map((({parent_id:e})=>e)),i=new Set(a),r=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,o().Sd)(e)&&e.integration_id===n));return r.length?r[0]:void 0}},200582:(e,t,n)=>{n.d(t,{m:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.98",svg:(0,n(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},a=(0,n(340498).wt)("lightning",o)},245128:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){const{spaceViewStore:t,pageId:n}=e;return!(!t||!n)&&-1!==t.getBookmarkedPageIds().indexOf(n)}},300985:(e,t,n)=>{n.d(t,{Z:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.49 2.37 15.01 15.25",svg:(0,n(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},a=(0,n(340498).wt)("curlyBraces",o)},354406:(e,t,n)=>{n.d(t,{LQ:()=>m});n(296540);var o=()=>n(495262),a=()=>n(414479),i=()=>n(9402),r=()=>n(775584),s=()=>n(598101),c=()=>n(10521),l=n(474848);const d=(0,c().Ls)({key:"mobile undo",displayName:c().AY.undoName,analyticsName:c().AY.undoName.defaultMessage,svg:n(454503).arrowUTurnUpLeftIcon,validators:[n(514779).M,r().F,n(6744).B,(0,s().A)(a().c),(0,s().A)(i().P)],closeParentMenu:!0,track:{actionName:"undo"},action:(e,{environment:t},n)=>o().tN({environment:t,callback:e})}),u=(0,c().Ls)({key:"mobile redo",displayName:c().AY.redoName,analyticsName:c().AY.redoName.defaultMessage,svg:n(638616).W,validators:[r().F,n(809210).f,(0,s().A)(a().c),(0,s().A)(i().P)],closeParentMenu:!0,track:{actionName:"redo"},action:(e,{environment:t},n)=>o().ZS({environment:t,callback:e})}),m=(0,c().gy)({key:"mobile revision actions",render:e=>(0,l.jsx)(n(89924).A,{...e}),actions:[d,u]})},364859:(e,t,n)=>{n.d(t,{q:()=>a});var o=()=>n(311337);function a(e){var t;return(0,o().y)(e.environment,null===(t=e.blocks)||void 0===t?void 0:t[0])}},487494:(e,t,n)=>{n.d(t,{A:()=>a});var o=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(o||{});const a=o},523773:(e,t,n)=>{n.d(t,{d:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 15.86",svg:(0,n(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 0 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2.001 1.052-3.238a.625.625 0 0 0-.227-.699zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.047l1.052 3.238a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},a=(0,n(340498).wt)("starSlash",o)},565414:(e,t,n)=>{n.d(t,{I:()=>i,x:()=>r});var o=()=>n(722101),a=()=>n(148832);function i(e){const{store:t,spaceViewStore:n,transaction:i}=e,r=n.getBookmarkedPagesStore(),s=a().B.createChildStore(r,t.pointer);o().Hs({parentStore:r,prependStore:s,transaction:i})}function r(e){const{store:t,spaceViewStore:n,transaction:i}=e,r=n.getBookmarkedPagesStore(),s=a().B.createChildStore(r,t.pointer);o().TF({parentStore:r,childToRemoveStore:s,transaction:i})}},613850:(e,t,n)=>{n.d(t,{G:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"4.62 2.37 10.76 15.26",svg:(0,n(474848).jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.532 4.353.625.625 0 0 0 .44-1.17 6.69 6.69 0 0 1-4.345-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 1 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},a=(0,n(340498).wt)("arrowMergeUp",o)},675002:(e,t,n)=>{n.d(t,{C:()=>i});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.95 1.45 16.59 16.01",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.465 6.889a2.865 2.865 0 0 1 4.962-2.865l.244.422a.55.55 0 1 0 .952-.55l-.244-.422a3.965 3.965 0 1 0-6.867 3.965l.244.422a.55.55 0 1 0 .953-.55z"}),(0,o.jsx)("path",{d:"M11.557 5.959a1.75 1.75 0 0 1 1.96.142 1.748 1.748 0 0 1 2.871.23l1.367 2.366a5.84 5.84 0 0 1-8.956 7.27l-4.044-3.624a1.672 1.672 0 0 1 1.64-2.831L4.593 6.39a1.75 1.75 0 1 1 3.03-1.749l1.14 1.975a1.75 1.75 0 0 1 2.29-.22c.134-.172.303-.322.504-.437M6.54 5.266a.5.5 0 0 0-.865.5l3.216 5.57a.625.625 0 0 1-.915.813L6.12 10.76a.42.42 0 0 0-.532.651l4.044 3.624a4.591 4.591 0 0 0 7.04-5.714l-1.367-2.367a.498.498 0 1 0-.864.5l.067.118a.625.625 0 1 1-1.082.625l-.563-.974a.5.5 0 0 0-.865.5l.113.194a.625.625 0 1 1-1.083.625l-.562-.974a.5.5 0 0 0-.865.5l.562.974a.625.625 0 1 1-1.082.625z"})]})},i=(0,n(340498).wt)("handTap",a)},727722:(e,t,n)=>{n.d(t,{T:()=>A});var o=()=>n(564884),a=()=>n(242422),i=()=>n(165358),r=()=>n(416504),s=()=>n(161479),c=()=>n(609316),l=()=>n(559926),d=()=>n(745800),u=()=>n(901389),m=()=>n(357625),g=()=>n(496414),p=()=>n(892632),f=()=>n(73848),v=()=>n(972435),y=()=>n(129522),b=()=>n(522094),k=()=>n(799832);const S=(0,n(69708).YK)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});function A(e){const{store:t,environment:n,analytics:A}=e,h=(0,k().U)(t),M=null==h?void 0:h.collectionViewBlockStore(),C=null==h?void 0:h.collectionViewStore(),w=null==C?void 0:C.getCollectionStore();if((0,f().v)()){const e=b().A.getOrCreateFlowId();return l().fJ(n,{import_source:"csv",from:A.from,data_source_session_id:A.dataSourceSessionId,data_source_from:A.dataSourceFrom,import_type:"file",flowId:e,userId:n.currentUser.id,spaceId:t.getSpaceId()}),void d().Z({importType:"merge",spaceId:t.getSpaceId(),importLocation:null==w?void 0:w.id,parentId:t.id,parentTable:"block",collectionViewBlockStore:M,analyticsFrom:A.from})}let _;const I={},N=performance.now();p().Bz({environment:n,accept:".csv",bucket:"temporary",spaceId:t.getSpaceId(),onStart:e=>{_=e,g().m({message:S.uploadingCSV})},onCompleteWithToken:e=>{l().eH(n,{from:A.from,import_source:"csv"}),I.uploadTimeTaken=performance.now()-N,I.firstTimeNavigateToCollection=I.uploadTimeTaken,(async(e,o,i)=>{if(g().m({message:S.importingCSV}),!w)return;if(!y().K.findCollectionViewBlockFromStore(t))return;const l=(0,r().P)(),d=m().UT(n,c().V,{importType:"MergeIntoCollection",fileURL:e,fileName:o,collection:{id:w.id,spaceId:(0,s().e)(w.pointer.spaceId)},spaceId:(0,s().e)(w.pointer.spaceId),userTimeZone:l,signedToken:i},{spaceIds:[w.getSpaceId()]}),p=a().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let f=!1;for await(const t of d){if(t.error)throw u().f1(v().A.formatMessage(S.importFailed)),g().V(),t.error;!f&&p&&"status"in t.value&&"updated_collection"===t.value.status.message&&(f=!0,g().V())}g().V()})(e[0].fileUrl,_[0].name,e[0].signedToken),I.overallTimeTaken=performance.now()-N;for(const[t,a]of Object.entries(I))(0,o().u)({environment:n,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:a,importSource:"file",importLatencyType:t,importFileCount:1}}});i().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:I,importSource:"file",fileNames:[_[0].name]}}}})},onError:e=>{g().V(),u().f1(v().A.formatMessage(S.importFailed))}})}},751109:(e,t,n)=>{n.d(t,{z:()=>a});n(296540);var o=n(474848);const a=(0,n(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,o.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},813743:(e,t,n)=>{n.d(t,{O8:()=>V,Yf:()=>B,fS:()=>j});var o=()=>n(726637),a=()=>n(221844),i=()=>n(496506),r=()=>n(700500),s=()=>n(792071),c=()=>n(651784),l=()=>n(179034),d=()=>n(197959),u=()=>n(161479),m=()=>n(201980),g=()=>n(534177),p=()=>n(384944),f=()=>n(778417),v=()=>n(97270),y=()=>n(299545),b=()=>n(906537),k=()=>n(110955),S=()=>n(487494),A=()=>n(176106),h=()=>n(525112),M=()=>n(375447),C=()=>n(148832),w=()=>n(878710),_=()=>n(292167),I=()=>n(437219),N=()=>n(722101),x=()=>n(666144),L=()=>n(319975),T=()=>n(72159),P=()=>n(231297);function B(e){const{environment:t,textStore:n,blockStore:r,url:s,oldTextValue:m,urlSelection:g}=e;if(k().Ay.state.open||v().A.state.open||M().Ay.state.open||A().A.state.open)return!1;const p=b().get();if(!p)return!1;const f=b().getRect(p);if(!f)return!1;const C=(0,c().parseRoute)({url:s,baseUrl:o().A.domainBaseUrl,publicDomainName:o().A.publicDomainName,isMobile:Boolean(o().A.isMobile),protocol:o().A.protocol,currentUrl:window.location.href});if("page"===C.name&&Boolean(C.discussionId)&&C.discussionId){const e=C.discussionId,o=C.blockId;if(!o)return!1;const c=r.getParentBlockStore();if(!c)return!1;const p=(0,w().v3)(c,{table:l().ev,id:o,spaceId:(0,u().e)(c.pointer.spaceId)}),v=(0,w().v3)(p,{table:d().$Y,id:e,spaceId:(0,u().e)(r.pointer.spaceId)});if("none"===v.getRole())return!1;const b=new(i().ComputedStore)((()=>y().wc(v)[0]),{debugName:"firstCommentStore"}),k=new(a().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(k);const A=r.clone(k),M=n.clone(k),_=c.clone(k);return h().A.setState({args:{commentStore:b},stores:{blockStore:r,textStore:n,parentStore:c},temporaryStores:{blockStore:A,textStore:M,parentStore:_},temporaryRecordCache:k,focusedIndex:S().A.Preview,selectionRect:f,oldTextValue:m,open:!0,url:s,urlSelection:g}),I().wQ(t,{url:s}),!0}return!1}function j(e){const{actionType:t,environment:n,commentStore:o,useTempStores:a}=e,i=h().A.state;if(!i.open)return;const{oldTextValue:r}=i,c=a?i.temporaryStores:i.stores,{textStore:l,blockStore:d,parentStore:p}=c,v=n.currentUser.id;if(v){if(a){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],o={userId:v,pointer:t.pointer},a=n.defaultRecordCache.inMemoryRecordCache.getRecord(o);a?x().PC({environment:n,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:s().Bj6.fromValue(t.pointer.table,a.value),role:a.role,updatePaths:[[]],userId:v,force:!0,debugSource:"setUnfurlType"}):x().oX({environment:n,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:v})}}else n.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case S().A.Link:f().hc({environment:n,store:i.stores.blockStore}),(0,T().t)({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),h().A.setState({...i,focusedIndex:S().A.Link});break;case S().A.Mention:if(!o)return;const e=(0,u().e)(l.pointer.spaceId);if(!e)return;const a=o.id;P().createAndCommit({environment:n,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{L().R9({environment:n,store:l,value:r,transaction:t}),L().Gf({environment:n,editorMode:"default",store:l,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:m().hiQ(a,e),transaction:t,analyticsFrom:"block"})}}),h().A.setState({...i,focusedIndex:S().A.Mention});break;case S().A.Preview:if(!o)return;P().createAndCommit({environment:n,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{L().R9({environment:n,store:l,value:r,transaction:e});const t=y().eK(o);if(!t)return;if(!y().No(t)||!p||!t.getParentId())return;const a=_().s({environment:n,parentBlockStore:p,targetStore:o,transaction:e});if(N().WH({parentStore:p.getContentStore(),insertStore:a,afterStore:d,transaction:e}),0===m().q4_(i.oldTextValue).trim().length){const t=C().B.createChildStore(p.getContentStore(),i.stores.blockStore.pointer);N().TF({parentStore:p.getContentStore(),childToRemoveStore:t,transaction:e})}}}),h().A.setState({...i,focusedIndex:S().A.Preview});break;default:throw(0,g().HB)(t)}a||h().A.setState({open:!1})}}function V(e){var t,n;const{blockStore:o,transaction:a}=e,i=o.getType(),s=o.getFormat(),c=o.getSpaceId();if(!o.isDefined()||i!==r().xd.alias||null==s||null===(t=s.alias_pointer)||void 0===t||!t.id)return;const l=[m().wmz(m().hiQ(null==s||null===(n=s.alias_pointer)||void 0===n?void 0:n.id,c))];p().zv({store:o,data:{type:r().xd.text},transaction:a}),p().zv({store:o.getFormatStore(),data:{alias_pointer:null},transaction:a}),L().R9({environment:o.environment,store:o.getBlockTitleStore(),value:l,transaction:a})}},873306:(e,t,n)=>{n.d(t,{A:()=>Pt,$:()=>Tt});var o=n(296540),a=()=>n(69708),i=()=>n(699143),r=()=>n(98126),s=()=>n(493552),c=()=>n(212727),l=()=>n(340498),d=n(474848);const u={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.97",svg:(0,d.jsx)("path",{d:"M4.892 4.553a.55.55 0 0 1 .776.06l.222.258.012.017 8.777 10.24a.55.55 0 0 1-.847.7l-1.929-2.25-2.827 3.908a.626.626 0 0 1-1.13-.411l.402-5.5H5.25a.626.626 0 0 1-.507-.99l2.1-2.91-2.01-2.346a.55.55 0 0 1 .059-.776m4.752 6.443-.291 3.974 1.714-2.368-1.425-1.662zm-3.172-.671H9.02q.053 0 .103.01L7.68 8.65zm4.441-8.291a.626.626 0 0 1 1.13.41l-.391 5.51h3.098a.626.626 0 0 1 .506.993l-2.026 2.798-.837-.977 1.134-1.563h-2.474l-.688-.802.275-3.854-1.637 2.265-.837-.976z"})},m=(0,l().wt)("lightningSlash",u);var g=()=>n(858141),p=()=>n(498212),f=()=>n(939768),v=()=>n(427704);function y(e,t){const n=t.trim().toLowerCase(),o=(0,f().d9)(n).replace(/\./g,"-");return o?`${o}-${e}`:e}var b=()=>n(388693),k=()=>n(433847),S=()=>n(179034),A=()=>n(824862),h=()=>n(96689),M=()=>n(100622),C=()=>n(56366),w=()=>n(553965),_=()=>n(332393),I=()=>n(798880),N=()=>n(765957),x=()=>n(878710),L=()=>n(870092);const T={createdBy:void 0,authorizedBy:void 0,integrationType:void 0,isYou:!1,creatorEmail:void 0,tagline:void 0,integrationInfo:void 0,isInternal:!0};function P(e){const t=(0,a().tz)(),n=(0,C().K8)((()=>N().default.state.currentUserRootStore),[]);return(0,C().K8)((()=>{var o;if(!e||!n)return T;const a=e.integration_id;if(!a)return T;const i=(0,x().v3)(n,{id:a,table:_().Li}),r=i.getKeyStore("type").getValue(),s=i.getKeyStore("info").getValue(),c=e.created_by_id;let l;if(s&&"tagline"in s&&(l=s.tagline),!c)return{...T,integrationType:r,integrationInfo:s,tagline:l,isInternal:!r||"internal"===r};const d=L().L.createChildStore(n,{id:c,table:I().oo}),u=d.getDisplayName(t),m=d.getEmail(),g=null===(o=N().default.state.currentUserStore)||void 0===o?void 0:o.id,p=d.id===g,f=!r||"internal"===r;return f?{createdBy:u,authorizedBy:void 0,integrationType:r,isYou:p,creatorEmail:m,tagline:l,integrationInfo:s,isInternal:f}:{createdBy:s&&"developer_name"in s?s.developer_name:void 0,authorizedBy:u,integrationType:r,isYou:p,creatorEmail:m,tagline:l,integrationInfo:s,isInternal:f}}),[e,n,t])}var B=()=>n(401497);function j({mainContent:e,caption:t}){const n=(0,B().IS)((t=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",maxWidth:350,whiteSpace:"normal",padding:8},caption:{marginTop:e?4:0}})),[e]);return(0,d.jsxs)("div",{style:n.container,children:[e?(0,d.jsx)(s().D,{styleKey:"Caption/Medium",colorVariant:"inversePrimary",children:e}):void 0,t?(0,d.jsx)(s().D,{styleKey:"Caption/Regular",colorVariant:"inverseSecondary",style:n.caption,children:t}):void 0]})}var V=()=>n(760217),D=()=>n(859428),F=()=>n(256863);const R=(0,a().YK)({createdBy:{id:"connection.createdBy",defaultMessage:"Created by {name}"},authorizedBy:{id:"botMenuItem.authorizedBy",defaultMessage:"Authorized by {name}"},publicLabel:{id:"botMenuItem.public",defaultMessage:"Public"},selfIndicator:{id:"botMenuItem.youIndicator",defaultMessage:" (You)"},addConnectionLabel:{id:"topbarMoreConnections.addConnection",defaultMessage:"Add connection"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"},authorizedByLabel:{defaultMessage:"Authorized by {authorizedBy}",id:"topbarMenu.subActions.activeConnection.authorizedBy"},notConnectedLabel:{defaultMessage:"Add a new connection",id:"topbarMenu.subActions.addConnections.addNewConnection"},noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},capabilitiesLabel:{defaultMessage:"Capabilities",id:"topbar.connectionSection.capabilities.label"}});function U(e,t){const{bot:o,tooltipText:i,...r}=e,c=(0,C().K8)((()=>N().default.state.currentUserRootStore),[]),l=(0,a().tz)(),u=P(o);let m,g;if(u.isInternal){m=u.createdBy?l.formatMessage(R.createdBy,{name:u.createdBy}):void 0;const e=u.createdBy?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:m}),(0,d.jsx)("span",{children:u.isYou?(0,d.jsx)(a().sA,{...R.selfIndicator}):void 0})]}):void 0;g=u.creatorEmail||e?(0,d.jsx)(j,{mainContent:e,caption:u.creatorEmail}):void 0}else m=u.authorizedBy?l.formatMessage(R.authorizedBy,{name:u.authorizedBy}):void 0,g=(0,d.jsx)(j,{mainContent:u.tagline,caption:u.authorizedBy?(0,d.jsx)(a().sA,{...R.authorizedBy,values:{name:u.authorizedBy}}):void 0});const p=u.isInternal?void 0:(0,d.jsx)(s().D,{styleKey:"Caption/Regular",colorVariant:"tertiary",children:(0,d.jsx)(a().sA,{...R.publicLabel})}),f={alignSelf:"flex-start"};if(!o||!c)return null;const v=i||g;return(0,d.jsx)(D().A,{placement:"left",disableTooltip:!v,renderTooltip:()=>v,textWrap:!0,render:e=>(0,d.jsx)(V().A,{...(0,w().A)(r,e),icon:(0,d.jsx)(F().A,{botValue:o}),title:(0,n(799288).Hg)(o),caption:m,right:p,rightStyle:f,ref:t})})}const z=o.forwardRef(U);var E=()=>n(583690),O=()=>n(575143),K=()=>n(419357),q=()=>n(678553),Y=()=>n(64e3),H=()=>n(584262),W=()=>n(148307),G=()=>n(751109),X=()=>n(878079),Z=()=>n(16006),$=()=>n(103448);function Q(e){return(0,C().K8)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function J(){return(0,d.jsx)($().A,{imageURL:W().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,d.jsx)(a().sA,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function ee(){return(0,d.jsx)($().A,{imageURL:W().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,d.jsx)(a().sA,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const te=(0,o.forwardRef)((function(e,t){const{blockStore:o,...i}=e,{blockStore:r,slackIntegrationStore:s}=(0,X().x2)(o),{isDefined:c,channel:l}=Q(s),u=(0,C().K8)((()=>(0,n(492414).Ay)({store:r,pageVisitSource:H().y8.LinkInPage})),[r]);return c?(0,d.jsx)(D().A,{placement:"left",render:e=>(0,d.jsx)(O().A,{...(0,w().A)(e,i),svg:G().z,title:l,caption:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a().sA,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,d.jsx)(n(719147).A,{href:u,children:(0,d.jsx)(Z().A,{store:r,style:{display:"inline"}})})]}),ref:t}),renderTooltip:ee}):null})),ne=(0,o.forwardRef)((function(e,t){const{blockStore:n,...o}=e,i=(0,C().K8)((()=>(0,X().x2)(n).slackIntegrationStore),[n]),{isDefined:r,channel:s}=Q(i);return r?(0,d.jsx)(D().A,{placement:"left",render:e=>(0,d.jsx)(O().A,{ref:t,svg:G().z,title:s,caption:(0,d.jsx)(a().sA,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,w().A)(e,o)}),renderTooltip:ee}):null}));var oe=()=>n(726637),ae=()=>n(484714),ie=()=>n(857783),re=()=>n(187820);const se=(0,a().YK)({parentPageLabel:{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}});function ce(e){const{parentBlockStore:t}=e,n=(0,C().K8)((()=>t.getIcon()),[t]),{isParentPageEmpty:i,iconRecordCategory:r}=(0,C().K8)((()=>({isParentPageEmpty:t.isEmptyPage(),iconRecordCategory:(0,re().Te)(t)})),[t]),s=(0,ae().v3)(),[c,l]=(0,o.useState)("transparent"),u=(0,B().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-start"},textWrapper:oe().A.isMobile?{fontSize:14,paddingInlineStart:4}:{fontSize:12,paddingInlineStart:4},linkButton:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginInlineStart:2,border:"none",cursor:"pointer",backgroundColor:c,color:e.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{margin:"0px 2px"},linkButtonHover:{backgroundColor:e.selectLightGray[100]},linkButtonPressed:{backgroundColor:e.selectLightGray[200]}})),[c]);return(0,d.jsx)(Y().A,{...e,title:(0,d.jsxs)("span",{style:u.container,children:[(0,d.jsx)(a().sA,{...se.parentPageLabel}),(0,d.jsxs)("button",{type:"button",style:u.linkButton,onClick:()=>{ie().uK({environment:s,store:t,pageVisitSource:H().y8.LinkInPage})},onMouseEnter:()=>{l(u.linkButtonHover.backgroundColor)},onMouseLeave:()=>{l("transparent")},onMouseDown:()=>{l(u.linkButtonPressed.backgroundColor)},onMouseUp:()=>{l(u.linkButtonHover.backgroundColor)},children:[(0,d.jsx)(re().B6,{disabled:!0,icon:n,isEmptyPage:i,size:12,style:u.icon,iconRecordCategory:r}),(0,d.jsx)(Z().A,{store:t})]})]}),textWrapperStyle:u.textWrapper})}var le=()=>n(722872);function de(e){const[t,n]=(0,o.useState)(""),[a,i]=(0,o.useState)(!1),r=(0,o.useCallback)((()=>{n(""),i(!1)}),[]);return{query:t,setQuery:n,userToggledToAddView:a,setUserToggledToAddView:i,resetMenuState:r,inActiveOnlyMode:!a&&e}}var ue=()=>n(452558),me=()=>n(404277),ge=()=>n(45552),pe=()=>n(89924),fe=()=>n(662971);const ve=(0,o.forwardRef)((function(e,t){const{context:n,parent:i,isSharedDirectly:r,botStore:c,botPermissionSourcePage:l,originConnectionLabel:u,...m}=e,g=Boolean(c),p=(0,ae().v3)(),f=(0,a().tz)(),v=(0,C().O$)(N().AppStoreSidebarSpaceStore),y=n.blocks[0],b=(0,C().K8)((()=>y.canAdmin()&&(null==v?void 0:v.canRead())),[y,v]),k=P((0,C().K8)((()=>c.getModel()),[c])),S=de(g),{resetMenuState:A}=S,h=!k.isInternal,M=k.createdBy?f.formatMessage(R.createdBy,{name:k.createdBy}):void 0,w=k.authorizedBy?f.formatMessage(R.authorizedBy,{name:k.authorizedBy}):void 0;return(0,o.createElement)(fe().A,{...m,style:{minWidth:350},key:c.id,onFocus:i.onFocus,focused:m.focused,openOnFocus:!1,ref:t,placementToOrigin:"left",renderOrigin:e=>(0,d.jsx)(V().A,{...e,title:u,titleStyle:{fontSize:"13px",fontWeight:500},caption:k.isInternal?M:w,captionStyle:{fontSize:"11px"},right:h?(0,d.jsx)(s().D,{styleKey:"Caption-sm/Regular",colorVariant:"tertiary",children:(0,d.jsx)(a().sA,{...R.publicLabel})}):void 0,rightStyle:{alignSelf:"center",marginInlineEnd:"4px"},icon:(0,d.jsx)(F().A,{botStore:c,style:{position:"relative",width:"20px",height:"20px"}})}),renderExtension:(e,t)=>{let o;return o=p.device.isPhone?{menuType:le().gu.Modal,right:(0,d.jsx)(ge().DoneMenuText,{}),onClickRight:()=>{A(),t.close()},...e}:{menuType:le().gu.Popup,onClickOutside:()=>{A(),t.close()},...e},(0,d.jsx)(me().A,{...o,children:(0,d.jsx)(ue().A,{context:n,initialFocus:0,onAccept:i.onAccept,sections:[ye({isSharedDirectly:r,botCapabilities:c.getCapabilities(),botPermissionSourcePage:l,intl:f}),...b?[be({isSharedDirectly:r,botId:c.id,botName:c.getName()})]:[],...k.createdBy||k.authorizedBy?[ke({createdBy:k.createdBy,authorizedBy:k.authorizedBy})]:[]]})})}})}));function ye(e){const{isSharedDirectly:t,botCapabilities:n,botPermissionSourcePage:o,intl:a}=e,i=(0,k().MD)(n);return{key:"active connection capabilities section",render:e=>(0,d.jsx)(pe().A,{...e,topBorder:!1}),actions:[...t?[]:[At(o)],{key:"capabilities",displayName:a.formatMessage(R.capabilitiesLabel),analyticsName:"capabilities",searchName:a.formatMessage(R.capabilitiesLabel),closeParentMenu:!1,action:()=>{},render:e=>{const t=(0,E().I2)(i);return(0,d.jsx)(q().Ay,{...e,title:(0,d.jsx)(s().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:a.formatMessage(R.capabilitiesLabel)}),shouldWrapCaption:!0,style:{paddingInlineStart:12,paddingInlineEnd:12,paddingTop:4,paddingBottom:4},captionStyle:{marginTop:4},caption:(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:t})})}}]}}function be(e){const{botId:t,botName:n}=e;return{key:"active connection disconnect section",render:e=>(0,d.jsx)(pe().A,{...e,topBorderExtendToEdge:!0}),actions:[ht(t,n)]}}function ke(e){const{createdBy:t,authorizedBy:n}=e;return{key:"active connection metadata section",render:e=>(0,d.jsx)(pe().A,{...e,topBorderExtendToEdge:!0}),actions:[{key:"created by",displayName:t||"",analyticsName:"created_by_label",searchName:R.createdBy.defaultMessage,closeParentMenu:!0,render:()=>(0,d.jsxs)("div",{style:{width:175,display:"flex",flexDirection:"column",alignItems:"start",padding:"8px",gap:4},children:[t?(0,d.jsx)(s().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,d.jsx)(a().sA,{...R.createdBy,values:{name:t}})}):void 0,n?(0,d.jsx)(s().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,d.jsx)(a().sA,{...R.authorizedBy,values:{name:n}})}):void 0]}),action:()=>{}}]}}n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var Se=()=>n(792071),Ae=()=>n(45331),he=()=>n(534177);function Me(e){(0,n(314529).DO_NOT_USE_trackLegacy)(e,"open_more_connections_menu")}var Ce=()=>n(163580),we=()=>n(511393),_e=()=>n(106628);const Ie=(0,o.forwardRef)((function(e,t){const{context:i,parent:r,alreadyConnectedIntegrationIds:c,alreadyConnectedBotIds:u,originButtonLabel:m,connectedActionsToShow:p,...f}=e,v=i.blocks[0],y=(0,ae().v3)(),k=(0,a().tz)(),S=(0,C().O$)(N().AppStoreSidebarSpaceStore),h=(0,C().K8)((()=>null==S?void 0:S.getBotSettingsStore().getValue()),[S]),M=(0,C().K8)((()=>null!=h&&h.integration_restrictions&&null!=h&&h.integration_approval_statuses?Object.keys(h.integration_approval_statuses):[]),[h]),w=((null==p?void 0:p.length)??0)>0,{query:I,setQuery:L,userToggledToAddView:T,setUserToggledToAddView:P,resetMenuState:j}=de(w),[V,D]=(0,o.useState)({status:"loading"}),F=(0,n(645873).fJ)(_e().T.searchActions),U=(0,B().IS)((e=>({rightStyle:{color:e.text.tertiary,marginInlineEnd:5},botCapabilitiesListContainer:{display:"flex",alignItems:"start",flexDirection:"column",fontSize:n(284371).J.UISmall.desktop},botCapabilitiesList:{display:"flex",flexDirection:"column",border:`1px solid ${e.border.secondary}`,padding:14,width:"100%",borderRadius:8},botCapabilitiesListTitle:{color:e.text.secondary,marginBottom:6},dialogIconStyle:{height:l().Ev.xl,width:l().Ev.xl},connectBotDescription:{marginTop:8,color:e.text.secondary},backArrowStyle:{fill:e.text.tertiary,height:16,width:16,fontWeight:510}})),[]),[z,E]=(0,n(857437).$)();return(0,o.useEffect)((()=>{if("resolved"!==F.status)return;const e=F.value;const{currentUserRootStore:t}=N().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:y,query:t})}(I),async function(e){const t=await _e().T.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:y,spaceId:null==S?void 0:S.id,botSettings:h})}(I)]).then((([e,o])=>{const a=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:n,botValues:o,environment:a}=e,i=[],{currentUserRootStore:r}=N().default.state;if(!r)throw new Error("currentUserStore not defined");for(const s of o){const e=s.id;let o=!Boolean(s.integration_id);if(s.integration_id){const e=(0,x().v3)(r,{id:s.integration_id,table:_().Li}).getKeyStore("type").getValue();(0,_().SF)(e?{type:e}:void 0)&&(o=!0)}const c=t.has(e)||s.integration_id&&!o&&n.has(s.integration_id),l=Se().Bj6.fromValue(A().GP,s),d=(0,Ce().VT)(a,l)||(0,we().h)(a)&&(0,Ce().b0)(l);!c&&d&&i.push(s)}return i}({alreadyConnectedBotIds:u,alreadyConnectedIntegrationIds:c,botValues:e,environment:y}).filter((e=>!(0,Ae().Y)(e.integration_id))).map((e=>{if(e.integration_id&&t){const n=(0,x().v3)(t,{id:e.integration_id,table:_().Li}).getKeyStore("type").getValue();Se().Bj6.fromValue(A().GP,e).isInternalBot(n?{type:n}:void 0)&&a.add(e.integration_id)}return{table:A().GP,value:e}}));let r=o.map((e=>{if(S){const t=n(249185).C.createChildStore(S,{id:e,table:_().Li}),o=t.computeWithRecordValues((({getRecordValueAndSubscribe:e})=>e(t)));if(o&&!(0,b().v_)(o))return{table:_().Li,value:o}}})).filter(he().O9).filter((e=>!(a.has(e.value.id)||c.has(e.value.id)))).filter((e=>!(0,Ae().Y)(e.value.id)));if(b().Gk.name.toLowerCase().includes(I.toLowerCase())){const e={table:"legacy_integration",value:b().Gk};r=[...r,e]}const s=[...i,...r].sort(((e,t)=>{var n,o;const a=null===(n=e.value.name)||void 0===n?void 0:n.toLowerCase(),i=null===(o=t.value.name)||void 0===o?void 0:o.toLowerCase();return a&&i?a<i?-1:a>i?1:0:0}));D({results:s,status:"ready"})})).catch((()=>D({status:"error"})))}),[I,S,u,h,M,y,c,v,F.status,F.value]),(0,d.jsx)(fe().A,{...f,renderOrigin:(e,t)=>(0,d.jsx)(O().A,{...e,ref:t,title:m,svg:g().squareGrid2X2Icon}),renderExtension:(e,t)=>{const o=oe().A.isMobile?{menuType:le().gu.Modal,right:(0,d.jsx)(ge().DoneMenuText,{}),onClickRight:()=>{j(),t.close()},onCancel:()=>{j(),t.close()},...e}:{menuType:le().gu.Popup,onClickOutside:()=>{j(),t.close},...e},a=y.device.isMobile?{menuType:le().gu.Modal,topbarStyle:{height:0},onCancel:()=>{j(),t.close}}:{menuType:le().gu.Popup,maxHeight:"16vh",onClickOutside:()=>{j(),t.close},...e},r=Boolean(v.canAdmin()&&(null==S?void 0:S.canRead()));let m=[];const g={key:"add connection row",displayName:k.formatMessage(R.addConnectionLabel),analyticsName:"add_connection_row",searchName:k.formatMessage(R.addConnectionLabel),closeParentMenu:!1,action:()=>{P(!0)},render:e=>(0,d.jsx)(O().A,{...e,title:k.formatMessage(R.addConnectionLabel),svg:n(617668).plusIcon,svgStyle:{height:l().Ev.xs,width:l().Ev.xs}})};if(!T&&w)m=[Le(p||[],k),{key:"add connection row section",render:e=>(0,d.jsx)(pe().A,{...e}),actions:[g]}],m.push(xe({canAdminAndIsMember:r,slackValue:b().Gk}));else{if(w){const e={key:"back row",displayName:k.formatMessage(R.addConnectionLabel),analyticsName:"back_button",searchName:"back row",closeParentMenu:!1,action:()=>{P(!1),L("")},render:e=>(0,d.jsx)(O().A,{...e,title:(0,d.jsx)(s().D,{styleKey:"Body/Semibold",colorVariant:"primary",children:k.formatMessage(R.addConnectionLabel)}),svg:n(526278).w,svgStyle:U.backArrowStyle})};m=[{key:"back row section",render:e=>(0,d.jsx)(pe().A,{...e,topBorder:!1}),actions:[e]}]}r&&(m.push(function({query:e,setQuery:t,inputComboboxProps:n}){return{key:"search connections section",render:e=>(0,d.jsx)(pe().A,{style:{width:350},...e,isInput:!0,topBorder:!1}),actions:[gt(e,t,n)]}}({query:I,setQuery:L,inputComboboxProps:z})),""===I?m.push(function(e){const{searchResults:t,resultsMenuProps:n,styles:o,onClose:a,intl:i,hasExistingConnections:r}=e,s=new Set,c="ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&s.add(e.value.integration_id),vt(e.value,o,a)):wt(e)?(0,X().Qi)()&&!(0,X().yP)()?void 0:bt(e.value):yt(e.value,a))).filter(he().O9):"loading"===t.status?[mt()]:[pt()];return{key:"search initial connections section",render:e=>(0,d.jsx)(Ne,{...e,resultsMenuProps:n}),title:r?void 0:i.formatMessage(R.notConnectedLabel),actions:[...c]}}({searchResults:V,resultsMenuProps:a,styles:U,onClose:()=>j(),intl:k,hasExistingConnections:u.size+c.size>0})):m.push(function(e){const{searchResults:t,resultsMenuProps:n,styles:o,onClose:a}=e;let i;i="error"===t.status?[pt()]:"loading"===t.status?[mt()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===A().GP?vt(e.value,o,a):wt(e)?(0,X().Qi)()&&!(0,X().yP)()?void 0:bt(e.value):yt(e.value,a))).filter(he().O9):[ft()];return{key:"connections search results",render:e=>(0,d.jsx)(Ne,{...e,resultsMenuProps:n}),actions:i}}({searchResults:V,resultsMenuProps:a,styles:U,onClose:()=>j()}))),m.push(xe({canAdminAndIsMember:r,slackValue:b().Gk,includeDeveloperLink:!0}))}return(0,d.jsx)(me().A,{...o,onClick:e=>{e.stopPropagation()},children:(0,d.jsx)(ue().A,{initialFocus:0,context:i,onAccept:e=>{Me(y),e.closeParentMenu&&(t.close(),j())},comboboxProps:r?E:void 0,sections:m,resetFocusOnMouseOut:!0})})},onFocus:r.onFocus,focused:f.focused,openOnFocus:!0,ref:t,right:c.size+u.size>0?c.size+u.size:k.formatMessage(R.noConnectionsLabel),rightStyle:U.rightStyle})}));function Ne(e){const{resultsMenuProps:t,...n}=e,a=(0,o.useRef)(null),i=(0,o.useCallback)((()=>{var e;const t=null===(e=a.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,n=window.innerHeight<600?3:7;a.current&&t&&(a.current.style.maxHeight=n*t+.5*t+"px")}),[]);return(0,o.useEffect)((()=>(i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[i]),(0,d.jsx)(me().A,{...t,innerRef:a,children:(0,d.jsx)(pe().A,{...n,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function xe({canAdminAndIsMember:e,slackValue:t,includeDeveloperLink:o}){const i=e,r=!(0,X().Qi)()||(0,X().yP)(),l={key:"develop manage integrations",displayName:"Develop or manage integrations",analyticsName:"develop_manage_integrations",searchName:"develop manage integrations",closeParentMenu:!0,action:({environment:e})=>{n(559926).yQ(e,{from:"topbar_connections_menu",href:v().JZ.creatorProfileIntegrations}),window.open(v().JZ.creatorProfileIntegrations,"_blank")},render:e=>(0,d.jsx)(n(97294).N,{...e,href:v().JZ.creatorProfileIntegrations,external:!0,children:(0,d.jsx)(n(631524).p,{iconLeading:{icon:n(955363).arrowDiagonalUpRightIcon,size:"default"},style:{width:"100%"},children:(0,d.jsx)(s().D,{styleKey:"Body/Regular",children:(0,d.jsx)(a().sA,{id:"topbarMoreConnections.developManage",defaultMessage:"Develop integration"})})})})};return{key:"manage connections section",render:e=>(0,d.jsx)(pe().A,{...e}),actions:[...!i&&r?[bt(t)]:[],{key:"manage connections",displayName:Ye().A.formatMessage(dt.manageConnectionsLabel),analyticsName:dt.manageConnectionsLabel.defaultMessage,searchName:dt.manageConnectionsLabel.defaultMessage,closeParentMenu:!0,validators:[De().s,Pe().p,(0,qe().A)(je().F)],render:(e,t,n)=>(0,d.jsx)(O().A,{...e,title:Ye().A.formatMessage(dt.manageConnectionsLabel),svg:c().gearIcon}),action:e=>{Qe().Ow({currentTab:"connected_apps",openedFrom:"topbar"})}},...o?[l]:[]]}}function Le(e,t){return{key:"existing connections section",title:t.formatMessage(R.activeConnectionsLabel),render:e=>(0,d.jsx)(pe().A,{style:{maxHeight:300,overflowY:"auto"},...e}),actions:[...e]}}var Te=()=>n(574357),Pe=()=>n(158658),Be=()=>n(339425),je=()=>n(775584),Ve=()=>n(918871),De=()=>n(946561),Fe=()=>n(364859);n(18107),n(967357);function Re({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{slackIntegrationStore:o}=(0,X().x2)(n);return Boolean(o.isReady()&&!(null!=o&&null!==(t=o.getKeyStore("enabled"))&&void 0!==t&&t.getValue()))}var Ue=()=>n(322769);function ze(){var e;const{sidebarSpaceStore:t}=N().default.state,n=null==t||null===(e=t.getBotSettingsStore())||void 0===e?void 0:e.getValue();return!(0,Ue().az)(n)||Boolean((null==n?void 0:n.integration_approval_statuses)&&n.integration_approval_statuses[b().Jc])}function Ee({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{blockStore:o,slackIntegrationStore:a}=(0,X().x2)(n);return Boolean(a.isReady()&&(null==a||null===(t=a.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&o.id!==n.id)}function Oe({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{blockStore:o,slackIntegrationStore:a}=(0,X().x2)(n);return Boolean(a.isReady()&&(null==a||null===(t=a.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&o.id===n.id)}function Ke({blocks:e}){var t;const n=e.at(0);return!!n&&Boolean(null===(t=(0,X().x2)(n))||void 0===t||null===(t=t.slackIntegrationStore)||void 0===t?void 0:t.isReady())}var qe=()=>n(598101),Ye=()=>n(972435),He=()=>n(542585),We=()=>n(148832),Ge=()=>n(258836),Xe=()=>n(985405),Ze=()=>n(908928),$e=()=>n(901389),Qe=()=>n(209660),Je=()=>n(27579),et=()=>n(836095),tt=()=>n(651784),nt=()=>n(725951),ot=()=>n(898563),at=()=>n(383466),it=()=>n(384944),rt=()=>n(543002),st=()=>n(231297);const ct=(0,a().YK)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function lt({environment:e,blockId:t,intl:n}){ot().FY(e),await async function(e){const{environment:t,blockId:n,intl:o}=e,a=(0,nt().LX)(t);let i=(0,tt().Hs)(oe().A.domainBaseUrl,{blockId:n,authType:a,userId:t.currentUser.id});if(i=a.redirectToAuth?i:await(0,nt().YN)(t,i),t.device.isElectron)return void(0,et().P)(i);const r=await at().P(t,{width:530,height:530,url:i,titleMessage:ct.titleMessage});if(!r)return void $e().f1(o.formatMessage(ct.somethingWentWrong));const s=(0,tt().parseRoute)({url:r,isMobile:Boolean(oe().A.isMobile),baseUrl:oe().A.domainBaseUrl,publicDomainName:oe().A.publicDomainName,protocol:oe().A.protocol,currentUrl:window.location.href});"slackAuthCallback"===s.name&&(0,rt().K)({route:s,environment:t})}({environment:e,blockId:t,intl:n})}const dt=(0,a().YK)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"Remove {botName}"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmLabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"Connect {botName} to this page"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"},botCapabilitiesLabel:{id:"topbar.connectionSection.botCapabilities.label",defaultMessage:"Integration capabilities"},connectionBotConfirmDescription:{id:"topbar.connectionSection.connectionBotConfirmDescription.label",defaultMessage:"This integration will have the following access to this page and all its child pages"},disconnectConfirmationDescription:{id:"topbar.connectionSection.disconnectConfirmationDescription.label",defaultMessage:"This action will remove {botName} from the page. Do you want to continue?"},connectBotAccessRestricted:{id:"topbar.connectionSection.botAccessRestricted.connect.tooltip",defaultMessage:"You cant connect {botName} to this page. Please ask a workspace owner to enable it."},disconnectBotAccessRestricted:{id:"topbar.connectionSection.botAccessRestricted.disconnect.tooltip",defaultMessage:"You cant disconnect {botName} from this page. Please ask a workspace owner to disable it."}}),ut=(0,qe().A)((0,Te().U)([je().F,(0,qe().A)((0,Te().U)([n(77295).K,Pe().p]))]));function mt(){return{key:"connections loading",displayName:Ye().A.formatMessage(dt.connectionLoadingLabel),analyticsName:dt.connectionLoadingLabel.defaultMessage,searchName:dt.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,ut],render:e=>(0,d.jsx)(q().Ay,{...e,icon:(0,d.jsx)(r().k,{}),title:Ye().A.formatMessage(dt.connectionLoadingLabel)}),action:()=>{}}}function gt(e,t,n){return{key:"search connections input",analyticsName:dt.connectionSearchPlaceholderLabel.defaultMessage,displayName:Ye().A.formatMessage(dt.connectionSearchPlaceholderLabel),searchName:dt.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,ut],render:()=>(0,d.jsx)(K().Ay,{value:e,onChange:e=>t(e.target.value),placeholder:Ye().A.formatMessage(dt.connectionSearchPlaceholderLabel),focus:!0,...n}),action:()=>{}}}function pt(){return{key:"connections search error",displayName:Ye().A.formatMessage(dt.connectionSearchErrorLabel),analyticsName:dt.connectionSearchErrorLabel.defaultMessage,searchName:dt.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,ut],render:e=>(0,d.jsx)(Y().A,{title:Ye().A.formatMessage(dt.connectionSearchErrorLabel)}),action:()=>{}}}function ft(){return{key:"connections search error",displayName:Ye().A.formatMessage(dt.connectionNoSearchResultsLabel),analyticsName:dt.connectionNoSearchResultsLabel.defaultMessage,searchName:dt.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,ut],render:e=>(0,d.jsx)(Y().A,{title:Ye().A.formatMessage(dt.connectionNoSearchResultsLabel)}),action:()=>{}}}function vt(e,t,n){const{id:o,name:r}=e,c=Ye().A.formatMessage(dt.connectionSearchResultLabel,{name:r});return{key:`${o}`,displayName:c,analyticsName:c,searchName:r,closeParentMenu:!1,validators:[De().s,Pe().p,ut],render:(t,n,o)=>{const{canUserModifyPageAccess:a,tooltipText:i}=Ct(n,e.id,e.name,"connect");return(0,d.jsx)(z,{...t,bot:e,focused:t.focused,ref:t.ref,tooltipText:i,...a?{disabled:!1}:{disabled:!0,textWrapperStyle:{color:M().Tj.lightTextColor},desktopIconStyle:{fill:M().Tj.lightIconColor},mobileIconStyle:{fill:M().Tj.lightIconColor}}})},action:async o=>{await async function(e,t,n,o,r){const c=[...(0,E().I2)((0,k().MD)(n.capabilities))],{accept:l}=await $e().Gh({icon:(0,g().squareGrid2X2Icon)(o.dialogIconStyle),message:(0,d.jsxs)(i().Y1,{gap:24,direction:"vertical",style:{marginBottom:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(s().D,{styleKey:"Title-sm/Semibold",children:(0,d.jsx)(a().sA,{...dt.connectionBotConfirmLabel,values:{botName:n.name}})}),(0,d.jsx)(s().D,{styleKey:"Body/Regular",style:o.connectBotDescription,children:Ye().A.formatMessage(dt.connectionBotConfirmDescription)})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:o.botCapabilitiesListContainer,children:[(0,d.jsx)(s().D,{styleKey:"Caption/Medium",style:o.botCapabilitiesListTitle,children:Ye().A.formatMessage(dt.botCapabilitiesLabel)}),(0,d.jsx)("div",{style:o.botCapabilitiesList,children:(0,d.jsx)(i().Y1,{gap:10,direction:"vertical",children:c})})]})})]}),acceptColor:"blue",mode:"wide"});l&&Ze().sK({botValue:n,store:e,environment:t});r&&r();return{accept:l}}(o.blocks[0],o.environment,e,t),n()}}}function yt(e,t){const{id:n,name:o,info:a}=e,i=Ye().A.formatMessage(dt.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:o,closeParentMenu:!1,validators:[De().s,Pe().p,ut,(0,qe().A)(je().F)],render:(e,t,n)=>(0,d.jsx)(V().A,{...e,title:i,icon:(0,d.jsx)("img",{src:a.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{e.id!==b().Jc&&await async function(e,t){const{id:n,name:o}=e,{accept:a}=await $e().Gh({message:Ye().A.formatMessage(dt.connectionIntegrationConfirmlabel,{integrationName:o})}),i=function(e,t){if(!(0,p().uj)(e))return`${v().JZ.integrations}/${e}`;const n=y(e,void 0===t?"":t);return`${v().JZ.integrations}/${n}`}(n,o);a&&(0,Je().L)({environment:t,url:i,targetSelf:!1})}(e,t.environment)}}}function bt(e){const t=Ye().A.formatMessage(dt.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:dt.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!1,validators:[De().s,Pe().p,ze,Ke,Re,(0,qe().A)(Ve().w)],render:(n,o,a)=>(0,d.jsx)(D().A,{placement:"left",render:o=>(0,d.jsx)(V().A,{...(0,w().A)(o,n),title:t,icon:(0,d.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:J}),action:async e=>{var t;await lt({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:Ye().A.getIntl()})}}}function kt(){const e=Ye().A.formatMessage(dt.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:dt.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[De().s,Pe().p,Ee,(0,qe().A)(Ve().w)],render:(e,t,n)=>(0,d.jsx)(te,{blockStore:t.blocks[0],...e}),action:()=>{}}}function St(){const e=Ye().A.formatMessage(dt.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:dt.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[De().s,Pe().p,Oe,(0,qe().A)(Ve().w)],render:(e,t,n)=>(0,d.jsx)(ne,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,X().x2)(e.blocks[0]);!function(e,t,n){$e().ui({message:n.formatMessage(ct.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:n.formatMessage(ct.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{ot().oI(e),st().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{it().zv({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,Ye().A.getIntl())}}}function At(e){const t=Ye().A.formatMessage(dt.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[De().s,Pe().p],action:()=>{},render:(t,{blocks:n})=>{const o=n[0],a=We().B.createChildStore(o,{table:S().ev,id:e.blockId});return(0,d.jsx)(ce,{...t,parentBlockStore:a})}}}function ht(e,t){const n=Ye().A.formatMessage(dt.disconnectLabel);return{key:"disconnect integration",displayName:n,analyticsName:n,searchName:dt.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p],action:async({blocks:n,environment:o})=>{const a=n[0];await async function(e,t,n,o){const{accept:a}=await $e().Gh({message:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s().D,{styleKey:"Title-sm/Semibold",children:Ye().A.formatMessage(dt.disconnectConfirmationLabel,{botName:o})}),(0,d.jsx)(s().D,{styleKey:"Body/Regular",colorVariant:"secondary",style:{marginTop:8},children:Ye().A.formatMessage(dt.disconnectConfirmationDescription,{botName:o})})]})});a&&Ze().oG({botId:n,store:e,environment:t})}(a,o,e,t)},render:(o,a)=>{const{canUserModifyPageAccess:i,tooltipText:r}=Ct(a,e,t,"disconnect");return(0,d.jsx)(O().A,{...o,svg:m,title:n,tooltipText:r,...i?{disabled:!1}:{disabled:!0,textWrapperStyle:{color:M().Tj.lightTextColor},svgCustomFill:e=>e.icon.secondary}})}}}function Mt(e){const{botStore:t,botPermissionSourcePage:n}=e,{id:o}=t,a=t.getName(),i=Ye().A.formatMessage(dt.connectionLabel,{connectionName:a});return{key:`${o}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[De().s,Pe().p,(0,qe().A)(Be().o)],action:()=>{},render:(e,o,a)=>{const r=o.blocks[0].id===n.blockId;return(0,d.jsx)(ve,{...e,context:o,parent:a,isSharedDirectly:r,botStore:t,botPermissionSourcePage:n,originConnectionLabel:i})}}}function Ct(e,t,n,o){let a=e.blocks[0].getSpaceStore();if(!a){const t=e.blocks[0],n=t.getSpaceId();n&&(a=Xe().SpaceStore.createChildStore(t,{table:h().NX,id:n}))}let i=(0,He().R)();if(a){i=Ge().v.createChildStore(a,{table:A().GP,id:t,spaceId:a.id}).getIntegrationManagementPermissions()}const r=i.userCanModifyPageAccess;return{canUserModifyPageAccess:r,tooltipText:r?void 0:Ye().A.formatMessage("connect"===o?dt.connectBotAccessRestricted:dt.disconnectBotAccessRestricted,{botName:n||"this integration"})}}function wt(e){return"legacy_integration"===e.table&&e.value.id===b().Gk.id}n(823215);var _t=()=>n(68263),It=()=>n(310001),Nt=()=>n(329443);function xt(e){const t=function(e){var t;const n=e.blocks[0],o=(0,Nt().i0)(n).filter((e=>(0,_t().P3)(e.permissionItem)?(e.permissionItem,!0):(e.permissionItem,!1)));if(0===o.length)return{status:"no bots"};const a=new Map,i=null===(t=N().default.state.sidebarSpaceStore)||void 0===t?void 0:t.id,r=o.map((({from:e,permissionItem:t})=>{const o=Ge().v.createChildStore(n,{table:A().GP,id:t.bot_id,spaceId:i});if("block"===e.table&&!(0,Ae().Y)(o.getIntegrationId()))return a.set(t.bot_id,e),o})).filter(he().O9);if(!r.every((e=>e.isReady())))return{status:"loading"};const s=r.filter((t=>t.isDefined()&&Boolean((0,Ce().VT)(e.environment,t.getModel()))));if((0,we().h)(e.environment)){const e=s.map((e=>e.getIntegrationId())),t=new Set(e),n=r.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,Ce().b0)(e.getModel()))||(t.add(e.getIntegrationId()),0))));s.push(...n)}return{status:"ready",botStores:s,botIdToSharedPageIds:a}}(e),{alreadyConnectedBotIds:n,alreadyConnectedIntegrationIds:o,botActionsState:a}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:n,botIdToSharedPageIds:o}=e,a=(0,It().R7)(n),i=new Set,r=new Array;for(const s of n.filter(he().O9)){const e=o.get(s.id);if(!e)continue;const t=Mt({botStore:s,botPermissionSourcePage:e});r.push(t);const n=s.getIntegrationId();n&&a.has(n)||i.add(s.id)}return{alreadyConnectedIntegrationIds:a,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:r}}}(t),i=function(e,t,n){const o=dt.connectionsLabel,a=Ye().A.formatMessage(o),i="ready"===(null==n?void 0:n.status)?n.botActions:[];return{key:"add connections action",displayName:a,analyticsName:o.defaultMessage,searchName:o.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,ut,(0,qe().A)(Be().o),(0,qe().A)(Fe().q)],action:()=>{},render:(n,o,r)=>(0,d.jsx)(Ie,{...n,context:o,parent:r,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:a,connectedActionsToShow:i})}}(o,n,a);return"loading"===a.status?{loadingAction:[mt()],connectedActions:[],searchSubMenu:i}:{loadingAction:[],connectedActions:[],searchSubMenu:i}}const Lt=(0,a().YK)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),Tt=(0,n(10521).Ls)({key:"copy public API object",displayName:Lt.copyPublicApiObject,analyticsName:Lt.copyPublicApiObject.defaultMessage,validators:[n(440902).v,(0,n(963335).S)("public_api_dev_mode")],closeParentMenu:!1,svg:n(536583).d,action:async({environment:e,blocks:t})=>{const o=await n(559506).callApi({eventName:"getPublicApiObject",environment:e,data:{id:t[0].id}});let a;a="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const i=await n(884107).R.clipboardActions.load();i.copyString({environment:e,stringValue:a,copiedMessage:i.clipboardMessages.copiedApiObjectToClipboard})}});function Pt(e){const{loadingAction:t,connectedActions:n,searchSubMenu:o}=xt(e);return{key:"topbar connections",render:e=>(0,d.jsx)(pe().A,{...e,style:{marginTop:1},topBorder:!0}),actions:[...t,...[kt(),St()],...n,o,Tt]}}},878079:(e,t,n)=>{n.d(t,{Qi:()=>g,Z5:()=>f,fb:()=>p,x2:()=>d,yP:()=>m});n(944114);var o=()=>n(242422),a=()=>n(617871),i=()=>n(865377),r=()=>n(322769),s=()=>n(765957),c=()=>n(878710),l=()=>n(227894);function d(e){const t=(0,l().g)(e),n=[];for(const o of t)"block"===o.table&&n.push({blockStore:o,slackIntegrationStore:(0,c().v3)(e,{table:i().VY,id:o.id})});for(const{blockStore:o,slackIntegrationStore:a}of n)if(a.isReady()){if(a.getKeyStore("enabled").getValue())return{blockStore:o,slackIntegrationStore:a}}return{blockStore:e,slackIntegrationStore:(0,c().v3)(e,{table:i().VY,id:e.id})}}function u(){var e;const t=null===(e=s().default.state.sidebarSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue();return(0,r().nH)({spaceBotSettings:t,integrationId:a().zG})}function m(){return o().default.checkGate({gateName:"legacy_slack_notifications"})}function g(){return u()||!1}function p(){return u()||!1}function f(){return!!u()&&o().default.checkGate({gateName:"enable_notion_activity_notifications_in_slack"})}},898563:(e,t,n)=>{n.d(t,{C6:()=>v,Eu:()=>u,FY:()=>s,MP:()=>p,YT:()=>d,d2:()=>f,fK:()=>y,lL:()=>l,mH:()=>b,oI:()=>c,sD:()=>m,yS:()=>g});var o=()=>n(314529),a=()=>n(242422),i=()=>n(680074),r=()=>n(10984);function s(e){(0,o().DO_NOT_USE_trackLegacy)(e,"add_slack_integration")}function c(e){(0,o().DO_NOT_USE_trackLegacy)(e,"remove_slack_integration")}function l(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_create",t)}function d(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_delete",t)}function u(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_update",t)}function m(e,t){const n=r().AI(),a=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function g(e,t){const n=r().AI(),a=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function p(e,t){const n=r().AI(),a=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function f(e,t){const n=r().AI(),a=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function v(e,t){const n=r().AI(),a=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function y(e,t){const n=r().AI(),s=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),a().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function b(e,t){const n=r().AI(),s=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),a().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},946561:(e,t,n)=>{n.d(t,{s:()=>a});var o=()=>n(929219);function a(){return o().A.state.online}},964179:(e,t,n)=>{n.d(t,{w:()=>o});n(898992),n(823215);function o(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&t.canEdit()&&e.isDefined()&&e.getParentId()!==t.id)}))}},988268:(e,t,n)=>{n.d(t,{j:()=>r});var o=()=>n(747100),a=()=>n(543886),i=()=>n(405170);function r(){return o().Gb()?i().A:a().A}}}]);