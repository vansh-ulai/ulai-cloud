"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28463,35905,96772],{29037:(e,t,i)=>{i.r(t),i.d(t,{checkmarkIcon:()=>r,iconDefinition:()=>n});i(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,i(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},r=(0,i(340498).wt)("checkmark",n)},88291:(e,t,i)=>{i.d(t,{$:()=>n});const n=new(i(848776).U)((()=>"aiPickableModels"),(async e=>{const t=await Promise.resolve().then(i.bind(i,559506)),n=await t.callApi({eventName:"getAiPickableModels",environment:e,data:{}});return"success"===n.type?n.data.models:[]}));i(852832).exposeDebugValue("AiPickableModelsStore",n)},101927:(e,t,i)=>{i.d(t,{DE:()=>v,N8:()=>b,NA:()=>p,aD:()=>f,ab:()=>u,c6:()=>S,ie:()=>m,mR:()=>g,q$:()=>h});i(898992),i(737550);var n=()=>i(242422),r=()=>i(239666),a=()=>i(88291),o=()=>i(298166),s=()=>i(209269),l=()=>i(430483),d=()=>i(295169),c=()=>i(255350);function u(){return l().zD.canUseAssistantDebugTools()}function p(){var e;return Boolean(l().zD.showSearchDebugTools()&&(null===(e=s().A.state)||void 0===e?void 0:e.showSearchDebugPanel))}function h(e){var t;const{isWriter:i,onPublicDomain:a}=e,l=function(){const e=n().default.getConfigKey("ai_qna_silent_retry_mode","silentRetrySearchMode");if(e)return e in o().qK?e:void 0}();return{searchScope:(0,c().Ac)(i,a),searchFilters:r().NH,searchOverrides:{launchSilentSearchMode:l,...null===(t=s().A.state)||void 0===t?void 0:t.searchOverrides},retrySearchOverrides:l?{searchMode:l}:void 0}}function g(){var e,t;const i=null===(e=d().default.getActiveSession())||void 0===e?void 0:e.sessionId,n=null===(t=s().A.state)||void 0===t?void 0:t.queriesSubmittedForTranslationSessionId;return!(!i||!n)&&Boolean(p()&&n.includes(i))}function v(e){var t;if(!u())return;const i=null===(t=s().A.state)||void 0===t?void 0:t.modelOverride;return f(e).some((e=>e===i))?i:void 0}function f(e){return a().$.getData(e,{})??[]}function m(e){if(!u())return;const t=s().A.state;s().A.setState({...t,modelOverride:e})}function b(){var e;return Boolean(u()&&(null===(e=s().A.state)||void 0===e?void 0:e.showDebugBar))}function S(e){return!!s().A.canPersistToLocalStorage()&&(s().A.setState({...s().A.state,showDebugBar:e}),!0)}},209269:(e,t,i)=>{i.d(t,{A:()=>n});const n=new(i(178624).R)({key:"assistantDebugPreferences",namespace:i(553737).Bq,important:!1,trackingType:"preference"})},218602:(e,t,i)=>{function n(e){return`${e.environmentName}-${e.suffix}`}i.d(t,{W:()=>n})},255350:(e,t,i)=>{i.d(t,{Ac:()=>A,D0:()=>M,I9:()=>k,Io:()=>C,JW:()=>w,Nr:()=>z,hX:()=>y,j8:()=>x,tu:()=>I});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698);var n=()=>i(902006),r=()=>i(992214),a=()=>i(700500),o=()=>i(90023),s=()=>i(416504),l=()=>i(179034),d=()=>i(101628),c=()=>i(854150),u=()=>i(534177),p=()=>i(987267),h=()=>i(486674),g=()=>i(71304),v=()=>i(562031),f=()=>i(148832),m=()=>i(906740),b=()=>i(95758);const S=(0,i(69708).YK)({everythingLabel:{id:"assistantHelpers.getScopeTitle.everything",defaultMessage:"All sources"},notionLabel:{id:"assistantHelpers.getScopeTitle.notion",defaultMessage:"Notion"},notionHelpLabel:{id:"assistantHelpers.getScopeTitle.notionHelp",defaultMessage:"Notion Help Center"},aiKnowledgeLabel:{id:"assistantHelpers.getScopeTitle.aiKnowledge",defaultMessage:"AI knowledge"},currentPageLabel:{id:"assistantHelpers.getScopeTitle.currentPage",defaultMessage:"Current page"}});function y(){return new Set([a().xd.page,a().xd.collectionView,a().xd.collectionViewPage])}const x=new Set([a().xd.factory]);function w(e){const t=e.getType(),i=e.getModel(),n=y(),r=!(null==i||!i.isCollectionView())&&0===i.getCollectionPointers().length;return Boolean(t&&n.has(t)&&!r&&!(0,o().dT)(i))}function C(e){const{searchScope:t,sidebarSpaceStore:i}=e;return"everything"===t.type||"labeler"===t.type||"universal-none"===t.type||"notion-none"===t.type?{type:"everything"}:"teamspace"===t.type?{type:"teamspace",teamStore:b().h.createChildStore(i,{id:t.teamId,table:c().yK,spaceId:i.id})}:"notion"===t.type?{type:"notion"}:"workspace"===t.type||"slackbot"===t.type||"universal-workspace"===t.type?{type:"workspace"}:"page"===t.type?{type:"page",pageStore:f().B.createChildStore(i,{id:t.pageId,table:l().ev,spaceId:i.id})}:"collection"===t.type?{type:"collection",pageStore:f().B.createChildStore(i,{id:t.pageId,table:l().ev,spaceId:i.id}),collectionId:t.collectionId}:"helpdocs"===t.type?{type:"helpdocs"}:"ai-knowledge"===t.type?{type:"ai-knowledge"}:"web"===t.type?{type:"web"}:"site"===t.type?{type:"site",siteStore:m().P.createChildStore(i,{id:t.siteId,table:d().Eu,spaceId:i.id})}:(0,n().SC)(t.type)?t:(0,u().HB)(t.type)}function k(e){const{scopeMenuItem:t,currentSearchScope:i}=e;return"everything"===i.type||"labeler"===i.type||"universal-none"===i.type||"notion-none"===i.type?"everything"===t.type:"notion"===i.type?"notion"===t.type:"workspace"===i.type||"slackbot"===i.type||"universal-workspace"===i.type?"workspace"===t.type:"teamspace"===i.type?"teamspace"===t.type&&t.teamStore.id===i.teamId:"page"===i.type?"page"===t.type&&t.pageStore.id===i.pageId:"collection"===i.type?"collection"===t.type&&t.pageStore.id===i.pageId&&t.collectionId===i.collectionId:"helpdocs"===i.type?"helpdocs"===t.type:"ai-knowledge"===i.type?"ai-knowledge"===t.type:(0,n().SC)(i.type)?t.type===i.type:"web"===i.type?"web"===t.type:"site"===i.type?"site"===t.type&&t.siteStore.id===i.siteId:void(0,u().HB)(i.type)}function M(e){var t;const i=null===(t=e.getCollectionPointer())||void 0===t?void 0:t.id;return i?{type:"collection",pageStore:e,collectionId:i}:{type:"page",pageStore:e}}function z(e){const{item:t,intl:i}=e;if("everything"===t.type)return{type:"everything"};if("workspace"===t.type)return{type:"workspace"};if("helpdocs"===t.type)return{type:"helpdocs"};if("ai-knowledge"===t.type)return{type:"ai-knowledge"};if("notion"===t.type)return{type:"notion"};if("teamspace"===t.type)return{type:"teamspace",store:t.teamStore,accessLevel:t.teamStore.getTeamAccessLevel()};if("page"===t.type||"collection"===t.type){var a,o;const e=t.pageStore;return{type:"page",store:e,isCurrentPage:e.id===(null===(a=(0,h().a)())||void 0===a?void 0:a.id),title:(null===(o=e.getModel())||void 0===o?void 0:o.getRenderTitleWithPlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,s().P)(),intl:i}))??(0,r().L)(i)}}return"web"===t.type?{type:"web"}:"site"===t.type?{type:"site",siteStore:t.siteStore}:(0,n().SC)(t.type)?{type:t.type}:(0,u().HB)(t.type)}function I(e){const{environment:t,searchScope:i,spaceStore:r,intl:a,showEverythingLabel:o}=e;if("everything"===i.type||"slackbot"===i.type)return o?{scopeTitle:a.formatMessage(S.everythingLabel)}:{scopeTitle:void 0};if("labeler"===i.type||"universal-none"===i.type||"notion-none"===i.type||"site"===i.type)return{scopeTitle:void 0};if("web"===i.type)return{scopeTitle:"Web"};if("notion"===i.type)return{scopeTitle:a.formatMessage(S.notionLabel)};if("helpdocs"===i.type)return{scopeTitle:a.formatMessage(S.notionHelpLabel)};if("ai-knowledge"===i.type)return{scopeTitle:a.formatMessage(S.aiKnowledgeLabel),dontShowPrepositionalCopy:!0};var s;if("workspace"===i.type||"universal-workspace"===i.type)return{scopeTitle:null===(s=r.getModel())||void 0===s?void 0:s.getRenderTitle()};if("teamspace"===i.type){var d;return{scopeTitle:null===(d=b().h.createChildStore(r,{id:i.teamId,table:c().yK,spaceId:r.id}).getModel())||void 0===d?void 0:d.getRenderTitle()}}if("page"===i.type||"collection"===i.type){const e=(0,h().a)();if(e){const t=e.getType();if("page"===i.type&&"page"===t&&e.id===i.pageId)return{scopeTitle:a.formatMessage(S.currentPageLabel),dontShowPrepositionalCopy:!0};if("collection"===i.type&&("collection_view"===t||"collection_view_page"===t)&&e.id===i.pageId)return{scopeTitle:a.formatMessage(S.currentPageLabel),dontShowPrepositionalCopy:!0}}const n=f().B.createChildStore(r,{id:i.pageId,table:l().ev,spaceId:r.id});return{scopeTitle:(0,g().tS)({environment:t,intl:a,store:n})}}return(0,n().SC)(i.type)?{scopeTitle:p().w0[i.type]}:(0,u().HB)(i.type)}function A(e,t){const i=(0,h().a)();if(i){if(t)return{type:"site",siteId:(0,v().g2)()??""};const n=i.getType();if(e&&"page"===n)return{type:"page",pageId:i.id}}return{type:"everything"}}},298166:(e,t,i)=>{i.d(t,{BG:()=>l,Bg:()=>d,ID:()=>p,Ue:()=>u,Wo:()=>c,qK:()=>s});var n=()=>i(534177);const r="default",a=["esQueryNLastEdited200Pages"],o=["gpt4Rerank","secondPage","notionOnly",...a],s=["default","firstResult","firstTwoResults",...o],l={gpt4Rerank:{experimentalReranker:"gpt4-classify",rerankerConsiderK:40},secondPage:{page:1},notionOnly:{maxVectorSlackResults:0},esQueryNLastEdited200Pages:{maxVectorSlackResults:0,vectorlessSearch:{enable:!0,groupName:"es_query_n_last_edited_200_pages",pageCount:200},disableLimitedQnADarkRead:!0}};function d(e){return!!(0,n().Xk)(o,e)}function c(e){return!!(0,n().Xk)(a,e)}const u=["blendedScore","cohereRelevance","rerankProbability","authorityScore","vectorCosineDistance","xgbScore"];class p extends(()=>i(757695))().Store{constructor(){super()}static create(e){const t=new p;return t.setState(e),t}hasLockAction(){const e=this.state;return Boolean((null==e?void 0:e.committing)||(null==e?void 0:e.evaluating)||(null==e?void 0:e.sampling))}setSearchScope(e){this.update((t=>({...t,searchScope:e})))}setSearchFilters(e){this.update((t=>({...t,searchFilters:e})))}setSearchMode(e){this.update((t=>({...t,searchOverrides:{...t.searchOverrides,searchMode:e}})))}getLaunchSilentSearchMode(){var e,t;return null!==(e=this.state)&&void 0!==e&&e.retrying||null===(t=this.state)||void 0===t||null===(t=t.searchOverrides)||void 0===t?void 0:t.launchSilentSearchMode}getSearchMode(){var e,t,i,n;return(null!==(e=this.state)&&void 0!==e&&e.retrying?(null===(t=this.state.retrySearchOverrides)||void 0===t?void 0:t.searchMode)||(null===(i=this.state.searchOverrides)||void 0===i?void 0:i.searchMode):null===(n=this.state)||void 0===n||null===(n=n.searchOverrides)||void 0===n?void 0:n.searchMode)??r}getSearchModeForNonRetry(){var e;return(null===(e=this.state)||void 0===e||null===(e=e.searchOverrides)||void 0===e?void 0:e.searchMode)??r}getSearchModeForRetry(){var e;return(null===(e=this.state)||void 0===e||null===(e=e.retrySearchOverrides)||void 0===e?void 0:e.searchMode)??r}updateState(e){this.update((t=>({...t,...e})))}}},459129:(e,t,i)=>{i.d(t,{Ou:()=>g,VZ:()=>f,WB:()=>h,Wd:()=>v,wm:()=>m});i(16280),i(944114),i(581454);var n=()=>i(362750),r=()=>i(386164),a=()=>i(155792),o=()=>i(789296),s=()=>i(532659),l=()=>i(498212),d=()=>i(559506),c=()=>i(901389),u=()=>i(594794),p=()=>i(765957);function h(e){const{environment:t,feedbackType:i,userComment:n,spaceId:a,traceId:s,type:l,threadId:c,stepId:u,config:p,promptKey:h,failureReasons:g}=e,v={type:l,traceId:s,spaceId:a,feedbackType:i,userComment:n,threadId:c,stepId:u,model:(0,o().kM)(p),promptKey:h,...g&&g.length>0?{failureReasons:g}:{}};d().callApi({eventName:"saveInferenceTranscriptFeedback",environment:t,data:v,headers:(0,r().WS)({spaceId:a})})}async function g(e){const{environment:t,clientStore:i,inference:o,threadId:c}=e,h=i.getOrCreateClientAIChatThreadStore(c),g=h.state.inferenceKeysToAnnotations[o.key],v=i.state.model??"default",f=p().default.state.sidebarSpaceStore;if(!f)throw new Error("No current space store");const m=await d().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,u().Z1)({environment:t,table:a().mS,spaceId:f.id}),type:"config",value:{type:"debug-inference",inference:{...o.value,input:{...o.value.input,...g?{annotation:g}:void 0}},model:v}}],traceId:(0,l().Ay)(),spaceId:f.id,generateTitle:!1},headers:(0,r().WS)({spaceId:f.id})});if("failed"===m.type)throw m.error;const b=[];if(s().hS.is(m.data))for await(const r of m.data)if("debug-inference"===r.type)b.push(r.value),h.setState({...h.state,inferences:h.state.inferences.map((e=>e.key===o.key?{...e,value:{...e.value,expected:(0,n().Zl)(b)}}:e))});else if("error"===r.type)throw r.message}async function v(e){const{environment:t,request:i,memory:n,onChange:o,clientStore:h}=e,g=h.state.model??"default",v=p().default.state.sidebarSpaceStore;if(!v)throw new Error("No current space store");if(!n.feedback)return void c().rG({message:"No feedback found"});const f=await d().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,u().Z1)({environment:t,table:a().mS,spaceId:v.id}),type:"config",value:{type:"memory-agent",request:i,feedback:n.feedback,model:g}}],traceId:(0,l().Ay)(),spaceId:v.id,generateTitle:!1},headers:(0,r().WS)({spaceId:v.id})});if("failed"!==f.type){if(s().hS.is(f.data))for await(const r of f.data)"memory-agent"===r.type?o(r.value):"error"===r.type&&c().rG({message:r.message})}else c().Qg(f)}async function f(e){const{environment:t,request:i,memory:n,onChange:o,clientStore:h}=e,g=h.state.model??"default",v=p().default.state.sidebarSpaceStore;if(!v)throw new Error("No current space store");const f=await d().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,u().Z1)({environment:t,table:a().mS,spaceId:v.id}),type:"config",value:{type:"memory-agent",request:i,memory:n,model:g,testOnly:!0}}],traceId:(0,l().Ay)(),spaceId:v.id,generateTitle:!1},headers:(0,r().WS)({spaceId:v.id})});if("failed"!==f.type){if(s().hS.is(f.data))for await(const r of f.data)"memory-agent"===r.type?o(r.value):"error"===r.type&&c().rG({message:r.message})}else c().Qg(f)}async function m(e){const{environment:t,inference:i,project:n,dataset:r}=e;await d().callApi({eventName:"insertIntoBraintrustDataset",environment:t,data:{project:n,dataset:r,value:i}}),c().rG({message:`Saved to project: ${n}, dataset: ${r}`})}},562936:(e,t,i)=>{i.d(t,{b:()=>l});var n=i(296540),r=()=>i(401497),a=()=>i(124092),o=()=>i(803960),s=i(474848);function l(e){var t;const[i,l]=n.useState(e.defaultOpen??!1),d=(0,r().IS)((t=>({wrap:{cursor:"pointer",...e.style},header:{display:"flex",alignItems:"center",gap:8,...!1===e.isToggleEnabled?{whiteSpace:"nowrap",height:28,paddingInlineStart:8,paddingInlineEnd:8}:{},...e.headerStyle},text:{minWidth:0,flexShrink:1,overflow:"hidden",textOverflow:"ellipsis"},content:{cursor:"auto",marginTop:12},icon:{width:16,height:16,fill:t.icon.primary},chevronDownIcon:{width:16,height:16,fill:t.icon.secondary,transition:"transform 0.2s ease-in-out",transformOrigin:"center",transform:i?"rotate(0deg)":"rotate(-90deg)"}})),[e.style,e.headerStyle,i,e.isToggleEnabled]),c=(0,n.useCallback)((()=>l(!i)),[i]),u=(0,s.jsxs)(s.Fragment,{children:[e.left,null===(t=e.icon)||void 0===t?void 0:t.call(e,{...d.icon,...e.iconStyle}),(0,s.jsx)("span",{style:d.text,children:e.label}),(0,s.jsx)("div",{style:{flexGrow:1}}),e.right]});return!1===e.isToggleEnabled?(0,s.jsx)("div",{style:e.style,children:(0,s.jsx)("div",{style:d.header,children:u})}):(0,s.jsxs)("div",{style:d.wrap,children:[(0,s.jsxs)(a().p,{onClick:c,style:d.header,children:[u,(0,o().arrowChevronSingleDownIcon)(d.chevronDownIcon)]}),i?(0,s.jsx)("div",{style:d.content,children:e.children}):void 0]})}},627503:(e,t,i)=>{i.d(t,{a:()=>r});i(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,i(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},r=(0,i(340498).wt)("duplicateSmall",n)},675803:(e,t,i)=>{i.r(t),i.d(t,{DockedSidebar:()=>ie});var n=i(296540),r=()=>i(484714),a=()=>i(401497),o=()=>i(72307),s=()=>i(38337),l=()=>i(79043),d=()=>i(275598),c=(i(944114),i(898992),i(354520),i(672577),()=>i(203066)),u=()=>i(153321),p=()=>i(59226),h=()=>i(56366),g=()=>i(75435),v=()=>i(998531),f=()=>i(209199),m=()=>i(145214),b=()=>i(35392),S=()=>i(754735),y=()=>i(111043),x=()=>i(346),w=()=>i(567121),C=()=>i(644914),k=()=>i(118078),M=()=>i(522282),z=()=>i(996958),I=()=>i(304261),A=()=>i(534177);function j(e){const{availableEditorSize:t,userPreferenceSidebarWidth:i}=e,n=i??t.width*M().Jx,r=Math.max(M().hh,t.width-M().UP),a=Math.min(M().vd,r);return Math.max(M().hh,Math.min(a,n))}var D=()=>i(380295),R=()=>i(590027);var T=()=>i(706959);var P=i(474848);function E(e){const{chatSidebarVisibility:t,editorWidthUsed:i,animationConfig:n,shouldAnimate:o}=e,{isTablet:s}=(0,r().Y0)(),l=(0,a().IS)((e=>({spacer:{background:"transparent",height:"100%",flexShrink:0,flexGrow:0,pointerEvents:"none"}})),[]),d=(0,z().D)({chatSidebarVisibility:t,editorWidthUsed:i});return(0,P.jsx)(m().A,{style:l.spacer,initial:d.initial,animate:d.animate,config:n,skip:!o,visible:!s})}var B=()=>i(350605),W=()=>i(751735);function N(e){const{chatSidebarMode:t}=e,i=(0,a().IS)((e=>{const i=`linear-gradient(to bottom, ${(0,W().X4)(e.background.primary,.25)}, ${(0,W().X4)(e.background.primary,0)} 50%), linear-gradient(to right, rgba(0, 0, 0, 0.008), rgba(0, 0, 0, 0) 32px), linear-gradient(to right, rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0) 72px)`;let n;return"popup"===t&&"dark"===e.mode?n=e.gray.background.primary:"sidebar"===t&&(n=i),{shading:{background:n,willChange:"background",position:"absolute",inset:0,transition:`opacity ${M().nW}ms ease-in-out, background ${M().nW}ms ease-in-out`}}}),[t]);return(0,P.jsx)("div",{style:i.shading})}var _=()=>i(819121),L=()=>i(93583),U=()=>i(493552),F=()=>i(69708),H=()=>i(496603),O=()=>i(778417),V=()=>i(603820),$=()=>i(859428),K=()=>i(553965),X=()=>i(906537);function Y(e){const{size:t,anchorToSide:i,minSize:o,maxSize:s,onSizeWillChange:l,onSizeChanging:d,onSizeChangeFinished:c,onDismiss:u,keyboardShortcut:p}=e,h=(0,F().tz)(),g=(0,r().v3)(),{device:m}=g,[b,S]=(0,n.useState)(!1),[y,x]=(0,n.useState)({x:0,y:0}),[w,C]=(0,_().A)(),k=(0,n.useRef)(null),z=(0,L().A)(w,k),I=(0,n.useRef)(null),A=(0,n.useRef)(!1),j=(0,n.useCallback)((e=>Math.max(o,Math.min(s,e))),[o,s]),D=(0,n.useCallback)((e=>{O().IU({environment:g}),I.current={startX:e.currentX,startSize:t},A.current=!1,null==l||l()}),[g,t,l]),R=(0,n.useCallback)((e=>{if(!I.current)return;X().clear(g),A.current=!0;const{startX:t,startSize:n}=I.current,r=e.currentX-t,a="right"===i?n-((0,f().A1)()?-r:r):n+((0,f().A1)()?-r:r),o=j(a);null==d||d(o)}),[i,g,j,d]),T=(0,n.useCallback)((()=>{!A.current&&u&&u(),I.current=null,null==c||c()}),[u,c]),E=(0,n.useCallback)((()=>{I.current=null}),[]),B=(0,n.useCallback)((()=>{var e;const t=null===(e=k.current)||void 0===e?void 0:e.getBoundingClientRect();t&&x((e=>({x:t.left+t.width/2,y:e.y||t.top+t.height/2})))}),[]),W=(0,n.useCallback)((e=>{var t;S(!0);const i=null===(t=k.current)||void 0===t?void 0:t.getBoundingClientRect();i&&x({x:i.left+i.width/2,y:e.clientY})}),[]),N=(0,n.useCallback)((()=>{S(!0)}),[]),Y=(0,n.useCallback)((()=>{S(!1)}),[]),q=(0,n.useCallback)((()=>{const e=j(t-M().xw);null==d||d(e),null==c||c(),requestAnimationFrame(B)}),[t,j,d,c,B]),G=(0,n.useCallback)((()=>{const e=j(t+M().xw);null==d||d(e),null==c||c(),requestAnimationFrame(B)}),[t,j,d,c,B]),Z=(0,n.useCallback)((()=>{u&&u()}),[u]);(0,n.useEffect)((()=>{requestAnimationFrame(B)}),[C,B]);const Q=(t-o)/(s-o),J=e=>(0,P.jsx)(U().D,{as:"span",colorVariant:"inverseSecondary",children:e}),ee=(0,n.useCallback)((()=>{const e=Boolean(u),t=Boolean(p);return e&&t?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(F().sA,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"collapsiblePanelResizer.tooltip.closeWithShortcut",values:{invertedcolor:J,keyboardShortcut:p}}),(0,P.jsx)("br",{}),(0,P.jsx)(F().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:J}})]}):e?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(F().sA,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"collapsiblePanelResizer.tooltip.closeMessage",values:{invertedcolor:J}}),(0,P.jsx)("br",{}),(0,P.jsx)(F().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:J}})]}):(0,P.jsx)(F().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:J}})}),[u,p]),te=(0,f().A1)()?"left"===i?G:q:"left"===i?q:G,ie=(0,f().A1)()?"left"===i?q:G:"left"===i?G:q,ne=(0,a().IS)((e=>({wrapper:{height:"100%",zIndex:1},draggable:{cursor:"col-resize",height:"100%",width:12,position:"absolute",pointerEvents:"auto",..."right"===i?{insetInlineStart:0}:{insetInlineEnd:0},top:0},resizer:{position:"absolute",..."right"===i?{insetInlineStart:0}:{insetInlineEnd:0},top:0,height:"100%",width:1,backgroundColor:b?e.border.primary:e.border.secondary,pointerEvents:"none"}})),[i,b]);return m.isChromebook?null:(0,P.jsx)(v().N,{capture:C,debugName:"SidebarResizer",onLeft:te,onRight:ie,onUp:H().D_,onDown:H().D_,onTab:H().D_,onUntab:H().D_,onEnter:Z,children:(0,P.jsx)($().A,{renderTooltip:ee,originRect:new DOMRect(y.x,y.y,0,0),placement:"right"===i?"left":"right",originGap:16,delayThreshold:0,render:e=>(0,P.jsxs)("div",{className:"wrapper",style:ne.wrapper,...(0,K().A)(e,{onMouseMove:N,onMouseLeave:Y,onMouseEnter:W}),children:[(0,P.jsx)("div",{style:ne.resizer}),(0,P.jsx)(V().A,{onDraggableDragStart:D,onDraggableDragMove:R,onDraggableDragEnd:T,onDraggableDragCancel:E,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,P.jsx)("div",{className:"separator",ref:z,role:"separator",tabIndex:0,"aria-label":h.formatMessage({id:"sidebarResizer.tooltip.resizeLabel",defaultMessage:"Resize with left and right arrow keys"}),"aria-orientation":"vertical","aria-valuenow":Math.round(100*Q),"aria-valuemin":0,"aria-valuemax":100,style:ne.draggable,...e})})]})})})}function q(e){const{chatSidebarRouteData:t,fromSurface:i="corner"}=e,o=(0,r().v3)(),l=(0,S().cD)(),d=(0,n.useRef)(!1),W=(0,h().O$)(g().b),_=(0,p().X)("agent_popup_dnd"),{onDismiss:L,onDismissed:U,naturalPanelContentSize:F,userPreferenceSidebarWidth:H,visibility:O}=(0,T().c)(),V=(0,h().K8)((()=>R().MU.state.chatSidebarMode),[]),$=(0,I().Ci)(),K=(0,x().n_)(),X=(0,y().o)(),q=(0,h().K8)((()=>o.WindowSizeStore.getSafePaddingTopPx(0)),[o]),[G,Z]=(0,n.useState)(void 0),[Q,J]=(0,n.useState)(void 0),[ee,te]=(0,n.useState)(void 0),[ie,ne]=(0,n.useState)(void 0),[re,ae]=(0,n.useState)([]),oe=(0,h().K8)((()=>R().MU.state.isDragging),[]),se=function(e){const t=(0,n.useRef)(e);return e.isOpen&&(t.current=e),t.current}(t),le=(0,h().K8)((()=>(0,C().km)(o)),[o]),de=(0,n.useMemo)((()=>({width:l.width-le,height:K?l.height-w().ls:l.height})),[l,le,K]),ce=(0,h().K8)((()=>R().MU.state.isDragging?"popup":V),[V]),{handleAnimationEnd:ue}=(0,D().m)({shouldAnimateRef:d,chatSidebarMode:V,chatSidebarVisibility:O,onClosingFinished:U}),{dragSize:pe,onSizeWillChange:he,onWidthChange:ge,onSizeChangeFinished:ve}=function(e){const{shouldAnimateRef:t,chatSidebarMode:i}=e,[r,a]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{a(void 0)}),[i]);const o=(0,n.useCallback)((()=>{t.current=!1}),[t]),s=(0,n.useCallback)((e=>{"sidebar"===i&&a({width:e})}),[i]),l=(0,n.useCallback)((()=>{if("sidebar"===i&&void 0!==r&&(R().BC.setState(r.width),a(void 0),void 0!==r.width)){const e=r.width;R().MU.update((t=>({...t,editorWidthUsed:e})))}}),[i,r]);return{dragSize:r,onSizeWillChange:o,onWidthChange:s,onSizeChangeFinished:l}}({shouldAnimateRef:d,chatSidebarMode:V}),{editorWidthUsed:fe,panelSize:me,panelRect:be}=(0,n.useMemo)((()=>function(e){const{availableEditorSize:t,chatSidebarMode:i,currentPerformanceToolbarHeight:n,dragSize:r,naturalPanelContentSize:a,notionSidebarWidth:o,tempDragPosition:s,userPreferenceSidebarWidth:l,mobileBottomPadding:d=0,safeAreaTopPadding:c=0}=e;let u,p,h;if("sidebar"===i){const e=(null==r?void 0:r.width)??j({availableEditorSize:t,userPreferenceSidebarWidth:l}),i=Math.max(M().hh,t.width-M().UP),a=Math.min(M().vd,i);u={width:{min:M().hh,max:a,value:e,resizeMode:"user"},height:{min:t.height,max:t.height,value:t.height,resizeMode:"none"}},p={fromLeftCss:`calc(100% - ${e}px)`,fromLeftNumeric:t.width-e+o,fromTopCss:"0px",fromTopNumeric:0,fromRightCss:"0px",fromRightNumeric:0,fromBottomCss:`${n}px`,fromBottomNumeric:n},h=e}else if("popup"===i){const e=(null==a?void 0:a.height)??M().wl,i=t.height-M().Ab-M().m8-c-d,r=Math.min(M().wl,i),l=Math.max(r,Math.min(i,e));if(u={width:{min:M().Y_,max:M().Y_,value:M().Y_,resizeMode:"none"},height:{min:r,max:i,value:l,resizeMode:"content"}},s){const e=s.y+c;p={fromLeftCss:`${s.x+o}px`,fromLeftNumeric:s.x,fromTopCss:`${e}px`,fromTopNumeric:e,fromRightCss:`calc(100% - ${s.x+M().Y_+o}px)`,fromRightNumeric:t.width-s.x-M().Y_,fromBottomCss:`calc(100% - ${e+l}px)`,fromBottomNumeric:t.height-e-l}}else{const e=M().Ab+n+d,i=t.height-l-e,r=c+M().m8,a=Math.max(r,i),s=a>i?t.height-a-e:l;p={fromLeftCss:`calc(100% - ${M().Y_+M().jI}px)`,fromLeftNumeric:t.width-M().Y_-M().jI+o,fromTopCss:`${a}px`,fromTopNumeric:a,fromRightCss:`${M().jI}px`,fromRightNumeric:M().jI,fromBottomCss:t.height-a-s+"px",fromBottomNumeric:t.height-a-s}}h=0}else{if("full"===i)return{editorWidthUsed:0,panelSize:{width:{min:0,max:0,value:0,resizeMode:"none"},height:{min:0,max:0,value:0,resizeMode:"none"}},panelRect:{fromLeftCss:"0px",fromLeftNumeric:0,fromTopCss:"0px",fromTopNumeric:0,fromRightCss:"0px",fromRightNumeric:0,fromBottomCss:"0px",fromBottomNumeric:0}};(0,A().HB)(i)}return{panelSize:u,panelRect:p,editorWidthUsed:h}}({availableEditorSize:de,chatSidebarMode:ce,currentPerformanceToolbarHeight:K?w().ls:0,dragSize:pe,naturalPanelContentSize:F,notionSidebarWidth:le,userPreferenceSidebarWidth:H,tempDragPosition:G,mobileBottomPadding:X,safeAreaTopPadding:q})),[de,ce,K,pe,F,le,G,H,X,q]);!function(e){const{chatSidebarMode:t,chatSidebarPreferences:i,availableEditorSize:a,userPreferenceSidebarWidth:o}=e,s=(0,r().v3)(),l=(0,n.useRef)(null),d=(0,n.useRef)(a.width),c=(0,n.useRef)(!1),u=(0,n.useRef)(null),p=(0,h().K8)((()=>{const e=j({availableEditorSize:a,userPreferenceSidebarWidth:o});return a.width-e}),[a,o]);(0,n.useEffect)((()=>{"sidebar"!==t&&"popup"!==t||t!==i.chatSidebarMode||(c.current=!0)}),[t,i.chatSidebarMode]),(0,n.useEffect)((()=>{if("sidebar"!==t&&"popup"!==t)return;const e=p<M().UP?"popup":"sidebar"===i.chatSidebarMode?"sidebar":"popup";d.current!==a.width&&(d.current=a.width,null!==u.current&&u.current!==e&&(c.current=!1),u.current=e),c.current||(t!==e?(l.current=e,(0,k().setChatSidebarMode)({environment:s,chatSidebarMode:e,trackAnalytics:!1,saveUserPreference:!1})):l.current=null),null===u.current&&(u.current=e)}),[t,i.chatSidebarMode,p,a.width,s])}({chatSidebarMode:V,chatSidebarPreferences:$,availableEditorSize:de,userPreferenceSidebarWidth:H});const Se=(0,n.useMemo)((()=>j({availableEditorSize:de,userPreferenceSidebarWidth:H})),[de,H]),ye=o.device.isElectron&&!W,xe=ye||!_,we=(0,a().IS)((e=>({clip:{overflow:"clip",position:"fixed",minWidth:0,pointerEvents:"none",backgroundColor:e.background.primary,borderRadius:"popup"===ce?"20px 20px 24px 24px":0,boxShadow:"popup"===ce?e.shadowMD:"none",transitionProperty:"box-shadow, border-radius",transitionTimingFunction:"ease-in-out, ease-in-out",transitionDuration:`${M().nW}ms, ${M().nW}ms`},dropzoneSidebar:{position:"fixed",zIndex:0,pointerEvents:"none",backgroundColor:e.blue.background.secondaryTranslucent,top:0,insetInlineEnd:0,bottom:0,width:Se},dragArea:{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:0,height:44,zIndex:0,pointerEvents:"auto",cursor:xe?void 0:void 0!==Q?"grabbing":"grab"}})),[ce,Se,xe,Q]);(0,n.useEffect)((()=>{void 0===pe&&"closing"!==O&&void 0!==fe&&R().MU.setState({...R().MU.state,editorWidthUsed:fe})}),[fe,pe,O]);const Ce=(0,n.useRef)(null),ke=(0,n.useCallback)(((e,t)=>{const i=[];return((0,f().A1)()?e<=Se:e>=l.width-Se)&&i.push("sidebar"),i.push("popup"),i}),[l.width,Se]),Me=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.setPointerCapture(e.pointerId),ae([V]);const t=Ce.current;(null==t?void 0:t.getBoundingClientRect())&&J({x:e.clientX,y:e.clientY})}),[V]),ze=(0,n.useCallback)((e=>{if(!Q)return;const t=e.clientX-Q.x,i=e.clientY-Q.y,n=Math.sqrt(t*t+i*i);if(!oe&&n<M().GW)return;if(!oe)if(R().MU.update((e=>({...e,isDragging:!0}))),"sidebar"===V){const t=Math.max(0,(0,f().A1)()?l.width-e.clientX-le-M().Y_/2:Math.min(e.clientX-le-M().Y_/2,l.width-le-M().Y_)),i=0;te({x:t,y:i}),Z({x:t,y:i}),d.current=!1}else if("popup"===V){const e=be.fromLeftNumeric-le,t=be.fromTopNumeric;te({x:e,y:t}),Z({x:e,y:t}),d.current=!1}if(!oe||!ee)return;const r=ke(e.clientX,e.clientY);ae((e=>e.filter((e=>r.includes(e)))));const a=r.find((e=>!re.includes(e)));ne(a);const o=ee.x+((0,f().A1)()?-t:t),s=ee.y+i,c=Math.max(0,Math.min(o,l.width-M().Y_)),u=Math.max(0,Math.min(s,l.height-M().wl));Z({x:c,y:u})}),[V,Q,ke,re,ee,oe,le,be.fromLeftNumeric,be.fromTopNumeric,l.height,l.width]),Ie=(0,n.useCallback)((e=>{if(Q){if(e.currentTarget.releasePointerCapture(e.pointerId),oe){d.current=!0;const t=ke(e.clientX,e.clientY).find((e=>!re.includes(e)));t&&t!==V&&(0,k().setChatSidebarMode)({environment:o,chatSidebarMode:t,trackAnalytics:!0,saveUserPreference:!0})}J(void 0),te(void 0),Z(void 0),ne(void 0),ae([]),R().MU.update((e=>({...e,isDragging:!1})))}}),[Q,oe,ke,V,re,o]),Ae=(0,n.useMemo)((()=>"sidebar"!==ce?null:(0,P.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,bottom:0,zIndex:2},children:(0,P.jsx)(Y,{size:me.width.value,minSize:me.width.min,maxSize:me.width.max,anchorToSide:"right",onSizeWillChange:he,onSizeChanging:ge,onSizeChangeFinished:ve,onDismiss:L,keyboardShortcut:(0,P.jsx)(b().A,{name:"toggleAISidebar"})})})),[ce,me.width.value,me.width.min,me.width.max,he,ge,ve,L]),je=(0,z().N)({chatSidebarMode:ce,chatSidebarVisibility:O}),De=d.current||"opening"===O||"closing"===O;return(0,P.jsx)(v().N,{capture:"open"===O,debugName:"ChatPanel",onEsc:L,onBackButton:L,children:(0,P.jsxs)(P.Fragment,{children:[oe?(0,P.jsx)(c().N,{children:"sidebar"===ie?(0,P.jsx)(u().P.div,{style:we.dropzoneSidebar,variants:M().Kg,initial:"hiddenVariant",animate:"visibleVariant",exit:"hiddenVariant",transition:M().S_},"sidebar-dropzone"):void 0}):void 0,(0,P.jsx)(E,{chatSidebarVisibility:O,editorWidthUsed:fe,animationConfig:M().UZ,shouldAnimate:De}),(0,P.jsxs)(m().A,{style:we.clip,initial:je.initial,animate:{...je.animate,inset:(0,f().A1)()?`${be.fromTopCss} ${be.fromLeftCss} ${be.fromBottomCss} ${be.fromRightCss}`:`${be.fromTopCss} ${be.fromRightCss} ${be.fromBottomCss} ${be.fromLeftCss}`},skip:!De||oe,config:M().UZ,onAnimationEnd:ue,children:[(0,P.jsx)(N,{chatSidebarMode:ce}),(0,P.jsx)("div",{ref:Ce,role:"none",className:ye?s().sbV:void 0,style:we.dragArea,onPointerDown:xe?void 0:Me,onPointerMove:xe?void 0:ze,onPointerUp:xe?void 0:Ie}),(0,P.jsx)("div",{style:{width:me.width.value,height:me.height.value,position:"absolute",zIndex:1,...De?{top:"50%",insetInlineStart:"50%",transform:"translate(calc(var(--direction, 1) * -50%), -50%)"}:{bottom:0,insetInlineEnd:0}},children:(0,P.jsx)(B().u,{chatSidebarRouteData:se,chatSidebarMode:ce,panelSize:me,onDismiss:L,onEsc:L,fromSurface:i})}),Ae]})]})})}var G=()=>i(235564),Z=()=>i(166442),Q=()=>i(829298),J=()=>i(369955),ee=()=>i(890754);function te(e){const{chatSidebarRouteData:t}=e,i=(0,h().K8)((()=>R().MU.state.debugSidebarWidth),[]),r=(0,h().K8)((()=>(null===Z().defaultClientAIChatStore||void 0===Z().defaultClientAIChatStore?void 0:Z().defaultClientAIChatStore.state.showDebug)??!1),[]);(0,n.useEffect)((()=>{R().MU.setState({...R().MU.state,isDebugSidebarOpen:r})}),[r]);const o=(0,J().L)(),s=(0,h().K8)((()=>{if(o&&t)return(0,ee().threadStoreGivenRouteData)({spaceStore:o,chatSidebarRouteData:t})}),[o,t]),l=(0,a().IS)((e=>({debugPanelContent:{position:"relative",height:"100%",width:"100%",background:e.background.primary,pointerEvents:"auto"},content:{position:"absolute",top:0,bottom:0,insetInlineStart:0,insetInlineEnd:0,display:"flex",flexDirection:"column",overflow:"visible"}})),[]),d=(0,n.useCallback)((e=>{R().MU.setState({...R().MU.state,debugSidebarWidth:e})}),[]);return(0,P.jsx)(Q().CollapsiblePanel,{config:t.isOpen&&r?{mode:"resizable",min:M().jp,max:M().pj,defaultSize:i||M().eI,userOverride:void 0,onUserResize:d}:{mode:"closed"},anchorToSide:"right",children:(0,P.jsx)("div",{style:l.debugPanelContent,children:(0,P.jsx)("div",{style:l.content,children:(0,P.jsx)(G().m,{clientStore:Z().defaultClientAIChatStore,threadStore:s})})})})}function ie({routeData:e,visibility:t,mode:i,fromSurface:n="corner"}){const{isMobileBrowser:c}=(0,r().Y0)();(0,d().N)(c,t);const u=(0,a().IS)((()=>({container:{order:o().A.appCursorListener.aiChatSidebar,cursor:"default",zIndex:110,height:"100%",insetInlineEnd:0,flexShrink:0,top:100,display:"flex",flexDirection:"row",justifyContent:"flex-end"}})),[]),p=(0,l().A)(!0);return"closed"===t?null:(0,P.jsxs)("div",{style:u.container,className:s().AF8,...p,children:["sidebar"===i&&e?(0,P.jsx)(te,{chatSidebarRouteData:e}):null,e?(0,P.jsx)(q,{chatSidebarRouteData:e}):null]})}},829298:(e,t,i)=>{i.r(t),i.d(t,{CollapsiblePanel:()=>k,Resizer:()=>z});var n=i(296540),r=()=>i(484714),a=()=>i(819121),o=()=>i(93583),s=()=>i(401497),l=()=>i(699143),d=()=>i(998531),c=()=>i(493552),u=()=>i(591779),p=()=>i(69708),h=()=>i(496603),g=()=>i(534177),v=()=>i(778417),f=()=>i(553965),m=()=>i(906537),b=()=>i(346923),S=()=>i(145214),y=()=>i(603820),x=()=>i(859428),w=i(474848);const C=10;function k(e){const{config:t,anchorToSide:i,children:r,onDismiss:a,onAnimationEnd:o,keyboardShortcut:d,onWidthWillChange:c,onWidthChanged:p,appearance:h}=e,v=(0,b().l)(t),f=(0,u().ZC)(v),[m,y]=(0,n.useState)(void 0),x="resizable"===v.mode,C="resizable"===v.mode?v.min:0,k="resizable"===v.mode?v.max:1/0,[I,A]=(0,n.useState)(0);(0,n.useEffect)((()=>{let e;switch(v.mode){case"closed":e=0;break;case"fill":e=v.availableWidth;break;case"fixed":e=v.width;break;case"resizable":e=m??v.userOverride??v.defaultSize;break;default:(0,g().HB)(v)}const t=Math.max(C,Math.min(k,e));t!==I&&(null==c||c(t,void 0!==m),A(t))}),[v,m,I,c,C,k]);const j=(0,n.useRef)(!1);f!==v&&(j.current=(null==f?void 0:f.mode)!==v.mode);const D="closed"!==v.mode,R=(0,n.useCallback)((()=>{j.current=!1,null==o||o(v),null==p||p(I)}),[v,o,I,p]);(0,n.useEffect)((()=>{y(void 0)}),[v]);const T=(0,n.useCallback)((e=>{x&&(j.current=!1,y(e))}),[x]),P=(0,n.useCallback)((()=>{var e;"resizable"===v.mode&&m&&(null===(e=v.onUserResize)||void 0===e||e.call(v,m),y(void 0),null==p||p(m))}),[v,m,p]),E=(0,s().IS)((e=>({outer:{overflow:"clip",height:"100%",position:"relative",minWidth:0,pointerEvents:"none",flexShrink:0,..."elevated"===h&&D?{boxShadow:e.shadowMD}:{}},borderArea:{position:"absolute",top:0,height:"100%",zIndex:100,display:"flex",insetInlineEnd:"left"===i?0:void 0,insetInlineStart:"right"===i?0:void 0}})),[i,h,D]);let B;"resizable"===v.mode?B=(0,w.jsx)(z,{size:I,minSize:C,maxSize:k,anchorToSide:i,onSizeChanging:T,onSizeChangeFinished:P,onDismiss:a,keyboardShortcut:d}):"fixed"===v.mode&&(B=(0,w.jsx)(M,{}));const W=j.current;return(0,w.jsx)(S().A,{style:E.outer,forceCompositeLayer:!0,config:{duration:400},animate:{width:D?I:0},skip:!W,onAnimationEnd:R,children:(0,w.jsx)("div",{style:{width:I,height:"100%",position:"absolute",..."right"===i?{right:0}:{left:0}},children:(0,w.jsxs)(l().Y1,{direction:"horizontal",height:"fill",width:"fill",children:[r,(0,w.jsx)("div",{style:E.borderArea,children:B})]})})})}function M(){const e=(0,s().IS)((e=>({separator:{width:1,backgroundColor:e.border.secondary}})),[]);return(0,w.jsx)("div",{style:e.separator})}function z(e){const{size:t,anchorToSide:i,minSize:l,maxSize:u,onSizeChanging:g,onSizeChangeFinished:b,onDismiss:S,keyboardShortcut:k}=e,M=(0,p().tz)(),z=(0,r().v3)(),{device:I}=z,[A,j]=(0,n.useState)(!1),[D,R]=(0,n.useState)({x:0,y:0}),[T,P]=(0,a().A)(),E=(0,n.useRef)(null),B=(0,o().A)(T,E),W=(0,n.useRef)(null),N=(0,n.useRef)(!1),_=(0,n.useCallback)((e=>Math.max(l,Math.min(u,e))),[l,u]),L=(0,n.useCallback)((e=>{v().IU({environment:z}),W.current={startX:e.currentX,startSize:t},N.current=!1}),[z,t]),U=(0,n.useCallback)((e=>{if(!W.current)return;m().clear(z),N.current=!0;const{startX:t,startSize:n}=W.current,r=e.currentX-t,a=_("right"===i?n-r:n+r);null==g||g(a)}),[i,z,_,g]),F=(0,n.useCallback)((()=>{!N.current&&S&&S(),W.current=null,null==b||b()}),[S,b]),H=(0,n.useCallback)((()=>{W.current=null}),[]),O=(0,n.useCallback)((()=>{var e;const t=null===(e=E.current)||void 0===e?void 0:e.getBoundingClientRect();t&&R((e=>({x:t.left+t.width/2,y:e.y||t.top+t.height/2})))}),[]),V=(0,n.useCallback)((e=>{var t;j(!0);const i=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect();i&&R({x:i.left+i.width/2,y:e.clientY})}),[]),$=(0,n.useCallback)((()=>{j(!0)}),[]),K=(0,n.useCallback)((()=>{j(!1)}),[]),X=(0,n.useCallback)((()=>{const e=_(t-C);null==g||g(e),null==b||b(),requestAnimationFrame(O)}),[t,_,g,b,O]),Y=(0,n.useCallback)((()=>{const e=_(t+C);null==g||g(e),null==b||b(),requestAnimationFrame(O)}),[t,_,g,b,O]),q=(0,n.useCallback)((()=>{S&&S()}),[S]);(0,n.useEffect)((()=>{requestAnimationFrame(O)}),[P,O]);const G=(t-l)/(u-l),Z=e=>(0,w.jsx)(c().D,{as:"span",colorVariant:"inverseSecondary",children:e}),Q=(0,n.useCallback)((()=>{const e=Boolean(S),t=Boolean(k);return e&&t?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p().sA,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"collapsiblePanelResizer.tooltip.closeWithShortcut",values:{invertedcolor:Z,keyboardShortcut:k}}),(0,w.jsx)("br",{}),(0,w.jsx)(p().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:Z}})]}):e?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p().sA,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"collapsiblePanelResizer.tooltip.closeMessage",values:{invertedcolor:Z}}),(0,w.jsx)("br",{}),(0,w.jsx)(p().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:Z}})]}):(0,w.jsx)(p().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"collapsiblePanelResizer.tooltip.resizeMessage",values:{invertedcolor:Z}})}),[S,k]),J="left"===i?X:Y,ee="right"===i?X:Y,te=(0,s().IS)((e=>({wrapper:{height:"100%",zIndex:1},draggable:{cursor:"col-resize",height:"100%",width:12,position:"absolute",pointerEvents:"auto",..."right"===i?{insetInlineStart:0}:{insetInlineEnd:0},top:0},resizer:{position:"absolute",..."right"===i?{insetInlineStart:0}:{insetInlineEnd:0},top:0,height:"100%",width:A?1:0,backgroundColor:A?e.border.primary:e.border.secondary,pointerEvents:"none"}})),[i,A]);return I.isChromebook?null:(0,w.jsx)(d().N,{capture:P,debugName:"SidebarResizer",onLeft:J,onRight:ee,onUp:h().D_,onDown:h().D_,onTab:h().D_,onUntab:h().D_,onEnter:q,children:(0,w.jsx)(x().A,{renderTooltip:Q,originRect:new DOMRect(D.x,D.y,0,0),placement:"right"===i?"left":"right",originGap:16,delayThreshold:0,render:e=>(0,w.jsxs)("div",{className:"wrapper",style:te.wrapper,...(0,f().A)(e,{onMouseMove:$,onMouseLeave:K,onMouseEnter:V}),children:[(0,w.jsx)("div",{style:te.resizer}),(0,w.jsx)(y().A,{onDraggableDragStart:L,onDraggableDragMove:U,onDraggableDragEnd:F,onDraggableDragCancel:H,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,w.jsx)("div",{className:"separator",ref:B,role:"separator",tabIndex:0,"aria-label":M.formatMessage({id:"sidebarResizer.tooltip.resizeLabel",defaultMessage:"Resize with left and right arrow keys"}),"aria-orientation":"vertical","aria-valuenow":Math.round(100*G),"aria-valuemin":0,"aria-valuemax":100,style:te.draggable,...e})})]})})})}},863330:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>r});i(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.74 2.74 10.52 10.52",svg:(0,i(474848).jsx)("path",{d:"M8 2.74a.66.66 0 0 1 .66.66v3.94h3.94a.66.66 0 0 1 0 1.32H8.66v3.94a.66.66 0 0 1-1.32 0V8.66H3.4a.66.66 0 0 1 0-1.32h3.94V3.4A.66.66 0 0 1 8 2.74"})},r=(0,i(340498).wt)("plusSmall",n)},870054:(e,t,i)=>{i.d(t,{b:()=>a});i(296540);var n=i(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"2.57 0.22 10.86 13.41",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.422.408a.625.625 0 0 0-.884 0l-2 2a.625.625 0 1 0 .884.884l.953-.953V8.8a.625.625 0 1 0 1.25 0V2.379l.913.913a.625.625 0 0 0 .884-.884z"}),(0,n.jsx)("path",{d:"M4.4 3.975A1.825 1.825 0 0 0 2.575 5.8v6c0 1.008.817 1.825 1.825 1.825h7.2a1.825 1.825 0 0 0 1.825-1.825v-6A1.825 1.825 0 0 0 11.6 3.975H9.525v1.25H11.6c.318 0 .575.257.575.575v6a.575.575 0 0 1-.575.575H4.4a.575.575 0 0 1-.575-.575v-6c0-.318.257-.575.575-.575h2.075v-1.25z"})]})},a=(0,i(340498).wt)("squareAndArrowUpSmall",r)},981928:(e,t,i)=>{i.d(t,{X:()=>C,O:()=>w});i(16280);var n=i(296540),r=()=>i(59226),a=()=>i(484714),o=()=>i(401497),s=()=>i(631524),l=()=>i(69708),d=()=>i(901389),c=()=>i(749804),u=()=>i(297872),p=()=>i(623580),h=()=>i(354584),g=()=>i(645873),v=()=>i(591779),f=()=>i(187174);const m={SimpleMonacoWrapper:new(g().O2)("SimpleMonacoWrapper",(async()=>{const[e,t,n]=await Promise.all([i.e(89440).then(i.bind(i,201452)).then((e=>e.default)),i.e(98814).then(i.bind(i,668553)).then((e=>e.loader)),i.e(62989).then(i.bind(i,374353))]);return t.config({monaco:e}),n}))},b=(0,g()._h)(m.SimpleMonacoWrapper,(e=>e.SimpleMonacoWrapper));var S=i(474848);function y(e){const{value:t,onSave:i,disabled:r,language:a="typescript",onFocus:c,onBlur:u,onChange:p,fetchTypescriptImports:h,fillHeight:g}=e,m=(0,n.useRef)(null),[y,x]=n.useState(t),w=(0,v().ZC)(t);n.useEffect((()=>{var e;w===y&&t!==w&&(x(t),null===(e=m.current)||void 0===e||e.setValue(t))}),[y,w,t]);const C=(0,n.useCallback)((()=>{if(y!==t)try{null==i||i(y)}catch(e){console.error(e),e instanceof Error&&d().rG({message:e.message})}}),[i,y,t]),k=(0,n.useCallback)((()=>{var e;x(t),null===(e=m.current)||void 0===e||e.setValue(t)}),[t]),M=(0,n.useCallback)((e=>{x(e??""),null==p||p(e??"")}),[p]),z=(0,n.useCallback)((e=>{m.current=e}),[]),[I,A]=n.useState(void 0);(0,f().Yb)((async()=>{if(h){const e=await h();A(e)}}),[h]);const j=(0,o().IS)((e=>({container:{position:"relative",borderRadius:g?0:8,overflow:"hidden",height:g?"100%":"50vh",display:"flex",flexDirection:"column",minHeight:400},controls:{position:"absolute",top:8,insetInlineEnd:12,display:"flex",gap:8,zIndex:1}})),[g]);return(0,S.jsxs)("div",{style:j.container,children:[t!==y?(0,S.jsxs)("div",{style:j.controls,children:[(0,S.jsx)(s().p,{onClick:k,children:(0,S.jsx)(l().sA,{defaultMessage:"Discard",id:"workflow.monacoCodeBlock.discard"})}),(0,S.jsx)(s().p,{onClick:C,children:(0,S.jsx)(l().sA,{defaultMessage:"Save changes",id:"workflow.monacoCodeBlock.save"})})]}):void 0,(0,S.jsx)(b,{language:a,value:y,disabled:r,onChange:M,onMount:z,onFocus:c,onBlur:u,imports:I})]})}function x(e){const{value:t,onSave:i,disabled:r,onFocus:a,onBlur:c}=e,[u,h]=n.useState(!1),[g,v]=n.useState(void 0),f=(0,o().IS)((e=>({container:{position:"relative",background:e.gray.background.primary,padding:16,borderRadius:12},input:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.text.primary,margin:0,marginBottom:12,fontSize:12},controls:{position:"absolute",top:8,insetInlineEnd:8,display:"flex",gap:8,zIndex:1}})),[]),m=(0,n.useCallback)((e=>{v(e.target.value)}),[]),b=(0,n.useCallback)((()=>{if(void 0!==g)try{null==i||i(g),v(void 0),h(!1)}catch(e){console.error(e),e instanceof Error&&d().rG({message:e.message})}}),[i,g]),y=(0,n.useCallback)((()=>{v(void 0),h(!1)}),[]),x=(0,n.useCallback)((()=>{h(!0),v(t)}),[t]);return r?(0,S.jsx)(w,{...e}):(0,S.jsxs)("div",{style:f.container,children:[(0,S.jsx)("div",{style:f.controls,children:u?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(s().p,{onClick:y,children:(0,S.jsx)(l().sA,{defaultMessage:"Discard",id:"workflow.codeBlock.discard"})}),(0,S.jsx)(s().p,{onClick:b,children:(0,S.jsx)(l().sA,{defaultMessage:"Save",id:"workflow.codeBlock.save"})})]}):(0,S.jsx)(s().p,{onClick:x,children:(0,S.jsx)(l().sA,{defaultMessage:"Edit",id:"workflow.codeBlock.edit"})})}),u?(0,S.jsx)(p().A,{value:void 0!==g?g:t,onChange:m,textarea:!0,style:f.input,autosize:!0,autosizeMinHeight:80,onFocus:a,onBlur:c}):(0,S.jsx)(w,{...e})]})}function w(e){const{value:t,language:i="typescript",styles:r}=e,{value:a}=(0,g().fJ)(h().y),s=(0,o().IS)((e=>({codeDisplay:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",margin:0,fontSize:12,"& code":{fontFamily:"inherit",fontSize:"inherit",padding:0,background:"none"}}})),[]),l=n.useMemo((()=>{if(!a)return t;return a.highlight(t,a.languages[i]||a.languages.javascript,i)}),[a,t,i]);return(0,S.jsx)("div",{style:{...s.codeDisplay,...r},dangerouslySetInnerHTML:{__html:l}})}function C(e){const t=(0,a().v3)(),[i,o]=(0,n.useState)(!1),s=(0,n.useCallback)((()=>{o(!0),(0,c().I)({environment:t})}),[t]),l=(0,n.useCallback)((()=>{o(!1)}),[]),d=((0,r().X)("ai_workflows_monaco_code_editor"),!1);return(0,S.jsx)(u().A,{capture:i,debugName:"SimpleCodeBlock",render:()=>d?(0,S.jsx)(y,{...e,onFocus:s,onBlur:l}):(0,S.jsx)(x,{...e,onFocus:s,onBlur:l})})}}}]);