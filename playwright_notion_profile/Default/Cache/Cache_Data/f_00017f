"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[61858],{5347:(e,t,a)=>{a.d(t,{K:()=>m,L:()=>g});var n=a(296540),s=()=>a(484714),i=()=>a(406094),o=()=>a(69708),r=()=>a(534177),l=()=>a(76590),d=()=>a(370872),c=()=>a(152197),u=()=>a(311670),p=a(474848);function g(e){const{style:t,analyticsType:a,filters:r,disabled:l}=e,d=(0,s().v3)(),[u,g]=(0,n.useState)(!1),h=(0,c().r)(),f=l||u;return(0,p.jsx)(i().A,{size:"lg",style:t,disabled:f,onClick:async function(){h&&(g(!0),await m({environment:d,spaceId:h,analyticsType:a,filters:r}),g(!1))},children:(0,p.jsx)(o().sA,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function m(e){const{environment:t,spaceId:a,organizationId:n,analyticsType:s,filters:i}=e;if(a)switch(s){case u().e.Users:l().TJ(t,{daysFilter:i.daysFilter}),await d().aC(t,{spaceId:a,organizationId:n,daysFilter:i.daysFilter});break;case u().e.Content:l().lP(t,{filters:i}),await d().QF(t,{spaceId:a,organizationId:n,filters:i});break;default:(0,r().HB)(s)}}},17281:(e,t,a)=>{a.d(t,{h:()=>o});var n=()=>a(484714),s=()=>a(187174),i=()=>a(559506);function o(e){const t=(0,n().v3)(),[{value:a}]=(0,s().Yb)((async()=>{const a=await i().callApi({eventName:"getMemberEmailDomains",environment:t,data:{spaceId:e}});if("success"===a.type)return a.data.emailDomains;if("failed"===a.type)throw a.error}),[t,e]);return a}},17297:(e,t,a)=>{a.d(t,{m:()=>de});var n=a(296540),s=(a(581454),()=>a(69708)),i=()=>a(496603),o=()=>a(534177),r=()=>a(263862),l=()=>a(202966),d=()=>a(64939),c=()=>a(624090),u=()=>a(130382),p=()=>a(674741),g=()=>a(165358),m=()=>a(433847),h=()=>a(348564),f=()=>a(179034),v=()=>a(326399),y=()=>a(96689),x=()=>a(854150),b=()=>a(287882),S=()=>a(301608),A=()=>a(939962),j=()=>a(326346),w=a(474848);function _(e){return"workspace"!==e}function C(e){var t,a,n,s,i,o,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(n=e.capabilities)||void 0===n?void 0:n.insert_content,read_comment:null===(s=e.capabilities)||void 0===s?void 0:s.read_comment,insert_comment:null===(i=e.capabilities)||void 0===i?void 0:i.insert_comment,user_capabilities:null!==(o=e.capabilities)&&void 0!==o&&o.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const M=(0,s().YK)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),T=(0,s().YK)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function k(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,w.jsx)(s().sA,{...T.equallyRestrictive}):!e&&t?(0,w.jsx)(s().sA,{...T.moreRestrictive}):e&&!t?(0,w.jsx)(s().sA,{...T.lessRestrictive}):void 0}function I(e){return e.name?`“${e.name}“ group`:(0,w.jsx)(s().sA,{...l().D.group})}function D(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,w.jsx)(s().sA,{defaultMessage:"from “{oldTeamName}” to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,w.jsx)(s().sA,{defaultMessage:"from some teamspace name to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,w.jsx)(s().sA,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:(0,d().if)(e)}})}function N(e){if(e)switch(e){case"owner":return(0,w.jsx)(s().sA,{...l().D.team_owner});case"member":return(0,w.jsx)(s().sA,{...l().D.team_member});case"team_level_guest":return(0,w.jsx)(s().sA,{...l().D.team_level_guest})}return(0,w.jsx)(s().sA,{...l().D.team_member})}function P(e){var t,a;return{oldRole:(0,w.jsx)(s().sA,{...E(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,w.jsx)(s().sA,{...E(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function E(e){if(!e)return m().Sf.noAccessLabel;switch(e){case"editor":return m().Sf.workspaceOwnerLabel;case"membership_admin":return m().Sf.membershipAdminLabel;case"read_and_write":return m().Sf.memberLabel;default:return m().Sf.noAccessLabel}}function B(e){var t;const a=null===(t=e.target)||void 0===t||null===(t=t.page)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.parent;if(a){var n;if(a.table===f().ev&&null!==(n=a.meta)&&void 0!==n&&null!==(n=n.collection)&&void 0!==n&&n.title)return`“${a.meta.collection.title}“`;if("title"in a)return`“${a.title}“`}return(0,w.jsx)(s().sA,{...A().Qk.anUntitledPage})}function R(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,w.jsx)(s().sA,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function V(e){switch(e){case"google":return(0,w.jsx)(s().sA,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,w.jsx)(s().sA,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,w.jsx)(s().sA,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,w.jsx)(s().sA,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,w.jsx)(s().sA,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,w.jsx)(s().sA,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,w.jsx)(s().sA,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,w.jsx)(s().sA,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,o().HB)(e)}}function L(e){return e.changes.name.oldValue?(0,w.jsx)(s().sA,{defaultMessage:"from “{oldDomain}”",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function F(e,t){return"block"===e.table?(0,w.jsx)(s().sA,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:(0,d().nZ)(t),parentPage:O(e)}}):"team"===e.table?(0,d().nZ)(t):void 0}function O(e){return"title"in e?`“${e.title}“`:(0,w.jsx)(s().sA,{...A().Qk.anUntitledPage})}function z(e,t){if(!t)return(0,w.jsx)(s().sA,{...A().Qk.anUntitledPage});const a=t.table;return"space"===a?t.id!==e?(0,w.jsx)(s().sA,{...l().D.otherWorkspace}):_(t.permissionLevel)?(0,w.jsx)(s().sA,{...l().D.private}):(0,w.jsx)(s().sA,{...l().D.thisWorkspace}):"team"===a?(0,d().nZ)(t):"block"===a?null!==(n=t.meta)&&void 0!==n&&null!==(n=n.collection)&&void 0!==n&&n.title?`“${t.meta.collection.title}“`:t.title?`“${t.title}“`:(0,w.jsx)(s().sA,{...A().Qk.anUntitledPage}):void 0;var n}const U=(0,s().YK)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function W(e){return e?(0,w.jsx)(s().sA,{...U[e]}):(0,w.jsx)(s().sA,{...U.unknown})}function H(e){return e.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function K(e){return e.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function q(e){return"approved"===e.changes.requestStatus.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,w.jsx)(s().sA,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function G(e){return e.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Y(e){return e.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const Q=(0,s().YK)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function $(e){var t,a,n,m,T,E,O,U,$,Z,X,ee,te,ae,ne,se,ie,oe,re,le,de,ce,ue,pe,ge,me,he,fe,ve,ye,xe,be,Se,Ae,je,we,_e,Ce,Me,Te,ke,Ie,De,Ne,Pe;const{auditLogEntry:Ee,env:Be,intl:Re}=e;if((0,r().nS)(Ee))return(0,r().ZD)({...e,auditLogEntry:Ee});switch(Ee.actionName){case"page.properties_edited":{const vt=Ee.meta.propertiesUpdated,yt=Ee.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===vt.length?(0,w.jsx)(s().sA,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:yt,pageName:(0,A().wS)(Ee)}}):(0,w.jsx)(s().sA,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:yt,pageName:(0,A().wS)(Ee)}})}case"page.suggestion.comment.updated":return(0,w.jsx)(s().sA,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,A().wS)(Ee)}});case"page.discussion.comment.updated":return(0,w.jsx)(s().sA,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,A().wS)(Ee)}});case"page_edited":return(0,w.jsx)(s().sA,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,A().wS)(Ee)}});case"page_deleted":return Ee.target.page.meta.permanentDeletion?(0,w.jsx)(s().sA,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,A().wS)(Ee)}}):(0,w.jsx)(s().sA,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,A().wS)(Ee)}});case"page.purged":return(0,w.jsx)(s().sA,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,A().wS)(Ee)}});case"page_restored":return(0,w.jsx)(s().sA,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,A().wS)(Ee),withAdminPerms:(0,d().th)(Ee)}});case"page_exported":return(0,w.jsx)(s().sA,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,A().wS)(Ee)}});case"page_moved":{var Ve,Le,Fe;const xt=null===(Ve=Ee.changes)||void 0===Ve?void 0:Ve.team,bt=Ee.changes.parent.oldValue,St=Ee.changes.parent.newValue;let At=z(Ee.spaceId,Ee.changes.parent.oldValue),jt=z(Ee.spaceId,Ee.changes.parent.newValue);null!=xt&&xt.oldValue&&null!=xt&&xt.newValue&&bt&&St&&("block"===bt.table||"block"===St.table)?(At=F(bt,null==xt?void 0:xt.oldValue),jt=F(St,null==xt?void 0:xt.newValue)):"space"===(null===(Le=Ee.changes.parent.oldValue)||void 0===Le?void 0:Le.table)&&"space"===(null===(Fe=Ee.changes.parent.newValue)||void 0===Fe?void 0:Fe.table)&&Ee.changes.parent.oldValue.id===Ee.changes.parent.newValue.id&&(_(Ee.changes.parent.oldValue.permissionLevel)||_(Ee.changes.parent.newValue.permissionLevel))&&(At=_(Ee.changes.parent.oldValue.permissionLevel)?(0,w.jsx)(s().sA,{...l().D.private}):(0,w.jsx)(s().sA,{...l().D.workspaceLevel}),jt=_(Ee.changes.parent.newValue.permissionLevel)?(0,w.jsx)(s().sA,{...l().D.private}):(0,w.jsx)(s().sA,{...l().D.workspaceLevel}));const wt=At?Re.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:At}):"",_t=jt?Re.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:jt}):"";return(0,w.jsx)(s().sA,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,A().wS)(Ee),oldParentMessage:wt,newParentMessage:_t,inSudoMode:(0,A().AJ)(Ee)}})}case"page_permission_updated":return function(e,t){var a,n,i;const o="bot"in t.target,r="space"in t.target,l="team"in t.target,c="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var p,g;if(o)return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,d().xC)(e,t),oldRole:(0,A().H8)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,A().H8)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:(0,A().wS)(t),inSudoMode:(0,A().AJ)(t)}});var m,h,f,v,y,x;if(r)return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,A().H8)(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.oldValue),newRole:(0,A().H8)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,A().wS)(t),inSudoMode:(0,A().AJ)(t)}});if(l)return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,A().H8)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,A().H8)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.newValue),pageName:(0,A().wS)(t),teamName:(0,d().if)(t),inSudoMode:(0,A().AJ)(t)}});if(u)return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,d().xC)(e,t),oldRole:(0,A().H8)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:(0,A().H8)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,A().wS)(t),inSudoMode:(0,A().AJ)(t)}});if(c){var b,S;return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,d().xC)(e,t),oldRole:(0,A().H8)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:(0,A().H8)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,A().wS)(t),inSudoMode:(0,A().AJ)(t)}})}return(0,w.jsx)(s().sA,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,d().xC)(e,t),oldRole:(0,A().H8)(null===(n=t.changes)||void 0===n||null===(n=n.permission)||void 0===n?void 0:n.oldValue),newRole:(0,A().H8)(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:(0,A().wS)(t),inSudoMode:(0,A().AJ)(t)}})}(Re,Ee);case"page_created":const Ke=(0,h().fS)(Ee);if(null!=Ke&&null!==(t=Ke.meta)&&void 0!==t&&t.parent){var Oe,ze,Ue,We;if(Ke.meta.parent.table===y().NX)return"private"===(null===(Ue=Ke.meta)||void 0===Ue?void 0:Ue.permissionLevel)||"private"===(null===(We=Ke.meta)||void 0===We?void 0:We.pageAudience)?(0,w.jsx)(s().sA,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,w.jsx)(s().sA,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Oe=Ke.meta)||void 0===Oe?void 0:Oe.parent.table)===x().yK)return(0,w.jsx)(s().sA,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:(0,d().nZ)(Ke.meta.parent)}});if((null===(ze=Ke.meta)||void 0===ze?void 0:ze.parent.table)===f().ev)return(0,w.jsx)(s().sA,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:B(Ee)}})}return(0,w.jsx)(s().sA,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,w.jsx)(s().sA,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,A().wS)(e),inSudoMode:(0,A().AJ)(e)}});return(0,w.jsx)(s().sA,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,A().wS)(e),inSudoMode:(0,A().AJ)(e),newRole:(0,A().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ee);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,w.jsx)(s().sA,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,A().wS)(e),inSudoMode:(0,A().AJ)(e)}});return(0,w.jsx)(s().sA,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,A().wS)(e),inSudoMode:(0,A().AJ)(e),newRole:(0,A().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ee);case"login":return function(e,t){var a,n,i;const o=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(n=e.actor.meta)&&void 0!==n&&n.countryCode&&o?(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:R(e),geolocation:(0,j().BN)(e,t),loginMethod:V(o)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!o?(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:R(e),geolocation:(0,j().BN)(e,t)}}):o?(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:R(e),loginMethod:V(o)}}):(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:R(e)}})}(Ee,Re);case"allowed_support_access":return(0,w.jsx)(s().sA,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Re.formatDate(Ee.changes.expiresAt),name:Ee.target.user.name}});case"revoked_support_access":return(0,w.jsx)(s().sA,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Ee.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const n=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,o=e.changes.name.newValue;if(n){if(i&&o)return(0,w.jsx)(s().sA,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:i,newValue:o}});if(!i&&o)return(0,w.jsx)(s().sA,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,d().xC)(t,e),newValue:o}});if(i&&!o)return(0,w.jsx)(s().sA,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:i}})}if(i&&o)return(0,w.jsx)(s().sA,{defaultMessage:"Changed name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:o}});if(!i&&o)return(0,w.jsx)(s().sA,{defaultMessage:"Set name to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:o}});if(i&&!o)return(0,w.jsx)(s().sA,{defaultMessage:"Removed name “{oldValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,w.jsx)(s().sA,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Ee,Re);case"email_changed":return function(e,t){var a;const n=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return n?(0,w.jsx)(s().sA,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Ee,Re);case"picture_changed":return function(e,t){var a;const n=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return n?(0,w.jsx)(s().sA,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,d().xC)(t,e)}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Ee,Re);case"member_invited":{const Ct=P(Ee);return(0,w.jsx)(s().sA,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),newRole:Ct.newRole}})}case"member_role_updated":{const Mt=P(Ee);return(0,w.jsx)(s().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),oldRole:Mt.oldRole,newRole:Mt.newRole}})}case"member_removed":return Ee.actor.actorId===Ee.target.user.id?(0,w.jsx)(s().sA,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,w.jsx)(s().sA,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,d().xC)(Re,Ee)}});case"guest_removed":return(0,w.jsx)(s().sA,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,d().xC)(Re,Ee)}});case"file_downloaded":return function(e){return(0,w.jsx)(s().sA,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:J(e),pageName:(0,A().wS)(e)}})}(Ee);case"invite_link_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,w.jsx)(s().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,r().ez)((0,d().sp)(Ee,Re));case"workspace_name_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed workspace name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}});case"workspace_domain_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:L(Ee),newValue:Ee.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:n}=e.changes.integration_restrictions;if(n===t)return(0,w.jsx)(s().sA,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===n)return(0,w.jsx)(s().sA,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===n)return(0,w.jsx)(s().sA,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===n)return(0,w.jsx)(s().sA,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,w.jsx)(s().sA,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Ee);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,w.jsx)(s().sA,{defaultMessage:"Disabled using ‘Send webhook’ action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,w.jsx)(s().sA,{defaultMessage:"Enabled using ‘Send webhook’ action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Ee);case"allowed_email_domain_added":return(0,w.jsx)(s().sA,{defaultMessage:"Added “{addedValue}” into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Ee.changes.domain}});case"allowed_email_domain_removed":return(0,w.jsx)(s().sA,{defaultMessage:"Removed “{removedValue}” from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Ee.changes.domain}});case"public_page_set":return Ee.changes.name.oldValue?(0,w.jsx)(s().sA,{defaultMessage:"Changed public home page from “{oldPage}” to “{newPage}”",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Ee.changes.name.oldValue,newPage:Ee.changes.name.newValue}}):(0,w.jsx)(s().sA,{defaultMessage:"Set “{newPage}” as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Ee.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Ee.changes.url.oldValue?(0,w.jsx)(s().sA,{defaultMessage:"Changed IDP metadata URL from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Ee.changes.url.oldValue,newValue:Ee.changes.url.newValue}}):(0,w.jsx)(s().sA,{defaultMessage:"Set IDP metadata URL to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Ee.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{...l().D.saml_enabled}):(0,w.jsx)(s().sA,{...l().D.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{...l().D.saml_enforced}):(0,w.jsx)(s().sA,{...l().D.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{...l().D.automatic_account_creation_enabled}):(0,w.jsx)(s().sA,{...l().D.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{...l().D.workspace_analytics_enabled}):(0,w.jsx)(s().sA,{...l().D.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:n}=e.changes.workspace_creation;if(!a&&!n)return(0,w.jsx)(s().sA,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,v().XB)(e.changes.workspace_creation.oldValue,t)}):"",o=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,v().XB)(e.changes.workspace_creation.newValue,t)}):"";return(0,w.jsx)(s().sA,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:o}})}(Ee,Re);case"member_added_to_group":return(0,w.jsx)(s().sA,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),groupName:I(Ee.target.group)}});case"member_removed_from_group":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),groupName:I(Ee.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:n}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!n)return(0,w.jsx)(s().sA,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!n)return(0,w.jsx)(s().sA,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,w.jsx)(s().sA,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:n}})}(Ee,Re);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,n=(0,w.jsx)(s().sA,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return n;if(!a&&"completed"!==t)return(0,w.jsx)(s().sA,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,w.jsx)(s().sA,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,w.jsx)(s().sA,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return n}(Ee);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,n=(0,w.jsx)(s().sA,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return n;if(!a||"canceled"===a)return(0,w.jsx)(s().sA,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,w.jsx)(s().sA,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Ee);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,n=(0,w.jsx)(s().sA,{defaultMessage:"Status changed for organization’s workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return n;if(!a&&"completed"!==t)return(0,w.jsx)(s().sA,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,w.jsx)(s().sA,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,w.jsx)(s().sA,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return n}(Ee);case"membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:H(Ee)}});case"external_membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:K(Ee)}});case"membership_request_resolved":return(0,w.jsx)(s().sA,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:q(Ee),email:(0,d().xC)(Re,Ee)}});case"guest_membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:G(Ee)}});case"team_created":return(0,w.jsx)(s().sA,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:(0,d().if)(Ee)}});case"team_archived":return(0,w.jsx)(s().sA,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:(0,d().if)(Ee)}});case"team_default_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:(0,d().if)(Ee)}}):(0,w.jsx)(s().sA,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:(0,d().if)(Ee)}});case"team_public_page_sharing_toggled":return Ee.changes.enabled.newValue?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(a=Ee.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Ee?void 0:Ee.spacePublicPageSharingDisabled),Ee.changes.enabled.newValue)]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(n=Ee.meta)||void 0===n?void 0:n.spacePublicPageSharingDisabled)??(null==Ee?void 0:Ee.spacePublicPageSharingDisabled),Ee.changes.enabled.newValue)]});case"team_export_toggled":return Ee.changes.enabled.newValue?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(m=Ee.meta)||void 0===m?void 0:m.spaceExportDisabled)??(null==Ee?void 0:Ee.spaceExportDisabled),Ee.changes.enabled.newValue)]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(T=Ee.meta)||void 0===T?void 0:T.spaceExportDisabled)??(null==Ee?void 0:Ee.spaceExportDisabled),Ee.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:(0,d().if)(Ee)}}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:(0,d().if)(Ee)}});case"team_creation_admins_setting_toggled":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:(0,d().if)(Ee)}}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:(0,d().if)(Ee)}});case"team_guests_toggled":return Ee.changes.enabled.newValue?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(E=Ee.meta)||void 0===E?void 0:E.spaceDisableGuests)??Ee.spaceDisableGuests,Ee.changes.enabled.newValue)]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s().sA,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:(0,d().if)(Ee)}}),k((null===(O=Ee.meta)||void 0===O?void 0:O.spaceDisableGuests)??Ee.spaceDisableGuests,Ee.changes.enabled.newValue)]});case"team_name_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:D(Ee)}});case"team_description_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:(0,d().if)(Ee)}});case"team_icon_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:(0,d().if)(Ee)}});case"member_added_to_team":return(0,w.jsx)(s().sA,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),teamName:(0,d().if)(Ee),teamRole:N(Ee.changes.teamRole.newValue)}});case"group_added_to_team":return(0,w.jsx)(s().sA,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:I(Ee.target.group),teamName:(0,d().if)(Ee)}});case"member_removed_from_team":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,d().xC)(Re,Ee),teamName:(0,d().if)(Ee)}});case"group_removed_from_team":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:I(Ee.target.group),teamName:(0,d().if)(Ee)}});case"member_joined_team":const qe=(0,d().if)(Ee),Ge=N(Ee.changes.teamRole.newValue);return(0,A().AJ)(Ee)?(0,w.jsx)(s().sA,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:qe,teamRole:Ge}}):(0,w.jsx)(s().sA,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:qe,teamRole:Ge}});case"member_left_team":return(0,w.jsx)(s().sA,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:(0,d().if)(Ee)}});case"member_team_role_updated":const Ye=(0,d().xC)(Re,Ee),Qe=N(Ee.changes.teamRole.oldValue),$e=N(Ee.changes.teamRole.newValue),Je=(0,d().if)(Ee);return(0,A().AJ)(Ee)?(0,w.jsx)(s().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Je}}):(0,w.jsx)(s().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Je}});case"team_user_permission_updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,d().xC)(Re,Ee),oldPermission:(0,A().H8)(Ee.changes.permission.oldValue),newPermission:(0,A().H8)(Ee.changes.permission.newValue),teamName:(0,d().if)(Ee)}});case"team_group_permission_updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:I(Ee.target.group),oldPermission:(0,A().H8)(Ee.changes.permission.oldValue),newPermission:(0,A().H8)(Ee.changes.permission.newValue),teamName:(0,d().if)(Ee)}});case"team_member_default_permission_updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:(0,d().if)(Ee),oldRole:(0,A().H8)(null===(U=Ee.changes)||void 0===U||null===(U=U.permission)||void 0===U?void 0:U.oldValue),newRole:(0,A().H8)(null===($=Ee.changes)||void 0===$||null===($=$.permission)||void 0===$?void 0:$.newValue)}});case"team_guest_default_permission_updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:(0,d().if)(Ee),oldRole:(0,A().H8)(null===(Z=Ee.changes)||void 0===Z||null===(Z=Z.permission)||void 0===Z?void 0:Z.oldValue),newRole:(0,A().H8)(null===(X=Ee.changes)||void 0===X||null===(X=X.permission)||void 0===X?void 0:X.newValue)}});case"team_workspace_default_permission_updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:(0,d().if)(Ee),oldRole:(0,A().H8)(null===(ee=Ee.changes)||void 0===ee||null===(ee=ee.permission)||void 0===ee?void 0:ee.oldValue),newRole:(0,A().H8)(null===(te=Ee.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.newValue)}});case"team_privacy_type_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:(0,d().if)(Ee),oldType:W(null===(ae=Ee.changes)||void 0===ae?void 0:ae.teamAccessLevel.oldValue),newType:W(null===(ne=Ee.changes)||void 0===ne?void 0:ne.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,w.jsx)(s().sA,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:(0,d().if)(Ee),newType:(He=null===(se=Ee.changes)||void 0===se||null===(se=se.teamInviteAccess)||void 0===se?void 0:se.newValue,He?(0,w.jsx)(s().sA,{...Q[He]}):(0,w.jsx)(s().sA,{...Q.unknown}))}});case"teams_enabled_for_space":return(0,w.jsx)(s().sA,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Ee.target.space.name}});case"private_content_transferred":return(0,w.jsx)(s().sA,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,d().q4)(Re,Ee.changes.userPermission.oldValue),toUserName:(0,d().q4)(Re,Ee.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Re.formatMessage(S().jy[(null===(ie=Ee.meta)||void 0===ie?void 0:ie.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Re.formatMessage(S().jy[(null===(oe=Ee.meta)||void 0===oe?void 0:oe.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Ze(e){return e.join(Re.formatMessage(l().D.adminContentSearchPredicateSplit))}function Xe(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const et=Ee.searchParameters.query&&Re.formatMessage(l().D.adminContentSearchQuery,{query:Ee.searchParameters.query}),tt=Ee.searchParameters.teamspaces&&Ee.searchParameters.teamspaces.length>0&&Re.formatMessage(l().D.adminContentSearchTeamspaces,{teamspaceCount:Ee.searchParameters.teamspaces.length,teamspaces:Ze(Ee.searchParameters.teamspaces)}),at=Ee.searchParameters.createdBy&&Ee.searchParameters.createdBy.length>0&&Re.formatMessage(l().D.adminContentSearchCreatedBy,{createdBy:Ze(Ee.searchParameters.createdBy)}),nt=Ee.searchParameters.sharedWith&&Ee.searchParameters.sharedWith.length>0&&Re.formatMessage(l().D.adminContentSearchSharedWith,{sharedWith:Ze(Ee.searchParameters.sharedWith)}),st=Ee.searchParameters.audience&&Ee.searchParameters.audience.length>0&&Re.formatMessage(l().D.adminContentSearchAudience,{audience:Ze(Ee.searchParameters.audience)}),it=Ee.searchParameters.createdTime&&Re.formatMessage(l().D.adminContentSearchCreatedTime,{createdTime:Xe(Ee.searchParameters.createdTime)}),ot=Ee.searchParameters.lastEditedTime&&Re.formatMessage(l().D.adminContentSearchLastEditedTime,{lastEditedTime:Xe(Ee.searchParameters.lastEditedTime)}),rt=Ee.searchParameters.deletionStatuses&&Ee.searchParameters.deletionStatuses.length>0&&Re.formatMessage(l().D.adminContentSearchDeletionStatus,{deletionStatuses:Ze(Ee.searchParameters.deletionStatuses.map((e=>Re.formatMessage((0,p().uT)(e))))),deletionStatusesCount:Ee.searchParameters.deletionStatuses.length}),lt=i().oE([et,tt,at,nt,st,it,ot,rt]);if("admin_content_search_queried"===Ee.actionName){if(0===lt.length)return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const Tt=Ze(lt);return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:Tt}})}}if(0===lt.length)return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const kt=Ze(lt);return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:kt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const It=Re.formatList(Ee.meta.emailDomains,{type:"conjunction"});return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:It}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,w.jsx)(s().sA,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,d().xC)(Re,Ee)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,w.jsx)(s().sA,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,d().xC)(Re,Ee)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const Dt=Re.formatList(Ee.meta.emailDomains,{type:"conjunction"});return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:Dt}})}case"automation_edited":return(0,w.jsx)(s().sA,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,d().KE)(Ee.meta.automationType),pageTitle:(0,A().wS)(Ee)}});case"ai_admin_legal_acceptance_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Y(Ee)}});case"workspace.settings.hipaa_compliance_updated":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const dt=Ee.spaceId===Ee.meta.spaceConsolidationMetadata.source_space_id,ct=Ee.meta.spaceConsolidationMetadata.source_space_name??Ee.meta.spaceConsolidationMetadata.source_space_id,ut=Ee.meta.spaceConsolidationMetadata.target_space_name??Ee.meta.spaceConsolidationMetadata.target_space_id,pt=Ee.changes.spaceContentDuplicationStatus.newValue;return(0,w.jsx)(s().sA,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:pt?(0,w.jsx)(s().sA,{...M[pt]}):"",spaceName:dt?ut:ct,direction:(0,w.jsx)(s().sA,{...dt?l().D.into:l().D.from})}});case"mfa_sms_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} SMS MFA on “{value}”",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(re=Ee.changes)&&void 0!==re&&re.maskedPhoneNumber.oldValue?null===(le=Ee.changes)||void 0===le?void 0:le.maskedPhoneNumber.oldValue:null===(de=Ee.changes)||void 0===de?void 0:de.maskedPhoneNumber.newValue,enabled:null!==(ce=Ee.changes)&&void 0!==ce&&ce.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ue=Ee.changes)&&void 0!==ue&&ue.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(pe=Ee.changes)&&void 0!==pe&&pe.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,w.jsx)(s().sA,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,d().xC)(Re,Ee)}});case"user_unsuspended":return(0,w.jsx)(s().sA,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,d().xC)(Re,Ee)}});case"user_deleted":return Ee.target?(0,w.jsx)(s().sA,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,d().q4)(Re,Ee.target.user)}}):(0,w.jsx)(s().sA,{...l().D.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled managed user members’ ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled managed user members’ ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled managed user members’ ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled managed user members’ ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Ee.changes.enabled.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Disabled managed user members’ ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,w.jsx)(s().sA,{defaultMessage:"Enabled managed user members’ ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Ee.changes.valueS.oldValue||void 0!==Ee.changes.valueS.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,b().rN)(Ee.changes.valueS.oldValue??c().I4,Re),newDuration:(0,b().rN)(Ee.changes.valueS.newValue??c().I4,Re)}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Ee.changes.valueS.oldValue||void 0!==Ee.changes.valueS.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,b().rN)(Ee.changes.valueS.oldValue??c().qI,Re),newDuration:(0,b().rN)(Ee.changes.valueS.newValue??c().qI,Re)}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Ee.changes.valueMs.oldValue&&void 0!==Ee.changes.valueMs.newValue?(0,w.jsx)(s().sA,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,u().lH)(Ee.changes.valueMs.oldValue,Re),newDuration:(0,u().lH)(Ee.changes.valueMs.newValue,Re)}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,w.jsx)(s().sA,{defaultMessage:"Public domain “{name}” created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Ee.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(ge=Ee.changes.name)||void 0===ge?void 0:ge.oldValue)&&void 0!==(null===(me=Ee.changes.name)||void 0===me?void 0:me.newValue)?(0,w.jsx)(s().sA,{defaultMessage:"Changed public domain name from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}}):void 0===(null===(he=Ee.changes.publicHomePage)||void 0===he?void 0:he.oldValue)&&void 0!==(null===(fe=Ee.changes.publicHomePage)||void 0===fe?void 0:fe.newValue)?(0,w.jsx)(s().sA,{defaultMessage:"Changed public domain add home page “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Ee.changes.publicHomePage.newValue}}):void 0!==(null===(ve=Ee.changes.publicHomePage)||void 0===ve?void 0:ve.oldValue)&&void 0!==(null===(ye=Ee.changes.publicHomePage)||void 0===ye?void 0:ye.newValue)?(0,w.jsx)(s().sA,{defaultMessage:"Changed public domain home page from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Ee.changes.publicHomePage.oldValue,newValue:Ee.changes.publicHomePage.newValue}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,w.jsx)(s().sA,{defaultMessage:"Public domain “{name}” deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Ee.target.publicDomain.domainName}});case"workspace.custom_emoji.updated":const gt=null===(xe=Ee.changes.name)||void 0===xe?void 0:xe.oldValue,mt=null===(be=Ee.changes.name)||void 0===be?void 0:be.newValue,ht=null===(Se=Ee.changes.url)||void 0===Se?void 0:Se.oldValue,ft=null===(Ae=Ee.changes.url)||void 0===Ae?void 0:Ae.newValue;return void 0!==gt&&void 0!==mt&&void 0!==ht&&void 0!==ft?(0,w.jsx)(s().sA,{defaultMessage:"Changed image and name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:gt,newName:mt}}):void 0!==gt&&void 0!==mt?(0,w.jsx)(s().sA,{defaultMessage:"Changed name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:gt,newName:mt}}):void 0!==ht&&void 0!==ft?(0,w.jsx)(s().sA,{defaultMessage:"Changed image of custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Ee.target.customEmoji.name}}):(0,w.jsx)(s().sA,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,w.jsx)(s().sA,{defaultMessage:"Deleted custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Ee.target.customEmoji.name}});case"integration.created":return(0,w.jsx)(s().sA,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,d().Hg)(Re,Ee.meta.bot)}});case"integration.deleted":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,d().Hg)(Re,Ee.meta.bot)}});case"page.automation_deleted":return(0,w.jsx)(s().sA,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,d().KE)(Ee.meta.automationType),pageTitle:(0,A().wS)(Ee)}});case"page.file_deleted":return(0,w.jsx)(s().sA,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:J(Ee),pageTitle:(0,A().wS)(Ee)}});case"integration.secret_reset":return(0,w.jsx)(s().sA,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,d().Hg)(Re,Ee.meta.bot)}});case"integration.settings.updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,d().Hg)(Re,Ee.meta.bot)}});case"integration.permission.updated":return(0,w.jsx)(s().sA,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,d().Hg)(Re,Ee.meta.bot),botCapabilities:C(Ee.meta.bot)}});case"workspace.external_account_connected":return(0,w.jsx)(s().sA,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"workspace.external_account_disconnected":return(0,w.jsx)(s().sA,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_added":return(0,w.jsx)(s().sA,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_removed":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,w.jsx)(s().sA,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,w.jsx)(s().sA,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,d().Hg)(Re,Ee.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,w.jsx)(s().sA,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:(0,d().ko)(Re,Boolean(null===(je=Ee.changes)||void 0===je||null===(je=je.enabled)||void 0===je?void 0:je.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,w.jsx)(s().sA,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ee,Re);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,w.jsx)(s().sA,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ee,Re);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}’s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,d().q4)(t,e.target.user),guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,A().uU)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,w.jsx)(s().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,A().uU)(e.meta.pagesAndRoles[0].page)}}):(0,w.jsx)(w.Fragment,{})}(Ee,Re);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,w.jsx)(s().sA,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,w.jsx)(s().sA,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Ee);case"workspace_exported":case"public_page_cleared":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,w.jsx)(s().sA,{...l().D[Ee.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,w.jsx)(s().sA,{...l().D.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,w.jsx)(s().sA,{...l().D.idp_metadata_xml_updated});case"organization.owner.added":return(0,w.jsx)(s().sA,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,d().xC)(Re,Ee)}});case"organization.owner.removed":return(0,w.jsx)(s().sA,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,d().xC)(Re,Ee)}});case"organization.audit_log_exported":return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Ee.meta.duration}});case"organization.settings.name_changed":return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}” to “{newValue}”",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}});case"organization.workspace.removed":return(0,w.jsx)(s().sA,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}” from the organization",values:{workspaceName:Ee.target.space.name}});case"organization.email_domain.verified":return(0,w.jsx)(s().sA,{defaultMessage:"Added a verified email domain “{emailDomain}” to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Ee.changes.domain}});case"organization.email_domain.unverified":return(0,w.jsx)(s().sA,{defaultMessage:"Removed a verified email domain “{emailDomain}” from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Ee.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(we=Ee.changes)||void 0===we||null===(we=we.enabled)||void 0===we?void 0:we.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(_e=Ee.changes)||void 0===_e||null===(_e=_e.enabled)||void 0===_e?void 0:_e.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Ce=Ee.changes)||void 0===Ce||null===(Ce=Ce.enabled)||void 0===Ce?void 0:Ce.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Me=Ee.changes)||void 0===Me||null===(Me=Me.enabled)||void 0===Me?void 0:Me.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Te=Ee.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(ke=Ee.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Ie=Ee.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(De=Ee.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Ne=Ee.changes)||void 0===Ne||null===(Ne=Ne.enabled)||void 0===Ne?void 0:Ne.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,w.jsx)(s().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Re,value:null===(Pe=Ee.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,w.jsx)(s().sA,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,w.jsx)(s().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,w.jsx)(s().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,w.jsx)(s().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,o().HB)(a)}}(Ee);case"form_response.created":return(0,w.jsx)(s().sA,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,A().$T)(Ee)}});case"form.created":return(0,w.jsx)(s().sA,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,w.jsx)(s().sA,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,A().$T)(Ee)}});case"page.viewed.by_shared_email_domain_user":return(0,w.jsx)(s().sA,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,A().wS)(Ee)}});default:if("local"!==Be)return g().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Ee}}}),(0,w.jsx)(w.Fragment,{});(0,o().HB)(Ee)}var He}function J(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,w.jsx)(s().sA,{...l().D.a_file_with_extension,values:{extension:a}}):(0,w.jsx)(s().sA,{...l().D.a_file})}var Z=()=>a(284371),X=()=>a(859428),ee=()=>a(56366),te=()=>a(401497),ae=()=>a(97294),ne=()=>a(584262),se=()=>a(492414),ie=()=>a(765957),oe=()=>a(148832),re=()=>a(878710);function le(e){const{pageAuditLogEntry:t}=e,{table:a,id:n,meta:s}=t.target.page||{},i=(0,te().IS)((e=>({link:{display:"inline",color:e.text.secondary,textDecoration:"underline"}})),[]),o=(0,ee().K8)((()=>{const{sidebarSpaceStore:e}=ie().default.state;return null!=s&&s.parent&&e?(0,re().v3)(e,s.parent):e}),[s]),r=(0,ee().K8)((()=>n&&a&&o?oe().B.createChildStore(o,{id:n,table:a}):null),[o,n,a]),l=(0,ee().K8)((()=>r?(0,se().Ay)({store:r,pageVisitSource:ne().y8.AuditLog}):null),[r]);return l?(0,w.jsxs)(w.Fragment,{children:["“",(0,w.jsx)(ae().N,{style:i.link,external:!0,href:l,children:(0,A().wS)(t,{noQuotes:!0})}),"“"]}):(0,w.jsx)(w.Fragment,{children:(0,A().wS)(t)})}function de(e){const{auditLogEntry:t,id:a}=e,[i,o]=(0,n.useState)(""),r=(0,s().tz)();return(0,n.useEffect)((()=>{const e=document.getElementById(a);o((null==e?void 0:e.textContent)||"")}),[a]),(0,w.jsx)(X().A,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,w.jsx)(ue,{text:i,auditLogEntry:t}),placement:"bottom",render:e=>(0,w.jsx)("div",{...e,style:{fontSize:14,...Z().RC},id:a,children:(0,w.jsx)(ce,{auditLogEntry:t,env:"production",intl:r})})})}function ce(e){const{auditLogEntry:t,env:a,intl:n}=e;return $({auditLogEntry:t,env:a,intl:n,options:{renderPageName:e=>(0,w.jsx)(le,{pageAuditLogEntry:e})}})}function ue(e){var t,a;const{auditLogEntry:n,text:i}=e,o=(0,s().tz)(),r=(0,j().aj)({auditLogEntry:n,intl:o}),l=(0,j().Bb)({auditLogEntry:n,intl:o});return(0,w.jsxs)("div",{children:[i,null!==(t=n.actor.meta)&&void 0!==t&&t.ipAddress?(0,w.jsx)("div",{children:(0,w.jsx)(s().sA,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=n.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}):void 0,(0,w.jsx)("div",{children:(0,j().BN)(n,o)}),r?(0,w.jsx)(s().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}):void 0,l?(0,w.jsx)(s().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}}):void 0]})}},23534:(e,t,a)=>{a.d(t,{M:()=>u,g:()=>p});var n=a(296540),s=()=>a(484714),i=()=>a(187174),o=()=>a(436604),r=()=>a(534177),l=()=>a(559506),d=()=>a(511303);const c={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function u({spaceId:e}){const[t,a]=(0,n.useState)("last_90_days");return{...p({spaceId:e,daysFilter:t}),daysFilter:t,setDaysFilter:a}}function p({spaceId:e,daysFilter:t}){const a=(0,s().v3)(),{updateCacheWithRecordMap:u}=(0,n.useContext)(d().N),[{status:p,value:g,error:m}]=(0,i().Yb)((async()=>{const n=await l().callApi({eventName:"getContentEngagementAnalytics",environment:a,data:{spaceId:e,daysFilter:t},headers:{[o().B3]:e}});switch("success"===n.type&&u(n),n.type){case"success":return{pageViews:n.data.pageViews,uniquePageViews:n.data.uniquePageViews,pagesCreated:n.data.pagesCreated,pageEdits:n.data.pageEdits,topPages:n.data.topPages};case"failed":throw n.body;default:(0,r().HB)(n)}}),[a,e,t,u]);return{data:(0,n.useMemo)((()=>g||c),[g]),loading:"pending"===p||"idle"===p,error:m}}},28119:(e,t,a)=>{a.d(t,{TD:()=>i,YS:()=>o});var n=()=>a(645873);const s={ConfirmHIPAAModal:new(n().O2)("ConfirmHIPAAModal",(async()=>a.e(77761).then(a.bind(a,116217)))),HIPAASuccessModal:new(n().O2)("HIPAASuccessModal",(async()=>a.e(50568).then(a.bind(a,222660))))},i=(0,n()._h)(s.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),o=(0,n()._h)(s.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},43450:(e,t,a)=>{a.d(t,{R:()=>i});var n=()=>a(484714),s=()=>a(56366);function i(e){const t=(0,n().v3)();return(0,s().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},46413:(e,t,a)=>{a.d(t,{D:()=>i});var n=()=>a(348564),s=()=>a(118685);class i extends s().f{getInitialState(){return{categorySelections:{page:s().o.All,space:s().o.All,team:s().o.All,account:s().o.All,form:s().o.All,collection:s().o.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0,collection:!0},searchQuery:void 0,actionSelections:(0,a(534177).s8)(n().D$,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:n().Dj.page},{category:"space",orderedActions:n().Dj.space},{category:"account",orderedActions:n().Dj.account},{category:"team",orderedActions:n().Dj.team},{category:"form",orderedActions:n().Dj.form},{category:"collection",orderedActions:n().Dj.collection}]}}}},47095:(e,t,a)=>{a.d(t,{Z:()=>s});var n=()=>a(401497);function s(){return(0,n().IS)((e=>({longShimmer:{borderRadius:4,height:14,width:185},longTallShimmer:{borderRadius:4,height:25,width:185},shortShimmer:{borderRadius:4,height:14,width:70},avatarShimmer:{borderRadius:"100%",height:28,width:28,background:"light"===e.mode?"rgb(243 243 243)":"rgb(38 38 38)"}})),[])}},55334:(e,t,a)=>{a.d(t,{BS:()=>o,HL:()=>s,_i:()=>i,jz:()=>l,nK:()=>r});var n=()=>a(757695);const s=n().Store.createValue({open:!1,openedFrom:void 0},{name:"BusinessTrialStartModalStore"}),i=n().Store.createValue({open:!1,openedFrom:void 0,recentPageStores:[],verifiedPageStores:[],teamStores:[],workspaceUserStores:[],connectedApps:[],numAiMeetingMinutes:0,modalState:"initial"},{name:"BusinessTrialEndingModalStore"}),o=n().Store.createValue({open:!1,openedFrom:void 0,connectedApps:[],teamStores:[],pageStores:[],onSecondaryButtonClick:void 0},{name:"BusinessTrialLossAversionModalStore"}),r=n().Store.createValue({open:!1,openedFrom:void 0,onSecondaryButtonClick:void 0},{name:"BusinessOfferLossAversionModalStore"}),l=n().Store.createValue({open:!1,connectedApps:[],teamStores:[],pageStores:[]},{name:"BusinessTrialExplorePlanModalStore"})},59976:(e,t,a)=>{a.d(t,{b:()=>i});var n=()=>a(645873);const s=new(n().O2)("time-series",(async()=>await Promise.resolve().then(a.bind(a,968526)))),i=(0,n()._h)(s,(e=>e.TimeSeries))},63964:(e,t,a)=>{a.d(t,{A:()=>W});var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(591779),r=()=>a(301608),l=()=>a(69708),d=()=>a(284371),c=()=>a(972435),u=()=>a(232930),p=()=>a(859428),g=()=>a(125565),m=()=>a(690197),h=()=>a(733815),f=()=>a(452864),v=(a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454),()=>a(484714)),y=()=>a(416845),x=()=>a(436604),b=()=>a(496603),S=()=>a(76590),A=()=>a(559506),j=()=>a(661461);const w={field:"num_searches",direction:"desc"},_=a(593467).Jb,C={sort:w,timeRange:_,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};a(898992),a(354520);var M=()=>a(396896),T=()=>a(98126),k=()=>a(493552),I=()=>a(534177),D=()=>a(994776),N=()=>a(641300),P=()=>a(760217),E=()=>a(89924),B=()=>a(755535),R=()=>a(882690),V=a(474848);const L=(0,l().YK)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),F=(0,l().YK)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}});function O({searchAnalyticsDataList:e,runNewSearch:t,sort:a,setSort:o,loadNextPage:d,loading:u,error:p,dateFilterProps:m}){const h=(0,n.useMemo)((()=>function(e){const{dateFilterProps:t}=e;return{queryText:{id:"queryText",headerTitle:(0,V.jsxs)(M().fI,{gap:8,alignItems:"center",children:[c().A.formatMessage(F.queryText),t?(0,V.jsx)(U,{currentFilter:t.currentFilter,onChangeFilter:t.onChangeFilter}):null]}),renderCell:e=>(0,V.jsx)(g().A,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.numSearches,columnHeader:F.numSearches}),renderCell:e=>(0,V.jsx)(z,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.numUniqueUsers,columnHeader:F.numUniqueUsers}),renderCell:e=>(0,V.jsx)(z,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.ctr,columnHeader:F.ctr}),renderCell:e=>(0,V.jsx)(z,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}}}({dateFilterProps:m})),[m]),f=(0,I().uv)(h).map((e=>h[e])),v=(0,s().K8)((()=>e.map((e=>({id:e.queryText,isClickable:!1,...e})))),[e]),y=(0,n.useMemo)((()=>function(e,t){const a=r().tV[t.field];if(!a)return;const n=e[a];return{column:n,sortAscending:"asc"===t.direction}}(h,a)),[h,a]),x=(0,i().IS)((e=>(0,N().rC)({columnRenderInfo:f,theme:e,containerMarginTop:0})),[f]),b=(0,i().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return p?(0,V.jsx)(D().t,{error:p,runNewSearch:t}):(0,V.jsxs)("div",{children:[(0,V.jsx)(N().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:f,rows:v,sortState:y,onSortStateChanged:e=>{o(function(e){const t=r().Bt[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,V.jsx)(g().A,{isSmall:!0,style:b.emptyQuery,children:u||0!==e.length?void 0:(0,V.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:x}),u?(0,V.jsx)(T().A,{style:b.loadingSpinner}):null]})}function z({value:e,isPercentage:t}){const a=(0,i().IS)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=t?`${e}%`:e;return(0,V.jsx)(g().A,{style:a.centered,children:n})}function U(e){return(0,V.jsx)(B().A,{selectedTitle:(0,V.jsx)(k().D,{styleKey:"Caption/Regular",children:c().A.formatMessage(r().jy[e.currentFilter])}),renderMenuSections:t=>[{key:"day_filter_selector",render:e=>(0,V.jsx)(E().A,{...e}),items:r().jf.filter((e=>"all_time"!==e)).map((a=>({key:a,action:()=>{},render:()=>(0,V.jsx)(P().A,{focused:!1,onClick:()=>{e.onChangeFilter(a),t.close()},title:(0,V.jsx)(k().D,{styleKey:"Caption/Regular",children:c().A.formatMessage(r().jy[a])})})})))}]})}function W(e){const{spaceStore:t,hideHeader:a=!1}=e,M=(0,i().IS)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d().Wy.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4}})),[]),T=(0,n.useRef)(!1),{searchAnalyticsDataList:k,timeRange:I,sort:D,loading:N,error:P,loadNextPage:E,runNewSearch:B,setTimeRange:R,setSort:L}=function({spaceStore:e}){const t=(0,v().v3)(),[a,s]=(0,n.useState)(C),i=(0,n.useRef)(w),o=(0,n.useRef)(_),r=(0,l().tz)(),d=(0,n.useCallback)((async({fetchFromFirstPage:n,ignoreSearchInputComparison:r})=>{const l=!b().n4(a.sort,i.current)||!b().n4(a.timeRange,o.current);if(!r&&!l)return;i.current=a.sort,o.current=a.timeRange;let d=a.loading,c=a.error,u=a.hasNextPage,p=a.paginationToken;if(n&&(s((e=>({...C,timeRange:e.timeRange,sort:e.sort}))),d=C.loading,c=C.error,u=C.hasNextPage,p=C.paginationToken),!u||d)return;if(c)return;s((e=>({...e,loading:!0})));const g=await A().callApi({eventName:"loadSearchAnalytics",environment:t,data:{spaceId:e.id,sort:a.sort,timeRange:a.timeRange,startCursor:p},headers:{[x().B3]:e.id}});if("failed"===g.type)return void s((e=>({...e,loading:!1,error:g})));const m=g.data.results;s((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const s of m){const e=s.queryText;a.has(e)||(t.push(s),a.add(e))}const n=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:n,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:g.data.nextCursor,hasNextPage:Boolean(g.data.nextCursor)}}))}),[t,e,a.sort,a.timeRange,a.loading,a.error,a.hasNextPage,a.paginationToken]);(0,n.useEffect)((()=>{a.shouldReRunSearch&&(s((e=>({...e,shouldReRunSearch:!1}))),d({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[a.shouldReRunSearch,d]);const c=(0,n.useCallback)((async()=>{a.shouldReRunSearch||await d({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[a.shouldReRunSearch,d]),u=(0,n.useCallback)((async e=>{await d({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[d]),p=(0,n.useCallback)((e=>{"all_time"!==e&&(s((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),S().kJ(t,{daysFilter:e}))}),[t]),g=(0,n.useCallback)((e=>{s((t=>({...t,sort:e,shouldReRunSearch:!0}))),S().G4(t,{column:e.field,isAscending:"asc"===e.direction})}),[t]),m=(0,n.useMemo)((()=>{if(a.error)return 404===a.error.status?new(y().m_)({message:(0,j().H)(r,a.error)}):new Error((0,j().H)(r,a.error))}),[a.error,r]);return{...a,error:m,loadNextPage:c,runNewSearch:u,setTimeRange:p,setSort:g}}({spaceStore:t}),F=(0,o().ZC)(t.id),z=(0,n.useMemo)((()=>void 0!==F&&t.id!==F),[t.id,F]);(0,n.useEffect)((()=>{T.current&&!z||(B(!0),T.current=!0)}),[B,z]);const U=(0,s().K8)((()=>t.getName()),[t]);return"NotFoundError"===(null==P?void 0:P.name)?(0,V.jsx)(f().H,{type:"empty",spaceName:U}):(0,V.jsxs)(V.Fragment,{children:[a?null:(0,V.jsxs)("div",{style:M.header,children:[(0,V.jsxs)(g().A,{style:M.sectionTitle,children:[(0,V.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,V.jsx)(p().A,{placement:"bottom",render:e=>(0,V.jsx)(m().A,{...e,href:(0,u().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:M.helpInfo}),renderTooltip:()=>(0,V.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c().A.formatMessage(r().Yr[I])}})})]}),(0,V.jsx)(h().Z,{currentFilter:I,onChangeFilter:R,hideAllTime:!0})]}),(0,V.jsx)(O,{searchAnalyticsDataList:k,runNewSearch:B,sort:D,setSort:L,loadNextPage:E,loading:N,error:P,dateFilterProps:a?{currentFilter:I,onChangeFilter:R}:void 0})]})}},75544:(e,t,a)=>{a.d(t,{A:()=>g});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var n=a(296540),s=()=>a(908006),i=()=>a(56366),o=()=>a(62371),r=()=>a(737658),l=()=>a(336811),d=()=>a(496603),c=()=>a(183558),u=()=>a(346923);function p(e){const{reducerId:t,instanceId:a,reducer:n,collectionContextStore:s,groupsPointer:i}=e,r=s.reducersStore.state,l=r[t];let c,u;if(i&&i.length>0&&(c=(0,o().Hm)(i)),n){if(u={instanceIds:d().sb([...(null==l?void 0:l.instanceIds)||[],a]),reducer:n},c){s.reducerDependencies.has(c)||s.reducerDependencies.set(c,new Set);const e=s.reducerDependencies.get(c);null==e||e.add(t)}}else{if(c){const e=s.reducerDependencies.get(c);e&&(e.delete(t),0===e.size&&s.reducerDependencies.delete(c))}const e=d().FF((null==l?void 0:l.instanceIds)||[],a);u=l&&e.length>0?{instanceIds:e,reducer:l.reducer}:void 0}d().n4(l,u)||s.reducersStore.setState({...r,[t]:u})}function g(e){const{id:t,reducer:a,collectionContextStore:g,groupsPointer:m,debounceWait:h,isDerivedReducer:f,resultLookupFn:v}=e,y=(0,u().l)(m),x=(0,u().l)(a),b=(0,i().K8)((()=>g.collectionViewStore()),[g]),S=(0,i().K8)((()=>g.normalizedFormatStore.state.collection_pointer),[g.normalizedFormatStore]),A=(0,i().K8)((()=>{var e;return null==b||null===(e=b.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[b]),j=(0,n.useRef)(!1),w=(0,l().O)(),[_,C]=(0,n.useReducer)(((e,t)=>d().n4(e,t)?e:t),void 0),M=(0,n.useCallback)((()=>{const e=g.localResultStore.state,a=g.remoteResultStore.state,n=e&&"reducer"===e.type?(null==v?void 0:v(e.reducerResults,y))??e.reducerResults[t]:void 0,s=a&&"reducer"===a.type?(null==v?void 0:v(a.reducerResults,y))??a.reducerResults[t]:void 0;return function(e){const{reducerId:t,localReducerResult:a,remoteReducerResult:n,collectionContextStore:s,reducer:i}=e,l=s.reducersStore.state,c=s.remoteResultStore.state,u=s.isClientModeEnabledStore.state;if(u)return a;const p=s.isCreatingNewChartCollectionStore.state,g=s.wasCreatedThisSessionStore.state;if("aggregation"===i.type){if(p&&g){return Boolean(n&&"aggregation"===n.type&&"number"===n.aggregationResult.type&&0!==n.aggregationResult.value)&&s.isCreatingNewChartCollectionStore.setState(!1),a}if(n)return n;const e=Boolean(c&&"reducer"===c.type&&d().I6(c.reducerResults,((e,t)=>{const a=l[t];return!!a&&Boolean("results"===a.reducer.type&&!a.reducer.searchQuery&&"results"===e.type&&!e.hasMore&&d().n4(i.filter,a.reducer.filter))})));return e?a:n}if("groups"===i.type){if(p&&g){return Boolean(n&&"groups"===n.type&&n.hasMore)&&s.isCreatingNewChartCollectionStore.setState(!1),a}if(a&&"groups"!==a.type)return;if(n&&"groups"!==n.type)return;const e=function(e){var t,a;const{reducerId:n,reducer:s,collectionContextStore:i,wasCreatedThisSession:l,localReducerResult:d,remoteReducerResult:c}=e;if(!s.blockResults&&!n.includes(o().RO))return c;let u;s.aggregation&&(c?u=c.aggregationResults:d&&(u=d.aggregationResults));const p=null===(t=i.collectionViewStore())||void 0===t?void 0:t.getCollectionSource(),g=(0,r().TR)(p)||(0,r().hJ)(p),m=Boolean(c&&c.blockResults),h=(m||l)&&!g;let f;if(s.blockResults){if(h&&d&&d.blockResults){const e=d.blockResults,t=(null==c?void 0:c.blockResults)??{},a=new Set([...Object.keys(e),...Object.keys(t)]),n={};for(const s of a){const a=e[s],i=t[s];let o=[];a?o=a.blockIds:i&&(o=i.blockIds);let r=!1;i?r=i.hasMore:a&&(r=a.hasMore),n[s]={blockIds:o,hasMore:r}}f=n}f||(f=i.forceLocalQueryCollection||g?null==c?void 0:c.blockResults:null==d?void 0:d.blockResults)}let v;d&&d.pinnedResults&&(v=d.pinnedResults);c&&c.pinnedResults&&(v={groupResults:c.pinnedResults.groupResults,...v,aggregationResults:c.pinnedResults.aggregationResults});const y=c?c.hasMore:Boolean(null==d?void 0:d.hasMore),x=c?c.hasMoreSubGroups:null==d?void 0:d.hasMoreSubGroups;let b=g?(null==c?void 0:c.results)??[]:(null==d?void 0:d.results)??(null==c?void 0:c.results)??[],S=g?(null==c?void 0:c.subGroupResults)??[]:(null==d?void 0:d.subGroupResults)??(null==c?void 0:c.subGroupResults);const A=s.groupBy;c&&("relation"===A.type||"formula"===A.type&&"relation"===A.groupBy.type)&&(b=c.results);const j=null===(a=s.subGroup)||void 0===a?void 0:a.groupBy;c&&("relation"===(null==j?void 0:j.type)||"formula"===(null==j?void 0:j.type)&&"relation"===j.groupBy.type)&&(S=c.subGroupResults);i.forceLocalQueryCollection&&(b=(null==c?void 0:c.results)??(null==d?void 0:d.results)??[],S=(null==c?void 0:c.subGroupResults)??(null==d?void 0:d.subGroupResults));return{type:"groups",version:"v2",results:b,subGroupResults:S,pinnedResults:v,hasMore:y,hasMoreSubGroups:x,blockResults:f,aggregationResults:u}}({reducerId:t,collectionContextStore:s,reducer:i,wasCreatedThisSession:g,localReducerResult:a,remoteReducerResult:n});return e}if("results"===i.type){var m;const e=s.wasCreatedThisSessionStore.state,i=Boolean(c&&"reducer"===c.type&&c.reducerResults[t]),o=null===(m=s.collectionViewStore())||void 0===m?void 0:m.getCollectionSource(),l=(0,r().TR)(o)||(0,r().hJ)(o);if((i||e)&&!l&&a&&"results"===a.type){return{...a,hasMore:n&&"results"===n.type?n.hasMore:a.hasMore}}return n}}({reducerId:t,collectionContextStore:g,reducer:x,localReducerResult:n,remoteReducerResult:s})}),[g,y,x,t,v]),T=(0,n.useCallback)((()=>{j.current=!1,w.current||C(M())}),[M,w]),k=(0,n.useCallback)((()=>{j.current||(j.current=!0,s().default.afterNextFlush(T))}),[T]),[I]=(0,n.useState)((()=>(0,c().Ay)()));return(0,n.useEffect)((()=>{const e=h?(0,d().sg)(k,h,{leading:!0}):k;return g.remoteResultStore.addListener(k),g.localResultStore.addListener(e),()=>{g.remoteResultStore.removeListener(k),g.localResultStore.removeListener(e)}}),[g,k,h]),(0,n.useEffect)((()=>{if(!f)return p({reducerId:t,instanceId:I,reducer:x,collectionContextStore:g,groupsPointer:y}),()=>{p({reducerId:t,instanceId:I,reducer:void 0,collectionContextStore:g,groupsPointer:y})}}),[g,b,S,A,y,x,t,I,f]),(0,n.useEffect)((()=>{k()}),[]),(0,n.useEffect)((()=>(g.timingTracker.mountCollectionReducerRequest(t,x.type),()=>{g.timingTracker.unmountCollectionReducerRequest(t)})),[g,t,x]),_}},76590:(e,t,a)=>{a.d(t,{$s:()=>p,G4:()=>f,Jv:()=>r,Jy:()=>o,PH:()=>g,TJ:()=>l,Tm:()=>u,Wt:()=>m,Y5:()=>d,kJ:()=>h,lP:()=>c,n_:()=>s,wy:()=>i});var n=()=>a(314529);function s(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"overview_analytics_filter_change",t)}function i(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"user_analytics_engagement_timerange_filter_change",t)}function o(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"user_analytics_table_filter_change",t)}function r(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"user_analytics_table_sort_change",t)}function l(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"user_analytics_export_requested",t)}function d(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"content_analytics_export_requested",t)}function u(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_filter_change",t)}function p(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_timerange_filter_change",t)}function g(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_sort_change",t)}function m(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"workspace_analytics_tab_click",t)}function h(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"search_analytics_table_sort_change",t)}},82139:(e,t,a)=>{a.d(t,{Z:()=>B,R:()=>E});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(252291),l=a(474848);const d={viewBox:"0 0 16 16",fittedViewBox:"3.65 3.65 8.68 8.69",directional:!0,svg:(0,l.jsx)("path",{d:"M4.708 3.824c-.235-.235-.621-.22-.862.022-.241.24-.257.627-.022.862l6.38 6.38H5.602a.625.625 0 1 0 0 1.25h6.11c.345 0 .624-.28.624-.626v-6.11a.625.625 0 1 0-1.25 0v4.601z"})},c=(0,a(340498).wt)("arrowDiagonalDownRightSmall",d);var u=()=>a(8741),p=()=>a(854150),g=()=>a(798880),m=()=>a(301608),h=()=>a(69708),f=()=>a(534177),v=()=>a(284371),y=()=>a(76590),x=()=>a(972435),b=()=>a(232930),S=()=>a(997583),A=()=>a(95758),j=()=>a(870092),w=()=>a(249117),_=()=>a(859428),C=()=>a(125565),M=()=>a(690197),T=()=>a(655546),k=()=>a(511303),I=()=>a(374255),D=()=>a(175458),N=()=>a(733815);const P=640;function E({data:e,loading:t,error:a,daysFilter:r,setDaysFilter:d}){const c=(0,s().v3)(),{activeMembersCount:u,previousActiveMembersCount:f,activeGuestsCount:E,previousActiveGuestsCount:R,topTeamspaces:V,topViewers:L,topEditors:F}=e,O=(0,o().IS)((e=>({title:{fontWeight:v().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[z,U]=(0,S().z)(),{organizationOwnerRecordCache:W}=(0,n.useContext)(k().N),H=(0,n.useCallback)((e=>{y().n_(c,{filter:"user_engagement",daysFilter:e}),d(e)}),[c,d]),K=(0,i().K8)((()=>V.map((({teamspaceId:e,pageViews:t})=>({store:new(A().h)(c,{id:e,table:p().yK},{inMemoryRecordCache:W}),caption:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,l.jsx)(T()._,{abbreviateNumber:!0,num:t})}})}))).filter((e=>e.store.canRead())).slice(0,5)),[c,V,W]),q=(0,i().K8)((()=>L.map((({userId:e,pageViews:t})=>({store:new(j().L)(c,{id:e,table:g().oo}),caption:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,l.jsx)(T()._,{abbreviateNumber:!0,num:t})}})}))).slice(0,5)),[c,L]),G=(0,i().K8)((()=>F.map((({userId:e,pageEdits:t})=>({store:new(j().L)(c,{id:e,table:g().oo}),caption:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,l.jsx)(T()._,{abbreviateNumber:!0,num:t})}})}))).slice(0,5)),[c,F]);return(0,l.jsxs)("div",{style:O.container,ref:z,children:[(0,l.jsxs)("div",{style:O.titleContainer,children:[(0,l.jsxs)(C().A,{style:O.title,children:[(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,l.jsx)(_().A,{placement:"bottom",render:e=>(0,l.jsx)(M().A,{...e,href:(0,b().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:O.helpInfo}),renderTooltip:()=>"all_time"!==r?(0,l.jsx)(h().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:x().A.formatMessage(m().Yr[r])}}):(0,l.jsx)(h().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,l.jsx)(N().Z,{currentFilter:r,onChangeFilter:H})]}),(0,l.jsxs)(w().xA,{gap:16,children:[(0,l.jsx)(w().LX,{row:1,col:1,children:(0,l.jsx)(D().a,{style:O.summaryCard,loading:t,error:a,title:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,l.jsx)(T()._,{abbreviateNumber:U<P,num:u})}}),byline:void 0!==f?(0,l.jsx)(B,{userType:"members",daysFilter:r,count:u,previousCount:f}):null})}),(0,l.jsx)(w().LX,{row:1,col:2,children:(0,l.jsx)(D().a,{style:O.summaryCard,loading:t,error:a,title:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,l.jsx)(T()._,{abbreviateNumber:U<P,num:E})}}),byline:void 0!==R?(0,l.jsx)(B,{userType:"guests",daysFilter:r,count:E,previousCount:R}):null})})]}),(0,l.jsxs)(w().xA,{gap:16,children:[(0,l.jsx)(w().LX,{row:1,col:1,children:(0,l.jsx)(I().N,{loading:t,error:a,title:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:K})}),(0,l.jsx)(w().LX,{row:1,col:2,children:(0,l.jsx)(I().N,{loading:t,error:a,title:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:q})}),(0,l.jsx)(w().LX,{row:1,col:3,children:(0,l.jsx)(I().N,{loading:t,error:a,title:(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function B({userType:e,daysFilter:t,count:a,previousCount:n}){const s=0===a&&0===n?0:Math.round((a-n)/n*100);let i;i=s===1/0?function(e,t,a){if("all_time"===a)return(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:m().Eb[a].toLocaleString()}}):(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:m().Eb[a].toLocaleString()}})}(e,a,t):function(e,t){switch(t){case"all_time":return 0===e?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,l.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,f().HB)(t)}}(s,t);const d=s>0?(0,l.jsx)(r().I,{icon:u().arrowDiagonalUpRightSmallIcon,size:"xs"}):s<0?(0,l.jsx)(r().I,{icon:c,size:"xs"}):void 0,p=(0,o().IS)((e=>({text:{color:s>0?e.palette.green[500]:s<0?e.palette.red[500]:e.text.tertiary,display:"flex",alignItems:"center",gap:4}})),[s]);return(0,l.jsxs)("span",{style:p.text,children:[d,i]})}},87043:(e,t,a)=>{a.d(t,{Ev:()=>L,Bj:()=>F,Ay:()=>q});a(944114),a(581454);var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(584262),l=()=>a(302107),d=()=>a(142748),c=()=>a(273900),u=()=>a(68263),p=()=>a(179034),g=()=>a(519831),m=()=>a(854150),h=()=>a(743246),f=()=>a(496703),v=()=>a(69708),y=()=>a(100622),x=()=>a(534177),b=()=>a(761652),S=()=>a(296798),A=()=>a(125565),j=()=>a(347160),w=()=>a(492414),_=()=>a(299545),C=()=>a(152197),M=()=>a(976721),T=()=>a(321172),k=()=>a(632709),I=()=>a(258836),D=()=>a(329304),N=()=>a(204330),P=()=>a(848237),E=()=>a(265665),B=()=>a(623275),R=a(474848);const V=function(e){const{store:t,isDisabled:a,isCurrentUserPermission:n}=e;return a?n?(0,R.jsx)(v().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,R.jsx)(b().A,{store:t,useInvertedColors:!0})}}):(0,R.jsx)(v().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,R.jsx)(b().A,{store:t,useInvertedColors:!0})}}):n?(0,R.jsx)(v().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,R.jsx)(b().A,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,R.jsx)(v().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,R.jsx)(b().A,{store:t,useInvertedColors:!0,maxLength:26})}})},L=32,F=40,O=(0,v().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function z(e){const{from:t,store:r,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:u,inheritedTooltip:f,shouldDisable:v,isCollapsible:y,openRoleSelectMenuOnRender:b}=e,S=(0,s().v3)(),A=(0,i().uB)(void 0,a(463830).A),j=(0,i().K8)((()=>{const e=t.table;if(e===p().ev)return a(148832).B.createChildStore(r,{table:p().ev,id:t.blockId});if(e===m().yK)return a(95758).h.createChildStore(r,{table:m().yK,id:t.teamId});if(e===g().Vl)return a(543665).m.createChildStore(r,{table:g().Vl,id:t.collectionId});if(e===h().C0){const e=r.getSpaceId();if(!e)return;return a(201718).N.createChildStore(r,{table:h().C0,id:t.workflowId,spaceId:e})}(0,x().HB)(e)}),[t,r]),[w,_]=(0,n.useState)(!1),C=(0,n.useCallback)((()=>{A.setState({...A.state,open:!0}),_(!0)}),[A]),M=(0,n.useCallback)((()=>{_(!1)}),[]);(0,n.useEffect)((()=>{b&&!A.state.open&&requestAnimationFrame((()=>{C()}))}),[b,C,A]);const T=w,k=(0,i().K8)((()=>v||(0,a(484578).dK)({permissionItem:d,store:r})),[v,d,r]),I=(0,i().K8)((()=>!!j&&j.id!==r.id),[j,r]),D=(0,n.useCallback)((e=>{l?l(e):k||A.setState({...A.state,open:!0})}),[A,l,k]),N=(0,i().K8)((()=>{const e=S.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[S,d]),P=(0,i().K8)((()=>T?null:I&&j?f||(0,R.jsx)(V,{store:j,isDisabled:k,isCurrentUserPermission:N}):u),[I,u,f,j,k,N,T]),E=(0,o().IS)((t=>({button:{...(0,B().CY)(),...e.menuListItemProps?{width:"unset"}:{}},pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}})),[e.menuListItemProps]);return(0,R.jsx)(a(859428).A,{delayThreshold:0,renderTooltip:()=>P,textWrap:!0,disableTooltip:!Boolean(P)||T,forceRenderTooltipPopupComponent:Boolean(P),style:E.tooltip,render:t=>{const n=(0,a(553965).A)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,R.jsx)(a(760217).A,{...e.menuListItemProps,onClick:D,disabled:k,ignoreLocalHoverState:c,pressed:!1,buttonStyle:E.button,textWrapperStyle:{marginInlineStart:0,marginInlineEnd:0},style:{padding:0},title:j&&(0,R.jsx)(U,{...e,isDisabled:k,fromStore:j,buttonPopupStore:A,isInherited:I,onOpenMenu:C,onClose:M}),...n}):(0,R.jsx)(a(718827).Ay,{disabled:k&&!y,ignoreLocalHoverState:c,style:E.button,pressedStyle:E.pressedButton,onClick:D,...n,children:j?(0,R.jsx)(U,{...e,isDisabled:k,fromStore:j,buttonPopupStore:A,isInherited:I,onOpenMenu:C,onClose:M}):void 0})},placement:"left"})}function U(e){const{permissionItem:t,fromStore:a,isCompact:r,iconStyle:l,icon:d,title:c,tag:u,subtitle:m,showInherited:f,isInherited:v,permissionRoleSelect:y,hideRoleSelectButton:b,renderTitleWithoutUILabelWrapper:S,onClose:j,style:w}=e,_=(0,s().v3)(),C=_.device.isMobile,M=(0,i().K8)((()=>function(e){return"user_permission"===e.type}(t)),[t]),{paddingLeft:T,paddingRight:k}=(0,i().K8)((()=>({paddingLeft:_.WindowSizeStore.getSafePaddingLeftCSS(C?0:8),paddingRight:_.WindowSizeStore.getSafePaddingRightCSS(C?0:8)})),[_.WindowSizeStore,C]),I=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:r?44:void 0,height:C?void 0:B().CJ,paddingTop:C?12:8,paddingBottom:C?12:8,paddingInlineStart:T,paddingInlineEnd:k,...w},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:C?40:32,height:C?40:32,marginInlineEnd:(0,B().qj)({isMobile:C}),...l},title:{marginInlineEnd:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginInlineStart:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginInlineStart:8}})),[r,T,k,C,l,w]),D=(0,n.useMemo)((()=>b?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(t)?y:e.store.table===p().ev||e.store.table===h().C0?(0,R.jsx)(W,{...e,onClose:j,permissionItem:t}):e.store.table===g().Vl?(0,R.jsx)(H,{...e,store:e.store,onClose:j,permissionItem:t}):void(0,x().HB)(e.store)),[b,t,e,y,j]);return(0,R.jsxs)("div",{className:"notranslate",style:I.container,children:[(0,R.jsx)("div",{style:I.icon,children:d}),(0,R.jsxs)("div",{style:I.title,children:[(0,R.jsxs)("div",{style:I.labelWrapper,children:[S?c:(0,R.jsx)(A().A,{style:M?void 0:I.label,children:(0,R.jsx)(E().j,{children:c})}),u?(0,R.jsx)("div",{style:I.tag,children:u}):void 0]}),m?(0,R.jsx)(A().A,{style:e.subtitleStyle,isSmall:!0,children:m}):void 0,f&&v?(0,R.jsx)(K,{store:a}):void 0]}),D?(0,R.jsx)("div",{style:I.roleSelect,children:D}):null]})}function W(e){const{isInherited:t,permissionItem:a,store:r,from:l,isDisabled:g,sudoModeStore:m,location:f,fromPermissionWrapper:v,onUpgradeButtonClick:y,onChange:x,onClose:b,onOpenMenu:S,upgradeButtonName:A,buttonPopupStore:w,isRemovableOverride:_,onChangeSuccess:C}=e,k=(0,s().v3)(),D=(0,i().K8)((()=>{var e;const t=r.getModel(),n=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:t,parent:n,from:l,permissionItem:a})?(0,c().SK)({ancestors:d().Yn(r.pointer,r.getRecordModel),from:l}):a.role}),[l,a,r]),N=(0,i().K8)((()=>r.table===p().ev?r.getType():void 0),[r]),P=(0,i().K8)((()=>{const e=k.currentUser.id;return u().B2(a)&&a.user_id===e}),[k,a]),E=(0,i().K8)((()=>{if("bot_permission"!==a.type)return;const e=I().v.createChildStore(r,{table:"bot",id:a.bot_id,spaceId:a.parent_id});return e.isWorkflowBot()?e.getWorkflowId():void 0}),[a,r]),V=(0,n.useCallback)((async e=>{let n=!1;const s={...a};if(s.role=D,n=x?await x(e):await(0,M().o5)({oldPermissionItem:s,newRole:e,wasInherited:t,environment:k,store:r,sudoModeStore:m,location:f,fromPermissionWrapper:v}),n&&(null==C||C(e),r.table===h().C0&&P&&"none"===e)){w.reset(),T().XP({environment:k,store:r});const e=k.defaultRecordCache.inMemoryRecordCache;e.setModelAndRole({pointer:r.pointer,userId:k.currentUser.id},r.getModel(),"none"),e.emitRecord(r.pointer,[])}}),[a,D,t,k,r,m,f,v,x,C,w,P]),L=(0,o().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,B().kx)({environment:k})}})),[k]);return(0,R.jsx)(j().Ay,{role:D,table:r.table===h().C0?h().C0:p().ev,blockType:N,type:a.type,disabled:g,isUserPermission:P,onChange:V,onClick:S,onClose:b,onUpgradeButtonClick:y,upgradeButtonName:A,buttonPopupStore:w,buttonStyle:L.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:_,workflowId:E,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function H(e){const{isInherited:t,permissionItem:a,store:r,from:p,isDisabled:m,sudoModeStore:h,location:f,fromPermissionWrapper:v,onUpgradeButtonClick:y,onChange:x,onClose:b,onOpenMenu:S,upgradeButtonName:A,buttonPopupStore:w,isRemovableOverride:_,onChangeSuccess:T}=e,k=(0,s().v3)(),I=(0,C().r)(),P=(0,D()._X)({name:"collection_property_permissions",spaceId:I,userId:k.currentUser.id}),E=(0,i().K8)((()=>{var e;const t=r.getModel(),n=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:t,parent:n,from:p,permissionItem:a})?(0,c().SK)({ancestors:d().Yn(r.pointer,r.getRecordModel),from:p}):a.role}),[p,a,r]),V=(0,i().K8)((()=>{const e=k.currentUser.id;return u().B2(a)&&a.user_id===e}),[k,a]),L=(0,n.useCallback)((async e=>{let n=!1;const s={...a};s.role=E,n=x?await x(e):await(0,M().o5)({oldPermissionItem:s,newRole:e,wasInherited:t,environment:k,store:r,sudoModeStore:h,location:f,fromPermissionWrapper:v}),n&&(null==T||T(e))}),[a,E,t,k,r,h,f,v,x,T]),F=(0,i().K8)((()=>{if("collection_property_permission"!==a.type)return;const e=r.getSchema();if(!(0,l().sq)({collectionSchema:e,permissionItem:a}))return[{role:"none"}];const t=[..."page_creator"===a.property_info.type?["editor"]:[],"read_and_write","comment_only","reader"],n="collection_property_permission"===a.type&&"unavailable"===(null==P?void 0:P.type)&&P.upsell,s=t.map((e=>({role:e,...n&&{disabledInfo:{isDisabled:!0}}})));return n&&(s[0].prefixItem={key:"upgrade_button",action:()=>{},render:()=>(0,R.jsx)("div",{style:{padding:7},children:(0,R.jsx)(N().R,{source:"collection_property_permissions",display:"button",upsell:P.upsell,featureName:"collection_property_permissions"})})}),s.push({role:"none"}),s}),[a,r,P]),O=(0,o().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,B().kx)({environment:k})}})),[k]);return(0,R.jsx)(j().Ay,{role:E,table:g().Vl,blockType:void 0,type:a.type,disabled:m,isUserPermission:V,onChange:L,onClick:S,onClose:b,onUpgradeButtonClick:y,upgradeButtonName:A,buttonPopupStore:w,buttonStyle:O.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:_,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader,availableRoleItems:F})}function K(e){const{store:t}=e,a=(0,s().v3)(),l=(0,v().tz)(),d=(0,i().K8)((()=>t.table===p().ev?(0,w().Ay)({store:t,fullyQualified:!1,pageVisitSource:r().y8.LinkInPage}):t.table===h().C0?(0,f().L)({workflowId:t.id,params:{},pageVisitSource:r().y8.LinkInPage}):void 0),[t]),c=(0,i().K8)((()=>(0,_().$R)(t)),[t]),u=(0,n.useCallback)((()=>{P().F2({environment:a,teamId:t.id,tab:k().p.Members,from:"permission_item"})}),[t.id,a]),g=(0,o().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${y().Tj.mediumTextColor}`}})),[]);return(0,R.jsx)(A().A,{isSmall:!0,style:g.label,children:l.formatMessage(O.fromLinkBox,{linkBoxWithPageTitle:(0,R.jsx)(S().A,{inline:!0,href:d,onClick:c?u:void 0,innerStyle:g.linkBox,children:(0,R.jsx)(b().A,{store:t,useInvertedColors:!1})})})})}const q=n.memo(z)},99756:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(296540),s=()=>a(401497),i=()=>a(87043),o=a(474848);function r({type:e,isMobile:t,containerStyle:n,iconSize:r,...d}){const c=r??20,u=(0,s().IS)((s=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,a(623275).iM)({theme:s,size:r??(t?i().Bj:i().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===e&&{borderRadius:"100%"},...n}})),[n,t,e,r]);return(0,o.jsx)("div",{style:u.container,children:"function"===d.iconType?(0,o.jsx)(l,{iconFn:d.iconFn,iconStyle:d.iconStyle,innerIconSize:c}):"emoji"===d.iconType?(0,o.jsx)(a(56086).A,{char:d.emoji,size:c}):"recordIcon"===d.iconType?(0,o.jsx)(a(187820).B6,{icon:d.icon,disabled:!0,isEmptyPage:!1,size:c,defaultIcon:(0,a(658985).$)()}):d.element})}function l({iconFn:e,iconStyle:t,innerIconSize:a}){return e((0,s().IS)((e=>({icon:{width:a,height:a,fill:e.icon.secondary,...t}})),[t,a]).icon)}const d=n.memo(r)},101981:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(296540),s=()=>a(56366),i=a(474848);function o(e){const{resultStore:t,render:o,...r}=e,l=(0,a(75544).A)(r),d=(0,s().uB)(t,a(757695).Store.createClass(void 0)),c=(0,s().K8)((()=>e.collectionContextStore.collectionViewStore()),[e.collectionContextStore]);(0,n.useEffect)((()=>{d.setState(l);const t=e.reducer;"groups"===t.type&&"groups"===(null==l?void 0:l.type)&&e.collectionContextStore.groupsStore.setGroupBlockResults(t,l)}),[e.collectionContextStore.groupsStore,e.reducer,l,d,c]);const u=(0,s().K8)((()=>o?o(d):null),[o,d]);return(0,i.jsx)(i.Fragment,{children:u})}const r=n.memo(o)},105835:(e,t,a)=>{a.d(t,{Cn:()=>u,XY:()=>c,YQ:()=>p,mI:()=>g});a(296540);var n=()=>a(401497),s=()=>a(396896),i=()=>a(631524),o=()=>a(493552),r=()=>a(626466),l=()=>a(602105),d=a(474848);function c({title:e,byline:t,content:a}){const s=(0,n().IS)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,d.jsxs)("div",{style:s.container,children:[(0,d.jsx)(o().D,{styleKey:"Title-sm/Semibold",as:"h2",children:e}),t?(0,d.jsx)(o().D,{styleKey:"Body",colorPalette:"gray",colorVariant:"secondary",children:t}):void 0,(0,d.jsx)("div",{style:s.content,children:a})]})}function u({title:e,badge:t,byline:a,content:s,rightContent:l,onClick:c,disabled:u,...m}){const h=g(),f=(0,n().IS)((e=>({rightContent:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"center",alignItems:"center",gap:12},secondaryText:{margin:0,padding:0,textWrap:"wrap"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.palette.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(270deg)"}})),[]),v=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p,{title:e,content:s,byline:a,badge:t,alignItems:"flex-start"}),(0,d.jsxs)("div",{style:f.rightContent,children:[l?(0,d.jsx)(o().D,{style:f.secondaryText,styleKey:"Body-sm/Regular",colorVariant:"secondary",as:"p",children:l}):void 0,void 0===c?null:(0,d.jsx)("div",{style:f.iconButton,children:(0,r().arrowChevronSingleDownFillIcon)(f.icon)})]})]});return void 0===c?(0,d.jsx)("div",{style:h.container,children:v}):(0,d.jsx)(i().p,{style:h.container,onClick:c,hoveredStyle:{...h.container,...h.containerDark},pressedStyle:{...h.container,...h.containerDark},disabled:u,disabledFeedback:u,...m,children:v})}function p({title:e,content:t,byline:a,badge:i,alignItems:r="flex-start",fullWidth:l=!1}){const c=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:r,gap:6,flex:"1 1 200px",width:l?"100%":void 0},title:{margin:0,padding:0,textWrap:"wrap"},secondaryText:{margin:0,padding:0,textWrap:"wrap"},content:{padding:"2px 0 6px",width:l?"100%":void 0}})),[r,l]);return(0,d.jsxs)("div",{style:c.container,children:[(0,d.jsxs)(s().fI,{alignItems:"center",children:[(0,d.jsx)(o().D,{style:c.title,styleKey:"Body/Medium",children:e}),i]}),t?(0,d.jsx)("div",{style:c.content,children:t}):null,(0,d.jsx)(o().D,{style:c.secondaryText,styleKey:"Body-sm/Regular",colorVariant:"secondary",children:a})]})}function g(){return(0,n().IS)((e=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.border.secondary,boxShadow:l().v},containerDark:{background:e.palette.translucentGray[30],borderColor:e.border.primary}})),[])}},107501:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>oe,SidebarCreateTeamModal:()=>ce,TeamDescriptionRow:()=>X,TeamIconAndNameRow:()=>ae});a(581454);var n=a(296540),s=()=>a(726637),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(718827),d=()=>a(998531),c=()=>a(396896),u=()=>a(98126),p=()=>a(148307),g=()=>a(66913),m=a(474848);const h=(0,a(340498).wt)("openTeam",{viewBox:"0 0 28 28",svg:(0,m.jsx)("path",{d:"M3.24121 21.4326C3.24121 22.4082 3.80371 23.0322 4.7002 23.0322H22.4629C23.3506 23.0322 23.9131 22.4082 23.9131 21.4326V10.2178C23.9131 9.24219 23.3506 8.61816 22.4629 8.61816H17.2334V5.89355C17.2334 4.91797 16.6709 4.29395 15.7832 4.29395H4.7002C3.80371 4.29395 3.24121 4.91797 3.24121 5.89355V21.4326ZM4.65625 21.1074V6.21875C4.65625 5.86719 4.81445 5.70898 5.16602 5.70898H15.3174C15.6602 5.70898 15.8184 5.86719 15.8184 6.21875V21.1074C15.8184 21.4502 15.6602 21.6172 15.3174 21.6172H13.2959V19.0244C13.2959 18.2686 12.9619 17.917 12.2412 17.917H8.2334C7.5127 17.917 7.17871 18.2686 7.17871 19.0244V21.6172H5.16602C4.81445 21.6172 4.65625 21.4502 4.65625 21.1074ZM7.31934 9.5498H9.0332C9.24414 9.5498 9.39355 9.40918 9.39355 9.18945V7.52832C9.39355 7.31738 9.24414 7.16797 9.0332 7.16797H7.31934C7.1084 7.16797 6.97656 7.31738 6.97656 7.52832V9.18945C6.97656 9.40918 7.1084 9.5498 7.31934 9.5498ZM11.4414 9.5498H13.1465C13.3574 9.5498 13.5068 9.40918 13.5068 9.18945V7.52832C13.5068 7.31738 13.3574 7.16797 13.1465 7.16797H11.4414C11.2217 7.16797 11.0898 7.31738 11.0898 7.52832V9.18945C11.0898 9.40918 11.2217 9.5498 11.4414 9.5498ZM17.2334 21.4326V10.0332H21.9971C22.3398 10.0332 22.498 10.2002 22.498 10.543V21.1074C22.498 21.4502 22.3398 21.6172 21.9971 21.6172H17.2246C17.2334 21.5557 17.2334 21.4941 17.2334 21.4326ZM7.31934 13.0303H9.0332C9.24414 13.0303 9.39355 12.8896 9.39355 12.6699V11.0088C9.39355 10.7979 9.24414 10.6484 9.0332 10.6484H7.31934C7.1084 10.6484 6.97656 10.7979 6.97656 11.0088V12.6699C6.97656 12.8896 7.1084 13.0303 7.31934 13.0303ZM11.4414 13.0303H13.1465C13.3574 13.0303 13.5068 12.8896 13.5068 12.6699V11.0088C13.5068 10.7979 13.3574 10.6484 13.1465 10.6484H11.4414C11.2217 10.6484 11.0898 10.7979 11.0898 11.0088V12.6699C11.0898 12.8896 11.2217 13.0303 11.4414 13.0303ZM19.1582 13.4521H20.5732C20.749 13.4521 20.8721 13.3291 20.8721 13.1533V11.7822C20.8721 11.6064 20.749 11.4834 20.5732 11.4834H19.1582C18.9736 11.4834 18.8682 11.6064 18.8682 11.7822V13.1533C18.8682 13.3291 18.9736 13.4521 19.1582 13.4521ZM7.31934 16.5107H9.0332C9.24414 16.5107 9.39355 16.3613 9.39355 16.1504V14.4893C9.39355 14.2695 9.24414 14.1289 9.0332 14.1289H7.31934C7.1084 14.1289 6.97656 14.2695 6.97656 14.4893V16.1504C6.97656 16.3613 7.1084 16.5107 7.31934 16.5107ZM11.4414 16.5107H13.1465C13.3574 16.5107 13.5068 16.3613 13.5068 16.1504V14.4893C13.5068 14.2695 13.3574 14.1289 13.1465 14.1289H11.4414C11.2217 14.1289 11.0898 14.2695 11.0898 14.4893V16.1504C11.0898 16.3613 11.2217 16.5107 11.4414 16.5107ZM19.1582 16.8096H20.5732C20.749 16.8096 20.8721 16.6865 20.8721 16.5107V15.1396C20.8721 14.9639 20.749 14.8408 20.5732 14.8408H19.1582C18.9736 14.8408 18.8682 14.9639 18.8682 15.1396V16.5107C18.8682 16.6865 18.9736 16.8096 19.1582 16.8096ZM19.1582 20.167H20.5732C20.749 20.167 20.8721 20.0439 20.8721 19.8682V18.4971C20.8721 18.3213 20.749 18.1982 20.5732 18.1982H19.1582C18.9736 18.1982 18.8682 18.3213 18.8682 18.4971V19.8682C18.8682 20.0439 18.9736 20.167 19.1582 20.167ZM8.33008 19.3496C8.33008 19.165 8.42676 19.0684 8.61133 19.0684H11.8633C12.0566 19.0684 12.1445 19.165 12.1445 19.3496V21.6172H8.33008V19.3496Z"})});var f=()=>a(505412),v=()=>a(69708),y=()=>a(496603),x=()=>a(534177),b=()=>a(284371),S=()=>a(946141),A=()=>a(623580),j=()=>a(676007),w=()=>a(15144),_=()=>a(125565),C=()=>a(453697),M=()=>a(101919),T=()=>a(229778),k=()=>a(972435),I=()=>a(665381),D=()=>a(37433),N=()=>a(456663),P=()=>a(765957),E=()=>a(95758),B=()=>a(205618),R=()=>a(324561),V=()=>a(848237),L=()=>a(160432),F=()=>a(213525),O=()=>a(249847),z=()=>a(152197),U=()=>a(10984),W=()=>a(475355),H=()=>a(51781),K=()=>a(812941);function q(){const e=(0,i().v3)(),{currentSpaceStore:t,spaceViewStore:a}=(0,o().K8)((()=>({currentSpaceStore:P().default.state.sidebarSpaceStore,spaceViewStore:P().default.state.sidebarSpaceViewStore})),[]),s=(0,z().r)(),l=(0,O().T)(),d=(0,R().lh)({spaceId:s}),c=(0,o().O$)(N().A),u=(0,D().Gt)(d),p=function(){const e=(0,o().K8)((()=>U().El()&&!N().A.state.isDefault),[]),t=N().o.Team,a=N().o.Members;return e?[t,a]:[t]}(),{screen:g,pageNumber:h,teamId:b}=c,S=""===c.name||c.name.length>f().Q||c.description.length>f().z,A=(0,r().IS)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginInlineStart:8},learnMoreLink:{overflow:"hidden"}})),[]),j=(0,n.useCallback)(((a,n)=>{t&&function({pageOrder:e,pageNumber:t,teamId:a,currentSpaceStore:n,environment:s,from:i}){const o=t+1;if(o<=e.length)N().A.update((t=>({...t,loading:!1,screen:e[o-1],pageNumber:o})));else if(a){const e=E().h.createChildStore(n,{table:"team",id:a,spaceId:n.id});V().L0({environment:s,teamStore:e,shouldScroll:!0}),V().lJ({environment:s,from:i,teamStore:e})}}({pageOrder:p,pageNumber:h,teamId:n||b,currentSpaceStore:t,environment:e,from:a})}),[t,e,h,p,b]),w=y().sg((async()=>{if(!t||!a||!l)return;let n=b;switch(g){case N().o.Team:n=await async function({spaceStore:e,userId:t,environment:a,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:s}){var i;const{name:o,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=s,p=await(0,H().wq)({userId:t,spaceStore:e,environment:a}),g=(0,D().dT)({spaceStore:e,teams:p}).map((e=>e.store));if(!(await(0,F().d$)({teamName:o,teamStores:g})))return;let m;N().A.update((e=>({...e,loading:!0}))),m=n?await W().oH({environment:a,name:o,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await W().gj({environment:a,name:o,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!m)return;const h=null===(i=m)||void 0===i?void 0:i.id;return N().A.update((e=>({...e,teamId:h}))),h}({spaceStore:t,userId:l,environment:e,shouldShowZeroTeamsExperience:u,sidebarCreateTeamModalStoreState:c});break;case N().o.Members:break;default:(0,x().HB)(g)}n?j("success",n):N().A.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),_=(0,n.useCallback)(w,[w]);return(0,m.jsxs)("div",{style:A.box,children:[(0,m.jsx)(K().A,{containerStyle:A.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,m.jsx)("div",{style:{display:"inline-flex"},children:(0,m.jsx)(L().A,{colorPalette:"blue",size:"lg",onClick:_,disabled:S,style:A.button,children:(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var G=()=>a(144707),Y=()=>a(284331),Q=()=>a(898808);const $={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},J={createTeamContainer:{...$,width:480},addMembersContainer:{...$,width:500},full:{width:"100%"}},Z=(0,v().YK)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function X({hasMarginTop:e=!0}){const t=(0,v().tz)(),{description:a,isDescriptionTooLong:n}=(0,o().K8)((()=>{const e=N().A.state.description;return{description:e,isDescriptionTooLong:e.length>f().z}}),[]),s=t.formatMessage(T().q.team_description_too_long,{maxTeamDescriptionLength:f().z});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(M().A,{hasMarginTop:e,children:(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,m.jsxs)(c().VP,{gap:4,grow:1,children:[(0,m.jsx)(A().A,{value:a,placeholder:k().A.formatMessage(Z.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{N().A.update((t=>({...t,description:e.target.value})))},errorOutline:n}),n?(0,m.jsx)(w().R,{id:"team-description-too-long",error:s}):void 0]})]})}function ee(e){return(0,m.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:b().Wy.semibold},children:(()=>{switch(e.screen){case N().o.Team:return(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case N().o.Members:return(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,x().HB)(e.screen)}})()})}function te(e){const t=(0,i().v3)(),{screen:a,teamId:s}=(0,o().K8)((()=>{const{screen:e,teamId:t}=N().A.state;return{screen:e,teamId:t}}),[]),r=(0,n.useCallback)(((e,a)=>{V().lJ({environment:t,from:a,teamStore:e})}),[t]);switch(a){case N().o.Team:return(0,m.jsx)(se,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case N().o.Members:return s?(0,m.jsx)(re,{teamId:s,onCompleted:e=>{r(e,"success")},onCanceled:e=>{r(e,"dismiss_button")}}):null;default:(0,x().HB)(a)}}function ae({parentSpaceStore:e,hasMarginTop:t=!0,inputStyles:a}){const n=(0,v().tz)(),s=(0,o().K8)((()=>e??P().default.state.sidebarSpaceStore),[e]),{icon:i,name:l,nameTooLong:d}=(0,o().K8)((()=>{const{icon:e,name:t}=N().A.state;return{icon:e,name:t,nameTooLong:t.length>f().Q}}),[]),u=n.formatMessage(T().q.team_name_too_long,{maxTeamNameLength:f().Q}),p=(0,r().IS)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginInlineEnd:8,marginTop:1}})),[]);if(!s)return null;const g=i?{icon:i,pointer:{table:"space",id:s.id}}:void 0;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(M().A,{hasMarginTop:t,children:(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,m.jsxs)("div",{style:p.container,children:[(0,m.jsx)(Q().x,{icon:g,size:26,style:p.icon,onChange:e=>{N().A.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:e}),(0,m.jsxs)(c().VP,{gap:4,grow:1,children:[(0,m.jsx)(A().A,{style:a,value:l,placeholder:k().A.formatMessage(Z.teamNamePlaceholder),onChange:e=>{N().A.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0}),d?(0,m.jsx)(w().R,{id:"team-name-too-long",error:u}):void 0]})]})]})}function ne(e){const t=(0,r().IS)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,m.jsx)(_().A,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case N().o.Team:return(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case N().o.Members:return null;default:(0,x().HB)(e.screen)}})()})}function se(e){const t=(0,i().v3)(),{open:a,from:s,flowId:r}=(0,o().K8)((()=>{const e=N().A.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,n.useEffect)((()=>{a&&s&&S().H8(t,{from:s,flowId:r})}),[]),(0,m.jsxs)("div",{style:J.createTeamContainer,children:[(0,m.jsx)(ee,{titleAriaId:e.titleAriaId,screen:N().o.Team}),(0,m.jsx)(ne,{descriptionAriaId:e.descriptionAriaId,screen:N().o.Team}),(0,m.jsxs)("div",{style:J.full,children:[(0,m.jsx)(ae,{parentSpaceStore:e.parentSpaceStore}),(0,m.jsx)(X,{}),(0,m.jsx)(oe,{parentSpaceStore:e.parentSpaceStore})]}),(0,m.jsx)(q,{})]})}function ie(){const e=(0,o().K8)((()=>N().A.state.loading),[]),t=(0,r().IS)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,insetInlineStart:0}})),[]);return(0,m.jsx)(m.Fragment,{children:e?(0,m.jsx)("div",{style:t.spinner,children:(0,m.jsx)(u().A,{style:{position:"absolute",top:"50%",insetInlineStart:"50%"}})}):void 0})}function oe({parentSpaceStore:e,hasMarginTop:t=!0}){const a=(0,r().IS)((e=>({openAccessMessage:{fontSize:13,color:e.text.secondary,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginInlineEnd:8},openTeamIcon:{width:24,fill:e.icon.secondary}})),[]),n=(0,R().lh)({spaceId:null==e?void 0:e.id}),s=(0,D().Gt)(n),l=(0,i().v3)(),d=(0,o().K8)((()=>{const t=e??P().default.state.sidebarSpaceStore;return t?(0,I().G)(l,t):"this workspace"}),[l,e]),{accessLevel:c,isDefault:u}=(0,o().K8)((()=>{const{accessLevel:e,isDefault:t}=N().A.state;return{accessLevel:e,isDefault:t}}),[]);return s?(0,m.jsxs)("div",{style:a.openAccessMessage,children:[(0,m.jsx)("div",{style:a.iconContainer,children:h(a.openTeamIcon)}),(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:d}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(M().A,{hasMarginTop:t,children:(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,m.jsx)(G().u,{currentAccessLevel:c,currentIsDefault:u,onChange:(e,t)=>{t?N().A.update((e=>({...e,accessLevel:"open",isDefault:t}))):N().A.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:e})]})}function re(e){const t=(0,i().v3)(),a=(0,o().uB)(void 0,B().A);(0,o().K8)((()=>{const{defaultInviteTargets:e,flowId:t}=N().A.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,inviteTargets:e})}),[a]);const n=(0,o().K8)((()=>e.parentSpaceStore??P().default.state.sidebarSpaceStore),[e.parentSpaceStore]);if(!n)return null;const s=E().h.createChildStore(n,{table:"team",id:e.teamId,spaceId:n.id});return(0,m.jsx)("div",{style:J.full,children:(0,m.jsx)("div",{style:J.addMembersContainer,children:(0,m.jsx)(Y().A,{store:s,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(s),V().L0({environment:t,teamStore:s,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(s)}})})})}const le=[p().A.images.avatars.avatar1Png,p().A.images.avatars.avatar2Png,p().A.images.avatars.avatar3Png];function de({handleModalClose:e}){const t=(0,r().IS)((e=>({container:{borderStartStartRadius:5,borderStartEndRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:b().Wy.medium},avatarGroup:{display:"flex",width:"100",marginInlineStart:4,alignSelf:"center"},avatar:{marginInlineStart:-4},message:{paddingInlineStart:14,paddingInlineEnd:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.text.secondary}})),[]);return(0,m.jsx)("div",{style:t.container,children:(0,m.jsxs)("div",{style:t.header,children:[(0,m.jsx)("div",{style:t.avatarGroup,children:le.map(((e,a)=>(0,m.jsx)(C().A,{avatarShouldShowShadow:!0,style:t.avatar,size:28,avatar:{avatarUrl:e}},a)))}),(0,m.jsx)(_().A,{style:t.message,isMultiline:!0,isSmall:!0,children:(0,m.jsx)(v().sA,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,m.jsx)(l().Ay,{onClick:e,style:t.closeButton,hoveredStyle:t.closeButtonHover,children:(0,g().V)(t.closeButtonIcon)})]})})}function ce({parentSpaceStore:e}){const t=(0,i().v3)(),a=(0,n.useId)(),c=(0,n.useId)(),u=(0,r().IS)((e=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,insetInlineEnd:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.text.secondary},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),p=(0,n.useCallback)((e=>{V().lJ({environment:t,from:e})}),[t]),{open:h,loading:f,screen:v}=(0,o().K8)((()=>{const{open:e,loading:t,screen:a}=N().A.state;return{open:e,loading:t,screen:a}}),[]),x=(0,R().lh)({spaceId:null==e?void 0:e.id}),b=(0,D().Gt)(x),S=(0,n.useRef)(b);return(0,n.useEffect)((()=>{f||(S.current=b&&v===N().o.Team)}),[f,v,b]),h?(0,m.jsx)(j().a,{ariaLabelledBy:a,ariaDescribedBy:c,open:h,innerStyle:u.modal,onDismiss:()=>{p("modal")},render:()=>(0,m.jsxs)("div",{style:{height:"100%"},children:[s().A.isMobile?void 0:S.current?(0,m.jsx)(de,{handleModalClose:()=>{p("close_button")}}):(0,m.jsx)(l().Ay,{onClick:()=>{p("close_button")},style:u.closeButton,hoveredStyle:u.closeButtonHover,children:(0,g().V)(u.closeButtonIcon)}),(0,m.jsx)("div",{style:u.wrapper,children:(0,m.jsx)(d().N,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:y().D_,onLeft:y().D_,onRight:y().D_,onSelectAll:y().D_,onRedo:y().D_,onUndo:y().D_,onCut:y().D_,onCopy:y().D_,onPaste:y().D_,onKeypress:y().D_,onDelete:y().D_,onTab:y().D_,children:(0,m.jsx)(te,{titleAriaId:a,descriptionAriaId:c,parentSpaceStore:e})})}),(0,m.jsx)(ie,{})]})}):null}},112772:(e,t,a)=>{a.d(t,{o:()=>c});a(296540);var n=()=>a(56366),s=()=>a(401497),i=()=>a(987555),o=()=>a(69708),r=()=>a(898808),l=()=>a(566468),d=a(474848);function c({teamStore:e,iconSize:t=24,useThinTitle:a,showMemberCount:c,memberCountOverride:u}){const p=(0,s().IS)((e=>({icon:{height:t-4,width:t-4,color:e.icon.tertiary,fill:"currentColor"},hiddenTeamName:{color:e.text.tertiary}})),[t]),[g,m]=(0,n().K8)((()=>[null==e?void 0:e.getName(),null==e?void 0:e.getRawMembership().length]),[e]);return g?(0,d.jsx)(l().s7,{useThinTitle:a,icon:e?(0,d.jsx)(r().x,{disabled:!0,store:e,size:t}):void 0,title:g,byline:c&&void 0!==m?(0,d.jsx)(o().sA,{id:"baseTable.teamCell.memberCount",defaultMessage:"{numMembers, plural, one {# member} other {# members}}",values:{numMembers:u??m}}):null}):(0,d.jsx)(l().s7,{useThinTitle:a,icon:(0,i().T)(p.icon),title:(0,d.jsx)("span",{style:p.hiddenTeamName,children:(0,d.jsx)(o().sA,{id:"baseTable.teamCell.hiddenTeam",defaultMessage:"Hidden"})})})}},118685:(e,t,a)=>{a.d(t,{f:()=>i,o:()=>s});a(898992),a(354520),a(672577),a(803949);var n=()=>a(534177);let s=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class i extends(()=>a(757695))().Store{getAllActionNames(){return(0,n().uv)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],n=a===s.None||a===s.Partial?s.All:s.None,i=n===s.All,o={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{o[e]=i})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[r.category]:n}}))}selectActionName(e,t){const a=this.state.actionSelections[e],n={...this.state.actionSelections,[e]:!a},i=t.orderedActions.filter((e=>n[e])).length,o=0===i?s.None:i===t.orderedActions.length?s.All:s.Partial;this.setState({...this.state,actionSelections:n,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,n().uv)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,n().uv)(this.state.categorySelections),s.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},120229:(e,t,a)=>{a.d(t,{w:()=>s});var n=()=>a(401497);function s(){return(0,n().IS)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}},142448:(e,t,a)=>{a.d(t,{Gz:()=>v,Qp:()=>x,iP:()=>h,tR:()=>f});a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(611648),r=()=>a(493552),l=()=>a(591779),d=()=>a(69708),c=()=>a(710149),u=()=>a(2143),p=()=>a(859428),g=()=>a(47095),m=a(474848);const h=4,f=24,v=18,y=10;function x(e){const{avatars:t,totalCount:a,avatarLimit:f,renderOverflowTooltip:v,isLightBackground:x,avatarStyles:b,isLoading:S}=e,A=(0,g().Z)(),j=(0,i().IS)((e=>({bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row",isolation:"isolate",alignItems:"center",cursor:"default"},hiddenAvatarCount:{display:"flex",marginInlineStart:12,alignItems:"center"},scroller:{maxWidth:250,maxHeight:300,padding:0}})),[]),{pinTooltip:w,unpinTooltip:_,setImmediateState:C,isHovering:M}=function(){const[e,t]=(0,n.useState)(!1),a=(0,l().lW)(e,400,Object.is),[s,i]=(0,n.useState)(void 0),o=s||a,r=(0,n.useCallback)((()=>i(o)),[o]),d=(0,n.useCallback)((()=>{i(void 0)}),[]);return{pinTooltip:r,unpinTooltip:d,setImmediateState:t,isHovering:!1===e&&!0===o}}(),T=(0,s().K8)((()=>{let e=t;t.length>(f||h)&&(e=t.slice(0,f||h));for(const t of e)if(!t.renderAvatar)return[];return e}),[f,t]),k=(0,n.useCallback)((e=>({marginInlineEnd:e+1===T.length?0:-y,...b})),[b,T.length]);if(S)return(0,m.jsxs)("div",{style:j.bottom,children:[(0,m.jsx)("div",{style:j.userAvatarContainer,children:new Array(h).fill(null).map(((e,t)=>(0,m.jsx)(c().A,{style:{...A.avatarShimmer,...k(t)}},t)))}),(0,m.jsx)("div",{style:j.hiddenAvatarCount,children:(0,m.jsx)(c().A,{style:A.shortShimmer})})]});const I=f||h,D=(a||t.length)-I;return(0,m.jsxs)("div",{style:j.bottom,children:[(0,m.jsx)("div",{style:j.userAvatarContainer,children:T.map(((e,t)=>(0,m.jsx)(p().A,{isLightBackground:x,disableTooltip:!e.renderTooltip,delayThreshold:0,renderTooltip:e.renderTooltip??(()=>{}),placement:"bottom",alignment:"start",render:a=>(0,m.jsx)("div",{style:{zIndex:I-t,...k(t)},...a,children:e.renderAvatar()})},`avatar-${t}`)))}),D>0?(0,m.jsx)(p().A,{disableTooltip:!v,placement:"bottom",alignment:"start",style:{paddingInlineEnd:0},forceVisibleState:M||void 0,delayThreshold:0,renderTooltip:e=>v?(0,m.jsx)(u().H,{...e,onMouseEnter:w,onMouseLeave:_,type:o().A.Y,style:j.scroller,children:v(e)}):void 0,allowHover:!0,render:e=>(0,m.jsx)("div",{style:j.hiddenAvatarCount,...e,onMouseEnter:t=>{var a;C(!0),null===(a=e.onMouseEnter)||void 0===a||a.call(e,t)},onMouseLeave:t=>{var a;C(!1),null===(a=e.onMouseLeave)||void 0===a||a.call(e,t)},children:(0,m.jsx)(r().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,m.jsx)(d().sA,{defaultMessage:"+{numHiddenAvatars}",id:"settingsConsole.general.numHiddenAvatars",values:{numHiddenAvatars:D.toLocaleString()}})})}),isLightBackground:x}):void 0]})}},144707:(e,t,a)=>{a.d(t,{u:()=>S});a(898992),a(672577),a(581454),a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(401497),o=()=>a(158115),r=()=>a(668725),l=()=>a(760217),d=()=>a(406699),c=()=>a(404277),u=()=>a(939740),p=()=>a(89924),g=()=>a(859428),m=()=>a(722872),h=()=>a(553965),f=()=>a(645109),v=()=>a(920769),y=()=>a(43450),x=()=>a(209592),b=a(474848);function S({currentAccessLevel:e,currentIsDefault:t=!1,onChange:a,teamStore:S,disabledWithRightChevron:A=!1,style:j,parentSpaceStore:w}){const{device:_}=(0,n().v3)(),C=(0,y().R)(S),M=(0,v().O)(),T=(0,i().IS)((e=>({chevron:{width:12,marginInlineStart:3,marginInlineEnd:3,fill:e.icon.tertiary},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...j},icon:{alignSelf:"center",marginTop:0}})),[j]),k=(0,s().K8)((()=>(null==S?void 0:S.isDefault())??t),[S,t]),I=k?"default":e,D=(0,x().Z)({teamStore:S,onChange:a,isDefault:k,parentSpaceStore:w});return(0,b.jsx)(d().A,{popupType:_.isMobile?d().z.SlideUp:d().z.Popup,renderOrigin:e=>{const t=D.find((e=>e.key===I));if(!t)return null;const a=t.disableAllOptionsTooltip,n=A||Boolean(a)||Boolean(S)&&!C;return(0,b.jsx)(g().A,{placement:"bottom",alignment:"start",disableTooltip:!a||!C,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,b.jsx)(l().A,{...(0,h().A)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:T.icon,disabled:n,right:A?(0,o().arrowChevronSingleRightFillSmallIcon)(T.chevron):n?void 0:(0,r().b)(T.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:T.selectedButton})})},placementToOrigin:"bottom",alignmentToOrigin:"start",sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,b.jsx)(p().A,{...e,topBorder:0!==e.index}),items:D.map((t=>{const a=t.key===I;return{key:t.key,render:e=>(0,b.jsx)(g().A,{placement:"top",disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:n=>(0,b.jsx)(l().A,{...(0,h().A)(e,n),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:T.icon,isChecked:a,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))},...M?[{key:"try private teamspaces",render:()=>(0,b.jsx)(f().c,{openedFrom:"business_trial_private_teamspaces_upsell",styleOverrides:{margin:"4px 12px 12px 12px"}}),items:[]}]:[]];return(0,b.jsx)(c().A,{menuType:m().gu.Popup,children:(0,b.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:t})})}})}},146869:(e,t,a)=>{a.d(t,{g:()=>n});const n="space-id"},157529:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(584262),r=()=>a(926401),l=()=>a(500066),d=()=>a(296798),c=()=>a(187820),u=()=>a(16006),p=()=>a(492414),g=()=>a(553965),m=()=>a(915019),h=()=>a(404141),f=a(474848);function v(e){const{store:t,style:a,hideIcon:v}=e,y=(0,s().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,p().J8)({store:t,pageVisitSource:o().y8.SiteSettings})}}),[t]),x=(0,n.useCallback)((e=>{e.metaKey||h().A.setState({...h().A.state,open:!1})}),[]),b=(0,i().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.palette.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginInlineEnd:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,insetInlineEnd:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingInlineEnd:4,paddingInlineStart:4,...a},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[a]);if(!t||!y)return null;const S=(0,f.jsxs)("div",{style:b.pageRecordContainer,children:[v?void 0:(0,f.jsxs)("div",{style:b.iconContainer,children:[y.icon?(0,f.jsx)(c().B6,{icon:y.icon,store:t,disabled:!0,size:16,isEmptyPage:y.isEmptyPage,emojiSize:20}):(0,r().n)(b.emptyPageIcon),(0,l().G)(b.linkIcon)]}),(0,f.jsx)(u().A,{store:t,style:b.pageTitle})]});return(0,f.jsx)("div",{style:b.container,children:(0,f.jsx)(m().A,{store:t,render:e=>(0,f.jsx)(d().A,{href:null==y?void 0:y.url,style:b.linkBox,...(0,g().A)(e,{onClick:x}),children:S})})})}},175458:(e,t,a)=>{a.d(t,{a:()=>u});a(296540);var n=()=>a(401497),s=()=>a(416845),i=()=>a(69708),o=()=>a(100622),r=()=>a(284371),l=()=>a(298697),d=()=>a(125565),c=a(474848);function u({icon:e,iconStyles:t,textStyles:a,style:u,title:p,byline:g,loading:m,error:h}){const f=function(e,t,a){return(0,n().IS)((n=>({title:{fontWeight:r().Wy.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:r().J.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:n.text.tertiary,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${n.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:o().Tj.red}})),[e,t,a])}(t,a,u);return m?(0,c.jsx)("div",{style:f.container,children:(0,c.jsxs)("div",{style:f.textContainer,children:[(0,c.jsx)("div",{style:f.loadingTitle,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),g?(0,c.jsx)("div",{style:f.loadingByline,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):h?(0,c.jsx)("div",{style:f.container,children:(0,c.jsx)("div",{style:f.titleContainer,children:(0,c.jsx)(d().A,{style:f.errorTitle,children:(0,s().op)(h)?h.message:(0,c.jsx)(i().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:f.container,children:[e?e(f.icon):null,(0,c.jsxs)("div",{style:f.textContainer,children:[(0,c.jsx)(d().A,{style:f.title,showTooltipWhenTruncated:!0,children:p}),g?(0,c.jsx)(d().A,{style:f.byline,isMultiline:!0,children:g}):null]})]})}},189157:(e,t,a)=>{a.d(t,{A:()=>s});class n extends(()=>a(757695))().Store{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const s=new n},194763:(e,t,a)=>{a.d(t,{A:()=>s});class n extends(()=>a(757695))().Store{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const s=n},204486:(e,t,a)=>{a.d(t,{Zy:()=>O,PD:()=>z});var n=a(296540),s=()=>a(564884),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(699143),d=()=>a(252291),c=()=>a(406094),u=()=>a(493552),p=()=>a(529099),g=()=>a(86168),m=()=>a(962750),h=()=>a(706250),f=()=>a(762433),v=()=>a(69708),y=()=>a(191197),x=()=>a(209660),b=()=>a(231297),S=()=>a(755199),A=()=>a(843014),j=()=>a(460292),w=()=>a(953006),_=()=>a(21140),C=()=>a(152197),M=()=>a(240865),T=()=>a(300789),k=()=>a(51367),I=()=>a(765957),D=()=>a(19575),N=()=>a(991249),P=()=>a(324561),E=()=>a(807778),B=()=>a(329304),R=()=>a(979340),V=()=>a(803025);var L=()=>a(898255),F=a(474848);function O({currentSettingsTab:e}){var t;const a=(0,i().v3)(),m=(0,r().IS)((e=>({aiIcon:{width:16,height:16,color:e.purple.icon.accentPrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",paddingTop:0,paddingInlineEnd:12,paddingBottom:0,paddingInlineStart:10,justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.border.primary}`,backgroundColor:e.background.secondary},stickyContainer:{position:"sticky",bottom:0,zIndex:1,borderTop:`1px solid ${e.border.secondary}`,backgroundColor:e.background.secondary,maxHeight:"65px"}})),[]),y=(0,C().r)(),b=(0,P()._3)({spaceId:y}),S=function(){const e=(0,V().q)(),t=(0,C().r)(),a=(0,P().lh)({spaceId:t}),n=(0,M().V)()??1;return"sales_eligible"===e&&(a&&(0,f().Fq)(a)&&!(0,R().sP)((0,f().AI)(a))||n>5)}(),w=(0,M().V)(),[_,k]=n.useState(!1);(0,n.useEffect)((()=>{void 0===b||_||k(!0)}),[b,_]);const I=(0,o().K8)((()=>(0,E().VJ)({memberCount:w,billingData:b,environment:a})),[w,b,a])&&"settings"!==e;(0,n.useEffect)((()=>{I&&(0,L().DW)(a)}),[I,a]);const O=(0,B()._X)({name:"ai_usage",amount:"unknown",spaceId:y,userId:null===(t=a.currentUser)||void 0===t?void 0:t.id}),z=function(e){return void 0!==e&&!(0,f().TB)(e)&&(0,f().Gm)(e)}(b)&&!(0,B().e2)(O)&&!["plans","billing"].includes(e),U=n.useMemo((()=>_?I?{onClick:()=>{y&&(0,s().u)({environment:a,event:{eventName:"click_refer_a_friend",eventProperties:{space_id:y}}}),x().Ow({currentTab:"settings"}),(0,T().wK)(a,["share_referral_link_notification_tooltip"])},text:(0,F.jsx)(v().sA,{id:"referralSettingsButton.cta.text",defaultMessage:"Refer a friend"}),icon:(0,F.jsx)(d().I,{icon:g().heartIcon,size:16})}:S?{onClick:()=>(0,D().lK)({openedFrom:"settings_sidebar"}),text:(0,F.jsx)(v().sA,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,F.jsx)(j().Q,{iconGroup:h().z,colorVariant:"primary",variantName:"default"})}:void 0!==(null==O?void 0:O.upsell)&&z?{onClick:()=>{(0,N().K)(a,{from:"ai_upsell_settings",upsell:O.upsell})},text:(0,F.jsx)(v().sA,{...A().D.getNotionAI}),icon:(0,p().aiFaceIcon)(m.assistantIcon)}:null:null),[_,S,z,null==O?void 0:O.upsell,m,a,I,y]);return U?(0,F.jsx)(l().Y1,{direction:"vertical",padding:16,align:"center-left",style:m.stickyContainer,children:(0,F.jsxs)(c().A,{size:"lg",onClick:U.onClick,style:m.buttonStyle,children:[U.icon,(0,F.jsx)(u().D,{styleKey:"Body/Medium",children:U.text})]})}):null}function z(e){const{origin:t}=e,a=(0,i().v3)(),s=(0,o().O$)(I().AppStoreCurrentUserSettingsStore);(0,n.useEffect)((()=>{s&&function(e,t){const{userSettingsStore:a}=t;b().createAndCommit({environment:e,userAction:"ShareReferralLinkNotificationTooltip.setShareReferralLinkNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{S().mJ({userSettingsStore:a,transaction:e,data:{share_referral_link_notification_seen_at:Date.now()}})}})}(a,{userSettingsStore:s}),y().i(a,{from:"share_referral_link_notification"})}),[a,s]),(0,n.useEffect)((()=>{k().DL(a,{callout_key:"share_referral_link_notification_tooltip",placement_key:"Tooltip"})}),[a]);const r=(0,n.useCallback)((()=>{T().a(a,"share_referral_link_notification_tooltip"),y().z(a,{from:"share_referral_link_notification"}),k().Sq(a,{callout_key:"share_referral_link_notification_tooltip",dismiss_type:"tooltip_dismiss",placement_key:"Tooltip"})}),[a]);return(0,F.jsx)(w().k,{style:{width:270},showPointer:!1,pointerOffset:8,origin:t,placementToOrigin:"bottom",alignmentToOrigin:"center",header:(0,F.jsxs)(_().wt,{gap:8,children:[(0,F.jsx)(d().I,{icon:m().heartSmallIcon,size:16}),(0,F.jsx)(v().sA,{id:"ShareReferralLinkNotificationTooltip.header",defaultMessage:"Share your unique referral link"})]}),content:(0,F.jsx)(u().D,{colorPalette:"gray",colorVariant:"inverseSecondary",children:(0,F.jsx)(v().sA,{id:"ShareReferralLinkNotificationTooltip.content",defaultMessage:"Refer 3 people to Notion this month and get the Plus plan 50% off for one year"})}),onCloseClick:r})}},205618:(e,t,a)=>{a.d(t,{A:()=>s});class n extends(()=>a(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",table:a(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const s=n},207583:(e,t,a)=>{a.d(t,{F:()=>s});a(296540);var n=a(474848);const s=(0,a(340498).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},208261:(e,t,a)=>{a.d(t,{h:()=>u});a(296540);var n=()=>a(401497),s=()=>a(278238),i=()=>a(69708),o=()=>a(859428),r=()=>a(453697),l=()=>a(731736),d=()=>a(142448),c=a(474848);function u({permissionGroup:e,hasTooltip:t,type:a="avatar"}){const{group:u,memberCount:p}=e,g=u.name,m=u.space_id,h=u.icon,{tooltipTextStyle:f,tooltipAvatarContainer:v,tooltipContainer:y,tooltipUserInfoContainer:x}=(0,r().n)(),b=(0,n().IS)((e=>({iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,insetInlineStart:0,insetInlineEnd:0,background:e.background.primary,zIndex:1,borderRadius:"100%"},icon:{position:"relative",zIndex:2,height:d().tR,width:d().tR,background:h&&(0,s().T8)(h)?(0,s().ez)({icon:h,mode:e.mode,useLightGrayColor:!1}):e.palette.gray[75]}})),[h]),S=e=>(0,c.jsxs)("div",{style:b.iconContainer,...e,children:[(0,c.jsx)(l().e,{icon:h,spaceId:m,size:d().Gz,containerStyles:b.icon}),(0,c.jsx)("div",{style:b.iconBackground})]}),A=e=>(0,c.jsxs)("div",{style:y,children:[(0,c.jsx)("div",{style:v,children:S()}),(0,c.jsxs)("div",{style:x,children:[g,e?void 0:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)("span",{style:f,children:(0,c.jsx)(i().sA,{id:"organization.workspace.teamspaces.groupAvatar.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:p}})})]})]})]});return t?(0,c.jsx)(o().A,{renderTooltip:()=>A("avatar-name"===a),placement:"bottom",alignment:"start",render:e=>S(e)}):"avatar-name"===a||"avatar-name-count"===a?A("avatar-name"===a):(0,c.jsx)("div",{children:S()})}},209592:(e,t,a)=>{a.d(t,{Z:()=>S});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(401497),o=()=>a(12193),r=()=>a(90907),l=()=>a(835607),d=()=>a(737693),c=()=>a(340498),u=()=>a(468006),p=()=>a(69708),g=()=>a(100622),m=()=>a(665381),h=()=>a(765957),f=()=>a(991249),v=a(474848);const y=function({tier:e}){const t=()=>"business"===e?(0,v.jsx)(p().sA,{id:"upgradeToBusinessBadge",defaultMessage:"Business"}):(0,v.jsx)(p().sA,{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return(0,v.jsx)(a(824160).A,{children:(0,v.jsx)(t,{})})};var x=()=>a(233510),b=()=>a(976519);function S({teamStore:e,isDefault:t,onChange:a=(()=>{}),parentSpaceStore:S}){const j=(0,n().v3)(),w=(0,b().q)(null==e?void 0:e.id),_=(0,x().c)(S),C="business",M=(0,s().K8)((()=>S??h().default.state.sidebarSpaceStore),[S]),T=(0,s().K8)((()=>(null==M?void 0:M.canAdmin())??!1),[M]),k=(0,s().K8)((()=>{if(M)return(0,m().G)(j,M)}),[j,M]),I=(0,s().K8)((()=>{const t=null==e?void 0:e.getSettingsStore().getValue();return!!t&&"private"===(0,u().MA)(t)}),[e]),D=(0,i().IS)((()=>({icon:{width:c().Ev.default,height:c().Ev.default},iconContainer:{width:c().Ev.default,height:c().Ev.default,display:"flex",justifyContent:"center",alignItems:"center",marginInlineStart:5,marginInlineEnd:5}})),[]),N=(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),P=(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),E=(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),B=(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),R=(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),V="dark"===(0,i().eP)()?g().Tj.uiLightGray:g().Tj.black,L=[{key:"open",icon:e=>(0,v.jsx)("div",{style:D.iconContainer,children:(0,d().V)({...e,...D.icon})}),iconColor:V,level:E,title:E,caption:(0,v.jsx)(p().sA,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>a("open",!1)},{key:"closed",icon:e=>(0,v.jsx)("div",{style:D.iconContainer,children:(0,l().F)({...e,...D.icon})}),iconColor:V,level:B,title:B,caption:(0,v.jsx)(p().sA,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>a("closed",!1)},{key:"private",icon:e=>(0,v.jsx)("div",{style:D.iconContainer,children:(0,r().h)({...e,...D.icon})}),iconColor:V,level:R,title:_?R:(0,v.jsx)(A,{title:R,badge:(0,v.jsx)(y,{tier:C})}),caption:(0,v.jsx)(p().sA,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:!_&&!T,tooltip:_?void 0:N,onSelect:()=>{if(!_&&!I)return f().K(j,{from:"team_security_settings",upsell:{type:"product",product:C,limit:{type:"none"},trialability:"none"},dontOpenPlansOnCancel:!0});a("private",!1)}}];if(t||T){const e=t&&(!T||w),n={key:"default",icon:e=>(0,v.jsx)("div",{style:D.iconContainer,children:(0,o().globeIcon)({...e,...D.icon})}),iconColor:V,level:P,title:P,caption:(0,v.jsx)(p().sA,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:k}}),disabled:!1,disableAllOptionsTooltip:e?T?(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,v.jsx)(p().sA,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can’t change this setting because you are not a workspace admin"}):void 0,onSelect:()=>a("open",!0)};L.unshift(n)}return L}function A({title:e,badge:t}){const a=(0,i().IS)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginInlineStart:5}})),[]);return(0,v.jsxs)("div",{style:a.container,children:[e,(0,v.jsx)("div",{style:a.badge,children:t})]})}},218801:(e,t,a)=>{a.d(t,{p:()=>s});var n=()=>a(388821);function s(e){const{recordMapWithRoleJson:t}=e,a=n().RecordMapWithRole.create(t),s=n().RecordMapWithRole.create();for(const{pointer:n,model:i}of a)i&&s.setModelAndRole(n,i,"editor");return s}},223544:(e,t,a)=>{a.d(t,{FS:()=>J,Jo:()=>Q,tp:()=>$,uU:()=>q,v8:()=>Y});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(30537),r=()=>a(729108),l=()=>a(631524),d=()=>a(160432),c=()=>a(784892),u=()=>a(187174),p=()=>a(12193),g=()=>a(835607),m=()=>a(797561),h=()=>a(96689),f=()=>a(848538),v=()=>a(798880),y=()=>a(695608),x=()=>a(69708),b=()=>a(763824),S=()=>a(534177),A=()=>a(56394),j=()=>a(972435),w=()=>a(722872),_=()=>a(698449),C=()=>a(118789),M=()=>a(765957),T=()=>a(605402),k=()=>a(21735),I=()=>a(970585),D=()=>a(870092),N=()=>a(760217),P=()=>a(404277),E=()=>a(939740),B=()=>a(417392),R=()=>a(187820),V=()=>a(228927),L=()=>a(89924),F=()=>a(125565),O=()=>a(453697),z=()=>a(484595),U=()=>a(806754),W=()=>a(881690),H=()=>a(297780),K=a(474848);const q=(0,x().YK)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),G=10,Y={key:"no-results",action:()=>{},render:e=>(0,K.jsx)(F().A,{isSecondaryColor:!0,style:{width:"100%",margin:"8px 12px"},...e,children:(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found"})})};function Q(e){const{title:t,selectedItems:a,setSelectedItems:i,onMenuClose:h,isMultiSelect:Q,includePermissionGroups:X,includeGuests:ee}=e,te=(0,x().tz)(),ae=(0,s().uB)(void 0,I().A),ne=Z(),[se,ie]=(0,n.useState)(G),[oe,re]=(0,n.useState)(!1),[le,de]=(0,n.useState)(""),ce=(0,s().O$)(M().AppStoreSidebarSpaceStore),ue=(0,s().K8)((()=>k().A.state.shouldUseEdgeCache),[]),pe=(0,C().n)({query:le,filter:ee?void 0:f().v1,disable:!ue}),{users:ge,hasMore:me}=(0,s().K8)((()=>({users:(null==pe?void 0:pe.rowsStore.state.rows)??[],hasMore:(null==pe?void 0:pe.rowsStore.state.hasMore)??!1})),[pe]),[{value:he}]=(0,u().Yb)((async()=>{if(!ue)return e.userStores;if(!ce)return[];return await(0,b().lX)(ge,ge.length,(async e=>{const t=D().L.createChildStore(ce,{table:v().oo,id:e.id});return await t.load(),t}))}),[ue,ce,ge,e.userStores]),fe=(0,n.useMemo)((()=>ue?ee?new Set(ge.filter((e=>"page_guest"===e.membership_type)).map((e=>e.id))):new Set:e.guestUserIdSet),[ue,e.guestUserIdSet,ge,ee]),ve=(null==he?void 0:he.length)??0,ye=(0,n.useMemo)((()=>a.map((({id:e})=>e))),[a]),xe=(0,s().K8)((()=>X?T().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)):[]),[X]),be=(0,s().K8)((()=>ce?ye.map((e=>D().L.createChildStore(ce,{table:v().oo,id:e}))).filter((e=>e.isReady())):[]),[ye,ce]),Se=(0,s().K8)((()=>ye.map((e=>xe.find((t=>t.group_id===e)))).filter(S().O9)),[ye,xe]);function Ae(){ue&&(null==pe||pe.refresh()),ie(G),re(!1),de(""),h()}function je(){de(""),i([])}function we(e){ue?e<5&&me&&(null==pe||pe.loadMore()):e<5&&se<ve&&ie(se+G)}function _e(e){if(Q){return ye.includes(e.id)?[...a.filter((({id:t})=>t!==e.id))]:[...a,e]}return ye.includes(e.id)?[]:[e]}function Ce(e){const t=_e({id:e,type:"user"});i(t),de("")}function Me(e){const t=_e({id:e,type:"permission_group"});i(t),de("")}const Te=(0,n.useCallback)((e=>{de(e.target.value)}),[]),ke=(0,s().K8)((()=>be.map((e=>{const t=(0,y().c6)(te,e.getModel()),a=!!fe&&fe.has(e.id);return(0,K.jsx)(W().A,{isSingle:!0,format:c().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ye.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));i(t)},style:a?ne.guestPillContainer:ne.pillContainer,value:(0,K.jsxs)("div",{style:ne.pillContents,children:[a?(0,p().globeIcon)(ne.guestIcon):(0,K.jsx)(O().A,{userStore:e,size:16}),(0,K.jsx)(F().A,{style:ne.pillText,children:t})]})},e.id)}))),[ye,be,i,fe,ne,te]),Ie=(0,s().K8)((()=>Se.map((e=>{const t=_().Pf({intl:te,groupName:e.name});return(0,K.jsx)(W().A,{isSingle:!0,format:c().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ye.filter((t=>t!==e.group_id)).map((e=>({id:e,type:"permission_group"})));i(t)},style:ne.pillContainer,value:(0,K.jsxs)("div",{style:ne.pillContents,children:[(0,K.jsx)(R().B6,{disabled:!0,icon:e.icon&&ce?{pointer:ce.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,g().F)(ne.defaultGroupIconPill),style:ne.groupIconSpacing}),(0,K.jsx)(F().A,{style:ne.pillText,children:t})]})},e.id)}))),[ye,Se,i,ne,ce,te]);const De=(0,K.jsx)(A().A,{on:ye.length>0,icon:(0,m().personFillIcon)(ne.icon),title:t,onClick:()=>re(!0)});return(0,K.jsx)(U().A,{children:(0,K.jsx)(B().Ay,{popupType:o().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:oe,render:function(){const e=[];for(const a of he??[]){var t;const n=(0,y().c6)(te,a.getModel()),s=!!fe&&fe.has(a.id);(n.toLocaleLowerCase().includes(le)||null!==(t=a.getEmail())&&void 0!==t&&t.toLocaleLowerCase().includes(le))&&e.push({key:a.id,action:()=>Ce(a.id),render:e=>(0,K.jsx)(N().A,{...e,icon:Q?(0,K.jsx)(r().S,{checked:ye.includes(a.id),onClick:()=>Ce(a.id),size:16}):(0,K.jsx)(z().A,{isSelected:ye.includes(a.id)}),focused:!1,title:(0,K.jsx)($,{userStore:a,isGuest:s})})})}const n=[];for(const a of xe){_().Pf({intl:te,groupName:a.name}).toLocaleLowerCase().includes(le)&&n.push({key:a.id,action:()=>Me(a.group_id),render:e=>(0,K.jsx)(N().A,{...e,icon:Q?(0,K.jsx)(r().S,{checked:ye.includes(a.group_id),onClick:()=>Me(a.group_id),size:16}):(0,K.jsx)(z().A,{isSelected:ye.includes(a.group_id)}),focused:!1,title:(0,K.jsx)(J,{group:a,spaceId:null==ce?void 0:ce.id})})})}let s=[];s=ue?me?[...e]:[...e,...n]:[...e,...n].slice(0,se);const o={key:"userOptions",items:s.length>0?s:[Y],render:e=>(0,K.jsx)(L().A,{...e,title:null,loading:!1})};return(0,K.jsxs)("div",{style:ne.container,children:[(0,K.jsx)(H().A,{focus:!0,value:le,style:ne.input,placeholder:j().A.formatMessage(X?q.usersAndGroupsPlaceholder:q.usersPlaceholder),onChange:Te,onRemoveLastToken:()=>{const e=a.slice(0,-1);i(e)},tokens:[...ke,...Ie]}),(0,K.jsxs)(P().A,{menuType:w().gu.Popup,header:null,maxHeight:250,width:300,children:[(0,K.jsx)(E().Ay,{type:E().Oh.Vertical,store:ae,initialFocus:0,sections:[o]}),(0,K.jsx)(V().A,{onChange:we})]}),(0,K.jsxs)(L().A,{topBorder:!0,style:ne.footer,children:[(0,K.jsx)(l().p,{onClick:je,children:(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,K.jsx)(d().A,{colorPalette:"blue",onClick:Ae,children:(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:Ae,keepFocus:!0,origin:De,preventScaleTransition:!0,originGap:8})})}function $({userStore:e,isGuest:t}){const a=(0,x().tz)(),n=Z(),i=(0,s().K8)((()=>e.getDisplayName(a)),[e,a]);return(0,K.jsxs)("div",{style:n.optionContainer,children:[(0,K.jsx)(O().A,{userStore:e,size:24,style:n.optionAvatar}),(0,K.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,K.jsx)(F().A,{style:n.optionTitle,children:i}),(0,K.jsx)(F().A,{style:n.optionCaption,children:t?(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})}function J({group:e,spaceId:t}){const a=Z(),n=(0,x().tz)(),s=_().Pf({intl:n,groupName:e.name});return(0,K.jsxs)("div",{style:a.optionContainer,children:[(0,K.jsx)(R().B6,{disabled:!0,icon:e.icon&&t?{pointer:{id:t,table:h().NX},icon:e.icon}:void 0,size:22,isEmptyPage:!1,title:s,defaultIcon:(0,g().F)(a.defaultGroupIcon),style:a.groupIconSpacing}),(0,K.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,K.jsx)(F().A,{style:a.optionTitle,children:s}),(0,K.jsx)(F().A,{style:a.optionCaption,children:(0,K.jsx)(x().sA,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})}function Z(){return(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginInlineEnd:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginInlineEnd:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.text.secondary,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.text.secondary,fill:"currentColor"},groupIconSpacing:{marginInlineEnd:8},pillContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginInlineStart:4},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[])}},229907:(e,t,a)=>{a.d(t,{lT:()=>d});a(944114);var n=()=>a(906745),s=()=>a(720665),i=()=>a(416845);const o=7;function r(e,t){if(void 0===e)return n().c9.utc();const a={zone:t||"utc"};return"number"==typeof e?n().c9.fromMillis(e,a):n().c9.fromISO(e,a)}function l(e,t){const a=t?r(t):n().c9.utc(),s=r(e??function(e){const{days:t,endDate:a,startDate:n,timezone:s}=e;if(t<=0)throw new(i().yI)("Days must be greater than 0");const o=r(a||void 0,s);if(!o.isValid)throw new(i().yI)(`endDate ${a} is in an invalid format`);const l=n?r(n,s).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!s.isValid)throw new(i().yI)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(i().yI)(`endDate ${t} is in an invalid format`);if(s>a)throw new(i().yI)(`startDate ${e} => ${s.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:s.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:n}=l(e,t),i=[];let o=a;for(;o<=n;)i.push(r(o,void 0).toISODate()),o+=s().nD;return i}},230357:(e,t,a)=>{a.d(t,{A:()=>r,_:()=>l});a(581454),a(814603),a(147566),a(198721);var n=()=>a(604995),s=()=>a(348564),i=()=>a(30731);class o extends(()=>a(757695))().Store{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:s().K7.CreatedNewest}}}const r=new o;function l(e){const{timeRange:t,actors:a,actions:o,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${n().C6.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${n().C6.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(i().Ht).join(",")),(null==o?void 0:o.length)>0&&l.append("actions",o.join(",")),l.append("sort",`${r||s().K7.CreatedNewest}`),l.toString()}},233510:(e,t,a)=>{a.d(t,{Z:()=>c,c:()=>d});var n=()=>a(56366),s=()=>a(979340),i=()=>a(809730),o=()=>a(765957),r=()=>a(324561),l=()=>a(807778);function d(e){const t=(0,n().O$)(o().AppStoreSidebarSpaceStore),a=e??t;return(0,n().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,s().rV)(e,"business")}),[a])}function c(){const e=(0,n().O$)(o().AppStoreSidebarSpaceStore),t=(0,r().lh)({spaceId:null==e?void 0:e.id});return(0,n().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,l().hG)()&&(0,s().rV)(a,"business")||(0,i().e)({billingData:t})}),[e,t])}},246682:(e,t,a)=>{a.d(t,{e:()=>V});a(898992),a(672577);var n=a(296540),s=()=>a(401497),i=()=>a(378815),o=()=>a(892936),r=()=>a(582684),l=()=>a(69708),d=()=>a(56394),c=()=>a(406699),u=()=>a(417392),p=(a(354520),a(581454),()=>a(493552)),g=()=>a(617668),m=()=>a(236262),h=()=>a(534177),f=()=>a(722872),v=()=>a(760217),y=()=>a(439264),x=()=>a(404277),b=()=>a(89924),S=()=>a(835195),A=()=>a(301524),j=()=>a(541558),w=()=>a(678553),_=()=>a(933117),C=()=>a(272630),M=()=>a(992510),T=()=>a(490094),k=a(474848);function I({sort:e,sortProperties:t,onChange:a,currentSorts:n}){const i=(0,s().IS)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{paddingTop:8,paddingInlineEnd:0,paddingBottom:0,paddingInlineStart:8,width:"100%"}})),[]);if(!e)return null;return(0,k.jsx)(b().A,{extraTopPadding:!0,style:i.section,children:(0,k.jsx)(w().Ay,{showDragHandle:!0,title:(0,k.jsxs)("div",{style:i.sortRow,children:[(0,k.jsx)(N,{currentPropertyId:e.propertyId,sortProperties:t,currentSorts:n,onChange:a}),(0,k.jsx)(D,{sort:e,currentSorts:n,onChange:a})]}),right:(0,k.jsx)(A().B,{onDeleteClick:()=>{const t=n.filter((({propertyId:t})=>t!==(null==e?void 0:e.propertyId)));a(t)}}),rightStyle:{marginInlineEnd:19}})})}function D({sort:e,onChange:t,currentSorts:a}){const n=(0,l().tz)(),s=e.direction;return(0,k.jsx)(_().A,{menuTitle:n.formatMessage(j().CL.menuTitle),items:[...S().FU],selectedItem:s,onSelect:n=>{const s=a.map((t=>t.propertyId===e.propertyId?{...t,direction:n}:t));t(s)},getKey:e=>e,renderItem:e=>(0,k.jsx)(v().A,{title:j().bL[e.value],...e}),renderOrigin:e=>(0,k.jsx)(C().A,{...e,placeholder:n.formatMessage(j().CL.emptyPlaceholder),title:s&&j().bL[s],desktopStyle:{opacity:1}})},"direction")}function N({currentPropertyId:e,sortProperties:t,currentSorts:a,onChange:n}){const s=t.find((t=>t.id===e));return s?(0,k.jsx)(c().A,{popupType:c().z.Popup,renderOrigin:e=>(0,k.jsx)(M().A,{...e,disabled:a.length===t.length,propertySchema:s,textWrapperStyle:{opacity:1}}),render:({close:s})=>(0,k.jsx)(T().J,{onClick:t=>{(t=>{const s=a.map((a=>a.propertyId===e?{propertyId:t,direction:a.direction}:a));n(s)})(t),s()},currentSorts:a,sortProperties:t})}):null}function P({sortProperties:e,currentSorts:t,onChange:a,preventMultipleSorts:n}){const s=t.map((e=>e.propertyId));return(0,k.jsxs)(x().A,{menuType:f().gu.Popup,minWidth:320,children:[(0,k.jsx)(y().Ay,{direction:"vertical",keys:s,renderKey:n=>(0,k.jsx)(I,{sortProperties:e,onChange:a,currentSorts:t,sort:t.find((e=>e.propertyId===n))}),onDrop:e=>function(e,t,a){const n=e.map((e=>a.find((t=>t.propertyId===e)))).filter(h().O9);t(n)}(e,a,t)}),(0,k.jsxs)(b().A,{children:[n?null:(0,k.jsx)(E,{sortProperties:e,currentSorts:t,onChange:a}),(0,k.jsx)(B,{currentSorts:t,onChange:a})]})]})}function E({sortProperties:e,currentSorts:t,onChange:a}){const n=R();if(!(t.length<e.length))return null;return(0,k.jsx)(c().A,{popupType:u().nl.Popup,renderOrigin:e=>(0,k.jsx)(v().A,{focused:!1,icon:(0,g().plusIcon)(n.icon),title:(0,k.jsx)(p().D,{colorVariant:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:({close:n})=>(0,k.jsx)(T().J,{sortProperties:e,currentSorts:t,onClick:e=>{a([...t,{propertyId:e,direction:"ascending"}]),n()}})})}function B({currentSorts:e,onChange:t}){const a=R();return e.length>0?(0,k.jsx)(v().A,{focused:!1,icon:(0,m().trashIcon)(a.icon),title:(0,k.jsx)(p().D,{colorVariant:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>t([])}):null}function R(){return(0,s().IS)((e=>({icon:{width:24,height:16,marginInlineEnd:-2,fill:e.icon.secondary}})),[])}function V(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:p,sortProperties:g,onApply:m,preventMultipleSorts:h}=e,f=(0,s().IS)((e=>({sortDirectionIcon:{width:12,height:22,marginInlineEnd:6,fill:"currentColor"},multiSortIcon:{width:16,height:22,marginInlineEnd:6,fill:"currentColor"},empty:{height:24}})),[]),[v,y]=(0,n.useState)(t.length?t:void 0),x=v??t;let b,S;if(1===x.length){var A;const e=x[0];b="ascending"===e.direction?(0,o().arrowStraightUpFillIcon)(f.sortDirectionIcon):(0,i().arrowStraightDownFillIcon)(f.sortDirectionIcon),S=null===(A=g.find((t=>t.id===e.propertyId)))||void 0===A?void 0:A.name}else b=(0,r().arrowUpDownIcon)(f.multiSortIcon),S=(0,k.jsx)(l().sA,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:x.length}});const j=x.length||a?(0,k.jsx)(d().A,{on:x.length>0,icon:b,title:S,onClick:()=>p(!0)}):(0,k.jsx)("div",{style:f.empty});return(0,k.jsx)(u().Ay,{popupType:c().z.Popup,open:a,origin:j,onDismiss:()=>{m(x),y(void 0),p(!1)},originGap:4,render:()=>(0,k.jsx)(P,{...e,preventMultipleSorts:x.length>0&&h,onChange:y,currentSorts:x})})}},254685:(e,t,a)=>{a.d(t,{N:()=>Y,A:()=>G});a(581454);var n=a(296540),s=()=>a(968526),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(301608),d=()=>a(69708),c=()=>a(100622),u=()=>a(284371),p=()=>a(76590),g=()=>a(593467),m=()=>a(59976),h=()=>a(972435),f=()=>a(232930),v=()=>a(997583),y=()=>a(311670),x=()=>a(298697),b=()=>a(859428),S=()=>a(125565),A=()=>a(690197),j=()=>a(5347),w=()=>a(452864),_=()=>a(249117),C=()=>a(655546),M=()=>a(175458),T=()=>a(733815),k=()=>a(82139),I=a(474848);const D=640;function N({data:e,loading:t,error:a,daysFilter:n,setDaysFilter:s}){const[i,o]=(0,v().z)(),c=(0,r().IS)((e=>({title:{fontWeight:u().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginInlineStart:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:p,previousActiveMembersCount:g,activeGuestsCount:m,previousActiveGuestsCount:y}=e;return(0,I.jsxs)("div",{style:c.container,ref:i,children:[(0,I.jsxs)("div",{style:c.titleContainer,children:[(0,I.jsxs)(S().A,{style:c.title,children:[(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,I.jsx)(b().A,{placement:"bottom",render:e=>(0,I.jsx)(A().A,{...e,href:(0,f().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:c.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[n])}}):(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,I.jsx)(T().Z,{currentFilter:n,onChangeFilter:s})]}),(0,I.jsxs)(_().xA,{gap:16,children:[(0,I.jsx)(_().LX,{row:1,col:1,children:(0,I.jsx)(M().a,{style:c.summaryCard,loading:t,error:a,title:(0,I.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,I.jsx)(C()._,{abbreviateNumber:o<D,num:p})}}),byline:void 0!==g?(0,I.jsx)(k().Z,{userType:"members",daysFilter:n,count:p,previousCount:g}):null})}),(0,I.jsx)(_().LX,{row:1,col:2,children:(0,I.jsx)(M().a,{style:c.summaryCard,loading:t,error:a,title:(0,I.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,I.jsx)(C()._,{abbreviateNumber:o<D,num:m})}}),byline:void 0!==y?(0,I.jsx)(k().Z,{userType:"guests",daysFilter:n,count:m,previousCount:y}):null})})]})]})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var P=()=>a(187174),E=()=>a(386164),B=()=>a(848538),R=()=>a(559506),V=()=>a(646736),L=()=>a(765957),F=()=>a(641300),O=()=>a(882690);const z=(0,d().YK)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),U=(0,d().YK)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),W={user:{id:"user",renderCell:function(e){const{userStore:t,role:s}=e,i=(0,r().IS)((e=>({container:{height:52}})),[]);(0,n.useEffect)((()=>{t.load()}),[t]);return(0,o().K8)((()=>t.isReady()),[t])?(0,I.jsx)(a(623742).A,{containerStyle:i.container,actorStore:t,spaceRole:s&&(0,B().jM)(s)}):(0,I.jsx)(a(236527).a,{})},headerTitle:h().A.formatMessage(U.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,n=(0,r().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.icon.tertiary}})),[]);if(void 0===t)return(0,I.jsx)(b().A,{placement:"bottom",render:e=>(0,I.jsx)("div",{...e,children:(0,a(207583).F)(n.eyeHideIcon)}),renderTooltip:e=>(0,I.jsx)(d().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,I.jsx)(S().A,{children:t})},headerTitle:(0,I.jsx)(O().Z,{tooltipMessageDescriptor:z.page_views,columnHeader:U.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,I.jsx)(S().A,{children:t})},headerTitle:(0,I.jsx)(O().Z,{tooltipMessageDescriptor:z.page_edits,columnHeader:U.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let n;n=t?(0,I.jsx)(a(625383).d,{dateTs:t}):(0,I.jsx)(S().A,{isSecondaryColor:!0,children:(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,I.jsx)("div",{children:n})},headerTitle:h().A.formatMessage(U.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:n,role:s,userPermissionGroupIds:i}=e;if(!s)return(0,I.jsx)(S().A,{children:(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,I.jsx)(a(37625).Ay,{teamStores:t,memberId:n.id,userPermissionGroupIds:i})},headerTitle:h().A.formatMessage(U.teams),widthData:{width:50},sortable:!1}};const H=(0,a(534177).uv)(W).map((e=>W[e])),K=25;function q(e){const t=(0,i().v3)(),[a,s]=(0,n.useState)(K),{teamStores:u,usersAndStats:g,filter:m,onUserTabFilterChange:h,usersAndStatsError:f}=e,{userRoles:v,spaceId:y}=(0,o().K8)((()=>{const{sidebarSpaceStore:e}=L().default.state,t=g.map((e=>e.userStore.id)),a=null==e?void 0:e.id,n={};for(const s of t){const t=(0,V().sE)(e,s),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,B().C4)(a);n[s]=e}}return{userRoles:n,spaceId:a}}),[g]),[{value:x}]=(0,P().Yb)((async()=>{if(void 0===y)return{};const e=await R().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:y,userIds:g.map((e=>e.userStore.id))},headers:(0,E().WS)({cellId:void 0,spaceId:y})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,y,g],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[b,A]=(0,n.useState)({column:W.last_active,sortAscending:!1}),j=(0,n.useCallback)((e=>{p().Jv(t,{column:e.column.id,isAscending:e.sortAscending}),A(e)}),[A,t]),w=g.map((({userStore:e,stats:t})=>({id:t.userId,userStore:e,teamStores:u,isClickable:!1,last_active:t.lastActive,page_views:t.numPageViews,page_edits:t.numPageEdits,role:v[t.userId],userPermissionGroupIds:new Set((null==x?void 0:x[t.userId])||[])}))).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l().mj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l().xV)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(b)),_=(0,n.useMemo)((()=>w.slice(0,a)),[w,a]),C=(0,r().IS)((e=>({error:{color:c().Tj.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginInlineEnd:5}})),[]);const M=(0,n.useCallback)((e=>{p().Jy(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),k=(0,r().IS)((e=>(0,F().rC)({columnRenderInfo:H,theme:e,containerMarginTop:0})),[]);return(0,I.jsxs)(I.Fragment,{children:[f?(0,I.jsx)(S().A,{isMultiline:!1,style:C.error,children:f}):void 0,(0,I.jsxs)("div",{style:C.dateFilterPill,children:[(0,I.jsx)(S().A,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,I.jsx)(d().sA,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,I.jsx)(T().Z,{currentFilter:m,onChangeFilter:M})]}),(0,I.jsx)(F().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:b,onSortStateChanged:j,columnRenderInfo:H,rows:_,renderNoRowsComponent:()=>(0,I.jsx)("div",{children:"N/A"}),styles:k,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<g.length&&s(a+K)}}})]})}function G({spaceStore:e,teamStores:t,usersTabData:a,onUserTabFilterChange:s,userEngagement:c}){var m,x;const[_,C]=(0,v().z)(),M=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16},sectionTitle:{fontWeight:u().Wy.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"}})),[]),T=(0,i().v3)(),k=(0,d().tz)(),D=(0,n.useCallback)((e=>{p().wy(T,{daysFilter:e});s({graphFilter:"all_time"===e?"last_90_days":e}),c.setDaysFilter(e)}),[s,c,T]),P=(0,o().K8)((()=>e.getName()),[e]);if("NotFoundError"===(null==a||null===(m=a.usersAndStatsError)||void 0===m?void 0:m.name)||"NotFoundError"===(null===(x=c.error)||void 0===x?void 0:x.name))return(0,I.jsx)(w().H,{type:"empty",spaceName:P});const E=Math.floor(C-8);return(0,I.jsxs)("div",{style:M.container,children:[(0,I.jsx)(N,{data:c.data,loading:c.loading,error:c.error,daysFilter:c.daysFilter,setDaysFilter:D}),(0,I.jsx)(Y,{usersTabData:a,daysFilter:c.daysFilter,intl:k,containerRef:_,widthOfGraph:E}),(0,I.jsxs)("div",{style:M.tableHeader,children:[(0,I.jsxs)("div",{style:M.sectionTitleLeft,children:[(0,I.jsx)(S().A,{style:M.sectionTitle,children:(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,I.jsx)(b().A,{placement:"bottom",render:e=>(0,I.jsx)(A().A,{...e,href:(0,f().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:M.helpInfo}),renderTooltip:()=>a&&"all_time"!==a.tableFilter?(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[a.tableFilter])}}):(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),a?(0,I.jsx)(j().L,{analyticsType:y().e.Users,filters:{daysFilter:a.tableFilter}}):null]}),a?(0,I.jsx)(q,{teamStores:t,filter:a.tableFilter,usersAndStats:a.usersAndStats,onUserTabFilterChange:s,usersAndStatsError:a.usersAndStatsError&&g().fP(a.usersAndStatsError,k)}):null]})}function Y({usersTabData:e,daysFilter:t,containerRef:a,widthOfGraph:n,intl:s,displayBoxStyle:i,graphTitleStyle:o}){return(0,I.jsx)(Q,{style:i,children:(0,I.jsx)("div",{ref:a,children:e?(0,I.jsx)($,{width:n,dailyUsersData:e.dailyUsersData,userEngagementDaysFilter:t,daysFilter:e.graphFilter,dailyUsersError:e.dailyUsersError&&g().fP(e.dailyUsersError,s),graphTitleStyle:o}):(0,I.jsx)(J,{})})})}function Q(e){const t=(0,r().IS)((t=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${t.regularDividerColor}`,backgroundColor:t.background.primary,color:t.text.primary,padding:20,...e.style}})),[e.style]);return(0,I.jsx)("div",{style:t.border,children:e.children})}function $(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:n,daysFilter:i,dailyUsersError:p}=e,g=(0,r().IS)((t=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u().J.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},helpInfo:{marginInlineStart:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c().Tj.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:v}=(0,s().useTimeSeriesPalette)(),y=(0,o().K8)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),x=(0,o().K8)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let j;return j=!y||a.length<3?(0,I.jsx)("div",{style:g.emptyGraphBody,children:(0,I.jsx)(S().A,{isSecondaryColor:!0,children:(0,I.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,I.jsx)(m().b,{startDate:y.startDate,endDate:y.endDate,width:t,data:x,height:300,layers:[{key:"active_members",...v,renderLabel:e=>(0,I.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,I.jsx)("div",{style:g.graphSubLabel,children:(0,I.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[i])}})})}),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:g.graphHeader,children:(0,I.jsxs)(S().A,{style:g.graphTitle,children:[(0,I.jsx)(d().sA,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===n?(0,I.jsx)(b().A,{placement:"bottom",render:e=>(0,I.jsx)(A().A,{...e,href:(0,f().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>(0,I.jsx)(d().sA,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})}):void 0]})}),p?(0,I.jsx)(S().A,{isMultiline:!1,style:g.error,children:p}):void 0,j]})}function J(){return(0,I.jsxs)("div",{children:[(0,I.jsx)(x().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,I.jsx)(x().A,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},261505:(e,t,a)=>{a.r(t),a.d(t,{closeBusinessOfferLossAversionModal:()=>w,closeBusinessTrialEndingModal:()=>b,closeBusinessTrialExplorePlanModal:()=>C,closeBusinessTrialLossAversionModal:()=>A,closeBusinessTrialStartModal:()=>v,createBusinessTrial:()=>M,determineMessageEligibility:()=>I,determineShouldShowTrialEndingModal:()=>D,getBusinessTrialUsingOffersReceived:()=>T,getTrialNudgeMessageKeyForDayWithOffer:()=>k,openBusinessOfferLossAversionModal:()=>j,openBusinessTrialEndingModal:()=>y,openBusinessTrialExplorePlanModal:()=>_,openBusinessTrialLossAversionModal:()=>S,openBusinessTrialStartModal:()=>f,updateBusinessTrialEndingModalState:()=>x});a(16280);var n=()=>a(906745),s=()=>a(386164),i=()=>a(762433),o=()=>a(323063),r=()=>a(166386),l=()=>a(61844),d=()=>a(934068),c=()=>a(559506),u=()=>a(848701),p=()=>a(30858),g=()=>a(55334),m=()=>a(981046),h=()=>a(348046);function f(e){g().HL.setState({open:!0,...e})}function v(){g().HL.update((e=>({...e,open:!1})))}function y(e){g()._i.update((()=>({modalState:"initial",...e,open:!0})))}function x(e){g()._i.update((t=>({...t,modalState:e})))}function b(){g()._i.update((e=>({...e,open:!1,modalState:"initial"})))}function S(e){g().BS.setState({...e,open:!0})}function A(){g().BS.update((e=>({...e,open:!1})))}function j(e){g().nK.setState({...e,open:!0})}function w(){g().nK.update((e=>({...e,open:!1})))}function _(e){g().jz.setState({open:!0,...e})}function C(){g().jz.update((e=>({...e,open:!1})))}async function M(e){var t;const{billingData:a,environment:s,spaceStore:i,from:r,memberCount:l,prices:d,offerToApply:c}=e;if(!(i&&r&&a&&void 0!==l&&c))return{success:!1,error:"Invalid arguments"};const u=e.nowForTesting??n().c9.now(),g=l,f={product:"business",interval:"month",currency:m().A.state.selectedCurrencyCode??"USD"},v=(0,o().vk)(d,f),y=(0,o().vH)({items:(null===(t=a.subscription)||void 0===t?void 0:t.items)??[],trialEnd:u.plus({days:(0,p().s1)(c)})},{price:v,quantity:g}),x=c.campaign;try{return await(0,h().updateSubscription)({environment:s,spaceStore:i,from:r,desiredState:y,trialData:{id:x,from:r}}),{success:!0,error:void 0}}catch(b){return{success:!1,error:b instanceof Error?b.message:void 0}}}async function T(e){const{billingData:t,environment:a,spaceStore:n}=e,o=n.getSpaceId();if(!t||!(0,i().TB)(t)||!n.canAdmin())return;const r=await c().callApi({eventName:"getCustomerOffersReceived",environment:a,data:{spaceId:o},headers:(0,s().WS)({cellId:void 0,spaceId:o})});return"failed"!==r.type?(0,l().Jd)(r.data):void 0}async function k(e){const{currentTrialDayElapsed:t,environment:a,billingData:n,spaceStore:s}=e,o=await T({environment:a,billingData:n,spaceStore:s});if(!o)return!1;const l=(0,r().b_)(o.offer).days;if(!l)return!1;const d=(0,u().tk)({daysElapsed:t,trialLength:l,trialCampaign:o.offer.campaign});if(!d)return!1;if(!(0,r().Vm)(o))return!1;const c=(0,i().DS)(n),p=(0,r().Si)(o,c);return("onboardingIntro"!==d||0!==p||"onboarding"===(null==o?void 0:o.entrypoint))&&p===t}async function I(e,t){const{billingData:a,environment:n,spaceStore:s}=t;if(!a)return!1;const o=(0,i().DS)(a),l=await T({environment:n,billingData:a,spaceStore:s});if(!l)return!1;const d=(0,r().Vm)(l);if(!d)return!1;const c=Math.floor(o.startOf("day").diff(d.startOf("day"),"days").days),p=(0,u().BF)(e,(0,r().b_)(l.offer).days);return("onboardingIntro"!==e||0!==c||"onboarding"===(null==l?void 0:l.entrypoint))&&c===p}function D(e){const{billingData:t,businessTrialOffer:a,spaceViewSettings:s}=e,{business_trial_ending_modal_last_shown_at:o}=s??{};if(!t)return!1;const l=(0,i().DS)(t);if(function(e,t){if(!e)return!1;const a=n().c9.fromMillis(e);return a.startOf("day").equals(t.startOf("day"))}(o,l))return!1;if("business"===(0,i().AW)(t)||"enterprise"===(0,i().AW)(t))return!1;if(!a)return!1;if((0,u().od)(a,l,s))return!1;if((0,u().z2)({billingData:t})||void 0===a)return!1;if((0,r().nb)(a))return!1;const c=a.offer.duration.days;return void 0!==c&&((0,d().tz)(a,(0,u().rE)(c),l)||(0,u().XF)(a,l)||(0,d().V9)(a,l))}},263868:(e,t,a)=>{a.d(t,{O:()=>u,y:()=>c});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(69708),o=()=>a(231297),r=()=>a(709062),l=()=>a(702723),d=a(474848);const c=(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleHoverCard.title",defaultMessage:"Hover cards"},byline:{id:"spacePermissionsSettings.people.peopleHoverCard.byline",defaultMessage:"Show information on hover over name"}});function u({spaceStore:e,isLocked:t,isMobile:a}){const u=(0,n().v3)(),p=(0,s().K8)((()=>Boolean(e.getSetting("disable_people_hover_card"))),[e]);return(0,d.jsx)(l().A,{isMobile:a,title:(0,d.jsx)(i().sA,{...c.title}),caption:(0,d.jsx)(i().sA,{...c.byline}),type:"toggle",isOn:!p,onToggle:()=>{t||function({environment:e,spaceStore:t,newValue:a}){o().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleHoverCardSetting",environment:e,canUndo:!0,perform:e=>{o().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","disable_people_hover_card"],command:"set",args:a},transaction:e})}})}({environment:u,spaceStore:e,newValue:!p})},isLocked:t,lockedTooltip:t?(0,r().C_)():void 0})}},267155:(e,t,a)=>{a.d(t,{z:()=>r});a(296540);var n=()=>a(401497),s=()=>a(69708),i=()=>a(89924),o=a(474848);function r(e){const t=(0,n().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,o.jsx)(i().A,{title:e.hideTitle?void 0:(0,o.jsx)(s().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},267639:(e,t,a)=>{a.d(t,{T:()=>s});a(944114),a(898992),a(908872);var n=()=>a(415651);function s(e){const{environment:t,collectionStore:a,duplicate:s,droppedStores:i,transaction:o,duplicateActions:r}=e,{movedStores:l,reparentedStores:d}=i.reduce(((e,t)=>(s||t.getAssociatedCollectionId()!==(null==a?void 0:a.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:d,duplicate:s,transaction:o,resolveTemplateVariables:!1,duplicateActions:r})]}},284230:(e,t,a)=>{a.d(t,{A:()=>D});a(944114),a(898992),a(823215),a(354520),a(581454),a(908872);var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(30537),l=()=>a(160432),d=()=>a(784892),c=()=>a(468006),u=()=>a(69708),p=()=>a(778078),g=()=>a(496603);function m(e,t){return{state:t,store:e}}class h extends(()=>a(757695))().Store{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"current-default"===e||"add-default"===e))}addedTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"add-default"===e))}removedTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"remove-default"===e))}}const f=new h;function v({teamStore:e}){var t;return null===(t=f.state.defaultTeams[e.id])||void 0===t?void 0:t.state}function y(e,t){const a=f.state,n={...a.defaultTeams};t?n[e.id]=m(e,t):delete n[e.id],f.setState({...a,defaultTeams:n})}var x=()=>a(404277),b=()=>a(939740),S=()=>a(417392),A=()=>a(89924),j=()=>a(859428),w=()=>a(626822),_=()=>a(881690),C=()=>a(856952),M=()=>a(722872),T=()=>a(115512),k=()=>a(898808),I=a(474848);function D({immediateUpdate:e,onUpdate:t,tokenStyle:a,headerStyle:d,unarchivedTeams:h,description:_,isOrgOwner:T}){const k=(0,s().Y0)(),D=(0,u().tz)(),R=(0,s().v3)(),[V,L]=(0,n.useState)(!1),F=(0,i().uB)(f),[O,z]=(0,n.useState)(""),U=(0,i().K8)((()=>F.addedTeams()),[F]),W=(0,i().K8)((()=>F.removedTeams()),[F]),H=(0,i().K8)((()=>F.addedAndCurrentTeams()),[F]),K=(0,i().K8)((()=>h.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[h]),q=(0,i().K8)((()=>h.filter((e=>e.isDefault()))),[h]);(0,n.useEffect)((()=>function(e){const t=f.state,a=e.reduce(((e,t)=>(e[t.id]=m(t,"current-default"),e)),{});f.setState({...t,defaultTeams:a})}(q)),[q]);let G=null;0===h.length?G=(0,I.jsx)(u().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===U.length&&0===W.length?G=(0,I.jsx)(u().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===H.length&&(G=(0,I.jsx)(u().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const Y=e=>{L(!0),t({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),L(!1)},Q=t=>{!function({teamStore:e}){y(e,"add-default"===v({teamStore:e})?null:"remove-default")}({teamStore:t}),e&&Y({addedTeams:[],removedTeams:[m(t,"remove-default")]})},$=t=>{!function({teamStore:e}){y(e,"remove-default"===v({teamStore:e})?"current-default":"add-default")}({teamStore:t}),F.update((e=>({...e,showAutoCompletePopup:!1}))),e&&Y({addedTeams:[m(t,"add-default")],removedTeams:[]}),z("")},J=R.currentUser.id,Z=(0,i().K8)((()=>J?h.filter((e=>{const t=e.getSettingsStore().getValue();return!!t&&((T||e.isOwner(J))&&"open"===(0,c().MA)(t)&&H.every((t=>t.store.id!==e.id)))})):[]),[J,h,T,H]),X=(0,p().Ay)(O,Z,(e=>K[e.id]??"")),ee=[];X.length>0&&O.length>0&&ee.push({key:"default-teams-list",render:e=>(0,I.jsx)(A().A,{...e,title:(0,I.jsx)(u().sA,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:X.map((e=>({key:e.id,render:t=>(0,I.jsx)(w().A,{...t,teamStore:e}),action:()=>$(e)})))});const te=(0,i().K8)((()=>F.state.showAutoCompletePopup&&ee.length>0),[F,ee.length]),ae=(0,o().IS)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2,...d},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:te?E:P,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:B},updateButton:{marginInlineStart:10,height:35}})),[te,d]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:ae.defaultTeamsHeader,children:(0,I.jsx)(u().sA,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),_,(0,I.jsxs)("div",{style:ae.inputAndButtonContainer,children:[(0,I.jsx)("div",{style:ae.inputContainer,children:(0,I.jsx)(S().Ay,{popupType:r().n.Popup,placementToOrigin:"bottom",sameWidthAsOrigin:!0,open:te,borderRadius:B,onDismiss:()=>F.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,I.jsx)(C().Ay,{disabled:V||0===h.length,style:ae.tokenInputMenu,focusInitial:k.isMobile,focusAfterAnimation:!0,format:C().le.Share,inputDivStyle:{alignItems:"center"},value:O,onChange:e=>{F.update((e=>({...e,showAutoCompletePopup:!0}))),z(e.target.value)},type:"default-teams",tokens:H.map((e=>(0,I.jsx)(N,{teamStore:e.store,onClickRemove:Q,style:a,hideRemoveButton:1===H.length},e.store.id))),placeholder:D.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=H,t=g().HV(e);t&&Q(t.store)},onEmptySubmit:g().D_,showBorder:!0}),render:()=>(0,I.jsx)(x().A,{menuType:M().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,I.jsx)("div",{style:ae.menuList,children:(0,I.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:0,sections:ee})})}),trapFocus:!1})}),e?void 0:(0,I.jsx)(j().A,{placement:"top",alignment:"center",disableTooltip:null===G,renderTooltip:()=>G,style:{width:180},textWrap:!0,render:e=>(0,I.jsx)(l().A,{colorPalette:"blue",...e,style:ae.updateButton,disabled:null!==G||V,size:"lg",onClick:()=>Y({addedTeams:U,removedTeams:W}),children:(0,I.jsx)(u().sA,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function N(e){const t=(0,s().Y0)(),{teamStore:a,onClickRemove:n,style:o,hideRemoveButton:r}=e,l=(0,i().K8)((()=>a.getName()),[a]);return(0,I.jsx)(_().A,{showRemoveButton:!r,isSingle:!1,format:t.isMobile?d().NY.Large:d().NY.Medium,style:{marginInlineStart:6,...o},onClickRemove:()=>n(a),value:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(k().x,{disabled:!0,store:a,size:14,style:{marginInlineEnd:4}}),l]})})}const P=3,E=(0,T().Nb)({topLeft:P,topRight:P,bottomLeft:0,bottomRight:0}),B=(0,T().Nb)({topLeft:0,topRight:0,bottomLeft:P,bottomRight:P})},284331:(e,t,a)=>{a.d(t,{A:()=>P});a(898992),a(354520),a(581454),a(737550);var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(98126),l=()=>a(406094),d=()=>a(631524),c=()=>a(160432),u=()=>a(742852),p=()=>a(703778),g=()=>a(69708),m=()=>a(284371),h=()=>a(946141),f=()=>a(884107),v=()=>a(542056),y=()=>a(471995),x=()=>a(859428),b=()=>a(125565),S=()=>a(645873);const A=new(S().O2)("teamPermissionsInvite",(async()=>await Promise.all([a.e(75134),a.e(99223),a.e(9304),a.e(9773),a.e(36556),a.e(40537),a.e(55373),a.e(36192),a.e(71562),a.e(96346),a.e(44711),a.e(53321),a.e(90825),a.e(16471),a.e(37353),a.e(29151),a.e(87248),a.e(62475),a.e(3151),a.e(98629),a.e(58550),a.e(67539),a.e(42838),a.e(22900),a.e(27634),a.e(85128),a.e(49889),a.e(20108),a.e(95555),a.e(87249),a.e(71621),a.e(92845),a.e(56369),a.e(2411),a.e(89296),a.e(46414),a.e(9294),a.e(11676),a.e(91256),a.e(40563),a.e(67494),a.e(44584),a.e(53141),a.e(4422),a.e(4330),a.e(55162),a.e(71003),a.e(55753),a.e(28866),a.e(22001),a.e(71386),a.e(4351),a.e(6331),a.e(69144),a.e(42660),a.e(55997),a.e(40828),a.e(12341),a.e(96402),a.e(84166),a.e(70359),a.e(29595),a.e(16448),a.e(10442),a.e(16434),a.e(45769),a.e(46080),a.e(75902),a.e(99809),a.e(58636),a.e(78405),a.e(33675),a.e(74562),a.e(47160),a.e(37384),a.e(91598),a.e(48046),a.e(94562),a.e(13955),a.e(42056),a.e(3165),a.e(76677),a.e(31842),a.e(43223),a.e(45147),a.e(15517),a.e(94995),a.e(98339),a.e(55639),a.e(1966),a.e(35738),a.e(6642),a.e(55776),a.e(51444),a.e(21727),a.e(58209),a.e(13297),a.e(4802),a.e(65197),a.e(81768),a.e(94300),a.e(62032),a.e(72122),a.e(32487),a.e(28058),a.e(90638),a.e(75422),a.e(97859),a.e(50856),a.e(65014),a.e(49175),a.e(36359),a.e(2752),a.e(11571),a.e(92924),a.e(42525),a.e(25204),a.e(52273),a.e(52986),a.e(45732),a.e(46817),a.e(70442),a.e(28656),a.e(37160),a.e(30443),a.e(9426),a.e(76690),a.e(63248),a.e(39457),a.e(21912),a.e(80668),a.e(12507),a.e(6626),a.e(26497),a.e(61016),a.e(91629),a.e(61858),a.e(63053),a.e(34399),a.e(89379),a.e(34974),a.e(75332),a.e(95103),a.e(75681)]).then(a.bind(a,500844)))),j=(0,S()._h)(A,(e=>e.TeamPermissionsInvite));var w=()=>a(47373),_=()=>a(743260),C=()=>a(37433),M=()=>a(406999),T=a(474848);const k={button:{height:32},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingInlineEnd:3,paddingInlineStart:3},teamName:{paddingInlineEnd:10,fontWeight:m().Wy.medium,...m().RC,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function I({isLoading:e,isNewlyCreatedTeam:t,onDismiss:a,onSubmit:n,inviteTargets:s,inviteRole:o,canEditSpaceMembership:d,membershipRequestsDisabled:u,spaceAllowedDomains:p,hasTeamGuestsMatchAllowedDomain:m,restrictedMembersDisabled:h}){var f;const v=s.length>0,y=s.filter((e=>(0,_().yi)(e))).length,b=s.filter(_().dV).length>0&&(h||"owner"===o),S=y>0&&u&&!d,A=(0,i().K8)((()=>(0,w().Qd)()&&"team_level_guest"===o&&s.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.membershipType&&"page_guest"!==e.membershipType))),[o,s]),j=A||S||m||b;if(e)return(0,T.jsx)(c().A,{colorPalette:"blue",style:{...k.button,minWidth:80},disabled:!0,children:(0,T.jsx)(r().A,{onDarkBackground:!0})});if(t&&!v)return(0,T.jsx)(l().A,{size:"lg",style:k.button,onClick:a,disabled:e,children:(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const C=h?(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addRestrictedMembers",defaultMessage:"Cannot add restricted members as teamspace members. Remove them to continue."}):(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addRestrictedMembersAsOwner",defaultMessage:"Cannot add restricted members as teamspace owners. Remove them or add them as members instead."}),M=A?(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):m?(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==p||null===(f=p.map((e=>`@${e}`)))||void 0===f?void 0:f.join(", ")}}):b?C:null;return(0,T.jsx)(x().A,{textWrap:!0,style:k.submitTooltip,disableTooltip:!M,renderTooltip:()=>M,render:t=>(0,T.jsx)(c().A,{colorPalette:"blue",style:k.button,onClick:n,disabled:!v||e||j,...t,children:(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function D({inviteTargets:e,workspaceName:t,canEditSpaceMembership:a,membershipRequestsDisabled:n,isFreeTier:s,inviteRole:i,hasTeamGuestsMatchAllowedDomain:o,restrictedMembersDisabled:r}){if(void 0===a)return null;if(!e||0===e.length)return null;const l=e.filter(M().eL).filter(_().yi).map((e=>e.value.email));if(e.filter(_().dV).length>0){if(r)return(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.restrictedMembersDisabled.subtitle",defaultMessage:"Restricted members cannot be added to this teamspace."})});if("owner"===i)return(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.restrictedMemberAsOwner.subtitle",defaultMessage:"Restricted members cannot be added as teamspace owners."})})}if(!l||0===l.length)return null;const d=e=>(0,T.jsx)("b",{children:e}),c=t??"this workspace";return a?s?(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===l.length?(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:l[0],workspaceName:c,b:d}}):(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:l[0],secondGuest:l[1],numberOfOtherEmails:l.length-1,workspaceName:c,b:d}})}):"team_level_guest"===i?o?null:(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===l.length?(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:l[0],workspaceName:c,b:d}}):(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:l[0],secondGuest:l[1],numberOfOtherEmails:l.length-1,workspaceName:c,b:d}})}):(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===l.length?(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:l[0],workspaceName:c,b:d}}):(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:l[0],secondGuest:l[1],numberOfOtherEmails:l.length-1,workspaceName:c,b:d}})}):n?(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can’t add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,T.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===l.length?(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:l[0],workspaceName:c,b:d}}):(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:l[0],secondGuest:l[1],numberOfOtherEmails:l.length-1,workspaceName:c,b:d}})})}function N(e){const{store:t,isSmall:a}=e,n=(0,s().v3)(),i=(0,o().IS)((e=>({button:{marginInlineEnd:5,marginInlineStart:5,height:32,fontSize:a?12:14}})),[a]);return(0,T.jsx)(d().p,{onClick:async()=>{const e=await f().R.clipboardActions.load();e.copyString({environment:n,stringValue:(0,C().TP)(t.id),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),h().lY(n,{store:t})},iconLeading:a?{icon:p().linkSmallIcon,size:"sm"}:u().linkIcon,style:i.button,colorPalette:"blue",children:a?(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,T.jsx)(g().sA,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const P=function({store:e,permissionsInviteStore:t,isNewlyCreatedTeam:o,onSubmitSuccessful:r,onDismiss:l}){const d=(0,s().v3)(),{teamName:c,workspaceName:u,canEditSpaceMembership:p,membershipRequestsDisabled:m,spaceAllowedDomains:h,restrictedMembersDisabled:f}=(0,i().K8)((()=>{const{sidebarSpaceStore:t}=a(765957).default.state;return{teamName:e.getName(),workspaceName:null==t?void 0:t.getName(),canEditSpaceMembership:null==t?void 0:t.canEditMembership(),membershipRequestsDisabled:null==t?void 0:t.getDisableMembershipRequests(),spaceAllowedDomains:null==t?void 0:t.getEmailDomains(),restrictedMembersDisabled:e.getDisableRestrictedMembers()}}),[e]);(0,n.useEffect)((()=>()=>{o&&a(848237).L0({environment:d,teamStore:e,shouldScroll:!0})}),[o,e,d]);const[x,b]=(0,n.useState)(!1),S=(0,i().K8)((()=>t.state.inviteTargets),[t]),A=(0,i().K8)((()=>t.state.inviteTargets.length),[t]),M=(0,i().K8)((()=>t.state.inviteRole),[t]),P=(0,i().K8)((()=>a(10984).dL()),[]),E=(0,i().K8)((()=>!(null==h||!h.length||"team_level_guest"!==M||!(0,w().Qd)())&&S.some((e=>"group"!==e.type&&(0,a(842599).Wy)(h,e.value.email)))),[h,M,S]),B=(0,i().K8)((()=>!P&&!(0,C().FQ)(e)),[e,P]),R=async()=>{if(b(!0),A>0){const a=t.state.inviteTargets,{success:n}=await v().l5({environment:d,targetStore:e,permissionsInviteStore:t,inviteOrigin:"team_invite_overlay"});if(void 0!==p)if(n){const t=(0,_().c3)({inviteTargets:a,recordStore:e,canEditSpaceMembership:p});if(!t)return;setTimeout((()=>{y().D6({label:t})}))}else setTimeout((()=>{y().D6({label:(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}v().Oo({permissionsInviteStore:t}),b(!1),null==r||r()};return(0,T.jsx)("div",{className:a(38337).jnS,style:{...k.full},children:(0,T.jsxs)("div",{style:k.containerLeftAligned,children:[(0,T.jsxs)("div",{style:k.titleAndIcon,children:[(0,T.jsx)("div",{style:k.addMembersTo,children:(0,T.jsx)(g().sA,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,T.jsx)("div",{style:k.icon,children:(0,T.jsx)(a(898808).x,{disabled:!0,store:e,size:20})}),(0,T.jsx)(a(265665).j,{style:k.teamName,children:c})]}),(0,T.jsxs)("div",{style:k.inviteInput,children:[(0,T.jsx)(j,{store:e,permissionsInviteStore:t,onEmptySubmit:R}),(0,T.jsx)("div",{style:k.subtitle,children:(0,T.jsx)(D,{inviteTargets:S,workspaceName:u,canEditSpaceMembership:p,membershipRequestsDisabled:m,restrictedMembersDisabled:f,isFreeTier:P,inviteRole:M,hasTeamGuestsMatchAllowedDomain:E})})]}),(0,T.jsx)("div",{style:B?k.multiButtonContainer:k.singleButtonContainer,children:(0,T.jsxs)("div",{style:B?k.multiButtonContainer:{},children:[B?(0,T.jsx)(N,{store:e}):void 0,(0,T.jsx)(I,{isLoading:x,onSubmit:R,onDismiss:()=>{v().Oo({permissionsInviteStore:t}),null==l||l()},isNewlyCreatedTeam:o,inviteTargets:S,inviteRole:M,canEditSpaceMembership:p,membershipRequestsDisabled:m,spaceAllowedDomains:h,hasTeamGuestsMatchAllowedDomain:E,restrictedMembersDisabled:f})]})})]})})}},311670:(e,t,a)=>{a.d(t,{A:()=>i,e:()=>n});let n=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e.AI="ai",e}({});class s extends(()=>a(757695))().Store{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==n.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const i=new s},312607:(e,t,a)=>{a.d(t,{A:()=>E});a(944114),a(898992),a(908872);var n=a(296540),s=()=>a(242422),i=()=>a(56366),o=()=>a(401497),r=()=>a(252291),l=()=>a(729108),d=()=>a(631524),c=()=>a(160432),u=()=>a(263862);const p={audit_log_aes_event_read:["page.automation_deleted","page.file_deleted","user.settings.analytics_tracking_setting_updated","workspace.integration_added","workspace.integration_removed","workspace.members_exported"],audit_log_guest_membership_request:["guest_membership_requests_toggled"],...u().gu};u().Ql,u().nm;var g=()=>a(326346),m=()=>a(200582),h=()=>a(69708),f=()=>a(100622),v=()=>a(778078),y=()=>a(496603),x=()=>a(534177),b=()=>a(56394),S=()=>a(760217),A=()=>a(623580),j=()=>a(404277),w=()=>a(939740),_=()=>a(89924),C=()=>a(125565),M=()=>a(47373),T=()=>a(722872),k=()=>a(134217),I=()=>a(606273),D=a(474848);const N={page:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"}),collection:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.categoryName.collection",defaultMessage:"Data source"})};function P({totalNumEventsForCategory:e,numSelectedForCategory:t,category:a,categoryOpen:n,shouldShowCount:s,onCategoryClick:i,onCategoryToggleClick:r,...d}){const c=(0,o().IS)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginInlineStart:8,fontWeight:600},categorySubHeader:{marginInlineStart:6},toggleButton:{marginInlineStart:2,marginInlineEnd:2}})),[]);let u,p;return u=s?e===t?(0,D.jsx)(h().sA,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:e}}):(0,D.jsx)(h().sA,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:t,totalNum:e}}):null,p=e===t||0!==t&&"partial",(0,D.jsx)(S().A,{...d,className:"notranslate",textWrapperStyle:c.textWrapperStyle,focused:!1,title:(0,D.jsxs)("div",{style:c.title,children:[(0,D.jsx)(I().f,{style:c.toggleButton,open:n,onClick:r,isSidebar:!1,fill:!1,icon:"chevron"}),(0,D.jsx)(l().S,{checked:p,size:14,onClick:i}),(0,D.jsx)(C().A,{style:c.categoryText,children:N[a]}),(0,D.jsx)(C().A,{isSecondaryColor:!0,style:c.categorySubHeader,children:u})]})})}const E=function({onChange:e,lastSelectionStore:t,componentStore:s}){const r=(0,o().DP)(),l=(0,i().uB)(void 0,a(970585).A),d=(0,i().K8)((()=>s.state.isMenuOpen),[s]),c=(0,n.useCallback)((()=>(0,D.jsx)(U,{onChange:e,componentStore:s,lastSelectionStore:t,menuListStore:l})),[e,s,t,l]),u=(0,n.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),O(!1,e)}(s,t)),[s,t]),p=V(r),g=(0,D.jsx)(h().sA,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),m=(0,D.jsx)(z,{componentStore:s,title:g});return(0,D.jsx)(a(806754).A,{marginAfter:!1,children:(0,D.jsx)(a(417392).Ay,{popupType:a(30537).n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:d,render:c,onDismiss:u,keepFocus:!0,origin:m,preventScaleTransition:!0,style:p.popup})})};function B(e){var t;return y().oE([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function R({totalNumSelected:e,totalNumEvents:t}){const a=(0,o().IS)((e=>({container:{background:f().Tj.diffBackground,color:f().Tj.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"}})),[]);return(0,D.jsx)(C().A,{style:a.container,children:(0,D.jsx)(h().sA,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:e,totalNumEvents:t}})})}function V(e){return{container:{minWidth:460},searchInput:{padding:8,borderEndStartRadius:0,borderEndEndRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function L(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:n,numSelectedForCategory:s,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,D.jsx)(P,{totalNumEventsForCategory:n,numSelectedForCategory:s,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function F(e){const{actionName:t,renderGroup:a,componentStore:n,intl:s}=e,i=()=>{n.selectActionName(t,a)},o=s.formatMessage(g().T0[t]);return{key:t,action:i,render:e=>(0,D.jsx)(S().A,{...e,icon:(0,D.jsx)(l().S,{checked:n.state.actionSelections[t],size:14,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingInlineStart:32},textWrapperStyle:{marginInlineStart:4}}),actionName:t,localizedActionName:o}}function O(e,t){t.setState({...t.state,isMenuOpen:e})}function z({title:e,componentStore:t}){const a=(0,i().K8)((()=>t.hasActionNameSelected()),[t]);return(0,D.jsx)(b().A,{on:a,icon:(0,D.jsx)(r().I,{icon:m().m,style:{marginInlineEnd:6}}),title:(0,D.jsx)("span",{children:e}),onClick:()=>{O(!0,t)}})}function U({onChange:e,componentStore:t,lastSelectionStore:a,menuListStore:r}){const l=(0,o().DP)(),u=(0,h().tz)(),g=(0,n.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,t)),[t]),m=V(l),f=(0,i().K8)((()=>[...(0,x().WP)(p).reduce(((e,[t,a])=>s().default.checkGate({gateName:t})?e:[...e,...a]),[]),...(0,M().Qd)()?[]:["team_guest_default_permission_updated"],...(0,k().dW)()?[]:["guest_membership_requests_toggled"],"page.shared_with_email_domain"]),[]),{actionSelections:y,categoryToggleOpen:b,renderOrder:S,searchQuery:C}=(0,i().K8)((()=>{const{actionSelections:e,categoryToggleOpen:a,renderOrder:n,searchQuery:s}=t.state;return{actionSelections:e,categoryToggleOpen:a,renderOrder:n,searchQuery:s}}),[t]),I=[];let N=0,P=0;for(const n of S){const e=n.category,a=[];let s=0;for(const i of n.orderedActions)f.includes(i)||(a.push(F({actionName:i,renderGroup:n,intl:u,componentStore:t})),y[i]&&s++);if(0!==a.length&&(N+=s,P+=a.length,I.push(L({renderGroup:n,shouldShowCount:!Boolean(C),totalNumEventsForCategory:a.length,numSelectedForCategory:s,componentStore:t})),b[e]))if(C){const e=(0,v().Ay)(C,a,B);I.push(...e)}else I.push(...a)}const E={key:"results",items:I,render:e=>(0,D.jsx)(_().A,{...e,title:null,loading:!1})};return(0,D.jsxs)("div",{style:m.container,children:[(0,D.jsx)(A().A,{style:m.searchInput,placeholder:u.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:g,value:C,showClearButton:!0}),C?(0,D.jsx)(R,{totalNumSelected:N,totalNumEvents:P}):void 0,(0,D.jsx)(j().A,{menuType:T().gu.Popup,header:null,maxHeight:356,children:(0,D.jsx)(w().Ay,{type:w().Oh.Vertical,store:r,initialFocus:0,sections:[E]})}),(0,D.jsxs)(_().A,{topBorder:!0,style:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,D.jsx)(d().p,{onClick:()=>{!function(e){e.clearAllSelections()}(t)},children:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,D.jsx)(c().A,{colorPalette:"blue",onClick:()=>{!function(e,t,a){const n=t.getAllActionNames(),s=t.getSelectedActionNames();e(n.length===s.length?[]:s),0===s.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),O(!1,t)}(e,t,a)},children:(0,D.jsx)(h().sA,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},333046:(e,t,a)=>{a.d(t,{X:()=>N,j:()=>D});a(944114),a(898992),a(354520),a(672577),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(30537),r=()=>a(631524),l=()=>a(160432),d=()=>a(784892),c=()=>a(835607),u=()=>a(69708),p=()=>a(534177),g=()=>a(56394),m=()=>a(972435),h=()=>a(722872),f=()=>a(37433),v=()=>a(970585),y=()=>a(898808),x=()=>a(760217),b=()=>a(404277),S=()=>a(939740),A=()=>a(417392),j=()=>a(89924),w=()=>a(125565),_=()=>a(484595),C=()=>a(806754),M=()=>a(881690),T=()=>a(297780),k=a(474848);const I=(0,u().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function D({selectedTeamIds:e,setSelectedTeamIds:t,onMenuClose:a,teamStores:D}){const P=(0,s().uB)(void 0,v().A),E=(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginInlineEnd:4},pillContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginInlineStart:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginInlineEnd:4,fill:"currentColor"},teamIcon:{marginInlineEnd:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[]),[B,R]=(0,n.useState)(!1),[V,L]=(0,n.useState)(""),F=(0,s().K8)((()=>[...D].sort(f().XE)),[D]),O=(0,s().K8)((()=>e.map((e=>D.find((t=>t.id===e)))).filter(p().O9)),[D,e]);function z(){R(!1),L(""),a()}function U(){L(""),t([])}function W(a){const n=e.includes(a)?[]:[a];t(n),L("")}const H=(0,n.useCallback)((e=>{L(e.target.value)}),[]),K=(0,s().K8)((()=>O.map((a=>{const n=a.getName();return(0,k.jsx)(M().A,{isSingle:!0,format:d().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const n=e.filter((e=>e!==a.id));t(n)},style:E.pillContainer,value:(0,k.jsxs)("div",{style:E.pillContents,children:[(0,k.jsx)(y().x,{disabled:!0,store:a,size:16}),(0,k.jsx)(w().A,{style:E.pillText,children:n})]})},a.id)}))),[O,e,t,E]);const q=(0,k.jsx)(g().A,{on:e.length>0,icon:(0,c().F)(E.icon),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>R(!0)});return(0,k.jsx)(C().A,{children:(0,k.jsx)(A().Ay,{popupType:o().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:B,render:function(){const t=[];for(const s of F){const a=s.getName(),n=s.getTeamAccessLevel(),i=s.isDefault();a&&a.toLocaleLowerCase().includes(V)&&t.push({key:s.id,action:()=>W(s.id),render:t=>(0,k.jsx)(x().A,{...t,icon:(0,k.jsx)(_().A,{isSelected:e.includes(s.id)}),focused:!1,title:(0,k.jsxs)("div",{style:E.optionContainer,children:[(0,k.jsx)(y().x,{disabled:!0,store:s,size:24,style:E.teamIcon}),(0,k.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,k.jsx)(w().A,{style:E.optionTitle,children:a}),(0,k.jsx)(w().A,{style:E.optionCaption,children:N(n,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,k.jsx)(w().A,{isSecondaryColor:!0,style:E.noResultsMessage,...e,children:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found"})})},n={key:"teamOptions",items:t.length>0?t:[a],render:e=>(0,k.jsx)(j().A,{...e,title:null,loading:!1})};return(0,k.jsxs)("div",{style:E.container,children:[(0,k.jsx)(T().A,{focus:!0,value:V,style:E.input,placeholder:m().A.formatMessage(I.placeholder),onChange:H,onRemoveLastToken:U,tokens:K}),(0,k.jsx)(b().A,{menuType:h().gu.Popup,header:null,maxHeight:250,width:300,children:(0,k.jsx)(S().Ay,{type:S().Oh.Vertical,store:P,initialFocus:0,sections:[n]})}),(0,k.jsxs)(j().A,{topBorder:!0,style:E.footer,children:[(0,k.jsx)(r().p,{onClick:U,children:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,k.jsx)(l().A,{colorPalette:"blue",onClick:z,children:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:z,keepFocus:!0,origin:q,preventScaleTransition:!0})})}function N(e,t){if(t)return(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,p().HB)(e)}}},334013:(e,t,a)=>{a.d(t,{A:()=>f});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(842599),r=()=>a(69708),l=()=>a(534177),d=()=>a(417392),c=()=>a(417555),u=()=>a(856952),p=()=>a(743260),g=()=>a(406999),m=a(474848);function h(e){const{permissionsInviteStore:t}=e,a=(0,r().tz)(),d=(0,s().K8)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),h=(0,s().K8)((()=>t.state.tokenQuery),[t]),f=(0,s().K8)((()=>t.state.inviteTargets.filter(g().eL).filter(g().eL)),[t]),v=(0,s().K8)((()=>t.state.inviteRole),[t]),y=(0,n.useCallback)((e=>{const{newInviteTargets:a,newInputValue:n,inputFocus:s}=e;t.setState({...t.state,inviteTargets:a,inviteRole:v,...(0,l().O9)(n)&&{tokenQuery:n},...(0,l().O9)(s)&&{inputFocus:s}})}),[v,t]),x=(0,n.useCallback)((e=>{const a=e.target.value,{extractedEmails:n,newInputValue:s}=(0,o().Ct)(a),i=n.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,p().mQ)({target:e,permissionsInviteStore:t}))).filter(g().eL),r=[...f,...i];y({newInviteTargets:r,newInputValue:s,inputFocus:"invitee"})}),[f,t,y]),b=(0,n.useCallback)((e=>{const t=f.filter((t=>t!==e));y({newInviteTargets:t})}),[f,y]),S=(0,n.useCallback)((()=>{const e=f.slice(0,-1);y({newInviteTargets:e})}),[f,y]),A=(0,i().IS)((()=>({tokenMenuItem:{borderRadius:6,padding:"6px 8px"}})),[]),j=f.map((e=>(0,m.jsx)(c().A,{target:e,onClickRemove:b},e.value.id)));return(0,m.jsx)(u().Ay,{focusInitial:!0,focus:d,showBorder:!0,format:u().le.Select,tokenWrapStyle:{gap:4},value:h,onChange:x,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:j,focusAfterAnimation:!0,style:A.tokenMenuItem})}const f=function(e){const{permissionsInviteStore:t,disableAutoFocus:r,showCurrentUser:l}=e,c=(0,a(369955).L)(),u=e.parentStore||c,f=(0,s().K8)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),v=(0,n.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,o().DT)(e)){const a=t.state.inviteTargets.filter(g().eL).filter(g().eL),n=t.state.inviteRole,s={type:"newUser",value:{email:e},source:"email"};if(!(0,p().mQ)({target:s,permissionsInviteStore:t})){const e=[...a,s];t.setState({...t.state,inviteTargets:e,inviteRole:n,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),y=(0,n.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,n.useEffect)((()=>{r||t.setState({...t.state,inputFocus:"invitee"})}),[t,r]);const x=(0,i().IS)((e=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2}})),[]);return u?(0,m.jsx)(d().Ay,{trapFocus:!1,placementToOrigin:"bottom",alignmentToOrigin:"start",originGap:10,open:f,popupType:d().nl.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:v,render:()=>(0,m.jsx)(a(897537).A,{permissionsInviteStore:t,store:u,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!l,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,m.jsx)("div",{style:x.origin,onClick:y,children:(0,m.jsx)(h,{permissionsInviteStore:t})})}):null}},347930:(e,t,a)=>{a.d(t,{H:()=>i});var n=()=>a(645873);const s=new(n().O2)("permissionsInviteWithModal",(async()=>await Promise.all([a.e(75134),a.e(99223),a.e(9304),a.e(9773),a.e(36556),a.e(40537),a.e(55373),a.e(36192),a.e(71562),a.e(96346),a.e(44711),a.e(53321),a.e(90825),a.e(16471),a.e(37353),a.e(29151),a.e(87248),a.e(62475),a.e(3151),a.e(98629),a.e(58550),a.e(67539),a.e(42838),a.e(22900),a.e(27634),a.e(85128),a.e(49889),a.e(20108),a.e(95555),a.e(87249),a.e(71621),a.e(92845),a.e(56369),a.e(2411),a.e(89296),a.e(46414),a.e(9294),a.e(11676),a.e(91256),a.e(40563),a.e(67494),a.e(44584),a.e(53141),a.e(4422),a.e(4330),a.e(55162),a.e(71003),a.e(55753),a.e(28866),a.e(22001),a.e(71386),a.e(4351),a.e(6331),a.e(69144),a.e(42660),a.e(55997),a.e(40828),a.e(12341),a.e(96402),a.e(84166),a.e(70359),a.e(29595),a.e(16448),a.e(10442),a.e(16434),a.e(45769),a.e(46080),a.e(75902),a.e(99809),a.e(58636),a.e(78405),a.e(33675),a.e(74562),a.e(47160),a.e(37384),a.e(91598),a.e(48046),a.e(94562),a.e(13955),a.e(42056),a.e(3165),a.e(76677),a.e(31842),a.e(43223),a.e(45147),a.e(15517),a.e(94995),a.e(98339),a.e(55639),a.e(1966),a.e(35738),a.e(6642),a.e(55776),a.e(51444),a.e(21727),a.e(58209),a.e(13297),a.e(4802),a.e(65197),a.e(81768),a.e(94300),a.e(62032),a.e(72122),a.e(32487),a.e(28058),a.e(90638),a.e(75422),a.e(97859),a.e(50856),a.e(65014),a.e(49175),a.e(36359),a.e(2752),a.e(11571),a.e(92924),a.e(42525),a.e(25204),a.e(52273),a.e(52986),a.e(45732),a.e(46817),a.e(70442),a.e(28656),a.e(37160),a.e(30443),a.e(9426),a.e(76690),a.e(63248),a.e(39457),a.e(21912),a.e(80668),a.e(12507),a.e(6626),a.e(26497),a.e(61016),a.e(91629),a.e(61858),a.e(63053),a.e(34399),a.e(89379),a.e(34974),a.e(75332),a.e(95103),a.e(75681)]).then(a.bind(a,317655)))),i=(0,n()._h)(s,(e=>e.PermissionsInviteWithModal))},348960:(e,t,a)=>{a.d(t,{JD:()=>y,SG:()=>S,n9:()=>x});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(901610),r=()=>a(713998),l=()=>a(202017),d=()=>a(379632),c=()=>a(69708),u=()=>a(406944),p=()=>a(106412),g=()=>a(705876),m=()=>a(831030),h=a(474848);const f=(0,c().YK)({noData:{defaultMessage:"No data",id:"database.chart.multipleSeriesTooltip.noData"},empty:{defaultMessage:"Empty",id:"database.chart.tooltip.empty"},clickToViewData:{defaultMessage:"Click to view data",id:"database.chart.tooltip.clickToViewData"},clickToViewDetails:{defaultMessage:"Click to view details",id:"database.chart.tooltip.clickToViewDetails"}}),v=43;function y(e){var t,a;const{chartConfig:i,schema:l,seriesData:u,isClickable:v}=e,y=(0,c().tz)(),A=x(v),j=(0,n.useMemo)((()=>y.formatMessage(f.noData)),[y]),w=null===(t=(0,p().Zp)())||void 0===t?void 0:t.disableContentPointerEvents,_=(0,n.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100,enabled:!w})),[w]),C=(0,s().K8)((()=>"donut"===(null==i?void 0:i.type)),[null==i?void 0:i.type]),M=(0,s().K8)((()=>"results_reducer"===(null==i?void 0:i.dataConfig.type)?y.formatMessage(f.clickToViewDetails):y.formatMessage(f.clickToViewData)),[null==i?void 0:i.dataConfig.type,y]),T=(0,s().K8)((()=>{var e;return("bar"===(null==i?void 0:i.type)||"column"===(null==i?void 0:i.type))&&("groups_reducer"===i.dataConfig.type&&(!!i.dataConfig.aggregationConfig.stackOptions&&"percent"===(null===(e=i.chartFormat)||void 0===e?void 0:e.axisGroupStyle)))}),[i]),k=(0,s().K8)((()=>{var e,t;if("precision_from_number_property"===(null==i||null===(e=i.chartFormat)||void 0===e?void 0:e.numberPrecisionOverride)){const e=null==i?void 0:i.dataConfig;if(!e||"results_reducer"!==e.type)return;const t=(0,r()._g)({schema:l,property:e.valueProperty});return t?(0,m().i5)(t):void 0}return null==i||null===(t=i.chartFormat)||void 0===t?void 0:t.numberPrecisionOverride}),[null==i||null===(a=i.chartFormat)||void 0===a?void 0:a.numberPrecisionOverride,null==i?void 0:i.dataConfig,l]),I=(0,n.useMemo)((()=>({..._,formatter(){const e=this.color??this.series.color;g().U.setCurrentTooltipPoint(this.point);const{label:t,value:a}=(0,m().NH)({chartConfig:i,schema:l,highChartsLabel:this.point.name,highChartsValue:this.point.y,isMultiSeries:!1,intl:y,numberPrecisionOverride:k});let n="";C&&this.point.percentage&&(n=` (${(0,m().l9)(this.point.percentage)}%)`);const s=""===t?y.formatMessage(f.empty):t;return d().A.renderToStaticMarkup((0,h.jsxs)("div",{style:A.defaultContainer,children:[(0,h.jsx)("div",{style:A.containerSingleSeries,children:(0,h.jsxs)("div",{style:A.row,children:[(0,h.jsxs)("div",{style:A.rowLeftContainer,children:[(0,h.jsx)("div",{style:{...A.square,backgroundColor:S(e)}}),(0,h.jsx)("div",{style:A.rowLeft,children:s})]}),(0,h.jsxs)("div",{style:A.rowRight,children:[a,n]})]})}),v?(0,h.jsx)(b,{label:M,styles:A}):null]}))}})),[_,i,l,y,k,C,A,v,M]),D=(0,n.useMemo)((()=>({..._,shared:!0,formatter(){var e;const t=null===(e=this.points)||void 0===e?void 0:e.filter((e=>!(null==e||!e.y)&&0!==e.y));g().U.setCurrentTooltipPoint(this.point);("line"===this.series.type||"area"===this.series.type||"areaspline"===this.series.type)&&(null==t||t.sort(((e,t)=>((null==t?void 0:t.y)??0)-((null==e?void 0:e.y)??0))));let a=this.point.name;if(i&&(0,o().m)(i)&&"groups_reducer"===i.dataConfig.type){const e=i.dataConfig,t=e.groupBy,n=(0,r()._g)({schema:l,property:e.groupBy.property});n&&(a=(0,m().w$)({propertySchema:n,groupByFormat:t,aggregation:i.dataConfig.aggregationConfig.aggregation,highChartsLabel:this.point.name,intl:y}))}return t&&0!==t.length?d().A.renderToStaticMarkup((0,h.jsxs)("div",{style:A.defaultContainer,children:[(0,h.jsxs)("div",{style:A.scrollContainer,children:[(0,h.jsx)("div",{style:A.header,children:a}),t.map((e=>{const t=e.color??e.series.color,{label:a,value:n}=(0,m().NH)({chartConfig:i,schema:l,highChartsLabel:e.series.name,highChartsValue:e.y??void 0,isMultiSeries:!0,intl:y,numberPrecisionOverride:k});let s="";T&&e.percentage&&(s=` (${(0,m().l9)(e.percentage)}%)`);const o=""===a?y.formatMessage(f.empty):a;return(0,h.jsxs)("div",{style:A.row,children:[(0,h.jsxs)("div",{style:A.rowLeftContainer,children:[(0,h.jsx)("div",{style:{...A.square,backgroundColor:S(t)}}),(0,h.jsx)("div",{style:A.rowLeft,children:o})]}),(0,h.jsxs)("span",{style:A.rowRight,children:[n,s]})]},e.key)}))]}),v?(0,h.jsx)(b,{label:M,styles:A}):null]})):d().A.renderToStaticMarkup((0,h.jsxs)("div",{style:A.defaultContainer,children:[(0,h.jsxs)("div",{style:A.scrollContainer,children:[(0,h.jsx)("div",{style:A.header,children:a}),(0,h.jsx)("div",{style:{...A.row,...A.noData},children:j})]}),v?(0,h.jsx)(b,{label:M,styles:A}):null]}))}})),[_,i,A,l,y,j,k,T,v,M]);return u?1===u.length?I:D:_}function x(e){return(0,i().IS)((t=>({defaultContainer:{border:`1px solid ${t.palette.gray[100]}`,borderRadius:"8px",backgroundColor:t.background.elevated,maxHeight:"375px",maxWidth:"300px",width:"max-content",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"12px",maxHeight:e?375-v+"px":"375px"},clickToSeeDataContainer:{padding:"12px",display:"flex",gap:"6px",alignItems:"center"},clickToSeeDataSeparator:{border:"none",borderTop:`1px solid ${t.border.secondary}`,margin:"0 12px"},clickToSeeDataIcon:{width:"14px",height:"14px",color:t.text.tertiary},clickToSeeDataText:{color:t.text.tertiary,fontSize:"12px",lineHeight:"16px"},containerSingleSeries:{padding:"10px 12px"},header:{fontSize:"12px",paddingBottom:"7px",color:t.text.primary,overflowX:"hidden",whiteSpace:"normal",display:"block"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"start",display:"flex",justifyContent:"space-between",gap:"16px"},square:{height:"8px",width:"8px",minWidth:"8px",borderRadius:"1px",borderWidth:"0px",margin:"0 3px",verticalAlign:"top",display:"inline-block"},rowLeft:{display:"inline-block",color:t.text.secondary,overflowX:"hidden",whiteSpace:"normal"},rowLeftContainer:{display:"inline-flex",alignItems:"center",gap:"6px"},rowRight:{color:t.chartRowRightColor},noData:{color:t.text.secondary}})),[e])}function b(e){const{label:t,styles:a}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("hr",{style:a.clickToSeeDataSeparator}),(0,h.jsxs)("div",{style:a.clickToSeeDataContainer,children:[(0,l().n)(a.clickToSeeDataIcon),(0,h.jsx)("div",{style:a.clickToSeeDataText,children:t})]})]})}function S(e){const t=u().O.colorful[0];return e?"string"==typeof e?e:"pattern"in e?e.pattern.backgroundColor??t:t:t}},355049:(e,t,a)=>{a.d(t,{E:()=>I});a(944114),a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(564884),i=()=>a(484714),o=()=>a(852507),r=()=>a(401497),l=()=>a(699143),d=()=>a(252291),c=()=>a(493552),u=()=>a(784892),p=()=>a(842599),g=()=>a(742852),m=()=>a(69708),h=()=>a(884107),f=()=>a(347063),v=()=>a(107683),y=()=>a(21140),x=()=>a(881690),b=()=>a(856952),S=()=>a(152197),A=()=>a(726637);function j(e){return e?`${A().A.domainBaseUrl}/signup/referral/${e.referral_code}`:"Error copying the invite link."}var w=()=>a(898255),_=()=>a(550729),C=a(474848);function M(){const e=D();return(0,C.jsx)(f().YA,{iconAndTitle:(0,C.jsx)(c().D,{styleKey:"Title-sm/Semibold",colorVariant:"primary",style:e.alignment,children:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.title",defaultMessage:"Send referrals"})}),description:(0,C.jsx)(c().D,{styleKey:"Body/Regular",colorVariant:"secondary",style:e.alignment,children:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.description",defaultMessage:"Type or paste in emails, separated by commas. Your referrals will need to sign up with a business email to redeem their offer"})})})}function T({query:e,focus:t,tokens:a,onQueryChange:s,onKeyDown:i,onFocus:o,onRemoveLastToken:r,onRemoveToken:d}){const p=D(),g=(0,n.useCallback)((()=>a.map((e=>(0,C.jsx)(x().A,{showRemoveButton:!0,onClickRemove:()=>d(e.key),isSingle:!0,format:u().NY.Medium,value:e.value,shouldShrink:!0},e.key)))),[a,d]);return(0,C.jsxs)(l().Y1,{gap:8,direction:"vertical",children:[(0,C.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.emailAddresses.label",defaultMessage:"Email addresses"})}),(0,C.jsx)(b().Ay,{focus:t,focusInitial:!1,format:b().le.Share,showBorder:!0,onRemoveLastToken:r,value:e,onChange:s,onClick:o,onKeyDown:i,placeholder:"Invite people by email",tokens:g(),tokenWrapStyle:p.tokensContainer,inputStyle:p.textInput,style:p.inputContainer})]})}function k({onCopyLink:e,onSendInvite:t}){const a=[{buttonType:"primary",label:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.sendInvite",defaultMessage:"Send invite"}),onClick:t}],n=[{buttonType:"secondary",baseStyleOverride:{margin:"0 0 0 -8px"},label:(0,C.jsxs)(y().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:-4},children:[(0,C.jsx)(d().I,{icon:g().linkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,C.jsx)(c().D,{colorPalette:"blue",colorVariant:"secondary",children:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.copyLink",defaultMessage:"Copy link"})})]}),onClick:e}];return(0,C.jsx)(f().aO,{layout:"horizontal-space-between",primaryButtons:a,secondaryButtons:n,secondaryButtonTooltip:(0,C.jsx)(m().sA,{id:"referrals.inviteModal.copyLinkTooltip",defaultMessage:"You can also copy and share this special link"})})}function I({isOpen:e,onClose:t,source:a}){const r=D(),l=(0,i().v3)(),[d,c]=(0,n.useState)(""),[u,g]=(0,n.useState)(!1),{tokens:m,addEmailToken:y,removeToken:x,removeLastToken:b}=function(){const[e,t]=(0,n.useState)([]);return{tokens:e,addEmailToken:(0,n.useCallback)((e=>{const a=e.trim();return!(!a||!(0,p().DT)(a)||(t((e=>[...e,{key:`email-${Date.now()}`,value:a}])),0))}),[]),removeToken:(0,n.useCallback)((e=>{t((t=>t.filter((t=>t.key!==e))))}),[]),removeLastToken:(0,n.useCallback)((()=>{t((e=>e.slice(0,-1)))}),[])}}(),A=(0,_().z)("get_or_create"),I=(0,S().r)();(0,o().w)((()=>{I&&e&&(0,s().u)({environment:l,event:{eventName:"referral_invite_modal_opened",eventProperties:{space_id:I,path:a}}})}));const N=(0,n.useCallback)((e=>{"Enter"===e.key&&d.trim()&&(e.preventDefault(),y(d)&&c(""))}),[d,y]),P=(0,n.useCallback)((e=>{const t=e.target.value;if(t.endsWith(",")||t.endsWith(" ")){const e=t.slice(0,-1);if(y(e))return void c("")}c(t)}),[y]),E=(0,n.useCallback)((()=>{g(!0)}),[]),B=(0,n.useCallback)((async()=>{const e=await h().R.clipboardActions.load();e.copyString({environment:l,stringValue:j(A),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),I&&(0,s().u)({environment:l,event:{eventName:"click_copy_link_referral",eventProperties:{space_id:I,path:a}}})}),[l,A,I,a]),R=(0,n.useCallback)((async()=>{const e=m.map((e=>e.value));d.trim()&&y(d)&&(e.push(d.trim()),c("")),I&&(0,s().u)({environment:l,event:{eventName:"send_invite_referral_emails",eventProperties:{space_id:I,email_count:e.length,path:a}}}),await(0,w().J7)({environment:l,emails:e,referralEntry:A}),t()}),[l,m,A,t,y,d,c,I,a]),V=(0,n.useCallback)((()=>(0,C.jsx)(f().tf,{sizeRange:r.sizeRange,header:(0,C.jsx)(M,{}),children:(0,C.jsx)(T,{query:d,focus:u,tokens:m,onQueryChange:P,onKeyDown:N,onFocus:E,onRemoveLastToken:b,onRemoveToken:x}),footer:(0,C.jsx)(k,{onCopyLink:B,onSendInvite:R})})),[r.sizeRange,d,u,m,P,N,E,b,x,B,R]);return(0,C.jsx)(v().s,{isOpen:e,onClosed:t,showCloseIcon:!0,onDismiss:t,render:V})}function D(){return(0,r().IS)((e=>({alignment:{alignItems:"flex-start",textAlign:"start",width:"100%"},sizeRange:{minWidth:460,maxWidth:500,minHeight:200,maxHeight:void 0},textInput:{color:e.text.primary},tokensContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:4,overflowY:"auto"},inputContainer:{minHeight:56,padding:"8px 12px"}})),[])}},366951:(e,t,a)=>{a.d(t,{A:()=>s});a(296540);var n=a(474848);const s=function(){return(0,n.jsx)("div",{style:{},children:(0,n.jsx)(a(298697).A,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},371895:(e,t,a)=>{a.d(t,{u:()=>r});a(296540);var n=()=>a(69708),s=()=>a(534177),i=()=>a(566468),o=a(474848);function r({pageStatus:e}){return(0,o.jsx)(i().s7,{useThinTitle:!0,title:l(e)})}function l(e){switch(e){case"alive":return(0,o.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,o.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,o.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,s().HB)(e)}}},374255:(e,t,a)=>{a.d(t,{N:()=>f});a(581454),a(296540);var n=()=>a(56366),s=()=>a(401497),i=()=>a(69708),o=()=>a(100622),r=()=>a(534177),l=()=>a(284371),d=()=>a(898808),c=()=>a(298697),u=()=>a(187820),p=()=>a(16006),g=()=>a(125565),m=()=>a(453697),h=a(474848);function f({title:e,items:t,loading:a,error:n,titleStyle:i,containerStyle:o}){const r=(0,s().IS)((e=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:l().Wy.semibold,marginBottom:8,...l().RC},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...r.container,...o},children:[(0,h.jsx)(g().A,{style:{...r.title,...i},showTooltipWhenTruncated:!0,children:e}),a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{})]}):n?(0,h.jsx)(x,{}):t.map(((e,t)=>(0,h.jsx)(v,{item:e},t)))]})}function v({item:e}){const{store:t,caption:a}=e,s=(0,i().tz)(),o=b(),l=(0,n().K8)((()=>{switch(t.table){case"block":return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(u().B6,{icon:t.getIcon(),iconRecordCategory:(0,u().Te)(t),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(p().A,{store:t})]});case"notion_user":return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(m().A,{userStore:t,size:18}),(0,h.jsx)(g().A,{children:t.getDisplayName(s)})]});case"team":const e=t.getName();return(0,h.jsxs)("div",{style:o.nameAndIconContainer,children:[(0,h.jsx)(d().x,{disabled:!0,store:t,size:20}),(0,h.jsx)(g().A,{children:e})]});default:(0,r().HB)(t)}}),[t,o.nameAndIconContainer,s]);return(0,h.jsxs)("div",{style:o.container,children:[(0,h.jsx)(g().A,{style:o.label,children:l}),(0,h.jsx)("div",{style:o.caption,children:(0,h.jsx)(g().A,{isSecondaryColor:!0,isSmall:!0,children:a})})]})}function y(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(g().A,{style:e.label,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function x(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(g().A,{style:e.errorLabel,children:(0,h.jsx)(i().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,s().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:o().Tj.red}})),[])}},378941:(e,t,a)=>{a.d(t,{J7:()=>u,XC:()=>g,hs:()=>p});a(898992),a(354520),a(581454);var n=()=>a(165358),s=()=>a(792071),i=()=>a(277816),o=()=>a(798880),r=()=>a(229833),l=()=>a(534177),d=()=>a(559506),c=()=>a(547222);function u({trustedDomainIds:e,spaceStore:t}){return e.map((e=>{const a=c().L.createChildStore(t,{table:i().A,id:e,spaceId:t.id});if(a.canRead())return a})).filter(l().O9)}async function p({environment:e,spaceId:t,currentUserId:a,organizationId:s}){const i=await d().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:e,data:{spaceId:t,organizationId:s},userId:a});return"failed"===i.type?(n().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed",spaceId:t,actor:a?{type:"user",id:a,table:o().oo}:void 0,error:(0,r().convertErrorToLog)(i.error)}),[]):i.data.results}async function g({environment:e,spaceId:t}){const a=await d().callApi({eventName:"getTrustedDomainsForSpace",environment:e,data:{spaceId:t}});if("success"!==a.type)return[];return a.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>s().Bj6.fromValue(i().A,e)))}},387964:(e,t,a)=>{a.d(t,{S:()=>i});a(296540);var n=a(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"3.42 3.97 12.16 12.06",directional:!0,svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,n.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},i=(0,a(340498).wt)("arrowChevronDoubleBackward",s)},400857:(e,t,a)=>{a.d(t,{q:()=>tt});var n=a(296540),s=()=>a(69708),i=()=>a(105835),o=()=>a(252291),r=()=>a(396896),l=()=>a(493552),d=()=>a(824375),c=()=>a(301608),u=()=>a(710149),p=()=>a(47095),g=()=>a(457056),m=()=>a(489538),h=()=>a(508700),f=()=>a(828973),v=()=>a(35091),y=()=>a(722872),x=()=>a(406699),b=()=>a(285790),S=()=>a(404277),A=()=>a(89924),j=a(474848);function w({whatToShow:e,onWhatToShowChange:t,isGroupingByProduct:a,onGroupByChange:i,showWhatToShow:o,showGroupBy:r}){const l=(0,s().tz)(),d=(0,n.useMemo)((()=>[{key:C,type:"button",title:(0,j.jsx)(s().sA,{...k(C)})},{key:_,type:"button",title:(0,j.jsx)(s().sA,{...k(_)})}]),[]);return(0,j.jsx)(x().A,{popupType:x().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"end",originGap:6,renderOrigin:e=>(0,j.jsx)(b().A,{icon:h().T,ariaLabel:l.formatMessage(M.settingsTitle),...e}),render:()=>(0,j.jsxs)(S().A,{menuType:y().gu.Popup,width:280,children:[(0,j.jsx)(A().A,{title:l.formatMessage(M.settingsTitle),disableDesktopPadding:!0,desktopStyle:{marginBottom:0}}),o&&e?(0,j.jsx)(f().A,{icon:g().o,title:l.formatMessage(M.whatToShow),selectedKey:e,options:d,onChange:e=>{null==t||t(e)}}):null,r?(0,j.jsx)(v().A,{icon:m().o,iconStyle:{height:18},title:l.formatMessage(M.groupBy),switcherProps:{on:a},onClick:()=>{i(!a)}}):null]})})}const _="totalActions",C="actionsPerUser",M=(0,s().YK)({settingsTitle:{defaultMessage:"Chart settings",id:"analytics.ai.chartSettings.settingsTitle"},whatToShow:{defaultMessage:"What to show",id:"analytics.ai.chartSettings.whatToShow"},groupBy:{defaultMessage:"Group by AI feature",id:"analytics.ai.chartSettings.groupBy.aiFeature"}}),T=(0,s().YK)({totalActions:{defaultMessage:"Total actions",id:"analytics.ai.chartSettings.whatToShow.total"},actionsPerUser:{defaultMessage:"Actions per user",id:"analytics.ai.chartSettings.whatToShow.perUser"}});function k(e){return T[e]}a(581454);var I=()=>a(42583),D=()=>a(981982);const N="last_90_days";function P(e){const{currentFilter:t,onChangeFilter:a}=e,n=c().CA.map((e=>({key:e,value:e,title:(0,j.jsx)(s().sA,{...c().jy[e]}),shortTitle:(0,j.jsx)(s().sA,{...c().jy[e]}),wrapCaption:!1})));return(0,j.jsx)(D().G0,{pillTitle:(0,j.jsx)(s().sA,{id:"organizationConsole.analytics.filters.timeRange.title",defaultMessage:"Time range"}),pillIcon:I().D,shouldHidePrefix:!0,selectedItem:t,setSelectedItem:e=>{a(e??N)},items:n,shouldUseCheck:!0,selectionRequired:!0})}var E=()=>a(373009);function B(e){const{onApplyRangeToAll:t,dateRange:a}=e;return(0,j.jsx)(E().E,{colorPalette:"yellow",onClick:()=>t(a),children:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.applyRangeToEveryChart.button",defaultMessage:"Apply time range to every chart"})})}var R=()=>a(401497);const V={viewBox:"0 0 20 20",fittedViewBox:"4.41 4.41 11.16 11.16",directional:!0,svg:(0,j.jsx)("path",{d:"M5.468 4.584c-.23-.23-.616-.22-.86.024s-.255.63-.024.86l8.857 8.857H7.313a.625.625 0 1 0 0 1.25h7.637c.345 0 .625-.28.625-.625V7.313a.625.625 0 1 0-1.25 0v6.128z"})};(0,a(340498).wt)("arrowDiagonalDownRight",V);function L({dateRange:e}){const t=(0,R().IS)((()=>({text:{display:"flex",alignItems:"center",gap:4,whiteSpace:"nowrap"}})),[]),a=function(e){return(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.metricsChange.timePeriod",defaultMessage:"in the last {dateRange} days",values:{dateRange:c().tx[e]}})}(e);return(0,j.jsx)("span",{style:t.text,children:(0,j.jsx)(l().D,{colorVariant:"secondary",children:a})})}function F({valueText:e,valueSuffix:t,icon:a}){const{shortShimmer:n}=(0,p().Z)();return(0,j.jsxs)(r().fI,{gap:8,alignItems:"center",children:[(0,j.jsx)(o().I,{icon:a,size:"lg",colorPalette:"blue",colorVariant:"tertiary"}),void 0===e?(0,j.jsx)(u().A,{style:n}):(0,j.jsxs)(l().D,{styleKey:"Title-lg/Semibold",colorPalette:"blue",colorVariant:"accentPrimary",children:[e,t]})]})}var O=()=>a(261403),z=()=>a(857002);const U=c().zh;function W(e){const{currentFilter:t,onChangeFilter:a}=e,n=c().LP.map((e=>({key:e,value:e,title:(0,j.jsx)(s().sA,{...(0,z().YF)(e)}),shortTitle:(0,j.jsx)(s().sA,{...(0,z().YF)(e)}),wrapCaption:!1})));return(0,j.jsx)(D().G0,{pillTitle:(0,j.jsx)(s().sA,{id:"aiAnalytics.filters.product.title",defaultMessage:"Product"}),pillIcon:O().R,selectedItem:t,setSelectedItem:e=>{a(e??U)},items:n,shouldUseCheck:!0,selectionRequired:!0})}function H(){return(0,R().IS)((()=>({container:{width:"100%"},body:{display:"flex",gap:12,width:"100%"},leftColumn:{display:"flex",flexGrow:3,flexShrink:1,minWidth:"300px"},rightColumn:{flexGrow:1,flexShrink:1,minWidth:"160px",display:"flex",flexDirection:"column",justifyContent:"center"},fullHeightCard:{height:"100%"}})),[])}var K=()=>a(56366);const q="aiMembers",G="aiActions",Y="aiUsers",Q="aiTopPages",$=new(a(178624).R)({key:"aiAnalyticsPreferences",namespace:a(553737).Bq,important:!1,trackingType:"preference"});function J(e,t,a){$.update((n=>({groupBy:{...(null==n?void 0:n.groupBy)??{},[e]:{...(null==n?void 0:n.groupBy[e])??{},[t]:a}},whatToShow:(null==n?void 0:n.whatToShow)??{},globalDateRange:(null==n?void 0:n.globalDateRange)??{},productFilter:(null==n?void 0:n.productFilter)??{},dateRange:(null==n?void 0:n.dateRange)??{}})))}function Z(e,t,a){$.update((n=>{var s;return{groupBy:(null==n?void 0:n.groupBy)??{},whatToShow:(null==n?void 0:n.whatToShow)??{},globalDateRange:(null==n?void 0:n.globalDateRange)??{},productFilter:{...(null==n?void 0:n.productFilter)??{},[e]:{...(null==n||null===(s=n.productFilter)||void 0===s?void 0:s[e])??{},[t]:a}},dateRange:(null==n?void 0:n.dateRange)??{}}}))}function X(e,t,a){$.update((n=>{var s;return{groupBy:(null==n?void 0:n.groupBy)??{},whatToShow:(null==n?void 0:n.whatToShow)??{},globalDateRange:(null==n?void 0:n.globalDateRange)??{},productFilter:(null==n?void 0:n.productFilter)??{},dateRange:{...(null==n?void 0:n.dateRange)??{},[e]:{...(null==n||null===(s=n.dateRange)||void 0===s?void 0:s[e])??{},[t]:a}}}}))}function ee(e,t){return(0,K().K8)((()=>Boolean(function(e,t){var a;return null===(a=$.getState())||void 0===a||null===(a=a.groupBy[e])||void 0===a?void 0:a[t]}(e,t))),[e,t])}function te(e,t,a){return(0,K().K8)((()=>function(e,t){var a;const n=null===(a=$.getState())||void 0===a||null===(a=a.productFilter)||void 0===a||null===(a=a[e])||void 0===a?void 0:a[t];if(n&&c().LP.includes(n))return n}(e,t)??a),[e,t,a])}function ae(e,t,a){return(0,K().K8)((()=>function(e,t){var a;return null===(a=$.getState())||void 0===a||null===(a=a.whatToShow)||void 0===a||null===(a=a[e])||void 0===a?void 0:a[t]}(e,t)??a),[e,t,a])}a(898992),a(908872);var ne=()=>a(72135),se=()=>a(406944),ie=()=>a(246732),oe=()=>a(264503),re=()=>a(532564),le=()=>a(620586),de=()=>a(505776),ce=()=>a(662303),ue=()=>a(869190),pe=()=>a(379632),ge=()=>a(284371),me=()=>a(348960);function he({point:e,intl:t,tooltipStyles:a}){const n=e.color??e.series.color,s=e.series.name,i=(0,ne().ZV)(e.y??void 0,"compact",t),o=""===s?t.formatMessage(fe.empty):s;return(0,j.jsxs)("div",{style:a.row,children:[(0,j.jsxs)("div",{style:a.rowLeftContainer,children:[(0,j.jsx)("div",{style:{...a.square,backgroundColor:(0,me().SG)(n)}}),(0,j.jsx)("div",{style:a.rowLeft,children:o})]}),(0,j.jsx)("span",{style:a.rowRight,children:i})]})}const fe=(0,s().YK)({empty:{defaultMessage:"Empty",id:"analyticsChart.chart.tooltip.empty"}});function ve(e){const{seriesData:t,xAxisTitle:a,yAxisTitle:i,tooltipFooterText:o,yAxisMin:r,yAxisMax:l,xAxisMin:d,xAxisMax:c}=e,u=(0,s().tz)(),p=(0,K().uB)(void 0,de().A),g=function({footerText:e}){const t=(0,s().tz)(),a=(0,me().n9)(!1),i=(0,R().IS)((e=>({headerStyle:{fontSize:"12px",color:e.text.secondary,padding:"15px",paddingBottom:"0px",fontWeight:ge().Wy.medium},footerStyle:{fontSize:"12px",color:e.text.secondary,padding:"15px",paddingTop:"0px"}})),[]),o=(0,n.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100})),[]);return(0,n.useMemo)((()=>({...o,shared:!0,formatter(){const n=this.points??[];return pe().A.renderToStaticMarkup((0,j.jsxs)("div",{style:a.defaultContainer,children:["number"==typeof this.x?(0,j.jsx)("div",{style:i.headerStyle,children:(0,ue().W_)(this.x,"medium",ce().locale,"UTC")}):void 0,(0,j.jsx)("div",{style:a.scrollContainer,children:n.map((e=>(0,j.jsx)(he,{point:e,intl:t,tooltipStyles:a},e.key)))}),e?(0,j.jsx)("div",{style:i.footerStyle,children:e}):void 0]}))}})),[o,t,a,i,e])}({footerText:o}),m=se().O.colorful,h=m.length,f=t.map(((e,t)=>({...e,color:e.color??m[t%h],fillColor:e.fillColor??(0,le().tm)(m[t%h],!1)})));return(0,j.jsx)(re().Z,{value:p,children:(0,j.jsx)(ie().AxisChart,{tooltipOptions:g,onLoadEventHandler:()=>{},columnStacking:"normal",seriesData:f,xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:a,yAxisTitle:i,userYAxisMin:r,userYAxisMax:l,xAxisMin:d,xAxisMax:c,yLabelFormatter:e=>(0,ne().ZV)(e,e>9999?"compact":"number",u),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(u.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:!1,isThrottledLoading:!1,initialLoadingSvg:()=>(0,j.jsx)(oe().z,{chartType:"line",showCopy:!1})},weightColorValue:!1,hasData:Boolean(t.length),onLegendItemClick:e=>!1})})}function ye({dateRange:e,aiActionsAnalytics:t,productFilter:a,isGroupingByProduct:i,whatToShow:o}){const r=(0,s().tz)(),l=(0,n.useMemo)((()=>{const e=(null==t?void 0:t.actionsTimeSeries)??[];if(0===e.length)return[];const n=a===c().zh?c().B3:[a];if(i&&a===c().zh)return n.map((t=>{const a=r.formatMessage((0,z().YF)(t));return{name:a,type:"area",data:e.map((e=>{const n=e.values[t];return{x:new Date(e.ds).getTime(),y:n,name:a}})),...(0,z().rn)(t)}}));const s=r.formatMessage((0,z().YF)(a));return[{name:s,type:"area",data:e.map((e=>{const t=a===c().zh?c().B3.reduce(((t,a)=>t+e.values[a]),0):e.values[a];return{x:new Date(e.ds).getTime(),y:t,name:s}})),...(0,z().rn)(a)}]}),[null==t?void 0:t.actionsTimeSeries,r,a,i]),d=r.formatMessage(xe.date),u=o===C?r.formatMessage(xe.actionsPerUser):r.formatMessage(xe.actions),p=o===C?r.formatMessage(xe.tooltipFooterPerUser,{dateRange:r.formatMessage(c().Yr[e])}):r.formatMessage(xe.tooltipFooter,{dateRange:r.formatMessage(c().Yr[e])}),g=l.length>0,m=(0,n.useMemo)((()=>(0,z()._E)({dateRange:e})),[e]),h=g?{}:m,f=(0,n.useMemo)((()=>g?l:(0,z().pi)({intl:r,productFilter:a,isGroupingByProduct:i})),[g,l,r,a,i]);return(0,j.jsx)(ve,{tooltipFooterText:p,seriesData:f,xAxisTitle:d,yAxisTitle:u,yAxisMin:0,...h})}const xe=(0,s().YK)({date:{id:"aiAnalyticsActionsChart.xAxisLabel",defaultMessage:"Date"},actions:{id:"aiAnalyticsActionsChart.yAxisLabel",defaultMessage:"Actions"},actionsPerUser:{id:"aiAnalyticsActionsChart.yAxisLabel.perUser",defaultMessage:"Actions per user"},tooltipFooter:{id:"aiAnalyticsActionsChart.tooltip.footer",defaultMessage:"AI actions in the {dateRange}"},tooltipFooterPerUser:{id:"aiAnalyticsActionsChart.tooltip.footer.perUser",defaultMessage:"AI actions per user in the {dateRange}"}});var be=()=>a(484714),Se=()=>a(187174),Ae=()=>a(534177),je=()=>a(559506);function we({spaceStore:e,dateRange:t,onDateRangeChange:a,onApplyDateRangeToAll:n,showGlobalDateRangeButton:g=!0}){const{shortShimmer:m}=(0,p().Z)(),h=H(),f=(0,i().mI)(),v=te(e.id,G,c().zh),y=ae(e.id,G,_),x=ee(e.id,G),b=y===C?c().Wg:c().UQ,{aiActionsAnalytics:S}=function({spaceId:e,dateRange:t,timeSeriesType:a}){const n=(0,be().v3)(),[{status:s,value:i},o]=(0,Se().Yb)((async()=>{if(!e)return;const s=await je().callApi({eventName:"getAIActionsAnalytics",environment:n,data:{spaceId:e,dateRange:t,timeSeriesType:a}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Ae().HB)(s)}),[n,e,t,a]);return{loading:"pending"===s,aiActionsAnalytics:i,refetch:o}}({spaceId:e.id,dateRange:t,timeSeriesType:b}),A=void 0===(null==S?void 0:S.totalActionsCount),M=null==S?void 0:S.totalActionsCount;return(0,j.jsxs)("div",{style:h.container,children:[(0,j.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,j.jsxs)(r().fI,{children:[(0,j.jsx)(P,{currentFilter:t,onChangeFilter:a},t),(0,j.jsx)(W,{currentFilter:v,onChangeFilter:t=>Z(e.id,G,t)})]}),g?(0,j.jsx)(B,{dateRange:t,onApplyRangeToAll:e=>n(e)}):null]}),(0,j.jsxs)("div",{style:h.body,children:[(0,j.jsx)("div",{style:h.leftColumn,children:(0,j.jsxs)("div",{style:f.container,children:[(0,j.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,j.jsxs)(r().fI,{gap:4,alignItems:"center",children:[(0,j.jsx)(o().I,{icon:d().sparklesIcon,size:"sm"}),(0,j.jsx)(l().D,{styleKey:"Body/Medium",children:y===C?(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.aiActionsChart.perUserTitle",defaultMessage:"AI actions per user"}):(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.aiActionsChart.title",defaultMessage:"AI actions"})})]}),(0,j.jsx)(w,{whatToShow:y,onWhatToShowChange:t=>function(e,t,a){$.update((n=>{var s;return{groupBy:(null==n?void 0:n.groupBy)??{},whatToShow:{...(null==n?void 0:n.whatToShow)??{},[e]:{...(null==n||null===(s=n.whatToShow)||void 0===s?void 0:s[e])??{},[t]:a}},globalDateRange:(null==n?void 0:n.globalDateRange)??{},productFilter:(null==n?void 0:n.productFilter)??{},dateRange:(null==n?void 0:n.dateRange)??{}}}))}(e.id,G,t),isGroupingByProduct:x,onGroupByChange:t=>J(e.id,"aiActions",t),showWhatToShow:!0,showGroupBy:!0})]}),(0,j.jsx)("div",{style:{width:"100%"},children:(0,j.jsx)(ye,{aiActionsAnalytics:S,dateRange:t,spaceId:e.id,productFilter:v,isGroupingByProduct:x,whatToShow:y})})]})}),(0,j.jsx)("div",{style:h.rightColumn,children:(0,j.jsx)("div",{style:{...f.container,...h.fullHeightCard},children:(0,j.jsx)(i().YQ,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.totalAIActions.title",defaultMessage:"Total AI actions"}),content:A?(0,j.jsx)(u().A,{style:m}):(0,j.jsx)(F,{icon:d().sparklesIcon,valueText:null==M?void 0:M.toLocaleString()}),byline:(0,j.jsx)(L,{dateRange:t}),alignItems:"center"})})})]})]})}var _e=()=>a(835607);function Ce({dateRange:e,productFilter:t,isGroupingByProduct:a,aiMembersAnalytics:i}){const o=(0,s().tz)(),r=(0,n.useMemo)((()=>{const e=(null==i?void 0:i.membersTimeSeries)??[];if(0===e.length)return[];const n=t===c().zh?c().B3:[t];if(a&&t===c().zh)return n.map((t=>{const a=o.formatMessage((0,z().YF)(t));return{name:a,type:"area",data:e.map((e=>{const n=e.values[t];return{x:new Date(e.ds).getTime(),y:n,name:a}})),...(0,z().rn)(t)}}));const s=o.formatMessage((0,z().YF)(t));return[{name:s,type:"area",data:e.map((e=>{const a=t===c().zh?e.ai_users_total:e.values[t];return{x:new Date(e.ds).getTime(),y:a,name:s}})),...(0,z().rn)(t)}]}),[null==i?void 0:i.membersTimeSeries,o,t,a]),l=o.formatMessage(Me.date),d=o.formatMessage(Me.members),u=o.formatMessage(Me.tooltipFooter,{dateRange:o.formatMessage(c().Yr[e])}),p=r.length>0,g=(0,n.useMemo)((()=>(0,z()._E)({dateRange:e})),[e]),m=p?{}:g,h=(0,n.useMemo)((()=>p?r:(0,z().pi)({intl:o,productFilter:t,isGroupingByProduct:a})),[p,r,o,t,a]);return(0,j.jsx)(ve,{tooltipFooterText:u,seriesData:h,xAxisTitle:l,yAxisTitle:d,...m})}const Me=(0,s().YK)({date:{id:"aiAnalyticsMembersChart.xAxisLabel",defaultMessage:"Date"},members:{id:"aiAnalyticsMembersChart.yAxisLabel",defaultMessage:"Members"},tooltipFooter:{id:"aiAnalyticsMembersChart.tooltip.footer",defaultMessage:"Active AI members in the {dateRange}"}});function Te({spaceStore:e,dateRange:t,onDateRangeChange:a,onApplyDateRangeToAll:n,showGlobalDateRangeButton:g=!0}){const m=te(e.id,q,c().zh),h=ee(e.id,q),f=H(),v=(0,i().mI)(),{shortShimmer:y}=(0,p().Z)(),{loading:x,aiMembersAnalytics:b}=function({spaceId:e,dateRange:t}){const a=(0,be().v3)(),[{status:n,value:s},i]=(0,Se().Yb)((async()=>{if(!e)return;const n=await je().callApi({eventName:"getAIMembersAnalytics",environment:a,data:{spaceId:e,dateRange:t}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,Ae().HB)(n)}),[a,e,t]);return{loading:"pending"===n,aiMembersAnalytics:s,refetch:i}}({spaceId:e.id,dateRange:t}),S=null==b?void 0:b.activeAiMembers,A=null==b?void 0:b.allActiveMembers;return(0,j.jsxs)("div",{style:f.container,children:[(0,j.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,j.jsxs)(r().fI,{children:[(0,j.jsx)(P,{currentFilter:t,onChangeFilter:a},t),(0,j.jsx)(W,{currentFilter:m,onChangeFilter:t=>Z(e.id,q,t)})]}),g?(0,j.jsx)(B,{dateRange:t,onApplyRangeToAll:e=>n(e)}):null]}),(0,j.jsxs)("div",{style:f.body,children:[(0,j.jsx)("div",{style:f.leftColumn,children:(0,j.jsxs)("div",{style:v.container,children:[(0,j.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,j.jsxs)(r().fI,{gap:4,alignItems:"center",children:[(0,j.jsx)(o().I,{icon:_e().F,size:"sm"}),(0,j.jsx)(l().D,{styleKey:"Body/Medium",children:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.aiMembersChart.title",defaultMessage:"Active AI members"})})]}),(0,j.jsx)(w,{isGroupingByProduct:h,onGroupByChange:t=>J(e.id,"aiMembers",t),showWhatToShow:!1,showGroupBy:!0})]}),(0,j.jsx)("div",{style:{width:"100%"},children:(0,j.jsx)(Ce,{dateRange:t,productFilter:m,isGroupingByProduct:h,aiMembersAnalytics:b})})]})}),(0,j.jsxs)("div",{style:f.rightColumn,children:[(0,j.jsx)("div",{style:{...v.container,...f.fullHeightCard},children:(0,j.jsx)(i().YQ,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.totalActive.title",defaultMessage:"Active AI members"}),content:x?(0,j.jsx)(u().A,{style:y}):(0,j.jsx)(F,{icon:_e().F,valueText:null==S?void 0:S.toLocaleString()}),byline:(0,j.jsx)(L,{dateRange:t}),alignItems:"center"})}),(0,j.jsx)("div",{style:{...v.container,...f.fullHeightCard},children:(0,j.jsx)(i().YQ,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.adoptionRate.title",defaultMessage:"AI utilization"}),content:x?(0,j.jsx)(u().A,{style:y}):(0,j.jsx)(F,{icon:d().sparklesIcon,valueText:void 0!==A&&A>0&&void 0!==S?Math.round(S/A*100).toLocaleString():void 0,valueSuffix:"%"}),byline:(0,j.jsx)(L,{dateRange:t}),alignItems:"center"})})]})]})]})}a(18107),a(967357);var ke=()=>a(887720),Ie=()=>a(246682),De=()=>a(120229),Ne=()=>a(495427);function Pe(e,t,a){return(0,K().K8)((()=>{const n=function(e,t){var a;const n=null===(a=$.getState())||void 0===a||null===(a=a.dateRange)||void 0===a||null===(a=a[e])||void 0===a?void 0:a[t];if(n&&c().CA.includes(n))return n}(e,t);if(n)return n;const s=function(e){var t;return null===(t=$.getState())||void 0===t||null===(t=t.globalDateRange)||void 0===t?void 0:t[e]}(e);return s||a}),[e,t,a])}var Ee=()=>a(179034),Be=()=>a(148832),Re=()=>a(641300),Ve=()=>a(566468),Le=()=>a(860864),Fe=()=>a(125565),Oe=()=>a(706558),ze=()=>a(743556);const Ue=(0,s().YK)({page:{id:"aiAnalytics.topPages.pageColumn.header",defaultMessage:"Page"},returnedColumn:{id:"spaceAnalytics.aiAnalytics.topPages.sort.returnedColumn",defaultMessage:"Total times returned via AI"},returnedCount:{id:"spaceAnalytics.aiAnalytics.topPages.sort.returnedCount",defaultMessage:"Returned count"}});function We(e){return{id:"page",headerTitle:(0,j.jsx)(s().sA,{...Ue.page}),renderCell:t=>t.type===ze().T.Loading?(0,j.jsx)(Ve().mf,{containerStyles:{width:200}}):(0,j.jsx)(Le().EB,{store:Be().B.createChildStore(e,{table:Ee().ev,id:t.blockId})}),widthData:{width:75,maxWidth:275},sortable:!1}}const He={id:"returnedCount",headerTitle:(0,j.jsx)(s().sA,{...Ue.returnedColumn}),renderCell:e=>e.type===ze().T.Loading?(0,j.jsx)(Ve().mf,{containerStyles:{width:100}}):(0,j.jsx)(Fe().A,{children:e.returnedCount.toLocaleString()}),widthData:{widthPercent:25,minWidth:120},sortable:!1};function Ke({spaceStore:e,pages:t,loadMoreMethod:a,loading:i}){const o=n.useMemo((()=>[We(e),He]),[e]),r=(0,R().IS)((e=>(0,Re().rC)({columnRenderInfo:o,theme:e,containerMarginTop:0})),[o]),l=(0,n.useMemo)((()=>i?(0,ze().n)():(null==t?void 0:t.map((e=>({type:ze().T.AIAnalyticsTopPagesRow,id:e.blockId,isClickable:!1,blockId:e.blockId,returnedCount:e.returnedCount,viewedCount:e.viewedCount}))))??[]),[t,i]);return(0,j.jsx)(Re().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:o,rows:l,renderNoRowsComponent:()=>(0,j.jsx)(Oe().p,{icon:void 0,title:(0,j.jsx)(s().sA,{id:"aiAnalytics.topPages.empty",defaultMessage:"No pages found"}),byline:(0,j.jsx)(s().sA,{id:"aiAnalytics.topPages.empty.byline",defaultMessage:"There are no pages that match your filters"})}),styles:r,showRowBorders:!0,loadMoreMethod:a,extendToFullScreen:{rightPaddingPx:0,extendTableToFullWidthOffsetPx:0}})}function qe({spaceStore:e}){const t=Pe(e.id,Q,N),[a,o]=(0,n.useState)(""),l=[{id:"returnedCount",name:(0,s().tz)().formatMessage(Ue.returnedCount),type:"number"}],[d,c]=(0,n.useState)(void 0),[u,p]=(0,n.useState)(),[g,m]=(0,n.useState)(!1),h=u??(d?[Ge(d)]:[]),f=(0,K().K8)((()=>e.id),[e]),{loading:v,pages:y,loadMoreMethod:x}=function({spaceId:e,dateRange:t,query:a,limit:s=10,sort:i}){const o=(0,be().v3)(),[r,l]=(0,n.useState)(void 0),[d,c]=(0,n.useState)([]);(0,n.useEffect)((()=>{l(void 0),c([])}),[e,t,a,s,i]);const[{value:u,status:p}]=(0,Se().Yb)((async()=>{const n=await je().callApi({eventName:"getAITopPagesAnalytics",environment:o,data:{spaceId:e,dateRange:t,sort:i,query:a,startCursor:d.at(-1),limit:s}});if("success"===n.type)return l(n.data.nextCursor),n.data;if("failed"===n.type)throw n.error}),[o,e,t,a,d,s,i]),g=(0,n.useMemo)((()=>({type:"pages",hasPrevPage:d.length>0,hasNextPage:Boolean(r),currentPage:d.length+1,finalPage:null!=u&&u.totalCount&&s?Math.max(1,Math.ceil(u.totalCount/s)):void 0,onLoadPrevious:()=>{l(d.at(-1)),c((e=>e.slice(0,-1)))},onLoadNext:()=>{r&&(c((e=>[...e,r])),l(void 0))}})),[r,d,null==u?void 0:u.totalCount,s]);return{loading:"pending"===p,pages:null==u?void 0:u.pages,loadMoreMethod:g}}({spaceId:f,dateRange:t,query:a,limit:10,sort:d}),b=(0,De().w)(),S=H();return(0,j.jsxs)("div",{style:S.container,children:[(0,j.jsxs)("div",{style:{...b.actionContainer,marginInline:0},children:[(0,j.jsxs)("div",{style:b.filters,children:[(0,j.jsx)(Ie().e,{isMenuOpen:g,setIsMenuOpen:m,sortProperties:l,onApply:e=>{m(!1),p(void 0);const t=e.at(0);c(t?function(e){return{field:"returned_count",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:h,preventMultipleSorts:!0}),(0,j.jsx)(r().fI,{children:(0,j.jsx)(P,{currentFilter:t,onChangeFilter:t=>X(e.id,Q,t)})})]}),(0,j.jsxs)("div",{style:b.rightContent,children:[(0,j.jsx)(ke().x,{sortProperties:l,appliedSorts:d?[Ge(d)]:void 0,openSortPillMenu:e=>{e&&p([{propertyId:e,direction:"descending"}]),m(!0)}}),(0,j.jsx)(Ne().nv,{mode:Ne().Ke.AnimatedSearchButton,query:a,setQueryFilter:o})]})]}),(0,j.jsx)(i().YQ,{title:void 0,content:(0,j.jsx)(Ke,{spaceStore:e,pages:y,loadMoreMethod:x,loading:v}),byline:void 0,fullWidth:!0})]})}function Ge(e){return{propertyId:"returnedCount",direction:"desc"===e.direction?"descending":"ascending"}}var Ye=()=>a(651818);const Qe=(0,s().YK)({aiActions:{id:"spaceAnalytics.aiAnalytics.aiUsers.sort.aiActions",defaultMessage:"AI actions"},user:{id:"spaceAnalytics.aiAnalytics.aiUsers.sort.user",defaultMessage:"User"},actionsColumn:{id:"aiAnalytics.usersTable.actionsColumn.header",defaultMessage:"AI actions"}}),$e={id:"user",headerTitle:(0,j.jsx)(s().sA,{...Qe.user}),renderCell:e=>e.type===ze().T.Loading?(0,j.jsx)(Ye().a_,{}):(0,j.jsx)(Ye()._H,{userId:e.userId,showEmailByline:!0}),widthData:{widthPercent:75,minWidth:275},sortable:!1,shouldShowSortTooltip:!1},Je={id:"aiActions",headerTitle:(0,j.jsx)(s().sA,{...Qe.actionsColumn}),renderCell:e=>e.type===ze().T.Loading?(0,j.jsx)(Ve().mf,{containerStyles:{width:100}}):(0,j.jsx)(Fe().A,{children:e.actionCount.toLocaleString()}),widthData:{widthPercent:25,minWidth:120},sortable:!1,shouldShowSortTooltip:!1};function Ze({users:e,loadMoreMethod:t,loading:a}){const i=n.useMemo((()=>[$e,Je]),[]),o=(0,R().IS)((e=>(0,Re().rC)({columnRenderInfo:i,theme:e,containerMarginTop:0})),[i]),r=(0,n.useMemo)((()=>{if(a)return(0,ze().n)();return(e??[]).map((e=>({type:ze().T.AIAnalyticsUsersRow,id:e.userId,isClickable:!1,userId:e.userId,actionCount:e.actionCount})))}),[e,a]);return(0,j.jsx)(Re().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:i,rows:r,renderNoRowsComponent:()=>(0,j.jsx)(Oe().p,{icon:void 0,title:(0,j.jsx)(s().sA,{id:"aiAnalytics.usersTable.empty",defaultMessage:"No users found"}),byline:(0,j.jsx)(s().sA,{id:"aiAnalytics.usersTable.empty.byline",defaultMessage:"There are no users that match your filters"})}),styles:o,showRowBorders:!0,loadMoreMethod:t,extendToFullScreen:{rightPaddingPx:0,extendTableToFullWidthOffsetPx:0}})}function Xe({spaceStore:e}){const t=Pe(e.id,Y,N),a=te(e.id,Y,c().zh),[o,l]=(0,n.useState)(""),d=(0,s().tz)(),u=[{id:"aiActions",name:d.formatMessage(Qe.aiActions),type:"number"},{id:"user",name:d.formatMessage(Qe.user),type:"text"}],[p,g]=(0,n.useState)(void 0),[m,h]=(0,n.useState)(),[f,v]=(0,n.useState)(!1),y=m??(p?[et(p)]:[]),x=(0,K().K8)((()=>e.id),[e]),{loading:b,users:S,loadMoreMethod:A}=function({spaceId:e,dateRange:t,productFilter:a,query:s,limit:i=10,sort:o}){const r=(0,be().v3)(),[l,d]=(0,n.useState)(void 0),[c,u]=(0,n.useState)([]);(0,n.useEffect)((()=>{d(void 0),u([])}),[e,t,a,s,i,o]);const[{value:p,status:g}]=(0,Se().Yb)((async()=>{const n=await je().callApi({eventName:"getAIUsersAnalytics",environment:r,data:{spaceId:e,dateRange:t,sort:o,query:s,filters:a?{product:a}:void 0,startCursor:c.at(-1),limit:i}});if("success"===n.type)return d(n.data.nextCursor),n.data;if("failed"===n.type)throw n.error}),[r,e,t,a,s,c,i,o]),m=(0,n.useMemo)((()=>({type:"pages",hasPrevPage:c.length>0,hasNextPage:Boolean(l),currentPage:c.length+1,finalPage:null!=p&&p.totalCount&&i?Math.max(1,Math.ceil(p.totalCount/i)):void 0,onLoadPrevious:()=>{d(c.at(-1)),u((e=>e.slice(0,-1)))},onLoadNext:()=>{l&&(u((e=>[...e,l])),d(void 0))}})),[l,c,null==p?void 0:p.totalCount,i]);return{loading:"pending"===g,users:null==p?void 0:p.users,loadMoreMethod:m}}({spaceId:x,dateRange:t,productFilter:a===c().zh?void 0:a,query:o,limit:10,sort:p}),w=(0,De().w)(),_=H();return(0,j.jsxs)("div",{style:_.container,children:[(0,j.jsxs)("div",{style:{...w.actionContainer,marginInline:0},children:[(0,j.jsxs)("div",{style:w.filters,children:[(0,j.jsx)(Ie().e,{isMenuOpen:f,setIsMenuOpen:v,sortProperties:u,onApply:e=>{v(!1),h(void 0);const t=e.at(0);g(t?function(e){return{field:"aiActions"===e.propertyId?"action_count":"user",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:y,preventMultipleSorts:!0}),(0,j.jsxs)(r().fI,{children:[(0,j.jsx)(P,{currentFilter:t,onChangeFilter:t=>X(e.id,Y,t)}),(0,j.jsx)(W,{currentFilter:a,onChangeFilter:t=>Z(e.id,Y,t)})]})]}),(0,j.jsxs)("div",{style:w.rightContent,children:[(0,j.jsx)(ke().x,{sortProperties:u,appliedSorts:p?[et(p)]:void 0,openSortPillMenu:e=>{e&&h([{propertyId:e,direction:"descending"}]),v(!0)}}),(0,j.jsx)(Ne().nv,{mode:Ne().Ke.AnimatedSearchButton,query:o,setQueryFilter:l})]})]}),(0,j.jsx)(i().YQ,{title:void 0,content:(0,j.jsx)(Ze,{users:S,loadMoreMethod:A,loading:b}),byline:void 0,fullWidth:!0})]})}function et(e){return{propertyId:"action_count"===e.field?"aiActions":"user",direction:"desc"===e.direction?"descending":"ascending"}}function tt({spaceStore:e,showGlobalDateRangeButton:t=!0}){const a=Pe(e.id,q,N),n=Pe(e.id,G,N),o=t=>{var a,n;a=e.id,n=t,$.update((e=>({groupBy:(null==e?void 0:e.groupBy)??{},whatToShow:(null==e?void 0:e.whatToShow)??{},globalDateRange:{...(null==e?void 0:e.globalDateRange)??{},[a]:n},productFilter:(null==e?void 0:e.productFilter)??{},dateRange:(null==e?void 0:e.dateRange)??{}}))),function(e){$.update((t=>({groupBy:(null==t?void 0:t.groupBy)??{},whatToShow:(null==t?void 0:t.whatToShow)??{},globalDateRange:(null==t?void 0:t.globalDateRange)??{},productFilter:(null==t?void 0:t.productFilter)??{},dateRange:{...(null==t?void 0:t.dateRange)??{},[e]:{}}})))}(e.id)};return(0,j.jsxs)("div",{children:[(0,j.jsx)(i().XY,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.title",defaultMessage:"AI members"}),byline:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.description",defaultMessage:"Tracks how many unique members actively use AI in the workspace"}),content:(0,j.jsx)(Te,{spaceStore:e,dateRange:a,onDateRangeChange:t=>X(e.id,q,t),onApplyDateRangeToAll:o,showGlobalDateRangeButton:t})}),(0,j.jsx)(i().XY,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.title",defaultMessage:"AI actions"}),byline:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.description",defaultMessage:"Tracks the total number of AI actions taken across the workspace"}),content:(0,j.jsx)(we,{spaceStore:e,dateRange:n,onDateRangeChange:t=>X(e.id,G,t),onApplyDateRangeToAll:o,showGlobalDateRangeButton:t})}),(0,j.jsx)(i().XY,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiUsers.title.section",defaultMessage:"AI users"}),byline:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.aiUsers.description",defaultMessage:"Members and their attributed AI usage"}),content:(0,j.jsx)(Xe,{spaceStore:e})}),(0,j.jsx)(i().XY,{title:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.topPages.title.section",defaultMessage:"Top 100 AI pages"}),byline:(0,j.jsx)(s().sA,{id:"spaceAnalytics.aiAnalytics.topPages.description",defaultMessage:"Pages most frequently returned by AI responses"}),content:(0,j.jsx)(qe,{spaceStore:e})})]})}},404302:(e,t,a)=>{a.d(t,{p:()=>n});const n=["private","shared_internally","shared_externally","shared_to_web"]},421645:(e,t,a)=>{a.d(t,{E:()=>h});a(898992),a(354520),a(296540);var n=()=>a(56366),s=()=>a(252291),i=()=>a(471095),o=()=>a(888867),r=()=>a(433847),l=()=>a(68263),d=()=>a(69708),c=()=>a(569028),u=()=>a(566468),p=()=>a(112772),g=a(474848),m=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(m||{});function h({blockStore:e,teamStore:t}){const a=(0,n().K8)((()=>{const t=(0,c().E)(e),a=(0,r().wD)(t),n=a.filter((e=>!(0,l().T6)(e)));return 1===n.length&&(0,l().B2)(n[0])?m.Private:a.length>0?m.Shared:m.Hidden}),[e]);return t?(0,g.jsx)(p().o,{useThinTitle:!0,teamStore:t}):function(){switch(a){case m.Shared:return(0,g.jsx)(u().s7,{useThinTitle:!0,icon:(0,g.jsx)(s().I,{icon:o().s,colorVariant:"tertiary"}),title:(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case m.Hidden:case m.Private:return(0,g.jsx)(u().s7,{useThinTitle:!0,icon:(0,g.jsx)(s().I,{icon:i().i,colorVariant:"tertiary"}),title:(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},452177:(e,t,a)=>{a.d(t,{Ay:()=>Aa,Sr:()=>Ca});var n=a(296540),s=()=>a(314529),i=()=>a(59226),o=()=>a(242422),r=()=>a(726637),l=()=>a(662303),d=()=>a(484714),c=()=>a(852507),u=()=>a(56366),p=()=>a(401497),g=()=>a(699143),m=()=>a(406094),h=()=>a(160432),f=()=>a(584262),v=()=>a(179034),y=()=>a(96689),x=()=>a(294712),b=()=>a(69708),S=()=>a(209199),A=()=>a(966505),j=()=>a(745638),w=()=>a(559506),_=()=>a(920093),C=()=>a(901389),M=()=>a(370872),T=()=>a(384944),k=()=>a(666144),I=()=>a(706024);const D=(0,a(583835).Dv)("deleteSpace");var N=()=>a(357625),P=()=>a(496414);const E=(0,b().YK)({deletingWorkspace:{id:"spaceActions.deleteSpace.deletingWorkspace",defaultMessage:"Deleting workspace…"}});var B=()=>a(601866),R=()=>a(665859),V=()=>a(231297),L=()=>a(972435),F=()=>a(709062),O=()=>a(232930),z=()=>a(625247),U=()=>a(665381),W=()=>a(5813),H=()=>a(249847),K=()=>a(124749),q=()=>a(176983),G=()=>a(152197),Y=()=>a(564884),Q=()=>a(166386),$=()=>a(350005),J=()=>a(369955),Z=()=>a(324561),X=()=>a(911964),ee=()=>a(898255),te=()=>a(550729),ae=()=>a(300789),ne=()=>a(355049),se=()=>a(493552),ie=()=>a(427704),oe=()=>a(284371),re=()=>a(859428),le=()=>a(690197),de=()=>a(8178),ce=()=>a(204486),ue=()=>a(131448),pe=()=>a(72563),ge=()=>a(179030),me=a(474848);function he({onClick:e}){const t=(0,d().v3)(),a=(0,G().r)();return(0,c().w)((()=>{a&&(0,Y().u)({environment:t,event:{eventName:"referral_offer_banner_viewed",eventProperties:{space_id:a}}})})),(0,me.jsx)(ge().l,{display:"inline-compact",label:"You've referred 3 friends to Notion, get 50% off Plus now",actions:[{label:"Redeem offer",onClick:e}],tint:"gray",staticIcon:pe().priceTagFillIcon,iconColor:"blue"})}const fe=(0,b().YK)({title:{id:"spaceBasicSettings.workspaceReferralSection.title",defaultMessage:"Referrals"},subtitle:{id:"spaceBasicSettings.workspaceReferralSection.subtitle",defaultMessage:"Share Notion with others"},tooltip:{id:"spaceBasicSettings.workspaceReferralSection.tooltip",defaultMessage:"Share Notion with new users. Redeem your offer when your referrals complete sign-up. Click to learn more."},caption:{id:"spaceBasicSettings.workspaceReferralSection.caption",defaultMessage:"Refer 3 people to Notion and get 50% off Plus for 12 months"},redemptionCounter:{id:"spaceBasicSettings.workspaceReferralSection.redemptionCounter",defaultMessage:"{count, plural, =0{0/3 redemptions} one{1/3 redemptions} =2{2/3 redemptions} =3{3/3 redemptions} other{# redemptions}}"},shareButtonLabel:{id:"spaceBasicSettings.workspaceReferralSection.share.button.label",defaultMessage:"Share"},tooltipBody:{id:"spaceBasicSettings.workspaceReferralSection.tooltip.body",defaultMessage:"Click to learn more about eligibility."}});function ve({onShareClick:e,onClaimClick:t,canClaimReferralOffer:a,referralEntry:s}){const i=(0,p().IS)((e=>({settingsItem:{paddingBottom:24},questionMarkCircleIcon:{width:16,height:16,fontWeight:oe().Wy.medium,fill:e.gray.text.primary},tooltipBody:{color:e.text.inverseSecondary}})),[]),[o,r]=(0,n.useState)(0);(0,n.useEffect)((()=>{r((0,$().Nw)(s))}),[s,null==s?void 0:s.redeemed_spaces]);const l=(0,n.useRef)(null),d=(0,u().K8)((()=>ue().default.isVisible("share_referral_link_notification_tooltip")),[]),c=(0,p().IS)((e=>({button:{boxShadow:d?e.buttonBlueFocusRing:void 0}})),[d]);return(0,me.jsxs)("div",{style:{...i.settingsItem},children:[(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{...fe.title})}),(0,me.jsxs)(g().Y1,{gap:16,direction:"vertical",children:[a?(0,me.jsx)(he,{onClick:t}):null,(0,me.jsxs)(g().Y1,{direction:"horizontal",children:[(0,me.jsxs)(g().Y1,{direction:"vertical",gap:3,children:[(0,me.jsx)(g().Y1,{direction:"horizontal",gap:8,children:(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,me.jsx)(se().D,{styleKey:"Body/Regular",colorVariant:"primary",children:(0,me.jsx)(b().sA,{...fe.subtitle})}),(0,me.jsx)(re().A,{textWrap:!0,style:{minWidth:250},placement:"top",renderTooltip:()=>(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,me.jsx)("div",{children:(0,me.jsx)(b().sA,{...fe.tooltip})}),(0,me.jsx)("div",{style:i.tooltipBody,children:(0,me.jsx)(b().sA,{...fe.tooltipBody})})]}),render:e=>(0,me.jsx)("div",{...e,children:(0,me.jsx)(le().A,{href:ie().JZ.notionPlusReferralTerms,analyticsFrom:"space_settings"})})})]})}),(0,me.jsx)(se().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,me.jsx)(b().sA,{...fe.caption})})]}),(0,me.jsxs)(g().Y1,{gap:16,direction:"horizontal",align:"center-right",width:"hug",children:[(0,me.jsx)(se().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,me.jsx)(b().sA,{...fe.redemptionCounter,values:{count:o}})}),d?(0,me.jsx)(ce().PD,{origin:l}):void 0,(0,me.jsx)(h().A,{colorPalette:"blue",size:"lg",onClick:()=>e(),ref:l,style:c.button,children:(0,me.jsx)(b().sA,{...fe.shareButtonLabel})})]})]})]})]})}function ye({}){const e=(0,te().z)("fetch_only"),[t,a]=(0,n.useState)(!1),[s,i]=(0,n.useState)(0),o=(0,d().v3)(),r=(0,J().L)(),l=(0,Z()._3)({spaceId:null==r?void 0:r.id});return(0,c().w)((()=>{(0,ee().DW)(o)})),(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ve,{canClaimReferralOffer:(0,$().zj)(e),onShareClick:()=>{i((e=>e+1)),a(!0)},onClaimClick:()=>{(0,X().F)({environment:o,spaceStore:r,billingData:l,product:"plus",from:"referral_settings_banner",offer:(0,Q().Pz)("referral_50")}),null!=r&&r.id&&(0,Y().u)({environment:o,event:{eventName:"click_redeem_referral_offer",eventProperties:{space_id:r.id}}})},referralEntry:e}),(0,me.jsx)(ne().E,{isOpen:t,onClose:()=>{a(!1),ae().a(o,"referral_announcement")},source:"referral_settings"},s)]})}var xe=()=>a(28119),be=()=>a(765957),Se=()=>a(592674),Ae=()=>a(148832),je=()=>a(132813),we=()=>a(189157),_e=()=>a(194763),Ce=()=>a(404141),Me=()=>a(469776),Te=()=>a(208993),ke=()=>a(112698),Ie=()=>a(329304),De=()=>a(134217),Ne=()=>a(749240),Pe=()=>a(500128),Ee=()=>a(866893),Be=()=>a(623580),Re=()=>a(187820),Ve=()=>a(125565),Le=()=>a(98126),Fe=()=>a(21140),Oe=()=>a(702723);function ze(e){const{activeExportsStoreState:t,spaceStore:a,handleExportClick:n}=e,s=(0,u().K8)((()=>null==a?void 0:a.getName()),[a]),i=(0,b().tz)();return(0,me.jsx)(Oe().A,{isMobile:Boolean(r().A.isMobile),type:"custom",title:(0,me.jsxs)(g().Y1,{direction:"horizontal",gap:2,align:"center-left",children:[i.formatMessage(Ue.workspaceContent),(0,me.jsx)(Te().W,{tooltipTitle:i.formatMessage(Ue.tooltipTitle)})]}),caption:i.formatMessage(Ue.description,{spaceName:s}),customButton:(0,me.jsx)(m().A,{size:"md",onClick:n,disabled:Boolean(t.count),children:i.formatMessage(Ue.exportButton)})})}const Ue=(0,b().YK)({exportContentTitle:{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"},exportButtonLabel:{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"},exportInProgress:{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"},helpCaption:{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."},workspaceContent:{id:"spaceBasicSettings.exportContentSettingsItem.title",defaultMessage:"Workspace content"},tooltipTitle:{id:"spaceBasicSettings.exportContentSettingsItem.tooltipTitle",defaultMessage:"Learn More"},description:{id:"spaceBasicSettings.exportContentSection.description",defaultMessage:"Export all pages in {spaceName} as HTML, Markdown, CSV or PDF"},exportButton:{id:"spaceBasicSettings.exportContentSection.button",defaultMessage:"Export"}}),We=function({handleExportClick:e}){const t=(0,u().O$)(be().AppStoreSidebarSpaceStore),s=(0,u().O$)(a(544019).A),o=(0,d().v3)(),r=(0,i().X)("upgrade_system_settings"),l=(0,b().tz)();return(0,n.useEffect)((()=>{M().X({environment:o,spaceId:null==t?void 0:t.id})}),[null==t?void 0:t.id,o]),r?(0,me.jsx)(ze,{activeExportsStoreState:s,spaceStore:t,handleExportClick:e}):(0,me.jsxs)(n.Fragment,{children:[(0,me.jsx)(de().A,{children:l.formatMessage(Ue.exportContentTitle)}),(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,me.jsx)(m().A,{disabled:Boolean(s.count),size:"lg",onClick:e,children:l.formatMessage(Ue.exportButtonLabel)}),s.count?(0,me.jsxs)(Fe().Ye,{gap:4,children:[(0,me.jsx)(Le().k,{}),(0,me.jsxs)(Ve().A,{isSmall:!0,children:[l.formatMessage(Ue.exportInProgress),s.exportedPageCount?(0,me.jsx)(me.Fragment,{children:` (${s.exportedPageCount} pages exported)`}):(0,me.jsx)(me.Fragment,{})]})]}):(0,me.jsx)(me.Fragment,{})]}),(0,me.jsx)("div",{style:{height:12}}),(0,me.jsx)(le().A,{title:l.formatMessage(Ue.helpCaption),href:(0,O().x)("guides.exportWorkspace"),analyticsFrom:"space_settings"})]})};var He=()=>a(600329),Ke=()=>a(599813),qe=()=>a(534177),Ge=()=>a(843224),Ye=()=>a(663234),Qe=()=>a(157529),$e=()=>a(285790),Je=(a(898992),a(354520),a(581454),()=>a(252291)),Ze=()=>a(30537),Xe=()=>a(187174),et=()=>a(344417),tt=()=>a(696746),at=()=>a(106628),nt=()=>a(939740),st=()=>a(417392),it=()=>a(305390),ot=()=>a(89924);const rt=3;function lt(e){const{spaceStore:t,initialFocus:a,disabled:s,onPageSelect:i,onResetInput:o}=e,[r,l]=(0,n.useState)(""),[d,c]=(0,n.useState)(!1),u=(0,p().IS)((()=>({resultsPopup:{width:250}})),[]),g=(0,n.useCallback)((e=>{i(e),c(!1)}),[i,c]),m=(0,n.useCallback)((()=>{c(!1)}),[c]),h=(0,n.useCallback)((()=>{d||o()}),[d,o]);return(0,me.jsx)(st().Ay,{alignmentToOrigin:"start",origin:(0,me.jsx)(dt,{initialFocus:a,disabled:s,query:r,setQuery:l,setShowResults:c,onBlurInput:h}),originGap:3,open:d,popupType:Ze().n.Popup,style:u.resultsPopup,render:()=>(0,me.jsx)(ct,{query:r,onSelection:g,spaceStore:t}),onDismiss:m,trapFocus:!1})}function dt(e){const{initialFocus:t,disabled:a,query:s,setQuery:i,setShowResults:o,onBlurInput:r}=e,l=(0,b().tz)(),d=(0,p().IS)((e=>({input:{display:"flex",flex:1,paddingInlineStart:4}})),[]),c=(0,n.useCallback)((e=>{i(e.target.value),o(!0)}),[i,o]),u=(0,n.useCallback)((()=>{o(!0)}),[o]),g=(0,n.useCallback)((e=>{"Escape"===e.key&&o(!1)}),[o]);return(0,me.jsx)(Be().A,{type:"text",focusInitial:t,disabled:a,onChange:c,onFocus:u,onBlur:r,onKeyDown:g,format:Be().C.Transparent,style:d.input,value:s,left:(0,me.jsx)(Je().I,{icon:et().u,size:"sm"}),placeholder:l.formatMessage({id:"spaceBasicSettings.gettingStarted.searchPlaceholder",defaultMessage:"Select a page"})})}function ct(e){const{query:t,onSelection:a,spaceStore:n}=e,s=(0,d().v3)(),i=(0,p().IS)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginInlineStart:8}})),[]),[{value:o,status:r}]=(0,Xe().Yb)((async()=>(await at().T.searchActions.load()).searchPagesInSpace({environment:s,query:t,limit:20,spaceId:n.id,requireEditPermissions:!1,excludeTemplates:!0,source:"relation_menu",boostRecentlyViewedPages:!1,spaceStore:n,filterOverrides:{includePublicPagesWithoutExplicitAccess:!1,requireEditPermissions:!1},peopleBlocksToInclude:"none"})),[t,s,n]),l=(0,u().K8)((()=>{if("idle"===r||"pending"===r)return[{key:"results-loading-spinner",render:()=>(0,me.jsx)(Le().A,{style:i.loadingSpinner}),action:()=>{}}];if(!o||0===o.results.length)return[{key:"empty-results",render:()=>(0,me.jsx)(Ve().A,{isSmall:!0,style:{paddingInlineStart:8,paddingTop:4,paddingBottom:4},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.gettingStarted.noResults",defaultMessage:"No pages found"})}),action:()=>{}}];const e=o.results.filter((e=>{const t=new(Ae().B)(s,{table:v().ev,id:e.id,spaceId:e.spaceId});return!t.isPersonProfile()&&!(0,tt().lU)(t.getParentBlockStore())})).map((e=>{const t=new(Ae().B)(s,{table:v().ev,id:e.id,spaceId:e.spaceId});return{key:e.id,render:e=>(0,me.jsx)(it().A,{store:t,...e}),action:()=>{a(e.id)}}}));return""===t?e.splice(0,rt):e}),[s,o,a,i,r,t]);return(0,me.jsx)(nt().Ay,{type:nt().Oh.Vertical,sections:[{key:"getting-started-search-results",render:e=>(0,me.jsx)(ot().A,{...e}),items:l}],initialFocus:void 0})}const ut=(0,b().YK)({block_limit:{id:"spaceBasicSettings.gettingStartedPage.error.tooLarge",defaultMessage:"This page is too big to be used as a template. Please reduce the number of blocks, or select a smaller page."},page_permissions:{id:"spaceBasicSettings.gettingStartedPage.error.pagePermissions",defaultMessage:"Not everyone in the workspace can view your selected page. Please update the page permissions from the page’s Share menu."},user_permissions:{id:"spaceBasicSettings.gettingStartedPage.error.userPermissions",defaultMessage:"You do not have permissions to change this."}});function pt(e){const{gettingStartedPageStore:t,gettingStartedPageErrors:a,spaceStore:s}=e,i=(0,d().v3)(),o=(0,b().tz)(),[r,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[g,m]=(0,n.useState)(a.length?o.formatMessage(ut[a[0]]):void 0),h=(0,p().IS)((e=>({container:{paddingTop:12},previewContainer:{display:"flex",paddingInlineEnd:12,paddingTop:12},errorMessage:{marginTop:8,color:e.errorText}})),[]),f=(0,n.useCallback)((async e=>{e&&Ge().Sg(i,{from:"settings"});const t=await Ye().x({environment:i,spaceStore:s,pageId:e});if(t.success)return m(void 0),void l(!1);switch(t.error){case"block_limit":case"page_permissions":case"user_permissions":return void m(o.formatMessage(ut[t.error]));case"unknown":return void m(o.formatMessage({id:"spaceBasicSettings.gettingStartedPage.error.generic",defaultMessage:"An error occurred, please try again."}));default:(0,qe().HB)(t.error)}}),[i,s,o]),v=(0,n.useCallback)((()=>{f(void 0)}),[f]);return(0,me.jsxs)("div",{children:[t&&!r?(0,me.jsxs)("div",{style:h.previewContainer,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,me.jsx)(Qe().A,{store:t}),c?(0,me.jsx)(gt,{onUpdateClick:()=>l(!0),onClearClick:v}):void 0]}):(0,me.jsx)("div",{style:h.container,children:(0,me.jsx)(lt,{spaceStore:s,initialFocus:r,onResetInput:()=>l(!1),disabled:!1,onPageSelect:f})}),g?(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,style:h.errorMessage,children:g}):void 0]})}function gt(e){const{onUpdateClick:t,onClearClick:a}=e,n=(0,p().IS)((()=>({actionIcon:{marginInlineStart:4}})),[]),s=(0,b().tz)(),i=s.formatMessage({id:"spaceBasicSettings.gettingStartedPage.update",defaultMessage:"Update the getting started page"}),o=s.formatMessage({id:"spaceBasicSettings.gettingStartedPage.clear",defaultMessage:"Clear the getting started page"});return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(re().A,{renderTooltip:()=>i,placement:"bottom",render:e=>(0,me.jsx)($e().A,{...e,icon:He().r,ariaLabel:i,onClick:t,style:n.actionIcon})}),(0,me.jsx)(re().A,{renderTooltip:()=>o,placement:"bottom",render:e=>(0,me.jsx)($e().A,{...e,icon:Ke().xMarkIcon,ariaLabel:o,onClick:a,style:n.actionIcon})})]})}var mt=()=>a(719147);function ht(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const ft=["ar","az","he","fa","ur"];const vt=function(e){const{style:t,translations:a}=e,n=ht();for(const s of n){const e=a[s];if(e){const a=ft.includes(s);return(0,me.jsx)("div",{style:{...a&&{direction:"rtl"},...t},children:e})}}return null};var yt=()=>a(661537),xt=()=>a(843878),bt=()=>a(792223),St=()=>a(963605),At=()=>a(263868);function jt({spaceStore:e,organizationOverrides:t}){const a=(0,d().v3)(),{isMobile:s}=a.device,i=(0,bt().CR)({spaceStore:e}),o=(0,bt().tU)({spaceStore:e}),r=(0,p().IS)((()=>({settingsItem:{paddingBottom:24}})),[]);if(!i&&!o)return null;const l=Boolean(t.disable_people_hover_card),c=Boolean(t.disable_people_directory);return(0,me.jsxs)(n.Fragment,{children:[(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.general.peopleSection.title",defaultMessage:"People"})}),o?(0,me.jsx)("div",{style:r.settingsItem,children:(0,me.jsx)(St().VZ,{spaceStore:e,isLocked:c,isMobile:s})}):null,i?(0,me.jsx)("div",{style:r.settingsItem,children:(0,me.jsx)(At().O,{spaceStore:e,isLocked:l,isMobile:s})}):null]})}var wt=()=>a(718827),_t=()=>a(784892),Ct=()=>a(264154),Mt=()=>a(733816),Tt=()=>a(701751),kt=()=>a(979340),It=()=>a(965597),Dt=()=>a(778078),Nt=()=>a(496603),Pt=()=>a(722872),Et=()=>a(17281),Bt=()=>a(645873);const Rt={WorkspaceDiscoveryAdminSetting:new(Bt().O2)("WorkspaceDiscoveryAdminSetting",(async()=>a.e(51799).then(a.bind(a,770790))))},Vt=(0,Bt()._h)(Rt.WorkspaceDiscoveryAdminSetting,(e=>e.WorkspaceDiscoveryAdminSetting));var Lt=()=>a(153861),Ft=()=>a(378941),Ot=()=>a(396896),zt=()=>a(631524),Ut=()=>a(373009),Wt=()=>a(66913),Ht=()=>a(12193),Kt=()=>a(939768),qt=()=>a(802790),Gt=()=>a(641514);const Yt=(0,b().YK)({closeModalAriaLabel:{id:"requestMembershipCustomizationUrlButton.closeModalAriaLabel",defaultMessage:"Close request membership customization modal"}});function Qt(e){const t=(0,d().v3)(),{spaceStore:a,isOpen:s,onDismiss:i}=e,[o,r]=(0,n.useState)(""),[l,c]=(0,n.useState)(!1),u=(0,n.useCallback)((e=>""===e||(0,Kt().AY)(e)),[]);(0,n.useEffect)((()=>{r(a.getSettings().request_membership_customization_redirect_url||"")}),[a]);const g=(0,p().IS)((e=>({modal:{maxWidth:500,paddingTop:20,fontSize:14,borderRadius:10},cancelButton:{position:"absolute",top:"10px",insetInlineEnd:"10px"},title:{margin:"10px 0"},errorText:{color:e.errorText,fontSize:12},button:{padding:"6px 12px"},icon:{width:36,height:36,color:e.text.secondary},header:{padding:"0px 20px",maxWidth:300}})),[]),m=(0,n.useCallback)((async e=>{await w().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:t,data:{spaceId:a.id,newRequestMembershipCustomizationRedirectUrl:e}})}),[t,a]);return(0,me.jsx)(Gt().A,{innerStyle:g.modal,isOpen:s,onDismiss:i,render:()=>(0,me.jsxs)(Ot().VP,{alignItems:"center",children:[(0,me.jsx)($e().A,{icon:Wt().V,onClick:i,style:g.cancelButton,ariaLabel:L().A.formatMessage(Yt.closeModalAriaLabel)}),(0,me.jsx)(de().A,{large:!0,style:g.header,children:(0,me.jsxs)(Ot().VP,{alignItems:"center",children:[(0,me.jsx)("div",{style:{...g.icon},children:(0,Ht().globeIcon)()}),(0,me.jsx)(se().D,{styleKey:"Title-sm/Semibold",colorVariant:"primary",style:g.title,children:(0,me.jsx)(b().sA,{id:"requestMembershipCustomizationUrlButton.title",defaultMessage:"Customize request access link"})}),(0,me.jsx)(se().D,{styleKey:"Body/Regular",colorVariant:"secondary",style:{textAlign:"center"},children:(0,me.jsx)(b().sA,{id:"requestMembershipCustomizationUrlButton.byline",defaultMessage:"Customize the destination when users request to join workspace"})})]})}),(0,me.jsxs)(Ot().VP,{alignItems:"start",gap:4,marginTop:24,paddingInlineStart:20,paddingInlineEnd:20,children:[(0,me.jsx)(se().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:{marginBottom:6},children:(0,me.jsx)(b().sA,{id:"requestMembershipCustomizationUrlButton.input.label",defaultMessage:"Custom URL"})}),(0,me.jsx)(Be().A,{type:"text",value:o,onChange:e=>{const t=e.target.value;r(t),c(!u(t))},focusInitial:!0}),l?(0,me.jsx)("div",{style:{...g.errorText},children:(0,me.jsx)(b().sA,{id:"requestMembershipCustomizationUrlButton.invalidUrl",defaultMessage:"Invalid URL"})}):null,(0,me.jsx)(se().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:{marginTop:6,textAlign:"start",marginBottom:14},children:(0,me.jsx)(b().sA,{id:"requestMembershipCustomizationUrlButton.input.hint",defaultMessage:"Users will be redirected to this URL when they request to join workspace."})})]}),(0,me.jsx)(qt().A,{size:20}),(0,me.jsxs)(Ot().fI,{justifyContent:"flex-end",gap:12,paddingInlineStart:20,paddingInlineEnd:20,paddingBottom:12,width:"100%",children:[(0,me.jsx)(Ut().E,{style:g.button,onClick:i,children:(0,me.jsx)(b().sA,{defaultMessage:"Cancel",id:"requestMembershipCustomizationUrlButton.cancel.label"})}),(0,me.jsx)(h().A,{colorPalette:"blue",style:g.button,onClick:async()=>{await m(o),i()},disabled:!u(o),children:(0,me.jsx)(b().sA,{defaultMessage:"Save action",id:"requestMembershipCustomizationUrlButton.save.label"})})]})]})})}function $t(e){const{spaceStore:t}=e,[a,s]=(0,n.useState)(!1);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(zt().p,{colorPalette:"blue",style:{marginInlineEnd:"16px"},onClick:()=>s(!0),children:(0,me.jsx)(b().sA,{defaultMessage:"Customize",id:"requestMembershipCustomizationUrlButton.customizeAction.label"})}),(0,me.jsx)(Qt,{spaceStore:t,isOpen:a,onDismiss:()=>s(!1)})]})}var Jt=()=>a(760217),Zt=()=>a(406699),Xt=()=>a(404277),ea=()=>a(460292),ta=()=>a(881690),aa=()=>a(297780);const na=(0,b().YK)({allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"}});function sa(e){const{spaceStore:t}=e,a=(0,d().v3)(),s=(0,u().K8)((()=>t.canAdmin()),[t]),i=(0,H().T)(),o=(0,u().uB)(e.spaceBasicSettingsStore,_e().A),r=(0,u().uB)(e.securitySettingsStore,je().A);(0,c().l)((()=>{const e=o.getValueForSpace(t),a=r.getValueForSpace(t);e&&o.setState(e),a&&r.setState(a)}));const[l]=(0,Xe().Yb)((async()=>({trustedDomainNumMembers:s?await(0,Ft().hs)({environment:a,spaceId:t.id,currentUserId:i}):[]})),[a,t,i,s]),p=(0,u().K8)((()=>{if("resolved"!==l.status)return[];const e=l.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,Ft().J7)({trustedDomainIds:e,spaceStore:t})}),[t,l]),g=(0,u().K8)((()=>Nt().oE(p.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[p]),m=(0,u().K8)((()=>De().vl(a)),[a]),h=(0,u().K8)((()=>o.state.emailDomains.length>0),[o]),f=ca();return s&&(m||h)?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ia,{}),(0,me.jsxs)(n.Fragment,{children:[(0,me.jsxs)("div",{style:f.settingsItem,children:[(0,me.jsx)(de().A,{children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,me.jsx)(oa,{spaceStore:t,spaceBasicSettingsStore:o,trustedEmailDomains:g}),(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})})]}),h?(0,me.jsx)(ra,{spaceStore:t,trustedDomainsState:l}):void 0,h?(0,me.jsx)(Vt,{spaceStore:t}):void 0]})]}):null}function ia(){return(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.subtitle",defaultMessage:"Trusted domain access"})})}function oa({spaceStore:e,spaceBasicSettingsStore:t,trustedEmailDomains:a}){const s=(0,b().tz)(),i=(0,d().v3)(),o=r().A.isMobile,[l,c]=(0,n.useState)(""),p=(0,u().K8)((()=>t.state.emailDomains),[t]),g=(0,u().K8)((()=>e.canAdmin()),[e]),m=(0,Et().h)(e.id),h=(0,u().K8)((()=>De().vl(i)),[i]),f=(0,n.useCallback)((e=>{c(e.target.value)}),[]);return(0,me.jsx)(st().Ay,{popupType:o?Ze().n.BottomSheet:Ze().n.Popup,sameWidthAsOrigin:!0,open:l.length>0,trapFocus:!1,origin:(0,me.jsx)(aa().A,{placeholder:s.formatMessage(na.allowedEmailDomainsInputPlaceholder),value:l,onChange:f,readOnly:!g||!h,onRemoveLastToken:()=>{const e=p.slice(0,p.length-1);t.setState({...t.state,emailDomains:e})},tokens:p.map((e=>(0,me.jsx)(ta().A,{showRemoveButton:!0,isSingle:!1,format:_t().NY.Medium,onClickRemove:()=>{const a=p.filter((t=>t!==e));t.setState({...t.state,emailDomains:a})},value:e},e)))}),render:()=>{const e=l.trim(),n=(0,me.jsx)(b().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),s=(0,me.jsx)(b().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),i=(m??[]).filter((e=>!p.includes(e)&&!a.includes(e))),r=(0,Dt().Ay)(e,(0,Nt().oE)(i),(e=>e)).map(((e,a)=>({key:a,render:t=>(0,me.jsx)(Jt().A,{...t,title:e}),action:()=>{const a=[...p,e];t.setState({...t.state,emailDomains:a}),c("")}})));let d;return d=o?{menuType:Pt().gu.ActionSheet}:{menuType:Pt().gu.Popup,width:"100%"},(0,me.jsx)(Xt().A,{...d,children:(0,me.jsx)(nt().Ay,{type:nt().Oh.Vertical,initialFocus:r.length>0?0:void 0,sections:[{key:0,render:e=>(0,me.jsx)(ot().A,{...e,disableDesktopPadding:!0,title:r.length>0?n:s}),items:r}]})})},onDismiss:()=>{c("")}})}function ra({spaceStore:e,trustedDomainsState:t}){const a=(0,d().v3)(),s=Boolean(r().A.isMobile),i=(0,u().K8)((()=>(0,kt().OX)(e.getSubscriptionTier())),[e]),l=i?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},c=(0,u().K8)((()=>e.getName()),[e]),p=(0,u().K8)((()=>(0,It().ko)(e.getModel())),[e]),g=(0,u().K8)((()=>(0,It().Hm)(e.getModel())),[e]),m=(0,u().K8)((()=>o().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})),[]),h=(0,n.useCallback)((async t=>{const{newDomainLinkSharingValue:n,newJoinSpaceMethod:s}=t;await w().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:a,data:{spaceId:e.id,newDomainLinkSharingValue:n,newJoinSpaceMethod:s}})}),[a,e]),f=(0,n.useCallback)((async()=>{await h({newDomainLinkSharingValue:!g})}),[h,g]),v=ca();if("resolved"!==t.status||!p)return null;if(m){const t=(0,Lt().N5)({messages:ua,values:{spaceName:c}});return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{style:v.settingsItem,children:(0,me.jsx)(Oe().A,{isMobile:s,disabled:!i,upsellOptions:l?{upsell:l,analyticsName:"trusted_domain_item",customMessages:t}:void 0,title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Enable organization-wide access for pages shared with this workspace"}),caption:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allow teammates with trusted email domains who aren’t workspace members to access pages shared with “Everyone at {spaceName}”",values:{spaceName:c}}),type:"toggle",isOn:g,onToggle:f})}),(0,me.jsx)(la,{spaceStore:e,updateJoinSpaceMethod:h})]})}return null}function la(e){const{spaceStore:t,updateJoinSpaceMethod:a}=e,s=Boolean(r().A.isMobile),i=(0,u().K8)((()=>(0,kt().OX)(t.getSubscriptionTier())),[t]),o=i?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},l=(0,u().K8)((()=>t.getSettings().join_space_method),[t]),d="request_to_join"===l,c=(0,n.useCallback)((async e=>{await a({newJoinSpaceMethod:e})}),[a]),g=ca(),m=(0,p().IS)((()=>({settingsItem:{width:"65%"},menuButton:{paddingTop:4,paddingBottom:4,paddingInlineEnd:8,paddingInlineStart:8,display:"flex",alignItems:"center",gap:4},menuButtonHovered:{borderRadius:4}})),[]);return(0,me.jsx)("div",{style:g.settingsItem,children:(0,me.jsx)(Oe().A,{isMobile:s,disabled:!i,upsellOptions:o?{upsell:o,analyticsName:"trusted_domain_item",customMessages:pa}:void 0,title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.title",defaultMessage:"Teammates with trusted email domains can join as a member"}),caption:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.description",defaultMessage:"Allow teammates with trusted email domains to join this workspace"}),descriptionStyle:m.settingsItem,type:"custom",customButton:(0,me.jsxs)(Fe().Ye,{alignItems:"center",children:[d&&i?(0,me.jsx)($t,{spaceStore:t}):void 0,(0,me.jsx)(Zt().A,{popupType:Zt().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"end",disabled:!i,renderOrigin:e=>(0,me.jsxs)(wt().Ay,{...e,disabled:!i,style:m.menuButton,hoveredStyle:m.menuButtonHovered,children:[(0,me.jsx)(da,{joinSpaceMethod:l,disabled:!i}),(0,me.jsx)(ea().Q,{iconGroup:Ct().l,variantName:"small",colorVariant:i?"secondary":"tertiary"})]}),render:e=>(0,me.jsx)(Xt().A,{menuType:Pt().gu.Popup,children:(0,me.jsx)(nt().Ay,{type:nt().Oh.Vertical,initialFocus:0,sections:[{key:"join-methods",render:e=>(0,me.jsx)(ot().A,{...e}),items:[{key:"click_to_join",render:e=>(0,me.jsx)(Jt().A,{...e,icon:(0,Tt().p)({height:20,width:20}),title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.clickToJoinDescription",defaultMessage:"Join automatically"}),isChecked:!l||"click_to_join"===l}),action:async()=>{await c("click_to_join"),e.close()}},{key:"request_to_join",render:e=>(0,me.jsx)(Jt().A,{...e,title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.requestToJoinDescription",defaultMessage:"Request to join"}),icon:(0,Mt().o)({height:20,width:20}),isChecked:"request_to_join"===l}),action:async()=>{await c("request_to_join"),e.close()}}]}]})})})]})})})}function da(e){const{joinSpaceMethod:t,disabled:a}=e;let n;return t&&"click_to_join"!==t?"request_to_join"===t?n=(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.requestToJoinDescription",defaultMessage:"Request to join"}):"disabled"===t&&(n=(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.disabledDescription",defaultMessage:"No access"})):n=(0,me.jsx)(b().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.clickToJoinDescription",defaultMessage:"Join automatically"}),(0,me.jsx)(se().D,{styleKey:"Body/Regular",colorVariant:a?"tertiary":"secondary",children:n})}function ca(){return(0,p().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}const ua=(0,b().YK)({eligible_for_upgrade:{id:"trustedDomainOrgWideAccessMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},eligible_for_trial:{id:"trustedDomainOrgWideAccessMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},sales_eligible:{id:"trustedDomainOrgWideAccessMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},sales_assisted:{id:"trustedDomainOrgWideAccessMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},eligible_to_request:{id:"trustedDomainOrgWideAccessMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},request_pending:{id:"trustedDomainOrgWideAccessMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to allow users with trusted email domains to access shared pages without workspace membership"}}),pa=(0,b().YK)({eligible_for_upgrade:{id:"trustedDomainJoinMethodMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to let users with trusted email domains join without requesting access"},eligible_for_trial:{id:"trustedDomainJoinMethodMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let users with trusted email domains join without requesting access"},sales_eligible:{id:"trustedDomainJoinMethodMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let users with trusted email domains join without requesting access"},sales_assisted:{id:"trustedDomainJoinMethodMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let users with trusted email domains join without requesting access"},eligible_to_request:{id:"trustedDomainJoinMethodMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let users with trusted email domains join without requesting access"},request_pending:{id:"trustedDomainJoinMethodMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let users with trusted email domains join without requesting access"}});function ga(){return(0,me.jsx)(b().sA,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const ma=(0,b().YK)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}});function ha(e){const{spaceStore:t,organizationOverrides:s,billingData:o}=e,r=(0,d().v3)(),{canAdminSpaceStore:l,spaceId:g}=(0,u().K8)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),h=(0,H().T)(),f=(0,u().uB)(e.spaceBasicSettingsStore,_e().A),v=(0,u().uB)(e.securitySettingsStore,je().A),y=(0,u().K8)((()=>(0,a(272509).I)(t)),[t]),x=(0,Ie().P9)({name:"hipaa_compliance",spaceId:g,userId:h});(0,c().l)((()=>{const e=f.getValueForSpace(t),a=v.getValueForSpace(t);e&&f.setState(e),a&&v.setState(a)}));const S=(0,i().X)("notion_ai_workspace_settings"),j=(0,i().X)("upgrade_system_settings"),w=(0,u().K8)((()=>!S&&(0,Ee().LR)({spaceStore:t,billingData:o})),[t,S,o]),_=(0,u().K8)((()=>!S&&(0,a(592420).Q)(r)),[r,S]),T=x&&l,k=(0,u().K8)((()=>l&&!t.getDisableExport()),[l,t]),I=(0,b().tz)(),D=(0,a(240865).V)()??1,N=(0,u().K8)((()=>!(0,a(303742).o)(be().default.state.sidebarSpaceViewStore)&&(y||D>1)),[y,D]),P=(0,u().K8)((()=>!(_||w||T||k||N||l)),[_,w,T,k,N,l]),E=(0,p().IS)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12},workspaceIdContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},setupInformationHeader:{paddingTop:P?0:36}})),[P]),B=Pa(),V=(0,Z()._3)({spaceId:g}),L=(0,u().K8)((()=>(0,a(807778).VJ)({memberCount:D,billingData:V,environment:r})),[V,D,r]);return(0,me.jsxs)(xt().Ay,{controlRow:l&&(0,me.jsx)(Na,{spaceStore:t,spaceBasicSettingsStore:f,securitySettingsStore:v}),controlRowPaddingTopBottom:14,children:[l?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(wa,{}),(0,me.jsx)(fa,{spaceStore:t,spaceBasicSettingsStore:f}),(0,me.jsx)(va,{spaceStore:t,spaceBasicSettingsStore:f}),L?(0,me.jsx)(ye,{}):null]}):void 0,l?(0,me.jsx)(ya,{spaceStore:t,spaceBasicSettingsStore:f}):void 0,_||w||T?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ja,{}),_?(0,me.jsx)("div",{style:B.settingsItem,children:(0,me.jsx)(Ee().aV,{billingData:o,spaceStore:t})}):void 0,w?(0,me.jsx)("div",{style:B.settingsItem,children:(0,me.jsx)(Ee().Iu,{isUpgradeSystemEnabled:j,securitySettingsStore:v,spaceStore:t})}):void 0,T?(0,me.jsx)(Ta,{spaceStore:t,securitySettingsStore:v,spaceBasicSettingsStore:f}):void 0]}):void 0,l?(0,me.jsx)(sa,{spaceStore:t,spaceBasicSettingsStore:f,securitySettingsStore:v}):void 0,k||l?(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.export.subtitle",defaultMessage:"Export"})}):void 0,k?(0,me.jsx)("div",{style:B.settingsItem,children:(0,me.jsx)(We,{handleExportClick:()=>function(e){const{sidebarSpaceStore:t}=be().default.state;t&&M().Ss({environment:e,root:{table:"space",id:t.id,spaceId:t.id},isCollectionViewExportTypeSupported:!0})}(r)})}):void 0,l?(0,me.jsx)(ba,{}):void 0,l?(0,me.jsx)(xa,{spaceStore:t,spaceBasicSettingsStore:f,organizationOverrides:s}):void 0,(0,me.jsx)(jt,{spaceStore:t,organizationOverrides:s}),N||l?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,me.jsxs)("div",{style:E.dangerZoneContainer,children:[N?(0,me.jsx)(m().A,{size:"lg",colorPalette:"red",onClick:()=>function(e,t){const{currentUserSettingsStore:a}=be().default.state;a&&C().ui({message:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave the {workspaceName} workspace?",values:{workspaceName:e.getName()}}),showCancel:!0,keepFocus:!0,items:[{label:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await R().ev({environment:t,spaceId:e.id,userSettingsStore:a})&&(A().dp(t),Ce().A.setState({...Ce().A.state,open:!1}))}}]})}(t,r),children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}):void 0,l?(0,me.jsx)(Ia,{spaceStore:e.spaceStore}):void 0]})]}):void 0,l?(0,me.jsxs)(n.Fragment,{children:[(0,me.jsx)("div",{style:E.gap}),(0,me.jsx)(le().A,{title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,O().x)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]}):void 0,(0,me.jsx)("div",{style:E.setupInformationHeader,children:(0,me.jsx)(_a,{})}),(0,me.jsxs)("div",{style:E.workspaceIdContainer,children:[(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,children:(0,me.jsx)(b().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})}),(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,children:(0,me.jsx)(a(824011).x,{text:g,tooltip:I.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})]})]})}function fa({spaceStore:e,spaceBasicSettingsStore:t}){const a=(0,u().K8)((()=>t.state.name),[t]),s=(0,n.useCallback)((e=>{t.setState({...t.state,name:e.target.value})}),[t]),i=(0,p().IS)((()=>({label:{marginTop:4}})),[]),o=Pa();return(0,me.jsxs)("div",{style:o.settingsItem,children:[(0,me.jsx)(de().A,{children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,me.jsx)(Be().A,{value:a,placeholder:L().A.formatMessage(ma.nameInputPlaceholder),readOnly:!1,onChange:s,maxlength:y().zX}),(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,style:i.label,children:(0,me.jsx)(ga,{})})]})}function va({spaceStore:e,spaceBasicSettingsStore:t}){const a=(0,d().v3)(),s=(0,u().K8)((()=>(0,z().c)(a,e)),[a,e]),i=(0,u().K8)((()=>t.state.name),[t]),o=(0,u().K8)((()=>({recordTable:e.table,source:"workspace_settings"})),[e]),r=(0,n.useCallback)((t=>{V().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:a,canUndo:!0,perform:a=>{T().KY({store:e.getIconStore(),value:t,transaction:a})}})}),[a,e]),l=(0,p().IS)((e=>({iconContainer:{width:72,height:72,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]),c=Pa();return(0,me.jsxs)("div",{style:c.settingsItem,children:[(0,me.jsx)(de().A,{children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,me.jsx)("div",{style:l.iconContainer,children:(0,me.jsx)(Re().B6,{bucket:"public",disabled:!1,icon:s,iconRecordCategory:"workspace",isEmptyPage:!1,title:i,size:64,iconLoggingData:o,onChange:r})}),(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,style:l.label,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function ya({spaceStore:e}){const t=(0,n.useRef)(null),a=(0,u().K8)((()=>B().iY(e)),[e]),s=(0,u().K8)((()=>B().jK(e)),[e]),i=(0,u().K8)((()=>"on"===o().default.getEligibleGroup({experimentId:"adoption_custom_workspace_getting_started_page",defaultGroup:"control"})),[]),r=(0,u().K8)((()=>a?Ae().B.createChildStore(e,{table:v().ev,id:a}):void 0),[e,a]),l=(0,u().K8)((()=>e.canAdmin()),[e]),d=(0,u().K8)((()=>Ce().A.state.highlightedSetting===Ce().r.GettingStartedPageSetting),[]),c=(0,p().IS)((e=>({container:{...d?{backgroundColor:e.background.secondary,marginInlineStart:-1*(0,xt().AL)(!1),marginInlineEnd:-1*(0,xt().AL)(!1),paddingInlineStart:(0,xt().AL)(!1),paddingInlineEnd:(0,xt().AL)(!1),marginTop:12,marginBottom:12,paddingTop:12,paddingBottom:24,borderRadius:6}:{marginBottom:24}}})),[d]);return(0,n.useEffect)((()=>{if(d&&t.current){const e=setTimeout((()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}),200);return()=>clearTimeout(e)}}),[d]),l&&i?(0,me.jsxs)("div",{ref:t,style:c.container,children:[(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.gettingStarted.subtitle",defaultMessage:"Custom landing page"})}),(0,me.jsx)(Ve().A,{isSmall:!0,isMultiline:!0,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.gettingStarted.description",defaultMessage:"When a new workspace member joins, a copy of this page will automatically be installed in their Private section."})}),(0,me.jsx)(pt,{spaceStore:e,gettingStartedPageStore:r,gettingStartedPageErrors:s})]}):null}function xa({spaceStore:e,spaceBasicSettingsStore:t,organizationOverrides:a}){const i=(0,d().v3)(),{isMobile:o}=i.device,r=(0,u().K8)((()=>e.getSettings().disable_page_analytics),[e]),l=Boolean(a.disable_page_analytics),c=(0,u().K8)((()=>t.state.name),[t]),g=(0,n.useCallback)((()=>{if(l)return;const t=!r;V().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:i,canUndo:!0,perform:a=>{T().zv({store:e,data:{settings:{...e.getSettings(),disable_page_analytics:t}},transaction:a})}}),(0,s().DO_NOT_USE_trackLegacy)(i,t?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[r,i,l,e]),m=(0,p().IS)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]),h=Pa();return(0,me.jsxs)(n.Fragment,{children:[(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,me.jsxs)("div",{style:{...m.toggleContainer,...h.settingsItem},children:[(0,me.jsx)(Oe().A,{isMobile:o,title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:c}}),type:"toggle",isOn:!r,isLocked:l,lockedTooltip:(0,F().C_)(),onToggle:g}),(0,me.jsx)(le().A,{title:(0,me.jsx)(b().sA,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,O().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]})]})}function ba(){var e;const t=(0,d().v3)(),a=(0,b().tz)(),s=(0,G().r)(),o=null===(e=t.currentUser)||void 0===e?void 0:e.id,r=(0,Ie()._X)({name:"export_members",spaceId:s,userId:o}),l=(0,q().J)(),c=(0,i().X)("upgrade_system_settings"),h=(0,u().K8)((()=>l&&"available"===(null==r?void 0:r.type)),[l,r]),f=(0,n.useCallback)((()=>{!function(e,t){const{sidebarSpaceStore:a}=be().default.state,n=Ne().subscriptionDataStoreInstance.state;a&&n&&"subscribed_admin"===n.type&&M().xi(t,{spaceStore:a,subscriptionData:n,intl:e})}(a,t)}),[t,a]),v=(0,p().IS)((()=>({button:{display:"flex"},gap:{height:12}})),[]),y=Pa();return c?(0,me.jsx)("div",{style:y.settingsItem,children:(0,me.jsx)(Sa,{featureAvailavailability:r,canExport:h,handleClick:f})}):(0,me.jsxs)("div",{style:y.settingsItem,children:[(0,me.jsx)(de().A,{children:(0,me.jsxs)(g().Y1,{direction:"horizontal",align:"center-left",gap:8,children:[(0,me.jsx)("span",{children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})}),null!=r&&r.upsell?(0,me.jsx)(Pe().K,{source:"space_export_members",display:"icon",upsell:r.upsell,featureFlag:"upgrade_system_settings",children:!h&&null!=r&&r.upsell?(0,me.jsx)(ke().B,{upsell:r.upsell,analyticsName:"space_export_members"}):null}):null]})}),(0,me.jsx)("div",{style:v.button,children:(0,me.jsx)(m().A,{size:"lg",disabled:!h,onClick:f,disabledFeedback:!0,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})}),(0,me.jsx)("div",{style:v.gap}),(0,me.jsx)(le().A,{title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,O().x)("guides.exportMembers"),analyticsFrom:"space_settings"})]})}function Sa(e){const{featureAvailavailability:t,canExport:a,handleClick:n}=e;return(0,me.jsx)(Oe().A,{type:"custom",isMobile:!1,title:(0,me.jsxs)(g().Y1,{direction:"horizontal",gap:2,align:"center-left",children:[(0,me.jsx)(b().sA,{id:"spaceBasicSettings.exportMembersSettingsItem.title",defaultMessage:"Members"}),(0,me.jsx)(Te().W,{tooltipTitle:"Learn More",buttonProps:{external:!0,href:(0,O().x)("guides.exportMembers")}})]}),upsellOptions:null!=t&&t.upsell?{upsell:t.upsell,analyticsName:"space_export_members",customMessages:Ea}:void 0,disabled:!a,customButton:(0,me.jsx)("div",{style:{display:"flex"},children:(0,me.jsx)(m().A,{size:"lg",disabled:!a,onClick:n,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.exportMembersSettingsItem.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})})})}const Aa=n.memo(ha);function ja(){return(0,me.jsx)(de().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function wa(){return(0,me.jsx)(de().A,{large:!0,divider:"full",children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}function _a(){return(0,me.jsx)(de().A,{large:!0,divider:"full",children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.setupInformation.title",defaultMessage:"Setup information"})})}async function Ca(e,t,a,n,s){const{currentUserSettingsStore:i}=be().default.state;if(!i)return;const o=(0,U().G)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),r=(0,S().vL)(l().locale)?(0,me.jsx)(b().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(vt,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await _().h({title:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:r,acceptLabel:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:o})&&(!async function(e){const{environment:t,spaceId:a,organizationId:n,onDelete:s}=e;P().m({message:E.deletingWorkspace});try{const{value:e}=await(0,N().UT)(t,D,{spaceId:a,source:"user_initiated_deletion",organizationId:n},{spaceIds:[]}).next();if(e.error)throw e.error;await s()}finally{P().V()}}({environment:a,spaceId:e.id,onDelete:n,organizationId:s}),A().db(a),Ce().A.setState({...Ce().A.state,open:!1}))}function Ma(){Ce().A.setState({...Ce().A.state,open:!1}),we().A.setState(we().A.getInitialState())}function Ta({spaceStore:e,securitySettingsStore:t,spaceBasicSettingsStore:a}){const n=(0,p().IS)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]),s=Pa();return(0,me.jsx)("div",{style:s.settingsItem,children:(0,me.jsx)(Oe().A,{type:"custom",isMobile:Boolean(r().A.isMobile),title:(0,me.jsxs)("div",{style:n.title,children:[(0,me.jsx)(b().sA,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,me.jsx)(le().A,{href:(0,O().x)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,me.jsx)(mt().A,{href:(0,O().x)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,me.jsx)(ka,{spaceStore:e,securitySettingsStore:t})})})}function ka({spaceStore:e,securitySettingsStore:t}){const a=(0,d().v3)(),s=(0,u().K8)((()=>(0,W().A)(e)),[e]),[i,o]=n.useState(s),[r,l]=n.useState(!1),[c,p]=n.useState(!1),g=(0,n.useCallback)((()=>async function({securitySettingsStore:e,spaceStore:t,environment:a,isGoingToDisableHIPAACompliancy:n,openModal:s,closeModal:i}){i(),e.setState({...e.state,zeroRetentionEnabled:!e.state.zeroRetentionEnabled}),I().V(a,{spaceStore:t,securitySettingsState:e.state}),B().xu(a,t),s(),await w().callApi({eventName:"sendHIPAACompliancyUpdate",environment:a,data:{spaceId:t.id,isDisablingHIPAA:n}})}({securitySettingsStore:t,spaceStore:e,environment:a,isGoingToDisableHIPAACompliancy:i,openModal:()=>p(!0),closeModal:()=>l(!1)})),[a,t,e,i]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(xe().YS,{isOpen:c,hasDisabledHIPAACompliancy:i,onClose:()=>p(!1)}),(0,me.jsx)(xe().TD,{isOpen:r,onClose:()=>l(!1),onConfirmDecision:g,isDisablingHIPAACompliancy:i}),(0,me.jsx)(m().A,{size:"lg",onClick:()=>{l(!0),o(t.state.zeroRetentionEnabled)},children:(0,me.jsx)(b().sA,{...s?ma.deactivateHIPAAButton:ma.activateHIPAAButton})})]})}function Ia({spaceStore:e}){const t=(0,d().v3)(),a=(0,b().tz)(),s=(0,i().X)("reauth_on_user_and_workspace_deletion"),[o,r]=n.useState(!1),[l,c]=n.useState(!1),p=(0,u().K8)((()=>be().default.state.currentUserRootStore),[]),g=(0,u().O$)(be().AppStoreCurrentUserSettingsStore),h=(0,Z()._3)({spaceId:e.id}),v=(0,K().$)(),y=(0,u().K8)((()=>(null==v?void 0:v.getEmail())||""),[v]),S=(0,n.useCallback)((async()=>{p&&g&&(await k().sy({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:{table:x().GD,id:p.id},userId:t.currentUser.id}),B().t9({environment:t,userRootStore:p,ignoreSpaceId:e.id,userSettingsStore:g,pageVisitSource:f().y8.SwitchSpace}))}),[t,p,g,e.id]),A=(0,n.useCallback)((async()=>{c(!1),await Da({environment:t,spaceStore:e,intl:a,showDowngradeModal:()=>r(!0),onDelete:S})}),[t,e,a,S]),j=(0,n.useCallback)((()=>{c(!1)}),[]),w=(0,n.useCallback)((async()=>{s?c(!0):await Da({environment:t,spaceStore:e,intl:a,showDowngradeModal:()=>r(!0),onDelete:S})}),[s,t,e,a,S]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(yt().P,{open:l,userEmail:y,onAuthorized:A,onDismiss:j}),o?(0,me.jsx)(Me().S4,{billingData:h,isOpen:o,onClose:()=>r(!1),onConfirmDelete:async()=>await Ca(e,a,t,S),spaceStore:e}):null,(0,me.jsx)(m().A,{size:"lg",colorPalette:"red",onClick:w,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}async function Da(e){const{environment:t,spaceStore:a,intl:n,showDowngradeModal:s,onDelete:i}=e,o=Ne().subscriptionDataStoreInstance.state,r=De().RJ(o);(0,j().H)(t),r?s():await Ca(a,n,t,i)}function Na({spaceStore:e,spaceBasicSettingsStore:t,securitySettingsStore:a}){const s=(0,d().v3)(),i=(0,n.useCallback)((()=>async function(e,t,a,n){await B().Ef({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:n}),we().A.setState(we().A.getInitialState()),Ce().A.setState({...Ce().A.state,open:!1}),Se().A.resetData(e,{spaceId:t.id})}(s,e,t,a)),[s,e,t,a]);return(0,me.jsxs)("div",{style:{display:"flex"},children:[(0,me.jsx)(h().A,{colorPalette:"blue",size:"lg",onClick:i,disabled:!1,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,me.jsx)(m().A,{size:"lg",style:{marginInlineStart:12},onClick:Ma,children:(0,me.jsx)(b().sA,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}function Pa(){return(0,p().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}const Ea=(0,b().YK)({eligible_for_upgrade:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to get a list of members and guests in your workspace"},eligible_for_trial:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to get a list of members and guests in your workspace"},sales_eligible:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to get a list of members and guests in your workspace"},sales_assisted:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to get a list of members and guests in your workspace"},eligible_to_request:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleToRequest",defaultMessage:"<highlight>Request</highlight> to get a list of members and guests in your workspace"},request_pending:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to get a list of members and guests in your workspace"}})},452864:(e,t,a)=>{a.d(t,{H:()=>h});a(296540);var n=()=>a(401497),s=()=>a(252291),i=()=>a(396896),o=()=>a(631524),r=()=>a(721479),l=()=>a(158469),d=()=>a(69708),c=()=>a(972435),u=()=>a(232930),p=()=>a(125565),g=a(474848);const m=(0,d().YK)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n().IS)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500}})),[]),{type:a,spaceName:h}=e,f=function(e,t){switch(e){case"empty":return{heading:c().A.formatMessage(m.emptyAnalyticsHeading),description:c().A.formatMessage(m.emptyAnalyticsDescription)};case"disabled":const e=t?(0,g.jsx)(d().sA,{...m.disabledAnalyticsDescription,values:{name:t,br:(0,g.jsx)("br",{})}}):(0,g.jsx)(d().sA,{...m.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,g.jsx)("br",{})}});return{heading:c().A.formatMessage(m.disabledAnalyticsHeading),description:e}}}(a,h);return(0,g.jsx)("div",{style:t.outerDiv,children:(0,g.jsxs)("div",{style:t.innerDiv,children:[(0,g.jsxs)(i().VP,{gap:16,alignItems:"center",children:[(0,g.jsx)(s().I,{icon:l().f,size:"xl",colorVariant:"secondary"}),(0,g.jsx)(p().A,{isSecondaryColor:!0,style:t.header,children:f.heading})]}),(0,g.jsx)(p().A,{isSecondaryColor:!0,children:f.description}),(0,g.jsx)(o().p,{href:(0,u().x)("guides.workspaceAnalytics"),external:!0,size:"sm",iconLeading:r().questionMarkCircleSmallIcon,colorPalette:"gray",children:(0,g.jsx)(d().sA,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})})}},459173:(e,t,a)=>{a.d(t,{$E:()=>f,MC:()=>g,Rv:()=>h,dU:()=>m});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var n=a(296540),s=()=>a(56366),i=()=>a(624090),o=()=>a(515358),r=()=>a(926401),l=()=>a(287882),d=()=>a(69708),c=()=>a(534177),u=()=>a(474747),p=a(474848);function g({spaceStore:e,selectedPageStatus:t,setSelectedPageStatus:a,onMenuClose:o}){const l=(0,d().tz)(),c=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:g,currentPurgeDelayInSeconds:v}=(0,s().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,i().XX)(e.getModel())/1e3,currentPurgeDelayInSeconds:(0,i().NA)(e.getModel())/1e3})),[e]),y=(0,n.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:g,currentPurgeDelayInSeconds:v,intl:l})),[g,v,l]);return(0,p.jsx)(u().A,{pillIcon:r().n,allOptions:c,selectedOptions:t,setSelectedOption:a,setPillTitleStringToActiveSelection:!0,onMenuClose:o,getFormattedStringTitle:m,getFormattedStringCaption:y,getPillTitle:f})}function m(e){switch(e){case"alive":return(0,p.jsx)(d().sA,{...o().o.alive});case"in_trash":return(0,p.jsx)(d().sA,{...o().o.trash});case"deleted_from_trash":return(0,p.jsx)(d().sA,{...o().o.retained});default:(0,c().HB)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().rN)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().rN)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().HB)(t)}}}function f(e){if(0===e.length)return(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),n=e.includes("deleted_from_trash");return t?a&&n?(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||n?(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&n?(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,p.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},459401:(e,t,a)=>{a.d(t,{L:()=>r});a(898992),a(581454),a(941795);var n=a(296540),s=()=>a(401497),i=()=>a(802790),o=a(474848);function r({children:e}){const t=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16,width:"100%",paddingTop:14}})),[]),a=n.Children.toArray(e);return(0,o.jsx)("div",{style:t.container,children:a.map(((e,t)=>(0,o.jsxs)(n.Fragment,{children:[e,t<a.length-1?(0,o.jsx)(i().A,{colorVariant:"secondary",size:1}):void 0]},t)))})}},465364:(e,t,a)=>{a.d(t,{$N:()=>I,D5:()=>D,GB:()=>M,M9:()=>_,Pt:()=>k,eW:()=>T,jo:()=>P,v7:()=>C});a(944114),a(898992),a(803949),a(581454);var n=()=>a(906745),s=()=>a(242422),i=()=>a(587682),o=()=>a(187696),r=()=>a(713998),l=()=>a(597777),d=()=>a(604995),c=()=>a(416504),u=()=>a(519831),p=()=>a(496603),g=()=>a(534177),m=()=>a(299709),h=()=>a(878060),f=()=>a(44729),v=()=>a(384944),y=()=>a(319975),x=()=>a(622811),b=()=>a(267639),S=()=>a(177618),A=()=>a(695625),j=()=>a(148832),w=()=>a(747671);function _(e){var t;const{environment:a,droppedStores:s,duplicate:i,calendarBy:r,transaction:p,collectionContextStore:g,duplicateActions:h}=e,v=n().c9.fromMillis(e.startOfDay);let y=!0;if(null!==(t=g.collectionStore())&&void 0!==t&&t.isExternalSyncedCollection())return;for(const n of s){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:g});if(n.getParentTable()===u().Vl||!t){y=!1;break}f().X$({childStore:n,parentStore:t,transaction:p})||(y=!1)}const A=(0,b().T)({environment:a,droppedStores:s,duplicate:i,transaction:p,collectionStore:e.collectionStore,duplicateActions:h});for(const n of A){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:g});if(!t)continue;const s=t.getMappedProperty(r),i=n.getPropertyStore(s),u=(0,o().b)(i.getValue())||d().Ec((0,c().P)()),h=d().kW(u,(0,c().P)()),f=v.toFormat(d().tr);let b;if("date"===h.type||"datetime"===h.type)b={...h,start_date:f};else{const e=d().AA(h,(0,c().P)());if(!e.end)return;const t={...h,start_date:f},a=d().AA(t,(0,c().P)()).start.diff(e.start,"days"),n=e.end.plus(a).toFormat(d().tr);b={...h,start_date:f,end_date:n}}const A=d().kW(b,l().$K(u)||(0,c().P)());(0,x().j)({environment:a,store:n,collectionStore:t,collectionContextStore:g,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:y}),D({environment:a,type:"dateValue",propertyId:s,store:n,transaction:p,dateValue:A}),(0,m().E)({environment:a,collectionContextStore:g,block_id:n.id,property:s,property_type:"date",from:"calendar"})}}function C(e){const{calendarStore:t,direction:a,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:a,temporaryValue:void 0})}function M(e){const{calendarStore:t,x:a,y:s,calendarBy:r}=e,u=t.state;if(u.isDragging){const e=(0,o().b)(u.targetStore.getPropertyStore(r).getValue());if(!e)return;const g=d().kW(e,(0,c().P)()),m=u.temporaryValue||e,h=d().kW(m,(0,c().P)()),f=[];u.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const v=f.find((({store:e})=>{const t=A().T.getRectFromStore(e);return Boolean(t&&i().ux(t,a,s))}));let y;if(v){const e=n().c9.fromMillis(v.timestamp),t=e.endOf("day"),a=e.toFormat(d().tr);if(g){const s=d().AA(g,(0,c().P)());if(u.direction===w().Q.Left)if(n().IX.fromDateTimes(e,t).contains(s.start))y=g;else{let e;e="datetimerange"===g.type||"daterange"===g.type?{...g,start_date:a,end_date:g.end_date}:"datetime"===g.type?{type:"datetimerange",start_date:a,start_time:g.start_time,end_date:g.start_date,end_time:g.start_time,time_zone:g.time_zone,reminder:g.reminder}:{type:"daterange",start_date:a,end_date:g.start_date,reminder:g.reminder};const t=d().AA(e,(0,c().P)());y=!s.end&&t.start>s.start||s.end&&t.start>s.end?h:e}else if(s.end?n().IX.fromDateTimes(e,t).contains(s.end):n().IX.fromDateTimes(e,t).contains(s.start))y=g;else{let e;e="date"===g.type?{...g,type:"daterange",end_date:a}:"datetime"===g.type?{...g,type:"datetimerange",end_date:a,end_time:"00:00"}:{...g,end_date:a};const t=d().AA(e,(0,c().P)());y=t.end&&t.end<t.start?h:e}}}if(y&&!p().n4(h,y)){const e=d().kW(y,l().$K(m)||(0,c().P)());t.setState({...u,temporaryValue:e})}}}function T(e){const{environment:t,calendarStore:a,calendarBy:n,transaction:s}=e,i=a.state;i.isDragging&&i.temporaryValue&&(D({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:n,store:i.targetStore,transaction:s}),a.setState({...a.state,isDragging:!1}))}function k(e){const{calendarStore:t}=e,a=t.state;a.isDragging&&t.setState({...a,isDragging:!1})}function I(e){const{environment:t,store:a,collectionStore:s,collectionContextStore:i,startDayOfWeek:o,transaction:l}=e,u=i.dateRangeStartStore.state,p=(0,c().P)(),g=i.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const m=(null==s?void 0:s.getMappedProperty(g.calendar_by))??g.calendar_by,h=d().hp(u,o,p),f=h.startOf("month"),y=h.endOf("month"),b=n().c9.now().startOf("day");let S;return S=n().IX.fromDateTimes(f,y).contains(b)?d().p6(b.valueOf(),p):d().p6(d().iB(u,o,p).valueOf(),p),v().zv({store:a.getPropertiesStore(),data:{[m]:r().m5(S)},transaction:l}),(0,x().j)({environment:t,store:a,collectionStore:s,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:l}),a}function D(e){const{environment:t,store:a,propertyId:n,transaction:i}=e;let o;"timestamp"===e.type?o=d().p6(e.timestampMs.valueOf(),(0,c().P)()):"dateValue"===e.type?o=e.dateValue:(0,g().HB)(e);const l=a.getPropertyValue(n);if(o&&function(e){const{propertyId:t,oldDateValue:a,newPersistedDate:n,store:i}=e;if(a||!n||void 0!==n.reminder)return!1;if(!s().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const o=N(t,i);if(void 0===o)return!1;return!0}({propertyId:n,oldDateValue:l,newPersistedDate:o,store:a})){const e=N(n,a);void 0!==e&&(o={...o,reminder:e})}const u=r().m5(o);v().zv({store:a.getPropertiesStore(),data:{[n]:u},transaction:i}),h().O({environment:t,store:a,dateProperty:{id:n,oldValue:l,newValue:u}})}function N(e,t){const a=t.getAssociatedCollectionStore();if(!a)return;const n=a.getSchema();if(!n)return;const s=n[e];return s&&"date"===s.type?s.default_reminder:void 0}function P(e){const{environment:t,collectionStore:a,calendarBy:n,store:s,insertStores:i,collectionContextStore:o,transaction:r}=e,l=s.getPropertyStore(n).getValue();for(const d of i)(0,x().j)({environment:t,store:d,collectionStore:a,collectionContextStore:o,shouldCoerce:!0,groupsPointer:[],transaction:r}),y().R9({environment:t,store:d.getPropertyStore(n),value:l,transaction:r});return i.map((e=>j().B.createChildStore(a,e.pointer)))}},474747:(e,t,a)=>{a.d(t,{A:()=>S});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(30537),r=()=>a(729108),l=()=>a(631524),d=()=>a(160432),c=()=>a(69708),u=()=>a(56394),p=()=>a(722872),g=()=>a(970585),m=()=>a(760217),h=()=>a(404277),f=()=>a(939740),v=()=>a(417392),y=()=>a(89924),x=()=>a(806754),b=a(474848);function S({allOptions:e,selectedOptions:t,setSelectedOption:a,onMenuClose:S,pillIcon:A,setPillTitleStringToActiveSelection:j,getFormattedStringTitle:w,getFormattedStringCaption:_,getPillTitle:C}){const M=(0,s().uB)(void 0,g().A),T=(0,i().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginInlineEnd:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginInlineEnd:4,fill:"currentColor"},teamIcon:{marginInlineEnd:8}})),[]),[k,I]=(0,n.useState)(!1);function D(){I(!1),S&&S()}function N(){a&&a([])}function P(e){const n=t.includes(e)?[...t.filter((t=>t!==e))]:[...t,e];a&&a(n)}const E=(0,b.jsx)(u().A,{on:t.length>0,icon:A(T.icon),title:j&&t[0]?C(t):C([]),onClick:()=>I(!0),disabled:!a,hideChevron:!a});return a?(0,b.jsx)(x().A,{children:(0,b.jsx)(v().Ay,{popupType:o().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:k,render:function(){const a={key:"menuOptions",items:Array.from(e).map((e=>({key:e,action:()=>P(e),render:a=>(0,b.jsx)(m().A,{...a,icon:(0,b.jsx)(r().S,{checked:t.includes(e),onClick:()=>P(e),size:16}),focused:!1,title:w(e),caption:_(e),shouldWrapCaption:!0})}))),render:e=>(0,b.jsx)(y().A,{...e,title:null,loading:!1})};return(0,b.jsxs)("div",{style:T.container,children:[(0,b.jsx)(h().A,{menuType:p().gu.Popup,header:null,maxHeight:250,width:300,children:(0,b.jsx)(f().Ay,{type:f().Oh.Vertical,store:M,initialFocus:0,sections:[a]})}),(0,b.jsxs)(y().A,{topBorder:!0,style:T.footer,children:[(0,b.jsx)(l().p,{onClick:N,children:(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,b.jsx)(d().A,{colorPalette:"blue",onClick:D,children:(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:D,keepFocus:!0,origin:E,preventScaleTransition:!0,trapFocus:!0})}):E}},477657:(e,t,a)=>{a.d(t,{t:()=>l});a(581454),a(296540);var n=()=>a(453697),s=()=>a(489143),i=()=>a(142448),o=()=>a(696601),r=a(474848);function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,s().A)(),u=t.map((e=>({renderAvatar:()=>(0,r.jsx)(n().A,{userStore:e,size:i().tR,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12,outlineOffset:0},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,r.jsx)(i().Qp,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,r.jsx)(o().A,{userStores:t}):void 0,isLoading:d})}},484578:(e,t,a)=>{a.d(t,{QX:()=>c,dK:()=>d});var n=()=>a(68263),s=()=>a(179034),i=()=>a(519831),o=()=>a(743246),r=()=>a(534177),l=()=>a(337567);function d({permissionItem:e,store:t}){return"display_only_inherited_permission"!==e.type&&(t.table===i().Vl?"collection_property_permission"===e.type?t.pathIsDead()||!t.canAdmin():t.pathIsDead():t.table===s().ev?t.pathIsDead()||!function(e){return"display_only_overview_permission"===e.type}(e)&&!t.canAdmin()||(0,l().dL)(t):t.table===o().C0?!t.canAdmin():void(0,r().HB)(t))}function c(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,n().Tt)(t.role))return"private";return(0,n().Ni)(t)&&"none"!==t.role?"unlisted":"open"}},489143:(e,t,a)=>{a.d(t,{A:()=>i});var n=()=>a(401497),s=()=>a(284371);function i(){return(0,n().IS)((e=>({linkButton:{fontWeight:s().Wy.medium,fontSize:s().J.UIRegular.desktop,color:e.text.secondary},tableHeader:{background:e.background.primary},tableHeaderForModal:{background:e.background.elevated},tableRow:{background:e.background.primary},tableRowForModal:{background:e.background.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:e.white,borderWidth:2,borderRadius:"100%"}})),[])}},490094:(e,t,a)=>{a.d(t,{J:()=>c});a(898992),a(354520),a(581454),a(737550),a(296540);var n=()=>a(534177),s=()=>a(722872),i=()=>a(404277),o=()=>a(939740),r=()=>a(89924),l=()=>a(250202),d=a(474848);function c({sortProperties:e,onClick:t,currentSorts:a}){const c=e.map((e=>{if(null==a?void 0:a.some((({propertyId:t})=>t===e.id)))return;return{key:e.name,render:t=>(0,d.jsx)(l().G,{...t,propertySchema:e,format:l().e.Name}),action:()=>t(e.id)}})).filter(n().O9);return c.length?(0,d.jsx)(i().A,{menuType:s().gu.Popup,children:(0,d.jsx)(o().Ay,{type:o().Oh.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(r().A,{...e}),items:c}]})}):null}},497799:(e,t,a)=>{a.d(t,{H:()=>d});a(898992),a(823215),a(354520),a(581454);var n=()=>a(56366),s=()=>a(798880),i=()=>a(322769),o=()=>a(870092),r=()=>a(134217),l=()=>a(749240);function d({spaceStore:e}){return(0,n().K8)((()=>{const t=l().subscriptionDataStoreInstance.state;if(!t)return{loading:!0};const a=r().Be(t);if(!a.every((t=>o().L.createChildStore(e,{table:s().oo,id:t.userId}).isReady())))return{loading:!0};const n=a.filter(i().c7),d=a.filter(i().QE);return{loading:!1,members:n.map((({userId:t})=>o().L.createChildStore(e,{table:s().oo,id:t}))),guests:d.map((({userId:t})=>o().L.createChildStore(e,{table:s().oo,id:t})))}}),[e])}},501497:(e,t,a)=>{a.d(t,{RC:()=>l,S6:()=>d,tD:()=>c});var n=()=>a(242422),s=()=>a(56366),i=()=>a(624090),o=()=>a(869190),r=()=>a(604995);function l(){return n().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??i().mu}function d(){return(0,s().K8)((()=>l()),[])}function c(e,t,a){const n=(0,r().AA)(e,t);if((0,r().ak)(n)){const e=n.end.diff(n.start),t=e.as("year");if(t>=1)return(0,o().up)({years:Math.round(t)},a);const s=e.as("days");if(s>=1&&s<=45)return(0,o().up)({days:Math.round(s)},a);const i=e.as("months");if(i>=1)return(0,o().up)({months:Math.round(i)},a);if(s>=1)return(0,o().up)({days:Math.round(s)},a);const r=e.as("hours");if(r>=1)return(0,o().up)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,o().up)({minutes:Math.round(l)},a)}return""}},505412:(e,t,a)=>{a.d(t,{Q:()=>n,z:()=>s});const n=80,s=200},508700:(e,t,a)=>{a.d(t,{T:()=>s});a(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.62 2.87 12.76 10.25",svg:(0,a(474848).jsx)("path",{d:"M2.25 5.531h5.692a2.126 2.126 0 0 0 4.116 0h1.692a.625.625 0 1 0 0-1.25H12a2.126 2.126 0 0 0-4 0H2.25a.625.625 0 1 0 0 1.25M10 4.125a.875.875 0 1 1 0 1.75.875.875 0 0 1 0-1.75m-4 9c.921 0 1.706-.586 2-1.406h5.75a.625.625 0 0 0 0-1.25H8.058a2.126 2.126 0 0 0-4.116 0H2.25a.625.625 0 1 0 0 1.25H4a2.13 2.13 0 0 0 2 1.406m0-1.25a.875.875 0 1 1 0-1.75.875.875 0 0 1 0 1.75"})},s=(0,a(340498).wt)("slidersSmall",n)},511303:(e,t,a)=>{a.d(t,{$:()=>u,N:()=>c});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(221844),i=()=>a(484714),o=()=>a(388821),r=()=>a(534177),l=()=>a(765957),d=a(474848);const c=(0,n.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{},updateCacheWithRecordMaps:e=>{}});function u({children:e}){const t=(0,i().v3)(),[a,s]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=g(t);s(e)}),[t]);const u=(0,n.useCallback)((e=>{var a;const n=null===(a=l().default.state.currentUserStore)||void 0===a?void 0:a.id;if(!n||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const i=o().RecordMap.create(e.data.organizationOwnerRecordMap);s((e=>p({environment:t,currentUserId:n,prevCache:e,recordMap:i})))}),[t]),m=(0,n.useCallback)((e=>{var a;const n=null===(a=l().default.state.currentUserStore)||void 0===a?void 0:a.id;if(!n)return;const i=e.map((e=>{if(e.data.organizationOwnerRecordMap&&e.data.organizationOwnerRecordMap)return o().RecordMap.create(e.data.organizationOwnerRecordMap)})).filter(r().O9),d=o().RecordMap.merge(i);s((e=>p({environment:t,currentUserId:n,prevCache:e,recordMap:d})))}),[t]);return a?(0,d.jsx)(c.Provider,{value:{organizationOwnerRecordCache:a,updateCacheWithRecordMap:u,updateCacheWithRecordMaps:m},children:e}):null}function p(e){const{environment:t,currentUserId:a,prevCache:n,recordMap:s}=e;if(!n)return g(t);for(const{pointer:i,model:o}of s)n.setModelAndRole({pointer:i,userId:a},o,"editor");return g(t,n.data)}function g(e,t){const a=new(s().A)({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}c.displayName="OrganizationCacheContext"},515358:(e,t,a)=>{a.d(t,{o:()=>i,p:()=>s});var n=()=>a(69708);const s=(0,n().YK)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"}}),i=(0,n().YK)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},518658:(e,t,a)=>{a.d(t,{Z:()=>S});var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(718827),r=()=>a(597777),l=()=>a(803960),d=()=>a(42583),c=()=>a(69708),u=()=>a(534177),p=()=>a(284371),g=()=>a(30731),m=()=>a(722872),h=()=>a(780865),f=()=>a(760217),v=()=>a(933117),y=()=>a(873066),x=()=>a(821879),b=a(474848);function S({lastEditedTime:e,createdTime:t,setLastEditedTime:a,setCreatedOnTime:i}){const o=(0,c().tz)(),[l,m]=(0,n.useState)("createdTime"),f=(0,n.useMemo)((()=>{switch(l){case"createdTime":return t;case"lastEditedTime":return e;default:(0,u().HB)(l)}}),[e,t,l]),v=(0,n.useMemo)((()=>{switch(l){case"createdTime":return i;case"lastEditedTime":return a;default:(0,u().HB)(l)}}),[a,i,l]);const S=(0,s().K8)((()=>{if((0,g().jO)(f))switch(l){case"createdTime":return(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,u().HB)(l)}const e=(0,g().ES)(f),t=h().tX(e,o,r().vz);switch(l){case"createdTime":return(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"<b>Created on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,b.jsx)("span",{style:{fontWeight:p().Wy.medium},children:e})}});case"lastEditedTime":return(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"<b>Last edited on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,b.jsx)("span",{style:{fontWeight:p().Wy.medium},children:e})}});default:(0,u().HB)(l)}}),[f,l,o]);return(0,b.jsx)(y().A,{header:(0,b.jsx)(A,{selectedItem:l,setSelectedItem:function(e){m(e)}}),mode:x().C.Pill,focused:!1,hideTime:!0,pillTitle:S,title:S,icon:d().D,value:f,showButtons:"footer",onChange:e=>{v(e)}})}function A({selectedItem:e,setSelectedItem:t}){const a=(0,i().IS)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.text.secondary,fill:e.icon.tertiary,fontWeight:500,fontSize:13},icon:{height:14,width:14,marginInlineStart:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:e,getKey:e=>e,onSelect:e=>t(e),renderItem:e=>(0,b.jsx)(f().A,{title:j(e.value),...e}),renderOrigin:t=>(0,b.jsx)(o().Ay,{...t,style:a.button,children:(0,b.jsxs)("div",{style:a.text,children:[j(e),(0,l().arrowChevronSingleDownIcon)(a.icon)]})})};return(0,b.jsx)(v().A,{...n,menuTypeOverride:(0,m().PK)()})}function j(e){return{lastEditedTime:(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,b.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},550729:(e,t,a)=>{a.d(t,{z:()=>l});var n=a(296540),s=()=>a(484714),i=()=>a(615234);var o=()=>a(369955),r=()=>a(898255);function l(e){var t;const a=(0,s().v3)(),[l,d]=(0,n.useState)(void 0),c=null===(t=(0,o().L)())||void 0===t?void 0:t.id,u=i().Xb,p=(0,n.useCallback)((async t=>{const n=await(0,r().aj)({environment:a,spaceId:t,type:e});n&&d(n)}),[a,e]);return function(e,t){const a=(0,n.useRef)(),s=(0,n.useRef)(null),[i,o]=(0,n.useState)(t),r=(0,n.useCallback)((()=>o((e=>null===e?t:null))),[t]);function l(){var e;null===(e=a.current)||void 0===e||e.call(a)}const d=(0,n.useCallback)((()=>{s.current&&clearInterval(s.current)}),[]),c=(0,n.useCallback)((()=>{d(),s.current=setInterval(l,t)}),[d,t]);(0,n.useEffect)((()=>{a.current=e}),[e]),(0,n.useEffect)((()=>(s.current&&clearInterval(s.current),null!==i&&(s.current=setInterval(l,i)),d)),[i,d])}((()=>{p(c)}),u),(0,n.useEffect)((()=>{p(c)}),[p,c]),l}},573660:(e,t,a)=>{a.d(t,{c:()=>p,y:()=>u});a(581454);var n=a(296540),s=()=>a(401497),i=()=>a(396896),o=()=>a(493552),r=()=>a(802790),l=a(474848);const d=24,c=12;function u({title:e,titleId:t,byline:a,bylineId:n,item:r,onClick:u,padding:p,itemStyles:g,bylineStyles:m,styles:h,badge:f,shouldHighlight:v}){const y=(0,s().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:p,cursor:u?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${c}px)`,width:`calc(100% + ${d}px)`,insetInlineStart:`-${d/2}px`,position:"absolute",backgroundColor:e.buttonHoveredBackground},byline:{lineHeight:"18px",...m}})),[p,u,m]),x={...y.settingContainer,...h};return(0,l.jsxs)("div",{style:x,...u?{onClick:u,role:"button",tabIndex:0}:{},children:[(0,l.jsxs)("div",{style:y.settingLeft,children:[(0,l.jsxs)(i().fI,{alignItems:"center",children:[(0,l.jsx)(o().D,{id:t,styleKey:"Body/Medium",colorVariant:"primary",children:e}),f]}),a?(0,l.jsx)(o().D,{id:n,styleKey:"Body-sm/Regular",colorVariant:"secondary",style:y.byline,children:a}):void 0]}),(0,l.jsx)("div",{style:{...y.settingRight,...g},children:r}),v?(0,l.jsx)("div",{style:y.highlight}):void 0]})}function p(e){const{items:t}=e,a=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"}})),[]);return(0,l.jsx)("div",{style:a.container,children:t.map(((e,a)=>(0,l.jsxs)(n.Fragment,{children:[e,a<t.length-1?(0,l.jsx)(r().A,{colorVariant:"secondary",size:1}):null]},a)))})}},583521:(e,t,a)=>{a.d(t,{p:()=>k});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var n=a(296540),s=()=>a(59226),i=()=>a(221844),o=()=>a(223116),r=()=>a(484714),l=()=>a(612740),d=()=>a(436604),c=()=>a(179034),u=()=>a(519831),p=()=>a(445120),g=()=>a(319625),m=()=>a(496603),h=()=>a(534177),f=()=>a(314529);var v=()=>a(559506),y=()=>a(904671),x=()=>a(30731),b=()=>a(218801),S=()=>a(148832),A=()=>a(543665),j=()=>a(46986);const w=20,_={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},C={..._,audience:["shared_externally","shared_internally","shared_to_web"]},M={filters:_,recordStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},T={...M,filters:C};function k({spaceStore:e,userStore:t,hasUserConfirmedAcknowledgement:a,organizationId:_}){const C=(0,s().X)("enabled_bev_default_audience_filter"),k=(0,j().Xl)(),I=C?T:M,D=(0,r().v3)(),[N,P]=(0,n.useState)(I),E=(0,n.useRef)(I.filters),B=(0,n.useRef)(e.id),R=(0,n.useCallback)((async({restartSearch:n,ignoreFilterComparison:s})=>{if(!a)return;if(!s&&m().n4(N.filters,E.current)&&e.id===B.current)return;E.current=N.filters,B.current=e.id;let r=N.loading,u=N.error,h=N.hasNextPage,y=N.numPagesLoaded,j=N.paginationToken;if(n&&(P((e=>({...M,showSuggestions:e.showSuggestions,filters:e.filters}))),r=M.loading,u=M.error,h=M.hasNextPage,y=M.numPagesLoaded,j=M.paginationToken),h&&!r&&!u){P((e=>({...e,showSuggestions:!1,loading:!0})));try{const a=await v().callApi({eventName:"adminContentSearch",environment:D,data:{spaceId:e.id,organizationId:_,sort:{field:"relevance",direction:"desc"},limit:w,paginationToken:j,query:N.filters.query,audience:N.filters.audience,lastEditedTime:(0,x().ES)(N.filters.lastEditedTime),createdTime:(0,x().ES)(N.filters.createdTime),createdBy:N.filters.createdBy,sharedWith:N.filters.sharedWith,teamspaceIds:N.filters.teamIds,deletionStatuses:N.filters.pageStatus},headers:{[d().B3]:e.id}});if("failed"===a.type)throw a.error;!function(e,t){(0,f().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_queried",t)}(D,{filters:N.filters,pageNumber:y});const n=a.data.paginationToken,s=k?a.data.recordPointers:a.data.recordIds.map((t=>(0,l().iL)({blockId:t,spaceId:e.id}))),r=(0,b().p)({recordMapWithRoleJson:a.data.recordMap}),u=new(i().A)({name:o().a9,data:new(p().b)({[t.id]:r})});u.addCacheFallback(D.defaultRecordCache.inMemoryRecordCache),P((e=>{const t=[],a=new Set(e.recordStores.map((e=>e.id)));for(const n of s)if(!a.has(n.id)){const e={inMemoryRecordCache:u};t.push(n.table===c().ev?new(S().B)(D,n,e):new(A().m)(D,n,e))}const i=[...e.recordStores,...t];return{...e,recordStores:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:n,hasNextPage:Boolean(n)}}))}catch(C){const e=(0,g().A)(C);P((t=>({...t,loading:!1,error:e})))}}}),[k,D,_,e,t,a,N.filters,N.loading,N.error,N.hasNextPage,N.numPagesLoaded,N.paginationToken]);(0,n.useEffect)((()=>{N.shouldReRunSearch&&(P((e=>({...e,shouldReRunSearch:!1}))),R({restartSearch:!0,ignoreFilterComparison:!1}))}),[N.shouldReRunSearch,R]);const V=(0,n.useCallback)((async()=>{N.shouldReRunSearch||await R({restartSearch:!1,ignoreFilterComparison:!0})}),[N.shouldReRunSearch,R]),L=(0,n.useCallback)((async e=>{await R({restartSearch:!0,ignoreFilterComparison:e||!1})}),[R]),F=(0,n.useCallback)(((e,t)=>{!function(e,t){(0,f().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_filter_change",t)}(D,{newFilters:e}),P((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[D]),O=(0,n.useCallback)((async t=>{if(t.table!==c().ev&&t.table!==u().Vl)return;const a=await async function({environment:e,recordId:t,recordTable:a,spaceStore:n}){const s=a===c().ev?{recordPointer:{id:t,table:c().ev,spaceId:n.id}}:{recordPointer:{id:t,table:u().Vl,spaceId:n.id}},i=await v().callApi({eventName:"getPrivateRecordInfo",environment:e,data:s});if("failed"===i.type)return;if(a===c().ev)return y().lE({environment:e,recordId:t,recordTable:c().ev,privateRecordCacheName:o().a9,ancestorData:i.data,spaceId:n.id});if(a===u().Vl)return y().lE({environment:e,recordId:t,recordTable:u().Vl,privateRecordCacheName:o().a9,ancestorData:i.data,spaceId:n.id});(0,h().HB)(a)}({environment:D,recordId:t.id,recordTable:t.table===c().ev?c().ev:u().Vl,spaceStore:e});a?P((e=>{const n=[];for(const s of e.recordStores)s.id===t.id?(a instanceof S().B||a instanceof A().m)&&!a.pathHasPurgedDeletedPermission()&&n.push(a):n.push(s);return{...e,recordStores:n,loading:!1,error:void 0}})):await R({restartSearch:!0,ignoreFilterComparison:!1})}),[D,e,R]);return{showSuggestions:N.showSuggestions,filters:N.filters,recordStores:N.recordStores,loading:N.loading,error:N.error,hasNextPage:N.hasNextPage,loadNextPage:V,runNewSearch:L,setFilters:F,refreshSearchResult:O}}},588264:(e,t,a)=>{a.d(t,{Y:()=>v});var n=a(296540),s=()=>a(242422),i=()=>a(56366),o=()=>a(401497),r=()=>a(699143),l=()=>a(493552),d=()=>a(835470),c=()=>a(69708),u=()=>a(920093),p=()=>a(350188),g=()=>a(623580),m=()=>a(347063),h=()=>a(107683),f=a(474848);function v(){const e=(0,i().O$)(p().A);return e.open?(0,f.jsx)(y,{state:e}):null}function y({state:e}){const[t,a]=n.useState(null),[i,p]=n.useState(""),[v,y]=n.useState(!1),x=(S=Boolean(t),(0,o().IS)((e=>({input:{padding:"10px, 8px",width:"100%",height:36,background:e.background.secondary,borderRadius:6,border:`1px solid ${S?e.red.border.strong:e.border.primary}`,...S?{boxShadow:e.inputRedFocusRing}:{boxShadow:"none"}}})),[S]));var S;const{title:A,message:j,acceptLabel:w,requiredInputValue:_,content:C,width:M,secondStageModal:T}=e,k=n.useCallback((()=>{if(b(_,i)){s().default.checkGate({gateName:"use_updated_account_deletion_flow"})&&void 0!==T?y(!0):u().V({didConfirm:!0})}else a((0,f.jsx)(c().sA,{id:"confirmDialogInput.incorrectInputError.message",defaultMessage:"Please type “{requiredInputValue}” to continue",values:{requiredInputValue:_}}))}),[i,_,T]),I=n.useCallback((()=>{u().V({didConfirm:!0})}),[]);return(0,f.jsx)(h().s,{isOpen:!0,onDismiss:()=>u().V({didConfirm:!1}),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:M??420}},render:()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().tf,{showDismissButton:!1,header:(0,f.jsx)(m().YA,{iconAndTitle:(0,f.jsx)(m().ZQ,{iconGroup:d().F,iconColorPalette:"red",iconColorVariant:"accentPrimary",title:A}),description:j}),footer:(0,f.jsx)(m().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:w,onClick:k}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,f.jsxs)(r().Y1,{gap:12,padding:2,children:[C,(0,f.jsxs)(r().Y1,{gap:4,children:[(0,f.jsx)(g().A,{style:x.input,value:i,onChange:e=>{a(void 0),p(e.target.value)},placeholder:_,onSubmit:k}),t?(0,f.jsx)(l().D,{styleKey:"Caption/Regular",colorPalette:"red",colorVariant:"accentPrimary",children:t}):null]})]})}),(0,f.jsx)(h().s,{isOpen:v,onDismiss:()=>y(!1),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:M??420}},render:()=>(0,f.jsx)(m().tf,{showDismissButton:!1,header:(0,f.jsx)(m().YA,{iconAndTitle:(0,f.jsx)(m().ZQ,{iconGroup:d().F,iconColorPalette:"red",iconColorVariant:"accentPrimary",title:null==T?void 0:T.title}),description:null==T?void 0:T.message}),footer:(0,f.jsx)(m().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:w,onClick:I}],secondaryButtons:[{buttonType:"dismiss"}]})})})]})})}function x(e){return e.trim().replace(/\s+/g," ")}function b(e,t){return 0===x(e).localeCompare(x(t),void 0,{sensitivity:"base",usage:"search"})}},592010:(e,t,a)=>{a.d(t,{Z:()=>g,b:()=>p});var n=a(296540),s=()=>a(56366),i=()=>a(515358),o=()=>a(433847),r=()=>a(69708),l=()=>a(534177),d=()=>a(569028),c=()=>a(566468),u=a(474848);function p({blockStore:e,spaceStore:t,useSecondaryColorTitle:a}){const[i,r]=(0,n.useState)(),l=(0,s().K8)((()=>{const t=(0,d().E)(e);return o().wD(t)}),[e]);(0,n.useEffect)((()=>{!async function(){if(!t)return;const e=await o().x8({spaceId:t.getSpaceId(),inheritedPermissionItemsForPage:l,loadRecordModel:t.loadRecordModel});r(e)}()}),[t,l]);const p=(0,n.useMemo)((()=>{if(i)return g(i)}),[i]);return(0,u.jsx)(c().s7,{useSecondaryColorTitle:a,useThinTitle:!0,title:p})}function g(e){switch(e){case"private":return(0,u.jsx)(r().sA,{...i().p.private});case"shared_internally":return(0,u.jsx)(r().sA,{...i().p.sharedInternally});case"shared_externally":return(0,u.jsx)(r().sA,{...i().p.sharedExternally});case"shared_to_web":return(0,u.jsx)(r().sA,{...i().p.publishedToWeb});default:(0,l().HB)(e)}}},593467:(e,t,a)=>{a.d(t,{Jb:()=>d,OJ:()=>h,fP:()=>v,i_:()=>f});a(898992),a(354520),a(581454);var n=()=>a(416845),s=()=>a(436604),i=()=>a(798880),o=()=>a(100853),r=()=>a(870092),l=()=>a(559506);const d="last_90_days",c={field:"last_active",direction:"desc"};async function u(e){const{environment:t,filter:a,spaceId:n,currentSpaceId:s,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&s===n?o:p({environment:t,spaceId:n,filter:a})}async function p(e){const{environment:t,spaceId:a,filter:n}=e,i=await l().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===n?"last_90_days":n},headers:{[s().B3]:a}});return"failed"===i.type?i.body:i.data}async function g(e){const{environment:t,filter:a,sort:n,spaceStore:s,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===n.direction&&l.field===n.field&&i===s.id?o.usersAndStats:m({environment:t,filter:a,sort:n,spaceStore:s})}async function m(e){const{environment:t,filter:a,sort:n,spaceStore:o}=e,d=await l().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:o.id,filters:{timeRange:a},sort:n},headers:{[s().B3]:o.id}});return"failed"===d.type?d.body:d.data.users.map((e=>({stats:e,userStore:r().L.createChildStore(o,{table:i().oo,id:e.userId})})))}async function h(e){const{environment:t,spaceStore:a,currentTab:s,currentSpaceId:i,usersTabData:o,setState:r,graphFilter:l,tableFilter:p}=e,m=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:s,usersTabData:i,graphFilter:o,tableFilter:r}=e,l=o||(null==i?void 0:i.graphFilter)||d,p=r||(null==i?void 0:i.tableFilter)||d,m=(null==i?void 0:i.userTableSort)||c,[h,f]=await Promise.all([u({environment:t,filter:l,spaceId:a.id,currentSpaceId:s,usersTabData:i}),g({environment:t,filter:p,sort:m,spaceStore:a,currentSpaceId:s,usersTabData:i})]),v=(0,n().Ow)(h)||!h?[]:h,y=(0,n().Ow)(f)||!f?[]:f;return{graphFilter:l,tableFilter:p,userTableSort:m,dailyUsersError:(0,n().Ow)(h)?h:void 0,dailyUsersData:v,usersAndStatsError:(0,n().Ow)(f)?f:void 0,usersAndStats:y}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:o,graphFilter:l,tableFilter:p});r({currentSpaceId:a.id,currentTab:s,usersTabData:m})}async function f(e){const{environment:t,spaceStore:a}=e,s=e.nextGraphFilter||d,i=e.nextTableFilter||d,o=e.nextSort||c,[r,l]=await Promise.all([p({environment:t,filter:s,spaceId:a.id}),m({environment:t,filter:i,sort:o,spaceStore:a})]),u=(0,n().Ow)(r)||!r?[]:r,g=(0,n().Ow)(l)||!l?[]:l;return{graphFilter:s,tableFilter:i,userTableSort:o,dailyUsersError:(0,n().Ow)(r)?r:void 0,dailyUsersData:u,usersAndStatsError:(0,n().Ow)(l)?l:void 0,usersAndStats:g}}function v(e,t){if((0,n().vP)(e)){const a=(0,o().D)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},600329:(e,t,a)=>{a.d(t,{r:()=>s});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.19 4.19 11.62 11.62",svg:(0,a(474848).jsx)("path",{d:"m15.543 5.75-.684.684-1.288-1.289.692-.69a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zM6.11 15.183l7.914-7.914-1.289-1.29-7.92 7.909a1.3 1.3 0 0 0-.275.457l-.335 1.082c-.061.228.152.442.366.366l1.082-.336q.251-.068.457-.274"})},s=(0,a(340498).wt)("pencil",n)},602105:(e,t,a)=>{a.d(t,{V:()=>n,v:()=>s});const n={mini:3,small:4,default:6,medium:8,large:12,max:16},s="0px 4px 0px -2px #00000005"},609989:(e,t,a)=>{a.d(t,{$:()=>n,A:()=>i});const n={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class s extends(()=>a(757695))().Store{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const i=s},617842:(e,t,a)=>{a.d(t,{M:()=>i});a(296540);var n=()=>a(631524),s=a(474848);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,s.jsx)(n().p,{onClick:i,disabled:a,style:{justifyContent:"center",marginInlineStart:6},...a?{colorPalette:"gray",colorVariant:"tertiary"}:{colorPalette:"blue"},children:t})}},618659:(e,t,a)=>{a.d(t,{DZ:()=>S,lz:()=>b,xF:()=>y});var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(951105),l=()=>a(798880),d=()=>a(69708),c=()=>a(884107),u=()=>a(471995),p=()=>a(870092),g=()=>a(285790),m=()=>a(859428),h=()=>a(125565),f=()=>a(566468),v=a(474848);function y(e){const t="userId"in e?e.userId:void 0,a="email"in e?e.email:void 0,r=(0,s().v3)(),g=(0,d().tz)(),[m,y]=(0,n.useState)(!1),A=(0,f().f0)({useThinTitle:!0,containerStyles:{width:"auto"},iconSize:34,icon:(0,v.jsx)("div",{})}),j=(0,o().IS)((t=>({...A,container:{cursor:"pointer",...A.container,...e.styles}})),[A,e.styles]),w=(0,i().K8)((()=>{if(t){const e=new(p().L)(r,{table:l().oo,id:t});return{userStore:e,isReady:e.isReady(),userEmail:e.getEmail()}}}),[r,t]),_=t?null==w?void 0:w.userEmail:a;return null!=w&&w.isReady||a?(0,v.jsxs)("div",{style:j.container,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[(0,v.jsx)("div",{style:j.summaryContainer,children:(0,v.jsx)(h().A,{isSecondaryColor:!0,style:j.name,showTooltipWhenTruncated:!0,children:_})}),(0,v.jsx)(b,{onCopyClick:async function(e){if(e.stopPropagation(),!_)return void u().D6({label:g.formatMessage(S.toastFailedToCopy)});const t=await c().R.clipboardActions.load();await t.copyString({stringValue:_,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),u().D6({label:g.formatMessage(S.toastSuccessfulCopy)})},isHovered:m})]}):(0,v.jsx)(x,{})}function x(){return(0,v.jsx)(f().mf,{})}function b({onCopyClick:e,isHovered:t,containerStyles:a,size:n=20}){const s=(0,d().tz)().formatMessage(S.copy),i=(0,o().IS)((e=>({container:{display:"flex",background:e.background.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6,marginInlineStart:8,marginInlineEnd:2,visibility:t?"visible":"hidden",...a},buttonStyle:{height:n,width:n,boxShadow:"none"},iconStyle:{color:e.text.secondary,fill:e.text.secondary}})),[t,n,a]);return(0,v.jsx)(m().A,{renderTooltip:()=>s,render:t=>(0,v.jsx)("div",{style:i.container,...t,children:(0,v.jsx)(g().A,{onClick:e,ariaLabel:s,hasBackground:!0,icon:r().k,showShadow:!0,iconStyle:i.iconStyle,style:i.buttonStyle})})})}const S=(0,d().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"baseTable.emailCell.copyButton.copyToClipboard"},toastFailedToCopy:{defaultMessage:"Failed to copy",id:"baseTable.emailCell.copyButton.failedToCopy"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"baseTable.emailCell.copyButton.successfulCopy"}})},641447:(e,t,a)=>{a.d(t,{r:()=>ye});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(396896),r=()=>a(98126),l=()=>a(69708),d=()=>a(534177),c=()=>a(422366),u=()=>a(991221),p=()=>a(148832),g=()=>a(543665),m=()=>a(641300),h=()=>a(625383),f=()=>a(125565),v=()=>a(484714),y=()=>a(631524),x=()=>a(160432),b=()=>a(738418),S=()=>a(449552),A=()=>a(284371),j=()=>a(314529);var w=()=>a(27579),_=()=>a(72234),C=()=>a(232930),M=a(474848);function T(e){const t=(0,v().v3)(),a=(0,i().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.text.tertiary,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:A().Wy.medium,fontSize:16},disclaimer:{fontWeight:A().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.text.tertiary},learnMoreButtonIcon:{width:12,height:12,marginInlineEnd:4}})),[]),s=(0,n.useCallback)((()=>{!function(e){(0,j().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_acknowledge_confirm")}(t),_().dK(t)}),[t]);return(0,M.jsxs)("div",{style:a.container,children:[(0,S().g)(a.headerIcon),(0,M.jsx)("h1",{style:a.disclaimerTitle,children:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,M.jsx)("p",{style:a.disclaimer,children:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don’t have access to, including the private pages of other workspace members. Consult with your organization’s legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,M.jsx)(x().A,{colorPalette:"blue",style:a.acknowledgeButton,onClick:s,children:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,M.jsxs)(y().p,{style:a.learnMoreButton,onClick:()=>{const e=(0,C().x)("adminContentSearch");(0,w().L)({environment:t,url:e})},children:[(0,b().G)(a.learnMoreButtonIcon),(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var k=()=>a(994776),I=()=>a(149375),D=()=>a(701144);function N({filters:e,setFilters:t}){const a=(0,i().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:A().Wy.medium,fontSize:16},description:{fontWeight:A().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:"100%",maxWidth:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.shadow2XS},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",insetInlineEnd:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.text.tertiary,fill:"currentColor"}})),[]);return(0,M.jsxs)("div",{style:a.container,children:[(0,M.jsx)("h1",{style:a.title,children:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,M.jsx)("p",{style:a.description,children:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,M.jsxs)(y().p,{style:a.suggestion,onClick:function(){t({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:a.filterContainer,children:(0,M.jsx)(D().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,M.jsx)("div",{style:a.arrowIconContainer,children:(0,I().v)(a.arrowIcon)})]}),(0,M.jsxs)(y().p,{style:a.suggestion,onClick:function(){t({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,M.jsx)("div",{style:a.filterContainer,children:(0,M.jsx)(D().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,M.jsx)("div",{style:a.arrowIconContainer,children:(0,I().v)(a.arrowIcon)})]})]})}var P=()=>a(970236),E=()=>a(624090),B=()=>a(287882),R=()=>a(720665),V=()=>a(859428);function L({deletionStatus:e,store:t}){const n=(0,i().IS)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginInlineEnd:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:o,purgeDelayMs:r}=(0,s().K8)((()=>{const e=t.getSpaceStore();return{deleteFromTrashDelayMs:(0,E().XX)(null==e?void 0:e.getModel()),purgeDelayMs:(0,E().NA)(null==e?void 0:e.getModel())}}),[t]),c=(0,s().K8)((()=>{if("in_trash"===e)return(0,E().BT)(t.pointer,t.getRecordModel)}),[t,e]),u=(0,s().K8)((()=>{if("deleted_from_trash"===e)return(0,E().uZ)(t.pointer,t.getRecordModel)}),[t,e]),p=(0,a(501497).S6)();switch(e){case"alive":return null;case"in_trash":return Date.now()>=(0,E().vw)({movedToTrashTime:c,deleteFromTrashDelayMs:o,cdrrDeletionEnabledTimestamp:p})?(0,M.jsx)(F,{deleteFromTrashDelaySeconds:o/R().TD,purgeDelaySeconds:r/R().TD,deletionStatus:e}):(0,M.jsx)(P().E,{style:n.grayBadge,content:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:(0,a(236262).trashIcon)(n.trashIcon)}),(0,M.jsx)(l().sA,{id:"adminContentSearch.deletionStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(u??E().mZ)+r?(0,M.jsx)(F,{deleteFromTrashDelaySeconds:o/R().TD,purgeDelaySeconds:r/R().TD,deletionStatus:e}):(0,M.jsx)(P().E,{style:n.grayBadge,content:(0,M.jsx)(l().sA,{id:"adminContentSearch.deletionStatusBadge.retained",defaultMessage:"Retained"})});default:(0,d().HB)(e)}}function F(e){const{deletionStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:n}=e,s=(0,l().tz)(),o=(0,i().IS)((e=>({redBadge:{color:e.red.text.accentPrimary,backgroundColor:e.red.background.tertiaryTranslucent,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.text.inverseSecondary}})),[]);return"in_trash"===t?(0,M.jsx)(V().A,{renderTooltip:()=>(0,M.jsx)(l().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:o.secondaryTooltip,children:e}),duration:(0,B().rN)(a,s)}}),placement:"bottom",render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(P().E,{style:o.redBadge,content:(0,M.jsx)(l().sA,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,M.jsx)(V().A,{renderTooltip:()=>(0,M.jsx)(l().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,M.jsx)("div",{children:e}),secondary:e=>(0,M.jsx)("div",{style:o.secondaryTooltip,children:e}),duration:(0,B().rN)(n,s)}}),placement:"bottom",render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(P().E,{style:o.redBadge,content:(0,M.jsx)(l().sA,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var O=()=>a(179034),z=()=>a(482707),U=()=>a(722872),W=()=>a(437487),H=()=>a(463830),K=()=>a(529183),q=()=>a(454354),G=()=>a(404277),Y=()=>a(939740),Q=()=>a(47582),$=()=>a(621841),J=()=>a(632854);function Z(e){const{deletionStatus:t,store:a,refreshSearchResult:n}=e;switch(t){case"alive":case"in_trash":return(0,M.jsx)(X,{deletionStatus:t,store:a,refreshSearchResult:n});case"deleted_from_trash":return(0,M.jsx)(ee,{deletionStatus:t,store:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:n});default:(0,d().HB)(t)}}function X({store:e,deletionStatus:t,refreshSearchResult:a}){const i=(0,l().tz)(),o=(0,s().uB)(void 0,H().A),r=(0,v().v3)(),c=(0,s().uB)(void 0,q().A),u=(0,s().uB)(void 0,K().Ay),[g,m]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const t=e instanceof p().B?e:e.getParentStore(),a=t instanceof p().B?t:void 0;c.setState({...c.state,privatePageStore:a,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[e,c]);const h=[(0,J().j9)({environment:r,deletionStatus:t,popupStore:o,store:e,handleOpenPermissionsMenu:()=>m(!0),onRestoreOrDeletePage:a,from:"adminContentSearch"}),(0,J().CT)({environment:r,deletionStatus:t,popupStore:o,store:e,onRestoreOrDeletePage:a,from:"adminContentSearch"})].filter(d().O9);return(0,M.jsx)($().j,{onClose:()=>{m(!1),W().Ay.reset()},originAriaLabel:i.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),popupStore:o,render:()=>g&&e.table===O().ev?(0,M.jsx)(z().k,{store:e,sudoModeStore:c,inviteTargetsStore:u,location:"admin_content_search"}):(0,M.jsx)(G().A,{menuType:U().gu.Popup,width:248,children:(0,M.jsx)(Y().Ay,{type:Y().Oh.Vertical,initialFocus:void 0,sections:h})}),useShareMenuStyles:g})}function ee({store:e,getValidDeletedPermissions:t,refreshSearchResult:a}){const n=(0,v().v3)();return(0,M.jsx)(Q().V,{environment:n,store:e,includeNonRestoreActions:!0,getValidDeletedPermissions:t,onRestoreOrDeletePage:a,from:"adminContentSearch"})}var te=()=>a(369955);var ae=()=>a(566468);function ne({deletedFromTrashTime:e}){const t=function(){const e=(0,te().L)();return(0,s().K8)((()=>{const t=null==e?void 0:e.getModel();return(0,E().NA)(t)}),[e])}();if((0,d().O9)(e)){const a=e+t;return a>Date.now()?(0,M.jsx)(h().d,{dateTs:a,omitTooltip:!0}):(0,M.jsx)(V().A,{render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ae().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(l().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,M.jsx)(l().sA,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,M.jsx)(ae().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,M.jsx)(l().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var se=()=>a(773290);const ie={id:"page",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,M.jsx)(a(860864).EB,{store:"collection"===e.type?e.collectionStore:e.pageStore,rightIcon:(0,M.jsx)(Z,{store:"collection"===e.type?e.collectionStore:e.pageStore,deletionStatus:e.deletionStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,M.jsx)(L,{deletionStatus:e.deletionStatus,store:"collection"===e.type?e.collectionStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},oe={id:"location",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,M.jsx)(a(421645).E,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},re={id:"createdTime",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>e.createdTime?(0,M.jsx)(h().d,{dateTs:e.createdTime}):void 0,widthData:{width:140},sortable:!1},le={id:"lastEditedTime",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>e.lastEditedTime?(0,M.jsx)(a(738268).Z,{lastEditedTime:e.lastEditedTime,lastEditedByPointer:e.lastEditedByPointer,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.deletionStatus}):void 0,widthData:{width:140},sortable:!1},de={id:"createdBy",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdByPointer?(0,M.jsx)(se().T,{store:"page"===e.type?e.pageStore:e.collectionStore,actorPointers:[e.createdByPointer]}):null,widthData:{width:140},sortable:!1},ce={id:"lastEditedBy",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedByPointer?(0,M.jsx)(se().T,{store:"page"===e.type?e.pageStore:e.collectionStore,actorPointers:[e.lastEditedByPointer]}):null,widthData:{width:140},sortable:!1};function ue({blockStore:e}){const t=(0,s().O$)(a(765957).AppStoreSidebarSpaceStore);return t?(0,M.jsx)(a(592010).b,{blockStore:e,spaceStore:t}):null}const pe={id:"audience",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,M.jsx)(ue,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore}),widthData:{width:140},sortable:!1},ge={id:"sharedWith",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,M.jsx)(a(504546).o,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore}),widthData:{width:140},sortable:!1},me={id:"retainedUntil",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,M.jsx)(ne,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},he={id:"pageStatus",headerTitle:(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,M.jsx)(a(371895).u,{pageStatus:e.deletionStatus}),widthData:{width:140},sortable:!1},fe=[ie,oe,pe,ge,ce,le,de,re],ve=[ie,oe,he,me,pe,ge,ce,le,de,re];function ye({loading:e,error:t,loadNextPage:a,hasNextPage:h,filters:v,setFilters:y,recordStores:x,showSuggestions:b,runNewSearch:S,hasUserConfirmedAcknowledgement:A,refreshSearchResult:j,shouldShowLoadMore:w}){const _=A&&!e&&!b,C=A&&!b,I=(0,u().T)(),D=(0,n.useMemo)((()=>v.pageStatus.includes("deleted_from_trash")||v.pageStatus.includes("in_trash")||0===v.pageStatus.length),[v.pageStatus]),P=D?ve:fe,E=(0,s().K8)((()=>x.map((e=>{if(!(e instanceof p().B||e instanceof g().m))return;const t=D&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive",a={isClickable:!1,teamStore:(0,c().U)(e),deletionStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?I:void 0,refreshSearchResult:j};if(e instanceof g().m){const t=e.getParentBlockStore();if(!t)return;return{...a,id:e.id,type:"collection",collectionStore:e,parentBlockStore:t,lastEditedTime:e.getLastEditedTimeOrBlockFallback(),lastEditedByPointer:e.getLastEditedByPointerOrBlockFallback(),createdTime:e.getCreatedTimeOrBlockFallback(),createdByPointer:e.getCreatedByPointerOrBlockFallback()}}if(e instanceof p().B)return{...a,id:e.id,type:"page",pageStore:e,lastEditedTime:e.getLastEditedTime(),lastEditedByPointer:e.getLastEditedByPointer(),createdTime:e.getCreatedTime(),createdByPointer:e.getCreatedByPointer()};(0,d().HB)(e)})).filter(d().O9)),[x,D,I,j]),B=(0,i().IS)((e=>(0,m().rC)({columnRenderInfo:P,theme:e,containerMarginTop:0})),[P]);return t?(0,M.jsx)(k().t,{runNewSearch:S,error:t}):A?b&&0===E.length?(0,M.jsx)(N,{filters:v,setFilters:y}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:w?void 0:400,columnRenderInfo:P,rows:E,loadMoreMethod:C?w?{type:"button",onLoadMore:a,hasNextPage:h}:{type:"scroll",onLoadMore:a}:void 0,renderNoRowsComponent:()=>(0,M.jsx)(f().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:_?(0,M.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."}):void 0}),styles:B}),e?(0,M.jsx)(o().fI,{justifyContent:"center",children:(0,M.jsx)(r().A,{style:{margin:"24px auto 24px"}})}):null]}):(0,M.jsx)(T,{})}},643908:(e,t,a)=>{a.d(t,{A:()=>s});a(296540);var n=a(474848);const s=function(e){const t=(0,a(484714).v3)(),{render:s,requireUpgradeToTier:i,analyticsName:o,renderUpgradeTooltip:r,onUpgradeClick:l,alwaysAllowClick:d,tooltipPlacement:c,upgradeButtonDesktopStyle:u,upgradeButtonMobileStyle:p}=e;let g,{onClick:m,renderTooltip:h}=e;return i&&(g=(0,n.jsx)(a(118849).A,{subscriptionTier:i,analyticsName:o,desktopStyle:{display:"inline-block",pointerEvents:"none",...u},mobileStyle:{display:"inline-block",pointerEvents:"none",...p}}),d||(m=e=>{a(991249).K(t,{from:o,upsell:{type:"product",product:i,limit:{type:"none"},trialability:"none"}}),l&&l(e)},h=r)),(0,n.jsx)(a(859428).A,{renderTooltip:h||(()=>null),render:e=>s((0,a(553965).A)(e,{onClick:m}),g),disableTooltip:!h,placement:c})}},651818:(e,t,a)=>{a.d(t,{_H:()=>h,a_:()=>f});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(401497),o=()=>a(798880),r=()=>a(69708),l=()=>a(284371),d=()=>a(870092),c=()=>a(641300),u=()=>a(566468),p=()=>a(453697),g=a(474848);const m=28;function h({userId:e,showEmailByline:t,badge:a,isNotMultiSelectable:h,rightContent:v,overrides:y,useThinTitle:x=!0}){const b=(0,r().tz)(),S=(0,n().v3)(),A=(0,i().IS)((e=>({iconStyle:{color:e.text.tertiary,fontWeight:l().Wy.medium}})),[]),j=(0,s().K8)((()=>{const t=new(d().L)(S,{table:o().oo,id:e});return{userStore:t,isReady:t.isReady(),userName:t.getDisplayName(b),email:t.getEmail()}}),[S,e,b]);return null!=j&&j.isReady?(0,g.jsx)(u().s7,{useThinTitle:x,useSecondaryColorTitle:!Boolean(j.userName),badge:a,title:(null==y?void 0:y.name)??j.userName,byline:t?(null==y?void 0:y.email)??j.email:void 0,rightContent:v,icon:(0,g.jsx)(p().A,{size:m,userStore:j.userStore,iconStyle:A.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:h?"100%":`calc(100% - ${c().Gr}px)`}}):(0,g.jsx)(f,{})}function f(e){const t=(0,i().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??m,width:e.iconSize??m,marginInlineStart:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,g.jsx)(u().mf,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}},652399:(e,t,a)=>{a.d(t,{A:()=>A});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(30537),o=()=>a(160432),r=()=>a(69708),l=()=>a(901389),d=()=>a(370872),c=()=>a(760217),u=()=>a(404277),p=()=>a(939740),g=()=>a(417392),m=()=>a(89924),h=()=>a(859428),f=()=>a(972435),v=()=>a(722872);class y extends(()=>a(757695))().Store{getInitialState(){return{open:!1}}}const x=new y;var b=a(474848);const S=(0,r().YK)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function A({parentStore:e}){const t=(0,r().tz)(),a=(0,s().K8)((()=>x.state.open),[]);return(0,b.jsx)(g().Ay,{popupType:i().n.Popup,open:a,placementToOrigin:"bottom",alignmentToOrigin:"end",originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,b.jsx)(M,{parentStore:e}),onDismiss:w,enableOutsideClickDismiss:!0,origin:(0,b.jsx)(h().A,{renderTooltip:()=>(0,b.jsx)(r().sA,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,b.jsx)(o().A,{colorPalette:"blue",size:"lg",onClick:()=>{return e=!a,void x.setState({open:e});var e},...e,children:t.formatMessage(S.Export)})})})}function j(e,t,a){d().uU(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function w(){x.setState({open:!1})}function _(e,t,a){return{key:e,render:()=>(0,b.jsx)(c().A,{focused:!1,title:f().A.formatMessage(S[e]),onClick:()=>{w(),j(t,e,a)}}),action:()=>{}}}function C(e,t,a){return{key:e,render:()=>(0,b.jsx)(c().A,{focused:!1,title:f().A.formatMessage(S[e]),onClick:()=>{l().ui({message:(0,b.jsx)(r().sA,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can’t repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,b.jsx)(r().sA,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{w(),j(t,e,a)}}]})}}),action:()=>{}}}function M({parentStore:e}){const t=(0,n().v3)(),a=[_(30,t,e),_(60,t,e),_(90,t,e),C(365,t,e)];return(0,b.jsx)(u().A,{menuType:v().gu.Popup,children:(0,b.jsx)(p().Ay,{type:p().Oh.Vertical,sections:[{key:"results",render:e=>(0,b.jsx)(m().A,{...e}),items:a}],initialFocus:0})})}},655546:(e,t,a)=>{a.d(t,{_:()=>r});a(296540);var n=()=>a(402390),s=()=>a(69708),i=()=>a(859428),o=a(474848);function r({num:e,abbreviateNumber:t}){const a=(0,s().tz)(),r=(0,n().H)(a),l=e.toLocaleString(r),d=Intl.NumberFormat(r,{notation:"compact",maximumFractionDigits:1}).format(e);return t?(0,o.jsx)(i().A,{placement:"bottom",render:e=>(0,o.jsx)("span",{...e,children:d}),renderTooltip:()=>l}):(0,o.jsx)("span",{children:l})}},661537:(e,t,a)=>{a.d(t,{P:()=>w});var n=a(296540),s=()=>a(484714),i=()=>a(401497),o=()=>a(98126),r=()=>a(69708),l=()=>a(107683),d=()=>a(688149),c=()=>a(160432),u=()=>a(493552),p=()=>a(623580),g=a(474848);const m=(0,r().YK)({sendVerificationCode:{id:"reauthenticationModal.sendVerificationCode",defaultMessage:"Send verification code"},enterVerificationCode:{id:"reauthenticationModal.enterVerificationCode",defaultMessage:"Enter verification code"},continue:{id:"reauthenticationModal.continue",defaultMessage:"Continue"},verificationCodeSent:{id:"reauthenticationModal.verificationCodeSent",defaultMessage:"We’ve sent a verification code to your email."},sendCodeInstructions:{id:"reauthenticationModal.sendCodeInstructions",defaultMessage:"We’ll send a verification code to {email}."}});function h({state:e,userEmail:t,onSendCode:a,onPasscodeChange:n,onSubmit:s,styles:i,intl:l}){return e.emailPasscodeSent?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().D,{styleKey:"Body-sm/Regular",style:i.instructions,children:(0,g.jsx)(r().sA,{...m.verificationCodeSent})}),(0,g.jsx)(p().A,{value:e.emailPasscode,onChange:n,onSubmit:s,placeholder:l.formatMessage(m.enterVerificationCode),style:i.input,focusInitial:!0}),e.error?(0,g.jsx)("div",{style:i.error,children:e.error}):void 0,(0,g.jsx)(c().A,{colorPalette:"blue",size:"lg",style:i.button,onClick:s,disabled:e.loading,children:e.loading?(0,g.jsx)(o().k,{}):(0,g.jsx)(r().sA,{...m.continue})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().D,{styleKey:"Body-sm/Regular",style:i.instructions,children:(0,g.jsx)(r().sA,{...m.sendCodeInstructions,values:{email:(0,g.jsx)("strong",{children:t})}})}),e.error?(0,g.jsx)("div",{style:i.error,children:e.error}):void 0,(0,g.jsx)(c().A,{colorPalette:"blue",size:"lg",style:i.button,onClick:a,disabled:e.loading,children:e.loading?(0,g.jsx)(o().k,{}):(0,g.jsx)(r().sA,{...m.sendVerificationCode})})]})}const f=(0,r().YK)({enterPasswordInstructions:{id:"reauthenticationModal.enterPasswordInstructions",defaultMessage:"Please enter your password to continue."},continue:{id:"reauthenticationModal.continue",defaultMessage:"Continue"},passwordPlaceholder:{id:"reauthenticationModal.passwordPlaceholder",defaultMessage:"Password"}});function v({state:e,userEmail:t,onPasswordChange:a,onSubmit:n,styles:s,intl:i}){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().D,{styleKey:"Body-sm/Regular",style:s.instructions,children:(0,g.jsx)(r().sA,{...f.enterPasswordInstructions})}),(0,g.jsx)(p().A,{style:{display:"none"},type:"text",value:t,autoComplete:"username",disabled:!0}),(0,g.jsx)(p().A,{type:"password",value:e.password,onChange:a,onSubmit:n,placeholder:i.formatMessage(f.passwordPlaceholder),style:s.input,focusInitial:!0,autoComplete:"current-password"}),e.error?(0,g.jsx)("div",{style:s.error,children:e.error}):void 0,(0,g.jsx)(c().A,{colorPalette:"blue",size:"lg",style:s.button,onClick:n,disabled:e.loading,children:e.loading?(0,g.jsx)(o().k,{}):(0,g.jsx)(r().sA,{...f.continue})})]})}var y=()=>a(559506),x=()=>a(661461),b=()=>a(965378);const S=(0,r().YK)({errorFetchingAccountData:{id:"reauthenticationModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {email}."},invalidAuthorizationType:{id:"reauthenticationModal.invalidAuthorizationType",defaultMessage:"Invalid authorization type"}});const A=(0,r().YK)({title:{id:"reauthenticationModal.title",defaultMessage:"Confirm your identity"}}),j={loading:!1,authorized:!1,password:"",emailPasscodeSent:!1,emailPasscode:""};function w(e){const{open:t,userEmail:a,onAuthorized:c,onDismiss:u,onError:p}=e,m=(0,s().v3)(),f=(0,r().tz)(),[w,_]=(0,n.useState)(j),C=(0,n.useCallback)((e=>{_((t=>({...t,password:e.target.value,error:void 0})))}),[]),M=(0,n.useCallback)((e=>{_((t=>({...t,emailPasscode:e.target.value,error:void 0})))}),[]),T=(0,n.useCallback)((async()=>{_((e=>({...e,loading:!0})));const e=await async function(e,t,a){const n=await y().callApi({eventName:"sendEmailVerification",environment:t,data:{email:e}});return"success"===n.type?{success:!0}:{success:!1,error:(0,x().H)(a,n)}}(a,m,f);e.success?_((e=>({...e,emailPasscodeSent:!0,emailPasscode:"",error:void 0,loading:!1}))):(_((t=>({...t,loading:!1,error:e.error}))),null==p||p(e.error))}),[a,m,f,p]),k=(0,n.useCallback)((async()=>{_((e=>({...e,loading:!0})));const e=await async function(e,t,a){if("password"===a.authorizationType){const n=await y().callApi({eventName:"authVerifyPassword",environment:e,data:{password:a.password}});return"failed"===n.type?{success:!1,error:(0,x().H)(t,n)}:{success:!0}}if("temporaryPasscode"===a.authorizationType){const n=await y().callApi({eventName:"authVerifyTemporaryPassword",environment:e,data:{temporaryPassword:a.emailPasscode}});return"failed"===n.type?{success:!1,error:(0,x().H)(t,n)}:{success:!0}}return{success:!1,error:t.formatMessage(S.invalidAuthorizationType)}}(m,f,w);e.success?_((e=>({...e,authorized:!0,error:void 0,loading:!1}))):(_((t=>({...t,loading:!1,error:e.error}))),null==p||p(e.error))}),[m,f,w,p]),I=(0,n.useCallback)((async()=>{const e=await async function(e,t,a){const n=await b().V({environment:t,userEmail:e});if(n.error)return{success:!1,error:a.formatMessage(S.errorFetchingAccountData,{email:e})};return{success:!0,authorizationType:n.value.isSamlEnforced||!n.value.hasPassword?"temporaryPasscode":"password"}}(a,m,f);e.success?_((t=>({...t,authorizationType:e.authorizationType}))):(_((t=>({...t,error:e.error}))),null==p||p(e.error))}),[a,m,f,p]);(0,n.useEffect)((()=>{t||_(j)}),[t]),(0,n.useEffect)((()=>{w.authorized&&c()}),[w.authorized,c]);const D=(0,i().IS)((()=>({container:{padding:32,fontSize:14},loadingContainer:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:32},instructions:{marginTop:0,marginInlineEnd:0,marginBottom:14,marginInlineStart:0},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},error:{color:"#ff0000",fontSize:12,marginTop:4,marginInlineStart:8}})),[]);return(0,g.jsx)(l().s,{isOpen:t,onDismiss:u,showCloseIcon:!0,ariaLabel:f.formatMessage(A.title),areaConstraint:{width:{type:"min",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,g.jsx)("div",{style:D.container,children:(0,g.jsx)(d().A,{fetch:I,loading:e=>e?(0,g.jsx)("div",{style:D.loadingContainer,children:(0,g.jsx)(o().k,{})}):null,render:()=>"password"===w.authorizationType?(0,g.jsx)(v,{state:w,userEmail:a,onPasswordChange:C,onSubmit:k,styles:D,intl:f}):"temporaryPasscode"===w.authorizationType?(0,g.jsx)(h,{state:w,userEmail:a,onSendCode:T,onPasscodeChange:M,onSubmit:k,styles:D,intl:f}):null})})})}},663484:(e,t,a)=>{a.d(t,{r:()=>S});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(401497),o=()=>a(584262),r=()=>a(955363),l=()=>a(742852),d=()=>a(69708),c=()=>a(884107),u=()=>a(27579),p=()=>a(492414),g=()=>a(722872),m=()=>a(463830),h=()=>a(621841),f=()=>a(760217),v=()=>a(404277),y=()=>a(939740),x=()=>a(89924),b=a(474848);function S({blockStore:e}){const t=(0,n().v3)(),a=(0,s().uB)(void 0,m().A),S=(0,i().IS)((e=>({changePermissionsIcon:{height:18,width:18,color:e.icon.primary,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.icon.primary,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.icon.primary,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const A={key:"actions",render:e=>(0,b.jsx)(x().A,{...e}),items:[{key:"copy-link",render:e=>(0,b.jsx)(f().A,{...e,icon:(0,l().linkIcon)(S.copyLinkIcon),title:(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const n=(0,p().Ay)({store:e,pageVisitSource:o().y8.CopyLink}),s=await c().R.clipboardActions.load();await s.copyString({environment:t,stringValue:n,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),a.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,b.jsx)(f().A,{...e,icon:(0,r().arrowDiagonalUpRightIcon)(S.openLinkIcon),title:(0,b.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const n=(0,p().Ay)({store:e,pageVisitSource:o().y8.LinkInPage});(0,u().L)({environment:t,url:n}),a.setState({open:!1})}}]},j=(0,d().tz)();return(0,b.jsx)(h().j,{originAriaLabel:j.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),popupStore:a,render:()=>(0,b.jsx)(v().A,{menuType:g().gu.Popup,width:248,children:(0,b.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,sections:[A]})}),useShareMenuStyles:!1})}},675801:(e,t,a)=>{a.d(t,{S:()=>l,i:()=>d});a(296540);var n=()=>a(69708),s=()=>a(231297),i=()=>a(581369),o=()=>a(573660),r=a(474848);function l({isEnabled:e,onToggle:t,disabled:a}){return(0,r.jsx)(o().y,{title:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),byline:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups"}),item:(0,r.jsx)(i().A,{on:e,onClick:t,disabled:a})})}function d({environment:e,areScimInviteEmailsSuppressed:t,spaceStore:a}){s().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:e,canUndo:!0,perform:e=>{s().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:t},transaction:e})}})}},689216:(e,t,a)=>{a.d(t,{n:()=>r});var n=()=>a(534177),s=()=>a(901389),i=()=>a(661461),o=()=>a(972435);async function r({onRequest:e,onSuccess:t}){const a=await e();switch(a.type){case"success":t&&await t(a);break;case"failed":s().f1((0,i().H)(o().A.getIntl(),a));break;default:(0,n().HB)(a)}}},696601:(e,t,a)=>{a.d(t,{A:()=>s});a(581454),a(296540);var n=a(474848);const s=function({userStores:e,permissionGroups:t}){const s=(0,a(401497).IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,n.jsxs)("div",{style:s.container,children:[e.map((e=>(0,n.jsx)(a(453697).A,{userStore:e,type:"avatar-name-email",size:a(142448).tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id))),null==t?void 0:t.map((e=>(0,n.jsx)(a(208261).h,{permissionGroup:e,type:"avatar-name-count"},e.group.group_id)))]})}},701144:(e,t,a)=>{a.d(t,{Ry:()=>c,b0:()=>p,j:()=>u,tE:()=>d});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(296540);var n=()=>a(888867),s=()=>a(404302),i=()=>a(69708),o=()=>a(534177),r=()=>a(474747),l=a(474848);function d({audienceValues:e,selectedAudience:t,setSelectedAudience:a,onMenuClose:i,setPillTitleStringToActiveSelection:o}){return(0,l.jsx)(r().A,{allOptions:e?new Set(e):new Set(s().p),getFormattedStringCaption:p,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:t,setSelectedOption:a,pillIcon:n().s,onMenuClose:i,setPillTitleStringToActiveSelection:o})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,o().HB)(e)}}function p(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,o().HB)(e)}}},701787:(e,t,a)=>{a.d(t,{p:()=>u});a(296540);var n=()=>a(401497),s=()=>a(493552),i=()=>a(406533),o=()=>a(284371),r=()=>a(623580),l=()=>a(618659),d=()=>a(859428),c=a(474848);function u(e){const t=(0,n().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},input:{padding:"6px 10px"},textBelowInput:{marginTop:6},helpIcon:{fill:e.icon.tertiary,marginInlineStart:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center"},inputElementWithCopyButton:{width:"calc(100% - 24px)",...o().RC},inputElementWhenMultiline:{minHeight:94},copyButton:{position:"absolute",insetInlineEnd:4,height:"fit-content"}})),[]);return(0,c.jsxs)("div",{style:t.container,children:[(0,c.jsxs)("div",{style:t.labelContainer,children:[(0,c.jsx)(s().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:e.labelMessage}),e.helpMessage?(0,c.jsx)(d().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,c.jsx)("span",{...e,children:(0,i().questionMarkCircleIcon)(t.helpIcon)})}):void 0]}),(0,c.jsxs)("div",{style:t.inputContainer,children:[(0,c.jsx)(r().A,{textarea:e.multiline,value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,style:t.input,inputStyle:{...e.onCopyClick?t.inputElementWithCopyButton:void 0,...e.multiline?t.inputElementWhenMultiline:void 0}}),e.onCopyClick?(0,c.jsx)(l().lz,{onCopyClick:e.onCopyClick,isHovered:!0,containerStyles:t.copyButton}):null]}),e.secondaryMessage?(0,c.jsx)(s().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:t.textBelowInput,children:e.secondaryMessage}):null,e.errorMessage?(0,c.jsx)(s().D,{styleKey:"Caption/Regular",colorPalette:"red",colorVariant:"accentPrimary",style:t.textBelowInput,children:e.errorMessage}):null]})}},706250:(e,t,a)=>{a.d(t,{z:()=>n});const n=(0,a(340498).xh)("paperPlane",{default:{loader:()=>a.e(5857).then(a.bind(a,808936))},small:{loader:()=>a.e(5857).then(a.bind(a,18350))},fill:{loader:()=>a.e(5857).then(a.bind(a,59442))},fillSmall:{loader:()=>a.e(5857).then(a.bind(a,691393))}},["send","fly","flight","email","inbox","outbox"])},706558:(e,t,a)=>{a.d(t,{p:()=>l});var n=a(296540),s=()=>a(401497),i=()=>a(493552),o=()=>a(145214),r=a(474848);function l(e){const{icon:t,title:a,byline:l}=e,[d,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=setTimeout((()=>c(!0)),100);return()=>clearTimeout(e)}),[]);const u=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.icon.secondary,fill:e.icon.secondary,height:36,width:36}})),[]);return(0,r.jsxs)(o().A,{animate:{opacity:d?1:0},initial:{opacity:0},style:u.container,children:[t?t(u.icon):null,(0,r.jsx)(i().D,{styleKey:"Title-sm/Semibold",colorVariant:"secondary",children:a}),(0,r.jsx)(i().D,{styleKey:"Body/Regular",colorVariant:"tertiary",children:l})]})}},710967:(e,t,a)=>{a.d(t,{t:()=>g});var n=a(296540),s=()=>a(484714),i=()=>a(401497),o=()=>a(406094),r=()=>a(69708),l=()=>a(314529);var d=()=>a(370872),c=()=>a(826658),u=a(474848);const p=(0,r().YK)({exportButton:{id:"adminContentSearchTab.export",defaultMessage:"Export results"}});function g({spaceId:e,organizationId:t,filters:a,disabled:g,shouldUseIconButton:m}){const[h,f]=(0,n.useState)(!1),v=(0,s().v3)(),y=g||h,x=(0,i().IS)((e=>({button:{opacity:y?.5:1}})),[y]);async function b(){f(!0),function(e,t){(0,l().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_export_requested",t)}(v,{filters:a}),await d().Lw(v,{spaceId:e,organizationId:t,filters:a}),f(!1)}return m?(0,u.jsx)(c().K,{onClick:b,disabled:y}):(0,u.jsx)(o().A,{size:"lg",style:x.button,disabled:y,onClick:b,children:(0,u.jsx)(r().sA,{...p.exportButton})})}},721672:(e,t,a)=>{a.d(t,{A:()=>p,W:()=>u});var n=a(296540),s=()=>a(401497),i=()=>a(631524),o=()=>a(493552),r=()=>a(626466),l=()=>a(710149),d=()=>a(602105),c=a(474848);function u({headerText:e,mainText:t,bottom:a,onClick:u,isLoading:p,disabled:g}){const[m,h]=n.useState(!1),f=(0,s().IS)((e=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:d().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.border.secondary,boxShadow:d().v,height:"auto",flex:"1 1 200px",overflow:"hidden",position:"relative"},containerDark:{background:e.palette.translucentGray[30],borderColor:e.border.primary},content:{display:"flex",flexDirection:"column",gap:12,flex:"1 1 auto",minWidth:0,marginInlineEnd:32},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:e.palette.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:m?e.palette.translucentGray[300]:e.palette.gray[100],height:20,width:20,flexShrink:0},icon:{height:20,width:20,padding:4,color:m?e.palette.gray[800]:e.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[m]);return(0,c.jsxs)(i().p,{onClick:u,style:f.container,shouldShrink:!0,hoveredStyle:{...f.container,...f.containerDark},pressedStyle:{...f.container,...f.containerDark},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),disabled:g,children:[(0,c.jsxs)("div",{style:f.content,children:[(0,c.jsxs)("div",{style:f.textContainer,children:[(0,c.jsx)(o().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:e}),p?(0,c.jsx)(l().A,{style:f.loadingMainText}):(0,c.jsx)(o().D,{style:f.mainText,styleKey:"Title/Semibold",colorVariant:"primary",children:t})]}),(0,c.jsx)("div",{style:f.bottomContainer,children:p?(0,c.jsx)(l().A,{style:f.loadingBottom}):a})]}),g?void 0:(0,c.jsx)("div",{style:f.iconButton,children:(0,r().arrowChevronSingleDownFillIcon)(f.icon)})]})}const p=u},731736:(e,t,a)=>{a.d(t,{e:()=>l});a(296540);var n=()=>a(401497),s=()=>a(922189),i=()=>a(96689),o=()=>a(99756),r=a(474848);function l(e){const{icon:t,spaceId:a,size:l,containerStyles:d}=e,c=(0,n().IS)((e=>({icon:{fill:e.icon.secondary}})),[]);return t&&a?(0,r.jsx)(o().A,{iconSize:l,type:"circle",iconType:"recordIcon",icon:{icon:t,pointer:{table:i().NX,id:a}},containerStyle:{background:"transparent",...d}}):(0,r.jsx)(o().A,{iconSize:l,type:"circle",iconType:"function",iconFn:s().personCircleFillIcon,iconStyle:c.icon,containerStyle:{background:"transparent",...d}})}},733815:(e,t,a)=>{a.d(t,{Z:()=>y});a(898992),a(354520),a(581454);var n=a(296540),s=()=>a(401497),i=()=>a(30537),o=()=>a(42583),r=()=>a(301608),l=()=>a(56394),d=()=>a(972435),c=()=>a(722872),u=()=>a(760217),p=()=>a(404277),g=()=>a(939740),m=()=>a(417392),h=()=>a(89924),f=()=>a(806754),v=a(474848);function y(e){const t=(0,s().IS)((e=>({popup:{width:125,marginInlineStart:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:y}=e,[x,b]=(0,n.useState)(!1),S=r().jf.filter((e=>!y||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),b(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(u().A,{focused:!1,onClick:a,title:d().A.formatMessage(r().jy[t])})}})),A=(0,v.jsx)(l().A,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,o().D)({width:16,marginInlineEnd:6,fill:"currentColor"}),title:d().A.formatMessage(r().jy[a]),onClick:()=>{b(!0)}}),j=[{key:"filters",items:S,render:e=>(0,v.jsx)(h().A,{...e,title:null,loading:!1})}],w=(0,v.jsx)(p().A,{menuType:c().gu.Popup,header:null,children:(0,v.jsx)(g().Ay,{type:g().Oh.Vertical,initialFocus:0,sections:j})});return(0,v.jsx)(f().A,{marginAfter:!1,children:(0,v.jsx)(m().Ay,{popupType:i().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:x,render:()=>w,onDismiss:()=>b(!1),keepFocus:!0,origin:A,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},738268:(e,t,a)=>{a.d(t,{Z:()=>p});a(296540);var n=()=>a(662303),s=()=>a(56366),i=()=>a(869190),o=()=>a(798880),r=()=>a(69708),l=()=>a(534177),d=()=>a(6208),c=()=>a(625383),u=a(474848);function p({pageStatus:e,lastEditedTime:t,lastEditedByPointer:a,movedToTrashTime:p,deletedFromTrashTime:g}){const m=(0,d().y)(null==a?void 0:a.id),h=(0,s().K8)((()=>{if("alive"===e)return(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:m,time:(0,i().W_)(t,"month_day_time",n().locale)}});if((0,l().O9)(g)){return!(null==a||!a.id)&&(0,o().O5)(a.id)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,i().W_)(g,"month_day_time",n().locale)}}):(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:m,time:(0,i().W_)(g,"month_day_time",n().locale)}})}return(0,l().O9)(p)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:m,time:(0,i().W_)(p,"month_day_time",n().locale)}}):void 0}),[g,a,t,p,e,m]);return(0,u.jsx)(c().d,{dateTs:t,tooltip:h})}},742784:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J,getBlockExportTypeTitle:()=>Z,getBlockIncludeContentsTitle:()=>X,getCollectionViewExportTypeTitle:()=>ee});a(581454);var n=a(296540),s=()=>a(59226),i=()=>a(484714),o=()=>a(56366),r=()=>a(401497),l=()=>a(929219),d=()=>a(631524),c=()=>a(160432),u=()=>a(493552),p=()=>a(148307),g=()=>a(522419),m=()=>a(72135),h=()=>a(161479),f=()=>a(96689),v=()=>a(69708),y=()=>a(496603),x=()=>a(370872),b=()=>a(722872),S=()=>a(553965),A=()=>a(668766),j=()=>a(62856),w=()=>a(463830),_=()=>a(436529),C=()=>a(991249),M=()=>a(643908),T=()=>a(204330),k=()=>a(908375),I=()=>a(760217),D=()=>a(805751),N=()=>a(623580),P=()=>a(404277),E=()=>a(939740),B=()=>a(89924),R=()=>a(755535),V=()=>a(581369),L=()=>a(890434),F=()=>a(125565),O=()=>a(21140),z=()=>a(327165),U=()=>a(103448),W=a(474848);const H=["pdf","html","markdown"],K=["currentView","all"],q=1;function G(e){return e>.1&&e<2}const Y=["everything","no_files"],Q=(0,v().YK)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"},tooltipTitle:{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"},tooltipCaption:{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"}});function $({value:e,onChange:t}){const a=(0,v().tz)(),s=n.useCallback((e=>{const n=e.target.value,s=(0,m().sA)(n)||(0,A().q)(n,a);let i;"object"==typeof s?i="percent"===s.format?s.value:s.value/100:"number"==typeof s&&(i=s/100),void 0!==i&&t(i)}),[t,a]),[i,o]=n.useState(!1),r=n.useMemo((()=>(0,m().ZV)(Math.round(100*e),"number",a)),[e,a]);return(0,W.jsx)(D().A,{debugName:"ExportModal",capture:i,children:(0,W.jsx)(N().A,{value:r,onChange:s,onFocus:()=>o(!0),onBlur:()=>o(!1),style:{width:60},inputStyle:{textAlign:"end"}})})}const J=function(){const e=(0,v().tz)(),t=(0,o().uB)(void 0,w().A),s=(0,o().uB)(void 0,w().A),i=(0,o().uB)(void 0,w().A),r=(0,o().uB)(void 0,w().A),l=(0,n.useCallback)((()=>(0,W.jsx)(xe,{includeContentsPopupStore:r,exportTypePopupStore:i,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:t})),[r,i,s,t]),d=(0,o().K8)((()=>_().Ay.state.open),[]);return(0,W.jsx)(a(641514).A,{ariaLabel:e.formatMessage(Q.dialogLabel),onDismiss:oe,render:l,isOpen:d})};function Z(e){switch(e){case"pdf":return(0,W.jsx)(v().sA,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,W.jsx)(v().sA,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,W.jsx)(v().sA,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function X(e){switch(e){case"everything":return(0,W.jsx)(v().sA,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,W.jsx)(v().sA,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function ee(e){switch(e){case"all":return(0,W.jsx)(v().sA,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,W.jsx)(v().sA,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function te(e){switch(e){case"Letter":return(0,W.jsx)(v().sA,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,W.jsx)(v().sA,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,W.jsx)(v().sA,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,W.jsx)(v().sA,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,W.jsx)(v().sA,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function ae(){const e=_().Ay.state;return e.open&&(0,_().xt)(e)?void 0===e.exportOptions.scale?q:e.exportOptions.scale:q}function ne(){return G(ae())}function se(e){return{width:320,padding:24,fontSize:14,color:e.text.secondary}}function ie(){const e=(0,r().DP)();return(0,W.jsx)("div",{style:se(e),children:(0,W.jsx)(v().sA,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function oe(){x()._3()}function re(e){const t=_().Ay.state;if(t.open){if((0,_().xt)(t)&&!x().Dd(e))return void C().K(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"}});x().z_(e,{...t,recursive:!t.recursive})}}function le(e){if(!ne())return;const t=_().Ay.state;t.open&&(x()._3(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===f().NX?x().P_(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):x().UP(e,{block:{id:t.root.id,spaceId:(0,h().e)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function de(e,t,a,n,s=!1){const i=_().Ay.state,o=i.open&&"pdf"===e&&"space"===i.root.table&&!x().Dd(n)&&"business",r=o?{type:"product",product:o,limit:{type:"none"},trialability:"none"}:void 0;return{key:e,action:()=>{t.close(),r?C().K(n,{from:"export_modal",upsell:r}):function(e,t,a){const n=_().Ay.state;if(!n.open)return;const{exportOptions:s}=n;if(e===s.exportType)return;let i;i="pdf"===e?{...s,exportType:"pdf",pdfFormat:x().id(t)}:{...s,exportType:e},x().z_(a,{...n,exportOptions:i})}(e,a,n)},render:t=>{const{onClick:a,key:n,...i}=t;return s?r?(0,W.jsx)(ce,{...t,upsell:r,exportType:e}):(0,W.jsx)(I().A,{...i,title:Z(e),onClick:a}):(0,W.jsx)(M().A,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:a,render:(t,a)=>(0,W.jsx)(I().A,{...(0,S().A)(i,t),title:Z(e),right:a}),renderUpgradeTooltip:()=>{const e=(0,v().tz)();return(0,W.jsx)(U().A,{imageURL:p().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:e.formatMessage(Q.tooltipTitle),caption:e.formatMessage(Q.tooltipCaption)})},tooltipPlacement:"left",upgradeButtonDesktopStyle:{marginTop:2}},n)}}}function ce({onClick:e,key:t,upsell:a,exportType:s,...i}){const o=n.useRef(null),r=(0,v().tz)();return(0,W.jsx)(k().c,{upsell:a,showTooltip:!0,source:"export_modal",tooltipProps:{placement:"left",content:(0,W.jsx)(U().A,{imageURL:p().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:r.formatMessage(Q.tooltipTitle),caption:r.formatMessage(Q.tooltipCaption)})},children:()=>(0,W.jsx)("div",{ref:o,children:(0,W.jsx)(I().A,{...i,title:Z(s),right:(0,W.jsx)(T().R,{display:"icon",upsell:a,source:"export_modal",showPlanName:!0,iconAlignment:"right",hoverRef:o}),onClick:e})})},t)}function ue(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=_().Ay.state;a.open&&x().z_(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,W.jsx)(I().A,{...t,title:X(e)})}}function pe(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=_().Ay.state;a.open&&x().z_(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,W.jsx)(I().A,{...t,title:ee(e)})}}function ge(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=_().Ay.state;a.open&&(0,_().xt)(a)&&x().z_(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,W.jsx)(I().A,{...t,title:te(e)})}}function me(){const e=(0,r().DP)(),t=(0,i().v3)(),a=(0,o().K8)((()=>ae()),[]),n=(0,j().A)(!0,500,100);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,W.jsx)(F().A,{style:{color:e.text.tertiary},children:(0,W.jsx)(v().sA,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,W.jsx)($,{value:a,onChange:e=>function(e,t){const a=_().Ay.state;a.open&&(0,_().xt)(a)&&x().z_(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(e,t)})]}),!G(a)&&n?(0,W.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,W.jsx)(F().A,{isSmall:!0,isMultiline:!0,style:{color:e.errorText},children:(0,W.jsx)(v().sA,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})}):void 0]})}function he({modalState:e,includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:l}){const u=(0,r().DP)(),m=(0,i().v3)(),h=(0,o().uB)(l,w().A),f=(0,o().uB)(n,w().A),y=(0,o().uB)(a,w().A),b=(0,o().uB)(t,w().A),{device:S,currentUser:A}=m,j=(0,o().K8)((()=>(0,_().xt)(e)&&!x().Dd(m)&&"business"),[e,m]),C=m.device.isWindows,T=(0,o().K8)((()=>ne()),[]),k=(0,o().K8)((()=>ee(e.exportOptions.collectionViewExportType||"currentView")),[e]),I=(0,s().X)("upgrade_system_page");return(0,W.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,W.jsx)(R().A,{isMenuItem:S.isMobile,buttonPopupStore:y,label:(0,W.jsx)(v().sA,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:Z(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,W.jsx)(B().A,{...e}),items:H.map((t=>de(t,e,A.id,m,I)))}]}),e.exportOptions.collectionViewExportType?(0,W.jsx)(R().A,{isMenuItem:S.isMobile,buttonPopupStore:h,label:(0,W.jsx)(v().sA,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:k,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,W.jsx)(B().A,{...e}),items:K.map((t=>pe(t,e,m)))}]}):void 0,(0,W.jsx)(R().A,{isMenuItem:S.isMobile,buttonPopupStore:b,label:(0,W.jsx)(v().sA,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:X(e.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,W.jsx)(B().A,{...e}),items:Y.map((t=>ue(t,e,m)))}]}),(0,_().xt)(e)?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(R().A,{isMenuItem:S.isMobile,buttonPopupStore:f,label:(0,W.jsx)(v().sA,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:te(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,W.jsx)(B().A,{...e}),items:g().yC.map((t=>ge(t,e,m)))},{key:"otherPaperFormats",render:e=>(0,W.jsx)(B().A,{topBorder:!0,...e}),items:g().hj.map((t=>ge(t,e,m)))}]}),(0,W.jsx)(me,{})]}):void 0,"space"!==e.root.table?I?(0,W.jsx)(fe,{upsellTier:j,modalState:e}):(0,W.jsx)(M().A,{requireUpgradeToTier:j,analyticsName:"export_modal",onClick:()=>re(m),render:(t,a)=>(0,W.jsxs)("div",{...t,style:{display:"flex",alignItems:"center",height:32},children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",marginInlineEnd:"auto",color:u.text.tertiary,fontSize:14},children:[(0,W.jsx)(v().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"}),a?(0,W.jsx)("div",{style:{marginInlineStart:8},children:a}):void 0]}),(0,W.jsx)(V().A,{on:e.recursive,disabled:Boolean(j)})]}),renderUpgradeTooltip:()=>(0,W.jsx)(U().A,{imageURL:p().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,W.jsx)(v().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,W.jsx)(v().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:"left",upgradeButtonDesktopStyle:{marginTop:2}}):void 0,(0,W.jsx)(L().A,{title:(0,W.jsx)(v().sA,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginInlineEnd:"auto",height:32},on:void 0===e.exportOptions.flattenExportFiletree?!C:!e.exportOptions.flattenExportFiletree,disabled:!e.recursive,onChange:()=>function(e){const t=_().Ay.state;t.open&&x().z_(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(m)}),"html"===e.exportOptions.exportType?(0,W.jsx)(L().A,{title:(0,W.jsx)(v().sA,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginInlineEnd:"auto",height:32},on:e.shouldExportComments,onChange:()=>function(e){const t=_().Ay.state;t.open&&x().z_(e,{...t,shouldExportComments:!t.shouldExportComments})}(m)}):null,(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,W.jsx)(d().p,{colorPalette:"gray",style:{marginInlineStart:"auto",marginInlineEnd:8},onClick:oe,children:(0,W.jsx)(v().sA,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,W.jsx)(c().A,{colorPalette:"blue",onClick:()=>le(m),disabled:!T,children:(0,W.jsx)(v().sA,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function fe(e){const{upsellTier:t,modalState:a}=e,s=(0,i().v3)(),o=t?{type:"product",product:t,limit:{type:"none"},trialability:"none"}:void 0,r=n.useRef(null);return(0,W.jsxs)(O().Ye,{alignItems:"center",justifyContent:"space-between",style:{height:32},children:[(0,W.jsx)(u().D,{colorVariant:"tertiary",styleKey:"Body",children:(0,W.jsx)(v().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})}),o?(0,W.jsx)(k().c,{upsell:o,source:"export_modal",showTooltip:!0,tooltipProps:{placement:"right",showTitle:!1,showIcon:!1,maxWidth:260,content:(0,W.jsx)(U().A,{imageURL:p().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,W.jsx)(v().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,W.jsx)(v().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})})},children:()=>(0,W.jsx)("div",{ref:r,children:(0,W.jsx)(T().R,{upsell:o,source:"export_modal",display:"icon",showPlanName:!0,iconAlignment:"right",hoverRef:r})})}):(0,W.jsx)(V().A,{on:a.recursive,disabled:!1,onClick:()=>re(s)})]})}function ve(e,t,a,n,s){const{currentUser:i,device:o}=t;return y().oE([{key:"export type",render:({ref:n,...r})=>(0,W.jsx)(R().A,{...r,isMenuItem:o.isMobile,buttonPopupStore:a,label:(0,W.jsx)(v().sA,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:Z(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,W.jsx)(B().A,{...e}),items:H.map((a=>de(a,e,i.id,t,s)))}]}),action:()=>{a.setState({open:!0})}},(0,_().xt)(e)&&{key:"pdf format",render:({ref:a,...s})=>(0,W.jsx)(R().A,{...s,isMenuItem:o.isMobile,buttonPopupStore:n,label:(0,W.jsx)(v().sA,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:te(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,W.jsx)(B().A,{...e}),items:g().yC.map((a=>ge(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,W.jsx)(B().A,{topBorder:!0,...e}),items:g().hj.map((a=>ge(a,e,t)))}]}),action:()=>{n.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:({onClick:a,key:n,...s})=>{const i=(0,_().xt)(e)&&!x().Dd(t)&&"business";return(0,W.jsx)(M().A,{requireUpgradeToTier:i,analyticsName:"export_modal",onClick:a,render:(t,a)=>{const n=(0,S().A)(s,t);return(0,W.jsx)(I().A,{...n,title:(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,W.jsx)(v().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a?(0,W.jsx)("div",{style:{marginInlineStart:8},children:a}):void 0]}),right:(0,W.jsx)(V().A,{...n,on:e.recursive,disabled:Boolean(i)})})},renderUpgradeTooltip:()=>(0,W.jsx)(U().A,{imageURL:p().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,W.jsx)(v().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,W.jsx)(v().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:"left",upgradeButtonDesktopStyle:{marginTop:2}},n)},action:()=>re(t)}])}function ye({modalState:e,exportTypePopupStore:t,pdfFormatPopupStore:a}){const n=(0,i().v3)(),o=(0,s().X)("upgrade_system_page"),r={menuType:b().gu.Modal,title:(0,W.jsx)(v().sA,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,W.jsx)(v().sA,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:oe};return(0,W.jsx)(P().A,{...r,children:(0,W.jsx)(E().Ay,{type:E().Oh.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,W.jsx)(B().A,{...e}),items:ve(e,n,t,a,o)},{key:"actions",render:({children:e,...t})=>(0,W.jsx)(B().A,{...t,children:e}),items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,W.jsx)(z().A,{...a,onClick:t||(()=>le(n)),disabled:!ne(),title:(0,W.jsx)(v().sA,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>le(n)}]}]})})}function xe({includeContentsPopupStore:e,exportTypePopupStore:t,pdfFormatPopupStore:a,collectionViewExportTypePopupStore:n}){const s=(0,i().v3)(),{device:r}=s,d=(0,o().O$)(l().e),c=(0,o().O$)(_().Ay);return d?c.open?r.isMobile?(0,W.jsx)(ye,{exportTypePopupStore:t,pdfFormatPopupStore:a,modalState:c}):(0,W.jsx)(he,{includeContentsPopupStore:e,exportTypePopupStore:t,pdfFormatPopupStore:a,collectionViewExportTypePopupStore:n,modalState:c}):null:(0,W.jsx)(ie,{})}},743556:(e,t,a)=>{a.d(t,{T:()=>s,n:()=>i});a(581454);var n=()=>a(803418);let s=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationSpaceScimBot="organization-space-scim-bot",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.OrganizationIPRestriction="organization-ip-restriction",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AIAnalyticsUsersRow="ai-analytics-users",e.AIAnalyticsTopPagesRow="ai-analytics-top-pages",e.AnalyticsMemberViewsRow="analytics-member-view",e.AnalyticsPageViewsRow="analytics-page-views",e.SingleLegalHoldExport="single-legal-hold-export",e.OrganizationEKMRequests="organization-ekm-requests",e}({});function i(e){return new Array(e??n().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:s.Loading})))}},745638:(e,t,a)=>{a.d(t,{H:()=>i});var n=()=>a(314529),s=()=>a(242422);function i(e){(0,n().DO_NOT_USE_trackLegacy)(e,"delete_workspace_click"),s().default.logEvent("delete_workspace_click")}},747671:(e,t,a)=>{a.d(t,{Q:()=>n,a:()=>s});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class s extends(()=>a(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},759358:(e,t,a)=>{a.d(t,{N:()=>_});var n=a(296540),s=()=>a(726637),i=()=>a(484714),o=()=>a(401497),r=()=>a(15936),l=()=>a(564766),d=()=>a(69708),c=()=>a(884107),u=()=>a(232930),p=()=>a(347063),g=()=>a(107683),m=()=>a(719147),h=()=>a(2609),f=(a(581454),()=>a(631524)),v=()=>a(493552),y=()=>a(406533),x=()=>a(859428),b=()=>a(484595),S=a(474848);function A(e){const t=(0,o().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},textBelowInput:{marginTop:6},helpIcon:{fill:e.icon.tertiary,marginInlineStart:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center",gap:8},radioOption:{display:"flex",alignItems:"center"}})),[]);return(0,S.jsxs)("div",{style:t.container,children:[(0,S.jsxs)("div",{style:t.labelContainer,children:[(0,S.jsx)(v().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:e.labelMessage}),e.helpMessage?(0,S.jsx)(x().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,S.jsx)("span",{...e,children:(0,y().questionMarkCircleIcon)(t.helpIcon)})}):void 0]}),(0,S.jsx)("div",{style:t.inputContainer,children:e.items.map((a=>(0,S.jsxs)(f().p,{style:t.radioOption,onClick:a.onClick,children:[(0,S.jsx)(b().A,{isSelected:e.selectedItem===a.value}),(0,S.jsx)(v().D,{styleKey:"Body/Regular",colorVariant:"primary",children:a.label})]},a.id)))}),e.secondaryMessage?(0,S.jsx)(v().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:t.textBelowInput,children:e.secondaryMessage}):null]})}var j=()=>a(701787),w=function(e){return e.MetadataUrl="metadataUrl",e.MetadataXml="metadataXml",e}(w||{});function _({saveButtonText:e,samlConfig:t,loading:a,onSave:f,onDismiss:v,headerByline:y}){const x=(0,i().v3)(),b=(0,d().tz)(),[_,M]=(0,n.useState)(null!=t&&t.idpMetadata?w.MetadataXml:w.MetadataUrl),[T,k]=(0,n.useState)(null==t?void 0:t.idpMetadataUrl),[I,D]=(0,n.useState)(null==t?void 0:t.idpMetadata),[N,P]=(0,n.useState)(void 0),[E,B]=(0,n.useState)(void 0),R=(0,o().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{paddingInline:32},container:{width:h().J2,display:"flex",flexDirection:"column",gap:h().gA,overflowY:"auto"}})),[]),V=t?(0,l().zW)(null==t?void 0:t.id,s().A.domainBaseUrl):null,L=(0,l().Hw)(s().A.domainBaseUrl),F=(0,n.useCallback)((async e=>{if(!e)return;const t=await c().R.clipboardActions.load();t.copyString({environment:x,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard})}),[x]),O=[{id:"metadataUrl",value:w.MetadataUrl,label:"URL",onClick:()=>M(w.MetadataUrl)},{id:"metadataXml",value:w.MetadataXml,label:"Metadata XML",onClick:()=>M(w.MetadataXml)}];async function z(){switch(_){case w.MetadataUrl:return void("valid"===(0,l().vU)(T??"").type?await f({metadataUrl:T}):P((0,l().vU)(T??"")));case w.MetadataXml:"valid"===(0,l().$W)(I??"").type?await f({metadataXml:I}):B((0,l().$W)(I??""))}}return(0,S.jsx)(g().s,{isOpen:!0,onDismiss:v,areaConstraint:{width:{type:"fixed",length:h().NF}},render:({sizeRange:t})=>(0,S.jsx)(p().tf,{sizeRange:t,header:(0,S.jsx)(h().rQ,{icon:(0,r().checkmarkShieldIcon)(R.icon),title:(0,S.jsx)(d().sA,{id:"organization.general.saml.settings.configure.modal.title",defaultMessage:"Set up SAML SSO"}),byline:(0,S.jsx)("div",{style:R.byline,children:y||(0,S.jsx)(d().sA,{id:"organization.general.saml.settings.configure.modal.byline",defaultMessage:"Allow organization members to log into Notion through your identity provider (IDP). <guidelink>Learn more</guidelink>",values:{guidelink:e=>(0,S.jsx)(m().A,{hoverColor:"blue",href:(0,u().x)("guides.samlSettings"),external:!0,children:e})}})})}),footer:(0,S.jsx)(h().jl,{primaryText:e??(0,S.jsx)(d().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction",defaultMessage:"Save"}),primaryAction:z,primaryDisabled:a,secondaryText:(0,S.jsx)(d().sA,{id:"organization.general.saml.settings.configure.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:v}),children:(0,S.jsxs)("div",{style:R.container,children:[V?(0,S.jsx)(j().p,{disabled:!0,onCopyClick:()=>F(V),value:V,placeholder:"https://notion.so/sso/saml/...",labelMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.label",defaultMessage:"Assertion Consumer Service (ACS) URL"}),secondaryMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.secondary",defaultMessage:"Add this URL to your IDP’s SAML SSO configuration"})}):null,L?(0,S.jsx)(j().p,{disabled:!0,onCopyClick:()=>F(L),value:L,placeholder:"https://notion.so/sso/saml/",labelMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.entityIdInput.label",defaultMessage:"SAML SSO Entity ID"})}):null,(0,S.jsx)(A,{items:O,selectedItem:_,labelMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.label",defaultMessage:"Setup method"})}),_===w.MetadataUrl?(0,S.jsx)(j().p,{value:T,onChange:e=>k(e.target.value),onBlur:()=>P((0,l().vU)(T??"")),placeholder:"https://...",labelMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.label",defaultMessage:"URL"}),secondaryMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.secondary",defaultMessage:"Paste the URL from your IDP"}),errorMessage:N?C(N,b):void 0}):_===w.MetadataXml?(0,S.jsx)(j().p,{multiline:!0,value:I,onChange:e=>D(e.target.value),onBlur:()=>B((0,l().$W)(I??"")),placeholder:'<md:EntityDescriptor entityID="...',labelMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.label",defaultMessage:"Metadata XML"}),secondaryMessage:b.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.secondary",defaultMessage:"Paste the XML from your IDP"}),errorMessage:E?C(E,b):void 0}):null]})})})}function C(e,t){if("valid"!==e.type)switch(e.reason){case"empty":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.empty",defaultMessage:"You cannot leave this field empty"});case"signed_request":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.signedRequest",defaultMessage:"Requests cannot be signed"})}}},773290:(e,t,a)=>{a.d(t,{T:()=>d});a(898992),a(354520),a(581454),a(296540);var n=()=>a(56366),s=()=>a(798880),i=()=>a(534177),o=()=>a(870092),r=()=>a(317131),l=a(474848);function d({store:e,actorPointers:t,isClickable:a}){const d=(0,n().K8)((()=>t.map((t=>t.table!==s().oo?void 0:o().L.createChildStore(e,t))).filter(i().O9)),[e,t]);return(0,l.jsx)(r().l,{userStores:d,isClickable:a})}},775812:(e,t,a)=>{a.d(t,{A:()=>r});a(296540);var n=()=>a(30537),s=()=>a(496603),i=()=>a(383594),o=a(474848);const r=function(){const{isMobile:e,isTablet:t}=(0,a(484714).Y0)(),i=(0,a(56366).O$)(a(969141).A),r=(0,a(59226).X)("mobile_icon_picker_bottom_sheet");return(0,o.jsx)(a(417392).Ay,{popupType:e?r?n().n.BottomSheet:n().n.SlideUp:n().n.Popup,bottomSheetInitialState:t?"full":"half",open:i.isActive,originRect:i.isActive?i.originRect:void 0,originGap:i.isActive?i.originGap:void 0,placementToOrigin:"bottom",alignmentToOrigin:"center",preventScaleTransition:!0,onDismiss:l,render:()=>{if(i.isActive)return(0,o.jsx)(a(998531).N,{debugName:"MediaMenu",capture:!0,onUp:s().D_,onDown:s().D_,children:(0,o.jsx)(a(682022).Ay,{...i,onCancel:l})})},trapFocus:!0})};function l(){i().I()}},803418:(e,t,a)=>{a.d(t,{O:()=>s,q:()=>n});const n=20,s=25},807106:(e,t,a)=>{a.d(t,{C:()=>m,_:()=>g});var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(187174),r=()=>a(436604),l=()=>a(534177),d=()=>a(559506),c=()=>a(646736),u=()=>a(511303);const p={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function g({spaceStore:e,userId:t,isOrganizationOwner:a}){const[s,i]=(0,n.useState)("last_90_days");return{...m({spaceStore:e,userId:t,isOrganizationOwner:a,daysFilter:s}),daysFilter:s,setDaysFilter:i}}function m({spaceStore:e,userId:t,isOrganizationOwner:a,daysFilter:g}){const m=(0,s().v3)(),{updateCacheWithRecordMap:h}=(0,n.useContext)(u().N),f=(0,i().K8)((()=>e.id),[e]),v=(0,i().K8)((()=>Boolean(e&&t&&(0,c().dp)(e,t).isWorkspaceOwner())),[e,t]),[{status:y,value:x,error:b}]=(0,o().Yb)((async()=>{if(!t||!(a||v))return p;const e=await d().callApi({eventName:"getUserEngagementAnalytics",environment:m,data:{spaceId:f,daysFilter:g},headers:{[r().B3]:f}});switch(e.type){case"success":return h(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,l().HB)(e)}}),[m,t,f,g,v,a,h]);return{data:(0,n.useMemo)((()=>x||p),[x]),loading:"pending"===y||"idle"===y,error:b}}},809730:(e,t,a)=>{a.d(t,{e:()=>r});var n=()=>a(534177),s=()=>a(597777);var i=()=>a(807778),o=()=>a(10984);function r({billingData:e}){var t;return function({subscriptionTier:e,subscriptionCreatedAtTime:t,useLegacyBehavior:a}){return"enterprise"===e||!("plus"!==e||!a)&&(0,n().O9)(t)&&t<s().fQ}({subscriptionTier:(0,o().AI)(),subscriptionCreatedAtTime:null==e||null===(t=e.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,i().hG)()})}},812941:(e,t,a)=>{a.d(t,{A:()=>p});a(296540);var n=()=>a(401497),s=()=>a(69708),i=()=>a(534177),o=()=>a(690197),r=()=>a(232930),l=()=>a(265665),d=a(474848);function c(e){switch(e){case"bestPractices":return(0,r().x)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,r().x)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,r().x)("guides.teamspacesSettingsAndPermissions");default:return(0,i().HB)(e)}}function u(e){return e||(0,d.jsx)(l().j,{children:(0,d.jsx)(s().sA,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function p({onClick:e,message:t,helpCenterLocation:a,analyticsFrom:s,containerStyle:i}){const r=(0,n().IS)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:i,children:(0,d.jsx)(o().A,{buttonStyle:r.button,title:u(t),analyticsFrom:s,href:c(a),onClick:e})})}},817045:(e,t,a)=>{a.d(t,{S:()=>c});var n=a(296540),s=()=>a(835470),i=()=>a(69708),o=()=>a(2609),r=()=>a(347063),l=()=>a(107683),d=a(474848);function c({onCancel:e,onSubmit:t,headerText:a,bylineText:c,submitText:u}){const[p,g]=(0,n.useState)(!1);return(0,d.jsx)(l().s,{isOpen:!0,onDismiss:e,areaConstraint:{width:{type:"min",length:o().NF}},render:()=>(0,d.jsx)(r().tf,{header:(0,d.jsx)(r().YA,{iconAndTitle:(0,d.jsx)(r().ZQ,{iconGroup:s().F,iconColorPalette:"red",iconColorVariant:"accentPrimary",title:a}),description:c}),footer:(0,d.jsx)(r().aO,{primaryButtons:[{buttonType:"destructive",label:u,onClick:async()=>{g(!0),await t(),g(!1)},isDisabled:p}],secondaryButtons:[{buttonType:"dismiss",label:(0,d.jsx)(i().sA,{id:"destructiveActionModal.button.cancel",defaultMessage:"Cancel"})}],layout:"vertical"})})})}},826658:(e,t,a)=>{a.d(t,{K:()=>l});a(296540);var n=()=>a(401497),s=()=>a(820579),i=()=>a(69708),o=()=>a(285790),r=a(474848);function l(e){const t=(0,i().tz)(),a=(0,n().IS)((e=>({icon:{width:21,height:void 0,fill:e.text.secondary},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.icon.secondary,lineHeight:1,borderRadius:4}})),[]);return(0,r.jsx)(o().A,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:s().arrowLineDownIcon,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}},829351:(e,t,a)=>{a.d(t,{V:()=>c});a(296540);var n=()=>a(662303),s=()=>a(401497),i=()=>a(869190),o=()=>a(69708),r=()=>a(859428),l=()=>a(125565),d=a(474848);function c(e){const{auditLogEntry:t,id:a}=e,c=(0,s().IS)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,d.jsx)(r().A,{renderTooltip:()=>(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,d.jsx)("div",{children:(0,d.jsx)(o().sA,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i().qV)(t.serverTimestamp)}})})}),render:e=>(0,d.jsx)("div",{id:a,style:c.container,children:(0,d.jsx)(l().A,{isSecondaryColor:!0,...e,children:(0,i().W_)(t.serverTimestamp,"medium_with_time",n().locale)})}),placement:"bottom"})}},835470:(e,t,a)=>{a.d(t,{F:()=>n});const n=(0,a(340498).xh)("exclamationMarkCircle",{default:{loader:()=>a.e(64087).then(a.bind(a,129852))},small:{loader:()=>a.e(64087).then(a.bind(a,621594))},fill:{loader:()=>a.e(64087).then(a.bind(a,428390))},fillSmall:{loader:()=>a.e(64087).then(a.bind(a,297173))}},["exclamation","circle","alert","warning","attention"])},837503:(e,t,a)=>{a.d(t,{Q:()=>l});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var n=a(296540),s=()=>a(69708),i=()=>a(497799),o=()=>a(223544),r=a(474848);function l({spaceStore:e,createdByFilterIds:t,setCreatedByFilter:a,runNewSearch:l,includeGuests:d}){const c=(0,i().H)({spaceStore:e}),u=(0,n.useMemo)((()=>c.loading?[]:d?[...c.members,...c.guests]:c.members),[c,d]),p=(0,n.useMemo)((()=>c.loading?new Set:new Set(c.guests.map((e=>e.id)))),[c]);const g=(0,n.useMemo)((()=>t.map((e=>({id:e,type:"user"})))),[t]);return(0,r.jsx)(o().Jo,{userStores:u,title:(0,r.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:g,setSelectedItems:function(e){const t=e.map((({id:e})=>e));a(t)},onMenuClose:l||(()=>{}),isMultiSelect:!0,guestUserIdSet:p,includeGuests:d})}},857002:(e,t,a)=>{a.d(t,{YF:()=>l,_E:()=>g,pi:()=>u,rn:()=>d,t3:()=>c});a(581454);var n=()=>a(59226),s=()=>a(301608),i=()=>a(406944),o=()=>a(620586);const r=(0,a(69708).YK)({agent:{id:"aiAnalyticsActionsChart.action.aiType.agent",defaultMessage:"Agent"},connectors:{id:"aiAnalyticsActionsChart.action.aiType.connectors",defaultMessage:"Connectors"},meeting_notes:{id:"aiAnalyticsActionsChart.action.aiType.meetingNotes",defaultMessage:"Meeting notes"},all:{id:"aiAnalyticsActionsChart.action.aiType.all",defaultMessage:"All"}});function l(e){return r[e]}function d(e){const t=s().LP.indexOf(e),a=i().O.colorful,n=a.length;return{color:a[t%n],fillColor:(0,o().tm)(a[t%n],!1)}}function c(){return(0,n().X)("ai_analytics_space")}function u({intl:e,productFilter:t,isGroupingByProduct:a}){return(a&&t===s().zh?s().B3:[t]).map((t=>({name:e.formatMessage(l(t)),type:"area",data:[],...d(t)})))}const p={yAxisMin:0,yAxisMax:4};function g({dateRange:e}){const{xAxisMin:t,xAxisMax:a}=function({dateRange:e}){const t=(0,s().mW)(e);return 0===t.length?{}:{xAxisMin:new Date(t[0]).getTime(),xAxisMax:new Date(t[t.length-1]).getTime()}}({dateRange:e}),{yAxisMin:n,yAxisMax:i}=p;return{xAxisMin:t,xAxisMax:a,yAxisMin:n,yAxisMax:i}}},873066:(e,t,a)=>{a.d(t,{A:()=>de});var n=a(296540),s=()=>a(484714),i=()=>a(56366),o=()=>a(401497),r=()=>a(252291),l=()=>a(998531),d=()=>a(30537),c=()=>a(631524),u=()=>a(160432),p=()=>a(42583),g=()=>a(381553),m=()=>a(69708),h=()=>a(534177),f=()=>a(30731),v=()=>a(56394),y=()=>a(780865),x=()=>a(117586),b=()=>a(141025),S=()=>a(35394),A=()=>a(760217),j=()=>a(417392),w=()=>a(89924),_=()=>a(604995),C=()=>a(416504),M=()=>a(972435),T=()=>a(722872),k=()=>a(513488),I=()=>a(45552),D=()=>a(574036),N=()=>a(539320),P=()=>a(498140),E=()=>a(609989),B=()=>a(623580),R=a(474848);const V=(0,m().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const L=function(e){const t=(0,m().tz)(),s=(0,i().uB)(void 0,E().A),{value:o,customErrorMessage:r}=e;(0,n.useEffect)((()=>{s.reset()}),[o,s]);const l=(0,n.useCallback)((()=>(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:s})),[e,s]),d=(0,i().K8)((()=>O(t,s,r)),[t,s,r]);return d?(0,R.jsx)(a(859428).A,{renderTooltip:()=>d,forceVisibleState:!0,placement:"left",render:l,originGap:-8}):(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:s})};function F(e,t){const{device:a}=e;return!!a.isMobile||!t}function O(e,t,a){if(!t.state.error)return;const n=a&&a(t.state.error);if(n)return n;switch(t.state.error){case E().$.INVALID_DATE:return e.formatMessage(V.invalidDateError);case E().$.INVALID_RANGE:return e.formatMessage(V.invalidDateRangeError);case E().$.NOT_SUPPORTED:return e.formatMessage(V.notSupportedDateRangeError);default:(0,h().HB)(t.state.error)}}function z(e,t,a,n,s,i){const o=function(e,t,a,n,s){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const i=(0,P().J8)(a.state.temporaryValue.date||"",t);if(i){let t="";return t=n?(null==e?void 0:e.start_time)||"00:00":s?"23:59":"00:00",{value:{type:"datetime",start_date:i,time_zone:(null==e?void 0:e.time_zone)||(0,C().P)(),start_time:t}}}const o=(0,P().KZ)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||i)&&o?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||i,start_time:o,time_zone:(null==e?void 0:e.time_zone)||(0,C().P)()}}:{error:E().$.INVALID_DATE}}(e,t,a,s,i);if(o)return n?n(o):o}function U(e){const{theme:t,disabled:a,focus:n,intl:s,store:i,customErrorMessage:o}=e,r=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.inputBlueFocusRing},inputError:{boxShadow:e.inputRedFocusRing},placeholder:{color:e.text.tertiary}}}(t),l=O(s,i,o);if(!a)return l?r.inputError:n?r.inputFocused:r.inputDefault}function W(e,t,a,n,s,i,o,r,l,d,c){const{device:u}=e,p=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:6,height:28,paddingInlineEnd:F(e,t)?6:0,position:"relative"},inputEditRegion:{width:F(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...p.menuItem,...s},inputOuterStyle:{...p.inputWrapper,...n,...U({theme:t,disabled:i,focus:o,intl:r,store:l,customErrorMessage:c})},inputStyle:{...p.inputEditRegion,...u.isMobile&&p.inputEditRegionMobile,...a}}}function H(e,t,a,n,s,i,o,r,l,d){let c;(!r||"date"===t&&null!=s&&s.start_time||"time"===t&&null!=s&&s.start_date)&&(c=z(s,i,o,l,r,d),c&&(a(c),c.error?o.setState({...o.state,dateEdited:!1,error:c.error}):o.reset())),n&&n(e,c)}function K(e,t,a,n,s,i,o,r,l){const d=z(t,a,n,i,o,r);d?(e(d),d.error?n.setState({...n.state,dateEdited:!1,timeEdited:!1,error:d.error}):n.reset()):n.setState({...n.state,dateEdited:!1,timeEdited:!1}),l&&s&&s(l)}function q({dateTimeInputMenuItemProps:e,store:t}){const{store:a,hideClearButton:r,focus:l,showTime:d,placeholder:c,customErrorMessage:u,...p}=e,{onBlur:g,onClear:h,onDateFocus:v,onSubmit:y,onTimeFocus:x,onUpdate:b,isEndingDate:S,inputStyle:A,inputOuterStyle:j,style:w,disabled:_,validate:C,value:T}=e,k=(0,m().tz)(),I=(0,o().DP)(),D=(0,s().v3)(),N=(0,n.useCallback)((e=>function(e,t,a,n,s,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&K(a,n,s,i,o,r,l,d)}(e,D,b,T,k,t,g,C,d,S)),[D,b,T,k,t,g,C,d,S]),P=(0,n.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,t,x)),[t,x]),E=(0,n.useCallback)((()=>function(e,t,a,n,s,i,o,r){n.setState({...n.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=z(t,a,n,i,o,r);l&&e(l),n.setState({...n.state,dateEdited:!1,timeEdited:!1}),s&&s()}(b,T,k,t,h,C,d,S)),[b,T,k,t,h,C,d,S]),V=(0,n.useCallback)((e=>K(b,T,k,t,g,C,d,S)),[b,T,k,t,g,C,d,S]),L=(0,n.useCallback)((e=>function(e,t,a,n,s,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&K(a,n,s,i,o,r,l,d)}(e,D,b,T,k,t,g,C,d,S)),[D,b,T,k,t,g,C,d,S]),O=(0,n.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,t,v)),[t,v]),{device:U}=D,q=U.isMobile?"date":"text",Y=U.isMobile?"time":"text",Q=B().C.Transparent,$=U.isMobile?void 0:l,J=(0,i().K8)((()=>W(D,I,A,j,w,_,$,k,t,r,u).inputOuterStyle),[D,I,A,j,w,_,$,k,t,r,u]),Z={display:"flex",alignItems:"center",lineHeight:2,background:I.inputBackground,paddingLeft:8,flexBasis:"50%",...J},X=(0,i().K8)((()=>function(e,t,a,n){const{device:s}=e;return s.isMobile?t?f().Tq(t,a):"":n.state.temporaryValue.date?n.state.temporaryValue.date:n.state.dateEdited?n.state.temporaryValue.date||"":t?f().Tq(t,a):""}(D,T,k,t)),[D,T,k,t]),ee=(0,i().K8)((()=>function(e,t,a,n){const{device:s}=e;return s.isMobile?t?f().Em(t,a):"":n.state.temporaryValue.time?n.state.temporaryValue.time:n.state.timeEdited?n.state.temporaryValue.time||"":t?f().Em(t,a):""}(D,T,k,t)),[D,T,k,t]);return(0,R.jsxs)("div",{style:Z,children:[(0,R.jsx)(B().A,{...p,type:q,format:Q,placeholder:c,focus:"date"===$,onFocus:O,onChange:L,onSubmit:e=>H(e,"date",b,y,T,k,t,d,C,S),onBlur:V,value:X,size:1,style:{fontSize:U.isMobile?16:14},showClearButton:!d&&F(D,r),onClearButtonClick:E}),d?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{height:14,width:1,background:I.regularDividerColor,marginInlineStart:6,marginInlineEnd:12,flexShrink:0}}),(0,R.jsx)(B().A,{...p,placeholder:M().A.formatMessage(G.timePlaceholder),type:Y,format:Q,focus:"time"===$,onFocus:P,onChange:N,onSubmit:e=>H(e,"time",b,y,T,k,t,d,C,S),onBlur:V,value:ee,size:1,style:{fontSize:U.isMobile?16:14},showClearButton:F(D,r),onClearButtonClick:E})]}):void 0]})}const G=(0,m().YK)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const Y=function({title:e,value:t,onUpdate:n,onDismiss:o,disabled:r,footer:l,header:d,hideTime:c,showTime:u,store:p,dayRangeStore:g,minDate:m,maxDate:h,customErrorMessage:f}){const v=(0,s().v3)(),y=(0,i().uB)(g,S().A),x=(0,i().uB)(p,b().Ay);(0,a(852507).l)((()=>{void 0!==u&&x.setState({...x.state,showTime:u})}));const{device:A}=v;return(0,R.jsx)(a(404277).A,{...se(v,e,t,n,x,y,o,r,l,m,h),children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,R.jsxs)("div",{children:[d,A.isMobile?void 0:(0,R.jsx)(ne,{value:t,disabled:r,onUpdate:n,store:x,dayRangeStore:y,minDate:m,maxDate:h,customErrorMessage:f}),(0,R.jsx)(Z,{value:t,onUpdate:n,store:x,dayRangeStore:y,minDate:m,maxDate:h})]}),(0,R.jsx)(ae,{onUpdate:n,value:t,hideTime:c,store:x,dayRangeStore:y})]})})};function Q(e){const{field:t,parsed:a,value:n,minValue:s,maxValue:i}=e;return a.error?a:function(e){const{range:t,minValue:a,maxValue:n}=e,s=t.starting?_().C6.notionDateTimeToLuxon(t.starting):void 0,i=t.ending?_().C6.notionDateTimeToLuxon(t.ending):void 0;if(s&&i&&i<s)return{error:k().$.INVALID_RANGE};const o=e=>(0,h().O9)(a)&&(0,h().O9)(e)&&e<a,r=e=>(0,h().O9)(n)&&(0,h().O9)(e)&&e>n;return o(s)||o(i)||r(s)||r(i)?{error:k().$.NOT_SUPPORTED}:{value:t}}({range:{...n,[t]:a.value},minValue:s,maxValue:i})}function $(e){const{field:t,parsed:a,value:n,minValue:s,maxValue:i}=e;if(a.error)return a;return function(e){const{range:t,minValue:a,maxValue:n}=e,s=t.starting?_().C6.notionDateToLuxon(t.starting):void 0,i=t.ending?_().C6.notionDateToLuxon(t.ending):void 0;if(s&&i&&i<s)return{error:k().$.INVALID_RANGE};const o=e=>a&&e&&e<a,r=e=>n&&e&&e>n;return o(s)||o(i)||r(s)||r(i)?{error:k().$.NOT_SUPPORTED}:{value:t}}({range:{...f().BI(n),[t]:a.value},minValue:s,maxValue:i})}function J(e,t){return{pickerSection:{paddingInlineStart:16,paddingInlineEnd:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderInlineStart:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.text.secondary}}}function Z({value:e,onUpdate:t,store:a,dayRangeStore:n,minDate:r,maxDate:l}){const d=(0,o().DP)(),c=(0,s().v3)(),u=(0,i().uB)(n,S().A),p=(0,i().uB)(a,b().Ay),{device:g}=c,m=J(c,d),h=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(d),v={...m.pickerSection,...g.isMobile&&m.pickerSectionMobile,...g.isMobile&&h.pickerSectionMobile};return(0,R.jsx)(w().A,{children:(0,R.jsx)("div",{style:v,children:(0,R.jsx)(N().A,{value:f().BI(e),dateTimeStore:p,store:u,onUpdate:a=>{if(a.error)return null;const n=f().y2(e,a.value);return t({error:a.error,value:n})},minDate:r,maxDate:l,validate:(t,a)=>$({field:t,parsed:a,value:e,minValue:r,maxValue:l})})})})}function X(e,t,a){t.setState({...t.state,focus:e});const n=b().yL[e];a.setState({...a.state,focus:n})}function ee(e,t){t.setState({...t.state,focus:e})}function te(e,t,a){e.ending&&X(x().xQ.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?_().mF(e.starting||e.ending):void 0,temporaryDateRange:{starting:f().qC(e.starting),ending:f().qC(e.ending)}})}function ae({onUpdate:e,value:t,hideTime:a,store:n,dayRangeStore:r}){const l=(0,o().DP)(),d=(0,s().v3)(),c=(0,i().K8)((()=>n.state.showTime),[n]);return(0,R.jsxs)("aside",{style:J(d,l).sidebar,children:[a?null:(0,R.jsx)(D().A,{title:(0,R.jsx)(m().sA,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:c,onClick:()=>{if(n.toggleShowTime(),n.state.showTime){const a=t;a.starting&&(a.starting.start_time="00:00"),a.ending&&(a.ending.start_time="23:59"),e({value:a})}},focused:!1}),(0,R.jsx)(A().A,{focused:!1,title:(0,R.jsx)(m().sA,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=_().KQ(e,(0,C().P)());te({starting:{...t,start_time:"00:00"},ending:t},n,r)},style:J(d,l).menuItem}),(0,R.jsx)(A().A,{focused:!1,title:(0,R.jsx)(m().sA,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=_().jI((0,C().P)());te({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().P)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,C().P)()}},n,r)},style:J(d,l).menuItem}),(0,R.jsx)(A().A,{focused:!1,title:(0,R.jsx)(m().sA,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=_().t0((0,C().P)()),t=_().KQ(Date.now(),(0,C().P)());te({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().P)()},ending:t},n,r)},style:J(d,l).menuItem}),(0,R.jsx)(A().A,{focused:!1,title:(0,R.jsx)(m().sA,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=_().ZG((0,C().P)()),t=_().KQ(Date.now(),(0,C().P)());te({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,C().P)()},ending:t},n,r)},style:J(d,l).menuItem})]})}function ne({value:e,disabled:t,onUpdate:a,store:n,dayRangeStore:r,minDate:l,maxDate:d,customErrorMessage:c}){const u=(0,m().tz)(),p=(0,o().DP)(),g=(0,s().v3)(),{device:h,WindowSizeStore:v}=g,y=(0,i().K8)((()=>n.getFocus()),[n]);let b="date";y!==x().xQ.StartTime&&y!==x().xQ.EndTime||(b="time");const S=function(e,t){return{earliestValidEnding:e.starting&&f().r6(e.starting,t),latestValidStarting:e.ending&&f().r6(e.ending,t)}}(e,u),A=(0,i().K8)((()=>n.state.showTime),[n]),j=(0,i().K8)((()=>v.getSafePaddingLeftCSS(16)),[v]);return(0,R.jsxs)("div",{style:{paddingTop:h.isMobile?16:12,paddingBottom:h.isMobile?16:8,paddingInlineStart:h.isMobile?j:14,paddingInlineEnd:h.isMobile?j:14,display:A?"block":"flex",...h.isMobile&&{boxShadow:`\n                        0 1px 0 ${p.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:h.isMobile?p.popoverBackground:void 0},children:[(0,R.jsx)(L,{disabled:t,placeholder:M().A.formatMessage(G.startingDateMessage),focus:y===x().xQ.StartDate||y===x().xQ.StartTime?b:void 0,value:e.starting,validate:t=>function(e){const{parsed:t,value:a,minValue:n,maxValue:s}=e,i=Q({field:"starting",parsed:t,value:a,minValue:n,maxValue:s});return i.error?i:{value:i.value.starting}}({parsed:t,value:e,minValue:l,maxValue:d}),customErrorMessage:c,onUpdate:t=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(t,a,e),onDateFocus:()=>X(x().xQ.StartDate,n,r),onTimeFocus:()=>ee(x().xQ.StartTime,n),onSubmit:(e,t)=>function(e,t,a,n,s){t&&t.error||(a===x().xQ.StartDate&&n.state.showTime?n.setState({...n.state,focus:x().xQ.StartTime}):(n.setState({...n.state,focus:x().xQ.EndDate}),s.setState({...s.state,focus:"ending"})))}(0,t,y,n,r),inputElementAttributes:{max:S.latestValidStarting},showTime:A}),(0,R.jsx)("div",{style:{width:12,height:8}}),(0,R.jsx)(L,{disabled:t,placeholder:M().A.formatMessage(G.endingDateMessage),focus:y===x().xQ.EndDate||y===x().xQ.EndTime?b:void 0,value:e.ending,validate:t=>function(e){const{parsed:t,value:a,minValue:n,maxValue:s}=e,i=Q({field:"ending",parsed:t,value:a,minValue:n,maxValue:s});return i.error?i:{value:i.value.ending}}({parsed:t,value:e,minValue:l,maxValue:d}),customErrorMessage:c,onUpdate:t=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(t,a,e),onDateFocus:()=>X(x().xQ.EndDate,n,r),onTimeFocus:()=>ee(x().xQ.EndTime,n),onSubmit:(e,t)=>function(e,t,a,n){t&&t.error||a===x().xQ.EndDate&&n.state.showTime&&n.setState({...n.state,focus:x().xQ.EndTime})}(0,t,y,n),inputElementAttributes:{min:S.earliestValidEnding},showTime:A})]})}function se(e,t,a,n,s,i,o,r,l,d,c){const{device:u}=e;if(u.isMobile){return{menuType:T().gu.Modal,title:t,right:(0,R.jsx)(I().DoneMenuText,{}),onClickRight:o,header:(0,R.jsx)(ne,{value:a,disabled:r,onUpdate:n,store:s,dayRangeStore:i,minDate:d,maxDate:c})}}return{menuType:T().gu.Popup,onClickOutside:o,footer:l}}var ie=()=>a(297401),oe=()=>a(821879),re=()=>a(978625),le=()=>a(806754);function de({onChange:e,onMenuDismiss:t,showButtons:a,title:o,header:r,sidebar:l,hideTime:d,value:c,disabled:u,icon:p,mode:g,focused:m,pillTitle:h,minDate:f,maxDate:v,customErrorMessage:y}){const x=(0,s().v3)(),A=(0,i().uB)(void 0,S().A),j=(0,i().uB)(void 0,b().Ay);(0,n.useEffect)((()=>{ve({value:c},j,A)}),[c,j,A]);const{device:w}=x;return w.isMobile?(0,R.jsx)(Ce,{onChange:e,onMenuDismiss:t,showButtons:a,title:o,header:r,sidebar:l,hideTime:d,value:c,disabled:u,icon:p,store:j,dayRangeStore:A,mode:g,minDate:f,maxDate:v,customErrorMessage:y}):(0,R.jsx)(_e,{onChange:e,onMenuDismiss:t,showButtons:a,title:o,header:r,sidebar:l,hideTime:d,value:c,disabled:u,focused:m,icon:p,mode:g,pillTitle:h,store:j,dayRangeStore:A,minDate:f,maxDate:v,customErrorMessage:y})}function ce(e){const{device:t}=e;return t.isMobile?d().n.SlideUp:d().n.Popup}function ue(e){return{buttonMenuItem:{color:e.text.secondary},activeMenuItem:{color:e.text.primary}}}function pe(e){e.preventDefault&&e.preventDefault()}function ge(e){e({starting:void 0,ending:void 0})}function me(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{marginInlineEnd:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginInlineEnd:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{marginTop:1,marginInlineEnd:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function he(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:x().xQ.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function fe(e,t,a,n,s,i){const{temporaryDateRange:o}=a.state;y().a9(e)||(i||t(o),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s&&s())}function ve(e,t,a){if(e.error)return;const n={starting:(0,f().qC)(e.value.starting),ending:(0,f().qC)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...n}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function ye({disabled:e,icon:t,title:a,store:i,dayRangeStore:o}){const l=(0,s().v3)(),d=(0,n.useCallback)((()=>he(i,o,e)),[i,o,e]),c=me(l);return(0,R.jsx)(A().A,{disabled:e,focused:!1,icon:(0,R.jsx)(r().I,{icon:t,style:c.icon}),title:a,onClick:d})}function xe({disabled:e,title:t,value:a,intl:i,onChange:o,store:l,dayRangeStore:d}){const c=(0,s().v3)(),u=(0,n.useCallback)((()=>he(l,d,e)),[l,d,e]),p=me(c),m=(0,R.jsxs)("div",{style:p.summary,children:[(0,R.jsx)(r().I,{icon:g().Y,size:"xs",style:p.iconActiveMobile}),y().tX(a,i)]});return(0,R.jsx)(re().A,{disabled:e,onClick:u,onClickClear:()=>ge(o),label:t,title:m})}function be({disabled:e,value:t,focused:a,intl:i,onChange:l,store:d,dayRangeStore:c}){const u=(0,o().DP)(),g=(0,s().v3)(),m=(0,n.useCallback)((()=>he(d,c,e)),[d,c,e]),h=me(g),f=ue(u),v={...h.menuItem,...f.activeMenuItem},x=y().tX(t,i),b=(0,R.jsx)(ie().A,{onClick:()=>ge(l),disabled:e});return(0,R.jsx)(A().A,{focused:a,disabled:e,icon:(0,R.jsx)(r().I,{icon:p().D,style:h.iconActiveDesktop}),title:x,right:b,isTokenTitle:!0,alignIconTop:!0,onClick:m,desktopTitleStyle:h.menuItemTitleDesktop,desktopIconStyle:h.iconActiveDesktopWrapper,style:v})}function Se({disabled:e,title:t,icon:a,focused:i,mode:l,store:d,dayRangeStore:c}){const u=(0,o().DP)(),p=(0,s().v3)(),g=(0,n.useCallback)((()=>he(d,c,e)),[d,c,e]),m=me(p),h=ue(u),f={...m.menuItem,...h.buttonMenuItem,...l===oe().C.Pill?{width:"fit-content",border:"solid 1px",paddingInlineStart:0,paddingInlineEnd:0,borderRadius:20,fontSize:12}:{}};return(0,R.jsx)(A().A,{focused:i,disabled:e,icon:(0,R.jsx)(r().I,{icon:a,style:m.icon}),title:t,onClick:g,style:f})}function Ae({disabled:e,value:t,pillTitle:a,store:s,dayRangeStore:i}){const o=(0,n.useCallback)((()=>he(s,i,e)),[s,i,e]),l=(0,R.jsx)(m().sA,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,R.jsx)(v().A,{on:Boolean(t.starting||t.ending),icon:(0,R.jsx)(r().I,{icon:p().D,style:{marginInlineEnd:6}}),title:(0,R.jsx)("span",{children:a||l}),onClick:o})}function je({onChange:e,onMenuDismiss:t,showButtons:a,store:n,dayRangeStore:s}){return(0,R.jsxs)(w().A,{topBorder:!0,style:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,R.jsx)(c().p,{onClick:()=>{n.clearTemporaryDateRange(),s.clearTemporaryDateRange(),e({starting:void 0,ending:void 0})},children:(0,R.jsx)(m().sA,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(u().A,{colorPalette:"blue",onClick:i=>{e(n.state.temporaryDateRange),fe(i,e,n,s,t,a)},children:(0,R.jsx)(m().sA,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function we({onChange:e,onMenuDismiss:t,showButtons:a,title:s,header:o,sidebar:r,hideTime:l,value:d,store:p,dayRangeStore:g,minDate:h,maxDate:f,customErrorMessage:v}){const y=(0,n.useCallback)((n=>fe(n,e,p,g,t,a)),[e,p,g,t,a]),x=(0,n.useCallback)((e=>ve(e,p,g)),[p,g]),b=(0,i().K8)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(d,p)),[d,p]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Y,{title:s,value:b,onUpdate:x,store:p,dayRangeStore:g,onDismiss:y,footer:"footer"===a&&(0,R.jsx)(je,{onChange:e,onMenuDismiss:t,showButtons:a,store:p,dayRangeStore:g}),sidebar:r,hideTime:l,header:o,minDate:h,maxDate:f,customErrorMessage:v}),"side"===a?(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,R.jsx)(c().p,{colorPalette:"gray",style:{marginInlineStart:"auto",marginInlineEnd:8},onClick:y,children:(0,R.jsx)(m().sA,{defaultMessage:"Cancel",id:"DateTimeFilter.cancelButton.label"})}),(0,R.jsx)(u().A,{colorPalette:"blue",onClick:()=>e(p.state.temporaryDateRange),children:(0,R.jsx)(m().sA,{defaultMessage:"Accept",id:"DateTimeFilter.acceptButton.label"})})]}):void 0]})}function _e({mode:e,onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:p,disabled:g,focused:f,icon:v,pillTitle:y,store:x,dayRangeStore:b,minDate:S,maxDate:A,customErrorMessage:w}){const _=(0,s().v3)(),C=(0,m().tz)(),M=(0,n.useCallback)((e=>fe(e,t,x,b,a,o)),[t,x,b,a,o]),T=(0,n.useCallback)((()=>(0,R.jsx)(we,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:p,store:x,dayRangeStore:b,minDate:S,maxDate:A,customErrorMessage:w})),[t,a,o,r,d,c,u,p,x,b,S,A,w]),k=me(_),I=e===oe().C.Section,D=I?r:void 0,N=e===oe().C.Section?(0,R.jsx)(be,{disabled:g,value:p,focused:f,intl:C,onChange:t,store:x,dayRangeStore:b}):e===oe().C.Button?(0,R.jsx)(Se,{disabled:g,title:r,icon:v,focused:f,mode:e,store:x,dayRangeStore:b}):e===oe().C.Pill?(0,R.jsx)(Ae,{disabled:g,value:p,pillTitle:y,store:x,dayRangeStore:b}):void(0,h().HB)(e),P=(0,i().K8)((()=>x.state.isOpen),[x]);return(0,R.jsx)(le().A,{title:D,marginAfter:I,children:(0,R.jsx)(l().N,{debugName:"DateTimeFilter",capture:P,onUp:pe,onDown:pe,onEnter:pe,children:(0,R.jsx)(j().Ay,{popupType:ce(_),open:P,origin:N,render:T,onDismiss:M,placementToOrigin:"bottom",alignmentToOrigin:"start",style:c?k.popupWithSidebar:k.popup,originGap:8,trapFocus:!0})})})}function Ce({mode:e,onChange:t,onMenuDismiss:a,showButtons:s,title:o,header:r,sidebar:l,hideTime:c,value:u,disabled:p,icon:g,store:h,dayRangeStore:f,minDate:v,maxDate:y,customErrorMessage:x}){const b=(0,m().tz)(),S=(0,n.useCallback)((e=>fe(e,t,h,f,a,s)),[t,h,f,a,s]),A=(0,n.useCallback)((()=>(0,R.jsx)(we,{onChange:t,onMenuDismiss:a,showButtons:s,title:o,header:r,sidebar:l,hideTime:c,value:u,store:h,dayRangeStore:f,minDate:v,maxDate:y,customErrorMessage:x})),[t,a,s,o,r,l,c,u,h,f,v,y,x]),w=(0,i().K8)((()=>h.state.isOpen),[h]),_=e===oe().C.Section?(0,R.jsx)(xe,{disabled:p,title:o,value:u,intl:b,onChange:t,store:h,dayRangeStore:f}):(0,R.jsx)(ye,{disabled:p,icon:g,title:o,store:h,dayRangeStore:f});return(0,R.jsx)(j().Ay,{popupType:d().n.SlideUp,open:w,origin:_,render:A,onDismiss:S,preventScaleTransition:!0})}},882690:(e,t,a)=>{a.d(t,{Z:()=>r});a(296540);var n=()=>a(69708),s=()=>a(972435),i=()=>a(859428),o=a(474848);function r(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,o.jsx)(i().A,{placement:"top",renderTooltip:e=>(0,o.jsx)("div",{...e,children:(0,o.jsx)(n().sA,{...t})}),render:e=>(0,o.jsx)("div",{...e,children:s().A.formatMessage(a)})})}},887720:(e,t,a)=>{a.d(t,{x:()=>f});var n=a(296540),s=()=>a(484714),i=()=>a(401497),o=()=>a(582684),r=()=>a(19676),l=()=>a(972435),d=()=>a(541558),c=()=>a(406699),u=()=>a(285790),p=()=>a(417392),g=()=>a(859428),m=()=>a(490094),h=a(474848);function f(e){const{appliedSorts:t,openSortPillMenu:a}=e,[f,v]=(0,n.useState)(!1),y=Boolean(null==t?void 0:t.length),x=function({hasSort:e}){const{isMobile:t}=(0,s().Y0)();return(0,i().IS)((a=>({iconStyle:{width:21,height:void 0,fill:e?a.blue.icon.accentPrimary:a.icon.secondary},buttonStyle:{...(0,r().i)({theme:a,isInHomeWidget:!1,isMobile:t}).button,marginInlineEnd:4}})),[e,t])}({hasSort:y}),b=(0,n.useCallback)((()=>{y?a():v(!0)}),[v,a,y]),S=l().A.formatMessage(d().CL.menuTitle);return(0,h.jsx)(p().Ay,{popupType:c().z.Popup,open:f,origin:(0,h.jsx)(g().A,{renderTooltip:()=>S,render:e=>(0,h.jsx)(u().A,{...e,ariaLabel:S,icon:o().arrowUpDownIcon,iconStyle:x.iconStyle,style:x.buttonStyle,onClick:b})}),onDismiss:()=>v(!1),originGap:4,render:()=>(0,h.jsx)(m().J,{...e,currentSorts:t,onClick:e=>{a(e),v(!1)}})})}},890434:(e,t,a)=>{a.d(t,{A:()=>i});a(296540);var n=a(474848);function s({title:e,subtitle:t,on:s,onChange:i,disabled:o,style:r}){const l=(0,a(401497).IS)((()=>({container:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginInlineEnd:8,flexGrow:1}})),[]);return(0,n.jsxs)("div",{style:{...l.container,...r},children:[(0,n.jsxs)("div",{style:l.title,children:[e,(0,n.jsx)(a(125565).A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"},children:t})]}),(0,n.jsx)(a(581369).A,{on:s,disabled:o,onClick:i})]})}s.defaultProps={disabled:!1,style:{}};const i=s},892936:(e,t,a)=>{a.r(t),a.d(t,{arrowStraightUpFillIcon:()=>s,iconDefinition:()=>n});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.72 2.12 12.56 15.76",svg:(0,a(474848).jsx)("path",{d:"M10.619 2.381a.875.875 0 0 0-1.238 0l-5.4 5.4A.875.875 0 1 0 5.22 9.02l3.906-3.907V17.05c0 .456.392.826.875.826s.875-.37.875-.826V5.112l3.906 3.907A.875.875 0 1 0 16.02 7.78z"})},s=(0,a(340498).wt)("arrowStraightUpFill",n)},897537:(e,t,a)=>{a.d(t,{A:()=>N});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(581454),a(296540);var n=()=>a(56366),s=()=>a(252291),i=()=>a(970236),o=()=>a(842599),r=()=>a(733816),l=()=>a(792071),d=()=>a(848538),c=()=>a(798880),u=()=>a(69708),p=()=>a(534177),g=()=>a(284371),m=()=>a(743260),h=()=>a(299545),f=()=>a(37433),v=()=>a(148832),y=()=>a(543665),x=()=>a(901791),b=()=>a(760217),S=()=>a(231704),A=a(474848);function j(){return(0,A.jsx)(i().E,{content:(0,A.jsx)(u().sA,{id:"spaceUserMembershipType.member",defaultMessage:"Member"})})}var w=()=>a(939740),_=()=>a(64e3),C=()=>a(313171),M=()=>a(267155);const T=(0,u().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}}),k=(0,u().YK)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},restrictedMemberTooltip:{id:"inviteUserModal.userRole.restrictedMemberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a restricted member in this workspace"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"}});function I(e,t){return e.filter(((e,a)=>a<t))}function D(e){const{membershipType:t,intl:a,userNameAndEmail:n}=e;switch(t){case"owner":return{tooltip:a.formatMessage(k.workspaceOwnerTooltip,{userNameAndEmail:n}),userTypeToken:(0,A.jsx)(x().l,{role:t})};case"membership_admin":return{tooltip:a.formatMessage(k.membershipAdminTooltip,{userNameAndEmail:n}),userTypeToken:(0,A.jsx)(x().l,{role:t})};case"member":return{tooltip:a.formatMessage(k.memberTooltip,{userNameAndEmail:n}),userTypeToken:(0,A.jsx)(j,{})};case"restricted_member":return{tooltip:a.formatMessage(k.restrictedMemberTooltip,{userNameAndEmail:n}),userTypeToken:(0,A.jsx)(C().L,{})};case"page_guest":return{tooltip:a.formatMessage(k.guestTooltip,{userNameAndEmail:n}),userTypeToken:(0,A.jsx)(S().w,{labelType:t})};default:(0,p().HB)(t)}}const N=function(e){const{store:t,shouldShowGroups:p,sectionRenderLimit:x,membersOnly:S,hideCurrentUser:j,disableInvitedUsers:C,guestsMustBeRequested:k,hideTitle:N,defaultUserTitle:P,performSearchRequest:E}=e,[B,R,V]=(0,n().$y)(e.permissionsInviteStore),L=(0,a(484714).v3)(),F=(0,u().tz)(),{tokenQuery:O}=B,z="invitee",U=(0,n().K8)((()=>{const e=a(21735).A.state.shouldUseEdgeCache,t=a(242422).default.checkGate({gateName:"edge_cache_settings"});return e&&t}),[]),W={request:O,performRequest:e=>E?E({query:e,limit:10,environment:L}):a(542056).hQ({query:e,sectionLimit:{userLimit:10,groupLimit:p?10:0,importContactLimit:0},membersOnly:S,environment:L,intl:F,shouldUseEdgeCacheRollout:U}),render:(e,n,S)=>{if(e)return(0,A.jsx)(M().z,{loading:!S,hideTitle:N,children:(0,A.jsx)(_().A,{title:(0,A.jsx)(u().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const E=n&&{...n,inviteUsers:n.inviteUsers.filter((e=>!(0,m().mQ)({permissionsInviteStore:V,target:e})&&(!j||e.value.id!==L.currentUser.id))),importedContacts:(0,m().GZ)(n.inviteUsers,n.importedContacts)},R=E&&(null==O?void 0:O.length)>0,{inviteUsers:U,inviteGroups:W,importedContacts:H=[]}=R?E:(0,m().Es)({currentInviteActors:E,permissionsInviteStore:V,targetStore:t}),K=[...I(U,x),...I(H,10)].map(((e,n)=>{const o="newUser"===e.type?e.value.email:e.value.id,p=(0,m().vP)(e),g=Boolean(R&&(0,m().VF)({permissionsInviteStore:V,userTarget:e,targetStore:t}));return{key:o,render:n=>{const{tooltip:o,userTypeToken:m}=function(e){const{userTarget:t,targetStore:a,isInvited:n,membershipType:s,intl:o}=e,r="newUser"===t.type?null:l().Bj6.fromValue(c().oo,t.value),p=null==r?void 0:r.id,g=null==r?void 0:r.getDisplayName(o),m=t.value.email,x=g&&g!==m?`${g} (${m})`:m??o.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});if((0,h().$R)(a)&&p){const e=a.getTeamRoleForUser(p,new Set);if(e&&"none"!==e){const t=o.formatMessage(f().Y7[e].label);return{tooltip:o.formatMessage(T.invited_team,{userNameAndEmail:x}),userTypeToken:(0,A.jsx)(i().E,{content:(0,A.jsx)(u().sA,{id:"inviteUserModal.teamspaceRole.memberBadge.label",defaultMessage:"{teamRoleMessage}",values:{teamRoleMessage:t}})})}}return(0,d().P)(s)||(0,d().GN)(s)?D({userNameAndEmail:x,membershipType:s,intl:o}):{tooltip:void 0,userTypeToken:void 0}}if(n)return{tooltip:(0,h().Yu)(a)?o.formatMessage(T.invited_space,{userNameAndEmail:x}):a instanceof v().B?o.formatMessage(T.invited_page,{userNameAndEmail:x}):a instanceof y().m?o.formatMessage(T.invited_database,{userNameAndEmail:x}):o.formatMessage(T.invited_team,{userNameAndEmail:x}),userTypeToken:(0,A.jsx)(i().E,{content:(0,A.jsx)(u().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if("none"===s)return{tooltip:o.formatMessage(T.not_in_space,{userNameAndEmail:x}),userTypeToken:void 0};return D({userNameAndEmail:x,membershipType:s,intl:o})}({userTarget:e,targetStore:t,membershipType:p,isInvited:g,intl:F});return"existingUser"===e.type?(0,A.jsx)(a(457688).A,{...n,actor:(0,a(764880).A7)(e.value),right:m,tooltip:o,tooltipPlacement:"bottom",disabled:C&&g,defaultUserTitle:P}):(0,A.jsx)(a(859428).A,{placement:"bottom",alignment:"start",textWrap:!0,render:t=>(0,A.jsx)(b().A,{...n,...t,icon:(0,A.jsx)(s().I,{icon:r().o}),right:m,title:e.value.email.trim(),disabled:C&&g}),disableTooltip:!o,renderTooltip:()=>o})},action:()=>{if(C&&g)return;const t={...e,..."existingUser"===e.type&&{membershipType:p}};a(134696).kH(L,{subscription_tier:(0,a(10984).AI)(),invite_token_query:O,selected_user_token:e,selected_user_token_rank:n,from:"permission_invite"}),V.setState({...B,inviteTargets:[...B.inviteTargets,t],tokenQuery:"",inputFocus:z})}}})),q=I(W,x).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,A.jsx)(a(862139)._,{group:t,menuListItemProps:e}),action:()=>{V.setState({...B,inviteTargets:[...B.inviteTargets,e],tokenQuery:"",inputFocus:z})}}})),G=[];if(K.length>0&&G.push({key:"user results",render:e=>(0,A.jsx)(M().z,{...e,loading:!S,hideTitle:N}),items:K}),p&&q.length>0&&G.push({key:"group results",render:e=>(0,A.jsx)(a(89924).A,{...e,title:(0,A.jsx)(u().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!S}),items:q}),0===G.length){const e=(0,o().qh)(B.tokenQuery);if((0,o().DT)(e)){const s={type:"newUser",value:{email:e},source:"email"},i=(0,m().mQ)({target:s,permissionsInviteStore:V});if(!i)return;if(i)return(0,A.jsx)(M().z,{loading:!S,hideTitle:N,children:(0,A.jsx)(_().A,{title:(0,A.jsx)(u().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,A.jsx)("span",{style:{fontWeight:g().Wy.bold},children:(0,m().Sk)({intl:F,target:i})})}})})});const o=(n&&n.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(o&&"existingUser"===o.type&&(0,m().wF)({store:t,target:o}))return(0,A.jsx)(M().z,{loading:!S,hideTitle:N,children:(0,A.jsx)(_().A,{title:(0,A.jsx)(u().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,A.jsx)("span",{style:{fontWeight:g().Wy.bold},children:(0,a(695608).c6)(F,o.value)})}})})})}else{if(!B.tokenQuery)return null;G.push({key:"user results",render:e=>(0,A.jsx)(M().z,{...e,loading:!S,hideTitle:N,title:k?(0,A.jsx)(u().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,A.jsx)(u().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:B.tokenQuery,render:e=>(0,A.jsx)(b().A,{icon:(0,A.jsx)(s().I,{icon:r().o}),title:B.tokenQuery,...e}),action:()=>{}}]})}}return(0,A.jsx)(w().Ay,{type:w().Oh.Vertical,initialFocus:O.length>0?0:void 0,sections:G})}};return(0,A.jsx)(a(251126).A,{...W})}},926938:(e,t,a)=>{a.d(t,{q:()=>r});var n=()=>a(484714),s=()=>a(187174),i=()=>a(534177),o=()=>a(559506);function r(){const e=(0,n().v3)(),[{status:t,error:a,value:r},l]=(0,s().Yb)((async()=>{const t=await o().callApi({eventName:"getUserOrganizations",environment:e,data:{}});if("success"===t.type)return t.data;if("failed"===t.type)throw t.error;return(0,i().HB)(t)}),[e]);return{organizationsInfo:(null==r?void 0:r.organizationsInfo)??[],loading:"pending"===t||"idle"===t,error:a,refresh:l}}},962750:(e,t,a)=>{a.r(t),a.d(t,{heartSmallIcon:()=>s,iconDefinition:()=>n});a(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.79 2.17 12.41 12.06",svg:(0,a(474848).jsx)("path",{d:"M8.013 14.232a.6.6 0 0 1-.138-.015.5.5 0 0 1-.175-.055c-.241-.124-5.905-3.11-5.905-7.979 0-1.872 1.038-3.433 2.581-3.883C5.403 2 6.826 2.206 8 3.537 9.175 2.206 10.597 2 11.624 2.3c1.544.45 2.581 2.011 2.581 3.883 0 4.869-5.664 7.855-5.905 7.98a.6.6 0 0 1-.287.07M5.25 3.425q-.263 0-.523.075c-1.006.293-1.682 1.372-1.682 2.683 0 3.552 3.877 6.08 4.955 6.714 1.078-.634 4.955-3.162 4.955-6.714 0-1.311-.676-2.39-1.682-2.683-.973-.283-2 .245-2.746 1.414a.625.625 0 0 1-1.054 0c-.613-.961-1.415-1.49-2.223-1.49"})},s=(0,a(340498).wt)("heartSmall",n)},963605:(e,t,a)=>{a.d(t,{H1:()=>u,VZ:()=>g});a(296540);var n=()=>a(484714),s=()=>a(56366),i=()=>a(69708),o=()=>a(231297),r=()=>a(709062),l=()=>a(359941),d=()=>a(702723),c=a(474848);const u=(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleDirectory.title",defaultMessage:"People directory"},byline:{id:"spacePermissionsSettings.people.peopleDirectory.byline",defaultMessage:"Enable the people directory and profile pages in Notion"}}),p=(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleProfile.title",defaultMessage:"Profiles"},byline:{id:"spacePermissionsSettings.people.peopleProfile.byline",defaultMessage:"Enable user profiles"}});function g({spaceStore:e,isLocked:t,isMobile:a}){const g=(0,n().v3)(),m=(0,s().K8)((()=>Boolean(e.getSetting("disable_people_directory"))),[e]),h=(0,l().V)({spaceStore:e})?u:p;return(0,c.jsx)(d().A,{isMobile:a,title:(0,c.jsx)(i().sA,{...h.title}),caption:(0,c.jsx)(i().sA,{...h.byline}),type:"toggle",isOn:!m,onToggle:()=>{t||function({environment:e,spaceStore:t,newValue:a}){o().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleDirectorySetting",environment:e,canUndo:!0,perform:e=>{o().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","disable_people_directory"],command:"set",args:a},transaction:e})}})}({environment:g,spaceStore:e,newValue:!m})},isLocked:t,lockedTooltip:t?(0,r().C_)():void 0})}},965597:(e,t,a)=>{a.d(t,{Hb:()=>s,Hm:()=>o,ko:()=>i});a(898992),a(354520),a(581454);var n=()=>a(979340);function s({space:e,trustedDomains:t,enableTrustedDomainPermissionRedesign:a}){return e&&i(e)?a?(0,n().OX)(e.subscription_tier)?(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):e.getEmailDomains():(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):[]}function i(e){return Boolean(e&&(0,n().jR)(e.subscription_tier))}function o(e){return!(!e||!i(e))&&(!(0,n().OX)(e.subscription_tier)||(e.getSettings().domain_link_sharing_enabled??!0))}},976519:(e,t,a)=>{a.d(t,{q:()=>i});a(898992),a(354520),a(581454);var n=()=>a(56366),s=()=>a(435761);function i(e){const t=(0,s().xJ)(),a=(0,s().gc)({teams:t.teams}).map((e=>e.store));return(0,n().K8)((()=>{if(!e)return!1;const t=a.filter((e=>e.isDefault()&&!e.isArchived()));return 1===t.length&&t[0].id===e}),[e,a])}},978604:(e,t,a)=>{a.d(t,{H:()=>h,K:()=>f});var n=a(296540),s=()=>a(484714),i=()=>a(631524),o=()=>a(863330),r=()=>a(69708),l=()=>a(534177),d=()=>a(908928),c=()=>a(901389),u=()=>a(972435),p=()=>a(859428),g=a(474848);const m=(0,r().YK)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});async function h({environment:e,spaceStore:t,userStore:a}){const{botStore:n,transactionPromise:s}=d().gI({environment:e,spaceStore:t,name:"SCIM",userId:a.id,membershipType:"bot_owner",type:"scim"});return await s,n.id}function f(e){const[t,a]=(0,n.useState)(!1),d=(0,s().v3)();const f=t||"Able"!==e.tokenCreationAbility,v=(0,g.jsx)(i().p,{colorPalette:f?"gray":"blue",disabled:f,iconLeading:{icon:o().plusSmallIcon,size:"sm"},onClick:async function(){a(!0);try{const t=await h({...e,environment:d});e.onNewScimToken(t)}catch(t){c().f1(u().A.formatMessage(m.failedCreatingNewScimToken))}a(!1)},children:(0,g.jsx)(r().sA,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let y;switch(e.tokenCreationAbility){case"Able":return v;case"Undefined":y=(0,g.jsx)(r().sA,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":y=(0,g.jsx)(r().sA,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":y=(0,g.jsx)(r().sA,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,l().HB)(e.tokenCreationAbility)}return(0,g.jsx)(p().A,{textWrap:!1,renderTooltip:()=>y,placement:"right",render:e=>(0,g.jsx)("div",{...e,style:{paddingInlineStart:"4px"},children:v})})}},981982:(e,t,a)=>{a.d(t,{G0:()=>C,V$:()=>T,VX:()=>M});a(898992),a(354520),a(672577),a(581454),a(737550);var n=a(296540),s=()=>a(56366),i=()=>a(401497),o=()=>a(631524),r=()=>a(160432),l=()=>a(493552),d=()=>a(784892),c=()=>a(69708),u=()=>a(496603),p=()=>a(534177),g=()=>a(284371),m=()=>a(722872),h=()=>a(223544),f=()=>a(567865),v=()=>a(760217),y=()=>a(404277),x=()=>a(939740),b=()=>a(228927),S=()=>a(89924),A=()=>a(125565),j=()=>a(881690),w=()=>a(297780),_=a(474848);function C(e){const{pillTitle:t,selectedItem:a,items:n,shouldHidePrefix:s,selectionRequired:i}=e,o=n.find((e=>(0,u().n4)(e.value,a)));return(0,_.jsx)(f().zr,{...e,iconStyles:{marginInlineEnd:5},renderMenu:e=>(0,_.jsx)(I,{...e,pillTitle:t,selectionRequired:i}),pillTitle:(0,_.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:s?o?o.shortTitle:t:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{style:Boolean(o)?{fontWeight:g().Wy.medium}:void 0,children:t}),Boolean(o)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{children:": "}),(0,_.jsx)("span",{children:null==o?void 0:o.shortTitle})]}):void 0]})})})}function M(e){const{pillTitle:t}=e,[a,s]=(0,n.useState)(e.selectedItems);return(0,_.jsx)(k,{...e,tempSelectedItems:a,setTempSelectedItems:s,renderMenu:e=>(0,_.jsx)(I,{...e,pillTitle:t})})}function T(e){const{pillTitle:t,pageSize:a,searchPlaceholder:s,items:i}=e,[o,r]=(0,n.useState)(e.selectedItems),[l,d]=(0,n.useState)("");return(0,_.jsx)(k,{...e,tempSelectedItems:o,setTempSelectedItems:r,onToggleSelected:()=>d(""),renderMenu:e=>(0,_.jsx)(D,{...e,items:i,pageSize:a,pillTitle:t,searchPlaceholder:s,tempSelectedItems:o,setTempSelectedItems:r,query:l,setQuery:d})})}function k(e){const{pillTitle:t,selectedItems:a,items:n,renderMenu:s,tempSelectedItems:i,setTempSelectedItems:o}=e;let r;if(1===a.length){const e=n.find((e=>(0,u().n4)(e.value,a[0])));r=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(r=(0,_.jsx)(c().sA,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,_.jsx)(f().m1,{...e,iconStyles:{marginInlineEnd:5},tempSelectedItems:i,setTempSelectedItems:o,renderMenu:s,pillTitle:(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{style:Boolean(r)?{fontWeight:g().Wy.medium}:void 0,children:t}),Boolean(r)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{children:": "}),(0,_.jsx)("span",{children:r})]}):void 0]})})}function I({items:e,toggleSelectedItem:t,renderItemOptionIcon:a,menuListStore:n,clearSelection:s,pillTitle:i,selectAll:d,shouldUseCheck:u,selectionRequired:p,onSubmit:g,handleScroll:f,renderSearchInput:A}){const j=N(),w={key:"menuOptions",items:e.length?e.map((e=>({key:e.key,action:()=>t(e.value),render:t=>(0,_.jsx)(v().A,{...t,icon:u?void 0:a(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,hoveredStyle:j.hoveredItem,right:u?a(e.value):(0,_.jsx)(l().D,{colorVariant:"tertiary",children:e.count})})}))):[h().v8],render:e=>(0,_.jsx)(S().A,{...e,title:null,loading:!1})};return(0,_.jsxs)("div",{style:j.container,children:[(0,_.jsxs)(S().A,{topBorder:!1,style:j.header,children:[(0,_.jsx)(l().D,{styleKey:"Caption/Medium",colorVariant:"tertiary",children:i}),d?(0,_.jsx)("div",{style:j.buttonContainer,children:(0,_.jsx)(o().p,{onClick:d,colorPalette:"blue",size:"xs",children:(0,_.jsx)(c().sA,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),A?A():void 0,(0,_.jsxs)(y().A,{menuType:m().gu.Popup,header:null,maxHeight:250,width:320,children:[(0,_.jsx)(x().Ay,{type:x().Oh.Vertical,store:n,initialFocus:void 0,sections:[w]}),f?(0,_.jsx)(b().A,{onChange:f}):void 0]}),(0,_.jsxs)(S().A,{topBorder:!0,style:j.footer,children:[p?(0,_.jsx)("div",{}):(0,_.jsx)(o().p,{onClick:s,style:j.clearButton,children:(0,_.jsx)(c().sA,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,_.jsx)(r().A,{colorPalette:"blue",onClick:g,children:(0,_.jsx)(c().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function D(e){const{items:t,pageSize:a,searchPlaceholder:i,tempSelectedItems:o,setTempSelectedItems:r,query:l,setQuery:c}=e,g=N(),m=(0,n.useMemo)((()=>l?t.filter((e=>e.searchTerms.some((e=>e.includes(l.toLowerCase()))))):t),[l,t]),h=(0,n.useCallback)((e=>{c(e.target.value)}),[c]),[f,v]=(0,n.useState)(a),y=(0,n.useMemo)((()=>a?m.slice(0,f):m),[m,f,a]);const x=(0,s().K8)((()=>o.map((e=>{const a=t.find((t=>(0,u().n4)(t.value,e)));if(a)return(0,_.jsx)(j().A,{isSingle:!0,format:d().NY.Inline,style:g.tokenContainer,showRemoveButton:!0,onClickRemove:()=>{const e=o.filter((e=>!(0,u().n4)(e,a.value)));r(e)},value:(0,_.jsxs)("div",{style:g.tokenContents,children:[a.tokenIcon,(0,_.jsx)(A().A,{children:a.shortTitle})]}),backgroundColor:a.tokenColor},a.key)})).filter(p().O9)),[o,r,g,t]);return(0,_.jsx)(I,{...e,toggleSelectedItem:t=>{e.toggleSelectedItem(t),c("")},items:y,handleScroll:function(e){a&&f&&e<5&&f<m.length&&v(f+a)},renderSearchInput:()=>(0,_.jsx)(w().A,{focus:!0,value:l,style:g.search,placeholder:i??"",onChange:h,onRemoveLastToken:()=>{const e=o.slice(0,-1);r(e)},tokens:x})})}function N(){return(0,i().IS)((e=>({container:{padding:"8px 0 6px"},header:{paddingTop:0,paddingInlineEnd:8,paddingBottom:6,paddingInlineStart:12,justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginInlineEnd:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:e.text.tertiary},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:g().Wy.medium},search:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},tokenContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},tokenContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,height:20},hoveredItem:{background:e.buttonHoveredBackground}})),[])}},994776:(e,t,a)=>{a.d(t,{t:()=>d});a(296540);var n=()=>a(401497),s=()=>a(406094),i=()=>a(750559),o=()=>a(69708),r=()=>a(284371),l=a(474848);function d({runNewSearch:e,error:t}){const a=(0,n().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.red.icon.accentPrimary,fill:"currentColor"},title:{margin:"8px auto",fontWeight:r().Wy.medium,fontSize:16},description:{fontWeight:r().Wy.regular,fontSize:14,lineHeight:1.3,color:e.text.tertiary,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:r().Tf.mono,fontSize:12,color:e.text.tertiary,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:a.container,children:[(0,i().f)(a.headerIcon),(0,l.jsx)("h1",{style:a.title,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:a.description,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(s().A,{size:"lg",style:a.errorButton,onClick:()=>e(!0),children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}}}]);