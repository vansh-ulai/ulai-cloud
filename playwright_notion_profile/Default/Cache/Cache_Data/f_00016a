"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75422],{6731:(e,t,o)=>{o.d(t,{D:()=>d});o(898992),o(803949);var n=o(296540),i=()=>o(56366),r=()=>o(476158),l=()=>o(388821),a=()=>o(231297),s=()=>o(841696),c=()=>o(765957);function d({unpersistedInMemoryRecordCache:e}){const t=(0,i().K8)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),o=(0,n.useCallback)((({perform:o})=>{const n=new(s().Z)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),i=o(n),c=l().RecordMap.create();n.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&c.addModel(t)})),(0,r().applyOperationsToRecordMap)({operations:n.operations,recordMap:c,updateOnly:!1});for(const r of c){const{model:o,pointer:n}=r;e.setModelAndRole({pointer:n,userId:t},o,"editor")}return e.emitAll(),{performResult:i,serverCommitResult:Promise.resolve(void 0),transactionId:n.id}}),[e,t]);return(0,n.useMemo)((()=>({createAndCommit:o})),[o])}},7667:(e,t,o)=>{o.d(t,{A:()=>m});o(898992),o(737550),o(296540);var n=()=>o(484714),i=()=>o(56366),r=()=>o(69708),l=()=>o(534177),a=()=>o(901389),s=()=>o(231297),c=()=>o(908201),d=()=>o(254497),p=()=>o(312296),u=()=>o(177618),g=o(474848);function m(){const e=(0,c().Ks)(),t=(0,n().v3)(),o=(0,i().K8)((()=>null==e?void 0:e.settingsStore),[e]);return function(n){if(!o||!n||!e)return;const i=e.collectionStore();if((0,l().O9)(i)){const e=u().KA({deletedSchema:i.getDeletedSchema(),property:n});if(e){var c;if("verification"===(null===(c=i.getDeletedSchema()[n])||void 0===c?void 0:c.type)){const e=i.getSchema(),t=Object.keys(e).some((t=>{var o;return"verification"===(null===(o=e[t])||void 0===o?void 0:o.type)}));if(t)return void a().ui({message:(0,g.jsx)(r().sA,{id:"deletedPropertyMenu.cannotRestoreDuplicateProperty.modal.verification",defaultMessage:"You can only have one verification property."}),showCancel:!1,keepFocus:!0,items:[{label:(0,g.jsx)(r().sA,{id:"deletedPropertyMenu.cannotRestoreDuplicateProperty.modal.dismissButton",defaultMessage:"Dismiss"}),onAccept:()=>{}}]})}s().createAndCommit({userAction:"deletedPropertyMenu.handleRestoreDeletedPropertyClick",environment:t,canUndo:!0,perform:o=>{(0,p().F)({environment:t,collectionStore:i,update:e.updateSchema,transaction:o}),(0,d().E)({collectionStore:i,update:e.updateDeletedSchema,transaction:o})}})}}}}},33376:(e,t,o)=>{o.d(t,{E:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.09 15.2 12.78",svg:(0,o(474848).jsx)("path",{d:"M3.5 3.099c-.621 0-1.125.504-1.125 1.125v9.026A2.625 2.625 0 0 0 5 15.875h9.944a2.625 2.625 0 0 0 2.625-2.625V7.495a2.625 2.625 0 0 0-2.625-2.625H9.067L7.962 3.513A1.13 1.13 0 0 0 7.09 3.1zm.125 4.465V4.349H7.03l1.105 1.356c.214.263.534.415.872.415h5.937c.76 0 1.375.616 1.375 1.375v.069zm0 1.1h12.694v4.586c0 .76-.616 1.375-1.375 1.375H5c-.76 0-1.375-.616-1.375-1.375z"})},i=(0,o(340498).wt)("folder",n)},35091:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function({switcherProps:e,...t}){return(0,n.jsx)(o(497222).A,{right:(0,n.jsx)(o(581369).A,{onClick:t.onClick,disabled:t.disabled,...e}),...t})}},90907:(e,t,o)=>{o.d(t,{h:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.06 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,n.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,o(340498).wt)("lock",i)},95441:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const{title:t,href:i,analyticsFrom:r}=e,l=(0,o(484714).v3)();return(0,n.jsx)(o(97294).N,{href:i,onClick:()=>o(148024).FH(l,{from:r}),external:!0,children:(0,n.jsx)(o(497222).A,{icon:o(406533).questionMarkCircleIcon,title:t,isGray:!0})})}},112282:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightUpIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,o(474848).jsx)("path",{d:"M9.792 2.41a.6.6 0 0 0-.234.148l-5.4 5.4a.625.625 0 1 0 .884.884l4.333-4.333V17a.625.625 0 1 0 1.25 0V4.509l4.333 4.333a.625.625 0 1 0 .884-.884l-5.4-5.4a.62.62 0 0 0-.65-.147"})},i=(0,o(340498).wt)("arrowStraightUp",n)},149864:(e,t,o)=>{o.d(t,{A:()=>we,c:()=>Ce});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(314529),r=()=>o(59226),l=()=>o(726637),a=()=>o(484714),s=()=>o(56366),c=()=>o(401497),d=()=>o(718827),p=()=>o(160432),u=()=>o(584262),g=()=>o(862e3),m=()=>o(898244),S=()=>o(852424),y=()=>o(604995),v=()=>o(651124),f=()=>o(340498),h=()=>o(69708),x=()=>o(496603),b=()=>o(284371),w=()=>o(436696),C=()=>o(321775),A=()=>o(896628),_=()=>o(577142),j=()=>o(4319),T=()=>o(231297),k=()=>o(253021),M=()=>o(934201),I=()=>o(378518),B=()=>o(636740),P=()=>o(314660),V=()=>o(885110),K=()=>o(384944),O=()=>o(407031),F=()=>o(126398);var z=()=>o(177618),E=()=>o(406699),R=()=>o(404277),D=()=>o(417392),$=()=>o(89924),L=()=>o(574036),W=()=>o(180252),U=()=>o(635462),X=()=>o(476492),H=()=>o(972435);const Q=(0,h().YK)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),N=(0,h().YK)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}});function G(e){return e?"page_content"===e.type?H().A.formatMessage(Q.page_content):"page_cover"===e.type?H().A.formatMessage(Q.page_cover):void 0:H().A.formatMessage(Q.none)}function Y(e){switch(e){case"small":return H().A.formatMessage(N.small);case"medium":return H().A.formatMessage(N.medium);case"large":return H().A.formatMessage(N.large)}}var Z=()=>o(852353),q=()=>o(544073),J=()=>o(492414),ee=()=>o(722872),te=()=>o(805025),oe=()=>o(232930),ne=()=>o(765957),ie=()=>o(712505),re=()=>o(147503),le=o(474848);function ae({environment:e,collectionContextStore:t}){const o=(0,s().K8)((()=>{var e;return t.collectionViewStore()?null===(e=t.collectionViewStore())||void 0===e?void 0:e.getCardLayoutMode():v().WH}),[t]),n=!(0,s().O$)(t.canConfigureBlockStore),i=(0,c().IS)((e=>({container:{margin:8,borderRadius:10,padding:12,background:e.background.secondaryTranslucent,display:"flex",flexDirection:"column",alignItems:"center",gap:8},title:{fontSize:l().A.isMobile?14:12,fontWeight:b().Wy.medium,color:e.text.secondary},optionsContainer:{display:"flex",width:"100%",gap:12,paddingInlineStart:6,paddingInlineEnd:6}})),[]),r=[{mode:"compact",label:(0,le.jsx)(h().sA,{defaultMessage:"Compact",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.compact"})},{mode:"list",label:(0,le.jsx)(h().sA,{defaultMessage:"List",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.list"})}];function a(o){var n;const i=null===(n=t.collectionViewStore())||void 0===n?void 0:n.getFormatStore();i&&T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCardLayoutClick",environment:e,canUndo:!0,perform:e=>{K().KY({store:i,value:{...i.getValue(),card_layout:{mode:o}},transaction:e})}})}return(0,le.jsxs)("div",{style:i.container,children:[(0,le.jsx)("div",{style:i.title,children:(0,le.jsx)(h().sA,{defaultMessage:"Card layout",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.title"})}),(0,le.jsx)("div",{style:i.optionsContainer,children:r.map((e=>(0,le.jsx)(se,{mode:e.mode,label:e.label,selected:o===e.mode,onClick:a,disabled:n},e.mode)))})]})}function se({label:e,mode:t,selected:o,onClick:n,disabled:i}){const r=(0,c().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",flexBasis:0,flexGrow:1},button:{padding:10,borderRadius:10,outline:o?`2px solid ${e.blue.border.accentPrimary}`:`1px solid ${e.border.primary}`,outlineOffset:o?-2:-1,position:"relative",width:"100%",background:e.background.primary,border:"none",height:78},title:{fontSize:l().A.isMobile?17:14,fontWeight:b().Wy.regular,color:o?e.text.primary:e.text.secondary}})),[o]);return(0,le.jsxs)("div",{style:r.container,children:[(0,le.jsx)("button",{type:"button",role:"radio","aria-checked":o,onClick:()=>{i||n(t)},style:r.button,disabled:i,children:(0,le.jsx)(ce,{mode:t,selected:o})}),(0,le.jsx)("div",{style:r.title,children:e})]})}function ce({mode:e,selected:t}){const o=(0,c().IS)((e=>({previewTopBar:{position:"absolute",insetInlineStart:1,top:1,width:"calc(100% - 2px)",height:"35%",background:t?e.pill.outline.blue:e.pill.selected.background.white,borderStartStartRadius:10,borderStartEndRadius:10},previewLineContainerBase:{display:"flex",gap:5,position:"absolute"},previewLineBase:{height:6,borderRadius:150,background:t?e.pill.outline.blue:e.pill.selected.background.white},circle:{position:"absolute",insetInlineStart:10,top:"calc(35% - 7px)",width:15,height:15,borderRadius:"50%",background:t?e.palette.uiBlue[400]:e.icon.quaternary}})),[t]);function n(e){return(0,le.jsx)("div",{style:{...o.previewLineBase,width:e?`${e}%`:"100%"}})}return"compact"===e?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("div",{style:o.previewTopBar}),(0,le.jsx)("div",{style:o.circle}),(0,le.jsxs)("div",{style:{...o.previewLineContainerBase,top:40,flexDirection:"row",width:"75%"},children:[n(),n(),n()]}),(0,le.jsxs)("div",{style:{...o.previewLineContainerBase,flexDirection:"row",top:52,width:"60%"},children:[n(),n()]})]}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("div",{style:o.previewTopBar}),(0,le.jsx)("div",{style:o.circle}),(0,le.jsxs)("div",{style:{...o.previewLineContainerBase,flexDirection:"column",top:40,width:"100%"},children:[n(65),n(25),n(40)]})]})}var de=()=>o(45941),pe=()=>o(828973);const ue=function({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().O$)(e.normalizedFormatStore),n=(0,s().O$)(e.isFullScreenStore),i=(0,s().K8)((()=>ge(e)),[e]),r=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state;return(0,de().i3)({limit:t.inline_collection_first_load_limit,isGrouped:Boolean(t.collection_group_by),viewType:ge(e)})}(e)),[e]),l=(0,s().O$)(e.canConfigureBlockStore);return o.collection_group_by||"feed"===i||!n&&"calendar"!==i?(0,le.jsx)(pe().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Load limit",id:"database.viewSettings.layoutTab.firstLoadLimitSetting"}),selectedKey:r,popupStyle:{minWidth:190},options:de().X9.map((e=>({key:e,type:"button",title:e.limit}))),onChange:o=>function(e,t,o){const n=o.collectionViewStore();if(!n)return;T().createAndCommit({userAction:"CollectionSettingsFirstLoadLimit.handleFirstLoadLimitChange",environment:t,canUndo:!0,perform:t=>{A().zA({stores:[n],update:{inline_collection_first_load_limit:e},transaction:t})}}),o.groupsStore.resetAllLimits(),(0,w().X)({environment:t,collectionContextStore:o,action:"set_first_load_limit"})}(o,t,e),disabled:!l}):null};function ge(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}var me=()=>o(95441),Se=()=>o(497222),ye=()=>o(380468),ve=()=>o(35091),fe=()=>o(542984),he=()=>o(174638);const xe=(0,h().YK)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}}),be=6;function we({collectionContextStore:e,showDoneButton:t,collectionSettingsStore:o,onDoneClick:i,menuType:d,analytics:u}){const S=(0,c().DP)(),y=(0,a().v3)(),v=(0,n.useCallback)((t=>(0,le.jsx)(Ue,{collectionContextStore:e,viewType:t},`view-type-button-${t}`)),[e]),f=(0,s().O$)(e.normalizedQueryStore),x=(0,s().O$)(e.normalizedSchemaStore),b=(0,s().O$)(e.normalizedFormatStore),C=(0,s().O$)(e.isFullScreenStore),_=(0,s().O$)(e.isRootChildStore),j=(0,s().K8)((()=>e.collectionViewBlockStore()),[e]),k=(0,s().K8)((()=>Ae(e)),[e]),M=(0,s().K8)((()=>Boolean(_e(e))),[e]),B="table"===k||"board"===k||"gallery"===k||"calendar"===k,P="table"===k,V=Object.keys(x).filter((e=>{const t=x[e];return t&&(0,g().$)(t)})),K=Object.keys(x).filter((e=>{const t=x[e];return t&&(0,m().iB)(t)})),O="timeline"===k&&V.length>0,F=(0,s().K8)((()=>"timeline"===k&&V.length>1&&j&&!(0,U().s)(j.id)),[k,V,j]),z=(0,s().K8)((()=>null==j?void 0:j.isCollectionViewPageWithContent()),[j]),E="timeline"===k&&Boolean(null==f?void 0:f.timeline_by_end),R="calendar"===k&&V.length>0,D="map"===k&&K.length>0,W="calendar"===k,X="calendar"===k,H="board"===k,Q="feed"===k,N=(0,s().K8)((()=>(0,I().DG)({environment:y,isFullScreen:C,isRootChild:_})),[y,C,_]),G="timeline"===k&&Boolean(b.timeline_show_table)&&N,Y="timeline"===k&&N,Z=(0,s().K8)((()=>null==j?void 0:j.hasSingleSourceAndNoLinkedCollections()),[j]),q=(0,s().K8)((()=>!("collectionTypedView"===e.contextType||e.isInHomeWidgetStore.state||C&&Z)),[e,C,Z]),J=(0,s().K8)((()=>{var e;return((null==j||null===(e=j.getCollectionViewIds())||void 0===e?void 0:e.length)??0)>1?(0,le.jsx)(h().sA,{defaultMessage:"Show data source titles",id:"database.viewSettings.layoutTab.showDataSourceTitles.title"}):(0,le.jsx)(h().sA,{defaultMessage:"Show data source title",id:"database.viewSettings.layoutTab.showDataSourceTitle.title"})}),[j]),ee=(0,s().K8)((()=>!e.isInHomeWidgetStore.state&&"chart"!==k),[e.isInHomeWidgetStore,k]),ne="chart"!==k,ie=(0,s().O$)(e.canConfigureBlockStore),se=(0,s().O$)(e.shouldShowSourceStore),ce="chart"===k,de="chart"===k,pe=(0,r().X)("place_property"),ge=(0,r().X)("db_grid_view"),Se=(0,r().X)("card_customization"),ye=(0,c().IS)((e=>({doneButtonSection:{paddingTop:0,marginBottom:te().Qm}})),[]);if(!j)return null;const ve=q||M||P||B||O||E||F||R||X||W||Y||G||H||Q||ee||ne||D,xe=q?(0,le.jsx)(L().A,{title:J,focused:!1,on:se,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=!t.shouldShowSourceStore.state;T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:e,canUndo:!0,perform:e=>{const o=t.collectionViewBlockStore();o&&A().zA({stores:[o],update:{hide_inline_collection_name:!n},transaction:e})}}),(0,w().X)({environment:e,collectionContextStore:t,action:"toggle_show_collection_title"})}(y,e),disabled:!ie,textWrapperStyle:{opacity:1}}):void 0,be=Se&&("board"===k||"gallery"===k),we=["table","board","timeline","calendar","list","gallery","chart","feed"];pe&&we.push("map"),ge&&we.push("dashboard");const Ce=we.length%3==0?3:4;return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)($().A,{topBorder:!1,shouldShowBottomDivider:l().A.isMobile,children:(0,le.jsx)("div",{style:{...l().A.isMobile?{background:S.background.primary,width:"100%",padding:te().X1}:{width:"100%",paddingLeft:te().Qm,paddingRight:te().Qm,paddingTop:te().Qm}},children:(0,le.jsx)("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Ce}, 1fr)`,gap:8},children:we.map(v)})})}),ve?!Se||"board"!==k&&"gallery"!==k?(0,le.jsxs)($().A,{extraPadding:!0,children:[xe,M?(0,le.jsx)(We,{collectionContextStore:e}):void 0,P?(0,le.jsx)(Oe,{collectionContextStore:e}):void 0,ne?(0,le.jsx)(Le,{collectionContextStore:e}):void 0,B?(0,le.jsx)(Fe,{collectionContextStore:e}):void 0,O?(0,le.jsx)(ke,{collectionContextStore:e}):void 0,E?(0,le.jsx)(Me,{collectionContextStore:e}):void 0,F?(0,le.jsx)(ze,{collectionContextStore:e}):void 0,R?(0,le.jsx)(Ie,{collectionContextStore:e}):void 0,D?(0,le.jsx)(Be,{collectionContextStore:e}):void 0,X?(0,le.jsx)(Ee,{collectionContextStore:e}):void 0,W?(0,le.jsx)(Re,{collectionContextStore:e}):void 0,Y?(0,le.jsx)(he().u,{collectionContextStore:e}):void 0,G?(0,le.jsx)(Pe,{collectionContextStore:e,collectionSettingsStore:o}):void 0,H?(0,le.jsx)(Ve,{collectionContextStore:e,collectionSettingsStore:o}):void 0,Q?(0,le.jsx)(De,{collectionContextStore:e,collectionSettingsStore:o}):void 0,ee?(0,le.jsx)($e,{collectionContextStore:e}):void 0,(0,le.jsx)(ue,{collectionContextStore:e})]}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)($().A,{extraPadding:!0,children:[xe,ne?(0,le.jsx)(Le,{collectionContextStore:e}):void 0,H?(0,le.jsx)(Ve,{collectionContextStore:e,collectionSettingsStore:o}):void 0,ee?(0,le.jsx)($e,{collectionContextStore:e}):void 0,(0,le.jsx)(ue,{collectionContextStore:e})]}),(0,le.jsxs)($().A,{extraPadding:!0,topBorder:!0,children:[M?(0,le.jsx)(We,{collectionContextStore:e}):void 0,(0,le.jsx)(Fe,{collectionContextStore:e}),be?(0,le.jsx)(ae,{environment:y,collectionContextStore:e}):void 0]})]}):void 0,"createView"!==d||z?void 0:(0,le.jsx)($().A,{extraPadding:!0,disableMobileBorders:!0,topBorder:!0,style:{marginTop:4},children:(0,le.jsx)(fe().Q,{forceShow:!0,buttonStyle:{paddingTop:2,paddingBottom:2},overrideOnClickBehavior:()=>{re().a2({collectionSettingsStore:o,item:{type:"linkToDatabase",existingCollectionStore:void 0,analytics:u}})},collectionContextStore:e,collectionSettingsStore:o})}),t?(0,le.jsx)($().A,{extraPadding:!0,disableMobileBorders:!0,style:ye.doneButtonSection,children:(0,le.jsx)(p().A,{colorPalette:"blue",style:{display:"flex",margin:`0 ${te().Qm}px`},onClick:()=>{null==i||i(),function(e,t,o){re().R8({collectionSettingsStore:t,item:{type:"main"}}),(0,w().X)({environment:e,collectionContextStore:o,action:"click_create_view_done"})}(y,o,e)},children:de?(0,le.jsx)(h().sA,{defaultMessage:"Edit chart",id:"database.viewSettings.createViewTab.editChartButton.title"}):(0,le.jsx)(h().sA,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}):void 0,ce?(0,le.jsx)($().A,{extraPadding:!0,topBorder:!1,style:{paddingTop:0},children:(0,le.jsx)(me().A,{href:(0,oe().x)("guides.charts"),title:(0,le.jsx)(h().sA,{defaultMessage:"Learn about charts",id:"database.viewSettings.layoutTab.learnAboutCharts.title"}),analyticsFrom:"view_settings_layout"})}):void 0]})}function Ce(e){const{currentViewType:t,theme:o}=e,n=t?q().C9[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,type:"button",title:(0,q().LA)(e),body:(0,le.jsxs)(le.Fragment,{children:[(0,q()._t)(e),n&&t&&e===n?(0,le.jsx)("div",{style:{marginTop:2,fontWeight:500,color:o.blue.text.accentPrimary},children:(0,le.jsx)(h().sA,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:Z().to[t]}})}):void 0]}),icon:(0,q().qg)(e)({width:f().Ev.default,height:f().Ev.default,fill:o.text.secondary})})))}function Ae(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function _e(e){return Z().Jx[Ae(e)]}function je(e){return Z().wm[Ae(e)]}function Te(e){return Z().dD[Ae(e)]}function ke({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,a().WS)(),n=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by}),[e]),i=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e]),r=(0,s().O$)(e.canConfigureBlockStore),l=(0,s().O$)(e.normalizedSchemaStore),c=(0,s().K8)((()=>e.collectionViewStore()),[e]),d=(0,s().K8)((()=>e.collectionStore()),[e]),p=(0,s().K8)((()=>null==d?void 0:d.getSchema()),[d]),u=(0,s().K8)((()=>null==d?void 0:d.getFormat()),[d]);if(!(n&&c&&d&&u&&p))return null;const m=l[n];return m?(0,le.jsx)(E().A,{popupType:o?D().nl.SlideUp:D().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,le.jsx)(Se().A,{title:i?(0,le.jsx)(h().sA,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,le.jsx)(h().sA,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!r,showChevron:!0,right:(0,le.jsx)("div",{style:b().RC,children:m.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let r;return r=o?{menuType:ee().gu.ActionSheet}:{menuType:ee().gu.Popup,width:300},(0,le.jsx)(R().A,{...r,children:(0,le.jsx)(ye().A,{schema:p,format:u,currentProperty:n,getProperties:()=>Object.keys(l).filter((e=>{const t=l[e];return t&&(0,g().$)(t)})),onAccept:o=>{o&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:t,canUndo:!0,perform:e=>{(0,P().f)({collectionViewStore:c,update:{timeline_by:o},transaction:e})}}),i.close(),(0,w().X)({environment:t,collectionContextStore:e,action:"update_timeline_by",original_view_type:void 0,property_type:m.type}))}})})}}):null}function Me({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,a().WS)(),n=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e]),i=(0,s().O$)(e.canConfigureBlockStore),r=(0,s().O$)(e.normalizedSchemaStore),l=(0,s().K8)((()=>e.collectionViewStore()),[e]),c=(0,s().K8)((()=>e.collectionStore()),[e]),d=(0,s().K8)((()=>null==c?void 0:c.getSchema()),[c]),p=(0,s().K8)((()=>null==c?void 0:c.getFormat()),[c]);if(!(n&&l&&c&&p&&d))return null;const u=r[n];return u?(0,le.jsx)(E().A,{popupType:o?D().nl.SlideUp:D().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,le.jsx)(Se().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:u.name,disabled:!i,...e}),render:i=>{let a;return a=o?{menuType:ee().gu.ActionSheet}:{menuType:ee().gu.Popup,width:300},(0,le.jsx)(R().A,{...a,children:(0,le.jsx)(ye().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&(0,g().$)(t)})),onAccept:o=>{o&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:t,canUndo:!0,perform:e=>{(0,P().f)({collectionViewStore:l,update:{timeline_by_end:o},transaction:e})}}),i.close(),(0,w().X)({environment:t,collectionContextStore:e,action:"update_timeline_by_end",original_view_type:void 0,property_type:u.type}))}})})}}):null}function Ie({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,a().WS)(),n=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.calendar_by}),[e]),i=(0,s().O$)(e.canConfigureBlockStore),r=(0,s().O$)(e.normalizedSchemaStore),l=(0,s().K8)((()=>e.collectionViewStore()),[e]),c=(0,s().K8)((()=>e.collectionStore()),[e]),d=(0,s().K8)((()=>null==c?void 0:c.getSchema()),[c]),p=(0,s().K8)((()=>null==c?void 0:c.getFormat()),[c]);if(!(n&&l&&c&&p&&d))return null;const u=r[n];return u?(0,le.jsx)(E().A,{popupType:o?D().nl.SlideUp:D().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,le.jsx)(Se().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!i,showChevron:!0,right:(0,le.jsx)("div",{style:b().RC,children:u.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let a;return a=o?{menuType:ee().gu.ActionSheet}:{menuType:ee().gu.Popup,width:300},(0,le.jsx)(R().A,{...a,children:(0,le.jsx)(ye().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&(0,g().$)(t)})),onAccept:o=>{o&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:t,canUndo:!0,perform:e=>{(0,P().f)({collectionViewStore:l,update:{calendar_by:o},transaction:e})}}),i.close(),(0,w().X)({environment:t,collectionContextStore:e,action:"update_calendar_by",original_view_type:void 0,property_type:u.type}))}})})}}):null}function Be({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,a().WS)(),n=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.map_by}),[e]),i=(0,s().O$)(e.canConfigureBlockStore),r=(0,s().O$)(e.normalizedSchemaStore),l=(0,s().K8)((()=>e.collectionViewStore()),[e]),c=(0,s().K8)((()=>e.collectionStore()),[e]),d=(0,s().K8)((()=>null==c?void 0:c.getSchema()),[c]),p=(0,s().K8)((()=>null==c?void 0:c.getFormat()),[c]);if(!(n&&l&&c&&p&&d))return null;const u=r[n];return u?(0,le.jsx)(E().A,{popupType:o?D().nl.BottomSheet:D().nl.Popup,bottomSheetInitialState:"half",alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,le.jsx)(Se().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Map by",id:"database.viewSettings.layoutTab.showMapByProperty.title"}),disabled:!i,showChevron:!0,right:(0,le.jsx)("div",{style:b().RC,children:u.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let a;return a=o?{menuType:ee().gu.Modal}:{menuType:ee().gu.Popup,width:300},(0,le.jsx)(R().A,{...a,children:(0,le.jsx)(ye().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&"place"===t.type})),onAccept:o=>{o&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderMapBySetting",environment:t,canUndo:!0,perform:e=>{(0,P().f)({collectionViewStore:l,update:{map_by:o},transaction:e})}}),i.close(),(0,w().X)({environment:t,collectionContextStore:e,action:"update_map_by",original_view_type:void 0,property_type:u.type}))}})})}}):null}function Pe({collectionContextStore:e,collectionSettingsStore:t}){const o=(0,a().v3)(),n=((0,s().O$)(e.normalizedFormatStore).timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,i=(0,s().O$)(e.canConfigureBlockStore);return(0,le.jsx)(Se().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,le.jsx)(h().sA,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:n}}),onClick:()=>{re().a2({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:"table"}}),(0,w().X)({environment:o,collectionContextStore:e,action:"click_timeline_table_properties"})},disabled:!i})}function Ve(e){const{collectionContextStore:t,collectionSettingsStore:o}=e,i=(0,a().v3)(),r=(0,s().O$)(t.normalizedFormatStore),l=r.board_columns_by,d=(0,s().K8)((()=>(0,M().FS)(r)),[r]),p=(0,s().O$)(t.normalizedSchemaStore),u=(0,s().O$)(t.canConfigureBlockStore),g=(0,n.useCallback)((()=>{if(!l)return null;const e=p[l.property];if(!e)return null;re().a2({collectionSettingsStore:o,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),(0,w().X)({environment:i,collectionContextStore:t,action:"click_board_group_by",original_view_type:void 0,property_type:e.type})}),[t,o,i,l,p]),m=(0,n.useCallback)((()=>re().ut({environment:i,collectionContextStore:t})),[t,i]),S=(0,c().IS)((()=>({textWrapper:{opacity:1}})),[]);if(!l)return null;const y=p[l.property];return y?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(Se().A,{title:(0,le.jsx)(h().sA,{id:"database.viewSettings.layoutTab.boardGroupByButton.title",defaultMessage:"Group by"}),showChevron:!0,right:y.name,onClick:g,disabled:!u}),(0,le.jsx)(L().A,{title:(0,le.jsx)(h().sA,{id:"database.viewSettings.groupTab.colorColumns",defaultMessage:"Color columns"}),on:!d,focused:!1,onClick:m,disabled:!u,textWrapperStyle:S.textWrapper})]}):null}function Ke(e,t,o){const n=o.collectionViewStore();if(!n)return;const{serverCommitResult:i}=T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:t,canUndo:!0,perform:t=>{A().zA({stores:[n],update:{calendar_view_range:e},transaction:t})}}),r=W().XX.state,l=o.dateRangeStartStore.state,a=o.dateRangeEndStore.state,{newDateRangeStart:s,newDateRangeEnd:c}=function(e){const{newViewRange:t,oldCalendarStart:o,startOfWeekSetting:n}=e;if("month"===t){const e=(0,y().mK)(new Date((0,y().to)(o,n)).getDate()>7?(0,y().Mw)(o):o,n);return{newDateRangeStart:e,newDateRangeEnd:(0,y().to)((0,y().AQ)({date:e,monthsToAdd:1}),n)}}return{newDateRangeStart:(0,y().mK)(Date.now(),n),newDateRangeEnd:(0,y().to)(Date.now(),n)}}({oldCalendarStart:l,newViewRange:e,startOfWeekSetting:r});(0,B().r)({dateRangeStart:s,dateRangeEnd:c,collectionContextStore:o}),i.then((()=>{(0,w().X)({environment:t,collectionContextStore:o,action:"update_calendar_view_range"}),(0,k().LQ)({newCalendarStart:s,newCalendarEnd:c,collectionViewId:n.id,currentUserId:t.currentUser.id})})).catch((()=>{(0,B().r)({dateRangeStart:l,dateRangeEnd:a,collectionContextStore:o})}))}function Oe({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().O$)(e.canConfigureBlockStore),n=(0,s().K8)((()=>!Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines)),[e]);return(0,le.jsx)(L().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:n,focused:!1,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=Boolean(t.normalizedFormatStore.state.hide_table_vertical_lines);j().au({environment:e,collectionViewStore:o,currentValue:n}),(0,w().X)({environment:e,collectionContextStore:t,action:"toggle_table_vertical_lines"})}(t,e),disabled:!o,textWrapperStyle:{opacity:1}})}function Fe({collectionContextStore:e}){var t;const o=(0,a().v3)(),i=(0,s().O$)(e.normalizedFormatStore),l=(0,s().O$)(e.canConfigureBlockStore),c=(0,r().X)("card_customization"),d=(0,s().K8)((()=>Ae(e)),[e]),p=i.table_wrap||"calendar"===d&&!0===(null==i||null===(t=i.calendar_properties)||void 0===t||null===(t=t.find((e=>"title"===e.property)))||void 0===t?void 0:t.wrap),u=(0,n.useMemo)((()=>{switch(d){case"table":return(0,le.jsx)(h().sA,{defaultMessage:"Wrap all columns",id:"database.viewSettings.layoutTab.tableWrapAllColumns"});case"calendar":return(0,le.jsx)(h().sA,{defaultMessage:"Wrap page titles",id:"database.viewSettings.layoutTab.calendarWrapTitle"});default:return c?(0,le.jsx)(h().sA,{defaultMessage:"Wrap all content",id:"database.viewSettings.layoutTab.tableWrapAllContent"}):(0,le.jsx)(h().sA,{defaultMessage:"Wrap all properties",id:"database.viewSettings.layoutTab.tableWrapAllProperties"})}}),[d,c]),g=(0,n.useCallback)((()=>{const t=e.collectionViewStore();t&&(j().g({environment:o,collectionViewStore:t,currentValue:Boolean(p)}),(0,w().X)({environment:o,collectionContextStore:e,action:"set_first_load_limit"}),(0,w().X)({environment:o,collectionContextStore:e,action:"toggle_table_wrap_cells"}))}),[e,o,p]);return(0,le.jsx)(L().A,{title:u,on:Boolean(p),focused:!1,onClick:g,disabled:!l,textWrapperStyle:{opacity:1}})}function ze({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e.normalizedQueryStore]),n=(0,s().O$)(e.canConfigureBlockStore);return(0,le.jsx)(L().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(o),onClick:()=>function(e,t){const o=t.normalizedQueryStore.state,n=t.collectionViewStore(),i=null==o?void 0:o.timeline_by,r=null==o?void 0:o.timeline_by_end;if(!i||!n)return;const l=r?void 0:i;T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:e,canUndo:!0,perform:e=>{(0,P().f)({collectionViewStore:n,update:{timeline_by_end:l??null},transaction:e})}}),(0,w().X)({environment:e,collectionContextStore:t,action:"toggle_timeline_separate_dates"})}(t,e),disabled:!n,textWrapperStyle:{opacity:1}})}function Ee({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().O$)(e.canConfigureBlockStore),i=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}(e)),[e]),r=(0,s().K8)((()=>"peekModeFormat"===e.settingsStore.state.openButtonPopup),[e]),l=(0,n.useMemo)((()=>["month","week"].map((e=>({key:e,type:"button",title:H().A.formatMessage(xe[e])})))),[]);return(0,le.jsx)(pe().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:e,openButtonPopup:r,selectedKey:i,popupStyle:{minWidth:190},options:l,onChange:o=>Ke(o,t,e),disabled:!o})}function Re({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().K8)((()=>{var t;return Boolean((null===(t=e.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("calendar_show_weekends").getValue())??!0)}),[e]),i=(0,n.useCallback)((()=>{const n=e.collectionViewStore();n&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleToggleShowWeekends",environment:t,canUndo:!0,perform:e=>{A().zA({stores:[n],update:{calendar_show_weekends:!o},transaction:e})}}),(0,w().X)({environment:t,collectionContextStore:e,action:"toggle_calendar_show_weekends"}))}),[e,t,o]);return(0,le.jsx)(ve().A,{title:(0,le.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,le.jsx)(h().sA,{defaultMessage:"Show weekends",id:"database.viewSettings.layoutTab.showWeekends.title"})}),showChevron:!1,switcherProps:{on:o,noColor:!1},onClick:i})}function De({collectionContextStore:e,collectionSettingsStore:t}){const o=(0,a().v3)(),i=(0,s().O$)(e.canConfigureBlockStore),r=(0,s().K8)((()=>{var t;return(null===(t=e.collectionViewStore())||void 0===t||null===(t=t.getFormatStore())||void 0===t?void 0:t.getKeyValue("feed_show_author_byline"))??!0}),[e]),l=(0,n.useCallback)((()=>{const t=e.collectionViewStore();t&&(T().createAndCommit({userAction:"CollectionSettingsProperty.FeedOptions.handleToggleShowAuthorByline",environment:o,canUndo:!0,perform:e=>{A().zA({stores:[t],update:{feed_show_author_byline:!r},transaction:e})}}),(0,w().X)({environment:o,collectionContextStore:e,action:"toggle_feed_show_author_byline"}))}),[e,o,r]);return(0,le.jsx)(L().A,{title:(0,le.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,le.jsx)(h().sA,{defaultMessage:"Show author byline",id:"database.viewSettings.layoutTab.feedShowAuthorByline.title"})}),focused:!1,on:r,onClick:l,disabled:!i})}function $e({collectionContextStore:e}){const t=(0,c().DP)(),o=(0,a().v3)(),n=(0,s().O$)(e.canConfigureBlockStore),r=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Ae(e);return(null==t?void 0:t.collection_peek_mode)||q().C9[o]}(e)),[e]),l=(0,s().K8)((()=>"peekModeFormat"===e.settingsStore.state.openButtonPopup),[e]),d=(0,s().K8)((()=>Ae(e)),[e]);return(0,le.jsx)(pe().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:e,openButtonPopup:l,selectedKey:r,popupStyle:{minWidth:190},options:Ce({currentViewType:d,theme:t}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:()=>function(e,t){(0,C().m)({environment:e,collectionContextStore:t,from:"collection_view_settings"})}(o,e),onChange:t=>function(e,t,o){const n=o.collectionViewStore();if(!n||!e)return;T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:t,canUndo:!0,perform:t=>{A().zA({stores:[n],update:{collection_peek_mode:e},transaction:t})}});const r=(0,X().sl)(o);if(r&&r.view_type&&(r&&r.view_type&&(0,i().DO_NOT_USE_trackLegacy)(t,"update_peek_mode_format",{peek_mode:e,from:"collection_view_settings",...r}),ie().default.state.open&&ie().default.state.collectionContextStore===o)){const{mainEditorCurrentBlockStore:o}=ne().default.state,n="full_page"===e?(0,J().Ay)({store:ie().default.state.targetStore,fullyQualified:!1,pageVisitSource:u().y8.Expand}):(0,z().wy)({environment:t,store:ie().default.state.targetStore,mainEditorCurrentBlockStore:o,collectionContextStore:ie().default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,ie().getPeekModeFromCollectionPeekModeFormat)(e)});n&&(0,_().navigate)({environment:t,url:n})}}(t,o,e),disabled:!n})}function Le({collectionContextStore:e}){const t=(0,a().v3)(),o=(0,s().O$)(e.canConfigureBlockStore),i=(0,s().K8)((()=>e.shouldShowPageIcon()??!0),[e]),r=(0,n.useCallback)((()=>{const o=e.collectionViewStore();o&&(T().createAndCommit({userAction:"CollectionSettingsProperty.TitleOptions.handleToggleShowIcon",environment:t,canUndo:!0,perform:e=>{A().zA({stores:[o],update:{show_page_icon:!i},transaction:e})}}),(0,w().X)({environment:t,collectionContextStore:e,action:"toggle_show_page_icon"}))}),[e,t,i]);return(0,le.jsx)(L().A,{title:(0,le.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,le.jsx)(h().sA,{defaultMessage:"Show page icon",id:"database.viewSettings.layoutTab.showPageIcon.title"})}),focused:!1,on:i,onClick:r,disabled:!o})}function We({collectionContextStore:e}){const t=(0,c().DP)(),o=(0,a().v3)(),n=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=_e(e);if(o&&t)return t[o]}(e)),[e]),i=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=je(e);if(o&&t){const e=t[o];if(e)return e}return v().fi}(e)),[e]),r=(0,s().K8)((()=>!l().A.isMobile||"board"===Ae(e)),[e]),d=(0,s().O$)(e.canConfigureBlockStore),p=(0,s().K8)((()=>function(e,t,o){const n=o.normalizedSchemaStore.state;let i=Object.keys(n);i=x().Ul(i,(e=>{const t=n[e];return t?t.name:""}));const r=x().oE(i.map((e=>{const o=n[e];if(o&&"file"===o.type)return{key:{type:"property",property:e},type:"button",title:o.name,icon:(0,le.jsx)(S().zB,{type:o.type,icon:o.icon,size:l().A.isMobile?16:14,theme:t,style:{fill:t.icon.primary}})}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,type:"button",title:G(e)}))),...r]}(0,t,e)),[o,t,e]),u=(0,s().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Te(e);if(o&&t)return t[o]}(e)),[e]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(pe().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:n,popupStyle:{minWidth:190},options:p,onChange:t=>function(e,t,o){const n=_e(o),i=o.collectionViewStore();n&&i&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:t,canUndo:!0,perform:t=>{A().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,w().X)({environment:t,collectionContextStore:o,action:"update_cover_format"}))}(t,o,e),disabled:!d}),r?(0,le.jsx)(pe().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:i,popupStyle:{minWidth:190},options:["small","medium","large"].map((e=>({key:e,type:"button",title:Y(e)}))),onChange:t=>function(e,t,o){const n=je(o),i=o.collectionViewStore();n&&i&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:t,canUndo:!0,perform:t=>{A().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,w().X)({environment:t,collectionContextStore:o,action:"toggle_cover_size_format"}))}(t,o,e),disabled:!d}):void 0,n?(0,le.jsx)(L().A,{title:(0,le.jsx)(h().sA,{defaultMessage:"Fit image",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===u,focused:!1,onClick:()=>function(e,t){const o=Te(t),n=t.collectionViewStore(),i=t.normalizedFormatStore.state;o&&n&&(T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:e,canUndo:!0,perform:e=>{A().zA({stores:[n],update:{[o]:"contain"===i[o]?"cover":"contain"},transaction:e})}}),(0,w().X)({environment:e,collectionContextStore:t,action:"toggle_cover_aspect_format"}))}(o,e),disabled:!d,textWrapperStyle:{opacity:1}}):void 0]})}function Ue({viewType:e,collectionContextStore:t}){const o=(0,c().DP)(),n=(0,a().v3)(),i=(0,s().K8)((()=>Ae(t)),[t]),r=(0,s().O$)(t.canConfigureBlockStore),l=i===e,p=l||!r;return(0,le.jsxs)(d().Ay,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%",flexGrow:0,flexShrink:0,fontSize:11,borderRadius:be,padding:6,boxShadow:`inset 0 0 0 1px ${o.border.primary}`,color:o.text.secondary,fill:o.text.secondary,...l&&{boxShadow:`inset 0 0 0 2px ${o.blue.border.accentPrimary}`,color:o.blue.text.accentPrimary,fill:o.blue.icon.accentPrimary,fontWeight:500}},disabled:p,onClick:()=>{T().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:n,canUndo:!0,perform:o=>{!function(e){const{environment:t,collectionContextStore:o,newViewType:n,transaction:i}=e,r=o.collectionViewStore(),l=o.collectionViewBlockStore(),a=o.collectionStore();if(!r||!l)return;if(n===r.getType()||"page"===n||"form_editor"===n)return;"chart"===n&&V().Z({environment:t,collectionContextStore:o,collectionViewId:r.id,from:"collection_view_type_change"});const s=r.getType();K().zv({store:r,data:{type:n},transaction:i}),(0,F().W)({environment:t,collectionContextStore:o,collectionViewStore:r,collectionStore:a,oldViewType:s,newViewType:n,transaction:i}),(0,O().S)({collectionContextStore:o})}({environment:n,collectionContextStore:t,newViewType:e,transaction:o})}}),(0,w().X)({environment:n,collectionContextStore:t,action:"change_type",original_view_type:i,new_view_type:e})},children:[Z().ZU[e]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,le.jsx)("div",{style:{textAlign:"center"},children:Z().to[e]})]},e)}},168953:(e,t,o)=>{o.d(t,{C:()=>l});o(296540);var n=()=>o(401497),i=()=>o(663247),r=o(474848);function l({icon:e,containerStyle:t}){const o=(0,n().IS)((e=>({aliasIcon:{position:"absolute",width:14,height:14,insetInlineEnd:-2,bottom:-2}})),[]);return(0,r.jsx)("div",{style:t,children:(0,r.jsxs)("div",{style:{position:"relative"},children:[e,(0,r.jsx)(a,{iconFn:i().arrowDiagonalUpRightFillIcon,baseStyles:o.aliasIcon})]})})}function a({iconFn:e,baseStyles:t}){const o=(0,n().IS)((e=>({icon:{...t,fill:"dark"===e.mode?e.text.primary:"#3E3C38"},iconBorder:{...t,stroke:e.background.elevated,strokeWidth:3,strokeLinejoin:"round"}})),[t]);return(0,r.jsxs)(r.Fragment,{children:[e(o.iconBorder),e(o.icon)]})}},174638:(e,t,o)=>{o.d(t,{A:()=>de,u:()=>ce});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(59226),l=()=>o(726637),a=()=>o(484714),s=()=>o(56366),c=()=>o(401497),d=()=>o(929219),p=()=>o(252291),u=()=>o(631524),g=()=>o(443239),m=()=>o(898244),S=()=>o(713998),y=()=>o(852424),v=()=>o(651124),f=()=>o(906380),h=()=>o(514608),x=()=>o(288739),b=()=>o(617668),w=()=>o(236262),C=()=>o(340498),A=()=>o(69708),_=()=>o(496603),j=()=>o(534177),T=()=>o(284371),k=()=>o(436696),M=()=>o(896628),I=()=>o(231297),B=()=>o(654062),P=()=>o(736767),V=()=>o(897941),K=()=>o(551882),O=()=>o(760217),F=()=>o(439264),z=()=>o(57232),E=()=>o(348501),R=()=>o(285790),D=()=>o(939740),$=()=>o(89924),L=()=>o(574036),W=()=>o(859428),U=()=>o(940071),X=()=>o(987017),H=()=>o(379771),Q=()=>o(673730),N=()=>o(267584),G=()=>o(553965),Y=()=>o(232930),Z=()=>o(696746),q=()=>o(147503),J=()=>o(430171),ee=()=>o(527438),te=()=>o(647702),oe=()=>o(334684),ne=()=>o(95441),ie=()=>o(497222),re=o(474848);const le=(0,A().YK)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.propertiesTab.inputPlaceholder"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"}}),ae=o(757695).Store.createClass("",{name:"InputStore"});function se(e){switch(e){case"editPropertiesAndVisibility":return{disableDatabaseEditing:!1,disableViewEditing:!1};case"editPropertiesOnly":return{disableDatabaseEditing:!1,disableViewEditing:!0};case"propertyVisibilityOnly":return{disableDatabaseEditing:!0,disableViewEditing:!1};default:(0,j().HB)(e)}}function ce(e){const{collectionContextStore:t,onClick:o}=e,n=(0,a().v3)(),i=(0,s().O$)(t.normalizedFormatStore),r=Boolean(i.timeline_show_table),l=(0,s().O$)(t.permissionScopesStore);return(0,re.jsx)(L().A,{title:(0,re.jsx)(A().sA,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:r,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(I().createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:n,canUndo:!0,perform:t=>{M().zA({stores:[e],update:{timeline_show_table:!r,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),(0,k().X)({environment:n,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!l.canConfigureBlock,textWrapperStyle:{opacity:1}})}const de=function({collectionContextStore:e,timelineViewTab:t,collectionSettingsStore:n,propertiesMenuType:i}){const r=(0,a().v3)(),c=(0,s().uB)(void 0,o(970585).A),d=(0,s().uB)(void 0,ae),p=(0,s().O$)(d),u=(0,s().K8)((()=>(0,ee().jx)({collectionContextStore:e})),[e]),g=(0,s().K8)((()=>(0,ee().ZI)({timelineViewTab:t,collectionContextStore:e})),[t,e]),m=(0,s().K8)((()=>(0,o(378518).DG)({environment:r,isFullScreen:e.isFullScreenStore.state,isRootChild:e.isRootChildStore.state})),[r,e]),{disableDatabaseEditing:S,disableViewEditing:y}=se(i);return(0,re.jsxs)(o(735695).Ay,{collectionSettingsStore:n,title:(0,re.jsx)(A().sA,{defaultMessage:"Properties",id:"database.viewSettings.propertiesTab.title"}),header:(0,re.jsx)($().A,{children:(0,re.jsx)(o(419357).Ay,{focusInitial:!l().A.isMobile,value:p,showClearButton:!0,onChange:e=>{d.setState(e.target.value),c.setState({...c.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})},placeholder:o(972435).A.formatMessage(le.inputPlaceholder)})}),footer:!S&&(0,re.jsx)(me,{collectionContextStore:e,collectionSettingsStore:n,propertiesMenuType:i,timelineViewTab:t}),children:[!y&&"timeline"===u&&m?(0,re.jsx)(Ce,{collectionSettingsStore:n,collectionContextStore:e,timelineViewTab:t,inputStore:d,propertiesMenuType:i}):void 0,g?(0,re.jsx)(je,{collectionContextStore:e,collectionSettingsStore:n,inputStore:d,menuListStore:c,formatKey:g,propertiesMenuType:i}):void 0]})};function pe({viewType:e}){return"table"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"map"===e||"page"===e||"chart"===e||"form_editor"===e?null:"feed"===e?(0,re.jsx)(A().sA,{defaultMessage:"Shown in feed",id:"database.viewSettings.propertiesTab.shownInFeedTitle"}):"chat"===e||"custom"===e||"dashboard"===e?null:void(0,j().HB)(e)}function ue({viewType:e}){return"table"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"map"===e||"page"===e||"chart"===e||"form_editor"===e?null:"feed"===e?(0,re.jsx)(A().sA,{defaultMessage:"Hidden in feed",id:"database.viewSettings.propertiesTab.hiddenInFeedTitle"}):"chat"===e||"custom"===e||"dashboard"===e?null:void(0,j().HB)(e)}function ge(e,t,o){const{formatKey:n,visibility:i}=e,r=t.collectionViewStore();if(!r)return;const l=t.normalizedFormatStore.state[n]||[];let a=l.filter((e=>Boolean(e.visible))),s=l.filter((e=>!e.visible));fe.includes(n)&&(a=he(a),s=he(s));const c=[...a.map((e=>({...e,visible:i}))),...s.map((e=>({...e,visible:i})))];I().createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:o,canUndo:!0,perform:e=>{M().zA({stores:[r],update:{[n]:c},transaction:e})}})}function me({collectionContextStore:e,collectionSettingsStore:t,propertiesMenuType:o,timelineViewTab:n}){const l=(0,a().v3)(),c=(0,s().O$)(e.permissionScopesStore),d=(0,s().K8)((()=>"timeline"===(0,ee().jx)({collectionContextStore:e})&&"table"===n&&!(0,ee().ZF)({collectionContextStore:e})),[e,n]),p=(0,s().K8)((()=>{const t=e.collectionViewBlockStore();return t&&(0,Z().Nh)(t.id)}),[e]),u=(0,r().X)("jira_notion_only_properties"),g=c.canConfigureCollection&&!d&&(!c.isExternallyImportedAndSyncedCollection||u)&&!p,m=(0,i.useCallback)((()=>{(0,J().c)({environment:l,collectionContextStore:e})}),[l,e]),S=(0,s().O$)(e.isInHomeWidgetStore),{disableDatabaseEditing:y}=se(o);return(0,re.jsxs)($().A,{topBorder:!0,extraPadding:!0,children:[g?(0,re.jsx)(ie().A,{icon:b().plusIcon,title:(0,re.jsx)(A().sA,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:m}):void 0,S||y?void 0:(0,re.jsx)(Se,{collectionContextStore:e,collectionSettingsStore:t,timelineViewTab:n}),(0,re.jsx)(ne().A,{href:(0,Y().x)("guides.databaseProperties"),title:(0,re.jsx)(A().sA,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}function Se({collectionContextStore:e,collectionSettingsStore:t,timelineViewTab:o}){const n=(0,a().v3)(),i=(0,s().O$)(e.normalizedDeletedSchemaStore),r=Object.keys(i).length;return(0,s().O$)(e.permissionScopesStore).canConfigureCollection&&r>0?(0,re.jsx)(ie().A,{icon:w().trashIcon,title:(0,re.jsx)(A().sA,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:()=>function(e,t,o,n){o.collectionStore()&&((0,k().X)({environment:e,collectionContextStore:o,action:"click_deleted_properties"}),q().a2({collectionSettingsStore:t,item:{type:"deletedProperties",timelineViewTab:n}}))}(n,t,e,o),right:r,showChevron:!0}):null}function ye(e,t,o){const n=t.state,i=e.permissionScopesStore.state,{disableViewEditing:r}=se(o);return!r&&!l().A.isMobile&&i.canConfigureBlock&&!n}function ve(e){e.reset()}const fe=["board_properties","gallery_properties","calendar_properties"];function he(e){const t=e.find((e=>"title"===e.property));return t?[t,...e.filter((e=>"title"!==e.property))]:e}const xe=12;function be(e,t,o,n,i,r,l,a,s,c){var d;const{formatKey:u,propertyFormat:b}=e,w=n.permissionScopesStore.state,_=!b.visible,j=n.normalizedSchemaStore.state,M=(0,S()._g)({schema:j,property:b.property}),{disableDatabaseEditing:P,disableViewEditing:F}=se(s),D=ye(n,a,s)&&("title"!==b.property||!fe.includes(u)),$=!F&&("title"!==b.property||function(e,t){const o=t.normalizedFormatStore.state,n=(0,ee().jx)({collectionContextStore:t});return"board"===n?(0,v().zl)(o.board_cover):"gallery"===n?(0,v().zl)(o.gallery_cover):"timeline"===n&&("timeline_table_properties"===e||(0,v().w3)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]))}(u,n)),L=!M||"read_only"!==M.synced_permissions;let X=!P&&(0,te().K)({collectionContextStore:n,permissionScopes:w})&&(0,N().RL)({isExternallyImportedAndSyncedCollection:w.isExternallyImportedAndSyncedCollection,propertyId:b.property,collectionStore:n.collectionStore(),propertySchema:M})&&L;if(w.isSyncedCollection&&((0,g().u)(b.property)||(0,m().cC)(b.property))&&(X=!1),!M)return;const Y=!(c&&(0,oe().$)({propertyType:null==M?void 0:M.type,propertySchema:M,allowAIProperty:!1})),Z=!Y||(null===(d=M.description)||void 0===d?void 0:d.length);return{key:b.property,render:e=>(0,re.jsx)(W().A,{disableTooltip:!Z,renderTooltip:e=>(0,re.jsx)("div",{...e,style:Q().Q$,children:Y?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{children:M.name}),(0,re.jsx)("div",{style:{color:o.text.inverseSecondary},children:M.description})]}):(0,re.jsx)(A().sA,{id:"collectionSettings.editProperty.offlineTooltip",defaultMessage:"Go online to edit property"})}),placement:"left",render:l=>(0,re.jsx)(O().A,{...(0,G().A)(e,l),titleStyle:D&&P?{marginInlineStart:-4}:void 0,title:(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[D?P?(0,re.jsx)(E().A,{iconStyle:{width:xe,height:xe},style:{marginInlineEnd:6,flexShrink:0},disableTooltip:!0}):(0,re.jsx)(z().A,{iconSize:xe,style:{marginInlineEnd:6,flexShrink:0}}):void 0,(0,H().b)({collectionContextStore:n,propertyId:b.property})?(0,re.jsx)(U().B,{propertyId:b.property,type:M.type,icon:M.icon,size:C().Ev.sm,theme:o,style:{icon:{fill:o.icon.primary},container:{marginInlineStart:2,flexShrink:0}}}):(0,re.jsx)(y().zB,{type:M.type,icon:M.icon,size:C().Ev.sm,theme:o,style:{fill:o.icon.primary,marginInlineStart:2,flexShrink:0}}),(0,re.jsx)("span",{style:{marginInlineStart:D?8:10,...T().RC},children:M.name}),i&&"person"===M.type?(0,re.jsx)("div",{style:{marginInlineStart:6,flexShrink:0},children:(0,re.jsx)(V().$,{collectionStore:i,property:b.property,propertySchema:M,blockStore:void 0})}):void 0,(0,m().$M)(M)&&(0,m().om)(M)?(0,re.jsx)(K().A,{}):void 0]}),right:(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[F?void 0:(0,re.jsx)(R().A,{icon:_?x().M:h().eyeFillSmallIcon,iconStyle:{width:C().Ev.sm,height:C().Ev.sm},colorVariant:_?"secondary":"primary",onClick:()=>{!function(e,t,o,n){var i;const{formatKey:r,propertyFormat:l}=e,a=o.collectionViewStore();if(!a)return;const s=o.normalizedFormatStore.state,c=(s[r]||[]).filter((e=>e.property!==l.property)),d={...l,visible:!l.visible},p=c.filter((e=>e.visible)),u=c.filter((e=>!e.visible));let g=[];g=fe.includes(r)?!0===d.visible?[...he([...p,d]),...he(u)]:[...he(p),...he([d,...u])]:[...p,d,...u];const m={...s,[r]:g};I().createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:t,canUndo:!0,perform:e=>{(0,B().F)({collectionViewStore:a,update:{format:m},transaction:e})}}),(0,k().X)({environment:t,collectionContextStore:o,action:"toggle_property_visibility",original_view_type:a.getType(),property_type:null===(i=a.getCollectionStore())||void 0===i||null===(i=i.getSchema()[d.property])||void 0===i?void 0:i.type}),ve(n)}({formatKey:u,propertyFormat:b},t,n,a)},ariaLabel:r.formatMessage(le.togglePropertyVisibilityAriaLabel),disabled:!$||!w.canConfigureBlock}),X?(0,re.jsx)(p().I,{icon:f().arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tertiary",style:{marginInlineStart:5}}):void 0]}),disabled:!(X&&Y),disabledFeedback:!Y})}),action:()=>{X&&Y&&function(e,t,o,n){var i,r,l;const a=(null===(i=n.collectionStore())||void 0===i?void 0:i.getSchema())||n.normalizedSchemaStore.state||{},{formatKey:s,propertyFormat:c}=e;(0,k().X)({environment:t,collectionContextStore:n,action:"click_property",original_view_type:null==n||null===(r=n.collectionViewStore())||void 0===r?void 0:r.getType(),property_type:null===(l=a[c.property])||void 0===l?void 0:l.type}),q().a2({collectionSettingsStore:o,item:{type:"property",formatKey:s,property:c.property}})}({formatKey:u,propertyFormat:b},t,l,n)}}}function we(e,t,o,n,i,r,l,a,s,c){const{formatKey:d,properties:p}=e;return _().oE(p.map((e=>be({formatKey:d,propertyFormat:e},t,o,n,i,r,l,a,s,c))))}function Ce({collectionSettingsStore:e,collectionContextStore:t,timelineViewTab:o,inputStore:n,propertiesMenuType:r}){const l=(0,a().v3)(),s=(0,i.useCallback)((()=>function(e){ve(e)}(n)),[n]),c=(0,i.useCallback)((o=>function(e,t,o,n,i,r){(0,k().X)({environment:t,collectionContextStore:n,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),q().dP({collectionSettingsStore:o,item:{type:"propertyVisibilityOnly"===r?"propertyVisibility":"properties",timelineViewTab:0===e?"timeline":"table"}}),ve(i)}(o,l,e,t,n,r)),[l,e,t,n,r]),d="timeline"===o?0:1;return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(X().Ay,{tabs:[(0,re.jsx)(A().sA,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,re.jsx)(A().sA,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:d,onChange:c}),"table"===o?(0,re.jsx)($().A,{extraPadding:!0,children:(0,re.jsx)(ce,{collectionContextStore:t,onClick:s})}):void 0]})}function Ae(e){const t=(0,a().v3)(),{props:o,formatKey:n,children:i,collectionContextStore:r,inputStore:l}=e,c=(0,s().O$)(r.canConfigureBlockStore),d=(0,s().O$)(l),p=(0,s().K8)((()=>"timeline_table_properties"===n?"table":(0,ee().jx)({collectionContextStore:r})),[r,n]);return(0,re.jsx)($().A,{...o,noTextOverflow:!0,title:(0,re.jsx)(ue,{viewType:p}),desktopTitleStyle:{height:19,padding:"0 4px"},mobileTitleStyle:{paddingInlineStart:0,paddingInlineEnd:0},right:!d&&c&&(0,re.jsx)(u().p,{size:"sm",shouldShrink:!0,colorPalette:"blue",style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,k().X)({environment:t,collectionContextStore:o,action:"click_show_all_properties"}),ge({formatKey:e,visibility:!0},o,t)}(n,t,r),children:(0,re.jsx)(A().sA,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:i})}function _e(e){const t=(0,a().v3)(),{formatKey:o,visibleProperties:n,hiddenProperties:i,children:r,collectionContextStore:l,inputStore:c,menuListStore:d,propertiesMenuType:p}=e,u=_().oE([...n.map((e=>"title"===e.property&&fe.includes(o)?{key:e.property,draggable:!1}:e.property)),n.length>0&&i.length>0&&{key:"group-header-hidden-property",draggable:!1},...i.map((e=>"title"===e.property&&fe.includes(o)?{key:e.property,draggable:!1}:e.property))]);return(0,s().K8)((()=>ye(l,c,p)),[l,c,p])?(0,re.jsx)(F().Ay,{direction:"vertical",keys:u,renderKey:(e,t)=>r[t],onDrop:(e,n)=>{!function(e,t,o,n){const{formatKey:i,newPropertyKeys:r}=e,l=o.collectionViewStore();if(!l)return;const a=o.normalizedFormatStore.state[i]||[],s=r.indexOf("group-header-hidden-property");let c=_().oE(r.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=a.find((t=>t.property===e));if(o)return s>=0?{...o,visible:Boolean(t<s)}:o}))),d=a.filter((e=>!r.includes(e.property)));fe.includes(i)&&(c=he(c),d=he(d));const p=[...c,...d];I().createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:t,canUndo:!0,perform:e=>{M().zA({stores:[l],update:{[i]:p},transaction:e})}}),(0,k().X)({environment:t,collectionContextStore:o,action:"reorder_properties",original_view_type:l.getType()}),n.reset()}({formatKey:o,newPropertyKeys:e},t,l,d)}}):(0,re.jsx)(re.Fragment,{children:r})}function je({formatKey:e,collectionContextStore:t,collectionSettingsStore:o,inputStore:i,menuListStore:r,propertiesMenuType:l}){const p=(0,c().DP)(),g=(0,a().v3)(),m=(0,A().tz)(),y=(0,s().O$)(t.canConfigureBlockStore),v=(0,s().O$)(t.normalizedFormatStore),f=(0,s().O$)(t.normalizedSchemaStore),h=(0,s().O$)(i),x=!(0,s().O$)(d().e),b=(0,s().K8)((()=>t.collectionStore()),[t]);let w=v[e]||[];if(h){let e=w.map((e=>{const t=(0,S()._g)({schema:f,property:e.property});return null==t?void 0:t.name}));e=n().filter(h,e).map((({original:e})=>e)),w=w.filter((t=>{const o=f[t.property];return o&&o.name&&e.includes(o.name)}))}const C=w.filter((e=>Boolean(e.visible))),j=w.filter((e=>!e.visible)),T=(0,s().K8)((()=>"timeline_table_properties"===e?"table":(0,ee().jx)({collectionContextStore:t})),[t,e]),{disableViewEditing:M}=se(l),I=(0,s().K8)((()=>we({formatKey:e,properties:C},g,p,t,b,m,o,i,l,x)),[e,C,l,g,p,t,b,m,o,i,x]),B=(0,s().K8)((()=>we({formatKey:e,properties:j},g,p,t,b,m,o,i,l,x)),[e,j,l,g,p,t,b,m,o,i,x]);return 0===w.length?(0,re.jsx)($().A,{extraPadding:!0,children:(0,re.jsx)(P().A,{caption:(0,re.jsx)(A().sA,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}):(0,re.jsx)(D().Ay,{type:D().Oh.Vertical,store:r,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:_().oE([C.length>0&&{key:"visible_and_hidden_properties",render:o=>(0,re.jsx)($().A,{...o,extraPadding:!0,noTextOverflow:!0,title:!M&&(0,re.jsx)(pe,{viewType:T}),desktopTitleStyle:{height:19},right:!h&&y&&(0,re.jsx)(u().p,{size:"sm",shouldShrink:!0,colorPalette:"blue",style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,k().X)({environment:t,collectionContextStore:o,action:"click_hide_all_properties"}),ge({formatKey:e,visibility:!1},o,t)}(e,g,t),children:(0,re.jsx)(A().sA,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:(0,re.jsx)(_e,{collectionContextStore:t,inputStore:i,menuListStore:r,formatKey:e,visibleProperties:C,hiddenProperties:j,children:o.children,propertiesMenuType:l})}),items:_().oE([...I,M?void 0:j.length>0&&{key:"group-header-hidden-property",render:o=>(0,re.jsx)(Ae,{collectionContextStore:t,inputStore:i,props:o,formatKey:e,children:(0,re.jsx)(re.Fragment,{})}),action:()=>{}},...B])},0===C.length&&j.length>0&&{key:"hidden_properties",render:o=>(0,re.jsx)(Ae,{collectionContextStore:t,inputStore:i,props:o,formatKey:e,children:(0,re.jsx)(_e,{formatKey:e,visibleProperties:C,hiddenProperties:j,children:o.children,collectionContextStore:t,inputStore:i,menuListStore:r,propertiesMenuType:l})}),items:B}])})}},321775:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(476492),i=()=>o(645302);function r(e){const t=(0,n().sl)(e.collectionContextStore);t&&t.view_type&&i().jE(e.environment,{from:e.from,from_peek_mode:e.from_peek_mode,...t,view_type:t.view_type})}},380468:(e,t,o)=>{o.d(t,{A:()=>y});o(944114),o(898992),o(354520),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(252291),l=()=>o(69708),a=()=>o(496603),s=()=>o(760217),c=()=>o(939740),d=()=>o(89924),p=()=>o(250202),u=()=>o(972435),g=o(474848);const m=(0,l().YK)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function S({currentProperty:e,showNoneOption:t,showRemoveOption:S,getProperties:y,onAccept:v,inputPlaceholder:f,inputLeft:h,defaultShowPropertyCount:x,disableSortByPageFormat:b,schema:w,format:C,renderProperty:A}){const _=(0,o(484714).Y0)(),[j,T]=(0,i.useState)(""),[k,M]=(0,i.useState)(!1),I=(0,o(56366).uB)(void 0,o(970585).A),B=(0,o(722872).Tf)(),P=(0,o(401497).IS)((e=>({menuItem:{color:e.text.secondary}})),[]),[V,K]=(0,o(857437).$)(),O=(0,o(390066).L)(C,w,void 0,o(651124).jf.Page).collection_page_properties||[],F=!x||k,z=u().A.formatMessage(m.none),E=t?{key:"none",render:t=>(0,g.jsx)(s().A,{...t,isChecked:!e,title:z}),action:()=>{v(void 0)}}:void 0,R=S?{key:"remove",render:e=>(0,g.jsx)(s().A,{...e,icon:(0,g.jsx)(r().I,{icon:o(236262).trashIcon}),title:u().A.formatMessage(m.remove)}),action:()=>{v(void 0)}}:void 0,D=y();let $=D;if(b||($=a().Ul(D,(e=>O.findIndex((t=>t.property===e))))),j){const e=new Map;let t=$.map((t=>{const n=w[t],i=n?`${n.name} ${o(852353).dC[n.type]}`:"";return e.set(t,i),i}));t=n().filter(j,t).map((({original:e})=>e)),$=$.filter((o=>t.includes(e.get(o)||"")))}else!F&&x&&($=$.slice(0,x));const L=a().oE([!j||n().test(j,z)?E:void 0,...$.map((t=>function(e,t,o,n,i){const r=t[e];if(!r)return;const l={key:e,render:t=>{const o=e===n;return i?i(t,e,o,r):(0,g.jsx)(p().G,{...t,propertySchema:r,format:p().e.Name,isChecked:o})},action:()=>{o(e)}};return l}(t,w,v,e,A)))]);if(!F&&D.length>$.length&&!j){const e={key:"show_more",render:e=>(0,g.jsx)(s().A,{...e,icon:(0,g.jsx)(r().I,{icon:o(589407).ellipsisIcon}),style:P.menuItem,title:(0,g.jsx)(l().sA,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:D.length-$.length}})}),action:()=>{M(!0)}};L.push(e)}const W=L.length>0,U=Boolean(j),X=!R||W||U;X&&!W&&L.push({action:a().lQ,key:"noResults",render:e=>(0,g.jsx)(o(736767).A,{...e,caption:(0,g.jsx)(l().sA,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const H=[];if(X){const e=(0,g.jsx)(o(419357).Ay,{inputLeft:h,focusInitial:!_.isMobile||void 0,focus:!_.isMobile||void 0,value:j,onChange:e=>{T(e.target.value),I.setState({...I.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),M(!1)},placeholder:f||u().A.formatMessage(m.inputPlaceholder),...V});B?L.unshift({key:"input",render:()=>e,action:a().lQ}):H.push({key:"input",comp:(0,g.jsx)(d().A,{isInput:!0,children:e})})}return(L.length>0||R)&&H.push({key:"properties",comp:(0,g.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:0,comboboxProps:X?K:void 0,sections:[...L.length>0?[{key:"results",render:e=>(0,g.jsx)(d().A,{...e}),items:L}]:[],...R?[{key:"remove",render:e=>(0,g.jsx)(d().A,{topBorder:L.length>0,...e}),items:[R]}]:[]],store:I})}),(0,g.jsx)(g.Fragment,{children:H.map((({key:e,comp:t})=>(0,g.jsx)(i.Fragment,{children:t},e)))})}const y=i.memo(S,o(821062).A)},419178:(e,t,o)=>{o.d(t,{Q:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.4 12.95 15.2",svg:(0,o(474848).jsx)("path",{d:"M15.85 3.65a.625.625 0 1 0 0-1.25H4.15a.625.625 0 1 0 0 1.25zm-1.008 6.692a.625.625 0 0 1-.884 0l-3.333-3.333v9.966a.625.625 0 1 1-1.25 0V7.009l-3.333 3.333a.625.625 0 1 1-.884-.884l4.4-4.4a.625.625 0 0 1 .884 0l4.4 4.4a.625.625 0 0 1 0 .884"})},i=(0,o(340498).wt)("arrowLineUp",n)},430171:(e,t,o)=>{o.d(t,{c:()=>l});var n=()=>o(436696),i=()=>o(36629),r=()=>o(147503);function l(e){const{environment:t,collectionContextStore:o}=e;o.collectionStore()&&((0,n().X)({environment:t,collectionContextStore:o,action:"click_new_property"}),r().a2({collectionSettingsStore:o.settingsStore,item:{type:"propertyType",onAccept:e=>{const{propertyType:n,isSuggestedProperty:r,propertyName:l,propertyIcon:a,selectOptions:s}=e;i().nZ({environment:t,propertyType:n,isSuggestedProperty:r,propertyName:l,propertyIcon:a,selectOptions:s,collectionContextStore:o,from:"view_settings"})}}}))}},457056:(e,t,o)=>{o.d(t,{o:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 4.12 14.76 12.16",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M4.375 4.75a.625.625 0 1 0-1.25 0v5c0 1.174.951 2.125 2.125 2.125h10.491l-3.333 3.333a.625.625 0 0 0 .884.884l4.4-4.4a.625.625 0 0 0 0-.884l-4.4-4.4a.625.625 0 0 0-.884.884l3.333 3.333H5.25a.875.875 0 0 1-.875-.875z"})},i=(0,o(340498).wt)("arrowTurnDownRight",n)},514608:(e,t,o)=>{o.r(t),o.d(t,{eyeFillSmallIcon:()=>r,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"0.7 3.26 14.6 9.48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8 7.122a.875.875 0 1 1 0 1.75.875.875 0 0 1 0-1.75"}),(0,n.jsx)("path",{d:"M8 3.26c3.125 0 5.857 1.673 7.152 4.141l.065.144c.11.293.11.617 0 .91l-.065.145c-1.295 2.468-4.027 4.14-7.152 4.14-3.027 0-5.685-1.57-7.026-3.912L.848 8.6a1.29 1.29 0 0 1 0-1.199l.126-.228C2.314 4.83 4.972 3.26 8 3.26m0 2.112a2.626 2.626 0 0 0-2.625 2.626l.014.269A2.626 2.626 0 0 0 7.73 10.61l.269.014a2.626 2.626 0 0 0 2.611-2.357l.014-.269A2.626 2.626 0 0 0 8 5.372"})]})},r=(0,o(340498).wt)("eyeFillSmall",i)},542984:(e,t,o)=>{o.d(t,{Q:()=>B});var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(955363),a=()=>o(688311),s=()=>o(69708),c=()=>o(436696),d=()=>o(187820),p=()=>o(16006),u=()=>o(859428),g=(o(898992),o(672577),()=>o(564884)),m=()=>o(651124),S=()=>o(33376),y=()=>o(496603),v=()=>o(638013),f=()=>o(147503),h=()=>o(497222),x=()=>o(556048),b=()=>o(21140),w=()=>o(635676),C=()=>o(267584),A=()=>o(765957),_=()=>o(53137),j=()=>o(666803),T=o(474848);function k({environment:e,collectionSettingsStore:t,flowId:o,externalCollectionType:n,integrationIconUrl:i,site:r,botId:l,isSyncOwner:a}){return(0,T.jsx)(h().A,{icon:S().E,onClick:()=>{(0,g().u)({environment:e,event:{eventName:"external_sync_sidebar_config",eventProperties:{integration:n,actionType:"source_option_click",flowId:o,identifier:r,botId:l,isSyncOwner:a}}}),f().a2({collectionSettingsStore:t,item:{source:"external_source",type:"externalProjectsSyncSettings"}})},right:(0,T.jsxs)(b().Ye,{alignItems:"center",children:[(0,T.jsx)("img",{style:{height:12,width:12,marginInlineEnd:6},src:i,alt:"External integration icon"}),(0,T.jsx)(s().sA,{id:"database.viewSettings.mainTab.source.sourceName",defaultMessage:"{integrationName}",values:{integrationName:(0,y().ZH)(n||"")}})]}),showChevron:!0,title:(0,T.jsx)(s().sA,{defaultMessage:"Source",id:"database.viewSettings.mainTab.source.title"})})}function M({environment:e,collectionStore:t,collectionSettingsStore:o}){const i=function(e,t){const{botId:o,site:n,externalCollectionType:i,syncState:l}=(0,r().K8)((()=>{const e=null==t?void 0:t.getFormat();return{botId:null==e?void 0:e.bot_id,site:null==e?void 0:e.synced_collection_external_url,externalCollectionType:null==e?void 0:e.external_collection_type,syncState:null==e?void 0:e.sync_state}}),[t]),a=(0,r().K8)((()=>{var e;return null===(e=A().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.seen_jira_sync_source_tooltip}),[]),s=(0,r().K8)((()=>j().Ay.getFlowId()),[]),c=(0,r().K8)((()=>(0,C().Sd)()),[]),d=(0,r().K8)((()=>Boolean(_().A.externalAuthentications.state.find((t=>t.id===o&&t.user_id===e.currentUser.id)))),[o,e.currentUser.id]);if(!i)return;const p={externalCollectionType:i,botId:o,site:n,integrationIconUrl:w().l[i],isSyncOwner:d,flowId:s};switch(i){case m().uO.Jira:return{...p,shouldShowTooltip:c&&!(!0===a)&&l};case m().uO.Salesforce:default:return{...p,shouldShowTooltip:!1}}}(e,t),l=(0,n.useRef)(null);if(!i)return null;const{botId:a,site:s,integrationIconUrl:c,isSyncOwner:d,shouldShowTooltip:p,externalCollectionType:u,flowId:g}=i;return p?(0,T.jsxs)("div",{ref:l,style:{boxShadow:v().p.buttonBlueFocusRing.light,borderRadius:6},children:[(0,T.jsx)(k,{environment:e,collectionSettingsStore:o,flowId:g,externalCollectionType:u,integrationIconUrl:c,site:s,botId:a,isSyncOwner:d}),(0,T.jsx)(x().C8,{origin:l})]}):(0,T.jsx)(k,{environment:e,collectionSettingsStore:o,flowId:g,externalCollectionType:u,integrationIconUrl:c,site:s,botId:a,isSyncOwner:d})}var I=()=>o(168953);function B({collectionContextStore:e,collectionSettingsStore:t,disabled:o,overrideOnClickBehavior:g,buttonStyle:m,forceShow:S,...y}){const v=(0,i().v3)(),x=(0,s().tz)(),b=(0,r().K8)((()=>e.collectionStore()),[e]),w=(0,r().K8)((()=>null==b?void 0:b.isExternalSyncedCollection()),[b]),C=(0,r().O$)(e.canConfigureBlockStore),A=(0,r().K8)((()=>e.collectionViewBlockStore()),[e]),_=(0,r().K8)((()=>P({forceShow:S,forceDisabled:o,hasPermissionToConfigureBlock:C,collectionContextStore:e,intl:x})),[e,o,S,C,x]),j=(0,n.useMemo)((()=>{if(_.shouldRender&&_.isDisabled)return _.disabledTooltipText}),[_]),k=(0,r().K8)((()=>{const e=null==b?void 0:b.getIcon(),t=(null==b?void 0:b.getParentId())===(null==A?void 0:A.id);if(!e)return t?void 0:(0,l().arrowDiagonalUpRightIcon)({width:18,height:18,marginInlineEnd:4});const o={marginInlineEnd:4,opacity:.6};return t?(0,T.jsx)(d().B6,{icon:e,iconRecordCategory:"collection",isEmptyPage:!1,size:20,disabled:!0,style:o}):(0,T.jsx)(I().C,{icon:(0,T.jsx)(d().B6,{icon:e,iconRecordCategory:"collection",isEmptyPage:!1,size:20,disabled:!0}),containerStyle:o})}),[b,A]);return w&&b&&C?(0,T.jsx)(M,{environment:v,collectionStore:b,collectionSettingsStore:t}):b&&A&&_.shouldRender?(0,T.jsx)(u().A,{placement:"left",disableTooltip:void 0===j,renderTooltip:()=>j,render:o=>(0,T.jsx)(h().A,{...o,...y,icon:a().h,title:(0,T.jsx)(s().sA,{defaultMessage:"Source",id:"database.viewSettings.mainTab.sourceButton.title"}),showChevron:!0,right:(0,T.jsxs)(T.Fragment,{children:[k,(0,T.jsx)(p().A,{store:b})]}),textWrapperStyle:{flexShrink:0},rightStyle:{flexShrink:1},disabled:_.isDisabled,buttonStyle:m,onClick:()=>{g?g():((0,c().X)({environment:v,collectionContextStore:e,action:"click_source"}),f().a2({collectionSettingsStore:t,item:{type:"source"}}))}})}):null}function P(e){const{forceShow:t,forceDisabled:o,hasPermissionToConfigureBlock:n,collectionContextStore:i,intl:r}=e,l=i.collectionStore(),a=i.collectionViewBlockStore();if(!l||!a)return{shouldRender:!1};const s=function(e){const{forceShow:t,collectionStore:o,collectionViewBlockStore:n}=e;return!!t||!(n.isCollectionViewPageWithContent()||!o.isSyncedCollection()&&o.isSystemCollection())}({forceShow:t,collectionStore:l,collectionViewBlockStore:a});if(!s)return{shouldRender:!1};const c=function(e){const{forceDisabled:t,hasPermissionToConfigureBlock:o,collectionViewBlockStore:n,intl:i}=e;return t||!o?{isDisabled:!0,disabledTooltipText:void 0}:n.hasSingleSourceAndNoLinkedCollections()&&n.getCollectionViewIds().length<=1?{isDisabled:!0,disabledTooltipText:i.formatMessage({defaultMessage:"Add another view to change the source",id:"database.viewSettings.mainTab.sourceButton.disabledMessage.singleSourceSingleView"})}:{isDisabled:!1}}({forceDisabled:o,hasPermissionToConfigureBlock:n,collectionViewBlockStore:a,intl:r});return{shouldRender:s,...c}}},551882:(e,t,o)=>{o.d(t,{A:()=>p});o(296540);var n=()=>o(484714),i=()=>o(56366),r=()=>o(970236),l=()=>o(69708),a=()=>o(68465),s=()=>o(765957),c=()=>o(411671),d=o(474848);function p(e){const{message:t}=e,o=(0,n().v3)();return(0,i().K8)((()=>{const e=s().default.state.mainEditorCurrentBlockStore,t=e&&c().A.getMode(o,e);return(0,a().ZE)(t)}),[o])?(0,d.jsx)(r().E,{color:"purple",style:{padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,...e.style},content:t??(0,d.jsx)(l().sA,{id:"aiBadgeComponent.label",defaultMessage:"AI"})}):null}},633904:(e,t,o)=>{o.d(t,{l:()=>h,t:()=>x});o(16280);var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(912720),a=()=>o(534177),s=()=>o(231297),c=(o(898992),o(737550),()=>o(199378)),d=()=>o(496603),p=()=>o(696418);function u(e,t){var o,n;const i=null==e?void 0:e.getModel(),r=null==t?void 0:t.getModel();if(!t||!r)return!0;if(i&&(null===(o=i.getProperties())||void 0===o?void 0:o.name)!==(null===(n=r.getProperties())||void 0===n?void 0:n.name))return!0;return!(!i||i.getStatus()===r.getStatus())||(!!function(e,t){const o=null==e?void 0:e.getModel(),n=t.getModel();if(!n)return!0;if((0,a().O9)(o)){if(o.isEventType()&&n.isEventType()){const e=o.getEventConfiguration(),t=n.getEventConfiguration();return!(0,d().n4)(e,t)}if(o.isRecurrenceType()&&n.isRecurrenceType()){const e=o.getRecurrence(),t=n.getRecurrence();return!(0,d().n4)(e,t)}return!o.isButtonType()||!n.isButtonType()}if(n.isEventType()){const e=n.getEventConfiguration();return!1!==e.pagesAdded||"none"!==e.pagePropertiesEdited.type}if(n.isRecurrenceType())return!0;if(n.isButtonType())return!1;(0,a().HB)(n)}(e,t)||!!function(e,t){const o=t.getSpaceId();if(!o)return!1;if((0,a().O9)(e)){const n=e.getActionIds(),i=t.getActionIds();return n.length!==i.length||!(0,d().n4)(n,i)||n.some((n=>{const i={id:n,spaceId:o,table:c().SC},r=p().b.createChildStore(e,i).getModel(),l=p().b.createChildStore(t,i).getModel();return!(0,a().O9)(r)||!(0,a().O9)(l)||!(0,d().n4)(r.getConfig(),l.getConfig())}))}return t.getActionIds().length>0}(e,t))}var g=()=>o(486674),m=()=>o(841696),S=()=>o(246125),y=()=>o(6731),v=()=>o(765957),f=()=>o(790392);function h(e){const t=new(m().Z)({deadlockTimeoutMs:s().DEADLOCK_WARNING_TIMEOUT_MS});return{performResult:e.perform(t),serverCommitResult:Promise.resolve(void 0),transactionId:t.id}}function x(e){const{automationId:t,spaceId:o,defaultValue:c,persist:d}=e,p=(0,i().v3)(),m=(0,r().K8)((()=>{var e;return null===(e=v().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),h=(0,n.useMemo)((()=>{if(t&&o)return{id:t,table:l().yB,spaceId:o}}),[t,o]),x=(0,S().l)("useUnpersistedAutomationStore",{cacheFallback:p.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0}),b=(0,n.useMemo)((()=>{if(!h||d)return;const e=x.getEntry({pointer:h,userId:m});if(!(0,a().O9)(e)&&m){if(!c)throw new Error("create is true but no defaultValue provided");x.setRecord({pointer:h,userId:m},{role:"editor",value:c})}return new(f().d)(p,h,{inMemoryRecordCache:x})}),[c,p,d,h,x,m]),w=(0,r().K8)((()=>{const e=(0,g().a)();if(h&&e)return f().d.createChildStore(e,h)}),[h]),C=d?w:b,A=(0,r().K8)((()=>!d&&u(w,b)),[d,w,b]),{createAndCommit:_}=(0,y().D)({unpersistedInMemoryRecordCache:x}),j=(0,n.useCallback)((e=>d?s().createAndCommit({...e,canUndo:!0,environment:p}):_(e)),[_,p,d]);return{maybePersistedTransactionActions:{createAndCommit:j},maybePersistedAutomationStore:C,hasUnpersistedChanges:A}}},635676:(e,t,o)=>{o.d(t,{l:()=>r});var n=()=>o(148307),i=()=>o(651124);const r={[i().uO.Jira]:n().A.images.externalIntegrations.jiraPng,[i().uO.Salesforce]:n().A.images.externalIntegrations.salesforcePng}},636740:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{r:()=>n})},647702:(e,t,o)=>{o.d(t,{K:()=>n});o(581454);function n({collectionContextStore:e,permissionScopes:t}){return"collectionTypedView"!==e.contextType&&t.canConfigureCollection}},911724:(e,t,o)=>{o.d(t,{A:()=>p,v:()=>d});o(898992),o(354520);var n=o(296540),i=()=>o(564884),r=()=>o(484714),l=()=>o(56366),a=()=>o(546461),s=o(474848);const c=(0,n.createContext)({collectionStore:void 0,currentDraggingActionId:void 0,disabled:!0,maybePersistedTransactionActions:{createAndCommit:o(633904).l},editorPlacement:{type:"inline"},editorWidth:300,suppressActionErrors:[],collapsedActionIds:[],hideDragHandle:!1,cantSaveDueToError:!1,toggleActionIdCollapsed:()=>{}});function d(e){const t=(0,r().v3)(),{automationStore:o}=(0,a().EC)(),d=(0,l().K8)((()=>o.getActionIds()),[o]),[p,u]=(0,n.useReducer)(((e,n)=>{const r=e.includes(n);return(0,i().u)({environment:t,event:{eventName:"automation_action_collapse_toggle",eventProperties:{collapsed:!r,automation_action_id:n,automation_id:o.id}}}),r?e.filter((e=>e!==n)):[...e,n]}),e.defaultCollapseActions?d:[]);return(0,s.jsx)(c.Provider,{value:{...e.value,collapsedActionIds:p,toggleActionIdCollapsed:u},children:e.children})}c.displayName="AutomationEditorContext";const p=c},940071:(e,t,o)=>{o.d(t,{B:()=>c});o(296540);var n=()=>o(401497),i=()=>o(852424),r=()=>o(280746),l=()=>o(769145),a=()=>o(379771),s=o(474848);function c(e){var t,o,c;const{type:d,icon:p,size:u,propertyId:g,style:m,theme:S}=e,y=(0,a().Q)(g),v={bottom:(null==m||null===(t=m.overlay)||void 0===t?void 0:t.bottom)??-2,insetInlineStart:(null==m||null===(o=m.overlay)||void 0===o?void 0:o.insetInlineStart)??10},f=(null==m||null===(c=m.overlay)||void 0===c?void 0:c.iconSize)??12,h=(0,n().IS)((()=>{var e,t,o;return{container:{position:"relative",display:"grid",alignItems:"center",justifyContent:"center",marginInlineStart:null==m||null===(e=m.container)||void 0===e?void 0:e.marginInlineStart,flexShrink:null==m||null===(t=m.container)||void 0===t?void 0:t.flexShrink},icon:null!=m&&null!==(o=m.icon)&&void 0!==o&&o.fill?{fill:m.icon.fill}:{},overlayWrapper:{position:"absolute",bottom:v.bottom,insetInlineStart:v.insetInlineStart,width:f+2,height:f+2,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1}}}),[m,f,v.bottom,v.insetInlineStart]);return(0,s.jsxs)("span",{style:h.container,children:[(0,s.jsx)(i().zB,{type:d,icon:p,size:u,theme:S,style:h.icon}),y?(0,s.jsx)("span",{style:h.overlayWrapper,children:"jira"===y?(0,r().jiraIcon)({width:f,height:f,stroke:S.background.primary,strokeWidth:1,paintOrder:"stroke fill",vectorEffect:"non-scaling-stroke"}):(0,l().salesforceIcon)({width:f,height:f,stroke:S.background.primary,strokeWidth:1,paintOrder:"stroke fill",vectorEffect:"non-scaling-stroke"})}):null]})}}}]);