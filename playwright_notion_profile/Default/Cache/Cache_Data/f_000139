"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49268],{56394:(e,t,o)=>{o.d(t,{A:()=>d});o(296540);var n=()=>o(484714),i=()=>o(401497),r=()=>o(718827),s=()=>o(606712),l=()=>o(668725),a=o(474848);function d(e){const{icon:t,title:o,on:d,disabled:c,hasDiff:u,wrapStyle:p,innerStyle:m,hideChevron:v}=e,{isMobile:f}=(0,n().Y0)(),g=(0,i().IS)((e=>({container:{borderRadius:14,marginInlineEnd:6,display:"inline-flex",...u&&{position:"relative"},...p},filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:f?28:24,lineHeight:f?"28px":"24px",padding:"0 8px",color:e.text.secondary,...d&&{color:e.blue.text.accentPrimary,borderColor:e.blue.border.strong,background:e.blue.background.secondary},...c&&{color:e.blue.text.disabled,borderColor:e.blue.border.strong,background:e.blue.background.secondary},...m},hovered:d?{background:(0,s().R)({color:e.blue.background.secondary,mode:e.mode})}:{},pressed:d?{background:(0,s().y)({color:e.blue.background.secondary,mode:e.mode})}:{},chevron:{width:10,marginInlineStart:4,marginTop:1,fill:c?e.blue.icon.disabled:d?e.blue.icon.accentPrimary:e.icon.tertiary},diffDot:{position:"absolute",top:-2,insetInlineEnd:-2,background:e.orange.icon.accentPrimary,border:`1px solid ${e.background.primary}`,width:9,height:9,borderRadius:9}})),[u,p,f,d,c,m]);return(0,a.jsxs)("div",{style:g.container,children:[(0,a.jsxs)(r().Ay,{disabled:c,style:g.filterPill,hoveredStyle:g.hovered,pressedStyle:g.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,o,v?void 0:(0,l().b)(g.chevron)]}),u?(0,a.jsx)("div",{style:g.diffDot}):void 0]})}},129546:(e,t,o)=>{o.d(t,{X:()=>d,r:()=>c});o(581454);var n=()=>o(604995),i=()=>o(161479),r=()=>o(496603),s=()=>o(559506);const l=20,a=20;async function d(e,t){const{store:o,activityIds:n,spaceId:d,filterActivityTypes:c,filterDateRange:p,navigableBlockId:m,collectionIds:v,authorId:f,source:g}=t,h=r().$1(n),y="person_profile"===g&&f?await s().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:d,authorId:f,limit:a}}):await s().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:d,navigableBlock:m?{id:m,spaceId:(0,i().e)(void 0)}:void 0,collections:v?v.map((e=>({id:e,spaceId:(0,i().e)(void 0)}))):void 0,endingBeforeId:h,limit:l,activityTypes:c,...u(p),authorId:f}});if("failed"===y.type)throw y.error;const x=y.data.activityIds;o.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:x.concat(n)})))}async function c(e,t){const{store:o,activityIds:n,spaceId:d,filterActivityTypes:c,filterDateRange:p,navigableBlockId:m,collectionIds:v,authorId:f,source:g}=t,h=r().HV(n),y="person_profile"===g&&f?await s().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:d,startingAfterId:h,authorId:f,limit:a}}):await s().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:d,navigableBlock:m?{id:m,spaceId:(0,i().e)(void 0)}:void 0,collections:v?v.map((e=>({id:e,spaceId:(0,i().e)(void 0)}))):void 0,startingAfterId:h,limit:l,activityTypes:c,...u(p),authorId:f}});if("failed"===y.type)throw y.error;const x=y.data.activityIds;o.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:n.concat(x),hasOlderActivities:x.length>0})))}function u(e){var t,o;const i=null!==(t=e.ending)&&void 0!==t&&t.start_date?n().C6.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(o=e.starting)&&void 0!==o&&o.start_date?n().C6.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:i?n().K1({date:i,daysToAdd:1}):void 0}}},224239:(e,t,o)=>{o.d(t,{L:()=>n});class n extends(()=>o(757695))().Store{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},297401:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const t=(0,o(484714).v3)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginInlineEnd:-12,marginTop:-12,marginBottom:-12,paddingInlineEnd:12,paddingTop:12,paddingBottom:12}},{onClick:r,disabled:s}=e,{device:l}=t,a=l.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,n.jsx)(o(285790).A,{icon:o(931121).J,onClick:r,disabled:s,disableBackground:!0,style:a})}},384100:(e,t,o)=>{o.d(t,{l5:()=>s,z5:()=>r});var n=()=>o(798880),i=()=>o(870092);function r({userId:e,currentSpaceStore:t}){return i().L.createChildStore(t,{table:n().oo,id:e})}function s(e){const{blockStore:t,actorPointer:o}=e;if(o.table===n().oo&&null!=t&&t.isDefined())return i().L.createChildStore(t,{table:n().oo,id:o.id})}},423817:(e,t,o)=>{o.d(t,{J:()=>s});o(581454),o(296540);var n=()=>o(401497),i=()=>o(710149),r=o(474848);function s(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const o=(0,n().IS)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginInlineEnd:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),s=[...Array(t)].map(((e,t)=>(0,r.jsxs)("div",{style:o.skeletonSection,children:[(0,r.jsx)(i().A,{style:o.skeletonCircle}),(0,r.jsxs)("div",{style:{width:"80%"},children:[(0,r.jsx)(i().A,{style:{width:"80%",...o.skeletonRect,marginTop:0}}),(0,r.jsx)(i().A,{style:{width:"50%",...o.skeletonRect}}),(0,r.jsx)(i().A,{style:{width:"60%",...o.skeletonRect}}),(0,r.jsx)(i().A,{style:{width:"50%",...o.skeletonRect}})]})]},t)));return(0,r.jsx)("div",{children:s})}},435761:(e,t,o)=>{o.d(t,{LN:()=>b,T3:()=>f,gc:()=>C,sj:()=>x,ww:()=>m,xJ:()=>h});o(57145),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(854150),l=()=>o(765957),a=()=>o(95758),d=()=>o(999830),c=()=>o(51781);function u(e){const{teamTypes:t}=e,o=(0,i().v3)(),s=(0,r().K8)((()=>{var t;return e.userId??(null===(t=l().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]),a=(0,r().K8)((()=>e.spaceStore??l().default.state.sidebarSpaceStore),[e.spaceStore]);return(0,n.useEffect)((()=>{void 0!==s&&void 0!==a&&(0,c().VO)({userId:s,spaceId:a.id,teamTypes:t,environment:o,canTruncateRecordMap:null==e?void 0:e.canTruncateRecordMap,sort:null==e?void 0:e.sort})}),[s,a,t,o,null==e?void 0:e.canTruncateRecordMap,null==e?void 0:e.sort]),(0,r().K8)((()=>{if(void 0===s||void 0===a)return{teams:[],isLoading:!0,isError:!1};const{teams:e,isLoading:o,isError:n}=d().q.readTeams(s,a.id,t);return{teams:e,isLoading:o,isError:n}}),[s,a,t])}const p=new Set(["Joined"]);function m(e){const{userId:t,spaceStore:o}=e||{};return u({userId:t,spaceStore:o,teamTypes:p})}const v=new Set(["UnjoinedActive"]);function f(e){const{userId:t,spaceStore:o}=e||{};return u({userId:t,spaceStore:o,teamTypes:v,canTruncateRecordMap:null==e?void 0:e.canTruncateRecordMap,sort:null==e?void 0:e.sort})}const g=new Set(["Joined","UnjoinedActive"]);function h(e){const{userId:t,spaceStore:o}=e||{};return u({userId:t,spaceStore:o,teamTypes:g})}const y=new Set(["Joined","UnjoinedActive","Archived"]);function x(e){const{userId:t,spaceStore:o}=e||{};return u({userId:t,spaceStore:o,teamTypes:y})}function b(e){const{userId:t,spaceStore:o}=e,{teams:i,isLoading:s,isError:a}=m({userId:t,spaceStore:o}),d=(0,r().K8)((()=>{var e;return new Map(((null===(e=l().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.getJoinedTeams())??[]).map(((e,t)=>[e,t])))}),[]);return{teams:(0,n.useMemo)((()=>i.toSorted(((e,t)=>(d.get(e.id)??1/0)-(d.get(t.id)??1/0)))),[i,d]),isLoading:s,isError:a}}function C(e){const{teams:t}=e,o=(0,r().K8)((()=>e.spaceStore??l().default.state.sidebarSpaceStore),[e.spaceStore]);return o?t.map((({id:e,type:t,membershipSummary:n})=>({store:a().h.createChildStore(o,{table:s().yK,id:e}),type:t,membershipSummary:n}))):[]}},539174:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.37 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M10.442 6.558a.625.625 0 0 0-.884 0l-5.4 5.4a.625.625 0 1 0 .884.884L10 7.884l4.958 4.958a.625.625 0 1 0 .884-.884z"})},i=(0,o(340498).wt)("arrowChevronSingleUp",n)},549169:(e,t,o)=>{o.d(t,{Z:()=>l});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var n=()=>o(56366),i=()=>o(435761),r=()=>o(646736),s=()=>o(981342);function l(e){const{environment:t,spaceStore:o,userId:l,userPermissionGroupIds:a}=e,d=(0,n().K8)((()=>null==o?void 0:o.isReady()),[o]),{spaceUserStore:c,isSpaceUserStoreReady:u}=(0,n().K8)((()=>{const e=(0,r().sE)(o,l);return{spaceUserStore:e,isSpaceUserStoreReady:null==e?void 0:e.isReady()}}),[o,l]),{teams:p,isLoading:m}=function({environment:e,spaceStore:t,spaceUserStore:o,userId:r,userPermissionGroupIds:l}){const{teams:a,isLoading:d}=(0,i().xJ)({spaceStore:t}),c=(0,i().gc)({spaceStore:t,teams:a}),u=(0,n().K8)((()=>{const e=c.filter((e=>e.store.isMemberOrGuest(r,l||new Set,null==o?void 0:o.getModel())));return(0,s().M9)(e).map((e=>e.store))}),[c,l,r,o]);return{teams:u,isLoading:d}}({environment:t,spaceStore:o,spaceUserStore:c,userId:l,userPermissionGroupIds:a});return{teams:p,isLoading:!d||!u||m}}},563884:(e,t,o)=>{o.d(t,{k:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("calendar",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.24902 14.7764H12.6621C14.1455 14.7764 14.918 14.0107 14.918 12.5479V4.22852C14.918 2.76562 14.1455 2 12.6621 2H3.24902C1.77246 2 1 2.75879 1 4.22852V12.5479C1 14.0107 1.77246 14.7764 3.24902 14.7764ZM3.24219 13.416C2.6748 13.416 2.36035 13.1221 2.36035 12.5205V6.23145C2.36035 5.62988 2.6748 5.33594 3.24219 5.33594H12.6689C13.2363 5.33594 13.5508 5.62988 13.5508 6.23145V12.5205C13.5508 13.1221 13.2363 13.416 12.6689 13.416H3.24219ZM6.63965 7.69434H7.04297C7.28906 7.69434 7.37109 7.61914 7.37109 7.37988V6.97656C7.37109 6.73047 7.28906 6.65527 7.04297 6.65527H6.63965C6.39355 6.65527 6.31152 6.73047 6.31152 6.97656V7.37988C6.31152 7.61914 6.39355 7.69434 6.63965 7.69434ZM8.875 7.69434H9.27832C9.51758 7.69434 9.59961 7.61914 9.59961 7.37988V6.97656C9.59961 6.73047 9.51758 6.65527 9.27832 6.65527H8.875C8.62891 6.65527 8.54688 6.73047 8.54688 6.97656V7.37988C8.54688 7.61914 8.62891 7.69434 8.875 7.69434ZM11.1035 7.69434H11.5068C11.7529 7.69434 11.835 7.61914 11.835 7.37988V6.97656C11.835 6.73047 11.7529 6.65527 11.5068 6.65527H11.1035C10.8643 6.65527 10.7822 6.73047 10.7822 6.97656V7.37988C10.7822 7.61914 10.8643 7.69434 11.1035 7.69434ZM4.41113 9.89551H4.80762C5.05371 9.89551 5.13574 9.82031 5.13574 9.57422V9.1709C5.13574 8.93164 5.05371 8.85645 4.80762 8.85645H4.41113C4.16504 8.85645 4.08301 8.93164 4.08301 9.1709V9.57422C4.08301 9.82031 4.16504 9.89551 4.41113 9.89551ZM6.63965 9.89551H7.04297C7.28906 9.89551 7.37109 9.82031 7.37109 9.57422V9.1709C7.37109 8.93164 7.28906 8.85645 7.04297 8.85645H6.63965C6.39355 8.85645 6.31152 8.93164 6.31152 9.1709V9.57422C6.31152 9.82031 6.39355 9.89551 6.63965 9.89551ZM8.875 9.89551H9.27832C9.51758 9.89551 9.59961 9.82031 9.59961 9.57422V9.1709C9.59961 8.93164 9.51758 8.85645 9.27832 8.85645H8.875C8.62891 8.85645 8.54688 8.93164 8.54688 9.1709V9.57422C8.54688 9.82031 8.62891 9.89551 8.875 9.89551ZM11.1035 9.89551H11.5068C11.7529 9.89551 11.835 9.82031 11.835 9.57422V9.1709C11.835 8.93164 11.7529 8.85645 11.5068 8.85645H11.1035C10.8643 8.85645 10.7822 8.93164 10.7822 9.1709V9.57422C10.7822 9.82031 10.8643 9.89551 11.1035 9.89551ZM4.41113 12.0898H4.80762C5.05371 12.0898 5.13574 12.0146 5.13574 11.7754V11.3721C5.13574 11.126 5.05371 11.0508 4.80762 11.0508H4.41113C4.16504 11.0508 4.08301 11.126 4.08301 11.3721V11.7754C4.08301 12.0146 4.16504 12.0898 4.41113 12.0898ZM6.63965 12.0898H7.04297C7.28906 12.0898 7.37109 12.0146 7.37109 11.7754V11.3721C7.37109 11.126 7.28906 11.0508 7.04297 11.0508H6.63965C6.39355 11.0508 6.31152 11.126 6.31152 11.3721V11.7754C6.31152 12.0146 6.39355 12.0898 6.63965 12.0898ZM8.875 12.0898H9.27832C9.51758 12.0898 9.59961 12.0146 9.59961 11.7754V11.3721C9.59961 11.126 9.51758 11.0508 9.27832 11.0508H8.875C8.62891 11.0508 8.54688 11.126 8.54688 11.3721V11.7754C8.54688 12.0146 8.62891 12.0898 8.875 12.0898Z"})})},568317:(e,t,o)=>{o.d(t,{_:()=>r,p:()=>s});var n=()=>o(401497),i=()=>o(284371);function r(){return(0,n().IS)((e=>({listModule:{display:"flex",flexDirection:"column",gap:4},truncationButton:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexDirection:"row",flexGrow:0,alignSelf:"flex-start"},truncationIcon:{width:20,fill:e.icon.secondary},truncationLabel:{fontWeight:400},rowContainer:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexGrow:0,alignSelf:"flex-start",maxWidth:"100%"},rowLabel:{fontWeight:400},hoveredStyle:{borderRadius:"6px"}})),[])}function s(){return(0,n().IS)((e=>({card:{maxWidth:400,minWidth:280,padding:12},bio:{display:"flex",alignItems:"center",gap:12,overflow:"hidden"},bioLink:{overflow:"hidden"},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:i().Wy.medium},profileTitle:{fontWeight:i().Wy.semibold},profileSubtitle:{...i().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[])}},575695:(e,t,o)=>{o.d(t,{A:()=>M});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),l=()=>o(252291),a=()=>o(998531),d=()=>o(30537),c=()=>o(631524),u=()=>o(160432),p=()=>o(563884),m=()=>o(69708),v=()=>o(534177),f=()=>o(56394),g=()=>o(780865),h=()=>o(760217),y=()=>o(417392),x=()=>o(427711),b=()=>o(297401),C=()=>o(978625),S=()=>o(806754),I=()=>o(821879),j=o(474848);const M=function({onChange:e,onMenuDismiss:t,showButtons:n,title:s,value:l,disabled:a,dateFormat:d,icon:c,mode:u,focused:p}){const m=(0,i().v3)(),v=(0,r().uB)(void 0,o(35394).A);(0,o(852507).l)((()=>{L({value:l},v)}));const{device:f}=m;return f.isMobile?(0,j.jsx)(_,{onChange:e,onMenuDismiss:t,showButtons:n,title:s,value:l,disabled:a,dateFormat:d,icon:c,mode:u,store:v}):(0,j.jsx)(V,{onChange:e,onMenuDismiss:t,showButtons:n,title:s,value:l,disabled:a,dateFormat:d,focused:p,icon:c,mode:u,store:v})};function A(e){const{device:t}=e;return t.isMobile?d().n.SlideUp:d().n.Popup}function T(e){return{buttonMenuItem:{color:e.text.secondary},activeMenuItem:{color:e.text.primary}}}function k(e){e.preventDefault&&e.preventDefault()}function w(e){e({starting:void 0,ending:void 0})}function P(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginInlineEnd:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginInlineEnd:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}function R(e,t){t||e.setState({...e.state,isOpen:!0,focus:"starting"})}function B(e,t,o,n,i){const{temporaryDateRange:r}=o.state;g().a9(e)||(i||t(r),o.setState({...o.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function L(e,t){if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function D({disabled:e,icon:t,title:o,store:i}){const r=(0,n.useCallback)((()=>R(i,e)),[i,e]);return(0,j.jsx)(h().A,{disabled:e,focused:!1,icon:(0,j.jsx)(l().I,{icon:t}),title:o,onClick:r})}function F({disabled:e,title:t,value:o,dateFormat:r,onChange:s,store:l}){const a=(0,m().tz)(),d=(0,i().v3)(),c=(0,n.useCallback)((()=>R(l,e)),[l,e]),u=P(d),v=(0,j.jsxs)("div",{style:u.summary,children:[(0,p().k)(u.iconActiveMobile),g().tX(o,a,r)]});return(0,j.jsx)(C().A,{disabled:e,onClick:c,onClickClear:()=>w(s),label:t,title:v})}function E({disabled:e,value:t,dateFormat:o,focused:r,onChange:l,store:a}){const d=(0,m().tz)(),c=(0,s().DP)(),u=(0,i().v3)(),v=(0,n.useCallback)((()=>R(a,e)),[a,e]),f=P(u),y=T(c),x={...f.menuItem,...y.activeMenuItem},C=g().tX(t,d,o),S=(0,j.jsx)(b().A,{onClick:()=>w(l),disabled:e});return(0,j.jsx)(h().A,{focused:r,disabled:e,icon:(0,p().k)(f.iconActiveDesktop),title:C,right:S,isTokenTitle:!0,alignIconTop:!0,onClick:v,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:x})}function U({disabled:e,title:t,icon:o,focused:r,mode:a,store:d}){const c=(0,s().DP)(),u=(0,i().v3)(),p=(0,n.useCallback)((()=>R(d,e)),[d,e]),m=P(u),v=T(c),f={...m.menuItem,...v.buttonMenuItem,...a===I().C.Pill?{width:"fit-content",border:"solid 1px",paddingInlineStart:0,paddingInlineEnd:0,borderRadius:20,fontSize:12}:{}};return(0,j.jsx)(h().A,{focused:r,disabled:e,icon:(0,j.jsx)(l().I,{icon:o}),title:t,onClick:p,style:f})}function H({disabled:e,value:t,title:o,store:i}){const r=(0,n.useCallback)((()=>R(i,e)),[i,e]);return(0,j.jsx)(f().A,{on:Boolean(t.starting||t.ending),icon:(0,p().k)({width:16,marginInlineEnd:6,fill:"currentColor"}),title:(0,j.jsx)("span",{children:o}),onClick:r})}function O({onChange:e,onMenuDismiss:t,showButtons:o,title:i,value:s,store:l}){const a=(0,n.useCallback)((n=>B(n,e,l,t,o)),[e,l,t,o]),d=(0,n.useCallback)((e=>L(e,l)),[l]),p=(0,r().K8)((()=>function(e,t){const{temporaryDateRange:o}=t.state;return{...e,...o}}(s,l)),[l,s]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x().A,{title:i,value:p,onUpdate:d,store:l,onDismiss:a}),o?(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,j.jsx)(c().p,{colorPalette:"gray",style:{marginInlineStart:"auto",marginInlineEnd:8},onClick:a,children:(0,j.jsx)(m().sA,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,j.jsx)(u().A,{colorPalette:"blue",onClick:()=>e(l.state.temporaryDateRange),children:(0,j.jsx)(m().sA,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]}):void 0]})}function V({mode:e,onChange:t,onMenuDismiss:o,showButtons:s,title:l,value:d,disabled:c,dateFormat:u,focused:p,icon:m,store:f}){const g=(0,i().v3)(),h=(0,n.useCallback)((e=>B(e,t,f,o,s)),[t,f,o,s]),x=(0,n.useCallback)((()=>(0,j.jsx)(O,{onChange:t,onMenuDismiss:o,showButtons:s,title:l,value:d,store:f})),[t,o,s,l,d,f]),b=P(g),C=e===I().C.Section,M=C?l:void 0,T=e===I().C.Section?(0,j.jsx)(E,{disabled:c,value:d,dateFormat:u,focused:p,onChange:t,store:f}):e===I().C.Button?(0,j.jsx)(U,{disabled:c,title:l,icon:m,focused:p,mode:e,store:f}):e===I().C.Pill?(0,j.jsx)(H,{disabled:c,value:d,title:l,store:f}):void(0,v().HB)(e),w=(0,r().K8)((()=>f.state.isOpen),[f]);return(0,j.jsx)(S().A,{title:M,marginAfter:C,children:(0,j.jsx)(a().N,{debugName:"SearchDateFilter",capture:w,onUp:k,onDown:k,onEnter:k,children:(0,j.jsx)(y().Ay,{popupType:A(g),open:w,origin:T,render:x,onDismiss:h,placementToOrigin:"bottom",alignmentToOrigin:"start",keepFocus:!0,style:b.popup})})})}function _({mode:e,onChange:t,onMenuDismiss:o,showButtons:i,title:s,value:l,disabled:a,dateFormat:c,icon:u,store:p}){const m=(0,r().K8)((()=>p.state.isOpen),[p]),v=(0,n.useCallback)((e=>B(e,t,p,o,i)),[t,p,o,i]),f=(0,n.useCallback)((()=>(0,j.jsx)(O,{onChange:t,onMenuDismiss:o,showButtons:i,title:s,value:l,store:p})),[t,o,i,s,l,p]),g=e===I().C.Section?(0,j.jsx)(F,{disabled:a,title:s,value:l,dateFormat:c,onChange:t,store:p}):(0,j.jsx)(D,{disabled:a,icon:u,title:s,store:p});return(0,j.jsx)(y().Ay,{popupType:d().n.SlideUp,open:m,origin:g,render:f,onDismiss:v,preventScaleTransition:!0})}},586538:(e,t,o)=>{o.d(t,{A:()=>$});o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(726637),r=()=>o(484714),s=()=>o(56366),l=()=>o(401497),a=()=>o(929219),d=()=>o(98126),c=()=>o(187174),u=()=>o(202017),p=()=>o(42583),m=()=>o(921997),v=()=>o(801634),f=()=>o(69708),g=()=>o(496603),h=()=>o(534177),y=()=>o(720665),x=()=>o(129546),b=()=>o(848259),C=()=>o(645873);const S=new(C().O2)("activityUpdate",(async()=>await Promise.all([o.e(42660),o.e(31842),o.e(11411),o.e(13319)]).then(o.bind(o,529446))));(0,C()._h)(S,(e=>e.ActivityUpdate));var I=()=>o(299545),j=()=>o(37433),M=()=>o(721273),A=()=>o(941541),T=()=>o(423817),k=()=>o(155959),w=()=>o(224239),P=()=>o(765957),R=()=>o(463830);class B extends(()=>o(757695))().Store{getInitialState(){return{selectedItems:[]}}}const L=B;var D=()=>o(606846),F=()=>o(228927),E=()=>o(575695),U=()=>o(760217),H=()=>o(297401),O=()=>o(821879),V=o(474848);const _=function({mode:e,title:t,onChange:o,disabled:i,focused:r,onMenuDismiss:l,items:a,addItemLabel:d,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p,icon:m,getItemLabel:v,options:f,store:g}){const h=(0,s().uB)(g,L),y=(0,s().O$)(h);return(0,n.useEffect)((()=>{h.setState({selectedItems:a})}),[a,h]),(0,V.jsx)(O().A,{mode:e,hasItemsSelected:y.selectedItems.length>0,title:t,icon:m,items:a,onChange:e=>{o(e)},disabled:i,focused:r,renderFilter:(e,t)=>(0,V.jsx)(W,{getItemLabel:v,item:e,args:t}),renderToken:e=>(0,V.jsx)(N,{item:e}),renderItemForSummary:e=>(0,V.jsx)(K,{item:e}),addItemLabel:d,labelText:{title:t,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p},performRequest:e=>function({query:e},t){return Promise.resolve(t.filter((t=>t.includes(e))))}(e,f),renderResultMenuItem:(t,o)=>(0,V.jsx)(z,{getItemLabel:v,mode:e,store:h,item:t,props:o}),onMenuDismiss:l})};function K({item:e}){return(0,V.jsx)(V.Fragment,{children:`hello${e}`})}function N({item:e}){return(0,V.jsx)(V.Fragment,{children:e})}function W({item:e,args:t,getItemLabel:o}){const{disabled:n,onRemove:i,onClick:s}=t,l=function(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginInlineEnd:12},recordIcon:{marginInlineEnd:4}}}((0,r().v3)()),a=(0,V.jsx)(H().A,{disabled:n,onClick:i});return(0,V.jsx)(U().A,{title:(null==o?void 0:o(e))||e,disabled:n,focused:!1,right:a,style:l.menuItem,desktopTitleStyle:l.menuItemTitle,onClick:s})}function z({item:e,props:t,getItemLabel:o,mode:i,store:r}){const l=(0,s().uB)(r,L),a=(0,s().K8)((()=>l.state.selectedItems),[l]);return(0,n.createElement)(U().A,{...t,key:e,title:(null==o?void 0:o(e))||e,isChecked:i===O().C.Pill&&a.includes(e)})}function $(e){var t;const{spaceId:o,navigableBlockStore:i,collectionIds:d,authorId:u,source:p}=e,v=null==i?void 0:i.id,b=(0,r().v3)(),B=(0,s().uB)(void 0,w().L),L=(0,s().uB)(void 0,R().A),E=(0,l().IS)((e=>({placeholderContent:Z(b,e)})),[b]),U=(0,n.useMemo)((()=>g().nF((e=>function(e,t){t.update((e=>({...e,shouldLoadNewerActivities:!0})))}(0,B)),1e3)),[B]),H=(0,n.useMemo)((()=>y().Hg(U)),[U]);(0,n.useEffect)((()=>{let e,t,o;if(v){const t=(0,m().O$)(v);e=A().Ay.addListener(t,void 0,H,void 0,b)}if(d&&(t=d.map((e=>{const t=(0,m().zB)(e);return A().Ay.addListener(t,void 0,H,void 0,b)})).filter(h().O9)),u){const e=(0,m().Ii)(u);o=A().Ay.addListener(e,void 0,H,void 0,b)}return()=>{if(e&&A().Ay.removeListener(e,b),t)for(const e of t)A().Ay.removeListener(e,b);o&&A().Ay.removeListener(o,b)}}),[d,b,H,v,u]);const O=(0,s().O$)(a().e),_=(0,s().K8)((()=>{const e=B.state;return 0===e.filterActivityTypes.length&&void 0===e.filterDateRange.ending&&void 0===e.filterDateRange.starting}),[B]),K=(0,s().K8)(j().XL,[]),{currentUserStore:N,currentSpaceStore:W}=(0,s().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=P().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),{shouldLoadOlderActivities:z,shouldLoadNewerActivities:$,filterActivityTypes:J,filterDateRange:Y,activityIds:ee,hasOlderActivities:te}=(0,s().O$)(B),oe=(0,C().fJ)(S),[ne]=(0,c().Yb)((async()=>{if(!O||!N||!W)return;const e=D().Ay.startLoading();$?await x().X(b,{store:B,activityIds:ee,spaceId:o,filterActivityTypes:J,filterDateRange:Y,navigableBlockId:v,collectionIds:d,authorId:u,source:p}):z&&te&&await x().r(b,{store:B,activityIds:ee,spaceId:o,filterActivityTypes:J,filterDateRange:Y,navigableBlockId:v,collectionIds:d,authorId:u,source:p}),D().Ay.endLoading(e)}),[ee,B,d,W,N,b,J,Y,te,O,v,$,z,o,p,u]),ie=ne.error,re="resolved"===ne.status,se=(0,s().K8)((()=>{if(!N)return[];const e=N.id,t=(0,k().T)("supportsNativeHome"),n={spaceId:o,userId:e,navigableBlockId:v,collectionIds:d,filterDateRange:Y,filterActivityTypes:J,authorId:u},i=t&&0===ee.length&&!re?M().oV(n):ee;return t&&re&&M().tK(n,ee),function(e){return g().oE(e.map((e=>function(e){const{currentUserStore:t,sidebarSpaceStore:o}=P().default.state;if(!t||!o)return;const n=(0,I().jA)(o,e,o.id),i=n.getModel();return i&&!i.invalid?i:null}(e))))}(i)}),[ee,d,N,J,Y,u,v,re,o]);if(!O)return(0,V.jsx)(q,{});if(!N||!W)return null;const le=0===se.length&&!te&&re,ae=W;if(ie||"rejected"===oe.status)return(0,V.jsx)("div",{style:E.placeholderContent,children:(0,V.jsx)(f().sA,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});const de=Boolean(d&&d.length>0);if("resolved"!==oe.status||0===se.length&&!re)return(0,V.jsxs)("div",{children:[K?(0,V.jsx)(G,{hasCollection:de,source:p,activityUpdatesStore:B,filterPopupStore:L}):void 0,(0,V.jsx)(T().J,{areaHeight:window.innerHeight})]});const{ActivityUpdate:ce}=oe.value;return(0,V.jsxs)("div",{children:[K?(0,V.jsx)(G,{hasCollection:de,source:p,activityUpdatesStore:B,filterPopupStore:L}):void 0,(0,V.jsxs)("div",{style:le?E.placeholderContent:X(b,p),className:le?"":"notranslate",children:[le?null===(t=e.empty)||void 0===t?void 0:t.call(e,{hasFiltersOn:!_}):null,(0,V.jsx)("section",{role:"feed",children:se.map(((e,t,o)=>{const n=o.length-1===t,i="notifications_tab"===p?{tab:"all",source:p}:"updates_sidebar"===p?{tab:"pageUpdatesSidebar",source:p}:"person_profile"===p?{tab:"personProfile",source:p}:{tab:"homeTile",source:p};return(0,V.jsx)(ce,{activity:e,rootStore:ae,isLast:n,tabArgs:i},e.id)}))}),(0,V.jsx)(F().A,{onChange:e=>{e<200&&re&&!z&&te&&(_||se.length>0)&&B.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!re&&te?(0,V.jsx)(Q,{isPaginated:!0}):null})]})]})}function G(e){const{hasCollection:t,source:o,activityUpdatesStore:n,filterPopupStore:i}=e,{currentUserStore:r,currentSpaceStore:l}=(0,s().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=P().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),a=(0,s().K8)((()=>n.state.filterActivityTypes.length>0||n.state.filterDateRange.ending||n.state.filterDateRange.starting),[n]);return r&&l?(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[(0,V.jsx)(J,{hasCollection:t,source:o,filterPopupStore:i,activityUpdatesStore:n}),(0,V.jsx)(ne,{source:e.source,activityUpdatesStore:n,filterPopupStore:i}),a?(0,V.jsx)(oe,{source:e.source,activityUpdatesStore:n}):void 0]}):null}function J(e){const{hasCollection:t,source:o,activityUpdatesStore:i,filterPopupStore:l}=e,a=(0,f().tz)(),d=(0,r().v3)(),c=t?v().Fv:v().IP,p=(0,s().uB)(void 0,L),m=(0,s().K8)((()=>i.state.filterActivityTypes),[i]),g=(0,n.useCallback)((()=>{ee(l)}),[l]);return(0,V.jsx)(_,{store:p,focused:!1,icon:u().n,options:[...c].sort(),items:m,mode:O().C.Pill,title:(0,V.jsx)(f().sA,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:a.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:a.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:a.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>te((()=>i.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1})))),d,o,i),onMenuDismiss:g,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})}function X(e,t){return{minHeight:i().A.isMobile?void 0:"75vh"}}function Z(e,t){return{...X(),paddingTop:i().A.isMobile?32:void 0,paddingBottom:i().A.isMobile?32:void 0,minHeight:i().A.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:t.text.secondary,flexDirection:"column",flex:"1 1 0%"}}function q(){const e=(0,r().v3)(),t=(0,l().IS)((e=>({offlineMessage:Z(0,e)})),[e]);return(0,V.jsx)("div",{style:t.offlineMessage,children:(0,V.jsx)(f().sA,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}function Q({isPaginated:e}){const t=(0,r().v3)(),o=(0,l().IS)((t=>({spinner:{...Z(0,t),minHeight:e?64:220}})),[t,e]);return(0,V.jsx)("div",{style:o.spinner,children:(0,V.jsx)(d().k,{})})}function Y(e){var t,o;const{filterActivityTypes:n,filterDateRange:i}=e.state;return{activityTypes:n,dateRange:{start:null===(t=i.starting)||void 0===t?void 0:t.start_date,end:null===(o=i.ending)||void 0===o?void 0:o.start_date}}}function ee(e){e.setState({...e.state,open:!1})}function te(e,t,o,n){const i=Y(n);e();const r=Y(n);b().Xl({environment:t,activityUpdatesSource:o,filters:r,prevFilters:i})}function oe({source:e,activityUpdatesStore:t}){const o=(0,r().v3)(),n=(0,l().IS)((e=>({clearButton:{flexGrow:1,textAlign:"end",cursor:"pointer",fontSize:14,color:e.text.secondary,marginInlineEnd:8}})),[]);return(0,V.jsx)("div",{style:n.clearButton,onClick:()=>te((()=>t.reset()),o,e,t),children:(0,V.jsx)(f().sA,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}function ne({source:e,activityUpdatesStore:t,filterPopupStore:o}){const i=(0,r().v3)(),l=(0,n.useCallback)((()=>ee(o)),[o]),a=(0,s().K8)((()=>t.state.filterDateRange),[t]);return(0,V.jsx)(E().A,{mode:O().C.Pill,focused:!1,showButtons:!0,title:(0,V.jsx)(f().sA,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:p().D,value:a,onMenuDismiss:l,onChange:o=>te((()=>t.update((e=>({...e,filterDateRange:o,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))),i,e,t)})}},721273:(e,t,o)=>{o.d(t,{Cn:()=>i,oV:()=>l,tK:()=>s});o(581454);var n=()=>o(534177);let i=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.TopbarMobile=2]="TopbarMobile",e[e.RenderAsPage=3]="RenderAsPage",e}({});const r=new Map;function s(e,t){r.set(a(e),t)}function l(e){return r.get(a(e))??[]}function a(e){return(0,n().uv)(e).sort().map((t=>{const o=e[t];return JSON.stringify(o)})).join("-")}},806754:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:r,desktopStyle:s,desktopTitleStyle:l,...a}=e,d=(r||s)&&{...r&&t.marginAfter,...s},c=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,n.jsx)(o(89924).A,{disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:i,...a})}},821879:(e,t,o)=>{o.d(t,{C:()=>L,A:()=>D});o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(401497),s=()=>o(252291),l=()=>o(30537),a=()=>o(631524),d=()=>o(160432),c=()=>o(69708),u=()=>o(496603),p=()=>o(115512),m=()=>o(760217),v=()=>o(417392),f=()=>o(89924),g=()=>o(978625),h=()=>o(56366),y=()=>o(165358),x=()=>o(229833),b=()=>o(722872),C=()=>o(970585),S=()=>o(939740),I=()=>o(64e3),j=()=>o(45552),M=()=>o(856952),A=o(474848);const T={menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const k=function({labelText:e,value:t,renderResultMenuItem:r,onConfirm:s,items:l,performRequest:a,onDismiss:d,onChange:c,renderToken:u,onRemove:p,onClear:m,disabled:v}){const f=(0,i().v3)(),g=(0,h().uB)(void 0,C().A),y=(0,h().uB)(void 0,o(40851).A),[x,b]=(0,o(857437).$)(),S=(0,n.useCallback)(((o,n,i)=>(0,A.jsx)(B,{error:o,data:n,ready:i,labelText:e,value:t,renderResultMenuItem:r,onConfirm:s,menuListStore:g,comboboxProps:b})),[e,t,r,s,g,b]),I={query:t,current:l};return(0,A.jsx)(o(404277).A,{...R(f,d,e,t,l,c,u,p,m,v,x),children:(0,A.jsx)(o(251126).A,{debounce:100,requestStore:y,request:I,performRequest:a,render:S})})};function w(e){const{device:t}=e;return t.isMobile}function P({labelText:e,value:t,items:o,disabled:n,onChange:r,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:d}){const c=(0,i().v3)(),p=o.map((e=>s(e,{onRemove:()=>l(e)})));return(0,A.jsx)(f().A,{isInput:!0,children:(0,A.jsx)("div",{style:{padding:"4px 8px"},children:(0,A.jsx)(M().Ay,{focus:!w(c)||void 0,focusAfterAnimation:!0,format:M().le.FilterValue,tokens:p,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const o=u().HV(e);o&&t(o)}(o,l),onClearButtonClick:a,value:t,onChange:r,showClearButton:!0,disabled:Boolean(n),style:T.inputMenu,...d})})})}function R(e,t,o,n,i,r,s,l,a,d,c){if(w(e)){return{menuType:b().gu.Modal,title:o.title,right:(0,A.jsx)(j().DoneMenuText,{}),onClickRight:t,header:(0,A.jsx)(P,{labelText:o,value:n,items:i,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:c})}}return{menuType:b().gu.Popup,onClickOutside:t,header:(0,A.jsx)(P,{labelText:o,value:n,items:i,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:c}),...T.menu}}function B({error:e,data:t,ready:o,labelText:i,value:r,renderResultMenuItem:s,onConfirm:l,menuListStore:a,comboboxProps:d}){const u=(0,h().uB)(a,C().A),p=(0,n.useCallback)((e=>(0,A.jsx)(f().A,{...e,title:i.resultSectionTitle,loading:!o})),[i,o]);if(e)return y().log({level:"error",from:i.componentDebugName,type:"requestFailed",error:(0,x().convertErrorToLog)(e),data:{miscDataToConvertToString:{query:r}}}),(0,A.jsx)(p,{children:(0,A.jsx)(I().A,{title:(0,A.jsx)(c().sA,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,A.jsx)(p,{children:(0,A.jsx)(I().A,{title:(0,A.jsx)(c().sA,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,A.jsx)(p,{children:(0,A.jsx)(I().A,{title:(0,A.jsx)(c().sA,{defaultMessage:"No results found",id:"search.inputMenu.noResults.message"})})});const m={key:"results",items:t.map((e=>function(e,t,o){return{key:e,action:()=>o(e),render:o=>t(e,o)}}(e,s,l))),render:p};return(0,A.jsx)(S().Ay,{type:S().Oh.Vertical,store:u,initialFocus:0,sections:[m],comboboxProps:d})}let L=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function D(e){const{items:t,keepInputOnItemConfirm:o,mode:r,onChange:s,onMenuDismiss:l,onMenuOpen:a}=e,{device:d}=(0,i().v3)(),c=(0,n.useRef)(),p=(0,n.useRef)(null),[m,v]=(0,n.useState)(!1),[f,g]=(0,n.useState)(""),[h,y]=(0,n.useState)(void 0),[x,b]=(0,n.useState)(void 0);function C(e,t){c.current=requestAnimationFrame((e=>{if(p&&p.current&&(b(p.current.getBoundingClientRect()),t)){const{shouldOpenMenu:e,nextIndexToReplace:o}=t;e&&(v(!0),y(o))}}))}(0,n.useEffect)((()=>(window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),c.current&&(cancelAnimationFrame(c.current),c.current=void 0)})),[]);const S=t.length;function I(e){M(),v(!1),y(void 0),null==l||l(e)}function j(e){g(e.target.value)}function M(){g("")}function T(){s([])}const k=(0,n.useCallback)((e=>{const o=t.filter((t=>t!==e));s(o)}),[t,s]),w=(0,n.useCallback)((e=>{if("number"==typeof h&&h<t.length){const o=t.slice(0,h).concat(e,t.slice(h+1));s(o)}else if(t.includes(e)&&L.Pill)k(e);else{const o=t.concat(e);s(u().sb(o))}o||M()}),[k,h,t,o,s]);return(0,n.useEffect)((()=>{C()}),[S,r]),d.isMobile?(0,A.jsx)(N,{inputTemporaryValue:f,isMenuOpen:m,onClearInput:M,onClearItems:T,onItemConfirm:w,onMenuClose:I,onMenuInputChange:j,onMenuOpen:function(){v(!0)},onRemove:k,searchTokenFilterProps:e}):(0,A.jsx)(U,{hasItemsSelected:r===L.Pill&&e.hasItemsSelected,inputTemporaryValue:f,isMenuOpen:m,onClearInput:M,onClearItems:T,onItemConfirm:w,onMenuClose:I,onMenuInputChange:j,onMenuOpen:function(e){null==a||a(),C(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:k,popupOriginRect:x,ref:p,searchTokenFilterProps:e})}function F(e){return{buttonMenuItem:{color:e.text.secondary},appendListItemButton:{color:e.text.tertiary}}}function E(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:p().ny(e,"UIRegular")},icon:{marginInlineEnd:"Pill"===t?6:-2},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const U=(0,n.forwardRef)((function(e,t){const{hasItemsSelected:r,inputTemporaryValue:s,isMenuOpen:a,onClearInput:d,onClearItems:c,onItemConfirm:u,onMenuClose:p,onMenuInputChange:m,onMenuOpen:f,onRemove:g,popupOriginRect:h,searchTokenFilterProps:y}=e,{addItemLabel:x,disabled:b,focused:C,icon:S,items:I,mode:j,renderFilter:M,title:T}=y,k=(0,i().v3)(),w=b||a,P=(0,n.useMemo)((()=>({open:a})),[a]),R=(0,n.useCallback)((()=>{f()}),[f]);return(0,A.jsxs)(o(806754).A,{title:j===L.Section?T:void 0,marginAfter:j===L.Section,style:E(k,j).sectionMenuItem,children:[j!==L.Pill?(0,A.jsx)(H,{disableFilters:w,items:I,onClick:f,onRemove:g,renderFilter:M}):void 0,(0,A.jsx)(o(945465).k.Provider,{value:P,children:j===L.Section?(0,A.jsx)(O,{addItemLabel:x,disabled:b,isMenuOpen:a,mode:j,onClick:R,ref:t}):j===L.Button?(0,A.jsx)(V,{disabled:b,focused:C,icon:S,isMenuOpen:a,mode:j,onClick:R,ref:t,title:T}):j===L.Pill?(0,A.jsx)(_,{disabled:b,hasItemsSelected:r,icon:S,onClick:R,ref:t,title:T}):void(0,o(534177).HB)(j)}),(0,A.jsx)(v().Ay,{alignmentToOrigin:"start",keepFocus:!0,onDismiss:p,open:a,originRect:h,placementToOrigin:"bottom",popupType:l().n.Popup,preventScaleTransition:!0,render:()=>(0,A.jsx)(W,{searchTokenFilterProps:y,inputTemporaryValue:s,onMenuInputChange:m,onClearInput:d,onClearItems:c,onItemConfirm:u,onMenuClose:p,onRemove:g}),trapFocus:!0})]})}));function H(e){const{disableFilters:t,items:o,onClick:i,onRemove:r,renderFilter:s}=e,l=(0,n.useMemo)((()=>o.map(((e,o)=>(0,A.jsx)("li",{children:s(e,{disabled:t,onClick:()=>i(o),onRemove:()=>r(e)})},`${e}_${o}`)))),[t,o,i,r,s]);return(0,A.jsx)("ul",{style:p().$t,children:l})}const O=(0,n.forwardRef)((function(e,t){const{addItemLabel:n,disabled:l,isMenuOpen:a,mode:d,onClick:c}=e,u=E((0,i().v3)(),d),p=(0,r().IS)(F,[F]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{ref:t,style:u.menuItemWrapper}),(0,A.jsx)(m().A,{disabled:l||a,focused:!1,icon:(0,A.jsx)(s().I,{icon:o(621837).plusFillSmallIcon,size:"xxs"}),onClick:c,style:{...u.appendListItemButton,...p.appendListItemButton},title:n})]})})),V=(0,n.forwardRef)((function(e,t){const{disabled:o,focused:n,icon:l,isMenuOpen:a,mode:d,onClick:c,title:u}=e,p=E((0,i().v3)(),d),v=(0,r().IS)(F,[F]),f={...p.menuItem,...v.buttonMenuItem};return(0,A.jsx)("div",{ref:t,style:p.menuItemWrapper,children:(0,A.jsx)(m().A,{disabled:o||a,focused:n,icon:(0,A.jsx)(s().I,{icon:l,size:"default",style:p.icon}),onClick:c,style:f,title:u})})})),_=(0,n.forwardRef)((function(e,t){const{disabled:n,hasItemsSelected:r,icon:l,onClick:a,title:d}=e,c=E((0,i().v3)(),L.Pill);return(0,A.jsx)("div",{ref:t,style:c.menuItemWrapper,children:(0,A.jsx)(o(56394).A,{on:r,icon:(0,A.jsx)(s().I,{icon:l,style:c.icon}),title:(0,A.jsx)("span",{children:d}),onClick:a,wrapStyle:{opacity:n?.4:1}})})}));function K(e){const{disableFilters:t,items:o,mode:n,onClickClear:r,onMenuOpen:s,renderItemForSummary:l,title:a}=e,d=E((0,i().v3)(),n),c={...p().$t,...d.summary},u=o.length-1,m=(0,A.jsx)("ul",{style:c,children:o.map(((e,t)=>(0,A.jsxs)("li",{style:d.summaryItem,children:[l(e),t!==u?",":void 0," "]},e)))});return(0,A.jsx)(g().A,{disabled:t,label:a,onClick:s,onClickClear:r,title:m})}function N(e){const{inputTemporaryValue:t,isMenuOpen:o,onClearInput:n,onClearItems:r,onItemConfirm:a,onMenuClose:d,onMenuInputChange:c,onMenuOpen:u,onRemove:p,searchTokenFilterProps:f}=e,{mode:g,disabled:h,title:y,items:x,renderItemForSummary:b,icon:C}=f,S=E((0,i().v3)(),g),I=h||o,j=g===L.Section?(0,A.jsx)(K,{disableFilters:I,items:x,mode:g,onClickClear:r,onMenuOpen:u,renderItemForSummary:b,title:y}):(0,A.jsx)(m().A,{disabled:I,focused:!1,icon:(0,A.jsx)(s().I,{icon:C,style:S.icon}),onClick:u,title:y});return(0,A.jsx)(v().Ay,{keepFocus:!0,onDismiss:d,open:o,origin:j,popupType:l().n.SlideUp,render:()=>(0,A.jsx)(W,{inputTemporaryValue:t,onClearInput:n,onClearItems:r,onItemConfirm:a,onMenuClose:d,onMenuInputChange:c,onRemove:p,searchTokenFilterProps:f})})}function W(e){const{inputTemporaryValue:t,onClearInput:o,onClearItems:n,onItemConfirm:i,onMenuClose:r,onMenuInputChange:s,onRemove:l,searchTokenFilterProps:u}=e,{renderToken:p,renderFooter:m,allowApplyBatchSelection:v}=u;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k,{...u,onChange:s,onClear:()=>{o(),n()},onConfirm:i,onDismiss:r,onRemove:l,renderToken:p,value:t}),m?(0,A.jsxs)(f().A,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,A.jsx)(a().p,{onClick:n,children:(0,A.jsx)(c().sA,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),v?(0,A.jsx)(d().A,{colorPalette:"blue",onClick:()=>{r("applyButton")},children:(0,A.jsx)(c().sA,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})}):void 0]}):void 0]})}},849268:(e,t,o)=>{o.r(t),o.d(t,{PersonProfileContainer:()=>Re});o(944114),o(581454);var n=o(296540),i=()=>o(564884),r=()=>o(726637),s=()=>o(484714),l=()=>o(56366),a=()=>o(401497),d=()=>o(611648),c=()=>o(150669),u=()=>o(757695),p=()=>o(799954),m=()=>o(69708),v=()=>o(496603),f=()=>o(284371),g=()=>o(2143),h=()=>o(53798),y=o(474848);function x(e){const{disable:t=!1,children:o}=e,[i,r]=(0,n.useState)(void 0),[s,l]=(0,n.useState)(void 0),[a,d]=(0,n.useState)(0),c=(0,n.useRef)(null),u=(0,n.useRef)(null),p=(0,n.useRef)(0);(0,n.useEffect)((()=>{if(t)return;const e=c.current,o=u.current;if(!e||!o)return;const n=(0,h().NM)(e);if(!n)return;const i=e,s=o,a=n;function m(){const{wrapperTopScrollerTop:e,wrapperBottomScrollerBottom:t,padderTopScrollerTop:o,scrollTop:n,overflow:c}=function(){const e=i.getBoundingClientRect(),t=s.getBoundingClientRect(),o=a.getBoundingClientRect(),{scrollTop:n}=a;return{wrapperTopScrollerTop:e.top-o.top,wrapperBottomScrollerBottom:e.bottom-o.bottom,padderTopScrollerTop:t.top-o.top,scrollTop:n,overflow:e.height-o.height}}();if(e>=0&&t<=0)return r(0),l(void 0),void d(0);if(c<=0)return r(0),l(void 0),void d(0);e>=0?d(Math.max(0,-o)):t<=0&&d(Math.max(0,-o-c));const u=n-p.current;u>=1?(p.current=n,r(-c),l(void 0)):u<=-1&&(p.current=n,r(void 0),l(-c))}m();const f=(0,v().nF)(m,50);a.addEventListener("scroll",f,{passive:!0});const g=new ResizeObserver(f);return g.observe(e),g.observe(n),()=>{a.removeEventListener("scroll",f),g.disconnect()}}),[t]);const m=(0,n.useMemo)((()=>t?{}:{position:"sticky",top:i,bottom:s}),[t,i,s]),f=(0,n.useMemo)((()=>({height:t?0:Math.max(0,a)})),[t,a]);return(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[(0,y.jsx)("div",{ref:u,style:f}),(0,y.jsx)("div",{ref:c,style:m,children:o})]})}var b=()=>o(125565),C=()=>o(774524),S=()=>o(312310),I=()=>o(299772),j=()=>o(828634),M=()=>o(112995),A=()=>o(719061),T=()=>o(9768),k=()=>o(817942),w=()=>o(601726),P=()=>o(660197),R=()=>o(933951),B=()=>o(321909),L=()=>o(765957),D=()=>o(548821),F=()=>o(712505),E=()=>o(981342),U=(o(16280),()=>o(252291)),H=()=>o(406094),O=()=>o(493552),V=()=>o(584262),_=()=>o(165358),K=()=>o(925695),N=()=>o(229833),W=()=>o(901389),z=()=>o(579627),$=()=>o(857783),G=()=>o(231297),J=()=>o(384100),X=()=>o(599412);function Z({viewedUserId:e}){const t=(0,m().tz)(),o=(0,s().v3)(),i=(0,l().O$)(L().AppStoreSidebarSpaceStore),r=(0,l().K8)((()=>{if(!i)return;const o=(0,J().z5)({userId:e,currentSpaceStore:i}),n=(null==o?void 0:o.getDisplayName(t))??"";return{viewedUserStore:o,viewedUserName:n}}),[i,e,t]),d=null==r?void 0:r.viewedUserStore,c=null==r?void 0:r.viewedUserName,u=(0,l().K8)((()=>!Boolean(d)||!Boolean(i)||!Boolean(null==d?void 0:d.isReady())),[d,i]),p=(0,n.useCallback)((async()=>{const n=await(0,X().M)({environment:o,from:"person_profile_recent_activity_empty_state",navigateOnCreate:!1,pageVisitSource:V().y8.PersonProfileRecentActivity});if(!n)return W().f1(t.formatMessage({defaultMessage:"Failed to create page. Please try again or contact support if the issue persists",id:"people.profile.createPage.failed"})),void _().log({error:(0,N().convertErrorToLog)(new Error("Failed to create page from people profile empty state")),from:"ActivityFeedEmptyState",type:"ClientError",level:"error"});G().createAndCommit({userAction:"PersonProfile.addCollaboratorToSharedDocument",environment:o,canUndo:!0,perform:t=>{z().wd({environment:o,store:n,permissionItems:[{type:"user_permission",user_id:e,role:"read_and_write"}],transaction:t})}}),$()._U(n),$().uK({environment:o,store:n,showMoveTo:!0,saveParent:!0,pageVisitSource:V().y8.PersonProfileRecentActivity})}),[o,e,t]),v=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:10,paddingTop:20},textContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},descriptionContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,maxWidth:300},button:{width:"fit-content"}})),[]);return(0,y.jsxs)("div",{style:v.container,children:[(0,y.jsx)(U().I,{size:"xl",icon:K().N,colorPalette:"gray",colorVariant:"tertiary"}),(0,y.jsxs)("div",{style:v.textContainer,children:[(0,y.jsx)(O().D,{styleKey:"Body/Medium",children:(0,y.jsx)(m().sA,{id:"PersonProfile.recentActivity.empty",defaultMessage:"No activity yet"})}),u?null:(0,y.jsxs)("div",{style:v.descriptionContainer,children:[(0,y.jsx)(O().D,{styleKey:"Body/Regular",colorVariant:"secondary",children:(0,y.jsx)(m().sA,{id:"PersonProfile.recentActivity.empty.description",defaultMessage:"Start collaborating with {personName} by creating your first document together",values:{personName:c}})}),(0,y.jsx)(H().A,{onClick:p,style:v.button,children:(0,y.jsx)(b().A,{children:(0,y.jsx)(m().sA,{id:"PersonProfile.recentActivity.empty.button",defaultMessage:"Create a shared document"})})})]})]})]})}var q=()=>o(936802),Q=()=>o(908201),Y=()=>o(688742),ee=()=>o(710149),te=()=>o(578405);function oe(e){const{module:t,personProfileStore:o}=e,i=(0,s().v3)(),r=(0,a().IS)((()=>({loadingBoxTitle:{width:70,height:24,borderRadius:4},loadingBoxValue:{width:160,height:24,borderRadius:4},loadingBoxContainer:{display:"flex",flexDirection:"column",gap:8,paddingInlineStart:6}})),[]),d=(0,n.useMemo)((()=>new(Y().B)(i)),[i]),{peopleCollectionStore:c,peopleCollectionBlockStore:u,isPeopleCollectionReady:p}=(0,l().K8)((()=>{const e=o.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentBlockStore();return{peopleCollectionStore:e,peopleCollectionBlockStore:t,isPeopleCollectionReady:null==e?void 0:e.isReady()}}),[o]);return(0,n.useEffect)((()=>{c&&u&&u.isCollectionView()&&d.setContext({type:"collectionPage",collectionStore:c,collectionViewBlockStore:u})}),[c,u,d]),p?(0,y.jsx)(Q().RI,{value:d,children:(0,y.jsx)(te().h,{context:D().Rr.Frame,disabled:!1,store:o,wrapper:e=>(0,y.jsx)("div",{children:e}),layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,stackPropertyLabelAndValue:!0,disableLastRowBottomPadding:!0,hideEmptyProperties:!1,sortNonEmptyPropertiesFirst:!1,propertyIdsToExclude:(0,q().fD)(),hideAddPropertyButton:!0,disableContainerPadding:!0,disableTopPadding:!0},showDefaultTitle:!1})}):(0,y.jsxs)("div",{style:r.loadingBoxContainer,children:[(0,y.jsx)(ee().A,{style:r.loadingBoxTitle,emphasized:!0}),(0,y.jsx)(ee().A,{style:r.loadingBoxValue,emphasized:!0})]})}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var ne=()=>o(187174),ie=()=>o(803960),re=()=>o(539174),se=()=>o(559506),le=()=>o(974233),ae=()=>o(898808),de=()=>o(549169),ce=()=>o(568317);function ue({isIconCircular:e=!1}){const t=(0,ce()._)(),o=(0,a().IS)((()=>({skeletonIcon:{width:20,height:20,borderRadius:e?"50%":4},skeletonLabel:{width:120,height:16,borderRadius:4}})),[e]);return(0,y.jsxs)("div",{style:t.rowContainer,children:[(0,y.jsx)(ee().A,{style:{...o.skeletonIcon}}),(0,y.jsx)(ee().A,{style:{...t.rowLabel,...o.skeletonLabel}})]})}var pe=()=>o(718827);function me(e){const{icon:t,totalCount:o,message:n,onToggleTruncation:i,maxRowsShownWhenTruncated:r=E().rX}=e,s=(0,m().tz)(),l=Math.max(o-r,0),a=(0,ce()._)();return(0,y.jsxs)(pe().Ay,{onClick:i,style:a.truncationButton,hoveredStyle:a.hoveredStyle,children:[t,(0,y.jsx)(b().A,{style:a.truncationLabel,isSecondaryColor:!0,children:s.formatMessage(n,{numHidden:l})})]})}const ve=E().rX+1,fe=(0,m().YK)({teamspacesModuleShowMore:{id:"PersonProfile.teamspacesModule.showMore",defaultMessage:"{numHidden} more teamspaces"},teamspacesModuleShowLess:{id:"PersonProfile.teamspacesModule.showLess",defaultMessage:"Hide {numHidden} teamspaces"}});function ge(e,t,o){const[{value:n,status:i,error:r}]=(0,ne().Yb)((async()=>async function(e,t,o){if(!o)return;const n=await se().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:o,userIds:[t]}});var i;if("success"===n.type)return new Set((null===(i=n.data)||void 0===i||null===(i=i.userToGroupMap)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.map((e=>e.toString())))||[]);throw _().log({level:"error",from:"personProfile.teamspacesModule",type:"getSpacePermissionGroupIdsContainingMembersError",error:{message:(0,le().V)(n)||"Error fetching user permission group ids"}}),n.error}(e,t,o)),[e,t,o],{debugName:"personProfile.userToPermissionGroupIds"});return{value:{userPermissionGroupIds:n},isLoading:"resolved"!==i&&"rejected"!==i,error:r}}function he(){const e=(0,ce()._)();return(0,y.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,y.jsx)(ue,{isIconCircular:!1},e)))})}function ye(){const e=(0,ce()._)();return(0,y.jsx)("div",{style:e.listModule,children:(0,y.jsx)(b().A,{isSmall:!0,isMultiline:!0,children:(0,y.jsx)(m().sA,{id:"PersonProfile.teamspaces.empty",defaultMessage:"None"})})})}function xe(e){const{teamStore:t}=e,o=(0,l().K8)((()=>t.isReady()),[t]),n=(0,l().K8)((()=>t.getName()),[t]),i=(0,ce()._)();return o?(0,y.jsxs)("div",{style:i.rowContainer,children:[(0,y.jsx)(ae().x,{store:t,disabled:!0,size:20}),(0,y.jsx)(b().A,{showTooltipWhenTruncated:!0,style:i.rowLabel,children:n})]}):(0,y.jsx)(ue,{isIconCircular:!1})}function be(e){const{userId:t}=e,o=(0,s().v3)(),i=(0,l().O$)(L().AppStoreSidebarSpaceStore),{teams:r,isLoading:a}=function({environment:e,spaceStore:t,userId:o}){const{value:{userPermissionGroupIds:n},isLoading:i}=ge(e,o,null==t?void 0:t.id),{teams:r,isLoading:s}=(0,de().Z)({environment:e,spaceStore:t,userId:o,userPermissionGroupIds:n});return{teams:r,isLoading:s||i}}({environment:o,spaceStore:i,userId:t}),d=(0,n.useMemo)((()=>r.length>ve),[r]),[c,u]=(0,n.useState)(!0),p=(0,ce()._)(),m=(0,n.useCallback)((()=>{u(!c)}),[c]);return a?(0,y.jsx)(he,{}):0===r.length?(0,y.jsx)(ye,{}):(0,y.jsxs)("div",{style:p.listModule,children:[r.map(((e,t)=>c&&d&&t>=E().rX?null:(0,y.jsx)(xe,{teamStore:e},e.id))),d?(0,y.jsx)(me,{icon:c?(0,ie().arrowChevronSingleDownIcon)(p.truncationIcon):(0,re().h)(p.truncationIcon),totalCount:r.length,message:c?fe.teamspacesModuleShowMore:fe.teamspacesModuleShowLess,maxRowsShownWhenTruncated:E().rX,onToggleTruncation:m}):void 0]})}var Ce=()=>o(453697),Se=()=>o(617711),Ie=()=>o(798880),je=()=>o(272509),Me=()=>o(870092);const Ae=E().rX+1,Te=(0,m().YK)({topCollaboratorsModuleShowMore:{id:"PersonProfile.collaboratorsModule.showMore",defaultMessage:"{numHidden} more collaborators"},topCollaboratorsModuleShowLess:{id:"PersonProfile.collaboratorsModule.showLess",defaultMessage:"Hide {numHidden} collaborators"}});function ke(e){const{userStore:t}=e,o=(0,s().v3)(),n=(0,l().K8)((()=>t.isReady()),[t]),i=(0,l().K8)((()=>t.getName()||t.getEmail()),[t]),r=(0,l().K8)((()=>(0,Se().MN)({userId:t.id,currentSpaceStore:L().default.state.sidebarSpaceStore,environment:o,pageVisitSource:V().y8.PersonProfileTopCollaborators})),[t,o]),a=(0,ce()._)();return n?(0,y.jsxs)(pe().Ay,{style:a.rowContainer,hoveredStyle:a.hoveredStyle,href:r,children:[(0,y.jsx)(Ce().A,{hasPersonHoverCard:!0,userStore:t,size:20}),(0,y.jsx)(b().A,{showTooltipWhenTruncated:!0,style:a.rowLabel,children:i})]}):(0,y.jsx)(ue,{isIconCircular:!0})}function we(){const e=(0,ce()._)();return(0,y.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,y.jsx)(ue,{isIconCircular:!0},e)))})}function Pe(e){const{userId:t}=e,{value:o,isLoading:i}=function({userId:e}){const t=(0,s().v3)(),o=(0,l().O$)(L().AppStoreSidebarSpaceStore),[{status:n,error:i,value:r}]=(0,ne().Yb)((async()=>{if(!o)return[];if((0,je().I)(o))return[];const n=await se().callApi({eventName:"getSimilarUsers",environment:t,data:{userId:e,spaceId:o.id}});if("failed"===n.type)throw n.error;if(n){const e=n.data.userSimilarity??[];return Object.entries(e).map((([e,t])=>({userStore:Me().L.createChildStore(o,{table:Ie().oo,id:e}),id:e})))}}),[t,e,o]);return void 0===o?{isLoading:!0,error:void 0,value:[]}:{isLoading:"pending"===n||"idle"===n,error:i,value:r}}({userId:t}),r=o&&o.length>Ae,[a,d]=(0,n.useState)(!0),c=(0,n.useCallback)((()=>{d(!a)}),[a]),u=(0,ce()._)();return i?(0,y.jsx)(we,{}):o&&0!==o.length?(0,y.jsxs)("div",{style:u.listModule,children:[o.map(((e,t)=>a&&r&&t>=E().rX?null:(0,y.jsx)(ke,{userStore:e.userStore},e.id))),r?(0,y.jsx)(me,{icon:a?(0,ie().arrowChevronSingleDownIcon)(u.truncationIcon):(0,re().h)(u.truncationIcon),totalCount:o.length,message:a?Te.topCollaboratorsModuleShowMore:Te.topCollaboratorsModuleShowLess,maxRowsShownWhenTruncated:E().rX,onToggleTruncation:c}):void 0]}):(0,y.jsx)("div",{style:u.listModule,children:(0,y.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,y.jsx)(m().sA,{id:"TopCollaboratorsModule.emptyState.message",defaultMessage:"No collaborators yet!"})})})}function Re(e){const{personProfileStore:t}=e,o=(0,l().uB)(void 0,c().A),u=(0,l().K8)((()=>t.getSpaceId()),[t]),m=(0,l().K8)((()=>t.getPersonProfileUserId()),[t]),f=(0,n.useRef)(null),h=(0,j().wY)(f),b=(0,s().v3)(),C=!r().A.isMobile;(0,n.useEffect)((()=>{"rendered"!==L().default.state.renderPhase&&L().default.setPageRendered()}),[]);const S=(0,l().K8)((()=>(0,E().sF)()),[]);(0,n.useEffect)((()=>{(0,i().u)({environment:b,event:{eventName:"person_profile_viewed",eventProperties:{is_own_profile:m===b.currentUser.id}}})}),[b,m]);const I=h&&h.width<=F().SIDEPEEK_MIN_WIDTH,{person_profile_page_main:M,person_profile_page_details:A}=(0,R().Qf)({personProfileStore:t}),T=(0,B().y)(),w=(0,a().IS)((e=>({container:{width:"100%",height:"100%",cursor:"default",backgroundColor:e.background.primary},left:{flex:1,maxWidth:"752px",minWidth:F().SIDEPEEK_MIN_WIDTH-96+"px"},right:{width:"252px",minWidth:"252px",height:"min-content",display:"flex",flexDirection:"column",gap:20},content:{display:"flex",flexDirection:I?"column-reverse":"row",gap:S?34:40,...T?(0,v().Up)(p().dE,"paddingInlineStart","paddingInlineEnd"):{}}})),[I,T,S]);return m?(0,y.jsx)(g().H,{type:d().A.Y,style:w.container,className:"person-profile-content",store:o,children:(0,y.jsxs)(k().Mx,{type:"person-profile",withBottomPadding:!0,children:[(0,y.jsx)(Ee,{store:t,modules:M}),(0,y.jsxs)(k().vV,{ref:f,style:w.content,children:[C?(0,y.jsx)("div",{style:w.left,children:(0,y.jsx)(Be,{modules:M,spaceId:u,userId:m})}):void 0,(0,y.jsx)(x,{disable:I,children:(0,y.jsx)("div",{style:w.right,children:(0,y.jsx)(De,{modules:A,userId:m,personProfileStore:t,isPeopleCollectionFlagEnabled:S})})})]},"main")]})}):null}const Be=n.memo(Le);function Le(e){const{spaceId:t,userId:n,modules:i}=e;return(0,y.jsx)(y.Fragment,{children:i.map((e=>"recentActivity"===e.type?(0,y.jsxs)("div",{children:[(0,y.jsx)(Fe,{children:(0,y.jsx)(m().sA,{id:"PersonProfile.recentActivity.title",defaultMessage:"Recent activity"})}),(0,y.jsx)(M().K,{from:"PersonProfileContainer.LeftColumnContent.ActivityUpdates",fallback:e=>(0,y.jsx)(A().d,{...e}),children:(0,y.jsx)(o(586538).A,{spaceId:t,source:"person_profile",authorId:n,empty:()=>(0,y.jsx)(Z,{viewedUserId:n})})})]},`${e.id}-${n}`):null))})}function De(e){const{userId:t,modules:o,personProfileStore:i,isPeopleCollectionFlagEnabled:r}=e,s=(0,n.useMemo)((()=>({paddingLeft:r?6:0})),[r]);return(0,y.jsx)(y.Fragment,{children:o.map((e=>{switch(e.type){case"collaborators":return(0,y.jsx)("div",{style:s,children:(0,y.jsxs)(M().K,{from:"PersonProfileContainer.RightColumnContent.TopCollaboratorsModule",fallback:e=>(0,y.jsx)(A().d,{...e}),children:[(0,y.jsx)(Fe,{children:(0,y.jsx)(m().sA,{id:"PersonProfile.topCollaborators.title",defaultMessage:"Top collaborators"})}),(0,y.jsx)(Pe,{userId:t})]})},`${e.id}-${t}`);case"teamspaces":return(0,y.jsx)("div",{style:s,children:(0,y.jsxs)(M().K,{from:"PersonProfileContainer.RightColumnContent.TeamspacesModule",fallback:e=>(0,y.jsx)(A().d,{...e}),children:[(0,y.jsx)(Fe,{children:(0,y.jsx)(m().sA,{id:"PersonProfile.teamspaces.title",defaultMessage:"Teamspaces"})}),(0,y.jsx)(be,{userId:t})]})},`${e.id}-${t}`);case"properties":return(0,y.jsx)("div",{children:(0,y.jsx)(M().K,{from:"PersonProfileContainer.RightColumnContent.PropertiesModule",fallback:e=>(0,y.jsx)(A().d,{...e}),children:(0,y.jsx)(oe,{userId:t,module:e,personProfileStore:i})})},`${e.id}-${t}`);default:return null}}))})}function Fe(e){const t=(0,a().IS)((()=>({title:{paddingBottom:8,fontWeight:f().Wy.medium}})),[]);return(0,y.jsx)(b().A,{isSmall:!0,style:t.title,children:e.children})}function Ee(e){const{store:t,modules:o}=e,n=(0,l().K8)((()=>t.isReady()&&t.canEdit()),[t]);return(0,y.jsx)(y.Fragment,{children:o.map((e=>{switch(e.type){case"normalizedTitleWithIcon":return(0,y.jsx)(k().vV,{children:(0,y.jsx)(Ue,{module:e,personProfileStore:t,modules:o,isEditable:n})},e.id);case"cover":return(0,y.jsx)(w().f,{store:t,isEditable:n,paddingX:0,pageCoverHeight:I().mv,onMouseEnter:v().lQ,onMouseLeave:v().lQ},e.id);default:return null}}))})}function Ue(e){const{module:t,personProfileStore:o,modules:i,isEditable:r}=e,s=(0,T().Jh)({layoutModule:t,area:"page_main",collectionSchema:void 0,collectionStore:void 0,showDetailsPanelToggleButtonBelowTitle:!1,modules:i,context:D().Rr.Frame}),a=(0,l().K8)((()=>Boolean(null==o?void 0:o.getCover())),[o]),d=u().Store.createValue(!1,{name:"headerFocusStore"}),c=(0,n.useMemo)((()=>{const e=[];return r&&!a&&e.push((0,y.jsx)(S().A,{store:o,style:(0,I().g1)(!0),label:(0,y.jsx)(m().sA,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"}),from:"person_page_header"},"add-cover")),e}),[r,a,o]);return s((0,y.jsx)(P().H,{store:o,context:D().Rr.Frame,isEditable:!1,headerControls:(0,y.jsx)(C().A,{store:o,context:D().Rr.Frame,children:c}),hasCover:a,isInSidePeek:!1,headerFocusStore:d,openMenuOnMount:!1,openMenuOnMountCallback:v().lQ,disabled:!0,collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:v().lQ,onTitleEditText:v().lQ,onTitleEsc:v().lQ,onTitleUntab:v().lQ,onTitleTab:v().lQ,handleHeaderMouseEnter:v().lQ,handleHeaderMouseLeave:v().lQ,layoutModule:t}))}},978625:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(484714),i=()=>o(284371),r=()=>o(581369),s=()=>o(297401),l=o(474848);const a=function(e){const{disabled:t,label:i,title:r,onClick:s,isToggle:a,isToggleActive:u,onClickClear:p,...m}=e,v=(0,o(401497).DP)(),f=(0,n().v3)(),g=function(e){return{menuItemLabel:{color:e.text.tertiary}}}(v),h=d(f),y=(0,l.jsx)("span",{style:g.menuItemLabel,children:i});return(0,l.jsx)(o(760217).A,{focused:!1,...m,inline:a,disabled:t,icon:y,title:r,right:(0,l.jsx)(c,{disabled:Boolean(t),isToggle:Boolean(a),isToggleActive:Boolean(u),onClick:s,onClickClear:p}),onClick:s,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:h.menuItem,desktopIconStyle:h.menuItemLabel})};function d(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?i().J.UISmall.mobile:i().J.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function c({disabled:e,isToggle:t,isToggleActive:o,onClick:i,onClickClear:a=(()=>{})}){const c=d((0,n().v3)()).rightWrapper;return t?(0,l.jsx)("div",{style:c,children:(0,l.jsx)(r().A,{on:Boolean(o),onClick:i})}):(0,l.jsx)(s().A,{disabled:e,onClick:a})}}}]);