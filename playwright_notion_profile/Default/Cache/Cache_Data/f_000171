"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39457],{2609:(e,t,s)=>{s.d(t,{J2:()=>I,NF:()=>k,gA:()=>b,hr:()=>A,jl:()=>w,p6:()=>C,rQ:()=>P});s(898992),s(672577),s(581454),s(296540);var n=()=>s(56366),i=()=>s(401497),a=()=>s(729108),o=()=>s(98126),r=()=>s(631524),l=()=>s(160432),d=()=>s(493552),c=()=>s(373009),p=()=>s(803960),g=()=>s(69708),h=()=>s(722872),u=()=>s(115512),y=()=>s(760217),m=()=>s(406699),x=()=>s(404277),f=()=>s(939740),v=()=>s(89924),j=()=>s(475971),S=s(474848);const b=24,I=440,k=I+40;function P(e){const{icon:t,title:s,byline:n,bylineWidthOverride:a}=e,o=(0,i().IS)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,S.jsxs)("div",{style:o.container,children:[t,(0,S.jsx)(d().D,{styleKey:"Title-sm/Semibold",style:o.title,children:s}),(0,S.jsx)(d().D,{styleKey:"Body/Regular",colorVariant:"secondary",style:a?{...o.byline,width:a}:o.byline,children:n})]})}function w(e){const{primaryText:t,primaryAction:s,primaryDisabled:n,secondaryText:a,secondaryAction:d,isLightRed:p,isDarkRed:g,isLoading:h}=e,u=!(p||g),y=(0,i().IS)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:u?"row-reverse":"column",alignItems:"center",justifyContent:u?"flex-start":"flex-end",gap:8,padding:"0 20px",marginInlineStart:-20,width:"calc(100% + 40px)"},fullWidth:u?{}:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...j().W,height:32,color:e.text.secondary}})),[u]);return(0,S.jsxs)("div",{style:y.container,children:[p?(0,S.jsx)(c().E,{size:"lg",onClick:s,colorPalette:p?"red":void 0,disabled:n,style:y.fullWidth,children:h?(0,S.jsx)(o().k,{}):t}):(0,S.jsx)(l().A,{size:"lg",onClick:s,disabled:n,style:y.fullWidth,colorPalette:g?"red":"blue",children:h?(0,S.jsx)(o().k,{}):t}),(0,S.jsx)(r().p,{size:"lg",onClick:d,style:{...y.fullWidth,...y.cancelButton},children:a})]})}function A(e){const{selectedId:t,options:s,onChange:n}=e,a=(0,i().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginInlineStart:3,marginInlineEnd:3,fill:e.icon.tertiary},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},icon:{alignSelf:"start",marginTop:0,fill:e.icon.secondary,height:18,width:18}})),[]);return(0,S.jsxs)("div",{style:a.container,children:[(0,S.jsx)(d().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:(0,S.jsx)(g().sA,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,S.jsx)(m().A,{popupType:m().z.Popup,renderOrigin:e=>{const n=s.find((e=>e.id===t));return n?(0,S.jsx)(y().A,{...e,title:n.title,caption:n.caption,icon:n.icon({fill:a.icon.fill}),desktopIconStyle:a.icon,disabled:!1,right:(0,p().arrowChevronSingleDownIcon)(a.chevron),shouldWrapCaption:!0,buttonStyle:a.selectedButton,focused:!1}):null},originGap:8,placementToOrigin:"bottom",alignmentToOrigin:"center",sameWidthAsOrigin:!0,render:e=>{const i=[{key:"options",render:e=>(0,S.jsx)(v().A,{...e,topBorder:0!==e.index}),items:s.map((s=>{const i=s.id===t;return{key:s.id,render:e=>(0,S.jsx)(y().A,{...e,title:s.title,caption:s.caption,icon:s.icon({fill:a.icon.fill}),desktopIconStyle:a.icon,isChecked:i,shouldWrapCaption:!0}),action:()=>{n(s.id),e.close()}}}))}];return(0,S.jsx)(x().A,{menuType:h().gu.Popup,children:(0,S.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,sections:i})})}})]})}function C(e){const{items:t,selectedIds:s,disabledIds:o,onSelectHeader:r,onSelect:l,titleText:c,headerText:p,headerAction:g}=e,h=(0,i().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.border.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.border.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{paddingTop:4,paddingInlineEnd:4,paddingBottom:4,paddingInlineStart:12,borderBottom:`1px solid ${e.border.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.border.secondary}`}})),[]),y=void 0!==s&&void 0!==o&&l&&r,m=void 0!==o?t.length-o.length:0,x=(0,n().K8)((()=>{if(void 0===s)return!1;let e=0;for(const n of t)s.includes(n.id)&&(e+=1);return 0!==e&&(e===m?0!==m:"partial")}),[t,s,m]);return(0,S.jsxs)("div",{style:h.container,children:[(0,S.jsx)(d().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:c}),(0,S.jsxs)("div",{style:h.selectorContainer,children:[(0,S.jsxs)("div",{style:{...g?h.selectorHeaderWithAction:h.selectorHeader,gridTemplateColumns:y?"24px 1fr 1fr":"1fr 1fr"},children:[y?(0,S.jsx)("div",{style:h.checkbox,children:(0,S.jsx)(a().S,{checked:x,size:14,onClick:r})}):null,(0,S.jsx)(d().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:h.headerText,children:p}),(0,S.jsx)("div",{style:h.right,children:g})]}),(0,S.jsx)("div",{style:h.selectorBody,children:t.map((({id:e,icon:t,name:n,caption:i,byline:r},c)=>(0,S.jsxs)("div",{style:{...h.selectorBodyRow,borderTopWidth:0===c?0:1,gridTemplateColumns:y?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[y?(0,S.jsx)("div",{style:h.checkbox,children:(0,S.jsx)(a().S,{checked:s.includes(e)||o.includes(e),size:14,onClick:()=>l(e),disabled:o.includes(e),style:{opacity:o.includes(e)?.3:1}})}):null,(0,S.jsxs)("div",{style:h.workspace,children:[(0,S.jsx)("div",{style:h.iconContainer,children:t}),(0,S.jsxs)("div",{style:h.textContainer,children:[(0,S.jsx)(d().D,{styleKey:"Body/Medium",style:{...(0,u().pA)(1),textOverflow:"ellipsis"},children:n}),i?(0,S.jsx)(d().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:{...(0,u().pA)(1),textOverflow:"ellipsis"},children:i}):null]})]}),(0,S.jsx)("div",{style:h.byline,children:r})]},e)))})]})]})}},94935:(e,t,s)=>{s.d(t,{r:()=>n});function n(e,t){return(e.getName()||"").localeCompare(t.getName()||"")}},175656:(e,t,s)=>{s.d(t,{C:()=>le});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var n=s(296540),i=()=>s(484714),a=()=>s(56366),o=()=>s(401497),r=()=>s(699143),l=()=>s(252291),d=()=>s(631524),c=()=>s(493552),p=()=>s(416504),g=()=>s(207207),h=()=>s(406533),u=()=>s(340498),y=()=>s(68263),m=()=>s(179034),x=()=>s(69708),f=()=>s(284371),v=()=>s(568721),j=()=>s(285790),S=()=>s(419357),b=()=>s(378765),I=()=>s(939740),k=()=>s(417392),P=()=>s(89924),w=()=>s(859428),A=()=>s(187174),C=()=>s(29037),T=()=>s(100622),M=()=>s(534177),B=()=>s(722872),W=()=>s(645873),O=()=>s(106628),D=()=>s(361330),K=()=>s(148832),H=()=>s(404277),L=()=>s(64e3),z=()=>s(305390),R=()=>s(16006),E=()=>s(320865),V=s(474848);function Y(e){const{spaceId:t,onSelectPage:s,query:n,source:d,findSelectedBlockAncestorId:c,spaceStore:p}=e,g=(0,o().IS)((e=>({hoveredRow:{background:e.buttonHoveredBackground}})),[]),h=(0,i().v3)();let u=null;const f=(0,W().fJ)(O().T.searchActions),[{status:v,value:j}]=(0,A().Yb)((async()=>{if("resolved"!==f.status)return;const e=f.value;return await e.searchPagesInSpace({environment:h,query:n,limit:10,requireEditPermissions:!0,spaceId:t,excludeTemplates:!0,source:d,boostRecentlyViewedPages:!1,spaceStore:p,peopleBlocksToInclude:"none"})}),[f.status,f.value,h,n,t,d,p],{debounce:D().tu}),S=(0,a().K8)((()=>"idle"===v||"pending"===v?[]:((null==j?void 0:j.results)||[]).map((({id:e})=>{const t=new(K().B)(h,{table:m().ev,id:e});return function(e){const{store:t,environment:s,alreadySelectedAncestorId:n,onSelectPage:i,styles:a}=e;if(n&&n===t.id)return{key:t.id,action:()=>{},render:e=>(0,V.jsx)(z().A,{...e,hoveredStyle:a.hoveredRow,store:t,hidePath:!1,disabled:!0,style:{opacity:.5},right:(0,V.jsxs)(r().Y1,{direction:"horizontal",gap:4,align:"center",children:[(0,V.jsx)(l().I,{icon:C().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,V.jsx)("div",{style:{color:T().Tj.blue},children:(0,V.jsx)(x().sA,{id:"oauthPageSearchResults.disabledResult.bySelf.message",defaultMessage:"Already added"})})]})})};if(n){const e=new(K().B)(s,{table:m().ev,id:n});return{key:t.id,action:()=>{},render:s=>(0,V.jsx)(z().A,{...s,hoveredStyle:a.hoveredRow,store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:(0,V.jsx)(x().sA,{id:"oauthPageSearchResults.disabledResult.byAncestor.message",defaultMessage:"Added via {ancestorPageName}",values:{ancestorPageName:(0,V.jsx)(R().A,{store:e,style:{display:"inline"}})}}),right:(0,V.jsxs)(r().Y1,{direction:"horizontal",gap:4,align:"center",children:[(0,V.jsx)(l().I,{icon:C().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,V.jsx)("div",{style:{color:T().Tj.blue},children:(0,V.jsx)(x().sA,{id:"oauthPageSearchResults.disabledResult.bySelf.message",defaultMessage:"Already added"})})]})})}}const o=t.getRole();return o&&y().Km(o)?{key:t.id,action:()=>i(t.id),render:e=>(0,V.jsx)(z().A,{store:t,hidePath:!1,hoveredStyle:a.hoveredRow,...e})}:void 0}({store:t,alreadySelectedAncestorId:c(t),environment:h,onSelectPage:s,styles:g})})).filter(M().O9)),[h,c,s,null==j?void 0:j.results,v,g]);u="idle"===v||"pending"===v?(0,V.jsx)(P().A,{children:(0,V.jsx)(E().A,{})}):0===S.length?(0,V.jsx)(P().A,{children:(0,V.jsx)(L().A,{title:(0,V.jsx)(x().sA,{id:"oauthPageSearchResults.noResults.placeholder",defaultMessage:"No results"})})}):function(e){return(0,V.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:void 0,sections:[{key:"results",items:e,render:e=>(0,V.jsx)(P().A,{...e})}]})}(S);const b={menuType:B().gu.Popup};return(0,V.jsx)(H().A,{...b,children:u})}var N=()=>s(227894),_=()=>s(422366),F=()=>s(94935),q=()=>s(664460),$=()=>s(729108),G=()=>s(760217),U=()=>s(187820);function Z({pageStore:e,isSelected:t,onToggle:s,maxLength:n,styles:i}){const{blockId:l,icon:d,isEmpty:p,iconRecordCategory:g}=(0,a().K8)((()=>({blockId:e.id,icon:e.getIcon(),isEmpty:e.isEmptyPage(),iconRecordCategory:(0,U().Te)(e)})),[e]),h=(0,o().IS)((e=>({buttonStyle:{paddingTop:2,paddingBottom:2}})),[]);return(0,V.jsx)(G().A,{onClick:s,focused:!1,buttonStyle:h.buttonStyle,icon:(0,V.jsx)($().S,{checked:t,size:14,onClick:e=>{e.stopPropagation(),s()}}),title:(0,V.jsxs)(r().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,V.jsx)(U().B6,{disabled:!0,icon:d,iconRecordCategory:g,size:u().Ev.default,pageIconStyle:i.pageIconStyle,isEmptyPage:p}),(0,V.jsx)(c().D,{styleKey:"Body/Medium",children:(0,V.jsx)(R().A,{store:e,maxLength:n??60,showTooltipWhenTruncated:!0})})]})},l)}var J=()=>s(222334),Q=()=>s(972435),X=()=>s(639355);const ee=(0,x().YK)({collapseTeamspace:{id:"creatorProfile.integrations.pageAccess.collapseTeamspace",defaultMessage:"Collapse teamspace"},expandTeamspace:{id:"creatorProfile.integrations.pageAccess.expandTeamspace",defaultMessage:"Expand teamspace"}});function te({teamspaceStore:e,checkType:t,onToggleSelect:s,expanded:n,onExpandToggle:i}){const a=(0,o().IS)((e=>({buttonStyle:{paddingTop:2,paddingBottom:2},buttonRight:{display:"flex",alignItems:"center",cursor:"pointer"}})),[]);return(0,V.jsx)(G().A,{onClick:i,focused:!1,icon:(0,V.jsx)($().S,{checked:t,size:14,onClick:e=>{e.stopPropagation(),s()}}),right:(0,V.jsx)("div",{role:"button",tabIndex:0,style:a.buttonRight,onClick:e=>{e.stopPropagation(),i()},"aria-label":n?Q().A.formatMessage(ee.collapseTeamspace):Q().A.formatMessage(ee.expandTeamspace),children:(0,V.jsx)(l().I,{icon:J().arrowChevronSingleRightIcon,size:"xs",style:{transform:n?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.1s ease-in-out"}})}),title:(0,V.jsx)(X().I,{teamStore:e}),buttonStyle:a.buttonStyle},e.id)}var se=()=>s(247601);const ne=(0,x().YK)({selectPagesLabel:{id:"pageAccess.modal.selectPagesLabel",defaultMessage:"Select pages"},searchPlaceholder:{id:"pageAccess.modal.searchPlaceholder",defaultMessage:"Search pages"},selectAll:{id:"pageAccess.modal.selectAll",defaultMessage:"Select all"},deselectAll:{id:"pageAccess.modal.deselectAll",defaultMessage:"Deselect all"},remove:{id:"pageAccess.modal.removePage",defaultMessage:"Remove"},noPagesMessage:{id:"pageAccess.modal.noPagesMessage",defaultMessage:"No pages found"},addPagesMessage:{id:"pageAccess.modal.addPagesMessage",defaultMessage:"Add pages first to give this integration access"},tooltip:{id:"pageAccess.modal.tooltip",defaultMessage:"Only pages where you have Full Access will appear here"}}),ie={...s(404200).V,...ne};const ae=420;function oe({key:e,title:t,allItems:s,styles:n}){return{key:e,title:t,content:(0,V.jsx)("div",{style:n.menuList,children:(0,V.jsx)(I().Ay,{type:I().Oh.Vertical,sections:[{key:e,render:e=>(0,V.jsx)(P().A,{...e}),items:s}],initialFocus:void 0})}),sectionContentStyleOverride:{padding:0}}}const re=s(757695).Store.createClass({},{name:"SelectedBlockIdsStore"});function le({teamPagesByTeam:e,pagesSharedWithUser:t,privatePages:s,workspacePages:I,selectedBlockIdsStore:P,allTeams:A,spaceStore:C,heightOverride:T=320}){const M=(0,x().tz)(),B=(0,i().v3)(),W=function(e){return(0,o().IS)((t=>({icon:{width:u().Ev.xl,height:u().Ev.xl,color:t.icon.secondary},pageIconStyle:{fill:t.icon.secondary},nestedPageItem:{marginInlineStart:24},sectionsContainer:{borderRadius:8},button:{minWidth:120},sectionHeading:{color:t.palette.gray[500],fontWeight:f().Wy.medium},subSectionHeading:{padding:"8px",color:t.palette.gray[500],fontWeight:f().Wy.medium},subSectionRowWithBorder:{borderTop:`1px solid ${t.border.secondary}`,marginTop:4,width:"100%"},pageSelectionContainer:{height:e,overflowY:"auto",borderRadius:8,border:`1px solid ${t.border.secondary}`,padding:4},noPagesContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:16},tooltipIcon:{width:u().Ev.sm,height:u().Ev.sm},tooltipText:{width:200}})),[e])}(T),[O,D]=n.useState(""),H=(0,a().uB)(P,re),L=e=>{H.setState({...H.state,[e]:!H.state[e]})},z=(0,a().K8)((()=>new Set(Object.keys(H.state).filter((e=>H.state[e])).filter((e=>{const t=new(K().B)(B,{table:m().ev,id:e,spaceId:C.id});return(0,y().Km)(t.getRole()||"none")&&!t.pathIsDead()&&t.isNavigableBlock()})))),[H,B,C.id]),{topLevelShareableSharedPageIds:R,topLevelShareablePrivatePageIds:E,topLevelShareableTeamspacePageIds:$,topLevelShareableWorkspacePageIds:G,shareableTeamPagesByTeam:U,selectedNonTopLevelSharedPageIds:J,selectedNonTopLevelPrivatePageIds:Q,selectedNonTopLevelWorkspacePageIds:X,teamspaceManualSet:ee}=(0,se().a)({pagesSharedWithUser:t,privatePages:s,workspacePages:I,teamPagesByTeam:e,selectedPageIds:z,spaceStore:C}),[ne,le]=n.useState(new Set);const de=(0,n.useCallback)((e=>function(e,t){const s=(0,N().g)(e);for(const n of s)if(n.table===m().ev){if(t.has(n.id))return n.id;if(n.isRestricted())break}}(e,new Set(z))),[z]);function ce(e,t){const s={...H.state};for(const n of e)s[n]=t;H.setState(s)}const pe=[],ge=n.useMemo((()=>new Map),[]),{sortedTopLevelSharedIds:he,sortedTopLevelPrivateIds:ue,sortedTeamspaceManualIds:ye,sortedTopLevelWorkspacePageIds:me,sortedNonTopLevelSharedIds:xe,sortedNonTopLevelPrivateIds:fe,sortedNonTopLevelWorkspacePageIds:ve,sortedTeams:je}=(0,a().K8)((()=>{const e=ge,t=t=>{let s=e.get(t);var n;void 0===s&&(s=(null===(n=new(K().B)(B,{table:m().ev,id:t,spaceId:C.id}).getRenderTitle({intl:M,userTimeZone:(0,p().P)()}))||void 0===n?void 0:n.toString())??"",e.set(t,s));return s},s=(e,s)=>t(e).localeCompare(t(s));return{sortedTopLevelSharedIds:[...R].sort(s),sortedTopLevelPrivateIds:[...E].sort(s),sortedTeamspaceManualIds:[...ee].sort(((e,t)=>{const n=e=>{var t;const s=new(K().B)(B,{table:m().ev,id:e,spaceId:C.id});return(null===(t=(0,_().U)(s))||void 0===t?void 0:t.getName())||""},i=n(e),a=n(t);return i!==a?i.localeCompare(a):s(e,t)})),sortedNonTopLevelSharedIds:[...J].sort(s),sortedNonTopLevelPrivateIds:[...Q].sort(s),sortedTeams:[...A].sort(F().r),sortedTopLevelWorkspacePageIds:[...G].sort(s),sortedNonTopLevelWorkspacePageIds:[...X].sort(s)}}),[B,M,C.id,R,E,ee,J,Q,G,X,A,ge]),Se=n.useMemo((()=>new Map),[]),be=n.useCallback((e=>{let t=Se.get(e);return t||(t=new(K().B)(B,{table:m().ev,id:e,spaceId:C.id}),Se.set(e,t)),t}),[B,C.id,Se]);if(!(!(R.size>0||E.size>0)||(he.length>0||ue.length>0)))return(0,V.jsx)(b().A,{loaded:!1,showSpinnerTimeout:0});if($.size>0||ee.size>0){const e=[];if(ee.size>0){e.push({key:"teamspace-manual-header",action:()=>{},render:()=>(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:M.formatMessage(ie.manuallySelectedPagesHeader)})});for(const t of ye){const s=be(t);e.push({key:`manual-${t}`,action:()=>{L(t)},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:W.subSectionHeading.padding},children:[(0,V.jsx)("div",{children:(0,V.jsx)(q().y,{blockStore:s,maxWidth:ae})}),(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{L(t)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.remove)})})]})})}}ee.size>0&&$.size>0&&e.push({key:"teamspace-manual-divider",action:()=>{},render:()=>(0,V.jsx)("div",{style:W.subSectionRowWithBorder})});const t=Array.from($).some((e=>z.has(e)));e.push({key:"teamspace-top-level-header",action:()=>{},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:(0,V.jsx)(x().sA,{...ie.teamspacesHeaderSubheader})}),t?(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce($,!1)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.deselectAll)})}):(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce($,!0)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.selectAll)})})]})});const s=je.filter((e=>U[e.id]&&U[e.id].length>0));for(const i of s){const t=U[i.id].filter((e=>z.has(e))),s=0!==t.length&&(t.length===U[i.id].length||"partial"),n=ne.has(i.id);if(e.push({key:`teamspace-${i.id}`,action:()=>{},render:()=>(0,V.jsx)(te,{teamspaceStore:i,checkType:s,onToggleSelect:()=>ce(U[i.id],!s),expanded:n,onExpandToggle:()=>{return e=i.id,void le((t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}));var e}})}),n)for(const a of U[i.id]){const t=be(a);e.push({key:a,action:()=>{L(a)},render:()=>(0,V.jsx)("div",{style:W.nestedPageItem,children:(0,V.jsx)(Z,{pageStore:t,isSelected:z.has(a),onToggle:()=>{L(a)},styles:W,maxLength:50})})})}}const n=oe({key:"teamspaces",title:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.sectionHeading,children:(0,V.jsx)(x().sA,{...ie.teamspacesHeader})}),allItems:e,styles:W});pe.push(n)}if((G.size>0||X.length>0)&&0===A.length){const e=[];if(X.length>0){e.push({key:"workspaceManualHeader",action:()=>{},render:()=>(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:M.formatMessage(ie.manuallySelectedPagesHeader)})});for(const t of ve){const s=be(t);e.push({key:t,action:()=>{L(t)},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:W.subSectionHeading.padding},children:[(0,V.jsx)("div",{children:(0,V.jsx)(q().y,{blockStore:s,maxWidth:ae})}),(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{L(t)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.remove)})})]})})}}if(X.length>0&&G.size>0&&e.push({key:"shared-manual-divider",action:()=>{},render:()=>(0,V.jsx)("div",{style:W.subSectionRowWithBorder})}),G.size>0){const t=Array.from(G).some((e=>z.has(e)));e.push({key:"workspaces-top-level-header",action:()=>{},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:(0,V.jsx)(x().sA,{...ie.topLevelPagesHeader})}),t?(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(G,!1)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.deselectAll)})}):(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(G,!0)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.selectAll)})})]})})}e.push(...me.map((e=>{const t=be(e);return{key:t.id,action:()=>{L(t.id)},render:()=>(0,V.jsx)("div",{children:(0,V.jsx)(Z,{pageStore:t,isSelected:z.has(t.id),onToggle:()=>{L(t.id)},styles:W,maxLength:50})})}})));const t=oe({key:"workspacePages",title:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.sectionHeading,children:(0,V.jsx)(x().sA,{...ie.workspacePagesHeader})}),allItems:e,styles:W});pe.push(t)}if(R.size>0||J.length>0){const e=[];if(J.length>0){e.push({key:"sharedManualHeader",action:()=>{},render:()=>(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:M.formatMessage(ie.manuallySelectedPagesHeader)})});for(const t of xe){const s=be(t);e.push({key:t,action:()=>{L(t)},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:W.subSectionHeading.padding},children:[(0,V.jsx)("div",{children:(0,V.jsx)(q().y,{blockStore:s,maxWidth:ae})}),(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{L(t)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.remove)})})]})})}}if(J.length>0&&R.size>0&&e.push({key:"shared-manual-divider",action:()=>{},render:()=>(0,V.jsx)("div",{style:W.subSectionRowWithBorder})}),R.size>0){const t=Array.from(R).some((e=>z.has(e)));e.push({key:"shared-top-level-header",action:()=>{},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:(0,V.jsx)(x().sA,{...ie.topLevelPagesHeader})}),t?(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(R,!1)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.deselectAll)})}):(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(R,!0)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.selectAll)})})]})})}e.push(...he.map((e=>{const t=be(e);return{key:t.id,action:()=>{L(t.id)},render:()=>(0,V.jsx)("div",{children:(0,V.jsx)(Z,{pageStore:t,isSelected:z.has(t.id),onToggle:()=>{L(t.id)},styles:W,maxLength:50})})}})));const t=oe({key:"sharedPages",title:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.sectionHeading,children:(0,V.jsx)(x().sA,{...ie.sharedPagesHeader})}),allItems:e,styles:W});pe.push(t)}if(ue.length>0||Q.length>0){const e=[];if(Q.length>0){e.push({key:"privateManualHeader",action:()=>{},render:()=>(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:M.formatMessage(ie.manuallySelectedPagesHeader)})});for(const t of fe){const s=be(t);e.push({key:t,action:()=>{L(t)},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:W.subSectionHeading.padding},children:[(0,V.jsx)("div",{children:(0,V.jsx)(q().y,{blockStore:s,maxWidth:ae})}),(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{L(t)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.remove)})})]})})}}if(Q.length>0&&ue.length>0&&e.push({key:"private-manual-divider",action:()=>{},render:()=>(0,V.jsx)("div",{style:W.subSectionRowWithBorder})}),ue.length>0){const t=Array.from(E).some((e=>z.has(e)));e.push({key:"private-top-level-header",action:()=>{},render:()=>(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.subSectionHeading,children:(0,V.jsx)(x().sA,{...ie.topLevelPagesHeader})}),t?(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(E,!1)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.deselectAll)})}):(0,V.jsx)(d().p,{colorPalette:"blue",onClick:()=>{ce(E,!0)},children:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",children:M.formatMessage(ie.selectAll)})})]})})}e.push(...ue.map((e=>{const t=be(e);return{key:t.id,action:()=>{L(t.id)},render:()=>(0,V.jsx)("div",{children:(0,V.jsx)(Z,{pageStore:t,isSelected:z.has(t.id),onToggle:()=>{L(t.id)},styles:W,maxLength:50})})}})));const t=oe({key:"privatePages",title:(0,V.jsx)(c().D,{styleKey:"Caption/Medium",colorVariant:"secondary",style:W.sectionHeading,children:(0,V.jsx)(x().sA,{...ie.privatePagesHeader})}),allItems:e,styles:W});pe.push(t)}return 0===pe.length?(0,V.jsx)("div",{style:W.pageSelectionContainer,children:(0,V.jsx)("div",{style:W.sectionsContainer,children:(0,V.jsxs)(r().Y1,{direction:"vertical",gap:8,align:"center",padding:24,children:[(0,V.jsx)(c().D,{styleKey:"Body/Semibold",children:(0,V.jsx)(x().sA,{...ie.noPagesMessage})}),(0,V.jsx)(c().D,{styleKey:"Body-sm/Regular",children:(0,V.jsx)(x().sA,{...ie.addPagesMessage})})]})})}):(0,V.jsxs)(r().Y1,{direction:"vertical",gap:12,children:[(0,V.jsxs)(r().Y1,{direction:"horizontal",width:"hug",align:"center-left",children:[(0,V.jsx)(c().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,V.jsx)(x().sA,{...ie.selectPagesLabel})}),(0,V.jsx)(w().A,{textWrap:!0,renderTooltip:()=>(0,V.jsx)("div",{style:W.tooltipText,children:M.formatMessage(ie.tooltip)}),render:e=>(0,V.jsx)("div",{...e,children:(0,V.jsx)(j().A,{ariaLabel:M.formatMessage(ie.tooltip),icon:h().questionMarkCircleIcon,size:"sm",disableBackground:!0})}),placement:"right"})]}),(0,V.jsx)("div",{children:(0,V.jsx)(k().Ay,{trapFocus:!1,origin:(0,V.jsx)(S().Ay,{focus:!0,focusAfterAnimation:!0,value:O||"",onChange:e=>{D(e.target.value)},placeholder:M.formatMessage(ie.searchPlaceholder),inputLeft:(0,V.jsx)(l().I,{icon:g().J,colorVariant:"secondary"}),inputOuterStyle:{height:32},ignoreKeyboardMode:!0,style:{padding:0}}),sameWidthAsOrigin:!0,popupType:k().nl.Popup,open:""!==O,render:()=>(0,V.jsx)(Y,{spaceId:C.id,spaceStore:C,onSelectPage:e=>{L(e)},query:O||"",source:"internal_integrations_page_picker",findSelectedBlockAncestorId:de}),onDismiss:()=>D("")})}),(0,V.jsx)("div",{style:W.pageSelectionContainer,children:(0,V.jsx)("div",{style:W.sectionsContainer,children:(0,V.jsx)(v().b,{sections:pe})})})]})}},247601:(e,t,s)=>{s.d(t,{a:()=>p});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var n=s(296540),i=()=>s(484714),a=()=>s(56366),o=()=>s(68263),r=()=>s(179034),l=()=>s(854150),d=()=>s(227894),c=()=>s(148832);function p({pagesSharedWithUser:e,privatePages:t,workspacePages:s,teamPagesByTeam:o,selectedPageIds:p,spaceStore:h}){const u=(0,i().v3)(),y=(0,a().K8)((()=>new Set(e.filter((e=>g(e))).map((({id:e})=>e)))),[e]),m=(0,a().K8)((()=>new Set(t.filter((e=>g(e))).map((({id:e})=>e)))),[t]),x=(0,a().K8)((()=>new Set(Object.values(o).flat().filter((e=>g(new(c().B)(u,{table:r().ev,id:e,spaceId:h.id})))))),[u,h.id,o]),f=(0,a().K8)((()=>new Set(s.filter((e=>g(e))).map((({id:e})=>e)))),[s]),v=(0,n.useMemo)((()=>{const e={};for(const t of Object.keys(o))e[t]=o[t].filter((e=>x.has(e)));return e}),[o,x]),j=(0,a().K8)((()=>{const e=[];for(const t of p){if(y.has(t)||m.has(t)||x.has(t))continue;const s=new(c().B)(u,{table:r().ev,id:t,spaceId:h.id});!s.isTopLevel()&&g(s)&&e.push(t)}return e}),[p,y,m,x,u,h.id]),S=(0,a().K8)((()=>{const e=new Set;for(const t of p){if(x.has(t))continue;const s=new(c().B)(u,{table:r().ev,id:t,spaceId:h.id});(0,d().g)(s).some((e=>e.table===l().yK))&&g(s)&&e.add(t)}return e}),[p,x,u,h.id]),b=(0,a().K8)((()=>{const e=[];for(const t of p){if(f.has(t)||S.has(t))continue;const s=new(c().B)(u,{table:r().ev,id:t,spaceId:h.id});(0,d().g)(s).some((e=>e.table===r().ev&&e.isTopLevelWorkspacePage(h.id)))&&e.push(t)}return e}),[u,p,h.id,f,S]),I=(0,a().K8)((()=>{const e=[];for(const t of p){if(m.has(t)||y.has(t)||x.has(t)||S.has(t))continue;const s=new(c().B)(u,{table:r().ev,id:t,spaceId:h.id});(0,d().g)(s).some((e=>e.table===r().ev&&e.isTopLevelPrivatePage()))&&e.push(t)}return e}),[p,m,y,x,u,h.id,S]);return{topLevelShareableSharedPageIds:y,topLevelShareablePrivatePageIds:m,topLevelShareableTeamspacePageIds:x,topLevelShareableWorkspacePageIds:f,shareableTeamPagesByTeam:v,selectedNonTopLevelSharedPageIds:j,selectedNonTopLevelPrivatePageIds:I,selectedNonTopLevelWorkspacePageIds:b,teamspaceManualSet:S}}function g(e){return!e.pathIsDead()&&(0,o().Km)(e.getRole()||"none")}},404200:(e,t,s)=>{s.d(t,{V:()=>n});const n=(0,s(69708).YK)({teamspacesHeader:{id:"pageAccess.teamspacesHeader",defaultMessage:"Teamspaces"},teamspacesHeaderSubheader:{id:"pageAccess.teamspacesSubheader",defaultMessage:"Teamspace pages"},topLevelPagesHeader:{id:"pageAccess.topLevelPagesHeader",defaultMessage:"Top level pages"},manuallySelectedPagesHeader:{id:"pageAccess.manuallySelectedPagesHeader",defaultMessage:"Manually selected"},sharedPagesHeader:{id:"pageAccess.sharedPagesHeader",defaultMessage:"Shared"},privatePagesHeader:{id:"pageAccess.privatePagesHeader",defaultMessage:"Private"},workspacePagesHeader:{id:"pageAccess.workspacePagesHeader",defaultMessage:"Workspace"}})},449705:(e,t,s)=>{s.d(t,{E:()=>A});s(296540);var n=()=>s(726637),i=()=>s(56366),a=()=>s(401497),o=()=>s(150161),r=()=>s(631524),l=()=>s(626466),d=()=>s(805697),c=s(474848);const p={viewBox:"0 0 20 20",fittedViewBox:"1.95 3.3 16.1 14.08",svg:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("path",{d:"M4.075 3.3A2.125 2.125 0 0 0 1.95 5.425V16.75c0 .345.28.625.625.625h2.6V13.6a.55.55 0 0 1 .55-.55h3.6a.55.55 0 0 1 .55.55v3.775H13.1V5.425A2.125 2.125 0 0 0 10.975 3.3zm1.875 4a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M5.95 11.8a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m3.825-5.175a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M9.1 9.55a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0"}),(0,c.jsx)("path",{d:"M8.775 17.375h-2.5V14.15h2.5zm5.425 0v-8.45h1.725c1.174 0 2.125.951 2.125 2.125v5.7c0 .345-.28.625-.625.625zm1.82-4.675a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 0-1.35 0 .675.675 0 0 0 1.35 0"})]})},g=(0,s(340498).wt)("teamspaceFill",p);var h=()=>s(69708),u=()=>s(284371),y=()=>s(894267),m=()=>s(722872),x=()=>s(463830),f=()=>s(760217),v=()=>s(406699),j=()=>s(249117),S=()=>s(404277),b=()=>s(678553),I=()=>s(939740),k=()=>s(89924);const P=380,w=(0,h().YK)({defaultOption:{id:"manageIntegrationPermissionsMenu.defaultOption",defaultMessage:"Default"},defaultOptionDescription:{id:"manageIntegrationPermissionsMenu.defaultOptionDescription",defaultMessage:"Workspace owners and members can manage access"},workspaceOwnersOption:{id:"manageIntegrationPermissionsMenu.workspaceOwnersOption",defaultMessage:"Workspace Owners"},workspaceOwnersOptionDescription:{id:"manageIntegrationPermissionsMenu.workspaceOwnersOptionDescription",defaultMessage:"Only workspace owners can manage access"}});function A(e){const{isAdminOnly:t,onToggleAdminOnly:s,disabled:p}=e,A=(0,i().uB)(void 0,x().A),C=(0,a().IS)((e=>({container:{width:"100%"},triggerButton:{...(0,o().qq)({size:"lg",hasIconOnly:!1,isButtonGapEnabled:!0}),flexDirection:"column",alignItems:"stretch",justifyContent:"center",width:"100%",minHeight:70,padding:`${j().YK[5]}px ${o().mw.lg}px`,backgroundColor:e.background.primary,...p?{borderBottom:`1px solid ${e.border.secondary}`,":hover":{backgroundColor:e.background.secondary,borderColor:e.border.primary}}:{border:`1px solid ${e.border.secondary}`}},triggerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",height:"100%"},triggerContent:{display:"flex",alignItems:"center",gap:j().YK[4],flex:1,minWidth:0},triggerTextWrapper:{flex:1,minWidth:0},triggerTitle:{fontSize:y().y7.Body.fontSize,fontWeight:u().Wy.medium,color:e.text.primary,lineHeight:y().y7.Body.lineHeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},triggerDescription:{fontSize:y().y7["Body-sm"].fontSize,color:e.text.secondary,lineHeight:y().y7["Body-sm"].lineHeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},iconStyle:{...(0,o().qq)({size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fill:e.text.secondary,marginInlineEnd:0},menuItemIcon:{...(0,o().qq)({size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),alignSelf:"center",marginTop:0,marginInlineEnd:0},menuItemIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:b().pg,minHeight:b().pg,flexShrink:0}})),[p]),T={default:{title:w.defaultOption,description:w.defaultOptionDescription,icon:d().globeFillIcon,adminOnlyValue:!1},workspace_owners:{title:w.workspaceOwnersOption,description:w.workspaceOwnersOptionDescription,icon:g,adminOnlyValue:!0}},M=t?T.workspace_owners:T.default,B=["default","workspace_owners"].map((e=>(({key:e,adminOnlyValue:n,title:i,description:a,icon:o})=>({key:e,action:()=>{s&&(s(n),A.reset())},render:e=>(0,c.jsx)(f().A,{...e,title:(0,c.jsx)(h().sA,{...i}),caption:(0,c.jsx)(h().sA,{...a}),icon:(0,c.jsx)("div",{style:C.menuItemIconContainer,children:o(C.iconStyle)}),desktopIconStyle:C.menuItemIcon,isChecked:t===n,shouldWrapCaption:!0,onClick:()=>{s&&(s(n),A.reset())}})}))({key:e,...T[e]}))),W=[{key:"integration-permissions-section",render:e=>(0,c.jsx)(k().A,{...e}),items:B}];return(0,c.jsx)("div",{style:C.container,children:(0,c.jsx)(v().A,{popupType:n().A.isMobile?v().z.BottomSheet:v().z.Popup,buttonPopupStore:A,renderOrigin:e=>(0,c.jsx)(r().p,{...e,style:C.triggerButton,disabled:p,children:(0,c.jsxs)("div",{style:C.triggerHeader,children:[(0,c.jsxs)("div",{style:C.triggerContent,children:[(0,c.jsx)("div",{style:C.iconStyle,children:M.icon(C.iconStyle)}),(0,c.jsxs)("div",{style:C.triggerTextWrapper,children:[(0,c.jsx)("div",{style:C.triggerTitle,children:(0,c.jsx)(h().sA,{...M.title})}),(0,c.jsx)("div",{style:C.triggerDescription,children:(0,c.jsx)(h().sA,{...M.description})})]})]}),p?void 0:(0,l().arrowChevronSingleDownFillIcon)(C.iconStyle)]})}),render:()=>(0,c.jsx)(S().A,{menuType:n().A.isMobile?m().gu.ActionSheet:m().gu.Popup,width:P,children:(0,c.jsx)(I().Ay,{type:I().Oh.Vertical,sections:W,initialFocus:void 0})})})})}},457812:(e,t,s)=>{s.d(t,{r:()=>P});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698);var n=s(296540),i=()=>s(564884),a=()=>s(242422),o=()=>s(484714),r=()=>s(401497),l=()=>s(699143),d=()=>s(631524),c=()=>s(160432),p=()=>s(493552),g=()=>s(920495),h=()=>s(340498),u=()=>s(69708),y=()=>s(908928),m=(s(16280),()=>s(542585)),x=()=>s(559506);var f=()=>s(107683),v=()=>s(449705),j=()=>s(2609),S=()=>s(175656),b=s(474848);const I=(0,u().YK)({modalHeader:{id:"pageAccess.modal.header",defaultMessage:"Manage page access"},byline:{id:"pageAccess.modal.byline",defaultMessage:"Choose which pages this integration can access. Add unlinked pages with search."},bylineEnterprise:{id:"pageAccess.modal.bylineEnterprise",defaultMessage:"Choose which pages this integration can access, and who manages access. Add unlinked pages with search."},saveButton:{id:"pageAccess.modal.saveButton",defaultMessage:"Save"},cancelButton:{id:"pageAccess.modal.cancelButton",defaultMessage:"Cancel"},whoCanManagePageAccess:{id:"pageAccess.modal.whoCanManagePageAccess",defaultMessage:"Who can manage page access"}});function k({onClose:e,onCloseWithoutReset:t,pageIdsAlreadySharedWithBot:s,teamPagesByTeam:f,allTeams:k,privatePages:P,pagesSharedWithUser:w,workspacePages:A,spaceId:C,botStore:T,spaceStore:M,refetchBotSharedPages:B,selectedBlockIdsStore:W,pagePickerLocation:O,integrationManagementPermissions:D}){const K=(0,r().IS)((e=>({icon:{width:h().Ev.xl,height:h().Ev.xl,color:e.icon.secondary},pagePickerLayout:{flexGrow:1,minHeight:0},adminToggleLayout:{paddingTop:8,paddingBottom:8},saveButtonLayout:{flexShrink:0}})),[]),H=(0,u().tz)(),L=(0,o().v3)(),[z,R]=n.useState(!1),[E,V]=n.useState(D.effectiveAdminOnly);n.useEffect((()=>{V(D.effectiveAdminOnly)}),[D.effectiveAdminOnly]);const Y=async()=>{R(!0);const{pageIdAndOperations:e,numPagesAdded:n,numPagesRemoved:o}=function(e,t){const s=new Set(e),n=t.state,i=[];let a=0,o=0;for(const r of Object.keys(n)){const e=n[r],t=s.has(r);t&&!e?(i.push({pageId:r,operationType:"remove"}),o++):!t&&e&&(i.push({pageId:r,operationType:"add"}),a++)}return{pageIdAndOperations:i,numPagesAdded:a,numPagesRemoved:o}}(s,W),r=await async function(e){const{environment:t,spaceStore:s,botStore:n,pageIdAndOperations:i,isAdminOnly:o,integrationManagementPermissions:r}=e;let l;o!==r.effectiveAdminOnly&&(l=o);const d=i.length>0,c=void 0!==l;if(!d&&!c)return!1;if(a().default.checkGate({gateName:"public_api_enable_bulk_update_bot_permissions"}))return await y().iN({environment:t,spaceStore:s,botStore:n,pageIdAndOperations:i,effectiveAdminOnly:l});{const e=await y().lM({environment:t,spaceStore:s,botStore:n,pageIdAndOperations:i}),a=n.getIntegrationId();return void 0!==l&&a&&await async function(e){const{environment:t,integrationId:s,spaceId:n,adminOnly:i}=e,a=await x().callApi({eventName:"upsertIntegrationManagementPermissions",environment:t,data:{integrationId:s,spaceId:n,adminOnly:i}});var o;if("success"!==a.type)throw new Error(`Failed to update integration permissions: ${(null===(o=a.error)||void 0===o?void 0:o.message)||"Unknown error"}`);{const e=m().b.getPermissionForIntegration(s);m().b.updatePermissions({[s]:{...e,effectiveAdminOnly:i}})}}({environment:t,integrationId:a,spaceId:s.getSpaceId(),adminOnly:l}),e}}({environment:L,spaceStore:M,botStore:T,pageIdAndOperations:e,isAdminOnly:E,integrationManagementPermissions:D});r&&((0,i().u)({environment:L,event:{eventName:"clearer_integration_access_page_access_updated",eventProperties:{triggered_from:O,pages_added:n,pages_removed:o,space_id:C,bot_id:T.id}}}),B&&await B()),R(!1),t()},N=D.featureEnabled,_=N?200:280;return(0,b.jsxs)(l().Y1,{direction:"vertical",height:"fill",padding:24,gap:20,children:[(0,b.jsxs)(l().Y1,{gap:24,direction:"vertical",style:K.pagePickerLayout,children:[(0,b.jsx)(j().rQ,{icon:(0,g().n)(K.icon),title:H.formatMessage(I.modalHeader),byline:N?H.formatMessage(I.bylineEnterprise):H.formatMessage(I.byline),bylineWidthOverride:"60%"}),(0,b.jsx)(S().C,{teamPagesByTeam:f,allTeams:k,privatePages:P,pagesSharedWithUser:w,workspacePages:A,spaceId:C,spaceStore:M,selectedBlockIdsStore:W,heightOverride:_})]}),N?(0,b.jsxs)(l().Y1,{direction:"vertical",gap:12,style:K.adminToggleLayout,children:[(0,b.jsx)(p().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:(0,b.jsx)(u().sA,{...I.whoCanManagePageAccess})}),(0,b.jsx)(v().E,{integrationManagementPermissions:D,isAdminOnly:E,onToggleAdminOnly:V,disabled:z})]}):void 0,(0,b.jsxs)(l().Y1,{gap:8,direction:"horizontal",align:"center-right",style:K.saveButtonLayout,children:[(0,b.jsx)(d().p,{onClick:e,disabled:z,size:"lg",children:(0,b.jsx)(p().D,{styleKey:"Body/Medium",colorVariant:"secondary",children:H.formatMessage(I.cancelButton)})}),(0,b.jsx)(c().A,{colorPalette:"blue",size:"lg",onClick:async()=>await Y(),isLoading:z,disabled:z,children:H.formatMessage(I.saveButton)})]})]})}function P(e){const{onClose:t,selectedBlockIdsStore:s,pageIdsAlreadySharedWithBot:i}=e,a=n.useCallback((()=>{const e={};for(const t of i)e[t]=!0;s.setState(e),t()}),[t,s,i]);return(0,b.jsx)(f().s,{areaConstraint:{width:{type:"fixed",length:700},height:{type:"max",length:680}},isOpen:e.isOpen,onDismiss:a,render:()=>(0,b.jsx)(k,{...e,onClose:a,onCloseWithoutReset:t})})}},475971:(e,t,s)=>{s.d(t,{M:()=>i,W:()=>n});const n={height:28,paddingInlineStart:8,paddingInlineEnd:8,paddingTop:4,paddingBottom:4,fontWeight:s(284371).Wy.medium},i={opacity:.4}},568721:(e,t,s)=>{s.d(t,{b:()=>g});s(581454);var n=s(296540),i=()=>s(401497),a=()=>s(718827),o=()=>s(222334),r=()=>s(340498),l=()=>s(284371),d=()=>s(21140),c=()=>s(125565),p=s(474848);function g(e){const{sections:t,expandAllWhenSectionsChange:s=!1}=e,g=(0,i().IS)((e=>({container:{display:"grid",gap:4},sectionButton:{background:e.palette.translucentGray[50],borderRadius:6,padding:"8px 12px"},sectionButtonHovered:{background:e.palette.translucentGray[100]},sectionButtonPressed:{background:e.lightGrayButtonPressedBackground},sectionButtonLabel:{justifyContent:"space-between",display:"flex",alignItems:"center"},sectionTitle:{fontWeight:l().Wy.medium,padding:0},sectionButtonIconArea:{alignItems:"center"},chevronIcon:{width:r().Ev.xs,height:r().Ev.xs,marginInlineStart:12,transition:"transform 200ms ease-out"},sectionContent:{padding:"12px 24px"}})),[]),[h,u]=n.useState({});return n.useEffect((()=>{if(s){const e={};for(const s of t)s.hidden||(e[s.key]=!0);u(e)}}),[t,s]),(0,p.jsx)("div",{style:g.container,children:t.map((e=>{if(e.hidden)return null;const t=Boolean(h[e.key]),s=!1!==e.collapsible;return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:s?(0,p.jsx)(a().Ay,{onClick:()=>u({...h,[e.key]:!t}),style:g.sectionButton,hoveredStyle:g.sectionButtonHovered,children:(0,p.jsxs)(d().Ye,{style:g.sectionButtonLabel,children:[(0,p.jsx)("div",{children:(0,p.jsx)(c().A,{style:g.sectionTitle,children:e.title})}),(0,p.jsxs)(d().Ye,{style:g.sectionButtonIconArea,children:[e.secondaryLabel?(0,p.jsx)(c().A,{isSecondaryColor:!0,children:e.secondaryLabel}):void 0,(0,o().arrowChevronSingleRightIcon)({...g.chevronIcon,transform:`rotateZ(${t?90:0}deg)`})]})]})}):(0,p.jsx)("div",{style:g.sectionButton,children:(0,p.jsxs)(d().Ye,{style:g.sectionButtonLabel,children:[(0,p.jsx)("div",{children:(0,p.jsx)(c().A,{style:g.sectionTitle,children:e.title})}),e.secondaryLabel?(0,p.jsx)(c().A,{isSecondaryColor:!0,children:e.secondaryLabel}):void 0]})})}),e.content?(0,p.jsx)("div",{style:{...e.sectionContentStyleOverride?e.sectionContentStyleOverride:g.sectionContent,display:t?"block":"none"},children:e.content}):void 0]},e.key)}))})}},639355:(e,t,s)=>{s.d(t,{I:()=>d});s(296540);var n=()=>s(699143),i=()=>s(493552),a=()=>s(340498),o=()=>s(16006),r=()=>s(898808),l=s(474848);function d(e){const{teamStore:t}=e;return(0,l.jsxs)(n().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,l.jsx)(r().x,{disabled:!0,store:t,size:a().Ev.default}),(0,l.jsx)(i().D,{styleKey:"Body/Medium",children:(0,l.jsx)(o().A,{store:t})})]})}},664460:(e,t,s)=>{s.d(t,{y:()=>v});var n=s(296540),i=()=>s(56366),a=()=>s(699143),o=()=>s(970236),r=()=>s(493552),l=()=>s(340498),d=()=>s(187820),c=()=>s(16006),p=()=>s(972435),g=()=>s(401497),h=()=>s(128295),u=()=>s(859428),y=()=>s(828634),m=s(474848);function x({blockStore:e,maxWidth:t}){const s=(0,g().IS)((e=>({truncatedText:{maxWidth:t,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},tooltipRecordPath:{flexWrap:"wrap",overflow:"visible"}})),[t]),i=(0,g().DP)(),a=n.useRef(null),[o,r]=n.useState(!1),l=n.useCallback((()=>{const e=a.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;if(!t)for(const s of Array.from(e.querySelectorAll("*")))if(s.scrollWidth>s.clientWidth){t=!0;break}r((e=>e===t?e:t))}),[]);n.useEffect((()=>{l()}),[l,t]);const d=n.useRef(void 0),c=n.useCallback((e=>{d.current!==e&&(d.current=e,l())}),[l]);return(0,y().tK)(a,c),(0,m.jsx)(u().A,{textWrap:!0,placement:"top",disableTooltip:!o,render:t=>(0,m.jsx)("div",{...t,ref:a,style:s.truncatedText,children:(0,m.jsx)(h().Ay,{store:e,showFullPathInTooltip:!0,style:s.truncatedText,tooltipStyle:{color:i.text.inverseSecondary},ellipsisTooltipPlacement:"top"})}),renderTooltip:()=>(0,m.jsx)(h().Ay,{store:e,textColor:i.text.inverseSecondary,style:s.tooltipRecordPath,innerStyle:{whiteSpace:"normal",overflow:"visible",textOverflow:"unset"}})})}const f=(0,s(69708).YK)({inTrash:{defaultMessage:"In trash",id:"creatorProfile.integrations.pageAccess.inTrash"}});function v({blockStore:e,styles:t,maxWidth:s,maxLength:n,shouldWrap:g=!1}){const{pageIcon:h,isEmptyPage:u,isInTrash:y,iconRecordCategory:v}=(0,i().K8)((()=>({pageIcon:e.getIcon(),isEmptyPage:e.isEmptyPage(),isInTrash:e.pathIsDead(),iconRecordCategory:(0,d().Te)(e)})),[e]);return(0,m.jsxs)(a().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,m.jsx)(d().B6,{disabled:!0,icon:h,iconRecordCategory:v,size:l().Ev.default,pageIconStyle:null==t?void 0:t.pageIconStyle,isEmptyPage:u}),(0,m.jsxs)(a().Y1,{gap:"auto",align:"start",children:[(0,m.jsxs)(a().Y1,{direction:"horizontal",gap:4,children:[(0,m.jsx)(r().D,{styleKey:"Body/Medium",children:(0,m.jsx)(c().A,{store:e,maxLength:n??60,shouldWrap:g,enableHover:!0})}),y?(0,m.jsx)(o().E,{color:"yellow",content:p().A.formatMessage(f.inTrash)},e.id):void 0]}),(0,m.jsx)(x,{blockStore:e,maxWidth:s})]})]})}},723786:(e,t,s)=>{s.d(t,{g:()=>g});s(898992),s(354520),s(581454),s(908872);var n=()=>s(484714),i=()=>s(56366),a=()=>s(416504),o=()=>s(179034),r=()=>s(69708),l=()=>s(321878),d=()=>s(435761),c=()=>s(249847),p=()=>s(148832);function g({pageIdsSharedWithUser:e,spaceViewStore:t,spaceStore:s}){const g=(0,n().v3)(),h=(0,r().tz)(),u=(0,a().P)(),y=(0,i().K8)((()=>t.getSpaceId()),[t]),m=(0,i().K8)((()=>e.map((e=>new(p().B)(g,{table:o().ev,id:e,spaceId:y})))),[e,g,y]),x=(0,i().K8)((()=>t.shouldShowWorkspaceSection(!1)?t.getWorkspacePages()??[]:[]),[t]),f=(0,c().T)(),{teams:v}=(0,d().ww)({userId:f,spaceStore:s}),j=(0,d().gc)({spaceStore:s,teams:v}).map((e=>e.store)),S=(0,i().K8)((()=>j.reduce(((e,t)=>{const s=t.getTeamPagesStores().filter((e=>e.isLoadedNonCopyIndicator()&&e.isNavigableBlock()));return s.length>0&&(e[t.id]=s.sort(((e,t)=>{const s=e.getRenderTitleWithPlaceholder({userTimeZone:u,intl:h}),n=t.getRenderTitleWithPlaceholder({userTimeZone:u,intl:h});return s.localeCompare(n)})).map((e=>e.id))),e}),{})),[j,h,u]),b=(0,i().K8)((()=>t.getPrivatePages(g)??[]),[t,g]),I=(0,i().K8)((()=>{const e=t.getUserId();return e?m.filter((t=>(0,l().B)({store:t,userId:e,spaceStore:s}))):[]}),[t,m,s]);return{allTeams:j,teamPagesByTeam:S,allPrivatePages:b,allSharedPages:I,allWorkspacePages:x}}},805697:(e,t,s)=>{s.r(t),s.d(t,{globeFillIcon:()=>i,iconDefinition:()=>n});s(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.39 2.47 15.21 15.06",svg:(0,s(474848).jsx)("path",{d:"M6.959 10.55c.044 1.915.317 3.657.751 4.97.237.716.53 1.335.884 1.787q.091.115.193.22a7.625 7.625 0 0 1-6.39-6.977zm10.645 0a7.625 7.625 0 0 1-6.392 6.977q.103-.105.194-.22c.353-.452.647-1.07.884-1.786.434-1.314.707-3.056.751-4.971zm-5.663 0c-.044 1.823-.305 3.443-.696 4.625-.216.652-.46 1.141-.705 1.455-.25.32-.438.383-.54.383s-.29-.063-.54-.383c-.245-.314-.49-.803-.705-1.455-.39-1.182-.652-2.802-.696-4.625zM8.787 2.472q-.103.105-.193.221c-.353.452-.647 1.07-.884 1.786-.434 1.314-.707 3.056-.751 4.971H2.396a7.626 7.626 0 0 1 6.391-6.978M10 2.987c.102 0 .29.063.54.383.245.314.49.803.705 1.455.39 1.182.652 2.802.696 4.625H8.06c.044-1.823.305-3.443.696-4.625.216-.652.46-1.141.705-1.455.25-.32.438-.383.54-.383m1.211-.515a7.626 7.626 0 0 1 6.392 6.978H13.04c-.044-1.915-.317-3.657-.751-4.97-.237-.716-.53-1.335-.884-1.787a3 3 0 0 0-.194-.221"})},i=(0,s(340498).wt)("globeFill",n)}}]);