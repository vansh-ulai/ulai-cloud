"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476,6893,22542],{346:(e,t,n)=>{n.d(t,{MG:()=>g,T1:()=>m,a1:()=>v,dt:()=>f,kg:()=>y,lC:()=>h,n_:()=>b});var i=n(296540),a=()=>n(484714),o=()=>n(56366),r=()=>n(187174),s=()=>n(645873),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const m=new(s().O2)("PerformanceToolbar",(()=>Promise.all([n.e(71386),n.e(45624)]).then(n.bind(n,688201)))),g=(0,s()._h)(m,(e=>e.PerformanceToolbar)),f=(0,s()._h)(m,(e=>e.PerformanceToolbarSettings));function y(){const e=(0,a().v3)();return(0,o().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function b(){const e=(0,a().v3)(),t=x("performanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,o().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function h(){const e=x("performanceToolbarStore");return(0,o().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function v(){const e=(0,a().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("performanceToolbarStore"),{sidebarExpanded:r,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:f}=(0,o().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,i.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),r,s,p,m,g,f)}),[t,e,n,r,s,p,m,g,f])}function x(e){const t=y(),[{value:n}]=(0,r().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},39341:(e,t,n)=>{n.d(t,{p:()=>a});class i extends(()=>n(757695))().Store{getInitialState(){return{banners:[],height:void 0}}setHeight(e){this.setState({height:e,banners:this.state.banners})}}const a=new i},59976:(e,t,n)=>{n.d(t,{b:()=>o});var i=()=>n(645873);const a=new(i().O2)("time-series",(async()=>await Promise.resolve().then(n.bind(n,968526)))),o=(0,i()._h)(a,(e=>e.TimeSeries))},73956:(e,t,n)=>{n.r(t),n.d(t,{checkmarkFillSmallIcon:()=>a,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"2.87 2.88 10.25 10.24",svg:(0,n(474848).jsx)("path",{d:"M12.756 2.987a.75.75 0 0 1 .257 1.029l-5.244 8.74a.75.75 0 0 1-1.213.102L3.06 8.78a.75.75 0 0 1 1.14-.976l2.818 3.289 4.709-7.848a.75.75 0 0 1 1.029-.257"})},a=(0,n(340498).wt)("checkmarkFillSmall",i)},77126:(e,t,n)=>{n.d(t,{j:()=>a});class i extends(()=>n(959180))().A{}const a=new i},115562:(e,t,n)=>{n.d(t,{W:()=>d});n(296540);var i=()=>n(819121),a=()=>n(401497),o=()=>n(451306),r=()=>n(73956),s=()=>n(340498),l=n(474848);function d(e){const{selectorSize:t="normal",...n}=e,{disabled:d,checked:c}=n,[u,p]=(0,i().A)(),m=function(e){const{checked:t,disabled:n,isFocusVisible:i,selectorSize:o}=e;return(0,a().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===o?15:11,height:"large"===o?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===o?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}`,background:n?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?e.icon.quaternary:e.border.strong}`,background:e.background.primary},...i&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===o?18:void 0,height:"large"===o?18:void 0,...n?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.blue.text.inversePrimary,width:"large"===o?s().Ev.xs:s().Ev.xxs,height:"large"===o?s().Ev.xs:s().Ev.xxs,ariaHidden:!0}})),[o,t,n,i])}({checked:c,disabled:d,selectorSize:t,isFocusVisible:p});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{ref:u,type:"checkbox",style:m.input,...n}),(0,l.jsx)("span",{...(0,o().AH)(m.root,d?{}:{pseudoActive:m.active}),children:c?(0,r().checkmarkFillSmallIcon)(m.icon):void 0})]})}},117570:(e,t,n)=>{n.d(t,{L:()=>s,q:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var i=()=>n(188716),a=()=>n(959044),o=()=>n(534177);function r(e){if(!e.isDefined()||!(0,a().aF)(e.getType()))return[];const t=e.getChildNotificationStores(),n=(0,i().Vq)({parentNotification:e.getModel(),childNotifications:t.map((e=>e.getModel())).filter(o().O9)}),r=new Set(n.map((e=>e.id)));return t.filter((e=>r.has(e.id)))}function s(e){return e.map((e=>e.getActivityStore())).filter(o().O9).map((e=>e.getEdits())).flat()}},124749:(e,t,n)=>{n.d(t,{$:()=>o});var i=()=>n(56366);const a=new(n(496506).ComputedStore)((()=>n(765957).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function o(){return(0,i().O$)(a)}},132855:(e,t,n)=>{n.r(t),n.d(t,{arrowInCircleUpFillIcon:()=>a,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},a=(0,n(340498).wt)("arrowInCircleUpFill",i)},175320:(e,t,n)=>{n.d(t,{lv:()=>b,C5:()=>f,u7:()=>g,uh:()=>y});var i=()=>n(560198),a=()=>n(267785),o=()=>n(100622);const r="theme";var s=()=>n(534177),l=()=>n(20822),d=()=>n(661179),c=()=>n(44551);const u=15;function p(e,t){const{ThemeStore:n}=e,{mode:s,usingSystemTheme:l}=t;if(i()._u)return;const d={mode:s};var u,p;n.setState(d),e.mobileNative&&e.mobileNative.setTheme(s,l),u=function(e,t){const n=(0,o().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:o().Tj.white,blue:o().Tj.blue},borderRadius:4,textColor:n.text.primary,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.shadowMD,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.darkDividerColor,shadowOpacity:n.shadowOpacity}}(s,l),null===c().electronApi||void 0===c().electronApi||null===(p=c().electronApi.setTheme)||void 0===p||p.call(c().electronApi,u);try{localStorage.setItem(r,JSON.stringify(d))}catch(m){(0,a().reportLocalStorageError)(r,JSON.stringify(d),"ThemeActions",m)}g(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function g(e){if(0===d().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function f(e){l().A.setState(e)}function y(e){const t=b(e);switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():(0,i().VD)(e),p(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function b(e){const t=l().A.state||"system";return"dark"===(n=t)||"light"===n||"system"===n?n:"system";var n}},182034:(e,t,n)=>{n.d(t,{O:()=>u,e:()=>c});n(898992),n(672577);var i=()=>n(908006),a=()=>n(878523),o=()=>n(190033),r=()=>n(892632),s=()=>n(299545),l=()=>n(77126),d=()=>n(489348);function c(e,t){const n=s().dd(t),i=r().xh(n);e.setState({...e.state,files:i})}async function u(e){const{blockStore:t,pageViewBlockStore:n,environment:r}=e;n?n.setState({...n.state,forceDiscussionOpen:!0}):d().A.openNewPageDiscussionInput(t),a().o2(r,{from:"page_comments"}),await i().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),c=null==s?void 0:s.getInputStore();c&&(0,o().z)({store:c.state.textStore})}},188716:(e,t,n)=>{n.d(t,{Bn:()=>o,KZ:()=>d,VK:()=>r,Vq:()=>a,WN:()=>c,kw:()=>s,rB:()=>l});n(16280),n(944114),n(57145),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var i=()=>n(496603);function a({parentNotification:e,childNotifications:t}){return t.filter((t=>!t.getInvalid()&&t.getParentNotificationId()===e.id))}function o({editsInChildNotificationActivities:e,comments:t,actorId:n}){const i=t.filter((e=>{var t;return(null===(t=e.getCreatedByPointer())||void 0===t?void 0:t.id)!==n})),a=new Set(e.filter((e=>"comment-created"===e.type||"suggestion-created"===e.type)).map((e=>e.comment_id))),o=i.filter((e=>e.getAlive()&&a.has(e.id))).sort(((e,t)=>e.getCreatedTime()-t.getCreatedTime()));return o.length>0?o:i}function r(e){return e.toSorted(((e,t)=>{const{isDiscussionResolved:n,comment:i,isDiscussionUnread:a}=e,{isDiscussionResolved:o,comment:r,isDiscussionUnread:s}=t,l=a?1:0,d=s?1:0;if(l-d!=0)return l-d;const c=n?0:1,u=o?0:1;return c-u!=0?c-u:i.getCreatedTime()-r.getCreatedTime()})).map((e=>e.comment))}function s(e){if(!e)return!1;const t=Number(e);return!isNaN(t)&&t>0&&t%2==0}function l(e){const t={};return e.forEach((e=>{e.filtered_block_schema&&e.property_updates&&Object.entries(e.property_updates).forEach((([n,i])=>{var a;const o=null===(a=e.filtered_block_schema)||void 0===a?void 0:a[n];o&&(t[n]||(t[n]={edits:[],propertySchema:o}),t[n].edits.push({edit:e,diff:i}))}))})),t}function d(e,t){const n=[...e].sort(((e,t)=>(e.edit.timestamp||0)-(t.edit.timestamp||0)));if(0===n.length)throw new Error("No edits in grouped edit provided");let i;const a=n[0],o=n[n.length-1];if(a.diff.before&&o.diff.after)i={before:a.diff.before,after:o.diff.after};else if(!a.diff.before&&o.diff.after)i={before:void 0,after:o.diff.after};else{if(!a.diff.before||o.diff.after)return o.edit;i={before:a.diff.before,after:void 0}}return{...o.edit,property_updates:{[t]:i}}}function c(e){var t;const n=[...e].sort(((e,t)=>(e.edit.timestamp||0)-(t.edit.timestamp||0))),a=[];if(n.length>=2)for(let l=0;l<n.length-1;l++){var o,r,s;const e=n[l],t=n[l+1],d=(null===(o=e.diff.before)||void 0===o?void 0:o.value)??[],c=(null===(r=e.diff.after)||void 0===r?void 0:r.value)??[],u=(null===(s=t.diff.after)||void 0===s?void 0:s.value)??[];(0,i().n4)(d,c)||(0,i().n4)(c,u)||a.push({value:{value:c,spaceId:e.edit.space_id},timestamp:e.edit.timestamp||0})}return a.length>0?{intermediateChanges:a,latestTimestamp:null===(t=a[a.length-1])||void 0===t?void 0:t.timestamp}:void 0}},229907:(e,t,n)=>{n.d(t,{lT:()=>d});n(944114);var i=()=>n(906745),a=()=>n(720665),o=()=>n(416845);const r=7;function s(e,t){if(void 0===e)return i().c9.utc();const n={zone:t||"utc"};return"number"==typeof e?i().c9.fromMillis(e,n):i().c9.fromISO(e,n)}function l(e,t){const n=t?s(t):i().c9.utc(),a=s(e??function(e){const{days:t,endDate:n,startDate:i,timezone:a}=e;if(t<=0)throw new(o().yI)("Days must be greater than 0");const r=s(n||void 0,a);if(!r.isValid)throw new(o().yI)(`endDate ${n} is in an invalid format`);const l=i?s(i,a).toMillis():0,d=r.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:r,endDate:t}));if(!a.isValid)throw new(o().yI)(`startDate ${e} is in an invalid format`);if(!n.isValid)throw new(o().yI)(`endDate ${t} is in an invalid format`);if(a>n)throw new(o().yI)(`startDate ${e} => ${a.toISO()} is after endDate ${t} => ${n.toISO()}`);return{startTimestamp:a.toMillis(),endTimestamp:n.toMillis()}}function d(e,t){const{startTimestamp:n,endTimestamp:i}=l(e,t),o=[];let r=n;for(;r<=i;)o.push(s(r,void 0).toISODate()),r+=a().nD;return o}},256863:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var i=()=>n(56366),a=()=>n(824862),o=n(474848);const r=function(e){const{botValue:t,botStore:r,showActiveDot:s,style:l,size:d}=e,c=(0,n(69708).tz)(),u=(0,i().K8)((()=>{if(r){const e=r.getIcon();if(e)return{pointer:{table:a().GP,id:r.id,spaceId:r.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:a().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[r,t]),p=(0,i().K8)((()=>(null==r?void 0:r.getDisplayName(c))??(0,n(799288).Hg)(t)),[r,t,c]),{activeDotStyle:m}=(0,n(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",insetInlineStart:11,top:11}})),[]);return(0,o.jsxs)("div",{style:l,children:[(0,o.jsx)(n(187820).B6,{icon:u,title:p,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,o.jsx)("div",{style:m}):void 0]})}},471095:(e,t,n)=>{n.d(t,{i:()=>a});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},a=(0,n(340498).wt)("lockFill",i)},485745:(e,t,n)=>{n.r(t),n.d(t,{AnimatedEmojiBadge:()=>In().f,GetNotifiedFor:()=>c,InboxActionsMenu:()=>fn().Ay,InboxNotificationSettingsButton:()=>Mt,MobileInboxPopup:()=>un,NotificationInboxPanelContent:()=>jn,SidebarInboxButton:()=>yn().SidebarInboxButton,UnreadMentionsBadge:()=>Tn().A,UpdateSidebar:()=>tt});var i=n(296540),a=()=>n(56366),o=()=>n(401497),r=()=>n(69708),s=()=>n(284371),l=()=>n(123021),d=n(474848);function c(e){const{navigableBlockStore:t,from:n,buttonPopupStore:i,style:c}=e,u=(0,a().K8)((()=>t.isPageBlock()),[t]),p=(0,o().IS)((e=>({label:{fontSize:s().J.UIRegular.desktop,color:e.text.primary,fontWeight:s().Wy.medium},border:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8}})),[]);return u?(0,d.jsxs)("div",{style:c,children:[(0,d.jsx)("div",{style:p.label,children:(0,d.jsx)(r().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,d.jsx)("div",{style:p.border,children:(0,d.jsx)(l().O,{blockStore:t,from:n,buttonPopupStore:i,renderType:"select"})})]}):null}n(898992),n(737550);var u=()=>n(484714),p=()=>n(175947),m=()=>n(534177),g=()=>n(899963),f=()=>n(145214),y=()=>n(13679),b=()=>n(77395),h=()=>n(987017),v=()=>n(146594),x=()=>n(112995),S=()=>n(650843),A=()=>n(38337),k=()=>n(272509),w=()=>n(517223),j=()=>n(346),I=()=>n(567121),T=()=>n(326589),C=()=>n(869562),M=()=>n(644914),P=()=>n(737230),N=()=>n(765957),E=()=>n(39341),B=()=>n(548821),F=()=>n(712505),_=()=>n(423817),R=()=>n(809020),D=(n(581454),()=>n(906745)),z=()=>n(611648),U=()=>n(779315),O=()=>n(586538),W=()=>n(2143),V=(n(823215),n(354520),n(430670),n(908872),()=>n(968526)),L=()=>n(662303),K=()=>n(252291),H=()=>n(396896),X=()=>n(98126),$=()=>n(406094),q=()=>n(631524),Y=()=>n(869190),G=()=>n(604995),J=()=>n(324254),Z=()=>n(333603),Q=()=>n(212727),ee=()=>n(395546),te=()=>n(721479),ne=()=>n(158469),ie=()=>n(72135),ae=()=>n(310442),oe=()=>n(824862),re=()=>n(798880),se=()=>n(496603),le=()=>n(821062),de=()=>n(129546),ce=()=>n(559506),ue=()=>n(466721),pe=()=>n(59976),me=()=>n(722872),ge=()=>n(680026),fe=()=>n(299545),ye=()=>n(232930),be=()=>n(997583),he=()=>n(224239),ve=()=>n(448291),xe=()=>n(870092),Se=()=>n(406699),Ae=()=>n(404277),ke=()=>n(859428),we=()=>n(256863),je=()=>n(125565),Ie=()=>n(453697),Te=()=>n(733815),Ce=()=>n(687110);const Me=Date.now();function Pe({store:e,spaceId:t,isDisabledForWorkspace:n}){const[s,l]=(0,i.useState)("last_28_days"),[c,p]=(0,i.useState)({state:n?"disabled-for-workspace":"loading"}),m=(0,u().v3)(),g=(0,o().DP)(),f=(0,a().K8)((()=>{const{sidebarSpaceStore:e}=N().default.state;return null==e?void 0:e.getName()}),[]),y=(()=>{switch(s){case"last_7_days":return 7;case"last_28_days":return 28;case"last_90_days":return 90;case"all_time":return}})();(0,i.useEffect)((()=>{n||async function(){const n=await ce().callApi({eventName:"getPageAnalytics",environment:m,data:{pageId:e.id,spaceId:t,days:y}});if("failed"===n.type)return void p({state:"empty"});const i=n.data.map((({ds:e,total_views:t,unique_views:n})=>({ds:e,values:{total_views:t,unique_views:n}})));i.filter((({ds:e})=>G().C6.isoToUnixMs(e,"UTC")??Me<=Me)).every((({values:e})=>0===e.total_views))?p({state:"empty"}):p({state:"loaded",data:i})}()}),[m,e.id,n,t,y]);const b=(0,o().IS)((e=>({fullHeight:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}})),[]);return"loading"===c.state?(0,d.jsx)("div",{style:b.fullHeight,children:(0,d.jsx)(X().A,{legacySize:32})}):"empty"===c.state?(0,d.jsx)("div",{style:b.fullHeight,children:(0,d.jsx)(Ve,{heading:(0,d.jsx)(r().sA,{id:"page_analytics.empty.heading",defaultMessage:"No page analytics yet"}),description:(0,d.jsx)(r().sA,{id:"page_analytics.empty.description",defaultMessage:"It may take some time for page view information to appear."})})}):"disabled-for-workspace"===c.state?(0,d.jsx)("div",{style:b.fullHeight,children:(0,d.jsx)(Ve,{heading:(0,d.jsx)(r().sA,{id:"page_analytics.disabled.heading",defaultMessage:"Page viewership tracking is disabled"}),description:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[f?(0,d.jsx)(r().sA,{id:"page_analytics.disabled.description",defaultMessage:"Page viewership and analytics is turned off for all pages in {name}",values:{name:f}}):(0,d.jsx)(r().sA,{id:"page_analytics.disabled.description.unnamed",defaultMessage:"Page viewership and analytics is turned off for all pages in your space"}),(0,d.jsx)(q().p,{size:"sm",iconLeading:te().questionMarkCircleSmallIcon,colorPalette:"gray",href:(0,ye().x)("guides.pageAnalytics"),external:!0,children:(0,d.jsx)(r().sA,{id:"page_analytics.disabled.learnMore",defaultMessage:"Learn more"})})]})})}):(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,d.jsxs)(H().VP,{grow:1,gap:16,children:[(0,d.jsx)(Be,{store:e,data:c.data,currentFilter:s,onChangeFilter:l}),(0,d.jsx)(_e,{store:e}),(0,d.jsx)(We,{spaceId:t,store:e})]}),(0,d.jsxs)("div",{style:{borderTop:`1px solid ${g.regularDividerColor}`,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(Se().A,{renderOrigin:({onClick:e})=>(0,d.jsx)($().A,{size:"lg",onClick:e,iconLeading:Q().gearIcon,children:(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.settings",defaultMessage:"Settings"})}),popupType:m.device.isMobile?Se().z.SlideUp:Se().z.Popup,render:()=>(0,d.jsx)(Ae().A,{menuType:me().gu.Popup,width:460,children:(0,d.jsx)("div",{style:Ee,children:(0,d.jsx)(Ce().PageAnalyticsPageOptOut,{store:e})})})}),(0,d.jsx)(q().p,{size:"sm",iconLeading:te().questionMarkCircleSmallIcon,colorPalette:"gray",href:(0,ye().x)("guides.pageAnalytics"),external:!0,children:(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.learnMore",defaultMessage:"Learn more"})})]})]})}const Ne=175,Ee={margin:"8px 16px",pointerEvents:"auto",cursor:"default"};function Be(e){const[t,n]=(0,be().z)(),{blueLayer:a,yellowLayer:o}=(0,V().useTimeSeriesPalette)(),s=(0,i.useMemo)((()=>{if(0===e.data.length)return Me;const t=G().C6.isoToUnixMs(e.data[0].ds,"UTC")??Me;return Math.min(t,Me)}),[e.data]);return(0,d.jsxs)("div",{children:[(0,d.jsx)(Fe,{store:e.store,data:e.data,currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter}),(0,d.jsx)("div",{ref:t,style:{...Ee,marginBottom:0},children:(0,d.jsx)(pe().b,{startDate:(0,Y().aD)(s,!0),endDate:(0,Y().aD)(Me,!0),width:n,height:Ne,data:e.data,layers:[{key:"total_views",...a,renderLabel:e=>(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.total_views",defaultMessage:"{views, plural, one {1 total view} other {{views} total views}}",values:{views:e}})},{key:"unique_views",...o,renderLabel:e=>(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.unique_views",defaultMessage:"{uniqueViews, plural, one {1 unique view} other {{uniqueViews} unique views}}",values:{uniqueViews:e}})}]})})]})}function Fe(e){const t=(0,r().tz)(),n=(0,i.useMemo)((()=>e.data.reduce(((e,{values:t})=>e+t.total_views),0)),[e.data]);return(0,d.jsx)("div",{style:{margin:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,d.jsxs)(H().fI,{justifyContent:"space-between",alignItems:"center",grow:1,children:[(0,d.jsxs)(H().fI,{gap:4,children:[(0,d.jsx)(je().A,{style:{fontWeight:500},children:(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.title",defaultMessage:"Views"})}),(0,d.jsx)(je().A,{isSecondaryColor:!0,children:(0,d.jsx)(r().sA,{id:"page_analytics.timeseries.totalViews",defaultMessage:"({totalViews} total)",values:{totalViews:(0,ie().ZV)(n,"number_with_commas",t)}})})]}),(0,d.jsx)(Te().Z,{currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter})]})})}function _e(e){const{store:t}=e,{pageVisitStore:n,presenceStore:o}=(0,a().K8)((()=>({pageVisitStore:N().default.state.pageVisitStore,presenceStore:N().default.state.presenceStore})),[]),s=(0,u().v3)();(0,i.useEffect)((()=>{ue().Ds(s,{blockStore:t,pageVisitStore:n,incremental:!1,limit:ue().FD})}),[s,t,n]);const{visitors:l,totalCount:c,hasMore:p}=(0,a().K8)((()=>({visitors:(0,ge().PZ)({pageVisitStore:n,presenceStore:o}),totalCount:n.state.totalCount,hasMore:n.state.hasMore})),[n,o]);if(0===l.length)return null;const m=l.map((({userId:e,activityTimestampNearestMinuteMs:n,onTrustedDomain:i})=>({actorStore:xe().L.createChildStore(t,{id:e,table:re().oo}),timestamp:n,onTrustedDomain:i})));return(0,d.jsxs)("div",{style:{...Ee,display:"flex",flexDirection:"column",gap:12},children:[(0,d.jsx)(je().A,{style:{fontWeight:500},children:(0,d.jsx)(r().sA,{id:"page_analytics.viewers.title",defaultMessage:"Viewers"})}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(0,d.jsx)(De,{store:t,actorStores:m,collapsedLabel:(0,d.jsx)(r().sA,{id:"page_analytics.viewers.expand",defaultMessage:"Show more viewers"}),expandedLabel:(0,d.jsx)(r().sA,{id:"page_analytics.viewers.collapse",defaultMessage:"Show less viewers"}),totalCount:c,hasMore:p})})]})}const Re=5;function De(e){const{store:t,actorStores:n,collapsedLabel:a,expandedLabel:o}=e,[s,l]=(0,i.useState)(!0),c=s?n.slice(0,Re):n,u=e.totalCount?e.totalCount-c.length:void 0;return(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[c.map((({actorStore:e,timestamp:n,onTrustedDomain:i})=>(0,d.jsx)(ze,{store:t,actorStore:e,timestamp:n,onTrustedDomain:i},e.id))),u&&!s?(0,d.jsx)(je().A,{isSmall:!0,children:e.hasMore?(0,d.jsx)(r().sA,{id:"page_analytics.viewers.andMorePlus",defaultMessage:"And {count}+ more...",values:{count:u}}):(0,d.jsx)(r().sA,{id:"page_analytics.viewers.andMore",defaultMessage:"And {count} more...",values:{count:u}})}):void 0,n.length>Re?(0,d.jsx)("button",{onClick:e=>{e.preventDefault(),l(!s)},style:{background:"none",border:"none",textAlign:"start",padding:0,marginTop:4},children:(0,d.jsxs)(je().A,{isSecondaryColor:!0,isSmall:!0,style:{display:"flex",gap:3,alignItems:"center"},children:[s?a:o,s?(0,d.jsx)(K().I,{icon:J().arrowChevronSingleDownSmallIcon,size:"xs"}):(0,d.jsx)(K().I,{icon:Z().Y,size:"xs"})]})},"toggle"):void 0]})}function ze(e){const{actorStore:t,timestamp:n,onTrustedDomain:s}=e,l=(0,r().tz)(),c=(0,i.useMemo)((()=>{const e=Date.now();return(0,Y().v9)(Math.min(n??e,e),L().locale)}),[n]),u=(0,a().K8)((()=>t.getDisplayName(l)),[t,l]),p=(0,o().IS)((()=>({tooltip:{marginTop:2}})),[]);return(0,d.jsxs)(H().fI,{alignItems:"center",justifyContent:"space-between",children:[(0,d.jsxs)(H().fI,{gap:4,children:[(0,d.jsx)(Ue,{actorStore:t}),(0,d.jsx)(je().A,{style:{fontWeight:500},children:u})]}),(0,d.jsxs)(H().fI,{gap:4,children:[(0,d.jsx)(je().A,{isSecondaryColor:!0,children:n?(0,d.jsx)("span",{title:(0,Y().W_)(n,"medium_with_time",L().locale),children:c}):c}),s?(0,d.jsx)("div",{style:p.tooltip,children:(0,d.jsx)(ke().A,{renderTooltip:()=>(0,d.jsx)(r().sA,{id:"page_analytics.viewers.sharedEmailDomainUser.tooltip.message",defaultMessage:"Shared email domain user"}),render:e=>(0,d.jsx)("div",{...e,children:(0,d.jsx)(K().I,{icon:ee().infoCircleSmallIcon,size:"sm",colorVariant:"secondary"})}),placement:"bottom"})}):void 0]})]})}function Ue(e){const{actorStore:t}=e;return t.table===oe().GP?(0,d.jsx)(we().A,{botStore:t,size:18}):t.table===re().oo?(0,d.jsx)(Ie().A,{userStore:t,size:18}):t.table===ae().yj?(0,d.jsx)(Ie().A,{userStore:void 0,size:18}):void(0,m().HB)(t)}function Oe(e){const{environment:t,store:n,spaceId:o}=e,[,,r]=(0,a().$y)(void 0,he().L),[s,l]=(0,i.useState)([]);(0,i.useEffect)((()=>{de().r(t,{store:r,activityIds:s,spaceId:o,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0},navigableBlockId:n.id})}),[s,r,o,n.id,t]);return(0,a().K8)((()=>{const e=r.state.activityIds;(0,le().A)(s,e)||l(e);const{sidebarSpaceStore:t}=N().default.state;if(!t)return[];const i=s.map((e=>(0,fe().jA)(t,e,t.id))).flatMap((e=>{const t=e.getValue();return t?"top-level-block-created"!==t.type&&"top-level-block-deleted"!==t.type&&"block-edited"!==t.type?[]:function(e,t){var n;return se().oE(null===(n=e.edits)||void 0===n?void 0:n.flatMap((e=>{var n;return null===(n=e.authors)||void 0===n?void 0:n.map((n=>({actorStore:(0,ve().JQ)({parentStore:t,pointer:n}),timestamp:e.timestamp})))})))}(t,n):[]})),a=se().Ul(i,"timestamp").reverse();return se().hS(a,(e=>e.actorStore.id))}),[s,r,n])}function We(e){const{spaceId:t,store:n}=e,i=Oe({environment:(0,u().v3)(),spaceId:t,store:n}),o=(0,a().K8)((()=>{const e=n.getCreatedByPointer(),t=n.getCreatedTime();if(e&&t)return{actorStore:(0,ve().JQ)({parentStore:n,pointer:e}),createdTime:t}}),[n]);return(0,d.jsxs)("div",{style:{...Ee,display:"flex",flexDirection:"column",gap:12},children:[(0,d.jsx)(je().A,{style:{fontWeight:500},children:(0,d.jsx)(r().sA,{id:"page_analytics.editors.title",defaultMessage:"Editors"})}),o?(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:6},children:[(0,d.jsx)(je().A,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,d.jsx)(r().sA,{id:"page_analytics.editors.createdBy",defaultMessage:"Created by"})}),(0,d.jsx)(ze,{store:n,actorStore:o.actorStore,timestamp:o.createdTime})]}):void 0,i.length>0?(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,d.jsx)(je().A,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,d.jsx)(r().sA,{id:"page_analytics.editors.editedBy",defaultMessage:"Recently edited by"})}),(0,d.jsx)(De,{actorStores:i,store:n,collapsedLabel:(0,d.jsx)(r().sA,{id:"page_analytics.editors.expand",defaultMessage:"Show more editors"}),expandedLabel:(0,d.jsx)(r().sA,{id:"page_analytics.editors.collapse",defaultMessage:"Show less editors"}),totalCount:void 0,hasMore:void 0})]}):void 0]})}function Ve(e){const t=(0,o().IS)((()=>({column:{display:"flex",flexDirection:"column"},centered:{textAlign:"center",alignItems:"center",width:250}})),[]);return(0,d.jsx)("div",{style:{...t.column,gap:24},children:(0,d.jsxs)("div",{style:{...t.column,...t.centered,gap:4},children:[(0,d.jsxs)(H().VP,{gap:16,alignItems:"center",children:[(0,d.jsx)(K().I,{icon:ne().f,size:"xl",colorVariant:"secondary"}),(0,d.jsx)(je().A,{isSecondaryColor:!0,style:{fontSize:16,fontWeight:500},children:e.heading})]}),(0,d.jsx)(je().A,{isSecondaryColor:!0,style:{whiteSpace:"normal",overflow:"visible"},children:e.description})]})})}function Le({enablePageAnalytics:e}){const t=(0,a().O$)(N().AppStoreMainEditorCurrentBlockStore),n=(0,a().K8)((()=>{const e=D().c9.now().minus({years:1}).valueOf();return!!t&&t.getCreatedTime()<e}),[t]),i=(0,a().O$)(N().AppStoreSidebarSpaceStore),s=(0,a().K8)((()=>!(null!=t&&t.canRead())),[t]),l=(0,a().K8)((()=>{var e;const n=null==t?void 0:t.getModel();return t&&null!=n&&n.isCollectionView()?null===(e=t.getCollectionPointers())||void 0===e?void 0:e.map((e=>e.id)):void 0}),[t]),c=(0,a().K8)((()=>Boolean(null==i?void 0:i.getSettings().disable_page_analytics)),[i]),u=(0,o().IS)((e=>({updatesEmptyStyle:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.text.secondary,fontSize:14,background:e.background.primary,marginInlineEnd:0,pointerEvents:"auto",height:"100%"},updatesNotEmptyStyle:{display:"flex",flexDirection:"column",flex:"1 1 0%",background:e.background.primary,marginInlineEnd:0,pointerEvents:"auto",marginTop:1,height:"100%"}})),[]),p=(0,a().K8)((()=>P().Ay.state.updatesSubTab),[]);return s?(0,d.jsx)(W().H,{type:z().A.Y,style:u.updatesEmptyStyle,children:(0,d.jsx)("div",{style:{width:200,alignSelf:"center"},children:(0,d.jsx)(r().sA,{id:"updateSidebar.commentContainer.restricted",defaultMessage:"You don’t have permission to view the updates of this restricted page."})})}):i&&t?(0,d.jsxs)(W().H,{type:z().A.Y,ref:e=>{U().A.UpdateSidebarScroller=e},style:u.updatesNotEmptyStyle,children:[e?(0,d.jsx)("div",{style:{display:p===P().VE.Analytics?"block":"none",height:"100%"},children:(0,d.jsx)(Pe,{spaceId:i.id,store:t,isDisabledForWorkspace:c})}):void 0,(0,d.jsx)("div",{style:{display:p===P().VE.Updates?"block":"none"},children:(0,d.jsx)(O().A,{collectionIds:l,navigableBlockStore:t,spaceId:i.id,source:"updates_sidebar",empty:e=>(0,d.jsx)(W().H,{type:z().A.Y,style:u.updatesEmptyStyle,ref:e=>{U().A.UpdateSidebarScroller=e},children:(0,d.jsx)("div",{style:{width:200,alignSelf:"center"},children:e.hasFiltersOn?(0,d.jsx)(r().sA,{id:"updateSidebar.updatesContainer.emptyAfterSearch",defaultMessage:"No updates match the requested filters."}):n?(0,d.jsx)(r().sA,{id:"updateSidebar.updatesContainer.emptyMaybePurged",defaultMessage:"There are no recent updates on this page. Page updates are retained for one year."}):(0,d.jsx)(r().sA,{id:"updateSidebar.updatesContainer.empty",defaultMessage:"No updates on this page yet."})})})},t.id)})]}):null}function Ke(){return(0,d.jsx)(r().sA,{id:"updateSidebar.header.updatesLabel",defaultMessage:"Updates"})}function He(){return(0,d.jsx)(r().sA,{id:"updateSidebar.header.analyticsLabel",defaultMessage:"Analytics"},"analytics")}const Xe="UpdateSidebar";function $e(e){const t=(0,u().v3)(),{enablePageAnalytics:n,inPeekView:i,noTopMargin:r}=e,l=(0,o().IS)((e=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:r?0:p().ek(t.device.isElectronMac),width:"100%",background:i?e.popoverBackground:e.background.primary,paddingTop:12,paddingInlineEnd:12,paddingBottom:12,paddingInlineStart:16,borderBottom:`1px solid ${e.regularDividerColor}`},label:{fontSize:14,color:e.text.primary,fontWeight:s().Wy.medium,margin:0,padding:0}})),[r,t.device.isElectronMac,i]),c=(0,a().K8)((()=>P().Ay.state.updatesSubTab),[]);return(0,d.jsx)("div",{style:{...l.updatesHeaderStyle,...n?{padding:"0 6px"}:{}},className:A().Kbf,children:n?(0,d.jsx)(h().Ay,{tabs:[(0,d.jsx)(Ke,{},"updates"),(0,d.jsx)(He,{},"analytics")],selectedIndex:c,onChange:e.onTabChange,style:{...l.label,padding:0,boxShadow:"none"},tabStyle:{padding:"12px 0"},idPrefix:Xe}):(0,d.jsx)("h2",{style:l.label,children:(0,d.jsx)(Ke,{})})})}const qe=i.memo((function(e){const{navigableBlockStore:t,timeViewed:n}=e,i=(0,a().K8)((()=>P().Ay.getTabForNewCommentsSidebar()),[]);switch(i){case P().UL.Comments:return(0,d.jsx)(R().R,{timeViewed:n,location:"sidebar"});case P().UL.Updates:case P().UL.Analytics:return(0,d.jsx)(Le,{enablePageAnalytics:!0});case P().UL.Info:return(0,d.jsx)(v().H,{store:t,context:B().Rr.Frame,disabled:!1,shownAs:"sidebar"});default:return null}}));var Ye=()=>n(285790);const Ge=i.memo((function(e){const{inPeekView:t,noTopMargin:l}=e,c=(0,u().v3)(),m=(0,u().Y0)(),g=(0,r().tz)(),f=(0,a().K8)((()=>P().Ay.getTabForNewCommentsSidebar()),[]),y=(0,i.useCallback)((e=>P().Ay.update((t=>({...t,...P().Ay.createUpdateForNewCommentsSidebar(e)})))),[]),b=(0,i.useCallback)((()=>{n(883497).A.setState({open:!1})}),[]),v=(0,o().IS)((e=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:l?0:p().ek(c.device.isElectronMac),paddingTop:4,width:"100%",background:t?e.popoverBackground:e.background.primary,paddingInlineEnd:8},label:{fontSize:14,color:e.text.primary,fontWeight:s().Wy.medium,boxShadow:"none"},tabStyle:{padding:"12px 0"},tabBorderStyle:{insetInlineStart:0,insetInlineEnd:0}})),[l,c.device.isElectronMac,t]),x=(0,o().IS)((e=>({tabSwitcherButton:{display:"flex",alignItems:"center",gap:4,fontWeight:s().Wy.semibold,borderRadius:6,paddingInlineStart:6,paddingInlineEnd:6,paddingTop:4,paddingBottom:4,marginTop:7,marginBottom:7},titleWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},closeButton:{position:"absolute",insetInlineEnd:12,borderRadius:"50%",background:e.background.tertiaryTranslucent}})),[]);return m.isPhone?(0,d.jsxs)("div",{style:x.titleWrapper,children:[(0,d.jsx)("div",{style:x.tabSwitcherButton,children:(0,d.jsx)(r().sA,{id:"commentsSidebarTabSwitcher.header.discussionsLabel",defaultMessage:"All discussions"})}),(0,d.jsx)(Ye().A,{icon:n(297813).xMarkFillIcon,onClick:b,style:x.closeButton,ariaLabel:g.formatMessage({id:"commentsSidebarTabSwitcher.header.closeLabel",defaultMessage:"Close"})})]}):(0,d.jsx)("div",{style:v.updatesHeaderStyle,className:A().Kbf,children:(0,d.jsx)(h().Ay,{tabs:[],selectedIndex:f,onChange:y,style:v.label,tabStyle:v.tabStyle,tabBorderStyle:v.tabBorderStyle,idPrefix:Xe})})}));function Je(e){const{currentTab:t,navigableBlockStore:n}=e,o=(0,a().K8)((()=>N().default.isInitialRenderComplete()),[]),[r,s]=(0,i.useState)(!1),l=(0,i.useMemo)((()=>Date.now()),[]),c=(0,a().K8)((()=>P().Ay.state.timeOpenedComments),[]),u=void 0!==c?Math.max(l,c):l;if((0,i.useEffect)((()=>{!r&&o&&s(!0)}),[n.id,r,o]),!n||!r)return(0,d.jsx)(_().J,{areaHeight:window.innerHeight});switch(t){case P().tF.Comments:return(0,d.jsx)(qe,{navigableBlockStore:n,timeViewed:u});case P().tF.Updates:return(0,d.jsx)(Le,{enablePageAnalytics:e.enablePageAnalytics});case P().tF.Info:return(0,d.jsx)(v().H,{store:n,context:B().Rr.Frame,disabled:!1,shownAs:"sidebar"});default:return(0,d.jsx)(R().R,{timeViewed:u,location:"sidebar"})}}function Ze(e){const t=(0,r().tz)(),n=(0,a().K8)((()=>({width:P().Ay.state.width,isAnimating:P().Ay.state.isAnimating,currentTab:P().Ay.state.currentTab})),[]),s=(0,j().n_)(),{shouldLoadSidebarComponents:l,isExpanded:c}=e,u=(0,i.useRef)(null),p=(0,a().K8)((()=>E().p.state.banners.some((e=>"LoggedOutAppBanner"===e.id))?E().p.state.height??0:0),[]),[g,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=requestAnimationFrame((()=>y(!0)));return()=>cancelAnimationFrame(e)}),[]);const b=(0,o().IS)((e=>({container:{flexGrow:0,flexShrink:0,width:n.width,zIndex:102,borderInlineStart:c?`1px solid ${e.regularDividerColor}`:"1px solid rgba(0,0,0,0)",alignSelf:"flex-end",position:"absolute",insetInlineEnd:0,top:p,height:s?`calc(100vh - ${I().ls-p}px)`:`calc(100vh - ${p}px)`,pointerEvents:"none"},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:"flex",flexDirection:"column",overflow:"visible",zIndex:102,width:n.width}})),[n.width,c,s,p]);let h;return n.currentTab===P().tF.Comments?h=t.formatMessage({id:"updateSidebar.commentsAriaLabel",defaultMessage:"Page comments"}):n.currentTab===P().tF.Info?h=t.formatMessage({id:"updateSidebar.infoAriaLabel",defaultMessage:"Info"}):n.currentTab===P().tF.Updates?h=t.formatMessage({id:"updateSidebar.updatesAriaLabel",defaultMessage:"Page updates and analytics"}):(0,m().HB)(n.currentTab),l?(0,d.jsx)(f().A,{tag:"aside",visible:c,initial:{translateX:"100%"},animate:{translateX:0},exit:{translateX:"100%"},skip:!g,onAnimationStart:()=>{P().Ay.setState({...P().Ay.state,isAnimating:!0})},onAnimationEnd:()=>{P().Ay.setState({...P().Ay.state,isAnimating:!1})},ref:u,style:b.container,onMouseMove:()=>{n.isAnimating||P().Ay.setState({...P().Ay.state,mouseEntered:!0})},onMouseLeave:()=>{n.isAnimating||P().Ay.setState({...P().Ay.state,mouseEntered:!1})},"aria-hidden":!c||void 0,"aria-label":h,children:(0,d.jsx)("div",{style:b.wrap,children:(0,d.jsx)("div",{style:b.content,children:(0,d.jsx)(x().K,{from:"UpdateSidebar",fallback:({error:e,errorId:t})=>(0,d.jsx)(S().LargeSurfaceRenderError,{error:e,errorId:t}),children:(0,d.jsx)(et,{...e})})})})}):null}function Qe({enablePageAnalytics:e,navigableBlockStore:t,onTabChange:n}){const i=(0,u().v3)(),r=(0,a().K8)((()=>P().Ay.state.currentTab),[]),s=(0,o().IS)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:p().ek(i.device.isElectronMac)}})),[i]);switch(r){case P().tF.Comments:return(0,d.jsx)(Ge,{});case P().tF.Updates:return(0,d.jsx)($e,{navigableBlockStore:t,enablePageAnalytics:e,onTabChange:n});case P().tF.Info:default:return(0,d.jsx)("div",{style:s.commentsHeaderStyle})}}function et(e){const{isResizerHovered:t,isResizing:n,currentTab:r,expanded:s,updatesSubTab:l}=(0,a().K8)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:n,expanded:i,updatesSubTab:a}=P().Ay.state;return{isResizerHovered:e,isResizing:t,currentTab:n,expanded:i,updatesSubTab:a}}),[]),{currentBlockStore:c}=e,p=(0,u().v3)(),m=(0,i.useRef)(null),f=(0,a().K8)((()=>c.isCollectionView()&&!c.isCollectionViewPageWithContent()?P().tF.Updates:r),[c,r]),y=(0,a().K8)((()=>{const{sidebarSpaceStore:e}=N().default.state;return!(!e||(0,k().I)(e))}),[]),v=i.useCallback((e=>{g().XI(p,{tab:e===P().VE.Updates?"updates":"analytics",origin:F().default.state.open?"peek_view":"page"}),P().Ay.setState({...P().Ay.state,updatesSubTab:e})}),[p]),w=(0,o().IS)((e=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:r===P().tF.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,insetInlineStart:-3,bottom:0,insetInlineEnd:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||n)&&s?{boxShadow:e.sidebarResizerBoxShadow}:{}},tabpanel:{display:"flex",flexDirection:"column",flex:"1 1 0",overflow:"hidden"}})),[r,t,n,s]),j=l?(0,P().aP)(l):(0,P().J)(f),I=(0,d.jsx)(x().K,{from:`UpdateSidebarContent.${j}`,fallback:({error:e,errorId:t})=>(0,d.jsx)(S().LargeSurfaceRenderError,{error:e,errorId:t}),children:(0,d.jsx)(Je,{navigableBlockStore:c,currentTab:f,enablePageAnalytics:y})});return(0,d.jsxs)("div",{ref:m,style:w.pane,className:A().YDC,children:[(0,d.jsx)("div",{style:w.resizerStyle}),(0,d.jsx)(Qe,{enablePageAnalytics:y,navigableBlockStore:c,onTabChange:v}),y?(0,d.jsx)("div",{style:w.tabpanel,role:"tabpanel",id:(0,h().Jy)(Xe,f),"aria-labelledby":(0,h().vU)(Xe,f),children:I}):I,s?(0,d.jsx)(b().A,{sidebarRef:m,type:"update"}):void 0]})}function tt(e){const{isElectronMac:t,currentBlockStore:n}=e,{canRender:o,isAnimating:r}=(0,a().K8)((()=>({canRender:P().Ay.state.canRender,isAnimating:P().Ay.state.isAnimating})),[]),s=(0,a().O$)(N().AppStoreSidebarSpaceStore),l=(0,i.useMemo)((()=>null==s?void 0:s.clone()),[s]),c=(0,u().v3)(),{isExpanded:p,closeSidebar:m}=(0,a().K8)((()=>({isExpanded:(0,M().Nk)(c),closeSidebar:()=>C().setUpdateExpand({environment:c,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})})),[c]),[g,f]=(0,i.useState)(!1),[b,h]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{(void 0===b||b===n.id)&&p&&(f(!0),h(n.id))}),[b,n,p]);const v=(0,a().K8)((()=>n.getAssociatedCollectionStore()),[n]);if(!(0,a().K8)((()=>{if(!o)return!1;if(l)return!0;if((0,T().g)())return!0;if(!v)return!1;const{count:e}=(0,w().pm)({collectionStore:v});return e>0}),[v,o,l]))return null;const x=()=>(0,d.jsx)(Ze,{isElectronMac:t,isFullyExpanded:!r,currentBlockStore:n,isExpanded:p,closeSidebar:m,shouldLoadSidebarComponents:g});return l?(0,d.jsx)(y().A,{store:l,droppable:!0,render:x},(null==l?void 0:l.id)||n.id):x()}var nt=()=>n(879765),it=()=>n(763824),at=()=>n(848259),ot=()=>n(572080),rt=()=>n(297872),st=()=>n(228927),lt=()=>n(688149),dt=()=>n(721273),ct=()=>n(152197),ut=()=>n(62856),pt=()=>n(155959),mt=()=>n(606846),gt=()=>n(212326),ft=()=>n(590707),yt=()=>n(934999),bt=()=>n(29037),ht=()=>n(895189),vt=()=>n(569866);function xt(){const e=(0,a().K8)((()=>(0,gt().dl)()),[]);switch(e){case"unread_and_read":return(0,d.jsx)(vt().A,{message:(0,d.jsx)(r().sA,{defaultMessage:"You’ll be notified here for @mentions, page activity, and more",id:"inbox.filterEmptyState.unreadOrReadMessage"}),title:(0,d.jsx)(r().sA,{defaultMessage:"You’re all caught up",id:"inbox.filterEmptyState.unreadOrReadTitle"}),iconOptions:{icon:bt().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}});case"unread_only":return(0,d.jsx)(vt().A,{message:(0,d.jsx)(r().sA,{defaultMessage:"You’re all caught up—any new unread notifications will appear here",id:"inbox.filterEmptyState.unreadMessage"}),title:(0,d.jsx)(r().sA,{defaultMessage:"No unread notifications",id:"inbox.filterEmptyState.unreadTitle"}),iconOptions:{icon:ht().d,colorPalette:"gray",colorVariant:"tertiary"}});case"archived_only":return(0,d.jsx)(vt().A,{message:(0,d.jsx)(r().sA,{defaultMessage:"Any inbox updates that you archived will appear here",id:"inbox.filterEmptyState.archivedMessage"}),title:(0,d.jsx)(r().sA,{defaultMessage:"No archived notifications",id:"inbox.filterEmptyState.archivedTitle"}),iconOptions:{icon:yt().B,colorPalette:"gray",colorVariant:"tertiary"}});case"all_updates":return(0,d.jsx)(vt().A,{message:(0,d.jsx)(r().sA,{defaultMessage:"Any activity in the workspace will appear here",id:"inbox.filterEmptyState.allPagesMessage"}),title:(0,d.jsx)(r().sA,{defaultMessage:"No activity in the workspace",id:"inbox.filterEmptyState.allPagesTitle"})});default:(0,m().HB)(e)}}var St=()=>n(920546),At=()=>n(885247),kt=()=>n(340498),wt=()=>n(900652),jt=()=>n(624307),It=()=>n(404141),Tt=()=>n(466872);function Ct({location:e}){const t=(0,r().tz)(),n=(0,u().v3)(),a=(0,u().Y0)(),s=(0,i.useCallback)((()=>{const{device:e}=n;at().fP(n),e.isMobile?jt().A.setState({open:!0,source:jt().C.Updates}):(Tt().A.setState({...Tt().A.state,open:!1}),It().A.setState({...It().A.state,currentTab:"notifications",defaultSubtab:void 0}),It().A.setState({...It().A.state,open:!0}))}),[n]),l=(0,wt().zg)(),c=(0,o().IS)((e=>({mobileTopBarIcon:{height:kt().lD.default,width:kt().lD.default,fill:e.text.primary},webUpdatesModalIcon:{width:16,height:16},button:a.isMobile?{height:30,width:30}:l.button})),[a.isMobile,l.button]);let p;switch(e){case"mobileTopBar":p=c.mobileTopBarIcon;break;case"webUpdatesModal":p=c.webUpdatesModalIcon;break;default:(0,m().HB)(e)}return(0,d.jsx)(ke().A,{renderTooltip:()=>(0,d.jsx)(r().sA,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,d.jsx)(Ye().A,{style:c.button,icon:Q().gearIcon,iconStyle:p,onClick:s,ariaLabel:t.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const Mt=i.memo(Ct);n(944114),n(803949);var Pt=()=>n(564884),Nt=()=>n(413468),Et=()=>n(165358),Bt=()=>n(187174),Ft=()=>n(386164),_t=()=>n(959044),Rt=()=>n(231297),Dt=()=>n(645873);const zt=new(Dt().O2)("activityNotification",(async()=>await Promise.all([n.e(47160),n.e(91598),n.e(48046),n.e(31842),n.e(34442),n.e(65197),n.e(61505),n.e(26497),n.e(34246),n.e(11411),n.e(49877),n.e(56409)]).then(n.bind(n,796208)))),Ut=new(Dt().O2)("groupedNotification",(async()=>await Promise.all([n.e(47160),n.e(91598),n.e(48046),n.e(31842),n.e(34442),n.e(65197),n.e(61505),n.e(26497),n.e(34246),n.e(11411),n.e(49877),n.e(3130)]).then(n.bind(n,430189)))),Ot=(0,Dt()._h)(zt,(e=>e.ActivityNotification)),Wt=(0,Dt()._h)(Ut,(e=>e.GroupedNotification));var Vt=()=>n(941541),Lt=()=>n(245865),Kt=()=>n(21899),Ht=()=>n(303742),Xt=()=>n(179534),$t=()=>n(819616),qt=()=>n(117570),Yt=()=>n(188716);var Gt=()=>n(920498),Jt=()=>n(406792);const Zt={};function Qt(e,t){e in Zt||(Zt[e]={measured:!1,startTime:performance.now(),size:t.size,type:t.type})}function en(e){const{groupName:t}=e;switch(t){case"today":return(0,d.jsx)(r().sA,{id:"InboxTimeGroupHeader.today",defaultMessage:"Today"});case"this_week":return(0,d.jsx)(r().sA,{id:"InboxTimeGroupHeader.thisWeek",defaultMessage:"This week"});case"last_week":return(0,d.jsx)(r().sA,{id:"InboxTimeGroupHeader.lastWeek",defaultMessage:"Last week"});case"older":return(0,d.jsx)(r().sA,{id:"InboxTimeGroupHeader.older",defaultMessage:"Older"});default:(0,m().HB)(t)}}function tn(e){const{groupName:t,shouldStickyHeader:n}=e,{isTablet:i}=(0,u().Y0)(),a=(0,o().IS)((e=>({headerContainer:{paddingTop:3,paddingBottom:3,paddingInlineStart:16,paddingInlineEnd:16,color:e.text.secondary,fontWeight:i?s().Wy.regular:s().Wy.medium,fontSize:i?"15px":"12px",...n&&{position:"sticky",top:0,backgroundColor:e.background.primary,zIndex:2,paddingBottom:4,paddingTop:2}}})),[n,i]);return(0,d.jsx)("div",{style:a.headerContainer,children:(0,d.jsx)(en,{groupName:t})})}const nn=new class{constructor(){this.state=new Map,this.noOpListener=()=>{}}cacheInboxPointers(e,t,n){const i=this.state.get(t);if(i)for(const a of i)e.defaultRecordCache.inMemoryRecordCache.removeListenerToRecord(a,this.noOpListener),(0,Lt().unsubscribeAfterDelay)({environment:e,pointer:a,userId:e.currentUser.id});for(const a of n)e.defaultRecordCache.inMemoryRecordCache.addListenerToRecord(a,this.noOpListener),(0,Lt().cancelEviction)({pointer:a,userId:e.currentUser.id});this.state.set(t,n)}getNotificationIds(e){const t=this.state.get(e);if(!t)return;return t.filter((e=>e.table===_t()._p)).map((e=>e.id))}};const an=function(e){const[t,o]=(0,i.useState)(Math.random()),[r,s]=(0,i.useState)(20),l=(0,u().v3)(),c=(0,a().O$)(n(929219).e),p=(0,n(249847).T)();return(0,i.useEffect)((()=>{if(p){const e=se().nF((({value:e})=>{String(e).includes("unreadCount")||o(Math.random())}),1e3),t=(0,n(921997).dp)(p),i=Vt().Ay.addListener(t,void 0,e,void 0,l);if(i)return()=>{Vt().Ay.removeListener(i,l)}}}),[p,l]),c?(0,d.jsx)(dn,{checkpoint:t,type:e.type,empty:e.empty,source:e.source,tab:e.tab,size:r,setSize:s,scrolledToTop:e.isScrolledToTopFromOtherSidebar}):(0,d.jsx)(rn,{type:e.type})};function on(e){const t=(0,u().v3)(),n=(0,u().Y0)();return(0,o().IS)((i=>({placeholder:{...cn(e,t),paddingTop:n.isMobile?64:void 0,minHeight:n.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:i.text.primary,overflow:"hidden"}})),[n.isMobile,t,e]).placeholder}function rn({type:e}){const t=on(e);return(0,d.jsx)("div",{style:t,children:(0,d.jsx)("div",{children:(0,d.jsx)(r().sA,{defaultMessage:"Please go online to view your inbox.",id:"notificationInbox.offline.message"})})})}function sn({request:e,error:t,result:n,type:o,empty:s,source:l,tab:c,size:p,setSize:g,scrolledToTop:f,requestType:y}){const b=(0,u().v3)(),h=(0,u().Y0)(),v=(0,a().O$)(N().AppStoreSidebarSpaceStore),x=n??nn.getNotificationIds(y),S=(0,a().O$)(mt().Ay),A=(0,a().K8)((()=>{return(0,Yt().kw)(null===(e=N().default.state)||void 0===e||null===(e=e.sidebarSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.property_page_grouping);var e}),[]),[k,w]=(0,a().K8)((()=>{if(!x)return[[],[]];const t=[],n=v?x.map((t=>$t().T.createChildStore(v,{table:_t()._p,id:t,spaceId:e.spaceId}))):[],i=[],a=se().oE(n.map((n=>{if(!n.isDefined())return null;if("commented"===n.getType()&&n.getParentNotificationId())return null;if(("grouped-block-property-updated"===n.getType()||"block-property-edited"===n.getType())&&function(e,t){return e&&t.getParentNotificationId()||!e&&t.isGroupedNotification()}(A,n))return null;if(n.getInvalid())return null;if("mentions"===e.type&&n.getVisited())return null;if("archive"===e.type&&!n.getVisited())return null;const a=n.getActivityStore(),o=null==a?void 0:a.getModel();if(n.isGroupedNotification()){if(n.getChildNotificationStores().every((e=>e.isReady()))){const e=(0,qt().q)(n);if(0===e.length)return i.push(n),null;const t=(0,qt().L)(e);if("grouped-commented"===n.getType()&&0===t.filter((e=>(0,Nt().k)(e))).length)return i.push(n),null;if("grouped-block-property-updated"===n.getType()&&0===t.length)return i.push(n),null}}else{if(!a||!a.isReady())return null;if(!o||o.invalid)return i.push(n),null}const r=n.getDiscussionStore();if(null!=r&&r.isReady()&&"none"===(null==r?void 0:r.getRole()))return i.push(n),null;t.push(n.pointer),a&&t.push(a.pointer),r&&t.push(r.pointer);const s=n.getNavigableBlockPointer();return s&&t.push(s),{activity:o,notificationStore:n}}))).sort(((e,t)=>Number(t.notificationStore.getEndTime())-Number(e.notificationStore.getEndTime())));return nn.cacheInboxPointers(b,y,t),[a,i]}),[x,v,b,y,e,A]),j=(0,a().K8)((()=>gt().dl()),[]),I=0===(0,a().K8)((()=>gt().Yz(k,e.type).size),[k,e.type]),T=(0,a().K8)((()=>{if(!v||t)return null;if(!x)return null;const e=[];let n=[];const a=gt().Ot();let o;return k.forEach((({activity:t,notificationStore:r},s,u)=>{const p=Number(r.getEndTime()),m=a.findIndex((e=>{const{cutoffTime:t}=e;return void 0===t||t<=p}));if(m!==o){const t=a[m].name;e.push((0,d.jsx)("div",{children:n},`${t}-section-name`)),n=[(0,d.jsxs)(i.Fragment,{children:[1!==e.length?(0,d.jsx)("div",{style:{height:8}}):void 0,(0,d.jsx)(tn,{groupName:t})]},`${t}-inbox-group-section`)],o=m}if(r.isGroupedNotification())n.push((0,d.jsx)(Wt,{notificationStore:r,isLast:!1,source:l,tab:c},r.id));else if(t){const e=r.getValue();e&&n.push((0,d.jsx)(Ot,{activity:t,rootStore:v,isLast:!1,source:l,tab:c,notification:e},r.id))}})),e.push((0,d.jsx)("div",{children:n},"time-grouping")),e}),[v,t,x,k,l,c]),C=(0,Dt().fJ)(zt);(0,i.useEffect)((()=>{if(!v)return;!function(e,t,n){const i=e.filter((e=>!e.getRead()));0!==i.length&&(Et().log({level:"warning",from:"NotificationInbox",type:"invalidNotificationData",data:{ids:i.map((e=>e.id))}}),Rt().createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:n,canUndo:!0,perform:e=>{for(const n of i){const i=n.getModel();i&&ot().ZB({notification:i,rootStore:t,transaction:e,read:!0})}}}))}(w,v,b);const e=k.some((({notificationStore:e})=>!e.getRead()&&!e.getVisited())),t=e&&k.some((({notificationStore:e})=>e.getRead()&&!e.getVisited()));switch(j){case"unread_and_read":case"unread_only":mt().Ay.setState({...S,currentTab:"mentions",isCurrentTabEmpty:I,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e,showOnlyUnreadNotifications:"unread_only"===j,unreadNotificationIds:[]});break;case"archived_only":mt().Ay.setState({...S,isCurrentTabEmpty:I,currentTab:"archive"});break;case"all_updates":break;default:(0,m().HB)(j)}}),[j,S,I,k,v,b,w]);const M=(0,a().K8)((()=>Xt().A.getUnreadCountForSidebarSpace().mentions),[]),P=(0,i.useRef)(!1);(0,i.useEffect)((()=>{!P.current&&"unread_only"===j&&I&&M>0&&((0,Pt().u)({environment:b,event:{eventName:"inbox_unread_filter_empty_with_badge_count",eventProperties:{badge_count:M}}}),P.current=!0)}),[j,I,b,M]);const E=on(o);return!v||t?(0,d.jsx)("div",{style:E,children:(0,d.jsx)(r().sA,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):x&&"resolved"===C.status?(0,d.jsxs)("div",{style:I?E:cn(o,b),children:[I?s:void 0,(0,d.jsx)("section",{role:"feed",className:"notranslate",children:T}),(0,d.jsx)(st().A,{onChange:e=>{if(!h.isMobile&&"closed"===gt().I6())return null;e<200&&x.length>=p&&g(x.length+20)}})]}):(0,d.jsx)("div",{style:cn(o,b),children:(0,d.jsx)(_().J,{areaHeight:window.innerHeight})})}function ln(e){const t=(0,u().v3)();return(0,i.useEffect)((()=>{void 0!==e.requestId&&function(e,t){if(!(e in Zt))return;const n=Zt[e];if(n.measured)return;n.measured=!0;const{startTime:i,size:a,type:o}=n;Jt().default.DO_NOT_USE_measureLegacy({metricName:"notification_render",startTime:i},{environment:t,data:{size:a,type:o}})}(e.requestId,t)}),[e.requestId,t]),(0,d.jsx)(d.Fragment,{children:e.children})}function dn(e){const{type:t,empty:n,source:o,tab:r,size:s,setSize:l,scrolledToTop:c,checkpoint:p}=e,g=(0,u().v3)(),{currentUserStore:f,currentSpaceStore:y,currentSpaceViewStore:b,currentUserRootStore:h}=(0,a().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t,sidebarSpaceViewStore:n,currentUserRootStore:i}=N().default.state;return{currentUserStore:e,currentSpaceStore:t,currentSpaceViewStore:n,currentUserRootStore:i}}),[]),v=(0,a().K8)((()=>"unread_only"===gt().dl()),[]),[x,S]=(0,i.useState)(p),A=(0,i.useMemo)((()=>function(e,t){switch(e){case"mentions":return t?"unread_only":"unread_and_read";case"archive":return"archived";default:(0,m().HB)(e)}}(t,v)),[t,v]),[k,w]=(0,Bt().Yb)((async()=>{if(!f||!y)return null;if((0,Ht().o)(b)&&h){const e=(0,Kt().f)({currentUserRootStore:h}).map((e=>e.getSpaceId()));return async function(e){const{environment:t,userId:n,spaceIds:i,size:a,type:o,requestType:r}=e,s=mt().Ay.startLoading();Qt(s,{size:a,type:o});const l=await(0,it().lX)(i,10,(e=>ce().callApi({eventName:"getNotificationLog",environment:t,data:{spaceId:e,size:a,type:r},userId:n,headers:(0,Ft().WS)({spaceId:e})})));mt().Ay.endLoading(s);return{notificationIds:l.flatMap((e=>"failed"===e.type?[]:e.data.notificationIds)),requestId:s}}({environment:g,userId:f.id,spaceIds:e,requestType:A,size:s,type:t})}return async function(e){const{environment:t,userId:n,spaceId:i,size:a,type:o,requestType:r}=e,s=mt().Ay.startLoading();Qt(s,{size:a,type:o});const l=await ce().callApi({eventName:"getNotificationLog",environment:t,data:{spaceId:i,size:a,type:r},userId:n,headers:(0,Ft().WS)({spaceId:i})});if(mt().Ay.endLoading(s),"failed"===l.type)throw l.error;return{notificationIds:l.data.notificationIds,requestId:s}}({environment:g,userId:f.id,spaceId:y.id,requestType:A,size:s,type:t})}),[y,b,f,h,g,A,s,t],{throttle:1e3});if((0,i.useEffect)((()=>{p!==x&&(w(),S(p))}),[p,x,w]),!f||!y||!k)return null;const j=y.id,I=f.id,{value:T,error:C}=k,M={spaceId:j,userId:I,type:t};return Gt().setState({request:M,result:null==T?void 0:T.notificationIds}),(0,d.jsx)(ln,{requestId:null==T?void 0:T.requestId,children:(0,d.jsx)(sn,{type:t,requestType:A,empty:n,source:o,tab:r,size:s,setSize:l,request:M,error:C,result:null==T?void 0:T.notificationIds,scrolledToTop:c})})}function cn(e,t){const{device:n}=t;return{minHeight:n.isMobile||"mentions"===e?void 0:"75vh"}}function un(e){const t=(0,u().Y0)(),n=(0,u().v3)();(0,i.useEffect)((()=>()=>(at().L_(n),void ot()._V({environment:n,newTab:"mentions",shouldTrack:!1}))),[n]);const a=(0,o().IS)((e=>({padding:{width:1}})),[]);let r;if(t.isMobile){const n="mobileTopBar";r={menuType:me().gu.Modal,title:(0,d.jsx)(At().R,{}),width:e.format===dt().Cn.RenderAsPage?"100vw":void 0,renderAsPage:e.format===dt().Cn.RenderAsPage,leftRightButtonStyle:{paddingInlineEnd:14},right:[(0,d.jsx)(Mt,{location:n},"InboxNotificationSettingsButton"),(0,d.jsx)("span",{style:a.padding},"paddingSpan2"),(0,d.jsx)(St().F,{},"InboxFilterButton"),(0,d.jsx)("span",{style:a.padding},"paddingSpan1"),(0,d.jsx)(ft().C,{},"InboxEllipsisButton")],left:[(0,d.jsx)(gn,{},"loading-spinner"),t.isPhone&&(0,pt().T)("supportsNativeHome")&&e.format===dt().Cn.RenderAsPage&&!(0,pt().T)("supportsNativeInbox")?void 0:(0,d.jsx)(K().I,{icon:nt().$,size:"lg"})],onClickLeft:e.onClose,whiteBackground:!0,disableHeaderShadow:!0}}else r={menuType:me().gu.Popup,height:"auto"};return(0,d.jsxs)(Ae().A,{...r,className:A().e3e,children:[(0,d.jsx)(st().A,{onChange:(e,{offsetFromTop:t})=>{mt().gJ.setState(t<=0)}}),(0,d.jsx)(rt().A,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>e.format===dt().Cn.RenderAsPage?(0,d.jsx)(mn,{}):(0,d.jsx)(pn,{})})]})}function pn(){const e=(0,ct().r)(),t=(0,a().K8)((()=>gt().dl()),[]),n={emptyState:{marginTop:100,cursor:"auto"}};return(0,d.jsx)(d.Fragment,{children:"all_updates"!==t?(0,d.jsx)(an,{type:"archived_only"===t?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,d.jsx)("div",{style:n.emptyState,children:(0,d.jsx)(xt,{})})},t):e&&(0,d.jsx)(O().A,{spaceId:e,source:"notifications_tab",empty:()=>(0,d.jsx)("div",{style:n.emptyState,children:(0,d.jsx)(xt,{})})},t)})}function mn(){const e=(0,u().v3)();return(0,d.jsx)(lt().A,{fetch:async()=>{await it().wR(0),await N().default.waitUntil((()=>void 0!==N().default.state.sidebarSpaceStore))},loading:()=>(0,d.jsx)(i.Fragment,{}),willRender:()=>{var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({environment:e,type:"updates"})},render:()=>(0,d.jsx)(f().A,{initial:{opacity:0},animate:{opacity:1},children:(0,d.jsx)(pn,{})})})}function gn(){const e=(0,a().K8)((()=>void 0!==mt().Ay.state.loadingId),[]),t=(0,ut().A)(e,400,0);return(0,pt().T)("supportsNativeHome")?t?(0,d.jsx)(X().A,{style:{width:14}}):(0,d.jsx)("div",{style:{width:14}}):null}var fn=()=>n(965351),yn=()=>n(84987),bn=()=>n(150669),hn=()=>n(718827),vn=()=>n(105819),xn=()=>n(279047),Sn=()=>n(141333),An=()=>n(443194),kn=()=>n(441199);function wn(){const e=(0,o().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:6,height:36,width:174,position:"absolute",insetInlineStart:"50%",marginInlineStart:-87,bottom:12,zIndex:20,borderRadius:18,background:e.blue.background.accentPrimary,color:e.text.inversePrimary,boxShadow:e.buttonBoxShadow,fontSize:14},hovered:{background:e.blueButtonHoveredBackground},pressed:{background:e.blueButtonPressedBackground},icon:{width:16,height:16}})),[]);return(0,d.jsxs)(hn().Ay,{style:e.button,hoveredStyle:e.hovered,pressedStyle:e.pressed,href:"https://dev.notion.so/notion/346c06d81dbf4cf188bf44fcef6a6a62?v=fa0376c6fb2a40f0b77d68b683f73e5b&pvs=4",external:!0,children:[(0,vn().pencilLineIcon)(e.icon),(0,d.jsx)("div",{children:"Provide Feedback"})]})}function jn(e){const{titleId:t}=e,n=(0,u().Y0)(),i=(0,a().K8)((()=>{const{sidebarSpaceStore:e}=N().default.state;if(e)return e.id}),[]),r=(0,a().K8)((()=>!1),[]),s=(0,a().K8)((()=>wt().n5()),[]),l=(0,a().K8)((()=>kn().default.state.mode),[]),c=(0,a().K8)((()=>gt().dl()),[]),p=(0,o().IS)((e=>({container:{flexDirection:"column",width:"100%",display:"flex"},scroller:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",marginInlineEnd:0,pointerEvents:"auto",width:"100%",..."peek"===l?{}:{minWidth:s}},emptyState:{marginTop:100,cursor:"auto"},scrollBorderContainer:{width:n.isPhone?void 0:"calc(100% - 1px)"}})),[s,l,n.isPhone]),m=(0,a().uB)(void 0,bn().A),g=(0,a().K8)((()=>m.state.elementRef??{current:null}),[m]),f=0===(0,Sn().yE)(g);return(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)(An().Q,{type:"inbox",titleId:t}),(0,d.jsx)("div",{style:p.scrollBorderContainer,children:(0,d.jsx)(xn().A,{type:"top",scrollerStore:m})}),(0,d.jsxs)(W().H,{type:z().A.Y,style:p.scroller,store:m,children:[(0,d.jsx)(st().A,{onChange:(e,{offsetFromTop:t})=>{mt().gJ.setState(t<=0)}}),"all_updates"!==c?(0,d.jsx)(an,{type:"archived_only"===c?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,d.jsx)("div",{style:p.emptyState,children:(0,d.jsx)(xt,{})}),isScrolledToTopFromOtherSidebar:f},c):i&&(0,d.jsx)(O().A,{spaceId:i,source:"notifications_tab",empty:()=>(0,d.jsx)("div",{style:p.emptyState,children:(0,d.jsx)(xt,{})})},c)]}),r?(0,d.jsx)(wn,{}):void 0]})}var In=()=>n(509659),Tn=()=>n(105127)},505108:(e,t,n)=>{n.d(t,{a:()=>m});var i=n(296540),a=()=>n(401497),o=()=>n(699143),r=()=>n(493552),s=()=>n(534177),l=()=>n(284371),d=()=>n(819121),c=()=>n(451306),u=n(474848);function p(e){const{disabled:t,checked:n,selectorSize:i}=e,[o,r]=(0,d().A)(),s=function(e){const{checked:t,disabled:n,isFocusVisible:i,selectorSize:o}=e;return(0,a().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}`,background:n?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?e.icon.quaternary:e.border.strong}`,background:e.background.primary},...i&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===o?14:18,height:"small"===o?14:18,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,n,i,o])}({checked:n,disabled:t,isFocusVisible:r,selectorSize:i});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{ref:o,type:"radio",style:s.input,className:"radio-button",...e}),(0,u.jsx)("span",{...(0,c().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}const m=i.forwardRef((function({additionalContent:e,description:t,isDisabled:n,isSelected:r,label:s,name:d,onChange:c,width:p="fill",selectorSize:m="normal",selectAlignXAxis:y="left",selectAlignYAxis:b="center",selectType:h="checkbox",style:v,supportText:x,value:S,colorVariant:A,alignAdditionalContent:k,...w},j){const I=(0,i.useId)(),T=function(e){const{isSelected:t,isDisabled:n,selectAlignYAxis:i,alignAdditionalContent:o}=e;return(0,a().IS)((e=>{const a=t&&!n?e.blue.border.accentPrimary:e.border.primary;return{container:{display:"flex",alignItems:o??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${a}`,...!n&&{cursor:"pointer"}},title:{fontWeight:l().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===i?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,n,i,o])}({isSelected:r,isDisabled:n,selectAlignYAxis:b,alignAdditionalContent:k}),C=(0,u.jsxs)(o().Y1,{direction:"horizontal",align:"top"===b?"top-left":"center-left",gap:12,width:p,children:[(0,u.jsx)("div",{style:T.selectorWrapper,children:(0,u.jsx)(f,{id:I,selectType:h,name:d,value:S,onChange:c,isSelected:r,selectorSize:m,isDisabled:n,...w})}),(0,u.jsx)(g,{colorVariant:A,description:t,label:s,selectorSize:m,supportText:x,isDisabled:n})]}),M=(0,u.jsxs)(o().Y1,{direction:"horizontal",align:"top"===b?"top-center":"center",gap:12,children:[(0,u.jsx)(g,{colorVariant:A,description:t,label:s,selectorSize:m,supportText:x,isDisabled:n}),(0,u.jsx)("div",{style:{...T.selectorWrapper,...T.rightAlignSelectorWrapper},children:(0,u.jsx)(f,{id:I,selectType:h,name:d,value:S,onChange:c,selectorSize:m,isSelected:r,isDisabled:n,...w})})]}),P=e?(0,u.jsx)("div",{style:T.additionalContentWrapper,children:e}):null;return(0,u.jsx)("label",{ref:j,style:{...T.container,...v},htmlFor:I,children:"left"===y?(0,u.jsxs)(u.Fragment,{children:[C,P]}):(0,u.jsxs)(u.Fragment,{children:[P,M]})})}));function g(e){const{description:t,label:n,supportText:i,selectorSize:a,isDisabled:l,colorVariant:d}=e;let c;return"large"===a?c="Page-Content/Text-Block":"normal"===a||void 0===a?c="Body-sm/Medium":"small"===a?c="Caption/Regular":(0,s().HB)(a),(0,u.jsxs)(o().Y1,{gap:4,children:[(0,u.jsxs)(o().Y1,{gap:2,children:[(0,u.jsx)(r().D,{styleKey:c,colorVariant:d||(l?"disabled":"primary"),children:n}),t?(0,u.jsx)(r().D,{styleKey:"Caption/Regular",colorVariant:l?"disabled":"secondary",children:t}):null]}),i?(0,u.jsx)(r().D,{styleKey:"Caption/Medium",colorVariant:"tertiary",children:i}):null]})}function f(e){const{selectType:t,selectorSize:i="normal",id:o,name:r,value:l,onChange:d,isSelected:c,isDisabled:m,...g}=e,f=(0,a().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,u.jsx)(p,{id:o,name:r,value:l,onChange:d,checked:c,disabled:m,selectorSize:i,...g});case"checkbox":return(0,u.jsx)("div",{style:f.checkboxWrapper,children:(0,u.jsx)(n(115562).W,{id:o,name:r,value:l,onChange:d,checked:c,disabled:m,selectorSize:i,...g})});case"none":return null;default:(0,s().HB)(t)}}},541235:(e,t,n)=>{n.d(t,{Ud:()=>r,YD:()=>o,c$:()=>i,q_:()=>a});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]}},a="completed",o="dismissed";function r(e,t){return null==t?void 0:t[e]}},551619:(e,t,n)=>{n.d(t,{Hy:()=>T,NV:()=>j,O9:()=>M,Rg:()=>C,Sm:()=>N,f7:()=>P,n$:()=>E,no:()=>B,sx:()=>I});var i=()=>n(59226),a=()=>n(726637),o=()=>n(402014),r=()=>n(484714),s=()=>n(792485),l=()=>n(56366),d=()=>n(700500),c=()=>n(519831),u=()=>n(620689),p=()=>n(591197),m=()=>n(835066),g=()=>n(964345),f=()=>n(267584),y=()=>n(478726),b=()=>n(747100),h=()=>n(665579),v=()=>n(765957),x=()=>n(375447),S=()=>n(66496),A=()=>n(548821),k=()=>n(712505),w=()=>n(302022);function j(e){(0,o().SQ)({event:e,context:o().y$.EditorMouseDown,callback:()=>{}})}function I(e){(0,o().SQ)({event:e,context:o().y$.Click,callback:()=>{}})}function T(e){return(0,l().K8)((()=>Boolean(w().A.state.pageMap[e.id])||S().A.state.pages.has(e.id)),[e.id])}function C(e,t){const n=(0,r().v3)(),i=(0,s().S)(),a=T(e),o=(0,l().K8)((()=>{var n,i;return t===A().Rr.Frame?Boolean(null===(n=v().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===A().Rr.PeekView&&k().default.state.open?Boolean(null===(i=k().default.state.loadingContainerStore)||void 0===i?void 0:i.state.ready):t===A().Rr.CollectionPageView||t===A().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=P(e);return(0,l().K8)((()=>{if(!o)return!1;const t=n.currentUser.isLoggedIn(),r=i&&i.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=r&&r.hasPublicPermission)||"edit"===(null==r?void 0:r.permission))&&!a&&!d)}),[n.currentUser,d,o,i,a,e])}function M(e,t){const n=(0,r().v3)(),o=(0,s().S)(),{isTablet:d}=(0,r().Y0)(),c=(0,i().X)("tablet_refresh_template_pills_gate");return(0,l().K8)((()=>{if(t===A().Rr.SitePreview)return!1;if(a().A.isMobile&&(!d||!c))return!1;if(!n.currentUser.isLoggedIn())return!1;const i=o&&o.publicEditModeStore.state;if(null!=i&&i.hasPublicPermission&&"edit"!==(null==i?void 0:i.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const s=g().gZ.state,l=g().Di.state;if(s&&e.id===l)return!1;return!((0,y().L5)(t)?p().VY.state:p().u3.state)}),[n,o,e,t,d,c])}function P(e){return(0,l().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(d().xd.externalObjectInstancePage)}),[e])}function N(e){return(0,l().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===c().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){const t=(0,r().v3)(),{device:n,WindowSizeStore:i}=t,o=(0,l().K8)((()=>{const e=i.state.height,n=a().A.isMobile&&x().Ay.state.open?e:0;return u().C6(t)+n}),[t,i]);return(0,l().K8)((()=>"home-phone"===e?h().q3:n.isTablet?380:n.isIOS?Math.max(350,o):a().A.isMobile?400:"side-peek"===e||"center-peek"===e?b().ln:"home"===e?h().wH:"30vh"),[n,o,e])}function B(e){const t=(0,r().v3)(),n=(0,l().K8)((()=>(0,m().dC)(t,e)),[t,e]);return(0,l().K8)((()=>n&&!e.isFullWidth()?(0,m().Zy)(t,(0,b().cq)(e),(0,b().RX)(e)):0),[t,n,e])}},555267:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(296540),a=()=>n(401497),o=()=>n(98126),r=()=>n(62856),s=n(474848);function l({loadingMessage:e}){const t=(0,a().DP)(),n=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:n?(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(o().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:t.text.secondary},children:e}):void 0]}):void 0})}},557297:(e,t,n)=>{n.d(t,{lz:()=>o,nO:()=>a,wl:()=>r});var i=()=>n(645873);const a={chatSidebar:new(i().O2)("chatSidebar",(()=>Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(45158),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(35564),n.e(87487),n.e(28463),n.e(2703)]).then(n.bind(n,942646)))),chatSidebarActions:new(i().O2)("chatSidebarActions",(async()=>await Promise.resolve().then(n.bind(n,118078)))),chatSidebarHelpers:new(i().O2)("chatSidebarHelpers",(async()=>await Promise.resolve().then(n.bind(n,890754)))),chatSidebarModeButton:new(i().O2)("chatSidebarModeButton",(async()=>await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(67539),n.e(41383),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(34442),n.e(31276),n.e(35738),n.e(77747),n.e(35564),n.e(8501),n.e(91347),n.e(32994),n.e(1499),n.e(94814)]).then(n.bind(n,256499)))),dockedSidebar:new(i().O2)("dockedSidebar",(async()=>await Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(45158),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(35564),n.e(87487),n.e(28463)]).then(n.bind(n,675803)))),mobileChatModal:new(i().O2)("mobileChatModal",(async()=>await Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(87487),n.e(63454)]).then(n.bind(n,257819))))},o=(0,i()._h)(a.chatSidebar,(e=>e.ChatSidebar)),r=(0,i()._h)(a.chatSidebarModeButton,(e=>e.ChatSidebarModeButtonPopupContents))},563015:(e,t,n)=>{n.d(t,{eJ:()=>f,ew:()=>g,ml:()=>c,rA:()=>p,yI:()=>m,zf:()=>u});n(581454);var i=()=>n(496603),a=()=>n(534177),o=()=>n(708685),r=()=>n(145076),s=()=>n(349835),l=()=>n(239381);function d(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,a().HB)(e)}}function c(e){switch(e.type){case s().M9.InvalidCharacter:return{...r().x0.InvalidCharacter,values:{errorCharacter:e.character}};case s().M9.UnclosedStringLiteral:return r().x0.UnclosedStringLiteral;case s().M9.UnclosedComment:return r().x0.UnclosedComment;case s().M9.TokenExpected:return{...r().x0.TokenExpected,values:{expectedToken:e.token}};case s().M9.StringLiteralContainsToken:return r().x0.StringLiteralContainsToken;case s().M9.ExpressionExpected:return r().x0.ExpressionExpected;case s().M9.PropertyTokenOrFunctionExpected:return r().x0.PropertyTokenOrFunctionExpected;case s().M9.EndOfInputExpected:return r().x0.EndOfInputExpected;case s().M9.UnexpectedError:return r().x0.UnexpectedError;case s().M9.TooDeeplyNested:return r().x0.TooDeeplyNested;default:(0,a().HB)(e)}}function u(e){switch(e.type){case s().IA.FunctionCallArgumentWrongType:case s().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let n;switch(t.type){case s().IA.ThisRowTypeNotFound:n=r().Xz.ThisRowTypeNotFound;break;case s().IA.ThisRowNotBlockWithCollection:n=r().Xz.ThisRowNotBlockWithCollection;break;case s().IA.MissingPropertyOnThisRow:n={...r().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case s().IA.MissingContextVariable:{const e=(0,l().ix)(t.token)?t.token.contextValueId:t.token.valueId;n={...r().Xz.MissingContextVariable,values:{valueId:e}}}break;case s().IA.MissingBlock:n={...r().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case s().IA.CallingNotFunction:n={...r().Xz.CallingNotFunction,values:{expressionType:d(t.callee.type.type)}};break;case s().IA.FunctionCallTooFewArguments:n={...r().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case s().IA.FunctionCallUnexpectedArgument:n={...r().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().IA.FunctionCallArgumentWrongType:n={...r().Xz.FunctionCallArgumentWrongType,values:{argumentType:d(t.argument.type.type),functionName:t.libraryFunction.name}};break;case s().IA.MemberPropertyMismatchCollection:n={...r().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case s().IA.MemberPropertyMissing:n={...r().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case s().IA.MemberPropertyTargetNotBlock:n=r().Xz.MemberPropertyTargetNotBlock;break;case s().IA.MemberPropertyTypeInvalid:n={...r().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case s().IA.UndefinedIdentifier:n={...r().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case s().IA.InvalidPropCall:n={...r().Xz.InvalidPropCall,values:{propertyName:t.name}};break;case s().IA.InvalidContextCall:n={...r().Xz.InvalidContextCall,values:{variableName:t.name}};break;case s().IA.InvalidVariableCall:n={...r().Xz.InvalidVariableCall,values:{variableName:t.name}};break;case s().IA.UnifiedFunctionCannotFindFunction:n={...r().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case s().IA.UnifiedFunctionNoArguments:n={...r().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case s().IA.UnifiedFunctionTargetWrongType:n={...r().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:d(t.expression.type.type)}};break;case s().IA.CannotRelativelyCompareTypes:n={...r().Xz.CannotRelativelyCompareTypes,values:{lhsType:d(t.lhsType.type),rhsType:d(t.rhsType.type)}};break;case s().IA.CannotDoMathOnType:n={...r().Xz.CannotDoMathOnType,values:{lhsType:d(t.lhsType.type),rhsType:d(t.rhsType.type)}};break;case s().IA.UnaryMinusOnNonNumber:n={...r().Xz.UnaryMinusOnNonNumber,values:{type:d(t.expression.type.type)}};break;case s().IA.IdentifierExpected:n=r().Xz.IdentifierExpected;break;case s().IA.FunctionCallExpected:n={...r().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case s().IA.RenamedIdentifier:n={...r().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case s().IA.RemovedFunction:n={...r().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case s().IA.ContextVariableNotBlockWithCollection:n={...r().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case s().IA.MissingPropertyOnContextVariable:n={...r().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case s().IA.BlockPropertyTypeInvalid:n={...r().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case s().IA.DisallowedReturnType:{const i=t.allowedReturnTypes.map((t=>e.formatMessage((0,o().getHumanReadableType)(t)).toLocaleLowerCase()));n={...r().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(i,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,o().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case s().IA.CrossSpacePropertyNotSupported:n={...r().Xz.CrossSpacePropertyNotSupported};break;case s().IA.CalledFunctionOnEmptyValue:n={...r().Xz.CalledFunctionOnEmptyValue};break;default:(0,a().HB)(t)}return{...n,values:{...n.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function m(e,t){let n;switch(t.type){case s().uW.MissingThisRow:n=r().X8.MissingThisRow;break;case s().uW.MissingSchemaPropertyOnThisRow:n={...r().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case s().uW.ThisRowBlockPropertyMismatchCollection:n=r().X8.ThisRowBlockPropertyMismatchCollection;break;case s().uW.MissingContextVariable:n={...r().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case s().uW.IdentifierNotFound:n={...r().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case s().uW.CannotRelativelyCompareTypes:n={...r().X8.CannotRelativelyCompareTypes,values:{lhsType:d(t.lhsType),rhsType:d(t.rhsType)}};break;case s().uW.CannotDoMathOnType:n={...r().X8.CannotDoMathOnType,values:{valueType:d(t.valueType)}};break;case s().uW.CannotCallNonFunction:n={...r().X8.CannotCallNonFunction,values:{calleeType:d(t.calleeType)}};break;case s().uW.UnifiedFunctionPropertyNotFound:n={...r().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case s().uW.LibraryFunctionExecutionError:const i=t.error instanceof s().x4?t.error:void 0;n=(null==i?void 0:i.info.type)===s().v3.DateInvalidDurationUnit?{...r().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:i.info.invalidUnit}}:(null==i?void 0:i.info.type)===s().v3.CannotUseToNumberOnList?{...r().gW.CannotUseToNumberOnList}:(null==i?void 0:i.info.type)===s().v3.CannotRoundToNonInteger?{...r().gW.CannotRoundToNonInteger,values:{precision:i.info.precision}}:(null==i?void 0:i.info.type)===s().v3.CannotRoundToTooManyDecimalPlaces?{...r().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:i.info.precision}}:(null==i?void 0:i.info.type)===s().v3.NumberFormatInvalid?{...r().gW.NumberFormatInvalid,values:{invalidFormat:i.info.invalidFormat}}:{...r().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallTooFewArguments:n={...r().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallUnexpectedArgument:n={...r().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallArgumentWrongType:n={...r().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:d(t.argumentType)}};break;case s().uW.AccessingPropertyOnNonBlock:n=r().X8.AccessingPropertyOnNonBlock;break;case s().uW.MissingDataDependencyBlock:n={...r().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case s().uW.MissingDataDependencyPerson:n={...r().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case s().uW.MemberPropertyMismatchCollection:n=r().X8.MemberPropertyMismatchCollection;break;case s().uW.MissingPropertyOnSchemaForMemberProperty:n=r().X8.MissingPropertyOnSchemaForMemberProperty;break;case s().uW.UnaryMinusOnNonNumber:n={...r().X8.UnaryMinusOnNonNumber,values:{expressionType:d(t.expressionType)}};break;case s().uW.UnexpectedRecoveryNode:n=r().X8.UnexpectedRecoveryNode;break;case s().uW.UnexpectedError:n=r().X8.UnexpectedError;break;case s().uW.DepthExceeded:n=r().X8.DepthExceeded;break;case s().uW.CycleDetected:n=r().X8.CycleDetected;break;case s().uW.DownstreamParseFailure:n=r().X8.DownstreamParseFailure;break;case s().uW.MaxEvaluationTimeExceeded:n=r().X8.MaxEvaluationTimeExceeded;break;case s().uW.MissingSchemaPropertyOnCollection:n={...r().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case s().uW.ContextVariableWrongType:n={...r().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case s().uW.DisallowedValueType:{const i=t.allowedValueTypes.map((t=>e.formatMessage((0,o().getHumanReadableType)(t)).toLocaleLowerCase()));n={...r().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(i,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,o().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,a().HB)(t)}return(0,l().li)(t)?{...n,values:{...n.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:n}function g(e){const t=null==e?void 0:e.values;return[i().cJ(e,"values"),t]}function f(e){return e.type===s().uW.DepthExceeded||e.type===s().uW.CycleDetected||e.type===s().uW.MaxEvaluationTimeExceeded||e.type===s().uW.LibraryFunctionExecutionError}},567121:(e,t,n)=>{n.d(t,{EG:()=>r,K5:()=>o,RH:()=>a,Yi:()=>s,ls:()=>i});const i=32,a=202,o=1e3,r="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,n)=>{n.d(t,{r:()=>i});const i=(0,n(583835).Dv)("importEvernote")},591197:(e,t,n)=>{n.d(t,{VY:()=>s,ZJ:()=>o,u3:()=>r});var i=()=>n(496506);class a extends(()=>n(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const o=new a,r=new(i().ComputedStore)((()=>!1!==o.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(i().ComputedStore)((()=>!1!==o.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},665579:(e,t,n)=>{n.d(t,{$L:()=>l,BZ:()=>u,EC:()=>f,EI:()=>S,E_:()=>T,Ed:()=>m,Fq:()=>h,Lu:()=>k,Mk:()=>g,O0:()=>I,V$:()=>j,VQ:()=>y,Xx:()=>A,Xy:()=>c,YS:()=>b,_g:()=>x,dd:()=>p,pW:()=>d,q3:()=>s,wH:()=>r,xK:()=>C});var i=()=>n(484714),a=()=>n(401497),o=()=>n(496603);const r=160,s=40,l=40,d=20,c=600,u=270,p=405,m=480,g=500,f=void 0,y=16,b=10,h=8,v={backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"},x=4;function S(e){return{icon:e.icon.secondary,text:e.text.secondary}}function A(e){return{width:48,height:48,fill:e.icon.tertiary}}function k({theme:e,isPhone:t}){return t?e.personalHomeBackgroundPhone:e.background.primary}const w=1;function j({isPhone:e,theme:t}){return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:t.home.tile.background,boxShadow:T({isPhone:e,theme:t}),...v}}function I({mode:e}){switch(e){case"dark":default:return 0;case"light":return w}}function T({isPhone:e,theme:t,borderOnly:n}){if("dark"===t.mode)return"unset";t.mode;const i=I({mode:t.mode});return(0,o().oE)([n||e?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function C(e){const{borderOnly:t}=e,n=(0,i().WS)(),o=(0,a().DP)();return{unhoveredBoxShadow:T({isPhone:n,theme:o,borderOnly:t}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},733815:(e,t,n)=>{n.d(t,{Z:()=>h});n(898992),n(354520),n(581454);var i=n(296540),a=()=>n(401497),o=()=>n(30537),r=()=>n(42583),s=()=>n(301608),l=()=>n(56394),d=()=>n(972435),c=()=>n(722872),u=()=>n(760217),p=()=>n(404277),m=()=>n(939740),g=()=>n(417392),f=()=>n(89924),y=()=>n(806754),b=n(474848);function h(e){const t=(0,a().IS)((e=>({popup:{width:125,marginInlineStart:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:n,hideAllTime:h}=e,[v,x]=(0,i.useState)(!1),S=s().jf.filter((e=>!h||"all_time"!==e)).map((t=>{const n=()=>{e.onChangeFilter(t),x(!1)};return{key:t,action:()=>{},render:()=>(0,b.jsx)(u().A,{focused:!1,onClick:n,title:d().A.formatMessage(s().jy[t])})}})),A=(0,b.jsx)(l().A,{on:Boolean(n),wrapStyle:t.pillStyle,icon:(0,r().D)({width:16,marginInlineEnd:6,fill:"currentColor"}),title:d().A.formatMessage(s().jy[n]),onClick:()=>{x(!0)}}),k=[{key:"filters",items:S,render:e=>(0,b.jsx)(f().A,{...e,title:null,loading:!1})}],w=(0,b.jsx)(p().A,{menuType:c().gu.Popup,header:null,children:(0,b.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:0,sections:k})});return(0,b.jsx)(y().A,{marginAfter:!1,children:(0,b.jsx)(g().Ay,{popupType:o().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:v,render:()=>w,onDismiss:()=>x(!1),keepFocus:!0,origin:A,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},739135:(e,t,n)=>{n.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>r,tb:()=>s,x$:()=>o});var i=()=>n(541235),a=()=>n(496603);function o(e,t){return r(c(e,t))}function r(e){return void 0!==e&&(e===i().q_||e===i().YD)}function s(e,t){if(r(t))return;const n=i().c$[e],a=n.steps.findIndex((e=>e.id===t));return-1===a?n.steps[0].id:a===n.steps.length-1?i().q_:n.steps[a+1].id}function l(e,t){const n=c(e,t);if(n&&!r(n))return s(t,n)}function d(e,t){const n=c(e,t);if(n)return function(e,t){const n=i().c$[e];var o;if(r(t))return null===(o=(0,a().HV)(n.steps))||void 0===o?void 0:o.id;const s=n.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?n.steps[s-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const a=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===a?i().c$[t].steps[0].id:a}},756114:(e,t,n)=>{n.d(t,{D:()=>i});function i(e,t){t.route.name;return!1}},835607:(e,t,n)=>{n.d(t,{F:()=>a});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"0.85 2.79 18.76 14.42",svg:(0,n(474848).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.669 0-1.152.263-1.482.673M5.75 3.625c-.956 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.303 1.05 2.26 1.05s1.733-.396 2.258-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.184-1.21.48-1.58.285-.354.702-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582-.582 0-1-.228-1.284-.583-.296-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.72-2.896 1.128 0 2.178.346 3.034.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.456.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818c.645-1.494 2.207-2.569 4.054-2.569s3.409 1.075 4.055 2.57a.52.52 0 0 1-.1.59c-.166.19-.462.336-.805.336h-6.3c-.342 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59"})},a=(0,n(340498).wt)("people",i)},848565:(e,t,n)=>{n.d(t,{FB:()=>p,JC:()=>g,Ql:()=>m,Wv:()=>o,Yz:()=>s,ds:()=>a,e4:()=>i,eQ:()=>r,im:()=>d,jw:()=>l,k2:()=>u,uG:()=>c});const i=8,a=10,o=8,r=24,s=6,l=1.5,d=(r-l)/2,c=r+s,u=`calc(100% + ${o+(i-s)-c}px)`,p=r+8,m=-16;function g(e,t,n){return t?20:"margin_comments"===e?12:"comment_unfurl"===e&&"start"===n?14:16}},858341:(e,t,n)=>{n.d(t,{m:()=>d});var i=()=>n(988083),a=()=>n(496603),o=()=>n(155959),r=()=>n(693202);const s=a().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),l=a().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150);function d(e,t,n){const{device:a,RouterStore:d}=e;if(!(0,o().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===d.state.route.name,i=a.isAndroid&&a.isMobileNative,o="editing"===r().default.state.mode;if(e&&i&&!o)return void s(t,n)}if((0,o().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===d.state.route.name,i=a.isIOS&&a.isMobileNative;if(e&&i)return void l(t,n)}i().A.setState({...i().A.state,phase:t,estimatedKeyboardWebViewOverlap:n})}},920498:(e,t,n)=>{n.r(t),n.d(t,{getState:()=>o,setState:()=>a});let i={};function a(e){i={...i,...e}}function o(){return i}},933371:(e,t,n)=>{n.d(t,{X:()=>i});const i=n(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},937199:(e,t,n)=>{n.d(t,{LH:()=>o,Op:()=>a,bi:()=>l,sf:()=>s,v$:()=>r});n(16280);var i=n(296540);const a=(0,i.createContext)(null);function o(){const e=(0,i.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function r(){return(0,i.useContext)(a)}a.displayName="BaseLayoutEditorContext";const s=(0,i.createContext)(null);function l(){const e=(0,i.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},965351:(e,t,n)=>{n.d(t,{Ay:()=>_,Lk:()=>F,fB:()=>P});n(581454);var i=n(296540),a=()=>n(484714),o=()=>n(56366),r=()=>n(401497),s=()=>n(934999),l=()=>n(454503),d=()=>n(895189),c=()=>n(863522),u=()=>n(340498),p=()=>n(69708),m=()=>n(534177),g=()=>n(953448),f=()=>n(572080),y=()=>n(231297),b=()=>n(760217),h=()=>n(406699),v=()=>n(285790),x=()=>n(404277),S=()=>n(939740),A=()=>n(89924),k=()=>n(859428),w=()=>n(125565),j=()=>n(722872),I=()=>n(12591),T=()=>n(538075),C=n(474848);const M=(0,p().YK)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"},markUnread:{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"},markRead:{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"},archive:{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"},unarchive:{defaultMessage:"Unarchive",id:"inboxActionsMenu.handleUnarchive.tooltipMessage"}}),P=2,N=30-2*(P+1),E=36-2*(P+1);function B(e){const{notification:t,rootStore:m,onArchiveClicked:g,onUnarchiveClicked:b,onMarkAsReadClicked:x,onMarkAsUnreadClicked:S}=e,A=(0,a().v3)(),w=(0,a().Y0)(),j=(0,p().tz)(),B=(0,o().K8)((()=>!!t&&(0,n(814388).IF)(t.type)),[t]),_=(0,o().K8)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return n(148832).B.createChildStore(m,{table:n(179034).ev,id:e})}),[m,t]),R=(0,o().K8)((()=>null==_?void 0:_.getFollowSettingsKey()),[_]),D=(0,o().K8)((()=>{if(!R)return[];if(!_)return[];return T().H8({followSettingsKey:R,environment:A,blockStore:_,from:"inbox"})}),[R,A,_]),z=B&&D.length>0,U=(0,o().K8)((()=>t.read?c().C:d().d),[t.read]),O=(0,i.useCallback)((e=>{t&&(g(),y().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:A,canUndo:!0,perform:e=>{f().s4({notification:t,rootStore:m,transaction:e})}}))}),[A,t,g,m]),W=(0,i.useCallback)((e=>{t&&(b(),y().createAndCommit({userAction:"Activity.handleUnarchive",environment:A,canUndo:!0,perform:e=>{f().JV({notificationId:t.id,visited:!1,rootStore:m,transaction:e})}}))}),[A,t,b,m]),V=(0,i.useCallback)((e=>{t&&(t.read?S():x(),y().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:A,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:m,transaction:e,read:!t.read})}}))}),[A,t,x,S,m]),L=(0,i.useCallback)((()=>{R&&_&&t&&n(848259).zP({environment:A,notificationId:t.id,pageId:_.pointer.id,isCurrentlyFollowing:(0,n(518773).A)(R).following,from:"inbox"})}),[A,_,R,t]),K=(0,r().IS)((e=>({container:{display:"flex",gap:1,height:"min-content",padding:P,borderWidth:w.isMobile?0:1,borderStyle:"solid",borderColor:e.border.primary,background:e.buttonGroupBackground,borderRadius:6,boxShadow:w.isMobile?void 0:"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},button:{height:w.isMobile?E:N,width:w.isMobile?E:N,borderRadius:4},icon:{fill:e.icon.secondary,padding:0,width:w.isMobile?u().lD.default:u().Ev.default,height:w.isMobile?u().lD.default:u().Ev.default}})),[w.isMobile]),H=(0,I().C)();return t.visited?(0,C.jsx)("div",{style:K.container,children:(0,C.jsx)(k().A,{renderTooltip:()=>j.formatMessage(M.unarchive),render:e=>(0,C.jsx)(v().A,{ariaLabel:j.formatMessage(M.unarchive),style:K.button,icon:l().arrowUTurnUpLeftIcon,iconStyle:K.icon,onClick:W,...e})})}):(0,C.jsxs)("div",{style:K.container,children:[z?(0,C.jsx)(k().A,{renderTooltip:()=>(0,C.jsx)(p().sA,{...M.changePageNotificationSettings}),render:e=>(0,C.jsx)(h().A,{style:H.popup,popupType:w.isMobile?h().z.SlideUp:h().z.Popup,alignmentToOrigin:"start",placementToOrigin:"bottom",render:e=>(0,C.jsx)(F,{blockStore:_,notification:t,handlers:{handleUnarchive:W,handleArchive:O,toggleNotificationReadStatus:V},closePopup:()=>e.close()}),renderOrigin:t=>(0,C.jsx)(v().A,{ariaLabel:j.formatMessage(M.changePageNotificationSettings),style:K.button,icon:n(104077).r,iconStyle:K.icon,...e,...(0,n(553965).A)(t,{onClick:()=>L()})})})},"pageNotificationSettings"):void 0,(0,C.jsx)(k().A,{renderTooltip:()=>j.formatMessage(t.read?M.markUnread:M.markRead),render:e=>(0,C.jsx)(v().A,{ariaLabel:j.formatMessage(t.read?M.markUnread:M.markRead),style:K.button,icon:U,iconStyle:K.icon,onClick:V,...e})},"markUnread"),(0,C.jsx)(k().A,{renderTooltip:()=>j.formatMessage(M.archive),render:e=>(0,C.jsx)(v().A,{ariaLabel:j.formatMessage(M.archive),style:K.button,icon:s().B,iconStyle:K.icon,onClick:O,...e})},"archive")]})}function F(e){const{blockStore:t,notification:n,handlers:i,closePopup:u}=e,{handleArchive:f,handleUnarchive:y,toggleNotificationReadStatus:h}=i,v=(0,a().v3)(),k=(0,a().Y0)(),P=(0,p().tz)(),N=(0,o().K8)((()=>null==t?void 0:t.getFollowSettingsKey()),[t]),E=(0,o().K8)((()=>{if(!N)return[];if(!t)return[];return T().H8({followSettingsKey:N,environment:v,blockStore:t,from:"inbox"})}),[N,v,t]),B=(0,I().C)(),F=(0,r().IS)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",...B.icon},icon:{height:24,width:24}})),[B.icon]),_=(0,g().J)(),R=(0,o().K8)((()=>n.read?(0,c().C)(F.icon):(0,d().d)(F.icon)),[n.read,F.icon]);return(0,C.jsx)(x().A,{menuType:j().gu.Popup,height:k.isMobile?"50vh":void 0,minWidth:250,maxWidth:k.isMobile?"100vw":void 0,scrollerStyle:B.menuScroller,header:!k.isMobile&&(0,C.jsx)(w().A,{style:B.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,C.jsx)(S().Ay,{type:S().Oh.Vertical,sections:[...k.isMobile?[{key:"Actions title",render:()=>(0,C.jsx)(w().A,{style:B.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"inbox.actionsSectionTitle.label",defaultMessage:"Actions"})}),items:[]},{key:"Actions",render:e=>(0,C.jsx)(A().A,{...e,topBorder:!1,style:B.sectionMenuItem}),items:["markAsReadOrUnread","archive"].map(((e,t)=>{const i=t===E.length-1,a=k.isMobile&&i;return{key:e,render:t=>"archive"===e?(0,C.jsx)(b().A,{...t,style:{...B.buttonMenuItem,...a&&B.transparentButtonMenuItemBorder},pressedStyle:B.buttonMenuItemPressed,icon:n.visited?(0,l().arrowUTurnUpLeftIcon)({...B.icon,padding:3}):(0,s().B)(B.icon),title:P.formatMessage(n.visited?M.unarchive:M.archive),titleStyle:B.title}):"markAsReadOrUnread"===e?(0,C.jsx)(b().A,{...t,style:{...B.buttonMenuItem,...a&&B.transparentButtonMenuItemBorder},pressedStyle:B.buttonMenuItemPressed,icon:(0,C.jsx)("div",{style:F.iconContainer,children:R}),title:P.formatMessage(n.read?M.markUnread:M.markRead),titleStyle:B.title}):void(0,m().HB)(e),action:({event:t})=>{"markAsReadOrUnread"===e?h(t):"archive"===e?n.visited?y(t):f(t):(0,m().HB)(e),u()}}}))}]:[],...k.isMobile?[{key:"Page notification settings title",render:()=>(0,C.jsx)(w().A,{style:B.subheader,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,C.jsx)(p().sA,{id:"inbox.notifyMeForSectionTitle.label",defaultMessage:"Page notification settings"})}),items:[]}]:[],{key:"Page notification settings",render:e=>(0,C.jsx)(A().A,{...e,topBorder:!1,style:B.sectionMenuItem}),items:E.map(((e,t)=>{const n=t===E.length-1,i=k.isMobile&&n;return{key:e.action.analyticsName,render:t=>(0,C.jsx)(b().A,{...t,style:{...B.buttonMenuItem,...i&&B.transparentButtonMenuItemBorder},pressedStyle:B.buttonMenuItemPressed,title:e.title,titleStyle:B.title,isChecked:e.isSelectedOption}),action:()=>{e.action.action({environment:v,blocks:[],publicEditMode:void 0,analyticsFrom:"inbox_long_press_menu",lazyDependencies:_}),u()}}}))}],initialFocus:void 0,onAccept:()=>u()})})}const _=i.memo(B)}}]);