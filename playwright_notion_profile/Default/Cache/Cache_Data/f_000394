(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51646],{267:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var o=()=>n(646736),i=()=>n(765957);function r(e){var t;const{sidebarSpaceStore:n}=i().default.state,{currentUser:r}=e.environment;return void 0!==r.id&&Boolean(null===(t=(0,o().sE)(n,r.id))||void 0===t?void 0:t.isWorkspaceOwner())}},3284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowSquarePathUpDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.64 3.12 18.71 13.76",svg:(0,n(474848).jsx)("path",{d:"M6.475 3.125a.625.625 0 1 0 0 1.25h7.975c.65 0 1.175.526 1.175 1.175v6.057l-1.408-1.408a.625.625 0 1 0-.884.884l2.475 2.475a.625.625 0 0 0 .884 0l2.475-2.475a.625.625 0 0 0-.884-.884l-1.408 1.408V5.55a2.425 2.425 0 0 0-2.425-2.425zM3.308 6.442a.625.625 0 0 1 .884 0l2.475 2.475a.625.625 0 1 1-.884.884L4.375 8.393v6.057c0 .649.526 1.175 1.175 1.175h7.975a.625.625 0 0 1 0 1.25H5.55a2.425 2.425 0 0 1-2.425-2.425V8.393L1.717 9.801a.625.625 0 1 1-.884-.884z"})},i=(0,n(340498).wt)("arrowSquarePathUpDown",o)},13898:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(296540);var o=()=>n(970236),i=()=>n(69708),r=n(474848);function a(e){return(0,r.jsx)(o().E,{color:"blue",style:e.style,content:(0,r.jsx)(i().sA,{id:"betaBadgeComponent.label",defaultMessage:"Beta"})})}},27356:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UISpacePermissionGroupToken:()=>b});var o=n(296540),i=()=>n(726637),r=()=>n(484714),a=()=>n(56366),s=()=>n(401497),l=()=>n(784892),c=()=>n(437607),d=()=>n(914462),u=()=>n(69708),p=()=>n(284371),m=()=>n(764353),g=()=>n(848401),f=()=>n(580648),v=n(474848);function b(e){const{parentStore:t,style:n,format:b}=e,S=e.groupPointer.id,h=e.groupPointer.spaceId,y=(0,c().S4)({spacePermissionGroupId:S,spaceId:h}),x=(0,a().K8)((()=>{if(e.groupModel)return e.groupModel;if(!t)return;return m().C.createChildStore(t,y).getModel()}),[t,y,e.groupModel]),A=(0,r().Y0)(),{outerStyle:w,avatarWrapStyle:C}=(0,s().IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginInlineEnd:6},badgeStyle:{borderRadius:4,background:e.legacyDefaultSelectColor,fontSize:i().A.isMobile?11:9,lineHeight:A.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[A]),I=(0,u().tz)(),M=(0,a().K8)((()=>(0,d().n)({intl:I,permissionGroupModel:x})),[I,x]),j=(0,o.useCallback)((e=>b===l().NY.Inline?(0,v.jsx)(f().o,{group:x,size:e}):(0,v.jsxs)("div",{style:w,children:[(0,v.jsx)("div",{style:C,children:(0,v.jsx)(f().o,{group:x,size:e})}),(0,v.jsx)("div",{style:{...p().RC},children:M})]})),[b,w,C,x,M]);return(0,v.jsx)(g().Ay,{...e,style:{margin:0,...n},renderAvatar:j})}},43972:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});n(296540);var o=()=>n(764880),i=()=>n(534177),r=()=>n(256863),a=()=>n(453697),s=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginInlineEnd:2,...e.style}};return(0,o().H3)(t)?(0,s.jsx)(r().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,s.jsx)(a().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,s.jsx)(a().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},53528:(e,t,n)=>{"use strict";n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},65402:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});const o=(0,n(69708).YK)({inputPlaceholder:{defaultMessage:"Filter by…",id:"database.viewSettings.createFilterTab.inputPlaceholder"},propertyInputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.mobileSheet.propertyInputPlaceholder"},sortTitle:{defaultMessage:"Sort",id:"database.viewSettings.mainTab.sortButton.title"},advancedFilterTitle:{defaultMessage:"Advanced filter",id:"database.viewSettings.createFilterTab.advancedFilterTitle"},addAdvancedFilterTitle:{defaultMessage:"Add advanced filter",id:"database.viewSettings.createFilterTab.addAdvancedFilter.title"},advancedFilterRulesCount:{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.viewSettings.createFilterTab.advancedFilterRulesCount.title"},filterButtonTitle:{defaultMessage:"Filter",id:"database.viewSettings.mainTab.filterButton.title"},numberOfFiltersTitle:{defaultMessage:"{numberOfFilters, plural, one {{numberOfFilters} filter} other {{numberOfFilters} filters}}",id:"database.viewSettings.mainTab.filterButton.filters.title"},noFiltersTitle:{defaultMessage:"No filters",id:"database.viewSettings.mainTab.filterButton.noFilters.title"},openFullscreenButton:{defaultMessage:"Open as full page",id:"database.collectionViewBlock.openFullscreenButton.label"},lockDatabaseMultiSourceTooltip:{defaultMessage:"Lock views and data sources in this database",id:"database.lockDatabase.multiSourceTooltip"},lockDatabaseViewsTooltip:{defaultMessage:"Lock all views in this database",id:"database.lockDatabaseViews.tooltip"},visibleToAllWorkspaceMembers:{defaultMessage:"Visible to all workspace members",id:"database.viewSettings.scimPropertiesTab.visibleToAllWorkspaceMembers"}})},65767:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("closeThick",{viewBox:"0 0 8 8",svg:(0,o.jsx)("polygon",{points:"8 1.01818182 6.98181818 0 4 2.98181818 1.01818182 0 0 1.01818182 2.98181818 4 0 6.98181818 1.01818182 8 4 5.01818182 6.98181818 8 8 6.98181818 5.01818182 4"})})},75368:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const i=new o},90907:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.06 15.66",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,o.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lock",i)},103448:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(296540);var o=()=>n(284371),i=n(474848);const r=function({imageURL:e,imageWidth:t,imageHeight:o,caption:r,title:s,imageContainerStyle:l}){if(e){const c=(0,n(478184).L)(e);return(0,i.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,i.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:4,backgroundImage:`url(${c})`,backgroundSize:"cover",marginBottom:6,...l}}),(0,i.jsx)(a,{caption:r,title:s})]})}return(0,i.jsx)(a,{caption:r,title:s,style:{width:t}})};function a({style:e,caption:t,title:n}){return(0,i.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[n?(0,i.jsx)("header",{style:{fontWeight:o().Wy.bold,marginBottom:4},children:n}):void 0,t]})}},151630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var o=n(296540),i=()=>n(56366),r=()=>n(38337),a=()=>n(871399),s=()=>n(693202),l=(n(898992),n(672577),()=>n(484714)),c=()=>n(401497),d=()=>n(555776),u=()=>n(966080),p=()=>n(933765),m=()=>n(863484),g=()=>n(53798),f=()=>n(695625),v=()=>n(77246),b=()=>n(792485),S=()=>n(206267),h=()=>n(69708),y=()=>n(314529);var x=()=>n(231297),A=()=>n(516430),w=()=>n(859428),C=()=>n(87017),I=()=>n(478726),M=()=>n(299545),j=n(474848);const _=(0,h().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),k=(0,o.forwardRef)((function({store:e,nodeRect:t,containerRect:o,selectable:r},s){const d=(0,h().tz)(),u=(0,c().DP)(),p=(0,l().v3)(),m=(0,l().WS)(),g=(0,b().S)(),k=(0,i().K8)((()=>{var t;return"editor"===e.getRole()||"read_and_write"===e.getRole()||"edit"===(null==g||null===(t=g.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==g?void 0:g.publicEditModeStore,e]),P=(0,i().K8)((()=>{var t,n;return"comment_only"===(null===(t=e.getNavigableBlockStore({skipCurrent:!0}))||void 0===t?void 0:t.getRole())||"comment"===(null==g||null===(n=g.publicEditModeStore.state)||void 0===n?void 0:n.permission)}),[null==g?void 0:g.publicEditModeStore,e]),R=(0,i().K8)((()=>"suggest"===v().Uv.getMode(e)),[e]),D=(0,i().K8)((()=>e.isFirstBlockInCalloutV2Block()),[e]),E=(0,i().K8)((()=>{var t;const o=g&&(0,n(696746).Nh)(g.pageStore.id),i=e.getType();return(!i||!["column_list","external_object_instance_page"].includes(i))&&(!m&&(!e.isNavigableAncestorNonEditableState()||"collection"===(null===(t=e.getParentStore())||void 0===t?void 0:t.table))&&(k||P&&R)&&!e.isNavigableAncestorExternallyImportedPage()&&!o&&!D&&!e.isPersonProfile())}),[P,k,D,m,R,g,e]),z=(0,i().K8)((()=>{var t;return null===(t=e.getSpaceStore())||void 0===t?void 0:t.getFreezeSettings()}),[e]),V="active"===(0,n(973454).p)(z),F=(0,n(321909).y)();return!E||V?null:(0,j.jsx)(w().A,{placement:"bottom",delayThreshold:300,renderTooltip:()=>(0,j.jsx)(B,{}),render:i=>(0,j.jsx)(n(718827).Ay,{ref:s,disallowTabbing:!0,onClick:()=>{if(!(0,n(50764).E)(p))return(0,n(541056).Q)(p);!function(e,t,o){const i="above"===o,r=v().Uv.getMode(t),s=f().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));if((0,I().fc)(t))return;i?s&&s.props.onInsertRowAbove?x().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowAbove&&s.props.onInsertRowAbove({transaction:e})}}):x().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=C().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===r&&o){const t=A().RR(e,n,o);A().tM(n,o,{id:S().JW(),type:"insert",discussionId:t.id}),A().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):M().wm(t)?n(393255).zz({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):s&&s.props.onInsertRowBelow?x().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowBelow&&s.props.onInsertRowBelow({transaction:e})}}):x().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=C().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===r&&o){const t=A().RR(e,n,o);A().tM(n,o,{id:S().JW(),type:"insert",discussionId:t.id}),A().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}});(function(e){(0,y().DO_NOT_USE_trackLegacy)(e,"click_add_menu")})(e),a().default.reset()}(p,e,(0,n(281322).r)().option?"above":"below")},style:T(e,p,u,t,o,r,F),ariaLabel:d.formatMessage(p.device.isApple?_.ariaLabelApple:_.ariaLabelWindows),...i,children:(0,n(689094).W)({width:16})})})}));function T(e,t,n,o,i,r,a){const s=(0,m().qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:o,containerRect:i,selectable:r});return{display:"flex",alignItems:"center",justifyContent:"center",fill:n.icon.tertiary,position:"absolute",insetInlineStart:s,width:24,height:24,borderRadius:4,pointerEvents:"auto",...a?{}:{cursor:"-webkit-grab"}}}function B(){const e=(0,c().DP)(),t=(0,l().v3)(),n={color:e.text.inverseSecondary};return(0,j.jsxs)("div",{style:{textAlign:"center"},children:[(0,j.jsx)(h().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,j.jsx)("span",{style:n,children:e})}}),(0,j.jsx)("div",{children:t.device.isApple?(0,j.jsx)(h().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,j.jsx)("span",{style:n,children:e})}}):(0,j.jsx)(h().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,j.jsx)("span",{style:n,children:e})}})})]})}n(354520),n(737550);const P=(0,n(340498).wt)("commentAdd",{viewBox:"0 0 16 15",svg:(0,j.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})});const R=(0,o.forwardRef)((function(e,t){const r=(0,l().v3)(),u=(0,l().Y0)(),p=(0,h().tz)(),{selectable:g,store:f,containerRect:v}=e,b=(0,i().K8)((()=>f.isFirstBlockInCalloutV2Block()),[f]),S=(0,i().K8)((()=>{var e;if(!g||u.isMobile||!g.props.shouldShowCommentMenu||b)return!1;if(Boolean(n(94953).A.getFirstSelectedDiscussionId()||n(372154).A.getFramePageFirstSelectedDiscussionId()||d().A.state.isActivelyComposing))return!1;if(f.getDiscussionStores().filter((e=>!e.getResolved())).length>0)return!1;if(n(116008).A.getBlockStore()===f)return!1;const t=f.getType();if(t&&["video","image"].includes(t))return!1;if("toggle"===t&&!n(468484).A.isOpen(f.id)&&(0,M().O3)(f,{recursivelyLoadAllDiscussions:!0}).length>0)return!1;if(f.isNavigableAncestorNonCommentableState()||f.isEmptyTitle())return!1;const o="empty"!==s().default.state.mode&&s().default.state.multiSelection;if(o&&(0,n(481292).k)(o))return!0;return!(o?(null===(e=(0,n(962845).ZS)({multiSelection:o,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===f.id))}),[f,g,u.isMobile,b]),y=(0,i().K8)((()=>{var e;const t=(0,n(124007).Z)(r),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,m().jU)({marginItemType:"add_comment",nodeRect:o,containerRect:v})}),[r,v]),x=(0,c().IS)((e=>({container:{position:"relative",insetInlineEnd:y},iconStyle:{marginInlineStart:.65},iconButton:{paddingInlineStart:6,paddingInlineEnd:6,width:"unset"}})),[y]),A=(0,o.useCallback)((async()=>{if(f.isType(n(700500).uP)){const e=f.getBlockTitleStore(),t=a().default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(792002).mk(e);if(i){const t=await n(862292).T.formulas.load();n(441467).hN({environment:r,blockStore:f,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(730307).l)({environment:r,blockStore:f,from:"right_margin"})}),[r,f]),C=(0,o.useCallback)((e=>{e?d().A.setHoverWithSource("right_margin_button"):d().A.resetHoverSource("right_margin_button")}),[]),I=(0,o.useCallback)((()=>C(!0)),[C]),_=(0,o.useCallback)((()=>C(!1)),[C]);return S?(0,j.jsx)("div",{style:x.container,onMouseDown:n(519200).t,children:(0,j.jsx)(w().A,{placement:"bottom",delayThreshold:300,renderTooltip:()=>(0,j.jsx)(h().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,j.jsx)("div",{onMouseOver:I,onMouseLeave:_,children:(0,j.jsx)(n(285790).A,{ref:t,ariaLabel:p.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:P,onClick:A,style:x.iconButton,iconStyle:x.iconStyle,...e})})})}):null}));var D=()=>n(988083);var E=()=>n(406699),z=()=>n(740914),V=()=>n(419357),F=()=>n(89924),L=()=>n(962036),O=()=>n(722872),U=()=>n(232930),H=()=>n(502438);const K=(0,h().YK)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function N(e){const{hasEditorPermissions:t,isWorkspaceAdmin:r,store:a,onDismiss:s,containerRef:c,query:d,setQuery:u}=e,p=(0,l().v3)(),m=(0,l().WS)(),g=(0,i().K8)((()=>H().default.state.stores),[]),f=(0,i().K8)((()=>{var e;return{environment:p,blocks:H().default.state.stores.length?H().default.state.stores:[a],originRect:null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu"}}),[p,a,c]),v=(0,i().K8)((()=>a.isNavigableAncestorNonEditableState()),[a]),b=(0,i().K8)((()=>(0,I().yU)(a)),[a]),[S,h]=(0,n(857437).$)(),y=(0,o.useCallback)((e=>{const t=g[0];if(t){const o=t.getType();if(o){const i=(0,n(799832).U)(t),r=(0,n(476492).sl)(i)||{};(0,n(741496).N)(p,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,n(494043).Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...r})}}e.closeParentMenu&&s()}),[p,s,g]),x=(0,i().K8)((()=>a.isCollectionView()),[a]),A=(0,n(891078).i0)(a),w=!m&&t&&!v&&!b&&!A,C=w&&(0,j.jsx)(W,{filter:d,setQuery:u,inputComboboxProps:S});let M;M=m?{menuType:O().gu.ActionSheet,header:C}:{menuType:O().gu.Popup,width:265,header:C};const _=(0,i().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,j.jsxs)(n(404277).A,{...M,children:[(0,j.jsx)(n(452558).A,{filter:d,initialFocus:d?0:void 0,sections:_?z().SH:z().JS,context:f,onAccept:y,comboboxProps:w?h:void 0,shouldShowBlockTypeTitle:!0}),d||!t&&!r?void 0:(0,j.jsx)(n(819493).$,{store:a,wordCountStores:g,isPageMoreButton:!1,hideTopBorder:!1}),d?void 0:(0,j.jsx)(n(817148).A,{store:a}),!d&&x?(0,j.jsx)(G,{}):void 0]})}function W(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,i=(0,l().Y0)(),r=(0,h().tz)();return(0,j.jsx)(F().A,{isInput:!0,children:(0,j.jsx)(V().Ay,{value:t,onChange:e=>n(e.target.value),focus:!i.isMobile||void 0,focusAfterAnimation:!0,placeholder:r.formatMessage(K.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,preventCaptureSpacebarWhenEmpty:!0,...o})})}function G(){return(0,j.jsx)(F().A,{topBorder:!0,children:(0,j.jsx)(L().g,{title:(0,j.jsx)(h().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,U().x)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const Y=(0,o.forwardRef)((function(e,t){const{selectable:s,store:d,disableDrag:u,isWorkspaceAdmin:p,nodeRect:g,containerRect:f}=e,S=(0,l().v3)(),h=(0,l().WS)(),x=(0,b().S)(),A=(0,o.useRef)(null),w=(0,i().K8)((()=>(0,n(444570).zb)()),[]),C=n(327994).j,I=(0,i().K8)((()=>(0,m().qg)({marginItemType:"drag_handle",store:d,environment:S,nodeRect:g,containerRect:f,selectable:s})),[d,S,g,f,s]),M=(0,i().K8)((()=>d.isNavigableAncestorNonEditableState()&&!d.isInsideCollection()),[d]),_=(0,i().K8)((()=>{var e;return"editor"===d.getRole()||"read_and_write"===d.getRole()||"edit"===(null==x||null===(e=x.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==x?void 0:x.publicEditModeStore,d]),k=(0,i().K8)((()=>"suggest"===v().Uv.getMode(d)),[d]),T=!u&&_&&!M&&!k,B=(0,c().IS)((e=>({div:{position:"absolute",insetInlineStart:I,width:w,height:C,pointerEvents:"auto",cursor:T?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"}})),[I,w,C,T]),[P,R]=(0,o.useState)(""),z=(0,i().K8)((()=>{const e=a().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===d}),[d]);(0,o.useEffect)((()=>()=>{z&&a().default.reset()}),[]);const V=(0,o.useCallback)((()=>{const e=a().default.state,t=D().A.state;if(e.isOpen){R(""),h&&t.phase===D().i.shown?D().A.onHide((()=>a().default.setState({...e,menuIsOpen:!0}))):a().default.setState({...e,menuIsOpen:!0}),n(778417).Lt({environment:S,store:d});const o=d.getType();o&&function(e,t){(0,y().DO_NOT_USE_trackLegacy)(e,"click_selection_menu",{block_type:t.blockType})}(S,{blockType:o})}}),[S,h,d]),F=(0,o.useCallback)((()=>a().default.reset()),[]);return(0,i().K8)((()=>{if(!s||!s.props.shouldShowHoverMenu||h)return!1;const e=d.getType();return!e||!["column_list"].includes(e)}),[d,s,h])?(0,j.jsx)("div",{style:B.div,ref:A,children:(0,j.jsx)(n(417392).Ay,{popupType:h?E().z.SlideUp:E().z.Popup,open:z,placementToOrigin:"left",alignmentToOrigin:"center",onDismiss:F,originGap:5,forceInitialInbound:!0,style:B.popup,render:()=>(0,j.jsx)(N,{hasEditorPermissions:_,isWorkspaceAdmin:p,store:d,onDismiss:F,containerRef:A,query:P,setQuery:R}),origin:(0,j.jsx)(n(199896).Ay,{className:r().LpV,store:d,isHoverMenu:!0,canDrag:T,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,children:(0,j.jsx)(n(348501).A,{ref:t,width:w,height:C,disallowTabbing:!0,onClick:V,disableDrag:!T})}),trapFocus:z})}):null})),Z=o.forwardRef((function(e,t){var r;const s=(0,l().v3)(),{exactTargetBlockStore:b,container:S}=e,{targetSelectable:h,targetBlockStore:y}=(0,i().K8)((()=>({targetSelectable:f().T.findSelectablesFromStore(b).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu))),targetBlockStore:b})),[b]),[x,A]=(0,o.useState)(null==h||null===(r=h.getNode())||void 0===r?void 0:r.getBoundingClientRect()),w=(0,i().K8)((()=>{if(!b)return!1;if(null!=b&&b.pathIsDead())return!0;const e=(0,n(254619).N)(b);return e&&(0,n(337567).pQ)(e.id)}),[b]);(0,o.useEffect)((()=>{if(!h)return;const e=h.getNode();if(!e)return;const t=()=>{A(e.getBoundingClientRect())},n=(0,g().NM)(e);n&&(0,u().P)(n,"scroll",t);const o=(0,g().T8)(e);return o&&o!==n&&(0,u().P)(o,"scroll",t),t(),()=>{n&&(0,p().O)(n,"scroll",t),o&&(0,p().O)(o,"scroll",t)}}),[h]);const C=(0,i().K8)((()=>"suggest"===v().Uv.getMode(y)),[y]),I=(0,i().K8)((()=>(0,n(511393).h)(s)),[s]),M=(0,i().K8)((()=>{var e;return a().default.state.isOpen&&(null===(e=a().default.state.currentStore)||void 0===e?void 0:e.id)===y.id}),[y]),_=(0,i().K8)((()=>{if(!a().default.isRightMarginCommentHovered())return!1;const e=y.getNavigableBlockStore();return!Boolean(null==e?void 0:e.isDraft())}),[y]),T=!_&&(null==h?void 0:h.props.shouldShowHoverMenu)&&M,B=T;(0,o.useEffect)((()=>{!_&&d().A.state.isHovered&&d().A.resetHoverSource("right_margin_button")}),[_]);const P=null==S?void 0:S.getBoundingClientRect(),D=(0,i().K8)((()=>(0,m().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:y,nodeRect:x,containerRect:P,environment:s})),[y,x,P,s]),E=(0,c().IS)((()=>({container:{position:"absolute",top:D,...e.style},commentMenu:{marginInlineStart:3}})),[e.style,D]);return w?null:(0,n(569912).A)((e=>(0,j.jsxs)("div",{style:E.container,ref:t,...e,children:[_?(0,j.jsx)("div",{style:E.commentMenu,children:(0,j.jsx)(R,{selectable:h,store:y,containerRect:P})}):void 0,T?(0,j.jsx)(Y,{selectable:h,store:y,disableDrag:C,isWorkspaceAdmin:I,nodeRect:x,containerRect:P}):void 0,B?(0,j.jsx)(k,{store:y,nodeRect:x,containerRect:P,selectable:h}):void 0]})))})),$={position:"absolute",top:0,insetInlineStart:0,zIndex:99};const Q=function(e){const t=(0,o.useRef)(null),{isOpen:l,container:c,currentStore:d}=(0,i().K8)((()=>{const e=a().default.getState();return{isOpen:e.isOpen,container:e.isOpen&&e.container,currentStore:e.isOpen&&e.currentStore}}),[]),u=(0,i().K8)((()=>!(!l||c!==e.selectableContainer)&&((!n(170722).A.state.isActive||"editing"!==s().default.state.mode||!(0,n(794144).K)(s().default.state.multiSelection))&&"closed"===n(525569).default.state.type)),[l,c,e.selectableContainer]),p=(0,i().K8)((()=>{if(l&&c===e.selectableContainer)return d}),[d,l,c,e.selectableContainer]),m=(0,o.useCallback)((()=>u&&p?[(0,j.jsx)(n(145214).A,{tag:Z,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},exactTargetBlockStore:p,container:t.current??void 0,config:{timingFunction:"ease-out"}},p.id)]:[]),[p,u]);return(0,j.jsx)("div",{style:$,ref:t,children:(0,j.jsx)(n(93263).A,{className:r().zN1,render:m})})}},173783:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(296540);var o=()=>n(658985),i=()=>n(903047),r=n(474848);function a(e){const t=(0,i().E)(e),n=(0,o().$)(t.icon);return(0,r.jsx)("div",{style:t.iconContainer,children:n})}},192421:(e,t,n)=>{"use strict";n.d(t,{F:()=>d});n(296540);var o=()=>n(484714),i=()=>n(493552),r=()=>n(433847),a=()=>n(69708),s=()=>n(583690),l=()=>n(678553),c=n(474848);function d(e){const{role:t}=e,n=(0,a().tz)(),{device:d}=(0,o().v3)(),u=(0,s().I2)(t);return(0,c.jsx)(l().Ay,{...e,title:(0,c.jsx)(i().D,{styleKey:"Caption/Medium",colorVariant:"secondary",children:n.formatMessage((0,r().sK)(t,void 0).label)}),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,c.jsx)("div",{children:u})})}},212727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{gearIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.19 15.58 15.6",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},r=(0,n(340498).wt)("gear",i)},216128:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"3.41 3.05 9.98 9.9",directional:!0,svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.482 3.238a.625.625 0 1 0-.884.884L7.476 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"}),(0,o.jsx)("path",{d:"M8.882 3.238a.625.625 0 0 0-.884.884L11.876 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})]})},r=(0,n(340498).wt)("arrowChevronDoubleForwardSmall",i)},247123:(e,t,n)=>{"use strict";n.d(t,{QU:()=>m,f2:()=>p,r6:()=>g});n(581454),n(296540);var o=()=>n(56366),i=()=>n(401497),r=()=>n(611648),a=()=>n(69708),s=()=>n(534177),l=()=>n(765957),c=()=>n(2143),d=()=>n(131842),u=n(474848);function p(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:a}=(0,o().K8)((()=>{const{mainEditorCurrentBlockStore:e,sidebarSpaceStore:t}=l().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),s=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingInlineStart:12,paddingInlineEnd:12,paddingBottom:12,marginTop:15,marginBottom:5,marginInlineStart:-12,marginInlineEnd:-12},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[]);if(!n||!a)return null;const p=Date.now();return(0,u.jsx)(c().H,{type:r().A.Y,style:s.scroller,children:t.permissionChanges.map((([e,t],o)=>{const i={timestamp:p,space_id:a.id,type:"permission-changed",permission_data:{before:e,after:t}};return(0,u.jsx)("div",{style:s.editContainer,children:(0,u.jsx)(d().A,{rootStore:n,edit:i})},`${e.type}-${o}`)}))})}function m(e){return["remove","restrict"].includes(e.type)?(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function g(e){switch(e.type){case"remove":case"restrict":return(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw s().HB(e)}}},250202:(e,t,n)=>{"use strict";n.d(t,{G:()=>s,e:()=>a});var o=n(296540),i=()=>n(401497),r=n(474848);let a=function(e){return e[e.Name=0]="Name",e}({});const s=o.forwardRef((function(e,t){const{propertySchema:o,format:s}=e,{name:l,type:c,icon:d}=o,{isMobile:u}=(0,n(484714).Y0)(),p=(0,i().IS)((e=>({propertyIcon:{fill:e.icon.primary,marginInlineStart:6,marginInlineEnd:2}})),[]),m=(0,i().DP)(),g=s===a.Name?l:n(852353).dC[c];return(0,r.jsx)(n(760217).A,{title:g,icon:(0,r.jsx)(n(852424).zB,{icon:d,type:c,size:u?18:16,theme:m,style:p.propertyIcon}),...e})}))},256863:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(296540);var o=()=>n(56366),i=()=>n(824862),r=n(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:s,style:l,size:c}=e,d=(0,n(69708).tz)(),u=(0,o().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:i().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),p=(0,o().K8)((()=>(null==a?void 0:a.getDisplayName(d))??(0,n(799288).Hg)(t)),[a,t,d]),{activeDotStyle:m}=(0,n(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",insetInlineStart:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(n(187820).B6,{icon:u,title:p,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:m}):void 0]})}},332751:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var o=()=>n(170722),i=()=>n(369241);function r(){o().A.state.isActive&&(i().A.setState({...i().A.state,open:!1}),o().A.setState({...o().A.state,isActive:!1,isAnimatingClosed:!0}))}},334684:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var o=()=>n(898244),i=()=>n(713998),r=()=>n(534177);const a=["button","formula","auto_increment_id","file"];function s(e){const{propertyType:t,propertySchema:n,allowAIProperty:s}=e,l=(0,r().O9)(n)&&(0,o().$M)(n)&&(0,r().O9)((0,o().om)(n)),c=!s&&l,d=(0,r().O9)((0,i().Dz)(n));return a.includes(t)||c||d}},348501:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(296540),i=()=>n(69708),r=()=>n(59364),a=n(474848);const s=(0,o.forwardRef)((function(e,t){const s=(0,i().tz)(),l=(0,n(401497).IS)((t=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",cursor:e.disableDrag?"pointer":"grab",width:e.width??r().Z,height:e.height??r().S,borderRadius:4,fill:t.icon.tertiary,...e.style},text:{color:t.text.inverseSecondary}})),[e.disableDrag,e.width,e.height,e.style]);const{onClick:c}=e,d=(0,o.useCallback)((e=>{c&&(e.preventDefault(),c(e))}),[c]),u=(0,o.useCallback)((o=>(0,a.jsx)(n(718827).Ay,{ref:t,ariaLabel:s.formatMessage({id:"dragHandleButton.ariaLabel",defaultMessage:"Drag"}),role:e.role,style:l.buttonStyle,onClick:e.onClick,onContextMenu:d,disallowTabbing:e.disallowTabbing,...o,children:(0,n(887146).i)({width:14,height:14,...e.iconStyle})})),[d,s,e.disallowTabbing,e.iconStyle,e.onClick,e.role,t,l.buttonStyle]);return e.disableTooltip?u({}):(0,a.jsx)(n(859428).A,{placement:e.tooltipPlacement??"bottom",delayThreshold:300,renderTooltip:function(){return(0,a.jsxs)("div",{style:{textAlign:"center"},children:[e.disableDrag?void 0:(0,a.jsx)(i().sA,{defaultMessage:"Drag <medium>to move</medium>",id:"dragHandleButton.dragPrompt.text",values:{medium:e=>(0,a.jsx)("span",{style:l.text,children:e})}}),e.hideClickMessage?void 0:(0,a.jsx)("div",{children:(0,a.jsx)(i().sA,{defaultMessage:"Click <medium>to open menu</medium>",id:"dragHandleButton.clickPrompt.text",values:{medium:e=>(0,a.jsx)("span",{style:l.text,children:e})}})})]})},render:u})}))},354987:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(252291),l=()=>n(898244),c=()=>n(713998),d=()=>n(416504),u=()=>n(187174),p=()=>n(216128),m=()=>n(906380),g=()=>n(450648),f=()=>n(179034),v=()=>n(201980),b=()=>n(69708),S=()=>n(534177),h=()=>n(284371),y=()=>n(645873);const x={diffHelpers:new(y().O2)("async-diffs",(async()=>await Promise.all([n.e(16471),n.e(79254)]).then(n.bind(n,501770))))};var A=()=>n(907514),w=()=>n(346923),C=()=>n(148832),I=()=>n(859428),M=()=>n(890022),j=n(474848);const _=(0,b().YK)({intermediateChanges:{id:"editPropertyDiff.intermediateChanges",defaultMessage:"{count, plural, one {# change} other {# changes}}"}});function k(e){const t=l().QP(e.propertySchema);switch(t){case"text":return(0,j.jsx)(T,{...e});case"relation":return(0,j.jsx)(R,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"arrow":return(0,j.jsx)(D,{...e});default:(0,S().HB)(t)}}function T(e){const t=(0,i().v3)(),n=(0,w().l)(P(e.beforeValue.value)),o=(0,w().l)(P(e.afterValue.value)),r=(0,y().fJ)(x.diffHelpers).value,[a]=(0,u().Yb)((async()=>{if(r)return await r.diffTextValueAsync({environment:t,from:"textPropertyDiff",before:n,after:o,insertionAnnotation:[v().Ifu.Inserted],deletionAnnotation:[v().Ifu.Deleted]})}),[t,n,o,r],{});if(void 0===a.value)return(0,j.jsx)(B,{});const s={value:a.value,spaceId:e.beforeValue.spaceId};return(0,j.jsx)(M().A,{value:s,propertySchema:e.propertySchema,rootStore:e.rootStore})}const B=o.memo((function(){return(0,j.jsx)(n(710149).A,{style:{display:"inline-block",verticalAlign:"baseline",width:"60%",height:14,borderRadius:4}})}));function P(e){return v().JG8(e,1e3,[v().Ey_("…")])}function R(e){const{beforeValue:t,afterValue:n,propertySchema:o,rootStore:i}=e,a=(0,r().K8)((()=>c().tH({beforeValue:t.value,afterValue:n.value,propertySchema:o,getRecordModel:i.getRecordModel,getBlockTitle:e=>C().B.createChildStore(i,{table:f().ev,id:e.id}).getPropertyValue("title")})),[t,n,o,i]);return(0,j.jsx)(M().A,{value:{value:a,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:i})}function D(e){const t=(0,a().IS)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center",overflow:"hidden",flexWrap:"wrap",rowGap:6}})),[]),n=e.intermediateChanges&&e.intermediateChanges.length>0;return(0,j.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,j.jsx)(M().A,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),n?(0,j.jsx)(z,{intermediateChanges:e.intermediateChanges,propertySchema:e.propertySchema,rootStore:e.rootStore,latestTimestamp:e.latestIntermediateTimestamp}):(0,j.jsx)(E,{}),(0,j.jsx)(M().A,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function E(){const e=(0,a().IS)((e=>({container:{padding:"0px 6px"}})),[]);return(0,j.jsx)("div",{style:e.container,children:(0,j.jsx)(s().I,{icon:m().arrowChevronSingleRightSmallIcon,size:"xs",colorVariant:"tertiary"})})}function z(e){const t=(0,b().tz)(),n=(0,a().IS)((e=>({container:{padding:"4px 8px"},tooltipContent:{display:"flex",flexDirection:"column",alignItems:"flex-start"},tooltipTitle:{fontWeight:500,maxWidth:264,...h().RC},tooltipBody:{color:e.text.secondary,display:"flex",flexDirection:"row"},tooltipSeperatorDot:{margin:"0px 4px"}})),[]),o=e=>{if(e)return(0,A().nl)(e,{useCompactFormat:!0})},i=(0,r().K8)((()=>{const n=(0,d().P)();return e.intermediateChanges.map((o=>{const i=(0,g().r4)({textValue:o.value.value,getRecordModel:e.rootStore.getRecordModel,userTimeZone:n,intl:t,disableAnnotationPrefix:!0,deterministic:!0});return"date"===e.propertySchema.type?i:i.replace(/,/g," / ")})).filter(Boolean).join(", ")||""}),[e.intermediateChanges,e.rootStore.getRecordModel,e.propertySchema.type,t]);return(0,j.jsx)(I().A,{placement:"top",renderTooltip:t=>(0,j.jsxs)("div",{...t,style:n.tooltipContent,children:[(0,j.jsx)("div",{style:n.tooltipTitle,children:i}),(0,j.jsxs)("div",{style:n.tooltipBody,children:[(0,j.jsx)(b().sA,{..._.intermediateChanges,values:{count:e.intermediateChanges.length}}),(0,j.jsx)("div",{style:n.tooltipSeperatorDot,children:"•"}),o(e.latestTimestamp)]})]}),render:e=>(0,j.jsx)("div",{...e,style:n.container,children:(0,j.jsx)(s().I,{icon:p().R,size:"xs",colorVariant:"tertiary"})})})}},369241:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=new(n(463830).A)},378409:(e,t,n)=>{"use strict";n.r(t),n.d(t,{iconDefinition:()=>i,xMarkCircleIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.817 7.183a.625.625 0 0 1 0 .884L10.884 10l1.933 1.933a.625.625 0 1 1-.884.884L10 10.884l-1.933 1.933a.625.625 0 1 1-.884-.884L9.116 10 7.183 8.067a.625.625 0 1 1 .884-.884L10 9.116l1.933-1.933a.625.625 0 0 1 .884 0"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("xMarkCircle",i)},409268:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});n(898992),n(672577);var o=n.n(n(791611)),i=()=>n(489348);function r(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},412532:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.03 2.29 11.93 10.46",svg:(0,n(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},i=(0,n(340498).wt)("arrowCaretUpFillSmall",o)},412975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowTurnDownLeftIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 4.12 14.76 12.16",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M15.63 4.75a.625.625 0 1 1 1.25 0v5a2.125 2.125 0 0 1-2.125 2.125H4.264l3.333 3.333a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884.884l-3.333 3.333h10.49a.875.875 0 0 0 .876-.875z"})},i=(0,n(340498).wt)("arrowTurnDownLeft",o)},413267:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},424139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{emojiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("emojiFace",i)},427636:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:r,style:a,inline:s}=e,l=(0,n(69708).tz)(),c=(0,n(484714).Y0)(),d=(0,n(56366).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:p,badgeStyle:m}=(0,n(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...a},avatarWrapStyle:s?{width:"none",minHeight:"none",marginInlineEnd:6}:{marginInlineEnd:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:n(726637).A.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginInlineStart:8,marginTop:1}})),[a,s,c]);return(0,o.jsxs)("div",{style:u,children:[(0,o.jsx)("div",{style:p,children:(0,o.jsx)(n(256863).A,{botStore:t,size:i})}),(0,o.jsx)("div",{style:{...n(284371).RC},children:d}),r?(0,o.jsx)("div",{style:m,children:"Bot"}):void 0]})}},441467:(e,t,n)=>{"use strict";n.d(t,{DZ:()=>L,Ek:()=>N,hN:()=>U,i5:()=>H,of:()=>O});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949);var o=()=>n(779315),i=()=>n(700500),r=()=>n(179034),a=()=>n(197959),s=()=>n(161479),l=()=>n(798880),c=()=>n(201980),d=()=>n(878523),u=()=>n(182641),p=()=>n(383594),m=()=>n(384944),g=()=>n(332751),f=()=>n(538527),v=()=>n(231297),b=()=>n(892632),S=()=>n(594794),h=()=>n(972435),y=()=>n(962845),x=()=>n(299545),A=()=>n(953418),w=()=>n(906537),C=()=>n(486666),I=()=>n(372154),M=()=>n(261358),j=()=>n(148832),_=()=>n(404783),k=()=>n(555776),T=()=>n(116008),B=()=>n(543225),P=()=>n(59320),R=()=>n(528787),D=()=>n(681634),E=()=>n(583824),z=()=>n(36088),V=()=>n(807060),F=()=>n(405981);const L=(0,n(69708).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function O(e){const{environment:t,blockStore:n,multiSelection:o,rect:i,formulasModule:r}=e;let a=i;if(!a){const e=w().get();if(!e)return;a=w().getRect(e)}if(!a)return;const s=a.width,l=a.height,c=a.right-s;T().A.setState({open:!0,rect:new DOMRect(c,a.top,s,l),type:"inline",content:"reaction",blockStore:n,blockId:n.id,multiSelection:o,emoji:void 0}),p().W(t,{originGap:4,originRect:a,popupWidth:C().jv,popupHeight:C().GF,isSmallWidth:!1,title:h().A.formatMessage(L.emojiPicker),currentTab:"emoji",onCancel:()=>T().A.reset(),tabs:[{type:"emoji",title:h().A.formatMessage(L.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=T().A.state;n.open&&"reaction"===n.content&&(T().A.setState({...n,emoji:e}),H({environment:t,formulasModule:r}),p().I())}}]})}async function U(e){var t;const{environment:n,blockStore:i,multiSelection:r,rect:a,from:l,property_id:c}=e;if(T().A.hasContent())return void(0,F()._y)({environment:n,reason:"starting_new"});let u=a;if(!u){const e=w().get();if(!e)return;u=w().getRect(e)}if(!u)return;const p=u.width,m=u.height,f=u.right-p,v=new(_().A)(n,(0,s().e)(i.pointer.spaceId));T().A.setState({open:!0,rect:new DOMRect(f,u.top,p,m),type:"inline",content:"comment",blockStore:i,lastKnownBlockStore:i,blockId:i.id,multiSelection:r,lastEditables:(0,y().$W)(r),discussionInputStore:v,property_id:c,from:l}),A().VG({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),k().A.setActiveWithSource("text_annotation"),g().I(),await(0,z().M)({discussionInputStore:v,environment:n}),d().z0(n,{from:l})}function H(e){const{environment:t,allowActionsWhileCommenting:n,skipOpeningDiscussion:o,formulasModule:s}=e,p=T().A.state;if(p.open){const e="comment"===p.content?p.property_id:void 0,m=T().A.getBlockStore()??T().A.getLastKnownBlockStore();if(T().A.hasContent()&&(!n||m))if("inline"===p.type)v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{const s=function(e){const{environment:t,multiSelection:n,transaction:o,allowActionsWhileCommenting:s}=e,{id:l}=t.currentUser;if(!l)return;const d=s?T().A.getLastSelectedEditables():(0,y().$W)(n).filter((({store:e})=>e.table===r().ev));if(!d||0===d.length)return;const u=(0,M().zH)(d[0].store),p=(0,S().Z1)({environment:t,table:a().$Y,spaceId:u.pointer.spaceId}),m=[],g=new Set;d.forEach((({store:e,selection:n},r)=>{g.add(e.id);const a=(0,M().zH)(e);if(!(a instanceof j().B))return;const s=a.getType(),l=a.getFormat();if(s&&(0,i().pD)(s,l))return;let d=e.getValue();const u=c().xbM(d,n);f().Mw({environment:t,store:e,selection:u,annotation:[c().Ifu.Discussion,p],transaction:o}),d=e.getValue();const v=c().Ffo(d,u.startIndex,u.endIndex),b=0===r?[]:[c().Ey_("\n")];m.push(...b,...v)}));const v=(0,y().ZS)({multiSelection:n,filterCommonAncestors:!1,focus:void 0});if(v)for(const r of v.stores){if(g.has(r.id))continue;const e=r.getType(),t=r.getFormat();e&&(0,i().pD)(e,t)||(0,B().B)({blockStore:r,discussionId:p,transaction:o})}return{blockStore:u,context:m,discussionId:p}}({environment:t,multiSelection:p.multiSelection,transaction:o,allowActionsWhileCommenting:n});if(!s)return;const{context:l,blockStore:u,discussionId:g}=s;if("comment"===p.content){const i=p.discussionInputStore.state.textStore.getValue()||[],r=p.discussionInputStore.state.files,{discussionStore:a,commentStore:s}=(0,P().G)({createDiscussionArgs:{type:"default",context:l,property_id:e},blockStore:u,environment:t,transaction:o,commentTextValue:i,files:b().JC(r),discussionId:g}),{property_type:c,collection_id:f,collection_view_id:v,view_type:S,collection_view_block_id:h}=(0,V().q)(e,m);d().bJ(t,{discussion_id:a.id,discussion_type:a.getType(),comment_id:s.id,parent_block_id:a.getParentId(),from:T().A.state.open&&"comment"===T().A.state.content?T().A.state.from:void 0,property_id:e,property_type:c,collection_view_id:v,view_type:S,collection_id:f,collection_view_block_id:h}),n&&I().A.addNewDiscussionId(g)}else p.emoji&&K({context:l,blockStore:u,environment:t,transaction:o,icon:p.emoji,discussionId:g})},skipUpdatingEditedMetadata:!0});else if("block"===p.type)if("comment"===p.content){const o=p.discussionInputStore.state.textStore.getValue()||[],i=p.discussionInputStore.state.files;n?m&&v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,E().i)({environment:t,type:"default",blockStore:m,commentTextValue:o||[],files:i,transaction:n,property_id:e,formulasModule:s})},skipUpdatingEditedMetadata:!0}):v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,E().i)({environment:t,type:"default",blockStore:p.blockStore,commentTextValue:o||[],files:i,transaction:n,property_id:e,formulasModule:s})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:n,blockStore:o}=p,i=x().O3(o,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));n&&e&&v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:r=>{null!=i&&i.isDefined()?R().createReaction({environment:t,transaction:r,store:i,icon:n,currentActorPointer:{table:l().oo,id:e},discussionLocation:"block_menu"}):K({context:void 0,blockStore:o,environment:t,transaction:r,icon:n})},skipUpdatingEditedMetadata:!0})}(0,D().c)(t);const g=n?m&&m.getAssociatedCollectionStore():p.blockStore.getAssociatedCollectionStore();o||e||!g||u().B4({environment:t,blockStore:n?m??p.blockStore:p.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:T().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function K(e){const{context:t,blockStore:n,environment:o,transaction:i,icon:r}=e,c=e.discussionId??(0,S().Z1)({environment:o,table:a().$Y,spaceId:n.pointer.spaceId});if(void 0===o.currentUser.id)return;const d=m().vt({environment:o,table:"discussion",args:{type:"default",id:c,parent:n.pointer,context:t,space_id:(0,s().e)(n.pointer.spaceId)},inMemoryRecordCache:n.inMemoryRecordCache,transaction:i});(0,B().B)({transaction:i,blockStore:n,discussionId:d.id});const u={table:l().oo,id:o.currentUser.id};return R().createReaction({environment:o,transaction:i,store:d,icon:r,currentActorPointer:u,discussionLocation:"block_menu"}),d}function N(e){const{environment:t}=e;if(!t.currentUser.id)return;const n=T().A.getPropertyId();if(n){var o;const e=null===(o=T().A.getBlockStore())||void 0===o?void 0:o.getPropertyStore(n);if(e)return{blockStore:e,context:e.getValue()}}const r=T().A.getLastSelectedEditables();if(!r||0===r.length)return;const a=(0,M().zH)(r[0].store),s=[],l=new Set;return r.forEach((({store:e,selection:t},n)=>{l.add(e.id);const o=(0,M().zH)(e);if(!(o instanceof j().B))return;const r=o.getType(),a=o.getFormat();if(r&&(0,i().pD)(r,a))return;const d=e.getValue(),u=c().xbM(d,t),p=c().Ffo(d,u.startIndex,u.endIndex),m=0===n?[]:[c().Ey_("\n")];s.push(...m,...p)})),{blockStore:a,context:s}}},448801:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},482871:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(430670),n(581454);var o=()=>n(898244),i=()=>n(448801),r=()=>n(179034),a=()=>n(722101),s=()=>n(878710),l=(n(354520),()=>n(496603));function c(e){const{collectionContextStore:t,collectionViewStore:n,transaction:i}=e,c=n.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:n}=e;if(!t||t.length<=o().WF)return[];const i=t.filter((e=>!n.has(e)));return l().sb([...i.reverse(),...l().o8(t).reverse()]).slice(0,t.length-o().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const o of p)a().TF({parentStore:c,childToRemoveStore:(0,s().v3)(c,{table:r().ev,id:o}),transaction:i})}function d(e){const{resultIds:t,collectionViewStore:n,collectionContextStore:l,transaction:d}=e,u=n.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,i().i)(p,t.slice(0,o().WF));for(const[o,i]of Object.entries(m))if(i){const e=(0,s().v3)(n,{table:r().ev,id:i});a().nc({parentStore:u,insertStore:(0,s().v3)(n,{table:r().ev,id:o}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===o)),i=t[e-1],l=i?(0,s().v3)(n,{table:r().ev,id:i}):void 0;a().WH({parentStore:u,insertStore:(0,s().v3)(n,{table:r().ev,id:o}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:n,transaction:d})}},491848:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(898992),n(672577);var o=()=>n(755199);function i({collectionContextStore:e,transaction:t}){const n="collectionTypedView"===e.contextType,i=e.databaseType,r=e.collectionStoresStore.state,a=r.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||r[0];!n&&a&&o().ee({transaction:t,databaseType:i,collectionId:a.id})}},515918:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(296540);var o=()=>n(401497),i=()=>n(970236),r=()=>n(69708),a=n(474848);function s(e){const{style:t}=e,n=(0,o().IS)((e=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,a.jsx)(i().E,{color:"blue",style:n.badge,content:(0,a.jsx)(r().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}},517288:(e,t,n)=>{"use strict";n.d(t,{O:()=>c});var o=()=>n(383594),i=()=>n(972435),r=()=>n(486666),a=()=>n(129522),s=()=>n(116008),l=()=>n(441467);function c(e){const{environment:t,blockStore:n,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=c??a().K.getRect(n);if(!p)return;const m=p.width,g=p.height,f=p.right-m;s().A.setState({open:!0,rect:new DOMRect(f,p.top,m,g),type:"block",content:"reaction",blockStore:n,blockId:n.id,emoji:void 0}),o().W(t,{originGap:4,originRect:p,popupWidth:r().jv,popupHeight:r().GF,isSmallWidth:!1,title:i().A.formatMessage(l().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:i().A.formatMessage(l().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=s().A.state;n.open&&"reaction"===n.content&&(s().A.setState({...n,emoji:e}),(0,l().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),o().I())}}]})}},526278:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},i=(0,n(340498).wt)("arrowStraightLeft",o)},528787:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createReaction:()=>A,toggleReaction:()=>x});n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(785082),i=()=>n(343666),r=()=>n(197959),a=()=>n(204384),s=()=>n(161479),l=()=>n(798880),c=()=>n(534177),d=()=>n(878523),u=()=>n(722101),p=()=>n(384944),m=()=>n(231297),g=()=>n(594794),f=()=>n(285068),v=()=>n(878710),b=()=>n(606846),S=()=>n(741817),h=()=>n(725332),y=()=>n(807060);function x(e){const{discussionLocation:t,environment:n,transaction:i,store:u,icon:p}=e,g=function({store:e,icon:t}){const n=(0,v().G_)(e,e.pointer,"reactions").getValue();if(void 0===n)return;return n.map((t=>{const n=f().L.createChildStore(e,{table:a().ez,id:t,spaceId:(0,s().e)(e.pointer.spaceId)});if(n.isDefined())return n})).filter(c().O9).find((e=>e.getIcon()===t))}({store:u,icon:p});if(void 0===n.currentUser.id)return;const y={table:l().oo,id:n.currentUser.id};return null!=g&&g.isDefined()?function({store:e,actorPointer:t,transaction:n,environment:i,discussionLocation:a}){var s;const l={store:e,actorPointer:t,transaction:n,environment:i,discussionLocation:a},c=e.getParentStore(),u=(null==c?void 0:c.table)===r().$Y?c:null==c?void 0:c.getParentStore(),p=(null===(s=e.getActors())||void 0===s?void 0:s.some((e=>e.id===t.id)))??!1;u&&w(u,c)&&(0,h().U)({transaction:n,discussionStore:u});return p?(function(e){var t,n;const{store:i,actorPointer:a,discussionLocation:s,transaction:l,environment:c}=e;if(!i.isDefined())return;const u=i.getParentStore(),p=(null==u?void 0:u.table)===r().$Y?u:null==u?void 0:u.getParentStore(),g=o().eR.includes(s),v=null==p||null===(t=p.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),h=f().L.getUserVisibleReactions(u),y=1===h.length&&1===i.getActors().length&&i.getActors()[0].id===c.currentUser.id;d().fq({environment:c,reaction_value:i.getIcon(),comment_id:i.getParentId(),discussion_id:null==p?void 0:p.id,discussion_type:null==p?void 0:p.getType(),parent_block_id:null==p?void 0:p.getParentId(),parent_collection_id:null==p||null===(n=p.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:i.getActors().length??0,from:s,...g&&{inbox_session_id:b().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const x=i.getModel();m().applyOperation({transaction:l,store:i,operation:x.ops.removeActor(a)}),y&&u&&u.table===r().$Y&&(0,S().v)({environment:c,discussionStore:u,transaction:l})}(l),"Removed"):(function(e){var t,n;const{store:i,actorPointer:a,discussionLocation:s,transaction:l,environment:c}=e;if(!i.isDefined())return;const u=i.getParentStore(),p=(null==u?void 0:u.table)===r().$Y?u:null==u?void 0:u.getParentStore(),g=o().eR.includes(s),f=null==p||null===(t=p.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();d().MP({environment:c,reaction_value:i.getIcon(),comment_id:i.getParentId(),discussion_id:null==p?void 0:p.id,discussion_type:null==p?void 0:p.getType(),parent_block_id:null==p?void 0:p.getParentId(),parent_collection_id:null==p||null===(n=p.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:i.getActors().length??0,from:s,...g&&{inbox_session_id:b().Ay.state.sessionId,notification_page_id:null==f?void 0:f.id}});const v=i.getModel();m().applyOperation({transaction:l,store:i,operation:v.ops.appendActor(a)})}(l),"Added")}({environment:n,store:g,actorPointer:y,transaction:i,discussionLocation:t}):(A({environment:n,transaction:i,store:u,icon:p,currentActorPointer:y,discussionLocation:t}),"Added")}function A({environment:e,transaction:t,store:n,icon:i,currentActorPointer:l,discussionLocation:c}){var m,f;const S=(0,g().JH)({environment:e,table:a().ez,spaceId:(0,s().e)(n.pointer.spaceId)}),x=n.table===r().$Y?n:n.getParentStore(),A=o().eR.includes(c),C=null==x||null===(m=x.getParentStore())||void 0===m?void 0:m.getNavigableBlockStore(),I=null==x?void 0:x.getPropertyId(),M=null==x?void 0:x.getParentStore(),{property_type:j,collection_id:_,collection_view_id:k,view_type:T,collection_view_block_id:B}=(0,y().q)(I,M);d().MP({environment:e,reaction_value:i,comment_id:n.id,discussion_id:null==x?void 0:x.id,discussion_type:null==x?void 0:x.getType(),parent_block_id:null==x?void 0:x.getParentId(),parent_collection_id:null==x||null===(f=x.getParentStore())||void 0===f?void 0:f.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:c,...A&&{inbox_session_id:b().Ay.state.sessionId,notification_page_id:null==C?void 0:C.id},property_type:j,collection_id:_,collection_view_id:k,view_type:T,collection_view_block_id:B});const P=p().vt({environment:e,table:S.table,args:{id:S.id,spaceId:S.spaceId,commentId:n.id,icon:i,actorPointer:l},inMemoryRecordCache:n.inMemoryRecordCache,transaction:t}),R=(0,v().G_)(n,n.pointer,"reactions");u().BC({parentStore:R,appendStore:P,transaction:t}),x&&w(x,n)&&(0,h().U)({transaction:t,discussionStore:x})}function w(e,t){var n;if(!e||!t||t.table!==i().SN)return!1;const o=null===(n=e.getUserSeenRecordStore())||void 0===n?void 0:n.getLastSeenAt();return!o||o<t.getCreatedTime()}},529099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{aiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,o.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},r=(0,n(340498).wt)("aiFace",i)},536583:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,n(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},i=(0,n(340498).wt)("docOnDoc",o)},580648:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});n(296540);var o=()=>n(56366),i=()=>n(914462),r=()=>n(69708),a=()=>n(173783),s=()=>n(187820),l=n(474848);function c(e){const{group:t}=e,n=e.size??20,c=(0,r().tz)(),d=(0,o().K8)((()=>{if(t&&t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),u=(0,o().K8)((()=>(0,i().n)({intl:c,permissionGroupModel:t})),[c,t]);return(0,l.jsx)("div",{children:d?(0,l.jsx)(s().B6,{disabled:!0,size:n,icon:d,isEmptyPage:!1,title:u}):(0,l.jsx)(a().A,{size:n})})}},583690:(e,t,n)=>{"use strict";n.d(t,{AC:()=>p,I2:()=>d,YC:()=>u});n(296540);var o=()=>n(401497),i=()=>n(493552),r=()=>n(212050),a=()=>n(413267),s=()=>n(69708),l=n(474848);function c(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:s}=e,c=(0,o().IS)((e=>({container:{color:t?e.text.secondary:e.text.tertiary,display:"flex",alignItems:"center",gap:5},iconStyles:{width:12,display:"inline",verticalAlign:"middle",color:t?e.blue.icon.accentPrimary:e.text.tertiary}})),[t]);return(0,l.jsxs)("div",{style:c.container,children:[t?(0,a().b)(c.iconStyles):(0,r().u)(c.iconStyles),(0,l.jsx)(i().D,{styleKey:"Caption/Regular",children:t?n:s})]})}function d(e){const t="none"!==e;return[(0,l.jsx)(c,{enabled:t&&e.read_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content"})},"read_content"),(0,l.jsx)(c,{enabled:t&&e.insert_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,l.jsx)(c,{enabled:t&&e.update_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content"})},"update_content"),(0,l.jsx)(c,{enabled:t&&e.insert_comment,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment"})},"insert_comment"),(0,l.jsx)(c,{enabled:t&&e.read_comment,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments"})},"read_comment")]}function u(e){return[(0,l.jsx)(c,{enabled:e.read_user_without_email,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users"})},"read_user_without_email"),(0,l.jsx)(c,{enabled:e.read_user_with_email,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses"})},"read_user_with_email")]}function p(e){return[(0,l.jsx)(c,{enabled:e.link_preview,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,l.jsx)(c,{enabled:e.synced_database,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}},609316:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const o=(0,n(583835).Dv)("importFile")},625194:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var o=n(296540),i=()=>n(96330),r=n(474848);const a=o.memo((function(e){const{textValue:t}=e,n=(0,o.useMemo)((()=>(0,i().X1)((0,i().eC)(t))),[t]);return(0,r.jsx)("span",{children:n})}))},654734:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(296540),i=()=>n(597777),r=()=>n(869190),a=()=>n(604995),s=()=>n(416504),l=n(474848);const c=function(e){const t=(0,n(69708).tz)(),c=(0,n(401497).DP)(),p=(0,n(396182).I)(),m=(0,o.useRef)(),g=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=a().q8(t,(0,s().P)());if(!o)return;const i=o.valueOf(),r=i-Date.now();r<0||r>n(720665).nD||m.current&&m.current.timestamp===i||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:i,timer:setTimeout((()=>p("DateBox","DateBox/createReminderTimer")),r)})}),[p,e.value]),f=(0,o.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,o.useEffect)((()=>{g()}),[g]),(0,o.useEffect)((()=>()=>{f()}),[f]);const{value:v,withComma:b}=e,S=(0,n(56366).K8)((()=>v?(0,r().ZF)({value:v,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,v]);if(!v)return null;const h=a().AA(v,(0,s().P)(),n(662303).locale);let y;if((0,i().Lh)(v)){const e=a().Zs(v,(0,s().P)());y=e?{color:c.errorText}:{color:n(100622).Tj.blue}}const x=(0,l.jsxs)(l.Fragment,{children:[S,(0,i().Lh)(v)?(0,n(599987).P)({display:"inline-block",width:"1em",marginInlineStart:6,marginInlineEnd:2,paddingBottom:4,verticalAlign:"middle"}):void 0,b?", ":null]});return e.disableTooltip?(0,l.jsx)("div",{className:e.className,style:{...e.style,...y},children:x}):(0,l.jsx)(n(859428).A,{renderTooltip:()=>(0,l.jsxs)(l.Fragment,{children:[e.tooltipHeader,(0,l.jsxs)("div",{style:u(c,e.tooltipHeader),children:[d(h.start),h.end?` → ${d(h.end)}`:""]})]}),render:t=>(0,l.jsx)("div",{className:e.className,style:{...e.style,...y},...t,children:x}),placement:e.tooltipPlacement})};function d(e){return(0,r().eV)({value:e,preset:"medium"})}function u(e,t){return t?{color:e.text.inverseSecondary}:{}}},655923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowStraightDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,n(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},i=(0,n(340498).wt)("arrowStraightDown",o)},658985:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("membersFilled",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},689094:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("plus",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"})})},689825:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},i=(0,n(340498).wt)("arrowTriangleRightCircleFill",o)},701751:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lockOpen",i)},706965:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});n(296540);var o=()=>n(56366),i=()=>n(401497),r=()=>n(764880),a=()=>n(310442),s=()=>n(824862),l=()=>n(798880),c=()=>n(69708),d=()=>n(534177),u=()=>n(284371),p=()=>n(43972),m=()=>n(972435),g=()=>n(907514),f=()=>n(646736),v=n(474848);function b(e){const{store:t}=e,n=(0,i().DP)(),b=(0,o().K8)((()=>t.getCreatedTime()),[t]),S=(0,o().K8)((()=>t.getLastEditedTime()),[t]),h=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),y=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),x=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==h?void 0:h.asActor;if(!n)return!1;const o=n.table;switch(o){case l().oo:return(0,f().dp)(e,n.id).isMember();case s().GP:return(0,f().Ts)(e,n.id).isMember();case a().yj:return!1;default:(0,d().HB)(o)}}),[t,h]),A=b?(0,g().nl)(b,{useCompactFormat:!0,useLowercase:!0}):"",w=S?(0,g().nl)(S,{useLowercase:!0,useCompactFormat:!0}):"";if(!(S?(0,g().nl)(S,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const C={display:"flex",gap:4,color:n.text.inverseSecondary,height:16,fontSize:12},I={size:14,style:{marginInlineEnd:2}},M=m().A.getIntl();return(0,v.jsxs)(v.Fragment,{children:[(e=>{let t;if(null!=y&&y.asActor)t=(0,v.jsx)(c().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.inversePrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,p().w)({actor:y,...I}),(0,r().lR)(M,y)]})}),timestamp:w}});else{if(!w)return;o=w,t=(0,v.jsx)(c().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,v.jsx)("div",{style:{...C,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=h&&h.asActor&&x)t=(0,v.jsx)(c().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.inversePrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,p().w)({actor:h,...I}),(0,r().lR)(M,h)]})}),timestamp:A}});else{if(!A)return;t=(0,v.jsx)(c().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:A}})}return(0,v.jsx)("div",{style:{...C,marginBottom:4},children:t})})(e.compactFormat)]})}},715011:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(296540),i=()=>n(69708),r=()=>n(409268),a=n(474848);function s(e){const t=(0,o.useMemo)((()=>(0,r().s)(e.store)),[e.store]);return(0,a.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},741817:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var o=()=>n(18387),i=()=>n(299545),r=()=>n(588836);function a(e){const{discussionStore:t,transaction:n}=e,a=i().No(t);a&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:a});const s=(0,o().Z)();if(s){const e=i().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const o of e){if(a&&o.table===a.table&&o.id===a.id)continue;const e=i().bN(o).getValue();null!=e&&e.includes(t.id)&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:o})}}}},766854:(e,t,n)=>{"use strict";n.d(t,{H:()=>x,Q:()=>y});n(898992),n(672577);var o=()=>n(242422),i=()=>n(929219),r=()=>n(700500),a=()=>n(179034),s=()=>n(201980),l=()=>n(557281),c=()=>n(384944),d=()=>n(381678),u=()=>n(476492),p=()=>n(646736),m=()=>n(406792),g=()=>n(765957),f=()=>n(148832),v=()=>n(622811),b=()=>n(491848),S=()=>n(482871);function h(e,t,n){const i=(0,d()._)(e),r=null==i?void 0:i.id;if(!r||!n)return;if(!o().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const a=t.getSpaceStore();return a&&(0,p().dp)(a,r).isMember()?[{role:"editor",type:"user_permission",user_id:r}]:void 0}function y(e){const{collectionContextStore:t,transaction:n}=e;return(0,b().w)({collectionContextStore:t,transaction:n}),x(e)}function x(e){var t,n,o;const{environment:d,collectionContextStore:p,groupsPointer:b,insertAtIndex:y,shouldCoerce:x,templateStore:A,transaction:w,from:C,tracker:I,inMemoryRecordCache:M,isKeyboard:j,title:_}=e,k=m().default.DO_NOT_USE_markLegacy("collections.add_item_lag");m().default.DO_NOT_USE_measureAfterNextFlushLegacy(k,{environment:d,getData:()=>({...u().kz(p),from:C.createBlock})});const T="collectionTypedView"===p.contextType,B=p.databaseType,P=p.collectionStoresStore.state,R=P.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||P[0],D=null===(t=g().default.state.sidebarSpaceStore)||void 0===t?void 0:t.id,E=g().default.state.currentUserSettingsStore,z=T&&B&&D&&E&&[...E.getAllPreferredCollections(D),...E.getPreferredCollectionsOfType(D,B)]||[];let V;const F=b[0];if("group_header"===C.createBlock&&"location"===F.value.type){const e=F.value.value;if(e){V=P.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else V=function(e,t){for(const n of e){const e=t.find((e=>e.id===n&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(z,P);const L=V??R,O=null==L?void 0:L.getSpaceId(),U=p.collectionViewStore(),H=p.getViewType(),K=c().Wv({environment:d,type:r().xd.page,inMemoryRecordCache:M,transaction:w,spaceId:O,tracker:I,permissions:h(d,L,O),properties:{title:(0,s().x9d)(_)}});if(!L||!U||!H)return{coercionSucceeded:!0,newStore:K};const N=null===(n=p.groupsStore.getGroupState(b))||void 0===n?void 0:n.groupUiParentStore;if(!N)return{coercionSucceeded:!0,newStore:K};const W=f().B.createChildStore(N,{table:a().ev,id:K.id});A&&i().A.state.online&&l().n5({title:"template",environment:d,store:K,templateStore:A,isKeyboard:j??!1,isCreateIn:!1,transaction:w,from:C.initCollection??"collection_group_actions"});const G=(0,v().j)({environment:d,store:K,collectionStore:L,collectionContextStore:p,groupsPointer:b,shouldCoerce:x,transaction:w}),Y=(null===(o=p.groupsStore.getGroupState(b))||void 0===o||null===(o=o.reducerResultStore.state)||void 0===o?void 0:o.blockIds)||[],Z=void 0!==y?y:Y.length;if(p.permissionScopesStore.state.canEditContent||T){const e=[...Y.slice(0,Z),W.id,...Y.slice(Z)];(0,S().z)({resultIds:e,collectionViewStore:U,collectionContextStore:p,transaction:w})}return{coercionSucceeded:G,newStore:W}}},777932:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{isDuplicating:!1}}}const i=new o},791611:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},797573:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,o:()=>i});n(581454);var o=()=>n(402390);function i(e,t){return e.map((e=>r(e,t)))}function r(e,t){const{nameMessage:n,descriptionMessage:i,...r}=e,{rootId:a,previewRootId:s,spaceId:l}=function(e,t){const n=(0,o().H)(t);return e.sources[n]||e.sources[o().q]}(e,t);return{...r,id:n.id,rootId:a,spaceId:l,previewRootId:s,name:t.formatMessage(n),description:i?t.formatMessage(i):void 0}}},817148:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var o=n(296540),i=()=>n(56366),r=()=>n(433847),a=()=>n(69708),s=()=>n(901389),l=()=>n(579627),c=()=>n(247123),d=()=>n(574357);n(898992),n(823215);function u(e){return e.blocks.every((e=>e.isRestricted()))}var p=()=>n(598101),m=()=>n(330582),g=()=>n(569028),f=()=>n(125565),v=n(474848);const b=function({store:e}){const t=(0,n(401497).DP)(),b=(0,n(484714).v3)(),S=(0,o.useMemo)((()=>({environment:b,blocks:[e],publicEditMode:void 0})),[b,e]),h=(0,i().K8)((()=>(0,d().U)([u,(0,p().A)(n(158658).p)])(S)),[S]),y=(0,i().K8)((()=>(0,d().U)([n(267)._,(0,p().A)(n(77295).K)])(S)),[S]);if(h){const{device:o}=b;return(0,v.jsx)("div",{style:{backgroundColor:t.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${t.regularDividerColor}`,marginTop:o.isMobile?28:1},children:(0,v.jsxs)(n(718827).Ay,{disabled:!y,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=(0,m().K)(e),i=o?r().wD((0,g().E)(o)):[],d=r().Cd(e.getModel(),n,i),u={type:"restore",permissionChanges:d},{accept:p}=await s().Gh({message:(0,c().r6)(u),acceptLabel:(0,c().QU)(u),cancelLabel:(0,v.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,v.jsx)(c().f2,{openState:u})});p&&l().YD({environment:t,store:e})}(e,b),children:[(0,v.jsx)(f().A,{isMultiline:!0,isSmall:!0,children:(0,v.jsx)(a().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),y?(0,v.jsx)(f().A,{style:{marginTop:6,fontWeight:n(284371).Wy.semibold},children:(0,v.jsx)(a().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})}):void 0]})})}return null}},819493:(e,t,n)=>{"use strict";n.d(t,{$:()=>A,b:()=>w});n(898992),n(908872),n(296540);var o=()=>n(59226),i=()=>n(662303),r=()=>n(484714),a=()=>n(56366),s=()=>n(401497),l=()=>n(764880),c=()=>n(869190),d=()=>n(69708),u=()=>n(921855),p=()=>n(972435),m=()=>n(311337),g=()=>n(448291),f=()=>n(706965),v=()=>n(678553),b=()=>n(89924),S=()=>n(859428),h=()=>n(125565),y=()=>n(715011),x=n(474848);function A({isPageMoreButton:e,hideTopBorder:t,store:n,wordCountStores:o,showWordCount:i}){const c=(0,a().K8)((()=>w(n)),[n]),{device:u}=(0,r().v3)(),g=(0,a().K8)((()=>u.isPhone),[u]),A=p().A.getIntl(),I=(0,r().v3)(),M=(0,s().IS)((()=>({menuItem:{paddingTop:g?8:t?0:6,paddingBottom:g?8:16}})),[t,g]);return(0,a().K8)((()=>(0,m().y)(I)),[I])||c&&!c.canAccess?null:(0,x.jsx)(b().A,{topBorder:!e&&!t,style:{paddingTop:e?0:8,paddingBottom:e?0:8},children:(0,x.jsx)(v().Ay,{style:c?void 0:M.menuItem,shouldWrapTitle:!0,title:c?(0,x.jsx)(S().A,{placement:"right",render:e=>(0,x.jsxs)("div",{...e,children:[i?(0,x.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,x.jsx)(d().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,x.jsx)(y().A,{store:n})}})}):void 0,o?(0,x.jsx)(C,{stores:o}):void 0,(0,x.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,x.jsx)(d().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:c.lastEditedBy.asActor?(0,l().lR)(A,c.lastEditedBy):void 0}})}),(0,x.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,style:{marginBottom:i?8:0},children:c.lastEditedTime})]}),renderTooltip:()=>(0,x.jsx)(f().A,{store:n,compactFormat:!0})}):void 0,loading:!c})})}function w(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),o=e.getLastEditedByPointer(),r=e.getLastEditedTime(),a=p().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&r&&o){const s=(0,g().vt)({parentStore:e,pointer:t}),l=(0,c().jE)(n,i().locale,a),d=(0,g().vt)({parentStore:e,pointer:o}),u=(0,c().jE)(r,i().locale,a);if(!d)return;return{canAccess:!0,createdBy:s,createdTime:l,lastEditedBy:d,lastEditedTime:u}}}function C(e){const{stores:t}=e,n=(0,o().X)("selectable_word_count"),i=(0,a().K8)((()=>n?I(t):0),[n,t]);return n?(0,x.jsx)(h().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,x.jsx)(d().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:i}})}):null}function I(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+I(t.getContentStores())}),0)}},820579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowLineDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,n(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},i=(0,n(340498).wt)("arrowLineDown",o)},848401:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,mI:()=>u,vb:()=>p});n(296540);var o=()=>n(401497),i=()=>n(718827),r=()=>n(784892),a=()=>n(65767),s=()=>n(69708),l=()=>n(284371),c=n(474848);const d=(0,s().YK)({removeTokenLabel:{defaultMessage:"Remove {title}",id:"uiGenericToken.removeTokenLabel"},removeTokenLabelGeneric:{defaultMessage:"Remove Item",id:"uiGenericToken.removeTokenLabelGeneric"}}),u=r().NY,p={[r().NY.ExtremeSmall]:{height:12,fontSize:10,margin:"0 4px 0 0",marginEditState:"0 6px 0 0",closeIconSize:8,avatarSize:14},[r().NY.ExtraSmall]:{height:14,fontSize:12,margin:"0 6px 0 0",marginEditState:"0 6px 0 0",closeIconSize:8,avatarSize:14},[r().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:16},[r().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:20},[r().NY.Medium]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:20},[r().NY.Inline]:{height:20,fontSize:14,closeIconSize:8,avatarSize:20,margin:"0 -5px 0 0",marginEditState:"0 6px 0 0"},[r().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",marginEditState:"0 8px 8px 0",closeIconSize:10,avatarSize:24}};function m({avatarSize:e,format:t,isSingle:n,onClickRemove:r,renderAvatar:u,showRemoveButton:m,shouldShrink:g,style:f,title:v}){const b=(0,s().tz)(),{height:S,fontSize:h,margin:y,marginEditState:x,closeIconSize:A,avatarSize:w}=p[t],C=e??w,I=(0,o().IS)((()=>({root:{display:"flex",alignItems:"center",flexShrink:g?1:0,minWidth:0,height:S,borderRadius:6,fontSize:h,lineHeight:"120%",margin:n?0:m?x:y,...f}})),[h,S,n,y,x,g,m,f]);return(0,c.jsxs)("div",{style:I.root,children:[null==u?void 0:u(C),(0,c.jsx)("div",{className:"notranslate",style:{...l().RC},children:v}),m?(0,c.jsx)(i().Ay,{ariaLabel:void 0!==v?b.formatMessage(d.removeTokenLabel,{title:v}):b.formatMessage(d.removeTokenLabelGeneric),onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:S,height:S,marginInlineStart:2,marginInlineEnd:2,flexGrow:0,flexShrink:0,borderRadius:6},children:(0,a().l)({width:A,height:A,opacity:.5})}):null]})}},903047:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var o=()=>n(401497);function i(e){const{size:t,style:n}=e;return(0,o().IS)((e=>({icon:{width:.6*t,height:.6*t,fill:e.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...n}})),[t,n])}},908928:(e,t,n)=>{"use strict";n.d(t,{GO:()=>D,Ju:()=>R,KA:()=>P,L2:()=>O,dA:()=>E,gI:()=>B,iN:()=>L,lM:()=>F,oG:()=>V,sK:()=>z});n(898992),n(354520),n(803949);var o=()=>n(386164),i=()=>n(433847),r=()=>n(68263),a=()=>n(388821),s=()=>n(179034),l=()=>n(824862),c=()=>n(161479),d=()=>n(96689),u=()=>n(798880),p=()=>n(763824),m=()=>n(534177),g=()=>n(901389),f=()=>n(855801),v=()=>n(594794),b=()=>n(972435),S=()=>n(329443),h=()=>n(542585),y=()=>n(148832),x=()=>n(258836),A=()=>n(559506),w=()=>n(496414),C=()=>n(579627),I=()=>n(384944),M=()=>n(471995),j=()=>n(231297),_=()=>n(949237);const k=(0,n(69708).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function T(e,t){const{environment:n,spaceStore:o,membershipType:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r,environment:a}=e,s=Date.now(),c={name:t,created_at:s,created_by_table:u().oo,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:s,last_edited_by_id:o,last_edited_by_table:u().oo};switch(r){case"guest":return{...c,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...c,id:(0,v().Z1)({environment:a,table:l().GP,spaceId:n.id}),type:"scim",parent_table:u().oo,parent_id:o};default:(0,m().HB)(r)}}(t),a=I().eC({environment:n,table:l().GP,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return C().yG({environment:n,spaceStore:o,actors:[{type:"bot",membershipType:i,botId:a.id,parent:void 0}],transaction:e}),{botStore:a}}function B(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=j().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>T(t,e)});return{botStore:o,transactionPromise:n}}async function P(e){const{environment:t,botId:n,onSuccess:o}=e,i=await A().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?g().Qg(i):"success"===i.type&&o&&(await _().oX({environment:t}),o())}async function R(e){const{environment:t,table:n,id:i,type:r}=e,a=await A().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:r},headers:(0,o().WS)({spaceId:n===d().NX?i:void 0})});return"failed"===a.type?(g().Qg(a),{botIds:[],recordMap:{}}):(a.data.integrationManagementPermissions&&h().b.updatePermissions(a.data.integrationManagementPermissions),{botIds:a.data.botIds,recordMap:a.data.recordMap})}async function D(e){const{environment:t,spaceStore:n,botIds:o}=e;if(!n)return;const i=await A().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return function(e){const{integrationManagementPermissions:t}=e;t&&Object.keys(t).length>0&&h().b.updatePermissions(t)}({integrationManagementPermissions:i.data.integrationManagementPermissions}),i.data;g().Qg(i)}async function E(e){const{environment:t,botId:n}=e,o=await A().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;g().Qg(o)}function z(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:a,parent_table:s,capabilities:l}=t,c={type:"bot_permission",bot_id:r,parent_id:a,parent_table:s,role:(0,i().MD)(l)};j().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{C().zP({environment:o,store:n,permissionItems:[c],transaction:e})}})}function V(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((e=>!!(0,r().P3)(e)));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};j().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{C().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}async function F(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:i,concurrency:r=20}=e;return 0!==i.length&&(await(0,p().lX)(i,r,(async e=>{const i=y().B.createChildStore(n,{table:s().ev,id:e.pageId,spaceId:n.getSpaceId()}),r=(0,S().Ws)({botStore:o,addPermission:"add"===e.operationType}),{serverCommitResult:a}=j().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{C().zP({environment:t,store:i,permissionItems:[r],transaction:e})}});await a})),!0)}async function L(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:i,effectiveAdminOnly:r}=e;return(0!==i.length||void 0!==r)&&(await A().callApi({eventName:"setBotPermissionsForPages",environment:t,data:{spaceId:n.getSpaceId(),botId:o.id,pageOperations:i,effectiveAdminOnly:r}}),!0)}async function O(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botValue:d,pages:u}=e;if(!n)return;const p=x().v.createChildStore(n,{table:l().GP,id:d.id});if(r)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botStore:s}=e;if(!n||!i)return;try{w().m({message:k.duplicatingTemplate});const e=await A().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:r,spaceId:(0,c().e)(void 0)},shallow:!1},headers:(0,o().WS)({recordId:r})});if("failed"===e.type)return;const l=a().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,f().nd)(),{performResult:u}=j().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=d({environment:t,recordMap:l,copyPageId:r,isPrivate:!0,spaceStore:n,spaceViewStore:i,transaction:e,allowCopyExternalObjectInstances:!1}),a=i.getPrivatePageIds();a.length>0&&I().zv({store:i,data:{private_pages:[o.id,...a]},transaction:e});const c=(0,S().Ws)({botStore:s,addPermission:!0});return C().zP({environment:t,store:o,permissionItems:[c],transaction:e}),o}});return u}catch(l){M().D6({label:b().A.formatMessage(k.duplicatingTemplateError)})}finally{w().V()}}({environment:t,templatePageId:r,botStore:p,spaceStore:n,spaceViewStore:i});!function(e){const{spaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const a=(0,S().Ws)({botStore:i,addPermission:r});o.forEach((e=>{const o=y().B.createChildStore(t,{table:s().ev,id:e,spaceId:t.getSpaceId()});j().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{C().zP({environment:n,store:o,permissionItems:[a],transaction:e})}})}))}({environment:t,spaceStore:n,botStore:p,pages:u,addPermission:!0})}},922952:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var o=()=>n(148832),i=()=>n(985405),r=()=>n(95758);function a(e){return e instanceof r().h||e instanceof i().SpaceStore||e instanceof o().B}},970236:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});n(296540);var o=()=>n(401497),i=()=>n(284371),r=n(474848);function a(e){const{color:t="gray",style:n,content:a,...s}=e,l=(0,o().IS)((e=>({badge:{alignSelf:"center",marginInlineStart:6,padding:"2px 4px",background:e[t].background.secondaryTranslucent,color:e[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:i().Wy.medium,lineHeight:1.3,...n}})),[t,n]);return(0,r.jsx)("div",{style:l.badge,...s,children:a})}},973454:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>c});var o=n(296540),i=()=>n(615234);const r=24*i().pT;function a(e){return s(e).status}function s(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,n]=(0,o.useState)((()=>a(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:r}=s(e);n(i),r&&(t=setTimeout(o,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,o.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function o(){const r=Date.now();n(r);const a=e*i().TD-r;if(a>0){const e=a%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:a(e),minUntilFreeze:r?Math.floor((r*i().TD-t)/i().Xb):void 0}}}}]);