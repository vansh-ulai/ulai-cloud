"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[72122],{156736:(e,t,a)=>{a.d(t,{a:()=>i});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var n=()=>a(534177),o=()=>a(764880),r=()=>a(437607),s=()=>a(201980);function i(e){const{value:t,isTemplatePage:a,propertySchema:i,blockCreatorPointer:g}=e;if(!i)return[];const c=s().ELt({includeTemplateVariables:a,value:t}),l=new Set;let d=[];for(const p of c){let e;(0,o().Pu)(p)?e=p.id:s().MMZ(p)?e=p:(0,r().I6)(p)?e=p.id:(0,n().HB)(p),l.has(e)||(l.add(e),d.push(p))}0===d.length&&"created_by"===i.default&&g&&(d=[g]);const u=i.limit;return u?d.slice(0,u):d}},495748:(e,t,a)=>{a.d(t,{Vt:()=>s,wC:()=>r});var n=()=>a(645873);const o={CollectionMapView:new(n().O2)("CollectionMapView",(async()=>await Promise.all([a.e(9773),a.e(36556),a.e(40537),a.e(71562),a.e(53066),a.e(87421),a.e(51680)]).then(a.bind(a,590105)))),MapTile:new(n().O2)("MapTile",(async()=>await Promise.all([a.e(9773),a.e(36556),a.e(40537),a.e(87421),a.e(80983)]).then(a.bind(a,467238))))},r=(0,n()._h)(o.CollectionMapView,(e=>e.CollectionMapView)),s=(0,n()._h)(o.MapTile,(e=>e.MapTile))},515872:(e,t,a)=>{function n(e){return"form_editor"===e||"form_viewer"===e}a.d(t,{J:()=>n})},553748:(e,t,a)=>{a.d(t,{r:()=>h});var n=a(296540),o=()=>a(401497),r=()=>a(252291),s=()=>a(257545),i=a(474848);const g={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.26",svg:(0,i.jsx)("path",{d:"M10.833 16.321a.626.626 0 0 1 .162 1.24 7.7 7.7 0 0 1-1.99 0 .625.625 0 1 1 .162-1.24 6.4 6.4 0 0 0 1.666 0m-6.768-2.555a.625.625 0 0 1 .876.115c.34.442.736.838 1.178 1.178a.625.625 0 1 1-.762.99 7.7 7.7 0 0 1-1.407-1.406.626.626 0 0 1 .115-.877m10.994.114a.625.625 0 1 1 .99.763 7.7 7.7 0 0 1-1.406 1.407.626.626 0 0 1-.762-.991 6.4 6.4 0 0 0 1.178-1.178m-3.255-6.542a.625.625 0 0 1 1.072.642l-3 5a.626.626 0 0 1-1.01.086l-2-2.334a.625.625 0 0 1 .948-.813l1.436 1.674zM3.14 8.466a.626.626 0 0 1 .539.701 6.4 6.4 0 0 0 0 1.666.626.626 0 0 1-1.24.162 7.7 7.7 0 0 1 0-1.99.625.625 0 0 1 .7-.54m13.721.001a.625.625 0 0 1 .7.539 7.7 7.7 0 0 1 0 1.99.625.625 0 1 1-1.239-.162 6.4 6.4 0 0 0 0-1.666.626.626 0 0 1 .54-.701M5.357 3.95a.626.626 0 0 1 .762.991 6.4 6.4 0 0 0-1.178 1.178.625.625 0 1 1-.99-.762A7.7 7.7 0 0 1 5.356 3.95m8.41.115a.626.626 0 0 1 .877-.115c.528.406 1.001.88 1.407 1.407a.626.626 0 0 1-.991.762 6.4 6.4 0 0 0-1.178-1.178.625.625 0 0 1-.115-.876M10 2.375q.506 0 .995.064a.625.625 0 1 1-.162 1.24 6.4 6.4 0 0 0-1.666 0 .626.626 0 0 1-.162-1.24q.49-.063.995-.064"})},c=(0,a(340498).wt)("checkmarkCircleDash",g);var l=()=>a(53528),d=()=>a(931075),u=()=>a(69708),p=()=>a(534177),m=()=>a(284371),f=()=>a(968021);function h(e){const{verificationValue:t,fontSize:a=f().Mi}=e,g=(0,u().tz)(),h=(0,n.useMemo)((()=>d().B2(t)),[t]),_=h.type,y=(0,o().IS)((e=>({caption:{fontVariantNumeric:"normal",fontWeight:m().Wy.regular,color:e.text.primary,textTransform:"none",letterSpacing:0,marginInlineStart:6,marginInlineEnd:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:a,lineHeight:f().$g}})),[a]);if("none"===_)return null;let M=null,b=null;const v=y.caption;switch(_){case"verified":M=(0,i.jsx)(r().I,{icon:s().badgeCheckFillIcon,colorPalette:"blue",colorVariant:"accentPrimary",fitToViewBox:"horizontal"}),b=h.isIndefinite?(0,i.jsx)(u().sA,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,i.jsx)(u().sA,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:l().OH({dateTime:h.dateTimeRange.end,intl:g})}});break;case"expired":M=(0,i.jsx)(r().I,{icon:c,colorVariant:"secondary",fitToViewBox:"horizontal"}),b=(0,i.jsx)(u().sA,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:d().F7(h.dateTimeRange.end.setLocale(g.locale))}});break;default:(0,p().HB)(_)}return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[M,(0,i.jsx)("div",{style:v,children:b})]})}},668250:(e,t,a)=>{a.d(t,{R:()=>o});a(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"0.55 1.9 15.26 11.99",svg:(0,a(474848).jsx)("path",{d:"M11.4 1.908c-.872 0-1.584.362-2.064.96-.469.584-.687 1.353-.687 2.145 0 .793.218 1.561.687 2.145.48.599 1.192.96 2.064.96s1.584-.361 2.065-.96c.468-.584.687-1.352.687-2.145s-.219-1.56-.687-2.144c-.48-.6-1.193-.96-2.065-.96M2.693 3.46c.445-.554 1.104-.888 1.907-.888.804 0 1.463.334 1.907.888.433.539.632 1.245.632 1.97s-.2 1.43-.632 1.97c-.444.553-1.103.887-1.907.887-.803 0-1.462-.334-1.907-.888-.433-.539-.632-1.245-.632-1.97s.2-1.43.632-1.97M.71 11.561c.68-1.42 2.175-2.389 3.89-2.389.797 0 1.547.21 2.19.576a5.6 5.6 0 0 0-.814 1.333 2.78 2.78 0 0 0 .337 2.811H2.43c-.577 0-1.132-.243-1.49-.656a1.51 1.51 0 0 1-.23-1.675M11.4 8.84c-1.917 0-3.58 1.117-4.279 2.735a1.54 1.54 0 0 0 .268 1.665c.36.41.913.652 1.49.652h5.04c.579 0 1.131-.242 1.492-.652a1.54 1.54 0 0 0 .268-1.665c-.7-1.618-2.362-2.736-4.279-2.736"})},o=(0,a(340498).wt)("peopleFillSmall",n)},693084:(e,t,a)=>{a.d(t,{Hp:()=>i,Zz:()=>u,qi:()=>d,qs:()=>l,vM:()=>p});var n=()=>a(284371),o=()=>a(236030),r=()=>a(417392),s=()=>a(968021);const i={title:{type:r().nl.Popup},text:{type:r().nl.Popup},number:{type:r().nl.Popup},url:{type:r().nl.Popup},phone_number:{type:r().nl.Popup},email:{type:r().nl.Popup},relation:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"},rollup:{type:r().nl.SlideUp},select:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"},multi_select:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"},status:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"},person:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"},date:{type:r().nl.BottomSheet,bottomSheetInitialState:"full"},file:{type:r().nl.SlideUp},formula:{type:r().nl.SlideUp},checkbox:{type:r().nl.SlideUp},created_by:{type:r().nl.SlideUp},created_time:{type:r().nl.SlideUp},last_edited_by:{type:r().nl.SlideUp},last_edited_time:{type:r().nl.SlideUp},last_visited_time:{type:r().nl.SlideUp},button:{type:r().nl.SlideUp},auto_increment_id:{type:r().nl.Popup},location:{type:r().nl.Popup},verification:{type:r().nl.SlideUp},place:{type:r().nl.BottomSheet,bottomSheetInitialState:"half"}},g=Object.freeze({paddingInlineStart:9,paddingInlineEnd:9,paddingTop:(o().tt-20)/2,paddingBottom:(o().tt-20)/2,minHeight:o().tt+1+1,display:"flex",height:"100%",flexDirection:"column",justifyContent:"space-between",flexGrow:1}),c=Object.freeze({...g,paddingTop:(o().Um-20)/2,paddingBottom:(o().Um-20)/2,minHeight:o().Um+1+1}),l=Object.freeze({...g,fontSize:s().Mi}),d=Object.freeze({...g,fontSize:s().KI,fontWeight:n().Wy.medium}),u=Object.freeze({...c,fontSize:s().hN}),p=Object.freeze({...c,fontSize:s().KI,fontWeight:n().Wy.medium})},722372:(e,t,a)=>{a.d(t,{NT:()=>S,SE:()=>f,Y9:()=>k,cx:()=>M,fp:()=>_,jA:()=>y,o_:()=>b,rv:()=>A,zI:()=>v,zY:()=>p});var n=()=>a(148307),o=()=>a(67657),r=()=>a(597777),s=()=>a(869190),i=()=>a(72135),g=()=>a(69708),c=()=>a(496603),l=()=>a(534177),d=()=>a(972435);const u=(0,g().YK)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"},count_aggregations:{defaultMessage:"Count",id:"database.aggregationBucket.count"},percent_aggregations:{defaultMessage:"Percent",id:"database.aggregationBucket.percent"},statistics_aggregations:{defaultMessage:"More options",id:"database.aggregationBucket.more_options"},date_aggregations:{defaultMessage:"Date",id:"database.aggregationBucket.dateGroupingLabel"}}),p={count:d().A.formatMessage(u.count),count_values:d().A.formatMessage(u.count_values),unique:d().A.formatMessage(u.unique),show_unique:d().A.formatMessage(u.show_unique),empty:d().A.formatMessage(u.empty),not_empty:d().A.formatMessage(u.not_empty),percent_empty:d().A.formatMessage(u.percent_empty),percent_not_empty:d().A.formatMessage(u.percent_not_empty),sum:d().A.formatMessage(u.sum),average:d().A.formatMessage(u.average),median:d().A.formatMessage(u.median),min:d().A.formatMessage(u.min),max:d().A.formatMessage(u.max),range:d().A.formatMessage(u.range),earliest_date:d().A.formatMessage(u.earliest_date),latest_date:d().A.formatMessage(u.latest_date),date_range:d().A.formatMessage(u.date_range),checked:d().A.formatMessage(u.checked),unchecked:d().A.formatMessage(u.unchecked),percent_checked:d().A.formatMessage(u.percent_checked),percent_unchecked:d().A.formatMessage(u.percent_unchecked),count_per_group:d().A.formatMessage(u.count_per_group),percent_per_group:d().A.formatMessage(u.percent_per_group)},m=(0,g().YK)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),f={count:d().A.formatMessage(m.count),count_values:d().A.formatMessage(m.count_values),unique:d().A.formatMessage(m.unique),show_unique:d().A.formatMessage(m.show_unique),empty:d().A.formatMessage(m.empty),not_empty:d().A.formatMessage(m.not_empty),percent_empty:d().A.formatMessage(m.percent_empty),percent_not_empty:d().A.formatMessage(m.percent_not_empty),sum:d().A.formatMessage(m.sum),average:d().A.formatMessage(m.average),median:d().A.formatMessage(m.median),min:d().A.formatMessage(m.min),max:d().A.formatMessage(m.max),range:d().A.formatMessage(m.range),earliest_date:d().A.formatMessage(m.earliest_date),latest_date:d().A.formatMessage(m.latest_date),date_range:d().A.formatMessage(m.date_range),checked:d().A.formatMessage(m.checked),unchecked:d().A.formatMessage(m.unchecked),percent_checked:d().A.formatMessage(m.percent_checked),percent_unchecked:d().A.formatMessage(m.percent_unchecked),count_per_group:d().A.formatMessage(m.count_per_group),percent_per_group:d().A.formatMessage(m.percent_per_group)},h=(0,g().YK)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),_={count:d().A.formatMessage(h.count),count_values:d().A.formatMessage(h.count_values),unique:d().A.formatMessage(h.unique),show_unique:d().A.formatMessage(h.show_unique),empty:d().A.formatMessage(h.empty),not_empty:d().A.formatMessage(h.not_empty),percent_empty:d().A.formatMessage(h.percent_empty),percent_not_empty:d().A.formatMessage(h.percent_not_empty),sum:d().A.formatMessage(h.sum),average:d().A.formatMessage(h.average),median:d().A.formatMessage(h.median),min:d().A.formatMessage(h.min),max:d().A.formatMessage(h.max),range:d().A.formatMessage(h.range),earliest_date:d().A.formatMessage(h.earliest_date),latest_date:d().A.formatMessage(h.latest_date),date_range:d().A.formatMessage(h.date_range),checked:d().A.formatMessage(h.checked),unchecked:d().A.formatMessage(h.unchecked),percent_checked:d().A.formatMessage(h.percent_checked),percent_unchecked:d().A.formatMessage(h.percent_unchecked),count_per_group:d().A.formatMessage(h.count_per_group),percent_per_group:d().A.formatMessage(h.percent_per_group)},y={count_aggregations:d().A.formatMessage(u.count_aggregations),percent_aggregations:d().A.formatMessage(u.percent_aggregations),statistics_aggregations:d().A.formatMessage(u.statistics_aggregations),date_aggregations:d().A.formatMessage(u.date_aggregations)},M={count:n().A.images.aggregations.countPng,count_values:n().A.images.aggregations.countValuesPng,unique:n().A.images.aggregations.uniquePng,show_unique:void 0,empty:n().A.images.aggregations.emptyPng,not_empty:n().A.images.aggregations.notEmptyPng,percent_empty:n().A.images.aggregations.percentEmptyPng,percent_not_empty:n().A.images.aggregations.percentNotEmptyPng,sum:n().A.images.aggregations.sumPng,average:n().A.images.aggregations.averagePng,median:n().A.images.aggregations.medianPng,min:n().A.images.aggregations.minPng,max:n().A.images.aggregations.maxPng,range:n().A.images.aggregations.rangePng,earliest_date:n().A.images.aggregations.earliestDatePng,latest_date:n().A.images.aggregations.latestDatePng,date_range:n().A.images.aggregations.dateRangePng,checked:n().A.images.aggregations.checkedPng,unchecked:n().A.images.aggregations.uncheckedPng,percent_checked:n().A.images.aggregations.percentCheckedPng,percent_unchecked:n().A.images.aggregations.percentUncheckedPng,count_per_group:n().A.images.aggregations.countPng,percent_per_group:n().A.images.aggregations.percentCheckedPng};function b(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,l().HB)(e.operator)}}}function v(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":case"average":return t??"precision_2";case"sum":case"median":case"min":case"max":case"range":return t??void 0;default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return t??"precision_2";default:(0,l().HB)(e.operator)}}}function k(e){const{aggregationType:t,value:a,userTimeZone:n,dateFormat:g,numberPrecision:l}=e;if("date"===a.type){if(!(0,o().Y)(t))return;if(!a.value)return;return"date_range"===t?(0,s().a3)(a.value,n,d().A.getIntl()):(0,s().ZF)({value:r().pp(a.value),date_format:g??r().vz,userTimeZone:n,allowRelativeDates:!0,intl:d().A.getIntl()})}if((0,o().Y)(t))return;if("show_unique"===t)return;if("object"==typeof a.value)return;if("string"==typeof a.value)return a.value;let u;u=void 0===l||"precision_uncapped"===l?void 0===a.value?void 0:c().LI(a.value,5):a.value;const p=b(t,e.numberFormat);return(0,i().ZV)(u,p,d().A.getIntl(),void 0,l)}function A(e){const{aggregation:t,value:a,numberFormat:n,dateFormat:r,numberPrecision:s}=e,i=k({numberFormat:n,dateFormat:r,aggregationType:t?t.aggregator:"count",userTimeZone:e.userTimeZone,value:a,numberPrecision:s});if(null!=t&&t.enforceMaxAggregationLimit){const e=Number(i);if(e&&e>=o().iY)return o().iY-1+"+"}return i}function S(e){const t=e.aggregator,a=(0,o().ET)(t)?t.operator:t;return{enforceMaxAggregationLimit:Boolean(e.enforceMaxAggregationLimit),disabled:!(0,o().AS)(a)}}},727395:(e,t,a)=>{a.d(t,{_:()=>o});var n=()=>a(314529);function o(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"relation_navigate_block",t)}},733326:(e,t,a)=>{a.d(t,{N7:()=>w,id:()=>x,kB:()=>S});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(296540);var n=()=>a(242422),o=()=>a(584262),r=()=>a(898244),s=()=>a(452706),i=()=>a(713998),g=()=>a(921940),c=()=>a(165358),l=()=>a(532940),d=()=>a(69708),u=()=>a(100622),p=()=>a(972435),m=()=>a(71304),f=()=>a(562800),h=()=>a(765957),_=()=>a(712505),y=()=>a(148832),M=()=>a(543665),b=()=>a(727395),v=()=>a(577142),k=()=>a(812182),A=a(474848);function S({relationPointers:e,relatedPageStore:t,environment:a,from:n,peekMode:r,openInNew:s}){const{mainEditorCurrentBlockStore:i}=h().default.state;if(!i)return;const c=e.find((e=>e.id===t.id));if(!c)return;let l;if(s){const e=y().B.createChildStore(i,c),t=e.getModel(),n=f().E2(a,e);l=(0,g().A)({pageId:c.id,pageModel:t,baseUrl:n,pageVisitSource:o().y8.MentionInPage})}else{const e=i.getModel(),t=f().E2(a,i);l=(0,g().A)({pageId:i.id,pageModel:e,baseUrl:t,peekViewBlockId:c.id,peekMode:(0,_().getUrlParamFromPeekMode)("full_page"===r?void 0:r??_().default.state.mode),pageVisitSource:o().y8.MentionInPage}),(0,b()._)(a,{from:n,meta_click:Boolean(s)})}(0,v().navigate)({environment:a,url:l,openInNew:s})}async function w(e){var t;const{update:a,environment:o,blockStore:s,property:g,propertySchema:c,collectionContextStore:l}=e,d=null==l?void 0:l.collectionStore(),u=new Set(a.oldValues),p=a.newValues.filter((e=>!u.has(e)));if(!n().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const m=h().default.state.currentUserSettingsStore;if(Boolean(null==m?void 0:m.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==p.length)return!1;const f=(null==l?void 0:l.collectionViewStore())||(null==d||null===(t=d.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewStores()[0]);if(!d||!f||!c)return!1;const _=await async function(e){const{collectionStore:t,property:a,environment:n,targetCollectionStore:o}=e,s=t.getSchema()[a];if(!s||"relation"!==s.type)return!1;const i=r().Nv(s),g=s.property;if(!i||!g)return!1;const c=o??new(M().m)(n,i);await c.load();const l=c.getSchema();if(!(0,r().rd)({propertySchema:s,property:a,sourceCollectionId:t.id,targetCollectionSchema:l}))return!1;const d=l[g];return!(!d||"relation"!==d.type)&&Boolean(d.limit)}({collectionStore:d,property:g,environment:o});if(!_)return!1;const b=await async function(e){const{collectionStore:t,relationPointer:a,environment:n,property:o}=e,r=new(y().B)(n,a);await r.load();const s=t.getSchema()[o];if(!s||"relation"!==s.type)return;const g=s.property;if(!g)return;const c=r.getPropertyValue(g);if(!c)return;const[l]=i().n(c);return l}({collectionStore:d,relationPointer:p[0],property:g,environment:o});if(!b)return!1;const v=new(y().B)(o,b);await v.load();return{blockWithExistingRelationTitle:v.getPropertyValue("title"),currentBlockTitle:s.getPropertyValue("title"),update:a,canAccessBlockWithExistingRelation:v.canRead()}}async function x(e){var t;const{sourcePropertySchema:a,sourceCollectionPointer:n,relatedCollectionStore:o,newRelationValues:g,oldRelationValues:f,sourcePropertyId:h,environment:_}=e;if(!o)return;const M=o.getModel();if(!M)return;const b={propertySchema:a,propertyId:h,...n};if(!(0,r().G2)(b,M))return;const v=M.getSchema(),S=null===(t=Object.entries(v).find((([e,t])=>t&&r().nC(t)&&r().zO(t)===n.id)))||void 0===t?void 0:t[0];if(!S)return;const w=g.filter((e=>!f.includes(e))),x=await async function(e){const{environment:t,newlyAddedRelationValues:a,relatedCollectionRelationPropertySchemaId:n,relatedCollectionSpaceId:o}=e,r=p().A.getIntl(),g=[];for(const c of a){const e=c.id,a=new(y().B)(t,{table:"block",id:e,spaceId:o});await a.load();const l=a.getPropertyValue(n),d=i().n(l);if(d&&d.length>=s().uE){const e=(0,m().tS)({store:a,environment:t,intl:r});g.push(e)}}return g}({newlyAddedRelationValues:w,relatedCollectionRelationPropertySchemaId:S,environment:_,relatedCollectionSpaceId:o.getSpaceId()});if(0===x.length)return;const P=(0,u().O4)({theme:"dark"}),C={learnMore:{cursor:"pointer",color:P.text.primary},learnMoreContainer:{marginTop:"10px"}};c().log({level:"info",type:"twoWayRelationLimitExceededToastDisplayed",from:"relationPropertyActions",data:{miscDataToConvertToString:{sourceCollectionId:n.id,relatedCollectionId:o.id,spaceId:o.getSpaceId()}}});const N=1===x.length?(0,A.jsx)(d().sA,{defaultMessage:"{title} reached the maximum of 10,000 related pages",values:{title:x[0]},id:"relationPropertyActions.twoWayRelationLimitExceededMessage.onePage"}):(0,A.jsx)(d().sA,{defaultMessage:"Multiple pages reached the maximum of 10,000 related pages",id:"relationPropertyActions.twoWayRelationLimitExceededMessage.multiplePages"});k().Iz({id:"two-way-relation-limit-exceeded",title:(0,A.jsx)(d().sA,{defaultMessage:"Two-way relation failed to sync",id:"relationPropertyActions.twoWayRelationLimitExceededTitle"}),message:(0,A.jsxs)(A.Fragment,{children:[N,(0,A.jsx)("div",{style:C.learnMoreContainer,children:(0,A.jsx)("a",{href:"https://www.notion.com/help/optimize-database-load-times-and-performance",target:"_blank",style:C.learnMore,children:(0,A.jsx)(d().sA,{defaultMessage:"Learn more",id:"relationPropertyActions.learnMore"})})})]}),icon:()=>(0,l().exclamationMarkTriangleIcon)({height:16,width:16,color:P.icon.inversePrimary})})}},877750:(e,t,a)=>{a.d(t,{W:()=>_,e:()=>h});a(296540);var n=()=>a(401497),o=()=>a(784892),r=()=>a(563884),s=()=>a(91451),i=()=>a(436632),g=()=>a(201980),c=()=>a(69708),l=()=>a(534177),d=()=>a(848401),u=()=>a(431616),p=a(474848);const m="20px",f=(0,c().YK)({me:{id:"templateVariablePropertyValueComponent.templateVariables.text.me",defaultMessage:"Person who duplicated page"},now:i().H.nowText,today:i().H.todayText});function h(e){const t=(0,n().IS)((e=>({textWrapper:{lineHeight:m}})),[]);return(0,p.jsx)(u().C,{fontColor:"light",style:t.textWrapper,children:(0,p.jsx)(_,{templateVariableType:e.templateVariableType})})}function _(e){const{templateVariableType:t,showRemoveButton:a,onRemove:i,style:u}=e,m=(0,c().tz)(),f=(0,n().IS)((e=>({uiToken:{background:e.outlineBlueButtonPressedBackground,color:e.blue.text.accentPrimary,padding:"2px 4px",width:"max-content",...u||{}}})),[u]);return(0,p.jsx)(d().Ay,{format:o().NY.Medium,isSingle:!0,title:y(t,m),renderAvatar:()=>function(e){let t;(0,g().pbt)(e)?t=s().z:(0,g().UKc)(e)?t=r().k:(0,l().HB)(e);return t}(t)({width:12,height:12,marginInlineEnd:4}),shouldShrink:!0,onClickRemove:i,showRemoveButton:Boolean(a),style:f.uiToken})}function y(e,t){let a;return"me"===e?a=t.formatMessage(f.me):"now"===e?a=t.formatMessage(f.now):"today"===e?a=t.formatMessage(f.today):(0,l().HB)(e),a}}}]);