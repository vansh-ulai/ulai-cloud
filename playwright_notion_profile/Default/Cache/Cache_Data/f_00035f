"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21088,78217],{10289:(e,t,n)=>{n.d(t,{Y:()=>i});var r=()=>n(645873);const o=new(r().O2)("invoice",(async()=>await Promise.all([n.e(91598),n.e(60896)]).then(n.bind(n,430600)))),i=(0,r()._h)(o,(e=>e.Invoice))},22102:(e,t,n)=>{n.d(t,{k:()=>r});const r=new(n(645873).O2)("isTemplate",(async()=>await n.e(6993).then(n.bind(n,826880))))},23908:(e,t,n)=>{n.r(t),n.d(t,{BroadcastChannel:()=>B,OPEN_BROADCAST_CHANNELS:()=>D,beLeader:()=>Z,clearNodeFolder:()=>N,createLeaderElection:()=>Y,enforceOptions:()=>O});var r=Promise.resolve(!1),o=Promise.resolve(!0),i=Promise.resolve();function a(e,t){return e||(e=0),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))}function s(){return Math.random().toString(36).substring(2)}var c=0;function l(){var e=1e3*Date.now();return e<=c&&(e=c+1),c=e,e}var d={create:function(e){var t={time:l(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),i}catch(n){return Promise.reject(n)}},canBeUsed:function(){if("undefined"!=typeof globalThis&&globalThis.Deno&&globalThis.Deno.args)return!0;if("undefined"==typeof window&&"undefined"==typeof self||"function"!=typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:l};class u{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,p()),this._to||(this._to=!0,setTimeout((()=>{this._to=!1,function(e){const t=p()-e.ttl,n=e.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const o=r[0];if(!(r[1]<t))return;e.map.delete(o)}}(this)}),0))}clear(){this.map.clear()}}function p(){return Date.now()}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var f="pubkey.broadcast-channel-0-",v="messages",g={durability:"relaxed"};function h(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function b(e){e.commit&&e.commit()}function S(e,t){var n=e.transaction(v,"readonly",g),r=n.objectStore(v),o=[],i=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var a=r.getAll(i);return new Promise((function(e,t){a.onerror=function(e){return t(e)},a.onsuccess=function(t){e(t.target.result)}}))}return new Promise((function(e,a){var s=function(){try{return i=IDBKeyRange.bound(t+1,1/0),r.openCursor(i)}catch(e){return r.openCursor()}}();s.onerror=function(e){return a(e)},s.onsuccess=function(r){var i=r.target.result;i?i.value.id<t+1?i.continue(t+1):(o.push(i.value),i.continue()):(b(n),e(o))}}))}function y(e){return(t=e.db,n=e.options.idb.ttl,r=Date.now()-n,o=t.transaction(v,"readonly",g),i=o.objectStore(v),a=[],new Promise((function(e){i.openCursor().onsuccess=function(t){var n=t.target.result;if(n){var i=n.value;i.time<r?(a.push(i),n.continue()):(b(o),e(a))}else e(a)}}))).then((function(t){return function(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(v,"readwrite",g).objectStore(v);return Promise.all(t.map((function(e){var t=n.delete(e);return new Promise((function(e){t.onsuccess=function(){return e()}}))})))}(e,t.map((function(e){return e.id})))}));var t,n,r,o,i,a}function w(e){e.closed||A(e).then((function(){return a(e.options.idb.fallbackInterval)})).then((function(){return w(e)}))}function A(e){return e.closed?i:e.messagesCallback?S(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),i})):i}var k={create:function(e,t){return t=m(t),function(e){var t=h(),n=f+e,r=t.open(n);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(v,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:s(),eMIs:new u(2*t.idb.ttl),writeBlockPromise:i,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},w(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,A(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:Date.now(),data:n},o=e.transaction([v],"readwrite",g);return new Promise((function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(v).add(r),b(o)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&y(e)})),e.writeBlockPromise},canBeUsed:function(){return!!h()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:l},I="pubkey.broadcastChannel-";function _(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}function C(e){return I+e}function E(){var e=_();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(n){return!1}return!0}var x={create:function(e,t){if(t=m(t),!E())throw new Error("BroadcastChannel: localstorage cannot be used");var n=s(),r=new u(t.localstorage.removeTimeout),o={channelName:e,uuid:n,eMIs:r};return o.listener=function(e,t){var n=C(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,(function(e){o.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<o.messagesCallbackTime||(r.add(e.token),o.messagesCallback(e.data)))})),o},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){a().then((function(){var r=C(e.channelName),o={token:s(),time:Date.now(),data:t,uuid:e.uuid},i=JSON.stringify(o);_().setItem(r,i);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=i,window.dispatchEvent(a),n()}))}))},canBeUsed:E,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:l},T=l,P=new Set;var L={create:function(e){var t={time:T(),name:e,messagesCallback:null};return P.add(t),t},close:function(e){P.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(P).forEach((function(n){n.name===e.name&&n!==e&&n.messagesCallback&&n.time<t.time&&n.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:T},U=[d,k,x];function M(e){var t=[].concat(e.methods,U).filter(Boolean);if(e.type){if("simulate"===e.type)return L;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No usable method found in "+JSON.stringify(U.map((function(e){return e.type}))))}var R,D=new Set,j=0,B=function(e,t){var n,r,o;this.id=j++,D.add(this),this.name=e,R&&(t=R),this.options=m(t),this.method=M(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,r=(n=this).method.create(n.name,n.options),(o=r)&&"function"==typeof o.then?(n._prepP=r,r.then((function(e){n._state=e}))):n._state=r};function N(e){var t=M(e=m(e));return"node"===t.type?t.clearNodeFolder().then((function(){return!0})):r}function O(e){R=e}function q(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:i).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function z(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function W(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&z(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function F(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!z(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}B._pubkey=!0,B.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return q(this,"message",e)},postInternal:function(e){return q(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};F(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,W(this,"message",t)):this._onML=null},addEventListener:function(e,t){W(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){F(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){D.delete(this),this.closed=!0;var t=this._prepP?this._prepP:i;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var K="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?function(e){process.on("exit",(function(){return e()})),process.on("beforeExit",(function(){return e().then((function(){return process.exit()}))})),process.on("SIGINT",(function(){return e().then((function(){return process.exit()}))})),process.on("uncaughtException",(function(t){return e().then((function(){console.trace(t),process.exit(101)}))}))}:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}},V=new Set,$=!1;function H(e){if($||($=!0,K(G)),"function"!=typeof e)throw new Error("Listener is no function");return V.add(e),{remove:function(){return V.delete(e)},run:function(){return V.delete(e),e()}}}function G(){var e=[];return V.forEach((function(t){e.push(t()),V.delete(t)})),Promise.all(e)}function J(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function Z(e){e.isLeader=!0,e._hasLeader=!0;var t=H((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&J(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),J(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),J(e,"tell")}var Q=function(e,t){var n=this;this.broadcastChannel=e,e._befC.push((function(){return n.die()})),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=s(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};Q.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then((function(t){var n=t.held?t.held.filter((function(t){return t.name===e.lN})):[];return!!(n&&n.length>0)}))},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var t=new Promise((function(t,n){e._wKMC.res=t,e._wKMC.rej=n}));this._wLMP=new Promise((function(n){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},(function(){return e._wKMC.c=void 0,Z(e),n(),t})).catch((function(){}))}))}return this._wLMP},set onduplicate(e){},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),J(this,"death")}};var X=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=s(),this._aplQ=i,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(e){"leader"===e.context&&("death"===e.action&&(n._hasLeader=!1),"tell"===e.action&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};function Y(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}(t,e);var n="undefined"!=typeof navigator&&void 0!==navigator.locks&&"function"==typeof navigator.locks.request?new Q(e,t):new X(e,t);return e._befC.push((function(){return n.die()})),e._leaderElector=n,n}X.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;if(this.isLeader)return a(0,!0);if(this.isDead)return a(0,!1);if(this._aplQC>1)return this._aplQ;return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(t.isLeader)return o;var n,r=!1,i=new Promise((function(e){n=function(){r=!0,e()}})),s=function(e){"leader"===e.context&&e.token!=t.token&&("apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t._hasLeader=!0))};t.broadcastChannel.addEventListener("internal",s);var c=e?4*t._options.responseTime:t._options.responseTime;return J(t,"apply").then((function(){return Promise.race([a(c),i.then((function(){return Promise.reject(new Error)}))])})).then((function(){return J(t,"apply")})).then((function(){return Promise.race([a(c),i.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",s),!r&&Z(t).then((function(){return!0}))}))}()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(e){if(e.isLeader)return i;return new Promise((function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",o),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()})),function t(){return a(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void r():e.applyOnce(!0).then((function(){e.isLeader?r():t()}))}))}();var o=function(t){"leader"===t.context&&"death"===t.action&&(e._hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&r()})))};e.broadcastChannel.addEventListener("internal",o),e._lstns.push(o)}))}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,J(this,"death")}}},74464:(e,t,n)=>{n.d(t,{i:()=>i});n(296540);var r=()=>n(719147),o=n(474848);function i(e,t){return(0,o.jsx)(r().A,{href:e,children:t})}},76753:(e,t,n)=>{n.d(t,{K:()=>i});var r=()=>n(44551),o=()=>n(973647);async function i(){if(!r().electronApi||!r().electronApi.getProcessesAccessingMicrophoneDebouncedWithResult)return o().Q.fail({message:"API not available"});try{return await r().electronApi.getProcessesAccessingMicrophoneDebouncedWithResult()}catch(e){return o().Q.fail({message:"Failed to get debounced microphone processes",error:e})}}},79059:(e,t,n)=>{n.r(t),n.d(t,{getMobileNativeSessionInfo:()=>o,mobileNativeSessionInfoKey:()=>r});const r="__mobileNativeSessionInfo";function o(){return window[r]??{}}},80157:(e,t,n)=>{n.d(t,{A:()=>m});n(296540);var r=()=>n(484714),o=()=>n(56366),i=()=>n(401497),a=()=>n(75435),s=()=>n(903659),c=()=>n(696746),l=()=>n(665579),d=()=>n(765957),u=()=>n(877050),p=n(474848);function m({children:e}){const t=(0,r().v3)(),n=(0,i().DP)(),m=(0,o().K8)((()=>{var e;const{mainEditorCurrentBlockStore:r}=d().default.state,o=(0,c().lU)(r),i=t.device.isPhone;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:Boolean(null===(e=a().A.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)||(0,u().Em)(t.RouterStore.state.route.name)?"rgba(0, 0, 0, 0)":o?(0,l().Lu)({theme:n,isPhone:i}):n.background.primary}}),[t,n]);return(0,p.jsx)(s().A,{style:m,children:e})}},90907:(e,t,n)=>{n.d(t,{h:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.06 15.66",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,r.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,n(340498).wt)("lock",o)},124749:(e,t,n)=>{n.d(t,{$:()=>i});var r=()=>n(56366);const o=new(n(496506).ComputedStore)((()=>n(765957).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function i(){return(0,r().O$)(o)}},135985:(e,t,n)=>{n.d(t,{AK:()=>l,Em:()=>u,Ns:()=>d});var r=()=>n(179034),o=()=>n(969197),i=()=>n(129522),a=()=>n(695625),s=()=>n(765957),c=()=>n(148832);function l(e){var t;const n=null===(t=i().K.findBlockFromId(e))||void 0===t?void 0:t.getBlockStore();if(n)return n;const o=s().default.state.sidebarSpaceStore;return o?c().B.createChildStore(o,{id:e,table:r().ev}):void 0}function d(e){return{start:{blockStoreId:e.start.store.id,index:e.start.index},end:{blockStoreId:e.end.store.id,index:e.end.index}}}function u(e){const t=e.start.blockStoreId,n=e.end.blockStoreId,[r,i]=a().T.findSelectablesFromIds([t,n]),s=(null==r?void 0:r.props.store)&&(0,o().aI)(null==r?void 0:r.props.store),c=t===n?s:(null==i?void 0:i.props.store)&&(0,o().aI)(null==i?void 0:i.props.store);if(s&&c)return{start:{store:s,index:e.start.index},end:{store:c,index:e.end.index}}}},137493:(e,t,n)=>{n.d(t,{j:()=>r});const r=new(n(178624).R)({key:"SimulateOffline",namespace:"Offline",important:!0,trackingType:"necessary"})},171510:(e,t,n)=>{n.r(t),n.d(t,{AuthSyncListener:()=>b});n(898992),n(354520);var r=n(296540),o=()=>n(726637),i=()=>n(484714),a=()=>n(56366);const s="initial_handshake";var c=()=>n(798880),l=()=>n(69708),d=()=>n(496603),u=()=>n(763824),p=()=>n(498212),m=()=>n(870092),f=()=>n(179534),v=()=>n(214006),g=n(474848);const h=1;function b(){const e=(0,i().v3)(),t=(0,l().tz)(),n=`${o().A.identity.domainBaseUrl}/authSync`,b=e.currentUser.isLoggedIn(),[S,y]=(0,r.useState)(null),[w,A]=(0,r.useState)({value:!1,count:0}),k=(0,a().K8)((()=>f().A.getTotalUnreadMentionsCount()),[]),I=(0,a().K8)((()=>v().A.getAllSpaceViewStores(e)),[e]);(0,r.useEffect)((()=>{const e=t=>{const n=o().A.identity.domainBaseUrl;t.origin===n&&t.ports&&t.ports[0]&&(y(t.ports[0]),window.removeEventListener("message",e))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,r.useEffect)((()=>{b&&(w.value||0===w.count||null==S||S.postMessage({version:h,name:"unreadCount",source:"notion",unreadCount:k}))}),[b,w.count,w.value,S,k]);const _=(0,r.useCallback)((async()=>{const e=d().hS(I,"userId"),n=await(0,u().lX)(e,10,(async e=>{if(!e.userId)return;const n=m().L.createChildStore(e,{table:c().oo,id:e.userId});await n.load();const r=n.getEmail()??"",o=n.getDisplayName(t)??"",i=n.getProfilePhoto()??"";return{id:e.userId,displayName:o,emailAddress:r,profilePicture:i}}));null==S||S.postMessage({version:h,name:"accountSwitcher",source:"notion",accounts:n.filter((e=>void 0!==e)),persistCookie:!0})}),[t,S,I]);(0,r.useEffect)((()=>{b&&S&&(w.value||0===w.count)&&_()}),[b,_,w.count,w.value,S]),(0,r.useEffect)((()=>{e.currentUser.id&&!(0,p().uj)(e.currentUser.id)||null==S||S.postMessage({version:h,name:"setNotionUserID",source:"notion",notionUserID:e.currentUser.id?e.currentUser.id:"",type:"mutation"})}),[e.currentUser.id,S]),(0,r.useEffect)((()=>{b||(null==S||S.postMessage({version:h,name:"setNotionUserID",source:"notion",notionUserID:"",type:"mutation"}),null==S||S.postMessage({version:h,name:"accountSwitcher",source:"notion",accounts:[],persistCookie:!0}))}),[b,S]);const C=(0,r.useCallback)((e=>{if(e.data.version!==h)return;const{source:t}=e.data;if("notion"!==t&&"mailLoaded"===e.data.name)A((e=>({value:!0,count:e.count+1})))}),[]);return(0,r.useEffect)((()=>(y((e=>(e&&(e.onmessage=C),e))),()=>{y((e=>(e&&(e.onmessage=null),e)))})),[C,S]),(0,g.jsx)("iframe",{src:n,style:{display:"none"},onLoad:e=>function(e){const t=e.currentTarget;setTimeout((()=>{var e;null===(e=t.contentWindow)||void 0===e||e.postMessage(s,o().A.identity.domainBaseUrl)}),50)}(e),title:"Notion Identity"})}},182183:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>r,notionTintableIcon:()=>o});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"1.76 1.39 16.47 17.17",svg:(0,n(474848).jsx)("path",{d:"M12.32 1.437c1.17-.1 1.47-.032 2.205.501l3.039 2.136c.5.367.668.467.668.867v11.715c0 .734-.267 1.168-1.202 1.234l-11.055.667c-.702.034-1.036-.066-1.404-.533L2.333 15.12c-.4-.534-.567-.934-.567-1.401V3.306c0-.6.267-1.101 1.035-1.168zm4.241 3.871-10.854.634c-.4.034-.534.235-.534.668v9.945c0 .535.267.735.868.702l10.388-.601c.6-.033.668-.401.668-.835V5.942c0-.433-.167-.667-.536-.634m-1.134 1.836c.066.3 0 .601-.301.635l-.501.1v7.342c-.434.233-.835.367-1.169.367-.534 0-.668-.168-1.068-.668L9.113 9.78v4.973l1.036.233c0 .008-.005.6-.836.6l-2.303.135c-.067-.134 0-.468.233-.535l.602-.167V8.446L7.01 8.38c-.067-.3.1-.734.567-.768l2.472-.166 3.407 5.206V8.046l-.868-.1c-.067-.367.2-.635.534-.668zm-2.705-4.772-9.153.668c-.333.033-.4.2-.267.333l1.303 1.035c.534.433.735.4 1.737.333l9.452-.567c.2 0 .034-.2-.033-.233l-1.57-1.136c-.301-.233-.702-.5-1.47-.433"})},o=(0,n(340498).wt)("notionTintable",r)},205338:(e,t,n)=>{var r=n(440961);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},217753:(e,t,n)=>{n.d(t,{A:()=>o});n(296540);var r=n(474848);const o=function(e){const t=(0,n(401497).eP)(),o={width:42,height:42,flexShrink:0,flexGrow:0};return(0,r.jsxs)("div",{style:{width:"100vw",height:"90vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[(0,r.jsx)(n(296798).A,{href:n(427704).JZ.root,innerStyle:{padding:8,borderRadius:4,marginBottom:2},children:"light"===t?(0,n(426388).S)(o):(0,n(517592).A)(o)}),(0,r.jsx)("div",{style:{maxWidth:320,paddingInlineStart:18,paddingInlineEnd:18},children:e.children})]})}},236357:(e,t,n)=>{n.d(t,{a:()=>o});var r=()=>n(44551);async function o(){return r().electronApi&&r().electronApi.isMainTab?r().electronApi.isMainTab():!r().electronApi||!r().electronApi.isMainWindow||r().electronApi.isMainWindow()}},253849:(e,t,n)=>{n.d(t,{H:()=>o,S:()=>i});var r=()=>n(645873);const o=new(r().O2)("AppComponents",(async()=>Promise.all([n.e(75134),n.e(99223),n.e(9304),n.e(9773),n.e(36556),n.e(40537),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(62475),n.e(3151),n.e(98629),n.e(58550),n.e(67539),n.e(42838),n.e(22900),n.e(27634),n.e(85128),n.e(49889),n.e(20108),n.e(95555),n.e(87249),n.e(71621),n.e(92845),n.e(56369),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(58636),n.e(78405),n.e(33675),n.e(74562),n.e(47160),n.e(37384),n.e(91598),n.e(48046),n.e(3259),n.e(13955),n.e(42056),n.e(3165),n.e(76677),n.e(31842),n.e(43223),n.e(45147),n.e(15517),n.e(94995),n.e(98339),n.e(55639),n.e(1966),n.e(35738),n.e(6642),n.e(55776),n.e(51444),n.e(21727),n.e(58209),n.e(13297),n.e(4802),n.e(65197),n.e(81768),n.e(94300),n.e(62032),n.e(72122),n.e(32487),n.e(28058),n.e(90638),n.e(75422),n.e(97859),n.e(50856),n.e(65014),n.e(49175),n.e(36359),n.e(2752),n.e(11571),n.e(92924),n.e(42525),n.e(25204),n.e(52273),n.e(52986),n.e(45732),n.e(46817),n.e(70442),n.e(28656),n.e(37160),n.e(30443),n.e(9426),n.e(76690),n.e(63248),n.e(39457),n.e(21912),n.e(80668),n.e(12507),n.e(6626),n.e(26497),n.e(61016),n.e(91629),n.e(61858),n.e(63053),n.e(34399),n.e(89379),n.e(34974),n.e(75332),n.e(95103),n.e(75681)]).then(n.bind(n,614367)))),i=(0,r()._h)(o,(e=>e.AppComponents))},256467:(e,t,n)=>{n.d(t,{initializeElectron:()=>b});n(811558),n(898992),n(354520),n(581454),n(814603),n(147566),n(198721);var r=()=>n(20022),o=()=>n(44551),i=()=>n(751629),a=()=>n(678293),s=()=>n(662303),c=()=>n(361242),l=()=>n(165358),d=()=>n(651170),u=()=>n(711059),p=()=>n(496603),m=()=>n(229833),f=()=>n(763824);function v(e=navigator.userAgent){const t=function(e){const t=e.match(/Mac OS X (\d+_\d+)/);if(t)return t[1].split("_").map((e=>parseInt(e,10)));return}(e);return!!t&&(10===t[0]&&t[1]<15)}var g=()=>n(236357),h=()=>n(526713);async function b(e){var t;const{device:n,electronSqlite:b,routerStore:S}=e;if(!o().electronApi)return;await(0,i().getAndCacheDesktopVersionAsync)();const y=await(0,g().a)();var w;/WantsServiceWorker/i.test(navigator.userAgent)&&"serviceWorker"in navigator&&(y&&navigator.serviceWorker.register(`${window.location.origin}/sw.js`,{type:"classic",scope:"/"}).catch((async e=>{await f().nQ(2e3,S.waitUntil((()=>{var e;return void 0!==(null==S||null===(e=S.state)||void 0===e||null===(e=e.route)||void 0===e?void 0:e.name)&&"root"!==S.state.route.name})));if(!("login"===S.state.route.name))if(null!==o().electronApi&&void 0!==o().electronApi&&o().electronApi.logErrorForOffline){var t;const n="blank"===S.state.route.name?"prewarmedTab":"quickSearch"===S.state.route.name?"quickSearchWindow":"page";null===o().electronApi||void 0===o().electronApi||null===(t=o().electronApi.logErrorForOffline)||void 0===t||t.call(o().electronApi,{level:"error",from:"electronActions",type:`${n}ServiceWorkerRegistrationError`,error:(0,m().convertErrorToLog)(e)})}else l().log({level:"error",from:"electronActions",type:"serviceWorkerRegistrationError",error:(0,m().convertErrorToLog)(e)})})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{const e=new URL(window.location.href);e.searchParams.set(c().Sn,"service_worker_change"),window.location.replace(e.toString())})),null!==o().electronApi&&void 0!==o().electronApi&&null!==(w=o().electronApi.relayMessageToServiceWorker)&&void 0!==w&&w.addListener&&o().electronApi.relayMessageToServiceWorker.addListener(((e,t)=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{var n;null===(n=e.active)||void 0===n||n.postMessage(t)}))})),o().electronApi.relayMessageFromServiceWorker&&navigator.serviceWorker.addEventListener("message",(e=>{o().electronApi&&o().electronApi.relayMessageFromServiceWorker&&o().electronApi.relayMessageFromServiceWorker(e.data)})));if(null!==(t=o().electronApi.zoom)&&void 0!==t&&t.get&&await o().electronApi.zoom.get(),b&&b.sqliteConnection){if("on"===(0,a().ZP)({experimentId:"desktop_unblock_sqlite_migration",enableEventTrailLogging:!0}))b.sqliteConnection.ensureMigrated().catch((e=>{l().log({level:"error",from:"electronActions",type:"sqliteConnectionEnsureMigratedError",error:(0,m().convertErrorToLog)(e),data:(0,d().CS)(e,{isBrowser:!1})})}));else try{await b.sqliteConnection.ensureMigrated()}catch(A){l().log({level:"error",from:"electronActions",type:"sqliteConnectionEnsureMigratedError",error:(0,m().convertErrorToLog)(A),data:(0,d().CS)(A,{isBrowser:!1})})}b.sqliteConnection.optimize().catch((e=>{l().log({level:"error",from:"electronActions",type:"sqliteConnectionOptimizeError",error:(0,m().convertErrorToLog)(e),data:(0,d().CS)(e,{isBrowser:!1})})}))}if(o().electronApi.getSubstitutions&&n.isElectronMac){const e=await o().electronApi.getSubstitutions();(0,r().zu)(e.filter((e=>e.replace!==e.with)).map((e=>({length:e.replace.length,replace:new RegExp(`\\b${p().Nt(e.replace)} $`),with:`${e.with} `}))))}n.isElectronMac&&(v()&&r().Zq.setPreference("isAutoUpdaterDisabled",!0),await async function(e){const t=e.device.desktopAppVersion;if(!t)return;const n=(0,u().parseVersion)(t);if(!n)return;const o=await r().Zq.get(),i=null==o?void 0:o.preferences;i&&((0,h().o)(n)?!1===i.isUniversalLinksEnabled&&(r().Zq.setPreference("isUniversalLinksEnabled",!0),r().Zq.setPreference("isUniversalLinksEnabledBackup",!1)):!1===i.isUniversalLinksEnabledBackup&&(r().Zq.setPreference("isUniversalLinksEnabledBackup",void 0),r().Zq.setPreference("isUniversalLinksEnabled",!1)))}(e)),o().electronApi.setLocale&&o().electronApi.setLocale(s().locale)}},273915:(e,t,n)=>{n.d(t,{L:()=>c});var r=()=>n(59226),o=()=>n(484714),i=()=>n(56366),a=()=>n(765957),s=()=>n(982254);function c(){const e=(0,o().v3)(),t=(0,r().X)("app_level_calendar_event_subscription"),n=(0,i().K8)((()=>{var e;return Boolean(null===(e=a().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getSelectedCalendarBotId())}),[]),c=(0,i().K8)((()=>s().A.state.isActiveTab),[]);return Boolean(e.device.isElectron&&t&&n&&c)}},276324:(e,t,n)=>{n.r(t),n.d(t,{mainApp:()=>r});n(16280);async function r(e){var t;const{minimalEnvironment:r,mainStartTime:o,prefetchInitiatedTime:i,prefetchCache:a,initializeStatsigPromise:s,currentUserId:c}=e,{device:l}=r,[{setupOnBeforeUnload:d},u,{createClientEnvironment:p},{setupTransactionQueue:m},{default:f},v,g]=await Promise.all([Promise.resolve().then(n.bind(n,840125)),Promise.resolve().then(n.bind(n,165358)),Promise.resolve().then(n.bind(n,883088)),Promise.resolve().then(n.bind(n,589994)),Promise.resolve().then(n.bind(n,518888)),Promise.resolve().then(n.bind(n,907828)),Promise.resolve().then(n.bind(n,813974))]);g.initializeKeyboardShortcutsStore(r);let h=await p({minimalEnvironment:r,prefetchCache:a,currentUserId:c});if(null!==(t=h.bootData)&&void 0!==t&&t.spaceId){const[{default:e},{SpaceStore:t}]=await Promise.all([Promise.resolve().then(n.bind(n,765957)),Promise.resolve().then(n.bind(n,985405))]);e.setState({...e.state,sidebarSpaceStore:new t(h,{table:"space",id:h.bootData.spaceId})})}const{ElectronSqlite:b,RouterStore:S}=h;v.setupRecordCacheDebugging(l);const y=await m(h);d({device:l,TransactionQueue:y,AppUpdateStore:h.AppUpdateStore,GlobalFileUploadStore:f});const[w,{default:A}]=await Promise.all([Promise.resolve().then(n.bind(n,652393)),Promise.resolve().then(n.bind(n,406792))]);if(w.initialize(h),l.isMobileNative){const e=A.DO_NOT_USE_markLegacy("mobilenative.initialize_from_js"),[t,r,o]=await Promise.all([Promise.resolve().then(n.bind(n,324234)),Promise.resolve().then(n.bind(n,475133)),Promise.resolve().then(n.bind(n,79059))]);await t.initializeMobileNativeApp(h),Object.assign(u.clientLogglyEnvironmentData,r.getMobileNativeDeviceInfo(),o.getMobileNativeSessionInfo()),A.DO_NOT_USE_measureLegacy(e,{environment:h,data:{}})}if(l.isElectron){const e=A.mark("desktop.initialize_from_js"),{initializeElectron:t}=await Promise.resolve().then(n.bind(n,256467));await t({device:l,electronSqlite:b,routerStore:S});const r=await Promise.resolve().then(n.bind(n,647987)),o=await r.getDesktopDeviceInfo();Object.assign(u.clientLogglyEnvironmentData,o,{desktopVersion:l.desktopAppVersion}),A.measure(e,{environment:h})}const[k,I,_,C,E]=await Promise.all([Promise.resolve().then(n.bind(n,293294)),Promise.resolve().then(n.bind(n,869562)),Promise.resolve().then(n.bind(n,906537)),Promise.resolve().then(n.bind(n,604643)),Promise.resolve().then(n.bind(n,231297))]),[{AppRoot:x},T,P,L,{CurrentUser:U},{getGhostAdminUserId:M},{default:R}]=await Promise.all([Promise.resolve().then(n.bind(n,340997)),Promise.resolve().then(n.t.bind(n,296540,19)),Promise.resolve().then(n.t.bind(n,440961,19)),Promise.resolve().then(n.t.bind(n,205338,19)),Promise.resolve().then(n.bind(n,590966)),Promise.resolve().then(n.bind(n,529543)),Promise.resolve().then(n.bind(n,242422))]);_.startListeners(l),h=await k.initialize(h),h.updateCurrentUserId=async e=>{const t=await M(h),n={...e.environment,currentUser:new U({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};await Q(n),n.idCreator.updateCurrentUserId(e.currentUserId)},C.initialize(h),y.startLoop();const[{refreshNotionCookies:D,validateHasPermissionArgs:j,clearNotionCookiesWithNoPermission:B,clearThirdPartyCookiesAndLocalStorageWithNoPermission:N},{clearNotionLocalStorageWithNoPermission:O},q,z,W,F,{default:K},V]=await Promise.all([Promise.resolve().then(n.bind(n,529543)),Promise.resolve().then(n.bind(n,422920)),Promise.resolve().then(n.bind(n,14307)),Promise.resolve().then(n.bind(n,915086)),Promise.resolve().then(n.bind(n,410690)),Promise.resolve().then(n.bind(n,807054)),Promise.resolve().then(n.bind(n,567417)),Promise.resolve().then(n.bind(n,842677))]);Promise.all([B(h),N(h)]).then((()=>D(h))),O(),j(h);const[{TransactionQueueDependenciesImpl:$},{waitForStatsigInitialization:H},{isPrewarmedTabInitialRender:G}]=await Promise.all([Promise.resolve().then(n.bind(n,866184)),Promise.resolve().then(n.bind(n,546369)),Promise.resolve().then(n.bind(n,807054))]);let J,Z;async function Q(e){const t=performance.now(),{didStatsigBootupTimeout:n}=await H({environment:h,initializeStatsigResult:await s});J??=R.checkGate({gateName:"react_18_concurrent_rendering"});const r=performance.now(),a=document.querySelector("#notion-app");if(!a)throw new Error('Could not find element with id "notion-app"');y.updateDependencies(new $(e)),E.updateConnectionState(e),q.updateEnvironment(e),u.clientLogglyEnvironmentData.userId=e.currentUser.id;const c=()=>{const e=document.getElementById("initial-loading-spinner"),a=document.getElementById("skeleton");e&&e.remove(),a&&a.remove();const s=performance.now();z.setSubMetricsAtRenderCallback({mainStartTime:o,prefetchInitiatedTime:i,statsigBootupBlockingStartTime:t,renderStartTime:r,renderEndTime:s});const c=W.getAppStartTime();c&&A.DO_NOT_USE_measureLegacy({metricName:"time_origin_to_app_start",startTime:0,endTime:c},{environment:h,data:{sub_metrics:F.getTimeOriginToAppStartSubMetrics()}}),A.DO_NOT_USE_measureLegacy({metricName:"time_origin_to_prefetch_initiated",startTime:0,endTime:i},{environment:h}),K.state&&A.measure({metricName:"client.migrate_sqlite",startTime:K.state.startTime,endTime:K.state.endTime},{environment:h}),A.measure({metricName:"statsig_bootup_blocking",startTime:t,endTime:r},{environment:h,data:{timed_out:n,is_prewarmed_tab:G(h)}})},l=T.createElement(x,{environment:e,onMount:J?c:void 0});J?(Z??=L.createRoot(a),Z.render(l)):P.render(l,a,c)}I.initialize(h),await Q(h);const{startFlushing:X}=await Promise.resolve().then(n.bind(n,459225));return X(((e,t)=>{A.measure(e,{environment:h,preboot:!0,shouldSendIfStatsigNotInitialized:!0,shouldExcludeFromTimeline:!0,data:t})})),{transactionQueue:y,environment:h}}},280791:(e,t,n)=>{n.d(t,{D:()=>c});var r=()=>n(978879),o=()=>n(720665),i=()=>n(529543);const a=[];class s extends r().sS{constructor(e){super(a),this.DEFAULT_PAGE_VISIT_DATA=void 0,this.environment=void 0,this.environment=e,this.DEFAULT_PAGE_VISIT_DATA=(0,r().KX)()}async getPersonalizationData(){if("undefined"==typeof window)return{...this.DEFAULT_PAGE_VISIT_DATA};const e=await(0,i().getCookie)(this.environment,"notion_personalization");if(!e)return{...this.DEFAULT_PAGE_VISIT_DATA};const t=(0,o().$l)(e);return t&&(0,r().fF)(t)?t:{...this.DEFAULT_PAGE_VISIT_DATA}}async setPageVisitTrackerDataFromCrossOver(e){if("undefined"==typeof window)return;if(!(0,r().fF)(e))return;const t=await this.getPersonalizationData();for(const[n,o]of Object.entries(e))(0,r().bo)(n)&&(e[n]=Math.max(o,t[n]));await this.setPageVisitTrackerData(e)}async setPageVisitTrackerData(e){if("undefined"==typeof window)return;const t={...await this.getPersonalizationData()};for(const[n,i]of Object.entries(e))(0,r().bo)(n)&&(t[n]=(0,o().qE)(i,r().CB,r().iI));await(0,i().setCookie)(this.environment,{name:"notion_personalization",value:JSON.stringify(t)})}async incrementPageVisitCount(e){return Promise.resolve()}}function c(e){return new s(e)}},309770:(e,t,n)=>{n.d(t,{P:()=>m,U:()=>p});var r=()=>n(56366),o=()=>n(557155),i=()=>n(792002),a=()=>n(301421),s=()=>n(765957),c=()=>n(693202),l=()=>n(231297),d=()=>n(755199);function u(){const e=c().default.state;if("editing"===e.mode){const t=(0,o().H)(e.multiSelection);if(t&&(0,i().gE)(t.selection)){const e=t.store,n=a().n.findEditableWithStore(e);if(n){return e.getValue()?void 0:n}}}}function p(){return(0,r().K8)(u,[])}function m(e){const{currentUserSettingsStore:t}=s().default.state;t&&l().createAndCommit({userAction:"educationTooltipsActions.completePressSlashTooltip",environment:e,perform:e=>{d().mJ({userSettingsStore:t,transaction:e,data:{pressed_slash_tooltip:!0}})},canUndo:!0,userId:t.id})}},313633:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var r=()=>n(401497),o=()=>n(718827),i=()=>n(66913),a=n(474848);function s(e){const{top:t,right:n,onClick:s}=e,c=(0,r().IS)((e=>({buttonBackground:{position:"absolute",top:t??12,insetInlineEnd:n??12,width:22,height:22,borderRadius:"100%",background:e.background.elevated},button:{width:"100%",height:"100%",borderRadius:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"transparent"},buttonHovered:{background:e.buttonHoveredBackground},icon:{width:14,fill:e.icon.secondary}})),[t,n]);return(0,a.jsx)("div",{style:c.buttonBackground,children:(0,a.jsx)(o().Ay,{style:c.button,hoveredStyle:c.buttonHovered,onClick:s,children:(0,i().V)(c.icon)})})}},323914:(e,t,n)=>{n.d(t,{c:()=>i,y:()=>o});var r=()=>n(463830);const o=new(r().A),i=new(r().A)},340997:(e,t,n)=>{n.r(t),n.d(t,{AppRoot:()=>Gn});var r=n(296540),o=()=>n(366326),i=()=>n(976605),a=()=>n(312788),s=()=>n(560198),c=()=>n(662303),l=()=>n(69708),d=(n(898992),n(354520),()=>n(726637)),u=()=>n(591779),p=()=>n(496603),m=()=>n(106959),f=n(474848);function v(e){const t=(0,r.useRef)(new Map),n=(0,r.useCallback)((()=>{const n=Array.from(t.current.values()).filter((e=>e.isSpawned)),r=n.length-e.maxPreferredIFrames;if(r<=0)return;const o=n.filter((e=>!e.isVisible));o.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const e of o.slice(0,r))e.isSpawned=!1,e.onVisibilityChange(!1)}),[e.maxPreferredIFrames]),o=(0,r.useCallback)((e=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=t.current.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}n()}),[n]),i=(0,r.useRef)(void 0!==window.IntersectionObserver?new IntersectionObserver(o):null);(0,r.useEffect)((()=>()=>{i.current&&(i.current.disconnect(),i.current=null)}),[]);const a=(0,u().ZC)(e.maxPreferredIFrames);(0,r.useEffect)((()=>{a&&e.maxPreferredIFrames<a&&n()}),[n,e.maxPreferredIFrames,a]);const s=(0,r.useMemo)((()=>({track:(e,n)=>{i.current?(t.current.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:p().sg(n,50)}),i.current.observe(e)):m().mm.track(e,n)},untrack:e=>{i.current?(i.current.unobserve(e),t.current.delete(e)):m().mm.untrack(e)}})),[]);return(0,f.jsx)(m().jq.Provider,{value:s,children:e.children})}function g(e){let t=d().A.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}var h=()=>n(688149),b=()=>n(314529),S=()=>n(242422),y=()=>n(17022),w=()=>n(484714),A=()=>n(785082),k=()=>n(745875);function I({id:e,targetRenderPhase:t="all",samplePercent:n=1,children:o}){const i=(0,w().v3)(),a=(0,r.useCallback)(((e,r,o,a,s,c)=>{(0,k().rQ)(n)&&("all"!==t&&r!==t||(0,b().DO_NOT_USE_trackLegacy)(i,`${A().PX}.${e}`,{time:o,render_phase:r}))}),[i,t,n]),[s]=(0,r.useState)(y().e.withListenerIgnored((()=>S().default.checkGate({gateName:"client-performance-profiler"}))));return s?(0,f.jsx)(r.Profiler,{id:e,onRender:a,children:o}):(0,f.jsx)(f.Fragment,{children:o})}var _=()=>n(112995);var C=()=>n(346);function E(){return(0,C().kg)()?(0,f.jsx)(C().MG,{}):null}var x=()=>n(56366),T=()=>n(401497),P=()=>n(75435),L=()=>n(211419),U=()=>n(799954),M=(n(944114),n(803949),n(581454),()=>n(396896)),R=()=>n(406094),D=()=>n(901389),j=()=>n(597368),B=()=>n(939740),N=()=>n(676007),O=()=>n(505108),q=()=>n(89924),z=()=>n(132389);function W({items:e,selectType:t,selectAlignXAxis:n,selectedKeys:r,setSelectedKeys:o}){const i=e.map(((i,a)=>{const s=i.key;return(0,f.jsx)(F,{text:i.text,description:i.description,selected:r[s]??!1,isBelowButtons:Boolean(i.showBelowButtons),isLastItem:a===e.length-1,onSelect:e=>{var n;null===(n=i.onSelect)||void 0===n||n.call(i,e),o("radio"===t?e=>{const t={...e};return Object.keys(t).forEach((e=>{t[e]=e===i.key})),t}:t=>({...t,[s]:e}))},selectType:t,selectAlignXAxis:n},s)}));return(0,f.jsxs)(M().VP,{children:[(0,f.jsx)(z().A,{size:5}),i]})}function F({text:e,description:t,selected:n,onSelect:o,isBelowButtons:i,selectType:a="checkbox",selectAlignXAxis:s,isLastItem:c}){const l=(0,r.useCallback)((()=>{"radio"===a?null==o||o(!0):null==o||o(!n)}),[a,o,n]);return(0,f.jsx)(O().a,{label:e,description:t,isSelected:n,value:"select_item",width:i?"hug":"fill",colorVariant:i?"secondary":"primary",style:{marginBottom:c?0:12,...i?{justifyContent:"center",border:"none"}:{}},selectType:a,selectAlignXAxis:s,onChange:l})}const K=function(){const e=(0,r.useId)(),t=(0,r.useId)(),{open:o,innerStyle:i,keepFocus:a,mode:s,message:c,debugInfo:u,description:m,items:v,selectionItems:g,showCancel:h,showCloseButton:b,renderDraftCommentIcon:y,icon:w,allowCopy:A,selectType:k,selectAlignXAxis:I}=(0,x().K8)((()=>{const{open:e,innerStyle:t,keepFocus:n,mode:r,message:o,debugInfo:i,description:a,items:s,selectionItems:c,showCancel:l,showCloseButton:d,shouldRenderDraftCommentIcon:u,icon:p,allowCopy:m,selectType:f,selectAlignXAxis:v}=j().A.state;return{open:e,innerStyle:t,keepFocus:n,mode:r,message:o,debugInfo:i,description:a,items:s,selectionItems:c,showCancel:l,showCloseButton:d,renderDraftCommentIcon:u,icon:p,allowCopy:m,selectType:f,selectAlignXAxis:v}}),[]),_=(0,r.useCallback)((()=>{D().zw();const{handleCancel:e}=j().A.state;return e&&e(),!1}),[]),C=(0,r.useCallback)((()=>{const{disableBackgroundDismiss:e}=j().A.state;e||_()}),[_]),E=(0,n(59226).X)("update_dialog_styles"),P=(0,T().IS)((e=>{const t={width:"100%",...!E&&{marginTop:8}};return{plainButton:{...t,marginBottom:"-12px",justifyContent:"center",borderRadius:6},button:{...t,borderRadius:6},description:{color:e.text.secondary,...!E&&{paddingTop:6,paddingBottom:6},textWrap:"pretty"},debugMessage:{paddingTop:10,fontSize:12,color:e.text.tertiary,textAlign:m?"unset":"center"},overflowWrap:{overflowWrap:"break-word"},modal:{overflow:"hidden",width:"wide"===s?406:324,marginInlineStart:24,marginInlineEnd:24,padding:20,boxShadow:e.shadowLG,background:e.background.elevated,borderRadius:12,fontSize:16,alignItems:"center",justifyContents:"center",...i},message:{textAlign:m?"unset":"center",fontWeight:n(284371).Wy.semibold,textWrap:"pretty"},iconContainer:{width:"100%",display:"flex",justifyContent:"center",marginBottom:10,fill:e.icon.secondary},buttonContainer:{...E?{padding:0,gap:8}:{padding:0}}}}),[m,i,s,E]),[L,U]=(0,r.useState)({});(0,r.useEffect)((()=>{const e={};null==g||g.forEach((t=>{e[t.key]=t.preSelected??!1})),U(e)}),[g]);const M=(0,r.useCallback)((()=>{const r=v.map(((e,t)=>({key:t,render:t=>"plain"===e.buttonType?(0,f.jsx)(n(631524).p,{size:"lg",ariaLabel:e.ariaLabel,hovered:t.focused,colorPalette:e.color,style:P.plainButton,className:e.className,...t,children:e.label||"Label"}):"solid"===e.buttonType?"gray"===e.color?(0,f.jsx)(n(373009).E,{size:"lg",ariaLabel:e.ariaLabel,hovered:t.focused,style:P.button,className:e.className,...t,children:e.label||"Label"}):(0,f.jsx)(n(160432).A,{size:"lg",ariaLabel:e.ariaLabel,hovered:t.focused,style:P.button,className:e.className,colorPalette:"red"===e.color?"red":"blue",...t,children:e.label||"Label"}):(0,f.jsx)(R().A,{size:e.isSmall?"sm":"lg",ariaLabel:e.ariaLabel,hovered:t.focused,style:P.button,colorPalette:"red"===e.color?"red":"blue"===e.color?"blue":void 0,className:e.className,...t,children:e.label||"Label"}),action:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),e.onAccept&&(e.onAccept(g?L:void 0),D().zw())}})));h&&r.push({key:"cancel",render:e=>(0,f.jsx)(R().A,{size:"lg",hovered:e.focused,style:P.button,...e,children:(0,f.jsx)(l().sA,{id:"genericDialogModal.cancelButton.label",defaultMessage:"Cancel"})}),action:()=>{_()}});const o=(null==g?void 0:g.filter((e=>!e.showBelowButtons)))??[],i=o.length>0?(0,f.jsx)(W,{items:o,selectType:k,selectAlignXAxis:I,selectedKeys:L,setSelectedKeys:U}):void 0,a=(null==g?void 0:g.filter((e=>e.showBelowButtons)))??[],s=a.length>0?(0,f.jsx)(W,{items:a,selectType:k,selectAlignXAxis:I,selectedKeys:L,setSelectedKeys:U}):void 0;let E;u&&(null!=u&&u.messagePrefix?E=`${u.messagePrefix}: ${u.message}`:d().A.isAdminMode&&(E=(0,f.jsx)(l().sA,{id:"dialogRenderer.debugMessage.messagePrefix",defaultMessage:"Debug message: {message}",values:{message:u.message}})));const x=S().default.checkGate({gateName:"update_dialog_styles"});return(0,f.jsx)(n(329661).A,{capture:!0,preventType:n(611648).A.All,children:(0,f.jsxs)("div",{style:P.overflowWrap,children:[b?(0,f.jsx)(n(313633).A,{onClick:C}):void 0,y?(0,f.jsx)(n(254131).j,{}):void 0,w?(0,f.jsx)("div",{style:P.iconContainer,children:w}):void 0,A?(0,f.jsx)(n(417553).k,{enable:!0,shortcuts:{copy:p().D_},debugName:"DialogRenderer.allowCopy"}):void 0,x?(0,f.jsxs)(n(699143).Y1,{direction:"vertical",gap:24,children:[c?(0,f.jsx)("div",{style:P.message,id:e,children:c}):void 0,E?(0,f.jsx)("div",{style:P.debugMessage,children:E}):void 0,m?(0,f.jsx)("div",{style:P.description,id:t,children:m}):void 0,i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(z().A,{size:20}),i,(0,f.jsx)(z().A,{size:8})]}):void 0,(0,f.jsx)(B().Ay,{type:B().Oh.Vertical,priority:1,initialFocus:0,resetFocusOnMouseOut:!0,sections:[{key:"dialog",render:e=>(0,f.jsx)(q().A,{topBorder:!1,disableMobileBorders:!0,style:P.buttonContainer,...e}),items:r}]}),s||void 0]}):(0,f.jsxs)(f.Fragment,{children:[c?(0,f.jsx)("div",{style:P.message,id:e,children:c}):void 0,E?(0,f.jsx)("div",{style:P.debugMessage,children:E}):void 0,m?(0,f.jsx)("div",{style:P.description,id:t,children:m}):void 0,i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(z().A,{size:20}),i,(0,f.jsx)(z().A,{size:8})]}):void 0,(0,f.jsx)(B().Ay,{type:B().Oh.Vertical,priority:1,initialFocus:0,resetFocusOnMouseOut:!0,sections:[{key:"dialog",render:e=>(0,f.jsx)(q().A,{topBorder:!1,disableMobileBorders:!0,style:P.buttonContainer,...e}),items:r}]}),s?(0,f.jsx)(f.Fragment,{children:s}):void 0]})]})})}),[v,h,g,k,I,L,u,P.overflowWrap,P.iconContainer,P.message,P.debugMessage,P.description,P.plainButton,P.button,P.buttonContainer,b,C,y,w,A,c,e,m,t,_]);return(0,f.jsx)(N().a,{ariaLabelledBy:e,ariaDescribedBy:t,open:o,keepFocus:a,overlayZIndex:9999999,onDismiss:C,preventHideChildrenWhileOpening:!0,innerStyle:P.modal,render:M})};var V=()=>n(98126),$=()=>n(575650),H=()=>n(991699),G=()=>n(545206);const J=function(){const e=(0,x().O$)(H().A);return(0,f.jsx)(N().a,{open:e.open,render:()=>(0,f.jsx)(Q,{}),overlayZIndex:9999})};function Z(e){return{display:"flex",alignItems:"center",fontSize:14,color:e.text.secondary}}function Q(){const e=(0,T().DP)(),t=((0,w().v3)(),(0,x().O$)(H().A)),{targetRecordId:n}=t,r=(0,x().K8)((()=>function(e){return void 0!==e&&Boolean(G().A.state[e])}(n)),[n]);return t.open?(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:d().A.isMobile?"300px":"100%"},children:[(0,f.jsxs)("div",{style:Z(e),children:[t.message,(0,f.jsx)(V().A,{style:{marginInlineStart:6}})]}),r&&n?(0,f.jsx)($().A,{targetRecordId:n,style:{marginTop:10}}):void 0]}):null}var X=()=>n(49210),Y=()=>n(38337),ee=()=>n(567121),te=()=>n(100584),ne=()=>n(877050),re=()=>n(175320),oe=()=>n(661179);function ie(){const e=(0,r.useRef)(null),t=(0,T().eP)(),n=(0,T().IS)((()=>({container:{display:"block",position:"fixed",visibility:"hidden",overflowY:"scroll",width:20,height:20}})),[]);return(0,r.useEffect)((()=>{const n=e.current;if(!n)return;const r=new ResizeObserver((e=>{const[n]=e,r=20-n.contentRect.width;r!==oe().A.state&&(oe().A.setState(r),re().u7(t))}));return r.observe(n),()=>{r.unobserve(n)}}),[t]),(0,f.jsx)("div",{style:n.container,ref:e})}function ae({children:e}){const t=(0,w().v3)(),n=(0,T().eP)();(0,r.useEffect)((()=>{const{mobileNative:e}=t;null==e||e.markTransitionReady({environment:t,type:"mount"})}),[t]);const o="light"===n?Y().fRh:Y().Rsl,i=(0,C().kg)(),a=(0,C().n_)(),s=(0,C().lC)(),l=(0,x().K8)((()=>{var e;const n=t.RouterStore.state.route;return Boolean(null===(e=P().A.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)||(0,ne().Em)(n.name)}),[t]),u={inert:(0,x().K8)((()=>!d().A.isMobile&&te().A.state.openModals.size>0),[])?"true":null},p=(0,T().IS)((e=>({root:{...(0,U().xH)(c().locale),color:e.text.primary,WebkitFontSmoothing:"auto",backgroundColor:l?"rgba(0, 0, 0, 0)":e.background.primary,transition:"height 0.1s ease",...i&&a&&s&&{height:`calc(100% - ${ee().ls}px)`}},content:{height:"100%"}})),[i,a,s,l]);return(0,f.jsxs)("div",{style:p.root,className:["notion-app-inner",o].join(" "),children:[(0,f.jsx)(L().Sf,{children:(0,f.jsx)("div",{style:p.content,...u,children:e})}),(0,f.jsx)(K,{}),(0,f.jsx)(J,{}),(0,f.jsx)(X().b,{}),(0,f.jsx)(ie,{})]})}var se=()=>n(922644),ce=()=>n(651784),le=()=>n(427704),de=()=>n(530199),ue=()=>n(502492),pe=()=>n(939768),me=()=>n(853113),fe=()=>n(44551);var ve=()=>n(165358);let ge="lastProtocolUrlDeduplicationId";var he=()=>n(209660),be=()=>n(5705),Se=()=>n(836285),ye=()=>n(555267),we=()=>n(645873);const Ae=new(we().O2)("desktopEmailConfirmPage",(()=>n.e(32568).then(n.bind(n,386428)))),ke=(0,we()._h)(Ae,(e=>e.default));var Ie=()=>n(236005),_e=()=>n(969339),Ce=()=>n(404482);function Ee(e){const{preventFrontRedirect:t}=e,n=(0,w().v3)(),{pathname:r,search:o,hash:i}=window.location;if(!t&&(0,Ce().D8)(n,r)){const e=o.length>0?`${o}&${Ie().Kr}=1`:`?${Ie().Kr}=1`;return window.location.href=r+e+i,null}return(0,f.jsx)(_e().C6,{isSignup:!n.currentUser.isLoggedIn()})}const xe=function(e){const t={position:"absolute",top:0,left:0,bottom:0,right:0};return(0,w().v3)().currentUser.isLoggedIn()?(0,f.jsx)("div",{style:t,children:(0,f.jsx)(n(378765).A,{style:{width:"100%",height:"100%"},legacySpinnerSize:n(373728).Kh,showSpinnerTimeout:500})}):null};var Te=()=>n(100622),Pe=()=>n(767877),Le=()=>n(296798);const Ue=function({redirect:e,callbackType:t}){const o=(0,T().DP)(),i=(0,w().v3)();return(0,r.useEffect)((()=>{Me({redirect:e,environment:i,callbackType:t})}),[i,e,t]),(0,f.jsxs)(n(217753).A,{children:[(0,f.jsx)("div",{style:{color:o.text.primary},children:"nativemailredirect"===t?(0,f.jsx)(l().sA,{id:"webApp.redirectingToMailDesktop.message",defaultMessage:"Redirecting to your Notion Mail app"}):"nativecalendarredirect"===t?(0,f.jsx)(l().sA,{id:"webApp.redirectingToCalendarDesktop.message",defaultMessage:"Redirecting to your Notion Calendar app"}):(0,f.jsx)(l().sA,{defaultMessage:"Redirecting to your Notion app",id:"webApp.redirectingToDesktop.message"})}),(0,f.jsx)(Le().A,{onClick:()=>Me({redirect:e,environment:i,callbackType:t}),style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:o.text.tertiary},children:(0,f.jsx)(l().sA,{defaultMessage:"If you werent redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,f.jsx)(Le().A,{href:e,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:Te().Tj.uiGray},children:(0,f.jsx)(l().sA,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})};function Me({redirect:e,environment:t,callbackType:n}){(0,Pe().e)({url:e,environment:t,callbackType:n})}var Re=()=>n(272006);const De=new(we().O2)("CreatorProfile",(()=>Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(42838),n.e(27634),n.e(74728),n.e(78205),n.e(90564),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(37384),n.e(31842),n.e(15685),n.e(37160),n.e(39457),n.e(53641),n.e(91629),n.e(20171),n.e(40817),n.e(40200)]).then(n.bind(n,764470)))),je=(0,we()._h)(De,(e=>e.CreatorProfile)),Be={CreatorProgram:new(we().O2)("CreatorProgram",(()=>Promise.all([n.e(34709),n.e(58251)]).then(n.bind(n,115147))))},Ne=(0,we()._h)(Be.CreatorProgram,(e=>e.CreatorProgram));var Oe=()=>n(10289);const qe=new(we().O2)("Onboarding",(async()=>Promise.all([n.e(9773),n.e(36556),n.e(40537),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(58550),n.e(22900),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(69144),n.e(74562),n.e(37384),n.e(91598),n.e(48046),n.e(13955),n.e(45147),n.e(92865),n.e(58209),n.e(90638),n.e(61016),n.e(98942),n.e(45016)]).then(n.bind(n,342762)))),ze=(0,we()._h)(qe,(e=>e.Onboarding)),We=new(we().O2)("settingsConsole",(async()=>await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(42838),n.e(27634),n.e(49889),n.e(20108),n.e(97959),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(12341),n.e(96402),n.e(10442),n.e(46080),n.e(74562),n.e(47160),n.e(91598),n.e(48046),n.e(42056),n.e(76677),n.e(31842),n.e(28058),n.e(97859),n.e(70442),n.e(37160),n.e(76690),n.e(91629),n.e(61858),n.e(19596)]).then(n.bind(n,644980)))),Fe=(0,we()._h)(We,(e=>e.OrganizationSettingsConsole));var Ke=()=>n(682497);const Ve=new(we().O2)("githubStudentPack",(()=>Promise.all([n.e(34709),n.e(54564)]).then(n.bind(n,708682)))),$e=(0,we()._h)(Ve,(e=>e.default));var He=()=>n(710144);const Ge=new(we().O2)("LocalizedTemplates",(async()=>{const{default:e}=await Promise.all([n.e(9773),n.e(37353),n.e(58550),n.e(74728),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(70359),n.e(16434),n.e(37384),n.e(55639),n.e(49175),n.e(27991),n.e(28656),n.e(37079),n.e(21912),n.e(20171),n.e(69534),n.e(79239)]).then(n.bind(n,881532));return{LocalizedTemplates:e}})),Je=(0,we()._h)(Ge,(e=>e.LocalizedTemplates)),Ze={AddAnotherAccountLoginPage:new(we().O2)("AddAnotherAccountLoginPage",(async()=>await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(20488)]).then(n.bind(n,140862))))},Qe=(0,we()._h)(Ze.AddAnotherAccountLoginPage,(e=>e.default)),Xe=new(we().O2)("meetingNotification",(()=>Promise.all([n.e(75134),n.e(44711),n.e(53321),n.e(9073),n.e(58427)]).then(n.bind(n,251755)))),Ye=(0,we()._h)(Xe,(e=>e.MeetingNotificationRoute));var et=()=>n(171510);const tt=new(we().O2)("StartupsApplication",(async()=>Promise.all([n.e(34709),n.e(47057)]).then(n.bind(n,346780)))),nt=(0,we()._h)(tt,(e=>e.default)),rt={LennyApplication:new(we().O2)("LennyApplication",(()=>n.e(86279).then(n.bind(n,599059))))},ot=(0,we()._h)(rt.LennyApplication,(e=>e.LennyApplication));var it=()=>n(765957),at=()=>n(961581);const st=new(we().O2)("StudentGroupSignup",(async()=>Promise.all([n.e(34709),n.e(84969)]).then(n.bind(n,544719)))),ct=(0,we()._h)(st,(e=>e.default));var lt=()=>n(662453),dt=()=>n(650829),ut=()=>n(557297),pt=()=>n(762014);function mt(e){return(0,f.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,insetInlineEnd:21,zIndex:1,display:e?void 0:"none"}})}const ft=function(){const e=(0,w().v3)(),{currentUser:t}=e,n=(0,x().K8)((()=>t.isLoggedIn()),[t]),o=(0,x().K8)((()=>it().default.state.inAppCalloutStore),[]),i="light"===(0,T().eP)();(0,r.useEffect)((()=>{n&&(o.getCalloutVisibility("customer_io").canShow?i?pt().A.state.suppressReason===pt().e.IN_APP_CALLOUT_CONFLICT?pt().A.setState({...pt().A.state,isVisible:!0,suppressReason:void 0}):pt().A.setState({...pt().A.state,suppressReason:void 0}):pt().A.setState({isVisible:!1,suppressReason:pt().e.DARK_MODE}):pt().A.setState({isVisible:!1,suppressReason:pt().e.IN_APP_CALLOUT_CONFLICT}))}),[o,n,i]);const a=(0,x().K8)((()=>pt().A.state.isVisible&&o.getCalloutVisibility("customer_io").canShow),[o]);return(0,r.useEffect)((()=>{if(a)return o.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{o.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[o,a]),n?mt(!!a):null};var vt=()=>n(309770),gt=()=>n(953006);const ht=(0,l().YK)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function bt(e){return(0,f.jsx)("div",{style:{background:Te().IF.whiteWithAlpha(.1),padding:3,paddingInlineEnd:8,paddingInlineStart:8,marginInlineEnd:6,marginInlineStart:6,borderRadius:4},children:e.char})}function St(){const e=(0,w().v3)(),t=vt().U();return(0,x().K8)((()=>{const{currentUserSettingsStore:e}=it().default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||d().A.isMobile||!t?null:(0,f.jsx)(gt().k,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,f.jsx)(l().sA,{...ht.pressSlashHeader,values:{slashkey:(0,f.jsx)(bt,{char:"/"})}}),content:null,onCloseClick:()=>vt().P(e)})}const yt=new(we().O2)("InPageFind",(async()=>Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(28958)]).then(n.bind(n,377967)))),wt=(0,we()._h)(yt,(e=>e.InPageFind)),At=new(we().O2)("KeyboardShortcutsModal",(()=>n.e(19512).then(n.bind(n,775361)))),kt=(0,we()._h)(At,(e=>e.KeyboardShortcutsModal)),It=new(we().O2)("ForkPageModalWrapper",(async()=>await Promise.all([n.e(55997),n.e(37384),n.e(27761)]).then(n.bind(n,700521)))),_t=(0,we()._h)(It,(e=>e.ForkPageModalWrapper)),Ct=new(we().O2)("SecondarySidebar",(async()=>await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(396),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(26942),n.e(52786),n.e(95281)]).then(n.bind(n,918048)))),Et=(0,we()._h)(Ct,(e=>e.SecondarySidebar)),xt=new(we().O2)("SpaceSettings",(async()=>Promise.all([n.e(75134),n.e(99223),n.e(9304),n.e(9773),n.e(36556),n.e(40537),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(62475),n.e(3151),n.e(98629),n.e(58550),n.e(67539),n.e(42838),n.e(22900),n.e(27634),n.e(85128),n.e(49889),n.e(20108),n.e(95555),n.e(87249),n.e(71621),n.e(92845),n.e(56369),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(58636),n.e(78405),n.e(33675),n.e(74562),n.e(47160),n.e(37384),n.e(91598),n.e(48046),n.e(3259),n.e(13955),n.e(42056),n.e(3165),n.e(76677),n.e(31842),n.e(43223),n.e(45147),n.e(15517),n.e(94995),n.e(98339),n.e(55639),n.e(1966),n.e(35738),n.e(6642),n.e(55776),n.e(51444),n.e(21727),n.e(58209),n.e(13297),n.e(4802),n.e(65197),n.e(81768),n.e(94300),n.e(62032),n.e(72122),n.e(32487),n.e(28058),n.e(90638),n.e(75422),n.e(97859),n.e(50856),n.e(65014),n.e(49175),n.e(36359),n.e(2752),n.e(11571),n.e(92924),n.e(42525),n.e(25204),n.e(52273),n.e(52986),n.e(45732),n.e(46817),n.e(70442),n.e(28656),n.e(37160),n.e(30443),n.e(9426),n.e(76690),n.e(63248),n.e(39457),n.e(21912),n.e(80668),n.e(12507),n.e(6626),n.e(26497),n.e(61016),n.e(91629),n.e(61858),n.e(63053),n.e(34399),n.e(89379),n.e(34974),n.e(75332),n.e(95103),n.e(75681)]).then(n.bind(n,524663)))),Tt=(0,we()._h)(xt,(e=>e.SpaceSettings));var Pt=()=>n(549500);const Lt=new(we().O2)("TranscriptionBlockDemoVideoModal",(async()=>await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(25151),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(2681),n.e(4902),n.e(14889)]).then(n.bind(n,448529)))),Ut=(0,we()._h)(Lt,(e=>e.TranscriptionBlockDemoVideoModal));var Mt=()=>n(802697),Rt=()=>n(753035),Dt=()=>n(614949),jt=()=>n(68465),Bt=()=>n(574506),Nt=()=>n(329443),Ot=()=>n(877051),qt=()=>n(532688),zt=()=>n(449789),Wt=()=>n(965142);const Ft=new(we().O2)("Marketplace",(async()=>{const{Marketplace:e}=await Promise.all([n.e(9773),n.e(37353),n.e(58550),n.e(74728),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(70359),n.e(16434),n.e(37384),n.e(55639),n.e(49175),n.e(27991),n.e(28656),n.e(37079),n.e(21912),n.e(20171),n.e(69534),n.e(79239)]).then(n.bind(n,728476));return{Marketplace:e}})),Kt=(0,we()._h)(Ft,(e=>e.Marketplace));var Vt=()=>n(255824),$t=()=>n(869562),Ht=()=>n(644914),Gt=()=>n(749687),Jt=()=>n(792415),Zt=()=>n(430483),Qt=()=>n(404141),Xt=()=>n(539412),Yt=(n(16280),()=>n(906745)),en=()=>n(852832),tn=()=>n(559506);async function nn(e,t){const n=await tn().callApi({eventName:"stripeGetTestClock",environment:t,data:{spaceId:e}});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function rn(e){const{environment:t,spaceId:n,advanceTestClockArgument:r}=e;if(r)return"number"==typeof r?r:"function"==typeof r?await async function(e){const{environment:t,spaceId:n,callback:r}=e,o=await nn(n,t);if(o)return r(o)}({environment:t,spaceId:n,callback:r}):"object"==typeof r?await async function(e){const{environment:t,spaceId:n,durationLike:r}=e,o=await nn(n,t);if(!o)return;const i=Yt().c9.fromSeconds(o),a=Yt().dw.fromDurationLike(r);return i.plus(a).toSeconds()}({environment:t,spaceId:n,durationLike:r}):void 0}const on={WorkersPage:new(we().O2)("WorkersPage",(async()=>await n.e(56213).then(n.bind(n,135855))))},an=(0,we()._h)(on.WorkersPage,(e=>e.WorkersPage));var sn=()=>n(563615);const cn={WorkflowTemplatesBuilderNotInProd:new(we().O2)("WorkflowTemplateBuilderNotInProd",(async()=>await Promise.all([n.e(9773),n.e(92845),n.e(48486),n.e(46414),n.e(67494),n.e(94611)]).then(n.bind(n,213183)))),CollectionItemNameConfigMenuItemNotInProd:new(we().O2)("CollectionItemNameConfigMenuItemNotInProd",(async()=>await n.e(12062).then(n.bind(n,666657))))};(0,we()._h)(cn.WorkflowTemplatesBuilderNotInProd,(e=>e.WorkflowTemplatesBuilderNotInProd)),(0,we()._h)(cn.CollectionItemNameConfigMenuItemNotInProd,(e=>e.CollectionItemNameConfigMenuItemNotInProd));var ln=()=>n(726562);const dn={FullPageAIChatLoader:new(we().O2)("FullPageAIChatLoader",(()=>Promise.all([n.e(55373),n.e(36192),n.e(87249),n.e(71621),n.e(88924),n.e(89296),n.e(9294),n.e(11676),n.e(91256),n.e(58596)]).then(n.bind(n,116882))))},un=(0,we()._h)(dn.FullPageAIChatLoader,(e=>e.FullPageAIChatLoader));var pn=()=>n(80157),mn=()=>n(929219),fn=()=>n(229833);var vn=()=>n(807054),gn=()=>n(466088),hn=()=>n(311337),bn=()=>n(362749),Sn=()=>n(817411),yn=()=>n(923455),wn=()=>n(82648),An=()=>n(479349);const kn=r.memo(In);function In(){const e=(0,w().v3)(),{isPhone:t,isTablet:o}=(0,w().Y0)(),i=(0,x().K8)((()=>(0,Ht().KB)(e)),[e]),a=(0,n(155959).T)("supportsNativeHome"),s=(0,x().K8)((()=>(0,hn().y)(e)),[e]);(0,r.useEffect)((()=>{(0,wn().yd)("sidebar_loader_mounted")}),[]);const c=function({isPhone:e,isTablet:t,isViewingAsPublicShareLink:n}){return e||t&&n}(l={isPhone:t,isTablet:o,isViewingAsPublicShareLink:s,supportsMobileNativeHome:a})?function({supportsMobileNativeHome:e}){return e}(l)?"native-home":"mobile-sidebar":"browser-sidebar";var l;(0,r.useEffect)((()=>{const{enableStrictRenderCompletion:t}=(0,n(51260).b8)(e.currentUser.id);t&&"browser-sidebar"===c&&it().default.addPendingCriticalRender("sidebar")}),[c,e.currentUser.id]);return(0,f.jsx)(yn().Lp,{children:(()=>{switch(c){case"native-home":return(0,f.jsx)(n(824622).As,{});case"mobile-sidebar":return(0,f.jsx)(bn().Nd,{});case"browser-sidebar":return(0,f.jsx)(_n,{isExpanded:i});default:return null}})()})}function _n({isExpanded:e}){const t=(0,w().v3)(),n=t.device.isElectronMac,o=(0,yn().Rx)(),i=Boolean(o);(0,An().Jf)({sidebarState:o});const a=(0,x().K8)((()=>(0,gn().w)(t)),[t]),s=(0,x().K8)((()=>(0,hn().y)(t)),[t]);!function(e){const{isLoaded:t,isExpanded:n,isOnPublicPage:o,isOnPublicShareLinkPage:i}=e,a=(0,w().v3)(),s=(0,x().K8)((()=>(0,vn().isPrewarmedTabInitialRender)(a)),[a]);(0,r.useEffect)((()=>{if(t||s)return;const e=setTimeout((()=>{var e;const t={level:"error",from:"SidebarContentContainer",type:"sidebarLoadingTimeout",error:{message:`Sidebar took longer than ${Cn/1e3} seconds to load.`},data:{miscDataToConvertToString:{isOnline:mn().A.state.online,hasCurrentSpaceStore:Boolean(it().default.state.sidebarSpaceStore),hasCurrentSpaceViewStore:Boolean(it().default.state.sidebarSpaceViewStore),hasCurrentUserRootStore:Boolean(it().default.state.currentUserRootStore),hasCurrentUserSettingsStore:Boolean(it().default.state.currentUserSettingsStore),documentVisibilityState:document.visibilityState,isOnPublicPage:o,isOnPublicShareLinkPage:i}}};var r,s;fe().electronApi?(r=t,null===fe().electronApi||void 0===fe().electronApi||null===(s=fe().electronApi.logErrorForOffline)||void 0===s||s.call(fe().electronApi,{...r,data:r.data?(0,fn().iX)(r.data):void 0})):ve().log(t),(0,wn().Sz)({environment:a,reason:"client_deadline_exceeded",is_expanded:n,spaceId:null===(e=it().default.state.sidebarSpaceStore)||void 0===e?void 0:e.id})}),Cn);return()=>{clearTimeout(e)}}),[t,n,o,i,a,s])}({isLoaded:i,isExpanded:e,isOnPublicPage:a,isOnPublicShareLinkPage:s});const c=(0,r.useCallback)((()=>(0,f.jsx)(Sn().A,{skipFadeinDelay:!0})),[]),{isTablet:l}=(0,w().Y0)();return(0,f.jsx)(bn().YZ,{isElectronMac:n,isTablet:l,isExpanded:e,renderLoading:c,forceRenderLoading:!i&&!a&&!s})}const Cn=9e4;var En=()=>n(949054),xn=()=>n(564884),Tn=()=>n(718827);const Pn={viewBox:"0 0 20 20",fittedViewBox:"1.87 3.47 16.26 12.66",directional:!0,svg:(0,f.jsx)("path",{d:"M12.231 4.969A.875.875 0 1 1 13.47 3.73l4.4 4.4a.875.875 0 0 1 0 1.238l-4.4 4.4a.875.875 0 1 1-1.238-1.238l2.906-2.906H6a2.375 2.375 0 1 0 0 4.75h1.42a.875.875 0 0 1 0 1.75H6a4.125 4.125 0 1 1 0-8.25h9.138z"})},Ln=(0,n(340498).wt)("arrowUTurnUpRightFill",Pn);var Un=()=>n(145214);function Mn(){const e=(0,w().v3)(),t=(0,x().K8)((()=>(0,Ht().KB)(e)),[e]),n=(0,x().O$)(Gt().sidebarWidthStore),[o,i]=(0,r.useState)(!1),a=(0,r.useRef)(null),s=(0,T().IS)((e=>({container:{background:t?"light"===e.mode?e.background.secondary:e.background.elevated:void 0,height:68,position:"fixed",top:0,insetInlineStart:0,insetInlineEnd:0,bottom:0,zIndex:1e3},skipLink:{position:"absolute",insetInlineStart:12,top:12,width:200,height:48,overflow:"hidden",zIndex:9999,padding:12,background:e.blueButtonBackground,color:"white",textAlign:"center",textDecoration:"none",borderRadius:16},buttonHoveredStyle:{background:e.blueButtonHoveredBackground},buttonPressedStyle:{background:e.blueButtonPressedBackground}})),[t]);return(0,f.jsx)(Un().A,{tag:"div",animate:{width:n,translateY:o?0:-100},style:s.container,className:"notion-print-ignore",children:(0,f.jsx)(Tn().Ay,{style:s.skipLink,hoveredStyle:s.buttonHoveredStyle,pressedStyle:s.buttonPressedStyle,href:"#main",id:"skip-to-content",ref:a,onClick:t=>{const n=0===t.detail||0===t.screenX&&0===t.screenY,r=document.getElementById("main");if(r){const e=(0,En().Kr)(r);e.length>0&&e[0].focus()}i(!1),(0,xn().u)({environment:e,event:{eventName:"skip_to_content_click",eventProperties:{user_navigation_type:n?"keyboard":"mouse"}}})},onFocus:()=>{i(!0)},onBlur:()=>{i(!1)},children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,f.jsx)(l().sA,{defaultMessage:"Skip to content",id:"skipToContent.skipToContent"}),Ln({width:20})]})})})}const Rn=(0,we()._h)(new(we().O2)("NotionBanners",(()=>Promise.all([n.e(6346),n.e(76022)]).then(n.bind(n,276022)))),(e=>e.default)),Dn=new(we().O2)("NotionModals",(()=>Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(58550),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(55162),n.e(69144),n.e(12341),n.e(96402),n.e(91598),n.e(48046),n.e(49175),n.e(60319)]).then(n.bind(n,121432)))),jn=(0,we()._h)(Dn,(e=>e.default));function Bn({routerState:e}){const t=(0,w().v3)();(0,r.useEffect)((()=>{var e;if(null!==(e=t.mobileNative)&&void 0!==e&&e.api.appComponentMountState)return t.mobileNative.api.appComponentMountState(!0),()=>{var e;null!==(e=t.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&t.mobileNative.api.appComponentMountState(!1)}}),[t]);const{route:o}=e,i=(0,x().O$)(it().AppStoreMainEditorCurrentBlockStore),a=(0,x().K8)((()=>Jt().A.state.publicPageData),[]),{shouldShowSidebar:s,shouldShowFrame:c,shouldShowError:l,shouldRedirectFromHome:u}=(0,x().K8)((()=>(0,Dt().X)(t)),[t]),p=(0,x().K8)((()=>"page"===o.name&&Rt().A.state.open&&(0,Nt().K1)(Rt().A.state.blockStore)),[o.name]),m=(0,Xt().x9)(),v=(0,x().K8)((()=>{const{sidebarSpaceStore:e}=it().default.state,t=null==e?void 0:e.getModel();return void 0===t||t.isTranscriptionEnabled()}),[]),g=(0,x().K8)((()=>{const{device:e}=t;return"chat"!==o.name&&("marketplace"!==o.name&&("meet"!==o.name&&("agent"===o.name?Boolean(o.workflowViewType):"ai"!==o.name&&"workers"!==o.name&&(!ln().eX.state&&(!ln().tA.state&&(!ln().Zl.state&&(!m&&Zt().zD.shouldShowAssistantInCorner(e))))))))}),[t,m,o]),b=(0,x().K8)((()=>{const{device:e}=t;return!!e.isMobileNative&&("page"===o.name?Zt().zD.isXMLAssistantEnabled():void 0)}),[t,o.name]),S=(0,x().K8)((()=>s&&!(0,Ht().tv)(t)&&Gt().sidebarOpenStore.state),[t,s]),y=(0,x().K8)((()=>(0,Bt().t)()),[]),A=(0,x().K8)((()=>(0,jt().ZE)(void 0)),[]),k=(0,x().K8)((()=>it().default.isInitialRenderComplete()),[]),I=(0,Vt().a)(),_=(0,Ot().V)();return function(){const e=["local","staging","development"].includes("production"),t=(0,w().v3)();(0,r.useEffect)((()=>{e&&((0,en().exposeDebugValue)("refreshTestClock",(async()=>{var e;const n=null===(e=it().default.state.sidebarSpaceStore)||void 0===e?void 0:e.id;if(n){const e=await nn(n,t);if(e){const t=Yt().c9.fromSeconds(e);console.log(`Test clock time is ${t.toString()} (${e} seconds)`)}}})),(0,en().exposeDebugValue)("advanceTestClock",(async e=>{var n;if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const r=null===(n=it().default.state.sidebarSpaceStore)||void 0===n?void 0:n.id;if(!r)return;const o=await rn({environment:t,spaceId:r,advanceTestClockArgument:e});o&&await tn().callApi({eventName:"stripeAdvanceTestClock",environment:t,data:{spaceId:r,epochSeconds:o}})})))}),[e,t])}(),(0,f.jsxs)(pn().A,{children:[(0,f.jsx)(Mn,{}),s?(0,f.jsx)(kn,{}):void 0,c&&(i||I||"team"===o.name||"meet"===o.name||"posts"===o.name)?(0,f.jsx)(ln().Ay,{routerState:e}):void 0,I||"chat"!==o.name?void 0:(0,f.jsx)(un,{route:o}),I||"agent"!==o.name?void 0:(0,f.jsx)(sn().Di,{routerState:e}),I||"ai"!==o.name?void 0:(0,f.jsx)(sn().Xq,{routerState:e}),I||"workers"!==o.name?void 0:(0,f.jsx)(an,{routerState:e}),"marketplace"===o.name?(0,f.jsx)(Kt,{}):void 0,!_&&s?(0,f.jsx)(Et,{}):void 0,_?void 0:(0,f.jsx)(ut().lz,{}),p?(0,f.jsx)(_t,{}):void 0,!l&&!u||p?void 0:(0,f.jsx)(Ke().o,{route:e.route,publicPageData:a,shouldRedirectFromHome:u}),S?(0,f.jsx)(On,{}):void 0,(0,f.jsx)(ft,{}),!_&&d().A.isMobile?(0,f.jsx)(Pt().IM,{}):void 0,!_&&v?(0,f.jsx)(h().A,{fetch:()=>Promise.resolve().then(n.bind(n,802697)),render:()=>(0,f.jsx)(Mt().TranscriptionUsageFetcher,{})}):void 0,!_&&b?(0,f.jsx)(dt().LazyMobileAssistantPendingOperationsCollapsedElement,{}):void 0,!_&&g?(0,f.jsx)(dt().LazyAssistantOriginElement,{}):void 0,_?void 0:(0,f.jsx)(wt,{}),!_&&A?(0,f.jsx)(lt().ZT,{}):void 0,y?(0,f.jsx)(St,{}):void 0,k&&!d().A.isMobile?(0,f.jsx)(qt().RK,{}):null,_?void 0:(0,f.jsx)(Pt().i6,{}),_?void 0:(0,f.jsx)(Rn,{}),_?void 0:(0,f.jsx)(jn,{}),_?void 0:(0,f.jsx)(Ut,{}),void 0,(0,f.jsx)(qn,{}),(0,f.jsx)(zn,{})]})}function Nn(){$t().close()}function On(){const e=(0,w().v3)(),t=(0,x().K8)((()=>function(e){return{position:"absolute",top:0,insetInlineStart:(0,Ht().r6)(e),insetInlineEnd:0,bottom:0,zIndex:2}}(e)),[e]);return(0,f.jsx)("div",{style:t,onClick:Nn})}function qn(){const{currentSpaceStore:e,currentUserStore:t,isInitialRenderComplete:n}=(0,x().K8)((()=>{const{sidebarSpaceStore:e,currentUserStore:t}=it().default.state;return{currentSpaceStore:e,currentUserStore:t,isInitialRenderComplete:it().default.isInitialRenderComplete()}}),[]),o=(0,x().K8)((()=>Qt().A.state.open),[]),[i,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{o&&a(!0)}),[o]),e&&t&&n&&i?(0,f.jsx)(Tt,{spaceStore:e,userStore:t},`${e.id}-${null==t?void 0:t.id}`):null}function zn(){const e=(0,x().K8)((()=>zt().W({store:Wt().V})),[]),t=(0,r.useCallback)((()=>{zt().j({store:Wt().V})}),[]);return(0,f.jsx)(kt,{open:e,onDismiss:t})}function Wn({url:e,queryParams:t}){const{navigate:n}=(0,r.useContext)(a().E),o=(0,w().v3)(),i=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{i.current||(i.current=!0,t&&Se().I({currentUserId:void 0,params:t}),n({environment:o,url:e,redirect:!0}))}),[o,t,e,n]),(0,f.jsx)(ye().A,{})}function Fn(e){he().Ow({currentTab:e})}function Kn({url:e,clearHistory:t,showWeb:n,environment:r,loadOrigin:o,navigate:i}){const{RouterStore:a}=r;let s=e;if(r.device.isMobileNative&&r.device.isPhone){const e=(0,pe().bk)(s);e&&e.searchParams.has(de().P5)&&(e.searchParams.delete(de().P5),s=e.toString())}const c=ue().Q1({url:s,protocol:d().A.protocol,baseUrl:d().A.domainBaseUrl}),l=ue().kb({schemeUrl:c,baseUrl:d().A.domainBaseUrl}),u=ce().parseRoute({url:l,baseUrl:d().A.domainBaseUrl,publicDomainName:d().A.publicDomainName,isMobile:Boolean(d().A.isMobile),protocol:d().A.protocol,currentUrl:window.location.href});if((r.device.isAndroid||t)&&be().TC({RouterStore:a,currentUserId:r.currentUser.id}),r.mobileNative&&r.mobileNative.closeInAppBrowser(),"googleAuthCallback"===u.name){const{didHandle:e}=(0,Re().b)(u);if(e)return}"googleAuthCallback"!==u.name&&"samlAuthCallback"!==u.name&&"passkeyAuthCallback"!==u.name?(o&&at().A.setDesktopLoadContext(o),i({environment:r,url:l,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===u.name?u.queryId:void 0})):i({environment:r,url:l})}const Vn=function(){const{navigate:e}=(0,r.useContext)(a().E),t=(0,w().v3)(),{isStatsigReady:o,isFeatureEnabled:i}=(0,He().O)("workers"),{isStatsigReady:s,isFeatureEnabled:c}=(0,He().O)("custom_agents"),{isStatsigReady:l,isFeatureEnabled:u}=(0,He().O)("meeting_notes_page");(0,r.useEffect)((()=>{!d().A.isAdminMode&&t.currentUser.isLoggedIn()&&it().default.waitUntil((()=>{const e=it().default.state.currentUserSettingsStore,r=(null==e?void 0:e.isDefined())??!1;if(e&&r){const r=e.getSettings(),o=null==r?void 0:r.disable_auto_set_timezone;r&&!o&&n(942906).xw({environment:t,userSettingsStore:e})}return r}))}),[t]),(0,r.useEffect)((()=>{function e(){const{RouterStore:e,currentUser:n}=t,r=n.id;be().zd({environment:t,historyId:e.state.id,currentUserId:r}),(0,me().u)(!1)}return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[t]),(0,r.useEffect)((()=>{function e(e){var r,o,i;(0,n(846433).a)({currentUserId:null===(r=e.state)||void 0===r?void 0:r.currentUserId,id:null===(o=e.state)||void 0===o?void 0:o.id,url:null===(i=e.state)||void 0===i?void 0:i.url},t)}return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[t]),(0,n(852507).l)((()=>{var n,r,o;n=n=>function({url:e,environment:t,navigate:n}){Kn("string"==typeof e?{url:e,clearHistory:!1,showWeb:!1,environment:t,navigate:n}:{url:e.url,clearHistory:!1,showWeb:!1,environment:t,loadOrigin:e.loadOrigin,navigate:n})}({url:n,environment:t,navigate:e}),null===fe().electronApi||void 0===fe().electronApi||null===(r=fe().electronApi.onNavigate)||void 0===r||null===(o=r.addListener)||void 0===o||o.call(r,((e,t)=>{if("string"!=typeof t&&t.deduplicationID){const e=t.deduplicationID;if(ge===e)return void ve().log({level:"warning",from:"electronActions",type:"duplicateOnNavigateObjectDetected"});ge=e}n(t)})),function(e){var t,n;null===fe().electronApi||void 0===fe().electronApi||null===(t=fe().electronApi.onOpenSettings)||void 0===t||null===(n=t.addListener)||void 0===n||n.call(t,((t,n)=>e(n)))}(Fn),(0,me().u)(!0),function(e){var t,n;null===fe().electronApi||void 0===fe().electronApi||null===(t=fe().electronApi.newWindow)||void 0===t||null===(n=t.addListener)||void 0===n||n.call(t,e)}(((n,r)=>{e({environment:t,url:r,openInNew:"tab"})}))})),(0,r.useEffect)((()=>{t.mobileNative&&t.mobileNative.subscribeToOpenLink(((n,r,o)=>Kn({url:n,clearHistory:r,showWeb:o,environment:t,navigate:e})))}),[t,e]);const p=(0,x().O$)(t.RouterStore);(0,r.useEffect)((()=>{var e;"root"===p.route.name||"page"===p.route.name||"space"===p.route.name||"posts"===p.route.name||"blank"===p.route.name&&0===(null===(e=p.historyState)||void 0===e?void 0:e.index)||(n(915086).setInitialRenderCompleted(),it().default.setPageRendered())}),[p]),(0,r.useEffect)((()=>{t.currentUser.isLoggedIn()||"page"===p.route.name||"space"===p.route.name||n(554279).u4({device:t.device,event:{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}},cookieService:t.cookieService})}),[t.cookieService,t.currentUser,t.device,p.route.name]),(0,r.useEffect)((()=>{const e=it().default.state.currentUserSettingsStore;t.currentUser.isLoggedIn()&&e&&n(755199).Sz(t,e)}),[t]);const m=(0,w().Y0)();if(m.isNative&&ce().L7[p.route.name])return(0,f.jsx)(h().A,{fetch:()=>n.e(62370).then(n.bind(n,259032)),render:({OpenExternal:e})=>(0,f.jsx)(e,{})});if("front"===p.route.name)return(0,f.jsx)(Ee,{preventFrontRedirect:p.route.alreadyRedirected});if("root"===p.route.name)return(0,f.jsx)(xe,{route:p.route});if("nativeRedirect"===p.route.name||"nativeMailRedirect"===p.route.name||"nativeCalendarRedirect"===p.route.name)return(0,f.jsx)(Ue,{redirect:p.route.redirect,callbackType:"nativeMailRedirect"===p.route.name?"nativemailredirect":"nativeCalendarRedirect"===p.route.name?"nativecalendarredirect":"nativeredirect"});if("login"===p.route.name)return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(et().AuthSyncListener,{}),(0,f.jsx)(_e().HQ,{isSignup:!1,email:p.route.email,redirectURL:p.route.redirectURL})]});if("login/calendar"===p.route.name||"login/mail"===p.route.name)return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(et().AuthSyncListener,{}),(0,f.jsx)(_e().HQ,{isSignup:!1,email:p.route.email,redirectURL:p.route.redirectURL,addAnotherAccount:Boolean(p.route.addAnotherAccount)})]});if("addAnotherAccount"===p.route.name)return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(et().AuthSyncListener,{}),(0,f.jsx)(Qe,{redirectURL:p.route.redirectURL})]});if("desktopEmailConfirm"===p.route.name)return(0,f.jsx)(ke,{});if("teamsInvite"===p.route.name){const{teamId:e}=p.route;return n(946141).WO(t,{teamId:e}),(0,f.jsx)(h().A,{fetch:async()=>{const r=new(n(95758).h)(t,{table:n(854150).yK,id:e}),[o,{default:i}]=await Promise.all([r.load(),n.e(79038).then(n.bind(n,378106))]);return{TeamInviteLinkPage:i}},render:({TeamInviteLinkPage:t})=>(0,f.jsx)(t,{teamId:e})})}if("signup"===p.route.name)return(0,f.jsx)(_e().HQ,{isSignup:!0,email:p.route.email,referrer:p.route.referrer});if("signup/calendar"===p.route.name||"signup/mail"===p.route.name)return(0,f.jsx)(_e().HQ,{isSignup:!0,email:p.route.email,referrer:p.route.referrer,redirectURL:p.route.redirectURL,addAnotherAccount:Boolean(p.route.addAnotherAccount)});if("unsubscribe"===p.route.name){const e=p.route.payload;return(0,f.jsx)(h().A,{fetch:()=>n.e(75417).then(n.bind(n,328389)),render:({ConfirmUnsubscribePage:t})=>(0,f.jsx)(t,{payload:e})})}if("onboarding"===p.route.name)return(0,f.jsx)(ze,{});if("upcomingInvoice"===p.route.name)return(0,f.jsx)(Oe().Y,{route:p.route});if("invoiceById"===p.route.name)return(0,f.jsx)(Oe().Y,{route:p.route});if("settingsConsoleOrganization"===p.route.name){if(t.currentUser.isLoggedIn())return(0,f.jsx)(Fe,{organizationId:p.route.organizationId,tabRoute:p.route.tabRoute,properties:p.route.properties,params:p.route.params});{const e=(0,n(734459).re)({organizationId:p.route.organizationId,tabRoute:p.route.tabRoute,properties:p.route.properties,queryParams:p.route.params}),t=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}}if(p.route.name,p.route.name,"admin"===p.route.name&&d().A.isAdminMode)return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(64038),n.e(57858),n.e(4422),n.e(76690),n.e(23930),n.e(19884)]).then(n.bind(n,469810)),render:({Admin:e})=>(0,f.jsx)(e,{})});if("adminListData"===p.route.name){const{category:e}=p.route;if(d().A.isAdminMode)return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(64038),n.e(57858),n.e(4422),n.e(76690),n.e(23930),n.e(19884)]).then(n.bind(n,876452)),render:({default:t})=>(0,f.jsx)(t,{category:e})})}if("adminPermissions"===p.route.name&&d().A.isAdminMode)return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(64038),n.e(57858),n.e(4422),n.e(76690),n.e(23930),n.e(19884)]).then(n.bind(n,259798)),render:({AdminPermissionsPage:e})=>(0,f.jsx)(e,{})});if("adminSingleRecord"===p.route.name&&d().A.isAdminMode){const{id:e,table:t}=p.route;return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(64038),n.e(57858),n.e(4422),n.e(76690),n.e(23930),n.e(19884)]).then(n.bind(n,364233)),render:({AdminSingleRecord:n})=>(0,f.jsx)(n,{table:t,id:e})})}if("adminObject"===p.route.name&&d().A.isAdminMode){const{id:e}=p.route;return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(64038),n.e(57858),n.e(4422),n.e(76690),n.e(23930),n.e(19884)]).then(n.bind(n,952625)),render:({AdminObjectRedirect:t})=>(0,f.jsx)(t,{objectId:e})})}if("oauthAuthorization"===p.route.name){const{responseType:e,redirectUri:t,integrationId:r,state:o,owner:i,userId:a,spaceId:s}=p.route;return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(75134),n.e(55373),n.e(36192),n.e(87249),n.e(71621),n.e(88924),n.e(89296),n.e(9294),n.e(4422),n.e(4330),n.e(22001),n.e(55997),n.e(75104),n.e(39457),n.e(89379),n.e(9647)]).then(n.bind(n,621815)),render:({OauthAuthorization:n})=>(0,f.jsx)(n,{responseType:e,redirectUri:t,integrationId:r,state:o,owner:i,userId:a,spaceId:s})})}if("passkeyAuthVerify"===p.route.name){const{callbackType:e}=p.route;return(0,f.jsx)(h().A,{fetch:()=>n.e(66805).then(n.bind(n,471283)),render:({VerifyPasskeyRedirectPage:t})=>(0,f.jsx)(t,{callbackType:e})})}if("notionCalendarAuthorization"===p.route.name){const{csrf:e,calendarCsrf:t,redirectUri:r,spaceId:o,state:i}=p.route;return(0,f.jsx)(h().A,{fetch:()=>n.e(58777).then(n.bind(n,215627)),render:({default:n})=>(0,f.jsx)(n,{csrf:e,calendarCsrf:t,redirectUri:r,spaceId:o,state:i})})}if("globalOauthPostLogin"===p.route.name){const{clientId:e,redirectUri:t,state:r,responseType:o,scope:i}=p.route;return(0,f.jsx)(h().A,{fetch:()=>Promise.all([n.e(75134),n.e(75104),n.e(56353)]).then(n.bind(n,881489)),render:({default:n})=>(0,f.jsx)(n,{clientId:e,redirectUri:t,csrfState:r,responseType:o,scope:i})})}if("mcpOAuthCallback"===p.route.name){const{code:e,state:t,error:r,error_description:o,error_uri:i}=p.route;return(0,f.jsx)(h().A,{fetch:()=>n.e(42943).then(n.bind(n,116485)),render:({McpOAuthCallback:n})=>(0,f.jsx)(n,{route:{name:"mcpOAuthCallback",code:e,state:t,error:r,error_description:o,error_uri:i}})})}if("passkeyRegistrationVerification"===p.route.name){const{callbackType:e,csrfToken:r,attemptId:o,options:i}=p.route;return(0,f.jsx)(h().A,{fetch:()=>n.e(67045).then(n.bind(n,407485)),render:({AddPasskeyRedirectPage:n})=>(0,f.jsx)(n,{environment:t,callbackType:e,csrfToken:r,attemptId:o,options:i})})}if("initiateExternalAuthentication"===p.route.name){const{notion_user_id:e,notion_workspace_id:t,notion_last_visited_url:r,notion_authorization_code:o,external_object_instance_block_id:i,callback_type:a,integration_id:s,redirectToAuth:c}=p.route;return(0,f.jsx)(h().A,{fetch:()=>n.e(18071).then(n.bind(n,856425)),render:({default:n})=>(0,f.jsx)(n,{notion_user_id:e,notion_workspace_id:t,notion_last_visited_url:r,notion_authorization_code:o,external_object_instance_block_id:i,callback_type:a,integration_id:s,redirectToAuth:c})})}if("initiateExternalAuthenticationFromDesktop"===p.route.name){const{redirectUri:e}=p.route;if(t.currentUser.isLoggedIn())return(0,f.jsx)(h().A,{fetch:()=>n.e(58657).then(n.bind(n,465677)),render:({default:t})=>(0,f.jsx)(t,{redirectUri:e})});{const t=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:e}}),r=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:t}});return n(802149).TR(),(0,f.jsx)(Wn,{url:r})}}if("myIntegrations"===p.route.name)return(0,f.jsx)(Wn,{url:le().JZ.creatorProfileIntegrations});if("inAppTemplateSubmission"===p.route.name)return(0,f.jsx)(Wn,{url:le().JZ.creatorProfileTemplates});if("inAppTemplateCreatorSubmission"===p.route.name)return(0,f.jsx)(Wn,{url:le().JZ.creatorProfile});if("creatorProfile"===p.route.name||"creatorProfileTemplates"===p.route.name||"creatorProfileIntegrations"===p.route.name||"creatorProfileAnalytics"===p.route.name||"creatorProfileCoupons"===p.route.name||"creatorProfileServices"===p.route.name||"creatorProfileLearn"===p.route.name||"creatorProfileSettings"===p.route.name){if(t.currentUser.isLoggedIn())return"pointer"in p.route?(0,f.jsx)(je,{publish:Boolean(p.route.publish),lab:Boolean(p.route.lab),botOrIntegrationPointer:p.route.pointer}):(0,f.jsx)(je,{publish:!1,lab:!1,botOrIntegrationPointer:void 0});{const e=pe().Gm({url:`${le().JZ[p.route.name]}`}),t=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}}if("localizedTemplates"===p.route.name){if(t.currentUser.isLoggedIn())return(0,f.jsx)(Je,{});{const e=pe().Gm({url:`${le().JZ[p.route.name]}`}),t=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}}if("studentGroupSignup"===p.route.name)return(0,f.jsx)(ct,{});if("startupsApplication"===p.route.name)return(0,f.jsx)(nt,{formType:"startups"});if("smbsApplication"===p.route.name)return(0,f.jsx)(nt,{formType:"smb"});if("lennyApplication"===p.route.name)return(0,f.jsx)(ot,{});if("creatorProgramApplication"===p.route.name)return(0,f.jsx)(Ne,{});if("githubStudentPackHome"===p.route.name)return(0,f.jsx)($e,{});if("notFound"===p.route.name)return(0,f.jsx)(Ke().o,{route:p.route,publicPageData:void 0});if("modal"===p.route.name&&!t.currentUser.isLoggedIn()&&(p.route.templateGalleryItem||p.route.projectManagementLaunch)){const e={};return p.route.projectManagementLaunch?e.tg="gallery":p.route.templateGalleryItem&&(e.tg=p.route.templateGalleryItem),(0,f.jsx)(Wn,{url:le().JZ.login,queryParams:e})}if("ekmError"===p.route.name)return t.currentUser.isLoggedIn()?(0,f.jsx)(Ke().o,{route:p.route,publicPageData:void 0}):(0,f.jsx)(Wn,{url:le().JZ.login});if("chat"===p.route.name&&!t.currentUser.isLoggedIn()){const e=(0,n(172385).X_)(p.route),t=(0,pe().Gm)({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}if("meet"===p.route.name){if(!t.currentUser.isLoggedIn()){const e=le().JZ.meet,t=(0,pe().Gm)({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}if(!u&&l)return(0,f.jsx)(Wn,{url:"notFound"})}if("marketplace"===p.route.name&&!t.currentUser.isLoggedIn()){const e=(0,n(590265).YD)(d().A,p.route),t=(0,pe().Gm)({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}if("quickSearch"===p.route.name)return(0,f.jsx)(h().A,{fetch:()=>n.e(55687).then(n.bind(n,263491)),render:({QuickSearchRoute:e})=>(0,f.jsx)(e,{})});if("meetingNotification"===p.route.name)return(0,f.jsx)(Ye,{});if("agent"===p.route.name||"ai"===p.route.name){if(!t.currentUser.isLoggedIn()){const e="agent"===p.route.name?le().JZ.login:(0,pe().Gm)({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:le().JZ.ai}});return(0,f.jsx)(Wn,{url:e})}if("ai"===p.route.name&&m.isPhone){const e=(0,pe().Gm)({url:le().JZ.home,query:{[de().P5]:n(890754).NEW_CHAT_THREAD_ID}});return(0,f.jsx)(Wn,{url:e})}if("agent"===p.route.name&&!c&&s)return(0,f.jsx)(Wn,{url:"notFound",queryParams:void 0})}if("workers"===p.route.name){if(!t.currentUser.isLoggedIn()){const e=pe().Gm({url:window.location.pathname+window.location.search}),t=pe().Gm({url:`${d().A.domainBaseUrl}${le().JZ.login}`,query:{redirectURL:e}});return(0,f.jsx)(Wn,{url:t})}if(!i&&o)return(0,f.jsx)(Wn,{url:"notFound",queryParams:void 0})}return p.route.name,"page"===p.route.name||"space"===p.route.name||"nativeTab"===p.route.name||"modal"===p.route.name||"chat"===p.route.name||"meet"===p.route.name||"agent"===p.route.name||"ai"===p.route.name||"marketplace"===p.route.name||"team"===p.route.name||"posts"===p.route.name||"blank"===p.route.name||"workers"===p.route.name?(0,f.jsx)(Bn,{routerState:p}):(0,f.jsx)(ye().A,{})};const $n=!1,Hn={navigate:n(577142).navigate,navigateToExternalUrl:n(27579).L};function Gn({environment:e,onMount:t}){const u=(0,r.useRef)(!1);(0,r.useEffect)((()=>{u.current||(u.current=!0,null==t||t())}),[t]),(0,r.useEffect)((()=>{d().A.isAdminMode||console.log("%c\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnn                         nnnn\n\tnnnnnnn                          nnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnn                           nnn\n\tnnnnnnnn    nnnnnnnn     nnnnnnn   nnn\n\tnnnnnnnn      nnnnnnn      nnn     nnn\n\tnnnnnnnn      nnnnnnnn     nnn     nnn\n\tnnnnnnnn      nnnnnnnnnn   nnn     nnn\n\tnnnnnnnn      nnn nnnnnnn  nnn     nnn\n\tnnnnnnnn      nnn  nnnnnnnnnnn     nnn\n\tnnnnnnnn      nnn   nnnnnnnnnn     nnn\n\tnnnnnnnn      nnn     nnnnnnnn     nnn\n\tnnnnnnnn      nnn      nnnnnnn     nnn\n\tnnnnnnnn    nnnnnnnn    nnnnnn     nnn\n\t  nnnnnn                           nnn\n\t\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tWe're hiring!\n\t\t  nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tnotion.so/careers\n\n\tyeah, I would probably eat a lemon for one hundred dollars --Abraham Lincoln (2023-07-14)\n\t\t\t\t ","font-family: monospace")}),[]);const p=$n?r.StrictMode:r.Fragment;return(0,f.jsx)(p,{children:(0,f.jsx)(i().aw,{value:e,children:(0,f.jsx)(o().k,{children:(0,f.jsxs)(s().wX,{children:[(0,f.jsx)(l().Dk,{defaultLocale:"en-US",locale:c().locale,messages:c().D,children:(0,f.jsx)(a().a,{value:Hn,children:(0,f.jsx)(v,{...g(e.device),children:(0,f.jsx)(_().K,{fallback:e=>(0,f.jsx)(h().A,{fetch:()=>n.e(52177).then(n.bind(n,506008)),render:({AppError:t})=>(0,f.jsx)(t,{...e})}),from:"Router",type:"AppCrash",children:(0,f.jsxs)(I,{id:"app",targetRenderPhase:"mount",children:[(0,f.jsx)(se().T,{}),(0,f.jsx)(ae,{children:(0,f.jsx)(Vn,{})})]})})})})}),(0,f.jsx)(E,{})]})})})})}},360568:(e,t,n)=>{n.d(t,{H:()=>o});var r=()=>n(44551);function o(e){var t;null===r().electronApi||void 0===r().electronApi||null===(t=r().electronApi.setWindowTitle)||void 0===t||t.call(r().electronApi,e)}},422920:(e,t,n)=>{n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>i});var r=()=>n(901801),o=()=>n(948450);function i(){r().A.removeAllIfNoPermission(),o().A.removeAllIfNoPermission()}},424127:(e,t,n)=>{n.d(t,{uW:()=>u});n(16280);var r=n(296540),o=()=>n(726637),i=()=>n(484714),a=()=>n(763824),s=()=>n(615234),c=()=>n(534177),l=()=>n(645873);const d=100;function u(e,t,n,u=!1){const f=function(e){var t,n;const a=(0,i().v3)(),s=null===(t=a.sqliteConnection)||void 0===t||null===(n=t.getObserver)||void 0===n?void 0:n.call(t),c=s?m.get(s):void 0,[u,f]=(0,r.useState)(c),v=(0,l().fJ)(p,{disabled:!e});return(0,r.useEffect)((()=>{if(u||!s||!e)return;const t=m.get(s);if(t)return void f(t);if("resolved"!==v.status||!s)return;const{TabSqliteSubscriptionBackend:n,SqliteSubscriptionManager:r}=v.value,i=new r(new n({observer:s,debounceMs:d,broadcastWritesChannel:new BroadcastChannel("sqlite-writes"),config:o().A}));m.set(s,i),f(i)}),[s,v,u,e]),e?u:void 0}(Boolean(t)),v=function(e,t,n,o,a){const s=(0,i().v3)().currentUser.id,l=t?function(e,t,n,r,o,i){var a,s;if(!n&&null!==(a=r.rowType)&&void 0!==a&&a.singleton)throw new Error(`Must use useSqliteSingleton for singleton row type: ${r.rowType.name}`);const l=t.sql();let d=r.readTables;if(!d){const e=null==o?void 0:o.parseQuery(l);var u;if(e)switch(e.type){case"unknown":d=e.tables;break;case"error":throw e.error;case"crud":if(e.writeTables.length>0)throw new Error(`useSqliteQuery: cannot subscribe to query that writes to tables: ${e.writeTables.join(", ")}`);d=e.readTables;break;default:(0,c().HB)(e)}else d=null===(u=r.rowType)||void 0===u?void 0:u.readTables}const p={_key:`sqlite:KeyCreatorNotLoaded:${e}`,_options:r,singleton:n,sql:l,args:t.args,queryName:e,readTables:d,primaryKey:r.primaryKey??(null===(s=r.rowType)||void 0===s?void 0:s.primaryKey),rowType:r.rowType,userId:i||"guest"};o&&(p._key=o.keyCreator.getKeyUncached(p));return p}(e,t,n,o,a,s):void 0,[d,u]=(0,r.useState)(l);if((null==l?void 0:l._key)!==(null==d?void 0:d._key))return u(l),l;return d}(e,t,u,n,f),h=v?null==f?void 0:f.createQuery(v._key,v):void 0,b=h??g,S=(0,r.useSyncExternalStore)(b.subscribe,b.getSnapshot),y=function(e,t,n){var o;const i=null===(o=(0,l().fJ)(p,{disabled:!e}).value)||void 0===o?void 0:o.OptimisticUpdateComposer;return(0,r.useCallback)(((r,o)=>e&&n&&i&&e?async function(e,t,n,r,o,i){const c=r.rowType;if(!c)throw new Error(`Optimistic updates not supported for queries without a RowType or primaryKey: ${r.key}`);const l=new i(c,n);let d;try{t(l)}finally{d=l.done()}const{queryUpdate:u,rowTypeUpdate:p}=d;if(!u&&!p)return e();let m,f;const v=()=>{var e,t;null===(e=m)||void 0===e||e(),null===(t=f)||void 0===t||t()};p&&(o.dispatchRowTypeUpdate(r.userId,c,{type:"put",update:p}),m=()=>{o.dispatchRowTypeUpdate(r.userId,c,{type:"del",id:p.id})});u&&(r.dispatch({type:"put",update:u}),f=()=>{r.dispatch({type:"del",id:u.id})});const g=(0,a().nQ)(10*s().TD,r.waitForRerun()),h=e();return Promise.all([h,g]).finally(v),await h}(r,o,t,e,n,i):r()),[e,n,i,t])}(h,Boolean(null==v?void 0:v.singleton),f),w=Boolean(t),A=(0,r.useMemo)((()=>({...S,withOptimistic:y,enabled:w})),[S,y,w]);if(A.error&&(null==v||!v._options.allowError))throw A.error;return A}const p=new(l().O2)("SqliteSubscriptions",(async()=>{const[{TabSqliteSubscriptionBackend:e},{SqliteSubscriptionManager:t},{OptimisticUpdateComposer:r}]=await Promise.all([Promise.all([n.e(14208),n.e(93199)]).then(n.bind(n,384233)),Promise.all([n.e(14208),n.e(93199)]).then(n.bind(n,316878)),Promise.all([n.e(14208),n.e(93199)]).then(n.bind(n,415123))]);return{TabSqliteSubscriptionBackend:e,SqliteSubscriptionManager:t,OptimisticUpdateComposer:r}})),m=new WeakMap;function f(){}const v=Object.freeze({loading:!0,seq:-1,value:void 0,valueSeq:void 0,error:void 0,errorSeq:void 0}),g={subscribe:()=>f,getSnapshot:()=>v,dispatch:f}},449789:(e,t,n)=>{function r(e){const{store:t,toggleSource:n}=e;t.update((e=>{const t=!e.isKeyboardShortcutsOpen;return{...e,isKeyboardShortcutsOpen:t,toggleSource:t?n:e.toggleSource,openCount:t?e.openCount+1:e.openCount}}))}function o(e){const{store:t}=e;return t.state.isKeyboardShortcutsOpen}n.d(t,{W:()=>o,j:()=>r})},455215:(e,t,n)=>{n.d(t,{A:()=>_});n(581454);var r=n(296540),o=()=>n(484714),i=()=>n(56366),a=()=>n(401497),s=()=>n(631524),c=()=>n(75756),l=()=>n(839816),d=()=>n(69708),u=()=>n(204077),p=()=>n(38337),m=()=>n(722872),f=()=>n(438754),v=()=>n(760217),g=()=>n(406699),h=()=>n(404277),b=()=>n(939740),S=()=>n(89924),y=()=>n(581369),w=()=>n(125565),A=n(474848);function k({hasDismissButton:e,onDismiss:t}){const n=(0,o().v3)(),i=(0,a().DP)(),v=(0,d().tz)(),[g,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>()=>{e||g&&u().wB()}),[v,g,e]);const k=[{key:"trackingTypes",render:e=>(0,A.jsx)(S().A,{...e,topBorder:0!==e.index}),items:l().dc.map((e=>({key:e,render:t=>(0,A.jsx)(I,{menuListItemProps:t,trackingType:e,setShowReloadOnMenuClose:y,isNativeiOSApp:n.device.isMobileNative&&n.device.isIOS}),action:()=>u().Ef(n,e)})))}];return(0,A.jsxs)(h().A,{className:p().Qm5,menuType:m().gu.Popup,width:260,children:[(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",paddingTop:e?4:0},children:e?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",paddingInlineStart:14},children:(0,A.jsx)("b",{children:(0,A.jsx)(d().sA,{...c().LS.customizeCookiesHeader})})}),(0,A.jsx)(s().p,{style:{float:"inline-end",marginInlineStart:-8,paddingInlineStart:8,paddingInlineEnd:8,color:i.blue.text.accentPrimary},onClick:()=>{u().gz(n,f().A.getPermission()),t&&t()},children:(0,A.jsx)(d().sA,{...c().LS.cookieDismissButtonLabel})})]}):void 0}),(0,A.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:void 0,sections:k})]})}function I(e){const{menuListItemProps:t,trackingType:n,setShowReloadOnMenuClose:r,isNativeiOSApp:s}=e,{title:l,caption:p,subtitle:m}=(0,c().ID)(n,s),[{permission:g}]=(0,i().$y)(f().A),h=(0,a().DP)(),b=(0,o().v3)();return(0,A.jsx)(v().A,{...t,title:(0,A.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,A.jsx)("div",{style:{marginInlineEnd:0},children:(0,A.jsx)(d().sA,{...l})})}),caption:(0,A.jsxs)("div",{children:[m?(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:{color:h.errorText},children:(0,A.jsx)(d().sA,{...m})})}):void 0,(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:{color:h.text.secondary},children:(0,A.jsx)(d().sA,{...p})})})]}),shouldWrapCaption:!0,right:(0,A.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"},children:(0,A.jsx)(y().A,{on:g[n],disabled:"necessary"===n,onClick:()=>{r(!0),u().Ef(b,n)}})})})}const _=function({renderOrigin:e,hasDismissButton:t,onDismiss:n}){return(0,A.jsx)(g().A,{popupType:g().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",renderOrigin:e,render:()=>(0,A.jsx)(k,{hasDismissButton:t,onDismiss:n})})}},502220:(e,t,n)=>{n.d(t,{v:()=>o});var r=()=>n(549500);const o={transcription_idle:async(e,t)=>{(await r().$O.load()).idleTranscriptionActions.showIdleTranscriptionToast(e,t)},transcription_error:async(e,t)=>{(await r().$O.load()).transcriptionErrorActions.showTranscriptionErrorToast(e,t)},transcription_recording_stopped:async(e,t)=>{(await r().$O.load()).transcriptionNotificationActions.showTranscriptionRecordingStoppedToast(e,t)}}},517592:(e,t,n)=>{n.d(t,{A:()=>o});n(296540);var r=n(474848);const o=(0,n(340498).wt)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},526713:(e,t,n)=>{n.d(t,{o:()=>o});var r=()=>n(711059);function o(e){const t=[4,9,0];return(0,r().isLessThanVersion)(e,t)}},529649:(e,t,n)=>{n.d(t,{A:()=>r});const r=new(n(463830).A)},532688:(e,t,n)=>{n.d(t,{RK:()=>i,uC:()=>a});var r=()=>n(645873);const o={Toaster:new(r().O2)("Toaster",(()=>Promise.all([n.e(65197),n.e(82215),n.e(98731),n.e(47381)]).then(n.bind(n,94476)))),PerfmarkTrialIneligibleToast:new(r().O2)("PerfmarkTrialIneligibleToast",(()=>Promise.all([n.e(75134),n.e(58790)]).then(n.bind(n,585731))))},i=(0,r()._h)(o.Toaster,(e=>e.Toaster)),a=(0,r()._h)(o.PerfmarkTrialIneligibleToast,(e=>e.PerfmarkTrialIneligibleToast))},574506:(e,t,n)=>{n.d(t,{t:()=>s});var r=()=>n(242422),o=()=>n(726637),i=()=>n(765957),a=()=>n(680074);function s(){if(o().A.isMobile)return!1;const{currentUserSettingsStore:e}=i().default.state;if(!e)return!1;const t=(0,a().iZ)(e);return!("number"==typeof t&&t>7)&&"on"===r().default.getEligibleGroup({experimentId:"slash_menu_tooltip",defaultGroup:"control"})}},604643:(e,t,n)=>{n.r(t),n.d(t,{initialize:()=>p});var r=()=>n(584262),o=()=>n(183558),i=()=>n(807054),a=()=>n(993130),s=()=>n(155959),c=()=>n(492553),l=()=>n(690732),d=()=>n(904314),u=()=>n(914095);async function p(e){const t=window.history.state&&window.history.state.id||(0,o().Ay)(),n=e.currentUser.id;window.history.state||(window.history.replaceState({id:t,currentUserId:n},void 0,window.location.href),l().k({historyId:t,historyIndex:0,currentUserId:n})),(0,a().A)(e)&&e.TabbedRouterStore.setUp({nativeInboxEnabled:(0,s().T)("supportsNativeInbox"),nativeAiTabEnabled:(0,s().T)("supportsNativeAiTab")}),e.device.isElectron&&(i().setDesktopLoadContext(),c().H.pushEntry({historyId:t,currentUserId:n,url:window.location.href}));const p=window.location.href;await u().Y({environment:e,id:t,action:"pop",href:p,updateMobileTabbedRouterArgs:{forceUpdate:!0,silenceErrors:!0,clearNativeRootPageOverride:"/"!==window.location.pathname},enableDesktopAppRedirect:!0,pageVisitSourceOverride:(0,r().Q5)(p)?void 0:r().y8.Initialization});const m=(0,d().w)(n);if(!m||"undefined"===m){const e=window.location.pathname;e&&(0,d().E)({currentUserId:n,value:e})}}},652393:(e,t,n)=>{n.r(t),n.d(t,{initialize:()=>s});var r=()=>n(726637),o=()=>n(884268),i=()=>n(165358),a=()=>n(445011);function s(e){"object"==typeof r().A&&r().A.version&&(i().clientLogglyEnvironmentData.version=r().A.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(i().clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(i().clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(i().clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(i().clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(i().clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(i().clientLogglyEnvironmentData.isChromeExtension=!0),i().clientLogglyEnvironmentData.os=t.os,i().clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(i().clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(i().clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(i().clientLogglyEnvironmentData.userId=n.id),i().clientLogglyEnvironmentData.is_experimental_build=r().A.buildTarget===o().w6,i().clientLogglyEnvironmentData.is_mobile_build=r().A.buildTarget===o()._j,(0,a().x)().then((e=>{e&&(i().clientLogglyEnvironmentData.storageUsageEstimate=e.usage,i().clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},682497:(e,t,n)=>{n.d(t,{o:()=>i});var r=()=>n(645873);const o=new(r().O2)("PageError",(async()=>Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(22114),n.e(7336),n.e(70442),n.e(46442),n.e(66960)]).then(n.bind(n,245737)))),i=(0,r()._h)(o,(e=>e.PageError))},710144:(e,t,n)=>{n.d(t,{O:()=>a});var r=n(296540),o=()=>n(242422),i=()=>n(56366);function a(e){const[t,n]=(0,r.useState)(!1);(0,r.useEffect)((()=>{o().default.waitUntilStatsigReadyAsync().then((()=>{n(!0)}))}),[]);const a=(0,i().K8)((()=>t&&o().default.checkGate({gateName:e})),[t,e]);return{isStatsigReady:t,isFeatureEnabled:a}}},762014:(e,t,n)=>{n.d(t,{A:()=>i,e:()=>r});let r=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class o extends(()=>n(757695))().Store{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const i=new o},763765:(e,t,n)=>{n.d(t,{t:()=>o});class r extends(()=>n(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:n,fetched:r}=e;this.setState({loaded:r,userId:t,spaceId:n})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:n}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===n}}const o=new r;(0,n(852832).exposeDebugValue)("statsigUserLoadingStatusStore",o)},802697:(e,t,n)=>{n.r(t),n.d(t,{TranscriptionUsageFetcher:()=>d});var r=n(296540),o=()=>n(484714),i=()=>n(534177),a=()=>n(559506),s=()=>n(249847),c=()=>n(152197),l=()=>n(891360);function d(){const e=(0,o().v3)(),t=(0,c().r)(),n=(0,s().T)(),d=(0,r.useCallback)((async()=>{if(!t||!n)return;const r=await a().callApi({eventName:"getTranscriptionUsage",environment:e,data:{spaceId:t}});if("success"===r.type){const e=r.data;"rateLimited"===e.type?l().W.setState({type:"rateLimited",retryAfterSec:e.retryAfterSec}):"available"===e.eligibility?l().W.setState({type:"available",usage:e.usage,limit:e.limit}):"unavailable"===e.eligibility?l().W.setState({type:"unavailable"}):(0,i().HB)(e.eligibility)}}),[e,t,n]);return(0,r.useEffect)((()=>{d()}),[d,t,n]),null}},811558:(e,t,n)=>{var r=n(746518),o=n(439928),i=n(225397),a=Array;r({target:"Array",proto:!0},{with:function(e,t){return o(i(this),a,e,t)}})},817411:(e,t,n)=>{n.d(t,{A:()=>u});n(581454),n(296540);var r=()=>n(484714),o=()=>n(56366),i=()=>n(401497),a=()=>n(75435);const s=[[2,1,3,1],[1,0,2,0],[0,2,0,3],[3,3,0,2],[1,1,2,2]];var c=()=>n(710149),l=()=>n(749687),d=n(474848);function u({skipFadeinDelay:e}){const{isElectronMac:t,isTablet:n,isAndroid:u}=(0,r().Y0)(),m=(0,r().v3)(),f=(0,o().O$)(a().b),v=t&&!f,g=(0,o().O$)(l().sidebarExpandedStore),{paddingTop:h,paddingLeft:b}=(0,o().K8)((()=>{const{WindowSizeStore:e}=m;return{paddingTop:e.getSafePaddingTopPx(0),paddingLeft:e.getSafePaddingLeftPx(0)}}),[m]),S=(0,o().K8)((()=>g?l().sidebarWidthStore.state:0),[g]),y=(0,i().IS)((e=>{const t={width:20,height:20,borderRadius:4},r={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:e.background.secondary,boxShadow:e.sidebarBoxShadow,display:g?"flex":"none",minWidth:S,flexDirection:"column",padding:"12px 14px",paddingInlineStart:Math.max(b,14),...n&&u?{paddingTop:h+10}:{},overflow:"hidden"},heroSection:{paddingTop:v?36:0,marginBottom:22,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...t,width:22,height:22},heroSectionTitle:{width:177,marginInlineStart:8,...r},toplevelMenu:{marginBottom:20,width:78,...r},toplevelMenuLast:{marginBottom:36,width:135,...r},sectionHeader:{marginBottom:14,width:56,...r},pageRow:{display:"flex",alignItems:"center",marginBottom:11},pageIcon:{...t},pageTitle:{marginInlineStart:8,...r}}}),[g,S,v,h,b,n,u]),w=(0,d.jsxs)("div",{style:y.heroSection,children:[(0,d.jsx)(c().A,{style:y.heroSectionIcon,emphasized:!0}),(0,d.jsx)(c().A,{style:y.heroSectionTitle,emphasized:!0})]}),A=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c().A,{style:y.toplevelMenu,emphasized:!0}),(0,d.jsx)(c().A,{style:y.toplevelMenu,emphasized:!0}),(0,d.jsx)(c().A,{style:y.toplevelMenu,emphasized:!0}),(0,d.jsx)(c().A,{style:y.toplevelMenuLast,emphasized:!0})]}),k=(0,d.jsx)(c().A,{style:y.sectionHeader,emphasized:!0}),I=s.map(((t,n)=>t.map(((t,r)=>(0,d.jsxs)("div",{style:{...!e&&p(n),...y.pageRow},children:[(0,d.jsx)(c().A,{style:y.pageIcon,emphasized:!0}),(0,d.jsx)(c().A,{style:{...y.pageTitle,width:80+20*t},emphasized:!0})]},`${n}-${r}`)))));return(0,d.jsxs)("div",{style:y.sidebar,children:[w,A,k,I]})}function p(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}},840125:(e,t,n)=>{n.r(t),n.d(t,{getCloseConfirmationDialogReason:()=>m,getUserControlledCloseConfirmationDialogReason:()=>p,setupOnBeforeUnload:()=>v,showConfirmationDialogEventEmitter:()=>d});n(16280);var r=()=>n(534177),o=()=>n(964345),i=()=>n(748197),a=()=>n(337567),s=()=>n(878423),c=()=>n(485634),l=()=>n(549508);const d=new(n(592328).A);let u;function p(){const e=m();switch(e){case"have_local_draft_unsaved_changes":case"dictation_in_progress":return e;case void 0:case"transaction_queue_has_tasks":case"uploading_files":case"generating_ai_completions":case"have_pending_ai_edits":case"have_pending_synced_collection_changes":return}(0,r().HB)(e)}function m(){if(!u)throw new Error("beforeUnloadHelpers.setupOnBeforeUnload() was not called!");return u()}const f="Changes you made may not be saved. Are you sure you want to quit?";function v(e){const{TransactionQueue:t,device:n,AppUpdateStore:r,GlobalFileUploadStore:p}=e,v=!(0,l().o)();u=function(){return!t.hasTasks()||n.isMobileNative||n.isElectron||r.isMajorUpdate()||v?(0,a().A5)()?"have_pending_ai_edits":s().A.doesAnyCacheHaveUnsavedChanges()?"have_local_draft_unsaved_changes":p.isUploading()?"uploading_files":c().A.hasPendingSyncedCollectionChanges()?"have_pending_synced_collection_changes":o().gZ.state||i().c.areBlocksSummarizing()?"dictation_in_progress":void 0:"transaction_queue_has_tasks"},window.onbeforeunload=function(){const e=m();if(e)return d.emit(e),f}}},853113:(e,t,n)=>{n.d(t,{u:()=>o});var r=()=>n(44551);function o(e){r().electronApi&&r().electronApi.navigationReady&&r().electronApi.navigationReady(e)}},877050:(e,t,n)=>{n.d(t,{Em:()=>c,OH:()=>s});const r=class extends(()=>n(496506))().ComputedStore{},o=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","desktopEmailConfirm","root","chat","posts","marketplace","team","gallery","meet","settingsConsoleOrganization","agent","ai"],i=[...o,"login","login/calendar","signup","quickSearch","meetingNotification"],a=["meetingNotification"];function s(e){const{device:t,RouterStore:n,ThemeStore:a}=e;let s=o;return(t.isElectron||t.isElectronCalendar||t.isMobileNative)&&(s=i),new r((()=>{const e=n.state.route;return e&&s.includes(e.name)?a.state.mode:"light"}),{debugName:"ThemeModeStore"})}function c(e){return a.includes(e)}},883088:(e,t,n)=>{n.r(t),n.d(t,{createClientEnvironment:()=>se});var r=()=>n(20022),o=()=>n(678293),i=()=>n(813974),a=()=>n(221844),s=()=>n(711740),c=()=>n(105751),l=()=>n(590966),d=()=>n(396487),u=()=>n(609990),p=()=>n(299972),m=()=>n(110750),f=()=>n(721338),v=()=>n(138418),g=()=>n(911988),h=()=>n(165358),b=()=>n(229833),S=()=>n(175320);class y extends(()=>n(573442))().K{constructor(e){super({...e,mapSpaceIdToShortId:t=>e.mapSpaceIdToShortId(this.currentUserId,t)}),this.currentUserId=void 0,this.currentUserId=e.currentUserId}updateCurrentUserId(e){this.currentUserId=e}}var w=()=>n(529543),A=()=>n(520348),k=()=>n(245865),I=(n(16280),n(944114),n(898992),n(430670),n(803949),n(581454),()=>n(564884)),_=()=>n(388821),C=()=>n(179034),E=()=>n(651170),x=()=>n(445120),T=()=>n(15601),P=()=>n(496603),L=()=>n(406792);let U=1;class M{constructor(e){this.connection=void 0,this.maxSize=void 0,this.getEnvironment=void 0,this.getLatency=new(n(293596).B),this.batchReadWorkers=15,this.queuedGetErrors=[],this.pendingWrites=_().RecordMapPolymorphic.create(),this.getManyFromDisk=async e=>{const t=_().RecordMapPolymorphic.create();e.forEach((({pointer:e},n)=>{t.set(e,n)}));const n=await T().tB(this.connection,e),r=_().RecordMapPolymorphic.create();for(const o of n)this.setCachedRecordMap(r,o);return e.map((({pointer:e,userId:t})=>{const n=this.getInMemory(e,t);if(n)return n;const o=r.get(e);return o&&o[t]}))},this.diskReadQueue=new(n(56322).A)({batchSize:Math.floor(n(430476).Zj/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=_().RecordMapPolymorphic.create();const t=Array.from(e).flatMap((({value:e})=>e?Object.values(e):[])),r=L().default.mark("sqlite_record_cache.flush_writes.duration");try{await T()._D(this.connection,t);const e={status:"success"};L().default.measure(r,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0})}catch(o){h().log({level:"warning",from:"SqliteRecordCache",type:"applyRecordCacheOperationsError",error:(0,b().convertErrorToLog)(o),data:(0,E().CS)(o,{isBrowser:this.getEnvironment().device.isBrowser})},{forceSuppressConsoleLog:!0});const e={status:"error"};L().default.measure(r,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0})}n(242422).default.checkGate({gateName:"download_for_offline"})||navigator.locks.request("sqliteRecordCacheEviction",{mode:"exclusive",ifAvailable:!0},(async e=>{if(!e)return;const t=await this.getTablesThatNeedEviction();if(0===t.length)return;const r=await(0,n(968913).w3)({environment:this.getEnvironment()});await this.evictTables({tables:t,offlineRecordIds:r})}))},this.debouncedFlushWrites=P().sg(this.flushWrites,500,{maxWait:3e3}),this.throttledLogGetErrorBatched=P().nF(this.logGetErrorBatched,3e3,{leading:!1,trailing:!0}),this.connection=e.connection,this.maxSize=e.maxSize,this.getEnvironment=e.getEnvironment}getDedicatedWorkerConnection_DEBUG_ONLY(){var e,t;return null===(e=(t=this.connection).getDedicatedWorkerConnection_DEBUG_ONLY)||void 0===e?void 0:e.call(t)}set(e){const{pointer:t,value:r,importance:o,maybeStaleRecordMap:i}=e;if(void 0===t||void 0===t.id){const e=new Error("Attempting to set a record with an invalid pointer.");return h().log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:e.stack},data:{pointer:t}}),void n(449412).Fg(e)}const a=e.userId||x().m,s={pointer:t,userId:a,value:r,timestamp:Date.now(),importance:o};this.removePendingWrite(t,a,"delete"),this.enqueueWrite({type:"set",record:s,maybeStaleRecord:i})}async get(e){const{pointer:t,skipAccessWrites:n}=e,r=`get ${U}`,i=e.userId||x().m;let a;U++,this.getLatency.start(r);try{const e=this.getInMemory(t,i);if(e)return n||this.enqueueWrite({type:"access",record:e}),this.getLatency.end(r,"memory"),e.value;a=L().default.mark("sqlite_record_cache.get_record.duration");const o=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:t,userId:i}):this.getFromDiskUnbatched(t,i));if(o){n||this.enqueueWrite({type:"access",record:o}),this.getLatency.end(r,"disk");const e={status:"success"};return L().default.measure(a,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0}),o.value}}catch(s){if(s instanceof E().PW||s instanceof E().lh){this.queuedGetErrors.push(s),this.throttledLogGetErrorBatched();(0,o().checkLocalOnDeviceGate)({gateName:"recover_from_sqlite_corruption"})||this.getEnvironment().defaultRecordCache.disablePersistedRecordCache()}else h().log({level:"warning",from:"SqliteRecordCache",type:"getError",error:(0,b().convertErrorToLog)(s),data:(0,E().CS)(s,{isBrowser:this.getEnvironment().device.isBrowser})},{forceSuppressConsoleLog:!0});const e={status:"error",sqlite_code:(0,E().xY)(s)?s.debugInfo.sqliteCode:void 0};return void(a&&L().default.measure(a,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0}))}finally{this.getLatency.end(r,"miss")}}deleteRecord(e,t){t=t||x().m,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||x().m,r=await T().rH(this.connection,{...e,timestamp:t,userId:n}),o=_().RecordMapPolymorphic.create(),i=P().oE(Array.from(this.pendingWrites).map((r=>{const i=r&&r.value&&n&&r.value[n];if(!i||"set"!==i.type)return;const a=i.record.value?i.record.value.value:void 0;if(!a)return;if(i.record.pointer.table!==C().ev)return;const s=a;return s.parent_id===e.parent.id&&s.parent_table===e.parent.table?(o.set(i.record.pointer,!0),i.record.timestamp<t&&(i.record.timestamp=t),i.record.value):void 0})));for(const a of r)o.get(a.pointer)||this.getInMemory(a.pointer,a.userId)||i.push(a.value);return i}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||x().m,r=await T().NJ(this.connection,{...e,timestamp:t,userId:n});return r.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),r}async getOfflineAutosyncedOrigins(e){const{userId:t,spaceId:n}=e;return await T().M2({connection:this.connection,userId:t,spaceId:n})}async getOfflineCollectionViewBlocksForRefetch(e){const{userId:t,limit:n}=e;return await T().PK({connection:this.connection,userId:t,limit:n})}async getAllOfflineActions(e){const{userId:t}=e;return await T().Mv({connection:this.connection,userId:t})}async getOfflineActions(e){const{impactedPageId:t,userId:n}=e;return await T().Pf({connection:this.connection,impactedPageId:t,userId:n})}async getOfflinePageMetadata(e){return await T().cz({userId:e.userId,pageId:e.pageId,connection:this.connection})}async isOnlyOfflineFromAnotherCollectionViewBlock(e){const{pageId:t,userId:n}=e;return await T().RM({connection:this.connection,pageId:t,userId:n})}async addOfflinePageAndOfflineAction(e){const{userId:t,originAutosyncTypePairs:n,fromPageId:r,impactedPageId:o,downloadStatus:i,spaceId:a}=e;await T().OR({connection:this.connection,userId:t,originAutosyncTypePairs:n,fromPageId:r,impactedPageId:o,downloadStatus:i,spaceId:a})}async updateOfflinePageLastDownloadedMetadata(e){const{pageId:t,userId:n,lastDownloadedAt:r,lastDownloadedVersion:o,lastDownloadedSyncCursor:i}=e;await T().qM({connection:this.connection,pageId:t,userId:n,lastDownloadedAt:r,lastDownloadedVersion:o,lastDownloadedSyncCursor:i})}async getTeams(e){const{spaceId:t,userId:n,includeArchived:r=!1}=e;return await T().ZN({connection:this.connection,spaceId:t,userId:n,includeArchived:r})}async deleteOfflineActionsWithOriginPageIdAndCleanUp(e){const{originPageId:t,userId:n,autosyncTypes:r}=e;return await T().Li({connection:this.connection,originPageId:t,userId:n,autosyncTypes:r})}async removeAllOfflineAutosyncedOrigins(e){const{userId:t,spaceId:n}=e;return await T().zv({connection:this.connection,userId:t,spaceId:n})}async garbageCollectInlineCollections(e){const{userId:t,originPageIds:n,fromPageId:r,keepInlineCollectionViewBlockIds:o}=e;return await T().eA({connection:this.connection,userId:t,originPageIds:n,fromPageId:r,keepInlineCollectionViewBlockIds:o})}async garbageCollectCollectionPages(e){const{userId:t,fromPageId:n,keepBlockIds:r}=e;return await T().Qo({connection:this.connection,userId:t,fromPageId:n,keepBlockIds:r})}async reinitializeOfflineData(e){const{userId:t}=e;return await T().F6({connection:this.connection,userId:t})}async getInlineCollectionsInOfflinePage(e){const{pageId:t,userId:n}=e;return T().ew({connection:this.connection,pageId:t,userId:n})}async setPageDownloadStatusIfNotSuccess(e){const{pageId:t,userId:n,downloadStatus:r}=e;await T().hC({connection:this.connection,pageId:t,userId:n,downloadStatus:r})}async updateOfflineMetadataLastExecutedAt(e){const{userId:t,taskType:n,lastExecutedAt:r}=e;await T().I6({connection:this.connection,userId:t,taskType:n,lastExecutedAt:r})}async getOfflineMetadataLastExecutedAt(e){const{userId:t,taskType:n}=e;return await T().TI({connection:this.connection,userId:t,taskType:n})}async reset(){this.pendingWrites=_().RecordMapPolymorphic.create(),await T().tV(this.connection)}async deleteAllRecordTables(){try{await T().ry(this.connection),await T().lg(this.connection),await T().Wr(this.connection)}catch(e){h().log({level:"error",from:"SqliteRecordCache",type:"deleteAllRecordTablesError",error:(0,b().convertErrorToLog)(e)})}}setEnvironment(e){this.getEnvironment=()=>e}async flushPendingWrites(){await this.flushWrites()}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,r=this.pendingWrites.get(t),o=r&&r[n];if(o){if("set"===o.type&&"access"===e.type){const t={type:"set",record:{...o.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===o.type&&!o.maybeStaleRecord&&o.record.value&&o.record.value.value?o.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),r=n&&n[t];if(r&&"set"===r.type)return r.record}setCacheOperationMap(e,t){const n=t,{pointer:r,userId:o}=n.record,i=e.get(r)||{};e.set(r,{...i,[o]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:r}=t,o=e.get(n)||{};e.set(n,{...o,[r]:t})}removePendingWrite(e,t,n){const r=this.pendingWrites.get(e);r&&r[t]&&r[t].type===n&&this.pendingWrites.delete(e)}logGetErrorBatched(){const e=this.getEnvironment(),t=P().$z(this.queuedGetErrors,(e=>(0,b().convertErrorToLog)(e).message));for(const[n,r]of Object.entries(t)){if(!n)break;h().log({level:"warning",from:"SqliteRecordCache",type:"getErrorBatched",error:(0,b().convertErrorToLog)(r[0]),data:{batchedData:r.map((t=>(0,E().CS)(t,{isBrowser:e.device.isBrowser})))}},{forceSuppressConsoleLog:!0})}this.queuedGetErrors=[]}async getTablesThatNeedEviction(){try{return await T().W3({connection:this.connection,maxSize:this.maxSize})}catch(e){return(0,I().u)({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction.error",eventProperties:{type:"get_tables_failed"}},opts:{preboot:!0}}),h().log({level:"warning",from:"SqliteRecordCache",type:"getTablesThatNeedEvictionFailed",error:(0,b().convertErrorToLog)(e)}),[]}}async evictTables(e){const{tables:t,offlineRecordIds:n}=e;try{await T().$c({connection:this.connection,tables:t,maxSize:this.maxSize,offlineRecordIds:n}),(0,I().u)({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction",eventProperties:{}},opts:{preboot:!0}})}catch(r){(0,I().u)({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction.error",eventProperties:{type:"eviction_failed"}},opts:{preboot:!0}}),h().log({level:"warning",from:"SqliteRecordCache",type:"evictionFailed",error:(0,b().convertErrorToLog)(r)})}}}var R=()=>n(44551),D=()=>n(929219),j=()=>n(206267),B=()=>n(203587),N=()=>n(735270);const O=[WebSocket.OPEN,WebSocket.CONNECTING];class q{constructor(){this.sqliteConnection=void 0,this.requests=new Map,this.debug=!1}async initialize(){const e=await this.getConnectionType();try{this.debug=Boolean(window.localStorage.getItem("sqlitedebug"))}catch{}"message-ports"===e?await this.initializeMessagePort():await this.initializeWebSocket()}async getConnectionType(){const{preferences:e}=await r().Zq.get()||{};if("message-ports"===(null==e?void 0:e.sqliteConnectionType))return"message-ports";const t=(0,n(751629).getDesktopVersion)();if(t&&t[0]>=4)return"message-ports";const o=navigator.userAgent.match(/Notion\/(\d+\.\d+\.\d+)/);if(o){const[,e]=o,[t]=e.split(".").map(Number);if(t>=4)return"message-ports"}return null!==R().electronApi&&void 0!==R().electronApi&&R().electronApi.sqliteServerEnabled?"web-sockets":null}async initializeMessagePort(){await this.initializeMessagePortConnection();try{const e=D().A.state.online;(0,o().checkLocalOnDeviceGate)({gateName:"recover_from_sqlite_corruption"})&&e&&await this.enableCorruptionRepair()}catch(e){}try{this.sqliteConnection=await this.createOrReinitializeSqliteConnection()}catch(e){}}async initializeWebSocket(){await this.initializeWebSocketConnection(),this.sqliteConnection=await this.createOrReinitializeSqliteConnection()}createMessagePortBaseConnection(){return{execSqliteBatchV2:async({batch:e,precondition:t})=>this.execSqliteBatchInnerMessagePort({id:j().JW(),batch:e,precondition:t}),execSqliteBatch:async e=>this.execSqliteBatchInnerMessagePort({id:j().JW(),batch:e}),completelyRebuildSqliteDb:async()=>this.completelyRebuildSqliteDbInnerMessagePort(j().JW())}}createWebSocketBaseConnection(){return{execSqliteBatchV2:async e=>{const t=j().JW(),{batch:n,precondition:r}=e,o=JSON.stringify({id:t,batch:n,precondition:r,auth:this.authToken});return await this.execSqliteBatchInnerWebSockets(t,o)},execSqliteBatch:async e=>{const t=j().JW(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInnerWebSockets(t,n)},completelyRebuildSqliteDb:async()=>{}}}async createOrReinitializeSqliteConnection(){try{let e;e="message-ports"===await this.getConnectionType()?this.createMessagePortBaseConnection():this.createWebSocketBaseConnection();const t=await(0,B().G)(e);if(this.sqliteConnection)return this.sqliteConnection.reinitialize({connection:e,type:"v2",migrations:t}),this.sqliteConnection;return new(N().i)({connection:e,type:"v2",migrations:t,debug:this.debug})}catch(e){throw e}}async execSqliteBatchInnerWebSockets(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(o){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const r=await n;if(r.error)throw new Error("Received SQLite error.",{cause:r.error});return r.value}async execSqliteBatchInnerMessagePort(e){const t=new Promise((t=>{this.requests.set(e.id,t)}));if(this.messagePort||await this.initializeMessagePortConnection(),!this.messagePort)throw new Error("Message port not initialized.");this.messagePort.postMessage(e);const n=await t;if(n.error)throw new Error("Received SQLite error.",{cause:n.error});return n.value}async completelyRebuildSqliteDbInnerMessagePort(e){const t={id:e,command:"completelyRebuildSqliteDb",batch:{body:[],onError:void 0}},n=new Promise((e=>{this.requests.set(t.id,e)}));if(this.messagePort||await this.initializeMessagePortConnection(),!this.messagePort)throw new Error("Message port not initialized.");this.messagePort.postMessage(t);const r=await n;if(r.error)throw new Error("completelyRebuildSqliteDb error.",{cause:r.error})}async enableCorruptionRepairInnerMessagePort(e){const t={id:e,command:"enableCorruptionRepair",batch:{body:[],onError:void 0}},n=new Promise((e=>{this.requests.set(t.id,e)}));if(this.messagePort||await this.initializeMessagePortConnection(),!this.messagePort)throw new Error("Message port not initialized.");this.messagePort.postMessage(t);const r=await n;if(r.error)throw new Error("enableCorruptionRepair error.",{cause:r.error})}async disableCorruptionRepairInnerMessagePort(e){const t={id:e,command:"disableCorruptionRepair",batch:{body:[],onError:void 0}},n=new Promise((e=>{this.requests.set(t.id,e)}));if(this.messagePort||await this.initializeMessagePortConnection(),!this.messagePort)throw new Error("Message port not initialized.");this.messagePort.postMessage(t);const r=await n;if(r.error)throw new Error("disableCorruptionRepair error.",{cause:r.error})}async restoreBackupInnerMessagePort(e){const t={id:e,command:"restoreBackup",batch:{body:[],onError:void 0}},n=new Promise((e=>{this.requests.set(t.id,e)}));if(this.messagePort||await this.initializeMessagePortConnection(),!this.messagePort)throw new Error("Message port not initialized.");this.messagePort.postMessage(t);const r=await n;if(r.error)throw new Error("restoreBackup error.",{cause:r.error})}async initializeMessagePortConnection(){return(0,n(763824).qt)((async e=>{if(null===R().electronApi||void 0===R().electronApi||!R().electronApi.getSqliteMeta)return void e();if(this.messagePort)return void e();const t=n=>{try{if(!n.ports.length||n.source!==window)return;this.messagePort=n.ports[0],this.messagePort.onclose=()=>{this.messagePort=void 0},this.messagePort.onmessage=async e=>{const{type:t,id:n,result:r}=e.data;if("backupAndResetDatabaseComplete"===t)return void(await this.handleBackupAndResetDatabaseComplete());const o=this.requests.get(n);o&&(this.requests.delete(n),o({value:r}))},window.removeEventListener("message",t),e()}catch(r){h().log({level:"error",from:"electronSqlite",type:"messagePortError",error:(0,b().convertErrorToLog)(r)})}};window.addEventListener("message",t);(await R().electronApi.getSqliteMeta()).error}))}async initializeWebSocketConnection(){if(null===R().electronApi||void 0===R().electronApi||!R().electronApi.getSqliteMeta)return;const e=await R().electronApi.getSqliteMeta();if(e.error)return;if(this.ws&&O.includes(this.ws.readyState))return;const{serverProcessPort:t,authToken:n}=e.value;this.authToken=n;const r=`ws://127.0.0.1:${t}`;this.ws=new WebSocket(r),this.ws.onclose=()=>{h().log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocketConnection()},this.ws.addEventListener("message",(async e=>{const t=e.data.toString(),{type:n,id:r,result:o}=JSON.parse(t);if("backupAndResetDatabaseComplete"===n)return void(await this.handleBackupAndResetDatabaseComplete());const i=this.requests.get(r);i&&(this.requests.delete(r),i({value:o}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}async enableCorruptionRepair(){await this.enableCorruptionRepairInnerMessagePort(j().JW())}async disableCorruptionRepair(){await this.disableCorruptionRepairInnerMessagePort(j().JW())}async handleBackupAndResetDatabaseComplete(){try{if(await this.initialize(),!this.sqliteConnection)return;await this.sqliteConnection.ensureMigrated(),await this.restoreBackup()}catch(e){}}async restoreBackup(){await this.restoreBackupInnerMessagePort(j().JW())}}n(814603),n(147566),n(198721);var z=()=>n(681335);class W{constructor(e){this.tabId=void 0,this.initializePromise=void 0,this.sharedWorkerConnection=void 0,this.dedicatedWorkerConnection=void 0,this.lockAcquired=!1,this.observer=new(n(255670).P)({execSqliteBatch:e=>this.unobservedExecSqliteBatch(e),completelyRebuildSqliteDb:()=>this.unobservedCompletelyRebuildSqliteDb()}),this.args=e,this.tabId=j().JW(),this.initializePromise=this.initialize(e)}async waitForInitialize(){await this.initializePromise}execSqliteBatch(e){return this.observer.connection.execSqliteBatch(e)}async unobservedExecSqliteBatch(e){const{sqliteConnectionManager:t}=await this.initializePromise;return t.execSqliteBatch(e)}completelyRebuildSqliteDb(){return this.observer.connection.completelyRebuildSqliteDb()}async unobservedCompletelyRebuildSqliteDb(){const{sqliteConnectionManager:e}=await this.initializePromise;return e.completelyRebuildSqliteDb()}async enableCorruptionRepair(){try{const{sharedWorkerConnection:e}=await this.initializePromise;await e.enableCorruptionRepair()}catch(e){}}async disableCorruptionRepair(){try{const{sharedWorkerConnection:e}=await this.initializePromise;await e.disableCorruptionRepair()}catch(e){}}getObserver(){return this.observer}getDedicatedWorkerConnection_DEBUG_ONLY(){return this.dedicatedWorkerConnection}async initialize(e){const{loadWorker:t,loadSharedWorker:r}=e,i=t(),a=r();this.sharedWorkerConnection??=z().LV(a.port);const s=this.sharedWorkerConnection;this.dedicatedWorkerConnection??=z().LV(i);const c=this.dedicatedWorkerConnection,l={initialize:()=>c.initialize(),execSqliteBatch:e=>c.execSqliteBatch(e),execSqliteBatchV2:e=>c.execSqliteBatchV2(e),completelyRebuildSqliteDb:()=>c.completelyRebuildSqliteDb(),handleBackupAndResetDatabaseComplete:()=>this.handleBackupAndResetDatabaseComplete()};z().p(l,a.port);try{const e=D().A.state.online;(0,o().checkLocalOnDeviceGate)({gateName:"recover_from_sqlite_corruption"})&&e&&await s.enableCorruptionRepair()}catch(m){}var d;this.lockAcquired||(await(d=n(714681).S(this.tabId),new Promise(((e,t)=>{navigator.locks.request(d,(()=>(e(),new Promise((()=>{}))))).catch(t)}))),this.lockAcquired=!0),await s.initializeNewTab({tabId:this.tabId});const u={execSqliteBatch:e=>s.execSqliteBatch(e),execSqliteBatchV2:e=>s.execSqliteBatchV2(e),completelyRebuildSqliteDb:()=>s.completelyRebuildSqliteDb()},p=new(N().i)({connection:u,type:"v2",migrations:await(0,B().G)(u)});try{await p.ensureMigrated()}catch(m){h().log({level:"error",from:"ProxiedWasmSqliteConnectionWrapper",type:"sqliteConnectionEnsureMigratedError",error:(0,b().convertErrorToLog)(m),data:(0,E().CS)(m,{isBrowser:!0})})}return p.optimize().catch((e=>{h().log({level:"error",from:"ProxiedWasmSqliteConnectionWrapper",type:"sqliteConnectionOptimizeError",error:(0,b().convertErrorToLog)(e),data:(0,E().CS)(e,{isBrowser:!0})})})),{sqliteConnectionManager:p,sharedWorkerConnection:s}}async handleBackupAndResetDatabaseComplete(){try{this.initializePromise=this.initialize(this.args);const{sqliteConnectionManager:e,sharedWorkerConnection:t}=await this.initializePromise;if(!t)return;await e.ensureMigrated(),await t.restoreBackup()}catch(e){}}}class F{constructor(e){this.sqliteConnection=void 0,this.sqliteConnection=new W({loadWorker:()=>new Worker(new URL(n.p+n.u(75528),n.b)),loadSharedWorker:()=>new SharedWorker(new URL(n.p+n.u(33429),n.b)),currentUserId:e.currentUserId})}static maybeCreateInstance(e){const{device:t,currentUserId:n}=e;if(function(e){var t;return!(!e.isBrowser||"undefined"==typeof navigator||void 0===(null===(t=navigator.locks)||void 0===t?void 0:t.request)||"undefined"==typeof SharedWorker||"localhost"===window.location.hostname&&"3003"!==window.location.port||e.isAndroid)}(t)){K("loading");const e=new F({currentUserId:n});return e.waitForInitialize().then((()=>{K("success")}),(e=>{K("error"),h().log({level:"error",from:"clientEnvironment",type:"wasmSqliteInitializeError",error:(0,b().convertErrorToLog)(e),data:{...(0,E().CS)(e,{isBrowser:!0}),userId:n}})})),e}K("skipped-unsupported-device")}async waitForInitialize(){return await this.sqliteConnection.waitForInitialize()}async enableCorruptionRepair(){await this.sqliteConnection.enableCorruptionRepair()}async disableCorruptionRepair(){await this.sqliteConnection.disableCorruptionRepair()}}function K(e){n(961581).A.state.metricDataStore.update((t=>({...t,wasm_sqlite_initialized:e})))}var V=()=>n(757695);class $ extends V().Store{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===n(201980).IcF(t).length)return;const r=n(771467).V.load();this.setState({loading:!0,loaded:!1,result:r}),this.setState({loading:!1,loaded:!0,result:await r})}getKatex(){if(this.state.loaded)return this.state.result}}n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(354520),n(908872),n(737550);var H=()=>n(763884),G=()=>n(720665),J=()=>n(941541),Z=()=>n(589994);class Q extends V().Store{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks({block:e,currentUserId:t,environment:n}){if(this.instanceState[e.id])return;const r=this.getCachedBacklinkState({blockId:e.id,currentUserId:t});r?this.setState({...this.instanceState,[e.id]:{state:r,loaded:!0}}):this.setState({...this.instanceState,[e.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),X(n,e),this.startMessageListeners(e,n)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState({blockId:e,currentUserId:t}){const n=this.state[e];return n?n.state:this.getCachedBacklinkState({blockId:e,currentUserId:t})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState({blockId:e,state:t,currentUserId:n}){this.setCachedBacklinkState({blockId:e,state:t,currentUserId:n});const r=this.state[e];r&&this.setState({...this.state,[e]:{...r,state:t,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:r}=e,o=(0,G().qt)(t),i=(0,G().qt)(n),a=o.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),s=i.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),c=new Set([...Object.keys(a),...Object.keys(s)]);return c.forEach((e=>{const t=a[e]||[],n=s[e]||[],o=this.getBacklinkState({blockId:e,currentUserId:r}),i=t.filter((e=>!o.backlinks.some((t=>P().n4(e,t))))),c=[...o.backlinks,...i].filter((e=>!n.some((t=>P().n4(e,t)))));this.setBacklinkState({blockId:e,state:{...o,backlinks:c},currentUserId:r})})),Array.from(c)}resetBacklinkState({blockIds:e,currentUserId:t}){for(const n of e)this.setCachedBacklinkState({blockId:n,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:t})}getCachedBacklinkState({blockId:e,currentUserId:t}){return H().K.get({userId:t,key:Q.getCacheKey(e)})}setCachedBacklinkState({blockId:e,state:t,currentUserId:n}){return H().K.set({userId:n,key:Q.getCacheKey(e),value:t})}async startMessageListeners(e,t){const r=n(696706).L3.fromSpaceShardRecordId(e,C().ev);Z().transactionQueue.isPendingTransactionForRecord(r)&&await Z().transactionQueue.drain();const o=this.instanceState[r.id];if(!o)return;let i,a=!1;const s=P().nF((({value:n})=>{const r=i,o=n||void 0;i=o,a?r!==o&&X(t,e):a=!0}),1e3),c=(0,n(921997).U)(r.id);o.messageStoreListenerReference=J().Ay.addListener(c,void 0,s,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(J().Ay.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function X(e,t){await Z().transactionQueue.awaitRecordTransaction({id:t.id,table:C().ev});const r=(0,n(851941).dR)(t.id),o=r?{"x-notion-space-short-id":r.toString()}:t.spaceId?{"x-notion-space-id":t.spaceId}:{},i=n(559506).callMultiCellApi({eventName:"getPageBacklinks",environment:e,data:{block:t},headers:o}),a=[];let s=0;for await(const n of i)"failed"!==n.type&&(a.push(...n.data.backlinks),s+=n.data.inaccessibleBacklinkCount,e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:a,inaccessibleBacklinkCount:s},currentUserId:e.currentUser.id}))}function Y(e){return`PageDetailsStore:${e.type}:${e.id}`}class ee extends V().Store{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,n(534177).HB)(e)}getToggleState(e){const t=Y(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=Y(e);this.setState({...this.state,[n]:t})}}var te=()=>n(671887),ne=()=>n(877050),re=()=>n(994310);const oe="spellcheckEnabled";class ie{constructor(){this.enabled=void 0,this.currentLanguages=void 0;const e=re().A.get(oe);this.setEnabled(void 0===e||e)}setEnabled(e){this.enabled=e,re().A.set(oe,e),null!==r().Ht&&void 0!==r().Ht&&r().Ht.setSpellCheckerEnabled&&(null===r().Ht||void 0===r().Ht||r().Ht.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){null!==r().Ht&&void 0!==r().Ht&&r().Ht.addToDictionary&&r().Ht.addToDictionary(e)}setLanguages(e){P().n4(this.currentLanguages,e)||(this.currentLanguages=e,null!==r().Ht&&void 0!==r().Ht&&r().Ht.setSpellCheckerLanguages&&r().Ht.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){const e=new Intl.DisplayNames([navigator.language],{type:"language"}),t=[];if(null!==r().Ht&&void 0!==r().Ht&&r().Ht.getSpellCheckerLanguages){const n=await r().Ht.getSpellCheckerLanguages();for(const r of n)t.push({code:r,name:e.of(r)})}return t}async getAvailableLanguages(){const e=new Intl.DisplayNames([navigator.language],{type:"language"}),t=[];if(null!==r().Ht&&void 0!==r().Ht&&r().Ht.getAvailableSpellCheckerLanguages){const n=await r().Ht.getAvailableSpellCheckerLanguages();for(const r of n)t.push({code:r,name:e.of(r)})}return t}}let ae=0;async function se(e){const{minimalEnvironment:t,prefetchCache:n,currentUserId:I}=e,{device:_,deviceStore:C,mobileNative:E,cookieService:x,queryClient:T}=t,P=""+ae++,L=_.isElectron&&Boolean(null===r().Ht||void 0===r().Ht?void 0:r().Ht.sqliteServerEnabled)?await async function(e){if(!e.device.isElectron||null===R().electronApi||void 0===R().electronApi||!R().electronApi.sqliteServerEnabled)return;const t=new q;return await t.initialize(),t}({device:_}):void 0,U=F.maybeCreateInstance({device:_,currentUserId:I}),D=new(p().A),j=new(m().Bd),B=new(v().A),N=new ie,O=(null==E?void 0:E.sqliteConnection)||(null==L?void 0:L.sqliteConnection)||(null==U?void 0:U.sqliteConnection),z=O?new M({connection:O,maxSize:_.isDesktop?1e6:1e5,getEnvironment:function(){return Z}}):void 0,W=new(s().L)({inMemoryRecordCache:new(a().A)({name:"default"}),persistedRecordCache:z});U&&U.waitForInitialize().catch((e=>{(0,o().checkLocalOnDeviceGate)({gateName:"recover_from_sqlite_corruption"})||W.disablePersistedRecordCache()}));const K=(0,ne().OH)({device:_,RouterStore:D,ThemeStore:B}),V=await w().getPublicDomainUserId({device:_,deviceStore:C,mobileNative:E,cookieService:x,queryClient:T}),H=new(l().CurrentUser),G=new y({environmentName:"production",getSettings:()=>({enableIdSchema:!0}),isServerOriginated:!1,currentUserId:I,mapSpaceIdToShortId:(e,t)=>{const n=(0,A().Jn)({defaultRecordCache:W,userId:e,spaceId:t});if(n&&n.short_id_str)return Number(n.short_id_str);const r=te().D.getState();if(r&&t in r){const e=r[t];return Number(e)}}}),J=await(0,c().getHtmlStreamQueueEntry)("bootData").catch((e=>{h().log({level:"warning",from:"clientEnvironment",type:"BootDataError",error:(0,b().convertErrorToLog)(e)})}))??void 0,Z={key:P,AppUpdateStore:new(d().I),device:_,deviceStore:C,WindowSizeStore:new(g().nJ)({device:_},window),KeyboardShortcutsStore:i().getKeyboardShortcutsStore(),KeyboardShortcutStackStore:new(u().X),defaultRecordCache:W,mobileNative:E,RouterStore:D,ThemeStore:B,ThemeModeStore:K,ElectronSqlite:L,WasmSqlite:U,sqliteConnection:O,queryClient:T,KatexStore:new $,LocalBacklinkStore:new Q,PageDetailsStore:new ee,updateCurrentUserId:void 0,currentUser:H,SpellCheckService:N,TextSelectionCompositionStore:new(f().P),recordSubscriptionActions:k(),prefetchCache:n,TabbedRouterStore:j,cookieService:x,publicDomainUserId:V,idCreator:G,bootData:J};return S().uh(Z),Z}},903659:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(296540),o=()=>n(56366),i=()=>n(93658),a=n(474848);const s=function(e){const t=(0,n(484714).Y0)(),s=(0,o().K8)((()=>({initiator:n(353643).A.state.initiator,isDragging:n(861841).Ay.state.isDragging})),[]),c=(0,o().K8)((()=>i().default.state.isActive),[]),l=(0,o().K8)((()=>!!i().default.state.isActive&&i().default.state.moved?"default":s.isDragging?"-webkit-grabbing":"text"),[s.isDragging]),d=(0,r.useMemo)((()=>{let e="notion-cursor-listener";return"-webkit-grabbing"===l&&(e+=" notion-disable-local-cursor"),e}),[l]);return(0,r.useEffect)((()=>{t.isIOS&&("touch"===s.initiator||s.isDragging||c?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select"))}),[t.isIOS,s.initiator,s.isDragging,c]),(0,a.jsx)("div",{style:{...e.style,cursor:l},className:d,children:e.children})}},922644:(e,t,n)=>{n.d(t,{T:()=>qa});var r=n(296540),o=()=>n(59226),i=()=>n(726637),a=()=>n(662303),s=()=>n(484714),c=()=>n(956250),l=()=>n(91076),d=()=>n(275144),u=()=>n(852507),p=()=>n(56366),m=()=>n(554279),f=()=>n(885443),v=()=>n(939768),g=()=>n(720665);const h="personalization";let b;function S(e){if(!function(e){return!b&&!!(0,v().qn)(e,h)}(e))return;const t=(0,v().qn)(e,h);if(t){const e=decodeURIComponent(t),n=(0,g().$l)(e);n&&(b=n)}const n=(0,v().qm)(e,h);window.history.replaceState(window.history.state,"",n)}var y=()=>n(402390),w=()=>n(572857),A=()=>n(824772),k=()=>n(314529),I=()=>n(206267),_=()=>n(765957),C=()=>n(625750),E=()=>n(763884);function x(e){const t=E().K.get({userId:e.userId,key:`${e.spaceId}:analytics_session`});if(!(t&&Date.now()-t.lastFocusedTime>C().o))return t}function T(e){E().K.set({userId:e.userId,key:`${e.spaceId}:analytics_session`,value:e.session})}const P=6e4;async function L(e){var t,n;void 0!==_().default.state.currentUserStore&&void 0!==_().default.state.sidebarSpaceStore||await _().default.waitUntil((()=>void 0!==_().default.state.currentUserStore&&void 0!==_().default.state.sidebarSpaceStore));const r=null===(t=_().default.state.currentUserStore)||void 0===t?void 0:t.id,o=null===(n=_().default.state.sidebarSpaceStore)||void 0===n?void 0:n.id;if(!document.hasFocus())return;if(!r||!o)return;const i=x({userId:r,spaceId:o}),a=Date.now();T(i?{userId:r,spaceId:o,session:{...i,lastFocusedTime:a}}:{userId:r,spaceId:o,session:{id:I().JW(),sessionStartTime:a,lastFocusedTime:a}})}var U=()=>n(645873);const M=new(U().O2)("thirdPartyScripts",(()=>n.e(1978).then(n.bind(n,63620)))),R=(0,U()._h)(M,(e=>e.InjectThirdPartyScripts));n(898992),n(354520),n(581454);var D=()=>n(564884),j=()=>n(20022),B=()=>n(165358),N=()=>n(496603),O=()=>n(229833),q=()=>n(615234),z=()=>n(534177),W=()=>n(549500),F=()=>n(44551);function K(e,t){var n;null===F().electronApi||void 0===F().electronApi||null===(n=F().electronApi.initializeRunningInputAudioProcessDetection)||void 0===n||n.call(F().electronApi,e,t)}var V=()=>n(236357),$=()=>n(242422),H=()=>n(973647),G=()=>n(76753);var J=()=>n(929871);async function Z(e){if($().default.checkGate({gateName:"meeting_notes_detection_process_result"})){const t=await(0,G().K)();if(H().Q.isFail(t))return!0;if(t.value.processes.map(J().v).filter(z().O9).includes(e))return!0;const n=await async function(){if(!F().electronApi||!F().electronApi.getProcessesAccessingSpeakersWithResult)return H().Q.fail({message:"API not available"});try{return await F().electronApi.getProcessesAccessingSpeakersWithResult()}catch(e){return H().Q.fail({message:"Failed to get speaker processes",error:e})}}();if(H().Q.isFail(n)){const e=n.error;return"API not available"!==(null==e?void 0:e.message)}return n.value.processes.map((e=>(0,J().v)(e.processName))).filter(z().O9).includes(e)}{const t=await async function(){if(!F().electronApi||!F().electronApi.getRunningInputAudioProcesses)return H().Q.fail({message:"API not available"});try{return await F().electronApi.getRunningInputAudioProcesses()}catch(e){return H().Q.fail({message:"Failed to get audio processes",error:e})}}();if(H().Q.isFail(t))return!0;return t.value.map(J().v).filter(z().O9).includes(e)}}var Q=()=>n(540144),X=(n(944114),n(430670),()=>n(982254)),Y=()=>n(148832),ee=()=>n(964345);function te(){const e=(0,p().O$)(_().AppStoreSidebarSpaceStore);return(0,p().K8)((()=>{const t=X().A.state.tabs,n=ee().ei.state,r=[];return null!=n&&n.isTranscriptionBlock()&&r.push(n),r.push(...t.flatMap((e=>e.activeBlocks)).flatMap((t=>{if(!t)return[];if(!e)return[];const n=Y().B.createChildStore(e,t.pointer);return n.isTranscriptionBlock()&&r.push(n),[]}))),N().hS(r,"id")}),[e])}var ne=()=>n(249696);async function re({environment:e,activeTranscriptionBlockStore:t,currentlyRunningAudioProcessNames:n,previouslyDetectedProcessNames:r}){if(void 0!==t){const i=function(e,t){for(const n of t)if(!e.includes(n))return{shouldStop:!0,processName:n};return{shouldStop:!1}}(n,r);if(i.shouldStop&&i.processName)try{if(await Z(i.processName))return void B().log({level:"info",from:"meetingNotesDetection",type:"process_still_running_after_debounce_check",data:{miscDataToConvertToString:{processName:i.processName,currentlyRunningAudioProcessNames:n,previouslyDetectedProcessNames:r}}});await async function(e){const{environment:t,processName:n,currentlyRunningAudioProcessNames:r,previouslyDetectedProcessNames:o,activeTranscriptionBlockStore:i}=e,a=(0,Q().by)(i);if("transcribing"!==a.state)return;(0,D().u)({environment:t,event:{eventName:"system_audio_process_stopped",eventProperties:{process_name:n,currently_running_audio_processes:r,previously_running_audio_processes:o,block_id:i.id}}});const s=await W().$O.load();await s.transcriptionBlockActions.stopTranscription({environment:t,blockStore:i,from:"audio_process_detection"})}({environment:e,processName:i.processName,currentlyRunningAudioProcessNames:n,previouslyDetectedProcessNames:r,activeTranscriptionBlockStore:t})}catch(o){B().log({level:"error",from:"meetingNotesDetection",type:"error_stopping_transcription_for_audio_process",error:(0,O().convertErrorToLog)(o),data:{miscDataToConvertToString:{processName:i.processName,currentlyRunningAudioProcessNames:n,previouslyDetectedProcessNames:r,activeTranscriptionBlockId:t.id}}})}}else{const t=function(e,t){for(const n of e)if(!t.includes(n))return{shouldNotify:!0,processName:n};return{shouldNotify:!1}}(n,r);if(t.shouldNotify&&t.processName)try{(await W().$O.load()).audioProcessDetectionActions.sendNotificationForRunningAudioProcess(e,t.processName)}catch(o){B().log({level:"error",from:"meetingNotesDetection",type:"error_sending_notification_for_audio_process",error:(0,O().convertErrorToLog)(o),data:{miscDataToConvertToString:{processName:t.processName,currentlyRunningAudioProcessNames:n,previouslyDetectedProcessNames:r}}})}}}function oe({isActiveTab:e}){return function(e){const t=(0,s().v3)(),n=(0,ne().W)(),o=t.device.isElectron&&e&&n,i=te(),a=(0,r.useRef)(i);a.current=i;const c=(0,r.useCallback)((async(e,n)=>{const r=a.current;await re({environment:t,activeTranscriptionBlockStore:r[0],currentlyRunningAudioProcessNames:e,previouslyDetectedProcessNames:n})}),[t]),l=(0,r.useMemo)((()=>(0,N().sg)(c,4*q().TD,{trailing:!0})),[c]),d=(0,r.useCallback)((async(e,t,n)=>{if(o)try{if(!(await(0,V().a)()))return;const e=n.map(J().v).filter(z().O9),r=t.map(J().v).filter(z().O9);if(B().log({level:"info",from:"meetingNotesDetection",type:"microphone_process_changed_detected",data:{miscDataToConvertToString:{oldProcessCount:r.length,newProcessCount:e.length,oldProcesses:r,newProcesses:e,oldProcessesUnfiltered:t,newProcessesUnfiltered:n}}}),(0,N().n4)(e,r))return;await l(e,r)}catch(r){B().log({level:"error",from:"meetingNotesDetection",type:"error_in_audio_process_listener",error:(0,O().convertErrorToLog)(r),data:{miscDataToConvertToString:{oldProcesses:t,newProcesses:n}}})}}),[o,l]);(0,r.useEffect)((()=>j().bH.addListener(d)),[d]),(0,r.useEffect)((()=>{o&&K(1e3,!1)}),[o]),(0,r.useEffect)((()=>()=>{l.cancel()}),[l])}(e),null}function ie(e){const{fn:t,processName:n,delayMs:r}=e;setTimeout((async()=>{await Z(n)||t()}),r)}async function ae(e){const{environment:t,processName:n,currentlyRunningAudioProcessNames:r,previouslyDetectedProcessNames:o,activeTranscriptionBlockStore:i}=e;if("transcribing"!==(0,Q().by)(i).state)return;(0,D().u)({environment:t,event:{eventName:"system_audio_process_stopped",eventProperties:{process_name:n,currently_running_audio_processes:r,previously_running_audio_processes:o,block_id:i.id}}});(await W().$O.load()).transcriptionBlockActions.stopTranscription({environment:t,blockStore:i,from:"audio_process_detection"})}function se({isActiveTab:e}){return function(e){const t=(0,s().v3)(),n=(0,ne().W)(),o=t.device.isElectron&&e&&n,i=te(),a=(0,r.useCallback)((async(e,n,r)=>{if(!o)return;if(!(await(0,V().a)()))return;const a=r.map(J().v).filter(z().O9),s=n.map(J().v).filter(z().O9);B().log({level:"info",from:"meetingNotesDetection",type:"microphone_process_changed_detected",data:{miscDataToConvertToString:{oldProcessCount:s.length,newProcessCount:a.length,oldProcesses:s,newProcesses:a,oldProcessesUnfiltered:n,newProcessesUnfiltered:r}}});for(const o of a){if(i.length>0)break;if(!s.includes(o)){(await W().$O.load()).audioProcessDetectionActions.sendNotificationForRunningAudioProcess(t,o);break}}const c=i[0];for(const o of s)if(!a.includes(o)&&c){ie({fn:()=>ae({environment:t,processName:o,currentlyRunningAudioProcessNames:a,previouslyDetectedProcessNames:s,activeTranscriptionBlockStore:c}),processName:o,delayMs:2*q().TD});break}}),[t,o,i]);(0,r.useEffect)((()=>j().bH.addListener(a)),[a]),(0,r.useEffect)((()=>{o&&K(1e3,!1)}),[o])}(e),null}var ce=()=>n(112995),le=()=>n(38337),de=()=>n(187174),ue=()=>n(267785),pe=()=>n(529543);const me={GlobalInAppMessageListener:new(U().O2)("GlobalInAppMessageListener",(()=>n.e(94869).then(n.bind(n,793383))))},fe=(0,U()._h)(me.GlobalInAppMessageListener,(e=>e.GlobalInAppMessageListener));var ve=()=>n(135055),ge=()=>n(224392),he=()=>n(15601),be=()=>n(424127),Se=()=>n(828036);function ye(){const e=(0,ve().y6)(),t=function(e){const t=(0,s().v3)(),{spaceId:n,orderBy:r,limit:o}=e??{},i=t.currentUser.id,a=i?(0,Se().m)({userId:i,spaceId:n,orderBy:r,limit:o}):void 0,{value:c}=(0,be().uW)("useOfflinePages",a,{allowError:!0,rowType:he().mL});return c}();(0,r.useEffect)((()=>{e&&t&&(0,ge().e)(t)}),[e,t])}var we=()=>n(12314),Ae=()=>n(99040),ke=()=>n(401497),Ie=()=>n(929219),_e=()=>n(69708),Ce=()=>n(284371),Ee=()=>n(471995),xe=()=>n(288782),Te=()=>n(968913),Pe=()=>n(959462),Le=n(474848);function Ue(){const e=(0,_e().tz)(),t=(0,ke().DP)(),n=!(0,p().O$)(Ie().e),o=(0,p().K8)((()=>(0,xe().s)()),[]),i=(0,r.useRef)(n),a=(0,r.useRef)(o);(0,r.useEffect)((()=>{!n||i.current&&o===a.current||function(e){var t;const{isOffline:n,currentPageId:r,intl:o,theme:i}=e;if(!(Pe().A.state.offlinePages&&$().default.checkGate({gateName:"download_for_offline"})&&n&&r&&(0,Te().Bd)(r)))return;const a=null===(t=Pe().A.state.offlinePages[r])||void 0===t?void 0:t.last_downloaded_at,s=a?o.formatDate(a,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"}):void 0;Ee().D6({label:(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontWeight:Ce().Wy.medium},children:(0,Le.jsx)(_e().sA,{defaultMessage:"Working offline",id:"offlinePages.snackbar.title"})}),a?(0,Le.jsx)("div",{style:{color:i.text.secondary},children:(0,Le.jsx)(_e().sA,{defaultMessage:"Last sync on {lastDownloadedAtFormatted}.",id:"offlinePages.snackbar.description",values:{lastDownloadedAtFormatted:s}})}):void 0]})})}({isOffline:n,currentPageId:o,intl:e,theme:t}),i.current=n,a.current=o}),[n,o,e,t])}var Me=()=>n(249847),Re=()=>n(152197),De=()=>n(870991);const je=5*q().Xb;var Be=()=>n(865085);function Ne(){const e=function(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{$().default.waitUntilStatsigReadyAsync().then((()=>{t(!0)}))}),[]),e}();(0,r.useEffect)((()=>{if(!e)return;const t="on"===$().default.getEligibleGroup({experimentId:"opfs_page_cache",defaultGroup:"control"}),n=$().default.getConfig({configName:"opfs_recordmap_cache_options"}),r="on"===$().default.getEligibleGroup({experimentId:"opfs_page_cache_pre_process_first_chunk",defaultGroup:"control",enableEventTrailLogging:!0});Be().OPFSBootupRegistry.updateLocalStorageFromStatsig({isEnabled:t,options:n,preProcessFirstChunk:r})}),[e])}var Oe=()=>n(346),qe=()=>n(273915);const ze=new(U().O2)("LazyNotionCalendarListener",(()=>Promise.all([n.e(32254),n.e(16704)]).then(n.bind(n,4455)))),We=(0,U()._h)(ze,(e=>e.default));function Fe(){return(0,qe().L)()?(0,Le.jsx)(We,{}):null}var Ke=()=>n(591779);async function Ve(e){var t,n;await(null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.networkEmulation)||void 0===t||null===(n=t.setEmulation)||void 0===n?void 0:n.call(t,e))}var $e=()=>n(137493);function He(){const e=(0,p().O$)($e().j),t=(0,o().X)("simulate_offline");(0,r.useEffect)((()=>{Ge("simulate_offline_set_value_in_local_storage",(()=>{t&&void 0===e&&$e().j.setState({shouldSimulateOffline:!1,lastUpdatedTime:Date.now()})}))}),[t,e]);const n=(0,p().K8)((()=>{var e;return null===(e=$e().j.state)||void 0===e?void 0:e.shouldSimulateOffline}),[]),i=(0,Ke().ZC)(n);(0,r.useEffect)((()=>{Ge("simulate_offline_update_electron_with_new_value",(async()=>{if(!t)return;if(void 0===n)return;("boolean"==typeof i&&n!==i||void 0===i&&!0===n)&&(n?await Ve({title:"Offline",requestsAllowed:"none"}):await Ve({title:"Online (No throttling)",requestsAllowed:"all",latency:0,downloadThroughput:-1}))}))}),[t,n,i]),(0,r.useEffect)((()=>{}),[])}async function Ge(e,t){var n;return"undefined"==typeof navigator||void 0===(null===(n=navigator.locks)||void 0===n?void 0:n.request)?t():await navigator.locks.request(e,{ifAvailable:!0},(async e=>{if(e)return t()}))}n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const Je=(0,n(583835).Dv)("extractWebClipperContent");var Ze=()=>n(578194),Qe=()=>n(559506),Xe=()=>n(787172),Ye=()=>n(357625),et=()=>n(864260),tt=()=>n(302022);const nt=new(n(752196).A);var rt=()=>n(175320),ot=()=>n(20822);var it=()=>n(457395),at=()=>n(636725),st=()=>n(151059);function ct(){const e=(0,s().v3)(),t=(0,p().K8)((()=>_().default.state.currentUserRootStore),[]);(0,r.useEffect)((()=>{t&&async function(e,t){await it().y();const n=t.getSpaceViewStores();for(const r of n){const t=r.getBookmarkedPageStores();for(const e of t)lt(e);const n=r.getSharedPages();if(n)for(const e of n)lt(e);const o=r.getTeamsStores();for(const e of o){const t=e.getTeamPagesStores();for(const e of t)lt(e)}const i=r.getSpaceStore();if(i){st().A.getData(e,{spaceId:i.id,userId:e.currentUser.id});const t=(0,at().I)(e,i);for(const e of t)lt(e)}}}(e,t)}),[t,e])}function lt(e){e.load();const t=e.getOwnedAndLinkedCollectionStores();for(const n of t)n.load()}var dt=()=>n(751629),ut=()=>n(994310),pt=()=>n(711059),mt=()=>n(674192),ft=()=>n(934839),vt=()=>n(901389),gt=()=>n(135552),ht=()=>n(329443),bt=()=>n(150193),St=()=>n(865241);function yt(){const e=(0,o().X)("service_worker_in_browser"),t=(0,s().v3)().currentUser.isLoggedIn(),n=(0,s().Y0)();return"serviceWorker"in navigator&&e&&t&&n.isBrowser}const wt=6e4,At=6e5;function kt(){const e=(0,s().v3)(),t=(0,r.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;t.setState({appUpdate:t.state.appUpdate,electronUpdate:{state:"checking"}})}(e)),[e]),n=(0,r.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:r}=n;r.setState({appUpdate:r.state.appUpdate,electronUpdate:{state:"error",error:t}})}(0,n,e)),[e]),o=(0,r.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;t.setState({appUpdate:t.state.appUpdate,electronUpdate:{state:"no-update",timestamp:Date.now()}})}(e)),[e]),a=(0,r.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:r}=n,o=(0,pt().parseVersion)(t.version),i=(0,dt().getDesktopVersion)(),a=(0,pt().getUpdateType)({currentVersion:i,nextVersion:o,app:"desktop"});r.setState({appUpdate:r.state.appUpdate,electronUpdate:{state:"downloading",type:a,version:o,timestamp:Date.now(),progress:0}})}(0,n,e)),[e]),c=(0,r.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:r}=n,o=r.state;o.electronUpdate&&"downloading"===o.electronUpdate.state&&r.setState({appUpdate:o.appUpdate,electronUpdate:{...o.electronUpdate,progress:t.transferred/t.total}})}(0,n,e)),[e]),l=(0,r.useCallback)(((t,n)=>function(e,t,n){const{device:r}=n,{AppUpdateStore:o}=n,i=ut().A.get(mt().wp),a=t.version;if(i===a){if(r.isMac)return o.setState({appUpdate:o.state.appUpdate,electronUpdate:{state:"ready",type:pt().UpdateType.Major,version:void 0,versionCreatedTime:0}}),void vt().ui({message:(0,Le.jsx)(_e().sA,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.prompt",defaultMessage:"Please move the Notion app into the Applications folder for the auto-updater to work."}),showCancel:!1,keepFocus:!1,handleCancel:()=>mt().K0(n),items:[{label:(0,Le.jsx)(_e().sA,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.dismissButton.label",defaultMessage:"OK"}),onAccept:()=>mt().K0(n)}]});B().log({level:"error",from:"AppUpdateListener",type:"electronUpdateFailed",data:{miscDataToConvertToString:{previousUpdateReady:i,nextUpdateReady:a}}})}const s=(0,dt().getDesktopVersion)(),c=(0,pt().parseVersion)(t.version),l=(0,pt().getUpdateType)({currentVersion:s,nextVersion:c,app:"desktop"});o.setState({appUpdate:o.state.appUpdate,electronUpdate:{state:"ready",type:l,version:c,versionCreatedTime:0}})}(0,n,e)),[e]),d=(0,r.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"checking"}})}(e)),[e]),u=(0,r.useCallback)(((t,n)=>Ct(n,e)),[e]),p=(0,r.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"no-update",timestamp:Date.now()}})}(e)),[e]),m=(0,r.useCallback)(((t,n)=>Et(n,e)),[e]),f=(0,r.useCallback)(((t,n)=>xt(n,e)),[e]),v=(0,r.useCallback)(((t,n)=>Tt(n,e)),[e]),g=(0,r.useCallback)((()=>function(e){const t=e.AppUpdateStore;if(Ie().A.getState().online&&t.isSilentUpdate()){const n=t.state.appUpdate;mt().JG({environment:e,url:window.location.href,version:n.version,versionCreatedTime:n.versionCreatedTime})}}(e)),[e]);(0,r.useEffect)((()=>{const{device:r}=e;if(r.isElectron){const e=j().Lz.addListener(l),r=j().Gc.addListener(n),i=j().WV.addListener(t),s=j().L9.addListener(a),h=j().n3.addListener(c),b=j().Sn.addListener(o),S=j().m0.addListener(v),y=j().t0.addListener(u),w=j().nT.addListener(d),A=j().AX.addListener(m),k=j().oF.addListener(g),I=j().IC.addListener(f),_=j().b7.addListener(p);return()=>{null==e||e(),null==r||r(),null==i||i(),null==s||s(),null==h||h(),null==b||b(),null==S||S(),null==y||y(),null==w||w(),null==A||A(),null==k||k(),null==I||I(),null==_||_()}}}),[e,d,p,m,u,g,f,v,a,t,n,o,c,l]),(0,r.useEffect)((()=>{const{device:t,mobileNative:n}=e;if(n&&n.updateReceiveApiHandlers({appUpdateReady:t=>Tt(t,e),appUpdateError:t=>Ct(t,e),appUpdateChecking:d,appUpdateAvailable:t=>Et(t,e),appUpdateProgress:t=>xt(t,e),appUpdateNotAvailable:p}),function(e){const t=mt().Cv(),n=mt().B0();if(!(0,pt().isEqualVersion)(t,n)){0;_t((0,pt().getUpdateType)({currentVersion:t,nextVersion:n,app:"client"}),n,mt().bg(),!1,e)}}(e),t.isMobileNative&&n&&n.api.openUpdateSettings){const n=t.osVersion,r=t.isAndroid&&(0,pt().isLessThanVersion)(n,[7,0]),o=t.isIOS&&(0,pt().isLessThanVersion)(n,[17,0]);(r||o)&&function(e){const{mobileNative:t}=e;if(!t)return;ft().HQ({bannerStore:bt().A,id:"PlatformUpdateWarning",contentKey:"mobile_platform_unsupported",styleKey:gt().q.Red})}(e)}}),[e,d,p]);const h=(0,r.useRef)(""),b=yt();(0,r.useEffect)((()=>{const{device:t,mobileNative:n}=e;if(!n&&!t.isElectron&&!i().A.isAdminMode){async function r(){if(St().A.state.isVisible)try{const t=mt().Cv(),n=await Qe().callApi({eventName:"getAssetsJsonV2",environment:e,data:{hash:h.current}});if("success"===n.type){const r=n.data;if(r.version){const n=r,o=(0,pt().parseVersion)(n.version);o&&((0,pt().isEqualVersion)(o,t)||(Tt(n,e),b&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then((e=>{e&&e.update()})))),h.current=r.hash}}}catch(t){}}const o=setInterval(r,wt);return()=>clearInterval(o)}}),[e,b]),(0,r.useEffect)((()=>{const{device:t,mobileNative:n,AppUpdateStore:r}=e;if(!n&&!t.isElectron&&!i().A.isAdminMode){function o(){const e=r.state.appUpdate;"ready"===(null==e?void 0:e.state)&&null!=e&&e.isRollback&&!St().A.state.isVisible&&Ie().A.getState().online&&window.location.reload()}const a=setInterval(o,At);return()=>clearInterval(a)}}),[e])}async function It(e,t){const n=await async function(e){await _().default.waitUntilRendered();const{mainEditorCurrentBlockStore:t,currentUserStore:n}=_().default.state;return!(!n||!t||(0,ht().qb)(e,t))}(e);n&&(mt().Dv(e,t,"banner"),ft().HQ({bannerStore:bt().A,id:"AppUpdate",contentKey:"minor_app_update",styleKey:gt().q.Blue}))}function _t(e,t,n,r,o){e===pt().UpdateType.Major||e===pt().UpdateType.Minor||mt().wT()||r?(t&&mt().fC(t)&&mt().qr(t,n),It(o,e)):mt().KD()?function(e,t){mt().Dv(e,t,"modal"),vt().ui({message:(0,Le.jsx)(_e().sA,{defaultMessage:"We just launched new features!",id:"breakingUpdateDialog.title"}),showCancel:!1,keepFocus:!1,handleCancel:()=>mt().K0(e),items:[{label:(0,Le.jsx)(_e().sA,{defaultMessage:"Update and see whats new",id:"breakingUpdateDialog.updateButtonTitle"}),color:"blue",onAccept:()=>mt().K0(e)}],innerStyle:{width:380}})}(o,e):t&&mt().fC(t)&&mt().qr(t,n)}function Ct(e,t){const{AppUpdateStore:n}=t;n.state.appUpdate&&"ready"===n.state.appUpdate.state||n.setState({electronUpdate:n.state.electronUpdate,appUpdate:{state:"error",error:e}})}function Et(e,t){const{AppUpdateStore:n}=t;if(n.state.appUpdate&&"ready"===n.state.appUpdate.state)return;const r=(0,pt().parseVersion)(e.version),o=mt().Cv(),i=(0,pt().getUpdateType)({currentVersion:o,nextVersion:r,app:"client"});n.setState({electronUpdate:n.state.electronUpdate,appUpdate:{state:"downloading",type:i,version:r,timestamp:Date.now(),progress:0}})}function xt(e,t){const{AppUpdateStore:n}=t,r=n.state;r.appUpdate&&"downloading"===r.appUpdate.state&&n.setState({electronUpdate:r.electronUpdate,appUpdate:{...r.appUpdate,progress:e.downloaded/e.total}})}function Tt(e,t){const{AppUpdateStore:n}=t,r=(0,pt().parseVersion)(e.version),o=mt().Cv(),i=(0,pt().getUpdateType)({currentVersion:o,nextVersion:r,app:"client"}),a=(0,pt().isLessThanVersion)(r,o),s=e.createdTime;if(!mt().fC(r)){const e={state:"ready",type:i,version:r,versionCreatedTime:s,isRollback:a};n.setState({electronUpdate:n.state.electronUpdate,appUpdate:e})}_t(i,r,s,a,t)}var Pt=()=>n(651784);var Lt=()=>n(14307);async function Ut(e){if(e.device.isBrowser&&document.hidden)return;if(e.device.isElectron&&!(await async function(){return F().electronApi&&F().electronApi.windowIsVisible?F().electronApi.windowIsVisible():"visible"===document.visibilityState}()))return;if(e.device.isMobileNative&&"none"===Ie().A.state.mobileConnectivityType)return void Mt(!1);if(Lt().isConnected())return void Mt(!0);if(!1===navigator.onLine)return void Mt(!1);"success"===(await Qe().callApi({eventName:"ping",environment:e,data:{}})).type?Mt(!0):Mt(!1)}function Mt(e){Ie().A.setState({...Ie().A.state,online:e,lastOfflineTimestamp:e?Ie().A.state.lastOfflineTimestamp:Date.now()})}const Rt=5e3;var Dt=()=>n(466103);n(672577);var jt=()=>n(451306),Bt=()=>n(201980),Nt=()=>n(643707),Ot=()=>n(751735),qt=()=>n(100622),zt=()=>n(667019),Wt=()=>n(737230),Ft=()=>n(372154),Kt=()=>n(94953);function Vt(){var e,t;return null!==(e=Ft().A.state)&&void 0!==e&&e.open?(null===(t=Ft().A.state)||void 0===t?void 0:t.discussionIds)||[]:Wt().Ay.state.activeDiscussionStore?[Wt().Ay.state.activeDiscussionStore.id]:[]}function $t(){var e;return null!==(e=Kt().A.state)&&void 0!==e&&null!==(e=e.discussionIds)&&void 0!==e&&e.length?Kt().A.state.discussionIds:Wt().Ay.state.activeDiscussionStore?[Wt().Ay.state.activeDiscussionStore.id]:[]}var Ht=()=>n(555776),Gt=()=>n(116008),Jt=()=>n(786074),Zt=()=>n(141465),Qt=()=>n(871399);function Xt(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,jt().EJ)({level:n})}.${(0,jt().wV)({discussionId:t})}.${Nt().Do} {\n\t\t\tbackground: ${(0,qt().aO)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${(0,qt().JG)(e)} !important;\n\t\t}\n\t`}function Yt(e){const{level:t}=e;return`\n\t\t.${(0,jt().EJ)({level:t})}.${Nt().uU}.${Nt().Do} {\n\t\t\tbackground: ${(0,qt().aO)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${(0,qt().JG)(e)} !important;\n\t\t}\n\t`}function en(e){const t=(0,qt().aO)({level:1,mode:e.mode,hovered:!1,selected:!1}),n=(0,Ot().Mj)(t).alpha()/2,r=(0,Ot().Mj)(t).alpha(n).toRgbString(),o=(0,qt().JG)({level:1,mode:e.mode,hovered:!1,selected:!1}),i=(0,Ot().Mj)(o).alpha()/2,a=(0,Ot().Mj)(o).alpha(i).toRgbString();return`\n\t\t.${Nt().K6}.${Nt().Do} {\n\t\t\tbox-shadow: unset !important;\n\t\t\tpadding-bottom: 2px;\n\t\t\tbackground: ${r} !important;\n\t\t\tborder-bottom: 2px solid ${a} !important;\n\t\t\tanimation: commentFadeIn 500ms ease-in;\n\t\t}\n\t`}function tn(e){const{theme:t,selected:n,hovered:r}=e;return`background: ${(0,qt().FK)({annotationType:"update",type:"background",selected:n,hovered:r,overlapping:!1,mode:t.mode})} !important;\n\t\t\tborder-bottom: 2px solid ${(0,qt().FK)({annotationType:"update",type:"underline",selected:!1,hovered:!0,overlapping:!1,mode:t.mode})} !important;`}function nn(e){const{discussionId:t,theme:n,selected:r,hovered:o}=e;return`\n\t\t.${(0,jt().ED)({type:"update"})}.${(0,jt().wV)({discussionId:t})}.${Nt().Do} {\n\t\t\t${tn({theme:n,selected:r,hovered:o})}\n\t\t}\n\t\t.${(0,jt().ED)({type:"remove"})}.${(0,jt().wV)({discussionId:t})}.${Nt().Do} {\n\t\t\t${function(e){const{theme:t,selected:n,hovered:r}=e,o=(0,qt().FK)({annotationType:"remove",type:"background",selected:n,hovered:r,overlapping:!1,mode:t.mode}),i=(0,qt().FK)({annotationType:"remove",type:"underline",selected:n,hovered:r,overlapping:!1,mode:t.mode});return`background: ${o} !important;\n\t\t\tcolor: ${t.text.secondary} !important;\n\t\t\ttext-decoration: none !important;\n\t\t\tborder-bottom: 2px solid ${i} !important;`}({theme:n,selected:r,hovered:o})}\n\t\t}\n\t`}function rn(e){const t=$t(),n=Vt();return[...t.flatMap((t=>N().Hn(jt().DS).map((n=>Xt({discussionId:t,level:n+1,hovered:!0,selected:!1,mode:e.mode}))))),...n.flatMap((t=>N().Hn(jt().DS).map((n=>Xt({discussionId:t,level:n+1,hovered:!1,selected:!0,mode:e.mode})))))].join("\n")}function on(e){const t=$t(),n=Vt();return[...t.map((t=>nn({theme:e,discussionId:t,selected:!1,hovered:!0}))),...n.map((t=>nn({theme:e,discussionId:t,selected:!0,hovered:!1})))].join("\n")}function an(e){let t="";const n=Jt().A.getHoveredEdit();n&&(t=`\n\t\t\t.${(0,jt().K3)({type:"insert",editId:n.editId})} {\n\t\t\t\t${tn({theme:e,selected:!1,hovered:!0})}\n\t\t\t}\n\t\t\t.${(0,jt().K3)({type:"remove",editId:n.editId})} {\n\t\t\t\t${function(e){return`background: ${(0,qt().FK)({annotationType:"remove",type:"background",selected:!1,hovered:!0,overlapping:!1,mode:e.mode})} !important;\n\t\t\tcolor: ${e.text.secondary} !important;\n\t\t\ttext-decoration-color: rgba(0, 0, 0, 0) !important;`}(e)}\n\t\t\t}\n\t\t`);return`\n\t\t${t}\n\t\t${`\n\t\t.${le()._Qb} .${(0,jt().h_)("insert")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.text.primary} !important;\n\t\t}\n\n\t\t.${le()._Qb} .${(0,jt().h_)("remove")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.text.quaternary} !important;\n\t\t}\n\t`}\n\t`}function sn(e){const t=zt().W.getHoveredEditId();return t?function(e){const{editId:t,theme:n,selected:r,hovered:o}=e;return`\n\t\t.${(0,jt().rI)({editId:t})}.${Nt().Do} {\n\t\t\t${tn({theme:n,selected:r,hovered:o})}\n\t\t}\n\t`}({editId:t,theme:e,selected:!1,hovered:!0}):""}function cn(){const e=(0,ke().DP)(),t=(0,p().K8)((()=>[rn(e),on(e)].join("\n")),[e]),n=(0,p().K8)((()=>function(){var e,t,n;const r=null===(e=Zt().A.state)||void 0===e?void 0:e.store,o="token"===(null===(t=Zt().A.state)||void 0===t?void 0:t.type)?null===(n=Zt().A.state)||void 0===n||null===(n=n.annotations)||void 0===n?void 0:n.find(Bt().sh$):void 0;if(!o)return"";const i=(0,Bt().cQR)(o);return"block"!==(null==r?void 0:r.table)?"":`\n\t\t\t.${(0,jt().re)({href:i,blockId:r.id})}.${Nt().Do} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}()),[]),o=(0,p().K8)((()=>an(e)),[e]),i=(0,p().K8)((()=>function(e){var t,n,r;if(!(null===(t=Gt().A.state)||void 0===t?void 0:t.open))return"";let o=[],i=[];return null!==(n=Ht().A.state)&&void 0!==n&&n.isHovered&&(o=N().Hn(jt().DS).map((t=>Yt({level:t+1,hovered:!0,selected:!1,mode:e.mode})))),null!==(r=Ht().A.state)&&void 0!==r&&r.isActivelyComposing&&(i=N().Hn(jt().DS).map((t=>Yt({level:t+1,hovered:!1,selected:!0,mode:e.mode})))),[...o,...i].join("\n")}(e)),[e]),a=(0,p().K8)((()=>function(e){return Qt().default.isRightMarginCommentHovered()?[en(e)].join("\n"):""}(e)),[e]),s=(0,p().K8)((()=>sn(e)),[e]),c=(0,r.useMemo)((()=>[t,n,o,i,a,s].filter(Boolean).join("\n")),[o,t,n,i,a,s]),l=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{if(!l.current){const e=document.createElement("style");l.current=e,document.head.appendChild(e)}l.current.innerHTML=c}),[c])}var ln=()=>n(522419),dn=()=>n(825237),un=()=>n(278238),pn=()=>n(945778),mn=()=>n(360568),fn=()=>n(110750),vn=()=>n(993130);var gn=()=>n(712030),hn=()=>n(51183),bn=()=>n(363686),Sn=()=>n(807054),yn=()=>n(589994),wn=()=>n(977390),An=()=>n(648088);function kn(){const e=(0,s().v3)(),t=(0,_e().tz)(),n=(0,ke().eP)(),o=(0,r.useRef)(),a=(0,p().r6)((()=>{const{RouterStore:t}=e,r=t.state.route;return(0,An().Z)({environment:e,store:_().default.state.mainEditorCurrentBlockStore,route:r,themeMode:n})}),[e,n],{useDeepEqual:!0});(0,p().O$)(a),(0,r.useEffect)((()=>{const t=N().sg((function(){const{device:t}=e,r=a.state;if(!r)return;const{url:s,title:c,icon:l,assetPath:d,isNonverified:u,hasBypassedContentClassification:p,isMemberOfSpace:m,description:f,shouldNoIndex:g,spaceNameForMetaTag:h,authorName:b,coverImage:S,isPublicSite:y}=r;let w,A,k,I;l&&(0,un().T8)(l.icon)?k=l.icon:l&&(0,pn().A)(l.icon)?w=l.icon:l&&ln().GM(l.icon)?A=l.icon:d&&ln().Du(d)&&(I=d);const _=u&&!p&&!m,C=(0,An().EL)(e,r);C&&document.title!==C&&(document.title=C,(0,mn().H)(C)),s&&v().ZO(s)!==v().ZO(window.location.href)&&(window.history.replaceState(window.history.state,void 0,s),function(e){var t;const{environment:n,url:r}=e;if(!(0,vn().A)(n))return;const{TabbedRouterStore:o}=n,a=(0,fn().Xz)(o.state);if("web"!==a.type)return;const s=Pt().parseRoute({url:r,baseUrl:i().A.domainBaseUrl,publicDomainName:i().A.publicDomainName,isMobile:Boolean(i().A.isMobile),protocol:i().A.protocol,currentUrl:window.location.href}),c=(null===(t=a.redirectedTo)||void 0===t?void 0:t.route)??a.route;if(s.name!==c.name)return;const l=v().ZO(e.url);a.redirectedTo?(a.redirectedTo.route=s,a.redirectedTo.url=l):(a.route=s,a.url=l)}({environment:e,url:window.location.href}));const E=document.querySelector("link[rel='shortcut icon']");if(E){const r={linkEl:E,environment:e,device:t,themeMode:n,config:i().A,lastSetIconStringRef:o},a=(0,An().oo)("production");_?(E.href=a,o.current=a):w?function(e,t){const{linkEl:n,environment:r,lastSetIconStringRef:o}=e;if(t===o.current)return;o.current=t,(0,hn().A)(t,(0,gn().FN)(r)).then((async e=>{await Sn().waitForInitialPageRenderToComplete(),await wn().A.waitUntil((()=>!wn().A.state.isMeasuring)),n.href=(null==e?void 0:e.toDataURL("image/png"))||""}))}(r,w):k?function(e,t){const{linkEl:n,device:r,themeMode:o,lastSetIconStringRef:i}=e;if(t===i.current)return;i.current=t;const a=`${t}?mode=${o}`;r.isFirefox?n.href=a:(0,bn().A)(a).then((e=>{n.href=e}))}(r,k):l&&A?function(e,t,n){const{linkEl:r,environment:o,config:i,lastSetIconStringRef:a}=e,{...s}=t,c=window.location.origin!==i.domainBaseUrl,l=dn().wY({url:n,permissionRecord:s.pointer,baseUrl:i.domainBaseUrl,fullyQualified:!1,userId:o.currentUser.id,...c?{favicon:!0}:{width:100}});if(l===a.current)return;a.current=l,yn().transactionQueue.awaitRecordTransaction(s.pointer).then((()=>{if(!c)return(0,bn().A)(l);r.href=l})).then((e=>{!c&&e&&(r.href=e)}))}(r,l,A):I?function(e,t){const{linkEl:n,environment:r,config:o,lastSetIconStringRef:i}=e,a=dn().x8({url:t,width:100,baseUrl:o.domainBaseUrl,fullyQualified:!1,userId:r.currentUser.id});if(a===i.current)return;i.current=a,(0,bn().A)(a).then((e=>{n.href=e}))}(r,I):a!==o.current&&(E.href=a,o.current=a)}if(y){!function({title:e,description:t,url:n,icon:r,image:o,shouldNoIndex:i,author:a,spaceName:s}){function c(e,t){const n=`meta[property="${t}"], meta[name="${e}"]`,r=document.querySelector(n);if(r&&r instanceof HTMLMetaElement)return r;const o=document.createElement("meta");return t?o.setAttribute("property",t):o.setAttribute("name",e),document.head.appendChild(o),o}function l(e){const t=document.querySelector(`link[rel="${e}"]`);if(t&&t instanceof HTMLLinkElement)return t;const n=document.createElement("link");return n.setAttribute("rel",e),document.head.appendChild(n),n}['meta[name="twitter:site"]'].forEach((e=>{const t=document.querySelector(e);t&&t instanceof HTMLMetaElement&&t.remove()}));c("twitter:title").setAttribute("content",e);if(c("og:title","og:title").setAttribute("content",e),t){c("description").setAttribute("content",t);c("twitter:description").setAttribute("content",t);c("og:description","og:description").setAttribute("content",t)}if(n){c("twitter:url").setAttribute("content",n);c("og:url","og:url").setAttribute("content",n);l("canonical").setAttribute("href",n)}if(o){c("twitter:image").setAttribute("content",o);c("og:image","og:image").setAttribute("content",o)}if(a){c("article:author","article:author").setAttribute("content",a)}if(s){c("og:site_name","og:site_name").setAttribute("content",s)}if(r){l("shortcut icon").setAttribute("href",r)}if(i){c("robots").setAttribute("content","noindex")}else{const e=document.querySelector('meta[name="robots"]');e&&e instanceof HTMLMetaElement&&e.remove()}}({title:c??"",description:f,url:s,icon:null==E?void 0:E.href,image:S,shouldNoIndex:g,author:b,spaceName:h});const e=document.querySelector('script[type="application/ld+json"]');e&&e.remove();const t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify({"@context":"https://schema.org","@type":"WebSite",name:h,url:window.location.href}),document.head.appendChild(t)}}),500,{leading:!0}),r=document.title;return a.state&&t(),a.addListener(t),()=>{a.removeListener(t),document.title=r}}),[e,t,a,n])}n(803949);var In=()=>n(359995),_n=()=>n(75435),Cn=()=>n(821062);var En=()=>n(502907),xn=()=>n(855813),Tn=()=>n(659715),Pn=()=>n(346965),Ln=()=>n(840125),Un=()=>n(700149);var Mn=()=>n(319975),Rn=()=>n(231297),Dn=()=>n(441467),jn=()=>n(404783),Bn=()=>n(962845),Nn=()=>n(135985);var On=()=>n(779315),qn=()=>n(5705),zn=()=>n(391214);var Wn=()=>n(492553);var Fn=()=>n(693202);const Kn={"editor:textSelection":{saveState:function(){const e=Fn().default.state;if("empty"===e.mode)return;const t=(0,Nn().Ns)(e.multiSelection);return{version:1,data:{...e,multiSelection:t}}},restoreState:function({savedState:e}){const{data:t}=e,{multiSelection:r,mode:o}=t,i=(0,Nn().Em)(r);return!!i&&((0,n(901444).setMultiSelection)({multiSelection:i,readOnly:"readOnly"===o}),!0)}},"editor:historyState":{saveState:function(){var e,t;const n=null===(e=window.history.state)||void 0===e?void 0:e.id,r=null===(t=window.history.state)||void 0===t?void 0:t.currentUserId;if(n&&r)return qn().zd({historyId:n,currentUserId:r}),{version:1,data:{historyId:n,userId:r}}},restoreState:function({environment:e,savedState:t}){var n,r;const{data:{historyId:o,userId:i}}=t,a=null===(n=window.history.state)||void 0===n?void 0:n.id,s=null===(r=window.history.state)||void 0===r?void 0:r.currentUserId;if(s!==i)return!0;if(a===o)return!0;const c=qn().GL({historyId:o,currentUserId:s});if(!c)return!0;!function({environment:e,historyState:t}){var n;const{PageScroller:r}=On().A;if(!t)return;if(null!==(n=t.blockIds)&&void 0!==n&&n.length)return void zn().Wj(e,{blockId:t.blockIds[0],animate:!1});r&&N().Et(t.scrollTop)&&setTimeout((()=>{var e;null===(e=r.getNode())||void 0===e||e.scrollTo({top:t.scrollTop})}),500)}({environment:e,historyState:c});const l=e.RouterStore;return qn().TC({RouterStore:l,currentUserId:s}),window.history.replaceState({id:o,currentUserId:s},""),l.update((e=>({...e,id:o,historyState:c}))),!0}},"collaboration:discussion":{saveState:function(){const e=Gt().A.state;let t;if(!e.open)return;return"block"===e.type&&"reaction"===e.content||("comment"===e.content&&(t=function(e){const t=e.discussionInputStore.getState(),n=t.textStore.getValue();if(!n)return;const r={open:e.open,blockId:e.blockId,content:e.content,rectBounds:{left:e.rect.left,top:e.rect.top,width:e.rect.width,height:e.rect.height},property_id:e.property_id,lastKnownBlockStoreId:e.lastKnownBlockStore.id,discussionInputStoreState:{textValue:n,showAttachFileIntro:t.showAttachFileIntro,renderFileAttachIntro:t.renderFileAttachIntro},spaceId:t.textStore.pointer.spaceId};if("inline"===e.type)return{...r,type:"inline",multiSelection:(0,Nn().Ns)(e.multiSelection)};if("block"===e.type)return{...r,type:"block"}}(e)),"reaction"===e.content&&(t=function(e){if("inline"===e.type)return{open:e.open,blockId:e.blockId,content:e.content,emoji:e.emoji,rectBounds:{left:e.rect.left,top:e.rect.top,width:e.rect.width,height:e.rect.height},type:"inline",multiSelection:(0,Nn().Ns)(e.multiSelection)}}(e)),!t)?void 0:{version:1,data:t}},restoreState:function({environment:e,savedState:t}){const{data:n}=t;return"comment"===n.content?function(e,t){const{rectBounds:n,discussionInputStoreState:r,spaceId:o,lastKnownBlockStoreId:i,...a}=t;if(!o)return!1;const s=new DOMRect(n.left,n.top,n.width,n.height),c=(0,Nn().AK)(i);if(!c)return!1;const l=new(jn().A)(e,o);if(Rn().createAndCommit({userAction:"DiscussionInput.willMount",environment:e,canUndo:!0,perform:t=>{Mn().R9({environment:e,store:l.state.textStore,value:r.textValue,transaction:t})}}),"inline"===t.type){const e=(0,Nn().Em)(t.multiSelection);if(!e)return!1;Gt().A.setState({...a,rect:s,lastKnownBlockStore:c,blockStore:c,type:"inline",discussionInputStore:l,lastEditables:(0,Bn().$W)(e),multiSelection:e})}else"block"===t.type&&Gt().A.setState({...a,rect:s,lastKnownBlockStore:c,blockStore:c,type:"block",discussionInputStore:l});return!0}(e,n):"reaction"!==n.content||function(e,t){const{rectBounds:n,...r}=t,o=new DOMRect(n.left,n.top,n.width,n.height),i=(0,Nn().AK)(t.blockId);if(!i)return!1;if("inline"===t.type){const n=(0,Nn().Em)(t.multiSelection);if(!n)return!1;Gt().A.setState({...r,rect:o,blockStore:i,type:"inline",multiSelection:n}),Dn().of({environment:e,blockStore:i,multiSelection:n,formulasModule:void 0,rect:o})}return!0}(e,n)}},"collaboration:discussionMenuInteraction":{saveState:function(){const e=Ht().A.state;if(e.isActivelyComposing||e.isHovered)return{version:1,data:e}},restoreState:function({savedState:e}){const{data:t}=e;return Ht().A.setState(t),!0}},"desktop:navigationHistory":{saveState:function(){const e=Wn().H.getState();if(void 0!==e.activeIndex)return{version:1,data:e}},restoreState:function({savedState:e}){const{data:t}=e;return Wn().H.setState(t),(0,Pn().N)(),!0}}},Vn=new Map;function $n(e,t){Vn.has(e)||Vn.set(e,t)}function Hn(e){Vn.delete(e)}function Gn(){const e=function(){const e=(0,Ln().getCloseConfirmationDialogReason)();if(e)return[{reason:e,providerId:"UnloadBlockerFromBeforeUnload"}];for(const t of Vn.values()){const e=t.getUnloadBlockers;if(!e)continue;const n=e();if(n.length>0)return n}return[]}();if(e.length>0)return[{blockers:e}];return[{tabClientStates:Jn()}]}function Jn(){const e={};for(const[r,o]of Vn.entries())try{var t;const n=null===(t=o.saveState)||void 0===t?void 0:t.call(o);if(!n)continue;e[r]=n}catch(n){}return e}function Zn(){return[Jn()]}var Qn=()=>n(502220),Xn=()=>n(72234);var Yn=()=>n(857783),er=()=>n(812182),tr=()=>n(180252),nr=()=>n(614949);const rr=(0,_e().YK)({have_local_draft_unsaved_changes:{defaultMessage:"Changes you made to the layout may not be saved.",id:"closeConfirmationMessages.haveLocalDraftUnsavedChanges"},dictation_in_progress:{defaultMessage:"Transcription is in progress.",id:"closeConfirmationMessages.dictationInProgress"}});var or=()=>n(869562),ir=()=>n(749687),ar=()=>n(38864),sr=()=>n(730591),cr=()=>n(732770),lr=()=>n(330932),dr=(n(814603),n(147566),n(198721),()=>n(312788));function ur(){const{tabStates:e,isFrameReady:t}=(0,p().O$)(Un().f),n=(0,s().v3)();(0,r.useEffect)((()=>{e&&t&&function(e){for(const[n,r]of Vn.entries())try{const t=r.restoreState,o=Un().f.getStateForProvider(n);if(!t||!o)continue;t({environment:e,savedState:o})&&Un().f.consumeState(n)}catch(t){}}(n)}),[e,t,n])}function pr(){const e=(0,s().v3)(),t=(0,_e().tz)(),n=(0,p().O$)(_().AppStoreSidebarSpaceStore);!function(e){const{navigate:t}=(0,r.useContext)(dr().E),n=(0,o().X)("desktop_navigation_interceptor");(0,r.useEffect)((()=>{if(!e.device.isElectron||!n)return;if(!("navigation"in window))return void B().log({level:"info",from:"navigationInterceptor",type:"navigationApiNotSupported"});const r=n=>{const r=new URL(n.destination.url),o=new URL(window.location.href);!n.userInitiated||!n.canIntercept||r.origin!==o.origin||n.hashChange||n.destination.sameDocument||n.downloadRequest||n.formData||n.intercept({handler:()=>{try{t({environment:e,url:n.destination.url}),B().log({level:"debug",from:"navigationInterceptor",type:"navigationIntercepted",data:{miscDataToConvertToString:{fromUrl:o.href,toUrl:n.destination.url}}})}catch(r){throw B().log({level:"error",from:"navigationInterceptor",type:"navigationInterceptionError",error:(0,O().convertErrorToLog)(r),data:{miscDataToConvertToString:{fromUrl:o.href,toUrl:n.destination.url}}}),r}}})};return window.navigation.addEventListener("navigate",r),B().log({level:"info",from:"navigationInterceptor",type:"navigationInterceptorInitialized"}),()=>{window.navigation.removeEventListener("navigate",r)}}),[e,n,t])}(e);const a=(0,p().K8)((()=>X().A.state.tabs),[]),c=(0,p().K8)((()=>({observedWidth:ir().sidebarSizeObserver.rect.state.width,targetWidth:ir().sidebarWidthStore.state,isExpanded:ir().sidebarExpandedStore.state,resizing:ir().sidebarResizingStore.state,isMouseEntered:ir().sidebarMouseEnteredStore.state})),[]),l=(0,p().K8)((()=>sr().A.state.open),[]),d=(0,p().K8)((()=>ar().I.state.open),[]),u=(0,p().K8)((()=>X().A.state.isActiveTab),[]),m=(0,p().K8)((()=>"blank"===e.RouterStore.state.route.name),[e.RouterStore]),[f,v]=(0,r.useState)(!1),g=e.currentUser.isLoggedIn(),h=(0,pt().formatVersion)((0,j().B7)()),b=(0,p().K8)((()=>(0,nr().X)(e).shouldShowSidebar),[e]);(0,r.useEffect)((()=>{u&&f&&j().uY.set({isLoggedIn:g,shouldShowSidebar:b,...c,observedWidth:c.isExpanded?c.targetWidth:c.observedWidth})}),[c,g,u,f,b]),(0,r.useEffect)((()=>{u&&(0,Pn().N)()}),[u]);const S=(0,p().K8)((()=>{var e,t;const n="transcription"===(null===(e=ee().Ay.state.rootBlock)||void 0===e?void 0:e.getType())?null===(t=ee().Ay.state.rootBlock)||void 0===t?void 0:t.pointer:void 0;return n?[{type:"transcription",pointer:n}]:[]}),[],{equalityFn:Cn().k});(0,r.useEffect)((()=>{var e,t;e=S,null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.setActiveBlocks)||void 0===t||t.call(F().electronApi,e)}),[S]);const y=(0,p().K8)((()=>ee().Ay.getState().enabled),[]);(0,r.useEffect)((()=>{var e,t;e=y,null!==F().electronApi&&void 0!==F().electronApi&&F().electronApi.setIsRecording?F().electronApi.setIsRecording(e):null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.setIsMediaActive)||void 0===t||t.call(F().electronApi,e)}),[y]),(0,r.useEffect)((()=>{let e;e=g?c.isExpanded?"expanded":"collapsed":"disabled",j().Oq.set(e)}),[c.isExpanded,g]);const w=(0,p().K8)((()=>{var e,t,n;return{currentUserId:null===(e=_().default.state.currentUserStore)||void 0===e?void 0:e.id,currentSpaceId:null===(t=_().default.state.sidebarSpaceStore)||void 0===t?void 0:t.getSpaceId(),currentPageId:null===(n=_().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.id}}),[]);(0,r.useEffect)((()=>{var e,t;e=w,null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.setAppStoreState)||void 0===t||t.call(F().electronApi,e)}),[w]);const A=(0,p().K8)((()=>{var t;return!!(null===(t=_n().A.state.preferences)||void 0===t?void 0:t.isZenModeEnabled)&&((0,tr().$o)(e).state&&"page"===e.RouterStore.state.route.name)}),[e]);(0,r.useLayoutEffect)((()=>{!function(e){var t;null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.setZenMode)||void 0===t||t.call(F().electronApi,e)}(A)}),[A]),(0,r.useEffect)((()=>{u||cr().A.setKeyboardMode(!1)}),[u]);const k=(0,r.useCallback)(((t,n)=>{n.forEach((t=>{(0,D().u)({environment:e,event:t})}))}),[e]);(0,r.useEffect)((()=>j().HT.addListener(k)),[k]);const I=(0,r.useCallback)(((e,t)=>{m||X().A.updateIsActive(t)}),[m]),C=(0,o().X)("tab_unloading"),E=(0,p().K8)((()=>$().default.getConfigKey("tab_unload_threshold","thresholdInMs")),[]);(0,r.useEffect)((()=>{var e;e=C,j().Zq.setPreference("isTabUnloadingEnabled",e)}),[C]),(0,r.useEffect)((()=>{var e;C&&(e=E,j().Zq.setPreference("tabUnloadThreshold",e))}),[E,C]);const x=(0,p().K8)((()=>"on"===$().default.getEligibleGroup({experimentId:"desktop_unload_tabs_before_refresh",defaultGroup:"control",enableEventTrailLogging:!0})),[]);(0,r.useEffect)((()=>{var e;e=x,j().Zq.setPreference("shouldUnloadTabsBeforeRefresh",e)}),[x]),(0,r.useEffect)((()=>{if(!C||m)return;const e=function(){for(const[e,t]of(0,z().WP)(Kn))$n(e,t);return()=>{for(const e of(0,z().uv)(Kn))Hn(e)}}();(async function(){var e;return null===F().electronApi||void 0===F().electronApi||null===(e=F().electronApi.getRestoredClientState)||void 0===e?void 0:e.call(F().electronApi)})().then((e=>{e&&Un().f.setTabStates(e)}));const t=(n=Gn,null===F().electronApi||void 0===F().electronApi||null===(r=F().electronApi.addUnloadTabHandler)||void 0===r?void 0:r.call(F().electronApi,n));var n,r;return()=>{e(),null==t||t()}}),[m,C]),(0,r.useEffect)((()=>{return e=Zn,null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.addGetClientStateHandler)||void 0===t?void 0:t.call(F().electronApi,e);var e,t}),[]),ur();const T=(0,r.useCallback)(((e,t)=>{!async function(){const e=await W().$O.load();await e.dictationActions.updateActiveBlocks(t)}()}),[]),P=(0,p().K8)((()=>{const{tabs:e}=X().A.state;return e.flatMap((e=>e.activeBlocks??[]))}),[]);(0,r.useEffect)((()=>{P.length>0&&T(void 0,P)}),[T,P]),(0,r.useEffect)((()=>{if(void 0===u||m)return;const e=()=>{St().A.update((e=>({...e,isVisible:!document.hidden&&u})))};return e(),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[u,m]),(0,r.useEffect)((()=>{if(!m)return j().Wt.get().then((e=>{X().A.updateIsActive(e)})),j().Wt.addListener(I)}),[I,m]);const L=(0,r.useCallback)(((e,t)=>{void 0===t.isShowingTabBar&&(t.isShowingTabBar=!0),_n().A.setState(t)}),[]);(0,r.useEffect)((()=>{var e;return null===(e=j().Zq.get())||void 0===e||e.then((e=>{_n().A.setState(e)})),j().Zq.addListener(L)}),[L]);const U=(0,r.useCallback)(((e,t)=>{X().A.update((e=>({...e,tabs:t})))}),[]);(0,r.useEffect)((()=>j().Hy.addListener(U)),[U]);const M=(0,r.useCallback)(((e,t)=>{X().A.update((e=>({...e,currentTab:t})))}),[]);(0,r.useEffect)((()=>j().$Q.addListener(M)),[M]);const R=(0,r.useCallback)(((e,t)=>{X().A.update((e=>{const n=new Set(e.unauthorizedIframeUrls??[]);n.add(t);const r=Array.from(n);return{...e,unauthorizedIframeUrls:r}}))}),[]);(0,r.useEffect)((()=>j().Bl.addListener(R)),[R]);const N=(0,r.useCallback)((t=>{or().setExpand({environment:e,isExpanded:!c.isExpanded,from:"electron_listener",saveDetailsSidebarPreference:!1})}),[e,c.isExpanded]);(0,r.useEffect)((()=>j().Oq.addToggleListener(N)),[N]);const q=(0,r.useCallback)(((e,t)=>{t?or().open({fromElectron:!0}):or().close()}),[]);(0,r.useEffect)((()=>j().Oq.addSetSidebarOpenListener(q)),[q]);const K=(0,r.useCallback)(((e,t)=>{ir().sidebarExpandedStore.setState(t.isExpanded),ir().sidebarWidthStore.setState(t.targetWidth)}),[]),V=(0,r.useCallback)(((e,t)=>{let n;sr().A.update((e=>(n=!e.open,{...e,open:n,buttonBounds:t}))),n&&d&&ar().I.update((e=>({...e,open:!1})))}),[d]);(0,r.useEffect)((()=>j().uS.setTabSpacesMenuOpenState(l)),[l]),(0,r.useEffect)((()=>j().uS.addToggleMenuListener(V)),[V]);const H=(0,r.useCallback)(((e,t)=>{sr().A.update((e=>({...e,tabSpacesState:{...e.tabSpacesState,...t}})))}),[]);(0,r.useEffect)((()=>j().uS.addListener(H)),[H]);const G=(0,r.useCallback)(((e,t)=>{sr().A.update((e=>({...e,open:!0,createOrUpdateMenuState:{...t,action:"create"}})))}),[]);(0,r.useEffect)((()=>j().uS.addOpenCreateMenuListener(G)),[G]),(0,r.useEffect)((()=>{!u&&l&&sr().A.update((e=>({...e,open:!1})))}),[u,l]),(0,r.useEffect)((()=>{sr().A.update((e=>({...e,open:!1})))}),[c.isExpanded]),(0,r.useEffect)((()=>{!u&&d&&ar().I.update((e=>({...e,open:!1})))}),[u,d]);const J=(0,r.useCallback)(((e,t)=>{Ee().D6({label:t})}),[]);(0,r.useEffect)((()=>j().uS.addSnackBarMessageListener(J)),[J]),(0,r.useEffect)((()=>{if(!m)return j().uY.get().then((e=>{e&&(ir().sidebarExpandedStore.setState(e.isExpanded),ir().sidebarWidthStore.setState(e.targetWidth),ir().sidebarSizeObserver.rect.update((t=>({...t,width:e.observedWidth})))),v(!0)})),j().uY.addListener(K)}),[K,m]),(0,r.useEffect)((()=>{!async function(){if(void 0===h)return;const t=await Qe().callApi({eventName:"isDesktopVersionCompatible",environment:e,data:{desktopVersion:h}});"success"!==t.type||t.data.compatible||window.location.replace(i().A.domainBaseUrl+t.data.redirect)}()}),[h,e]),(0,r.useEffect)((()=>j().Er.addListener(((t,n)=>{In().N6(e,n)}))),[e]);const Z=(0,p().K8)((()=>{if($().default.checkGate({gateName:"desktop_close_confirmation_dialog"})){const e=(0,Ln().getUserControlledCloseConfirmationDialogReason)();if(e){return{analytics_id:e,localized_message:t.formatMessage(rr[e])}}}}),[t]);(0,r.useEffect)((()=>{var e,t;e=Z,null===F().electronApi||void 0===F().electronApi||null===(t=F().electronApi.setCloseConfirmationDialogReason)||void 0===t||t.call(F().electronApi,e)}),[Z]);const Q=(0,r.useCallback)(((t,r)=>{if(!n)return;const o=Y().B.createChildStore(n,r.pointer);Yn().uK({environment:e,store:o,pageVisitSource:r.source})}),[e,n]);(0,r.useEffect)((()=>j().uK.addListener(Q)),[Q]);const te=(0,r.useCallback)(((t,n)=>{Qn().v[n.toastId](e,n)}),[e]);(0,r.useEffect)((()=>null===j().Iz||void 0===j().Iz?void 0:j().Iz.addListener(te)),[te]);const ne=(0,r.useCallback)(((e,t)=>{er().UW(t.id)}),[]);(0,r.useEffect)((()=>null===j().UW||void 0===j().UW?void 0:j().UW.addListener(ne)),[ne]);const re=(0,r.useCallback)(((t,n)=>{"back"===n?(0,En().a)(e):"forward"===n&&(0,Tn().s)(e)}),[e]);(0,r.useEffect)((()=>j().M.addListener(re)),[re]);const oe=(0,r.useCallback)(((t,n)=>{(0,xn().Y)(e,n)}),[e]);(0,r.useEffect)((()=>j().fK.addListener(oe)),[oe]);const ie=(0,r.useCallback)(((e,t)=>{ar().I.setState({direction:t,open:!0}),l&&sr().A.update((e=>({...e,open:!1})))}),[l]);(0,r.useEffect)((()=>j()._$.addListener(ie)),[ie]);const ae=(0,r.useCallback)(((e,t,r)=>{const o=X().A.state.tabs.find((e=>e.id===t)),i=lr().j.state.open;if(!o||!o.pagePointer||!n||i)return;const a=Y().B.createChildStore(n,o.pagePointer);Zt().A.setState({type:"tab",store:a,domRect:{...r,y:0,height:0},tabId:t})}),[n]);(0,r.useEffect)((()=>j().nP.addListener(ae)),[ae]);const se=(0,r.useCallback)((e=>{Zt().A.setState(void 0)}),[]);(0,r.useEffect)((()=>j().M9.addListener(se)),[se]);const ce=(0,p().K8)((()=>{var e;return"tab"===(null===(e=Zt().A.state)||void 0===e?void 0:e.type)?Zt().A.state.tabId:void 0}),[]);(0,r.useEffect)((()=>{A&&ce&&Zt().A.setState(void 0)}),[ce,A]),(0,r.useEffect)((()=>{!u&&ce&&Zt().A.setState(void 0)}),[ce,u]),(0,r.useEffect)((()=>{const e=a.find((e=>e.id===ce));ce&&!e&&Zt().A.setState(void 0)}),[ce,a]);const le=(0,r.useCallback)(((t,n)=>{!async function(e){(await W().$O.load()).transcriptionNotificationActions.meetingNotificationClicked(e)}({environment:e,notification:n})}),[e]);(0,r.useEffect)((()=>j().in.addListener(le)),[le]);const de=(0,r.useCallback)((t=>{!function(e){Xn().AC(e,!0,"notification")}(e)}),[e]);(0,r.useEffect)((()=>j().gQ.addListener(de)),[de])}var mr=()=>n(974233);function fr(e){(0,mr().default)({url:`${i().A.secureFileConfig.rootPath}/refresh`,environment:e,method:"GET",format:"text"})}n(823215),n(737550);var vr=()=>n(979340),gr=()=>n(498212);var hr=()=>n(418247),br=()=>n(749240);function Sr(){const e=(0,s().v3)(),t=(0,s().Y0)(),n=(0,p().K8)((()=>{const{currentUserStore:n,currentUserSettingsStore:r,currentUserRootStore:o}=_().default.state;if(!(e.currentUser.id&&n&&r&&o))return e.publicDomainUserId?{user_id:e.publicDomainUserId}:void 0;const i=o.getSpaceViewStores(),a=i.length>0&&i.every((e=>e.isReady()));if(!n.isDefined()||!r.isDefined()||!a)return;const s=N().oE(i.map((e=>e.getSpaceId()))).map((t=>st().A.getData(e,{spaceId:t,userId:e.currentUser.id}))),c=i.map((e=>e.getModel())).filter((e=>(0,z().O9)(e))).filter((e=>!e.getNotifyEmail())).map((e=>e.getSpaceId())).map(gr().ot);if(!s.every((e=>Boolean(e)||null===e)))return;const l=function(e){const t=e.map((e=>(0,hr().G)(e))),n=new Set(N().oE(t));if(n.has("enterprise"))return"enterprise";if(n.has("business"))return"business";if(n.has("plus"))return"plus";if(n.has("personal"))return"personal_pro";if(n.has("team_free"))return"team_free";if(n.has("personal_free"))return"personal_free";if(n.has("free"))return"free";return"none"}(s),d=r.getSettings();if(!d)return;if(void 0===br().subscriptionDataStoreInstance.state)return;const u={user_id:n.id,email:n.getEmail(),user_persona:d.persona,user_team_role:d.team_role,user_use_cases:d.use_cases,user_company_size:d.company_size,user_source:d.source,user_plan_type:l,user_subscription_tier:br().subscriptionDataStoreInstance.state.subscriptionTier,user_has_at_least_one_free_tier_space:wr(s),time_zone:d.time_zone,locale:d.locale,preferred_locale:d.preferred_locale,signup_time:d.signup_time,app_version:t.version,workspace_email_opt_out:c};return d.signup_time&&(u.created_at=Math.floor(d.signup_time/1e3)),t.desktopAppVersion&&(u.desktop_app_version=t.desktopAppVersion),t.mobileAppVersion&&(u.mobile_app_version=t.mobileAppVersion),d.used_desktop_web_app&&(u.used_desktop_web_app=d.used_desktop_web_app),d.used_mobile_web_app&&(u.used_mobile_web_app=d.used_mobile_web_app),d.used_mac_app&&(u.used_mac_app=d.used_mac_app),d.used_windows_app&&(u.used_windows_app=d.used_windows_app),d.used_ios_app&&(u.used_ios_app=d.used_ios_app),d.used_android_app&&(u.used_android_app=d.used_android_app),u}),[e,t],{useDeepEqual:!0});(0,r.useEffect)((()=>{n&&"none"!==n.user_plan_type&&yr(e,n)}),[e,n]);const o=void 0!==n;(0,r.useEffect)((()=>{const t=window.setTimeout((()=>{!o&&e.currentUser.id&&yr(e,{user_id:e.currentUser.id})}),5e3);return()=>{window.clearTimeout(t)}}),[e,o])}const yr=N().nF((function(e,t){(0,n(430588).T)({environment:e,userId:(0,gr().ot)(t.user_id),traits:{...t,user_id:(0,gr().ot)(t.user_id)}})}),5e3);function wr(e){return e.map((e=>(0,hr().G)(e))).filter(z().Vq).some((e=>vr().dL(e)))}var Ar=()=>n(528981),kr=()=>n(599824),Ir=()=>n(576727);async function _r(e,t){t.loggedIn&&await _().default.waitUntilRendered();const{callApi:r}=await Promise.resolve().then(n.bind(n,559506)),o=await r({eventName:"getUserAnalyticsSettings",environment:e,data:{}});if("success"!==o.type)return void B().log({level:"warning",from:"analyticsHelpers",type:"fetchAnalyticsSettings",data:{miscDataToConvertToString:{response:o}}});const i=o.data;return Ir().default.setState(i),i}var Cr=()=>n(647987),Er=()=>n(945610),xr=()=>n(893820),Tr=()=>n(68263),Pr=()=>n(802149),Lr=()=>n(462432),Ur=()=>n(455968),Mr=()=>n(449918),Rr=()=>n(268405),Dr=()=>n(42772),jr=()=>n(22102),Br=()=>n(486674),Nr=()=>n(475133),Or=()=>n(79059),qr=()=>n(186445),zr=()=>n(422366),Wr=()=>n(747100),Fr=()=>n(651113),Kr=()=>n(792415),Vr=()=>n(712505),$r=()=>n(95758),Hr=()=>n(543491);let Gr;function Jr(e){Gr=e}async function Zr(e,t,n){const r=await(0,Lr().w)(e),{preboot:o,dontWait:i}=n||{},a="currentUser"in e;i||o||!a||await async function(e){e.currentUser.isLoggedIn()&&_().default.state.mainEditorCurrentBlockStore&&(await _().default.waitUntil((()=>Boolean(_().default.state.mainEditorCurrentBlockStore&&_().default.state.mainEditorCurrentBlockStore.isReady))),_().default.state.sidebarSpaceStore&&await br().subscriptionDataStoreInstance.waitUntilLoaded());Ir().default.shouldRefresh(e.currentUser.id)&&await(0,kr().E)(e)}(e);const s=!i&&a?await(0,Fr().F)(e):void 0,c=(0,Mr().e)(),{currentUserStore:l,sidebarSpaceStore:d}=_().default.state,u=(0,Nr().getMobileNativeDeviceInfo)(),p=(0,Or().getMobileNativeSessionInfo)(),m=await(0,Cr().getDesktopDeviceInfo)(),v=await async function(e,t){const n=await(0,pe().hasPermissionForThirdPartyService)("amplitude",e),r=(0,f().B6)(t);return{is_user_consent_to_track:n,tid:r}}(e,t),g=await async function(){const e=Vr().default.state,t=Wr().m3(),n=(0,Br().a)();if(n){const r=ht().i0(n).map((({permissionItem:e})=>e)),o=r.find((e=>"public_permission"===e.type)),i=r.find((e=>"space_permission"===e.type)),a=r.filter((e=>io(e)&&(0,Tr().h9)(e.role))),s=r.filter((e=>io(e)&&(0,Tr().p2)(e.role))),c=await async function(e){const t=await jr().k.load(),n=(0,qr().f)(e,{includeTeamHomeFeed:!1,includeDataSources:!1}),r=[],o=N().Bq(n.map((e=>{if(e instanceof $r().h)return;const n=e.getCopiedFromPointer();return n&&t.isTemplate(n)&&r.push(n.id),r})).filter(z().O9));return o}(n),l=Boolean(c)&&c.length>0,d=e.open?void 0:_().default.state.currentCollectionViewStore,{publicPageData:u}=Kr().A.state,p=await jr().k.load(),m=n.getCopiedFromPointer();let f;return f=r.some(Tr().Ny)?"deleted_from_trash":n.pathIsDead()?"in_trash":"live",{page_id:n.id,page_public_role:o?o.role:Er().v,page_space_role:i?i.role:Er().v,page_all_collaborator_count:s.length+a.length,page_editor_collaborator_count:s.length,page_read_only_collaborator_count:a.length,page_content_count:n.getContentLength(),page_current_user_role:n.getRole(),page_is_peek:t,page_copied_from:m?(0,gr().ot)(m.id):void 0,page_is_notion_template:!!m&&p.isTemplate(m),page_is_public_share_link:o?o.is_public_share_link:void 0,page_is_site:o?o.is_site:void 0,page_is_template:n.isTemplate(),page_is_prepopulated:l,page_prepopulated_template_ids:c,page_is_database:n.isCollectionView(),page_view_type:d?d.getType():void 0,page_user_has_explicit_access:u?u.userHasExplicitAccess:Er().v,page_deletion_status:f}}}(),h=(null==s?void 0:s.space_id)||void 0;return{data:{...Yr(),...r,...s,...g,...(0,Ur().U)(),...eo(),...Xr(),client_initialization_id:C().d,...Qr({userId:null==l?void 0:l.id,spaceId:null==d?void 0:d.id}),...m,...u,...p,...c,...v,...ro(),...(b={spaceId:h,userId:(0,Dr().m)(),deviceId:r.device_id,eventName:t},{unique_event_marker:no(b)}),...oo(),hardware_concurrency:navigator.hardwareConcurrency,hardware_memory:navigator.deviceMemory,default_event_properties_initialized:!0},spaceId:null==s?void 0:s.space_id};var b}function Qr(e){const{userId:t,spaceId:n}=e;if(!t||!n)return;const r=x({userId:t,spaceId:n});return r?{notion_session_id:r.id,notion_session_start_ts:r.sessionStartTime,tab_id:(0,Pr().x0)(),tab_count:Gr}:void 0}function Xr(){const e=Hr().A.state;if(e)return{queryId:e.queryId}}function Yr(){const{sidebarSpaceViewStore:e}=_().default.state;return e&&e.isDefined()?{notify_desktop:e.getNotifyDesktop(),notify_email:e.getNotifyEmail(),notify_mobile:e.getNotifyMobile(),notify_email_digest:e.getNotifyEmailDigest()}:{}}function eo(){const{mainEditorCurrentBlockStore:e}=_().default.state;if(e){const t=(0,zr().U)(e);if(t)return{team_id:(0,gr().Xw)(t.id)}}return{}}const to={};function no(e){const{spaceId:t,userId:n,deviceId:r,eventName:o}=e,i=(0,gr().gB)(`${t}:${n}:${r}:${o}`),a=to[i],s=Date.now();if(!a)return to[i]=s,!0;const c=new Date(a),l=new Date(s);return c.getUTCDate()!==l.getUTCDate()?(to[i]=s,!0):void 0}function ro(){let e;return $().default.state.isLoaded&&(e=$().default.getStatsigExperimentsMap()),{experiments:e,experimentStoreLoaded:$().default.state.isLoaded}}function oo(){if(navigator.connection)return{net_downlink:navigator.connection.downlink,net_effective_type:navigator.connection.effectiveType,net_rtt:navigator.connection.rtt,net_save_data:navigator.connection.saveData}}function io(e){return"user_permission"===e.type}const ao=new(U().O2)("jamRecordingLinks",(async()=>await n.e(98213).then(n.bind(n,129961))));var so=()=>n(720090);var co=()=>n(987201),lo=()=>n(410690),uo=()=>n(711771),po=()=>n(148777),mo=()=>n(20199);const fo={recentPagesActions:new(U().O2)("recentPagesActions",(async()=>Promise.resolve().then(n.bind(n,824188)))),userSignalsHelpers:new(U().O2)("userSignalsHelpers",(async()=>n.e(84084).then(n.bind(n,954220)))),broadcastChannel:new(U().O2)("broadcastChannel",(async()=>Promise.resolve().then(n.bind(n,23908)))),minisearchDependency:uo().f};function vo(e){const{elector:t,broadcastChannel:n}=e.state;e.setState(e.getInitialState());(async()=>{await(null==t?void 0:t.die()),await(null==n?void 0:n.close())})()}function go(){(0,r.useEffect)((()=>{(0,po().So)((()=>({appStart:(0,lo().getAppStartTime)(),hookStart:performance.now()})))}),[]);const e=(0,s().v3)(),t=(0,Me().T)(),n=(0,Re().r)(),o=(0,Ke().ZC)(t),i=(0,Ke().ZC)(n);(0,r.useEffect)((()=>{t&&n&&(t!==o||n!==i)&&(vo(mo().A),async function(e){const{spaceId:t,userId:n,environment:r}=e;vo(mo().A),(0,po().So)((e=>({appStart:e.appStart,hookStart:e.hookStart,setupLocalSearchStart:performance.now()})));const o=fo.recentPagesActions.load().then((async e=>{await e.reinitializeGlobalRecentPagesStoreState(r,n,t)})),i=fo.userSignalsHelpers.load(),a=fo.broadcastChannel.load(),s=(async()=>{const{BroadcastChannel:e,createLeaderElection:r}=await a,o=new e(`local_search_${t}_${n}`),i=r(o);mo().A.update((e=>({...e,elector:i,broadcastChannel:o})))})(),c=(await i).initializeAndLoadAllUserSignals({spaceId:t,userId:n,environment:r});await Promise.all([uo().f,o,c,s])}({spaceId:n,userId:t,environment:e}))}),[e,t,n,o,i])}function ho(){const e=(0,s().v3)(),t=(0,s().Y0)();(0,r.useEffect)((()=>{var n;t.isElectron&&(n=B().clientLogglyEnvironmentData,F().electronApi&&(F().electronApi.setLoggerData?F().electronApi.setLoggerData(n):F().electronApi.setLogglyData&&F().electronApi.setLogglyData(n))),e.mobileNative&&e.mobileNative.setLogglyData(B().clientLogglyEnvironmentData)}),[t.isElectron,e.mobileNative])}var bo=()=>n(124092),So=()=>n(75756),yo=()=>n(30626),wo=()=>n(183558),Ao=()=>n(204077),ko=()=>n(455215),Io=()=>n(74464),_o=()=>n(991385),Co=()=>n(438754),Eo=()=>n(799089),xo=()=>n(666429);function To(){const e=(0,s().v3)();(0,r.useEffect)((()=>{!async function(e){const{environment:t,onboardingState:n}=e,{inAppCalloutStore:r,currentUserSettingsStore:o}=_().default.state,i=await Ao().w3(t);if(!i||!r.getCalloutVisibility("cookie_preference_popup").canShow)return;const a=$().default.checkGate({gateName:"enable_cookie_consent_settings_hydration"});if(o&&a){await o.load();const e=o.getSettings(),n=null==e?void 0:e.cookie_consent;if(n)return void(await Co().A.setCookieConsent(t,n))}if((0,_o().B)(t.currentUser.id)>=2)return Ao().Wv(),Eo().A.setState({open:!0}),Ao().JI({environment:t,type:"modal",onboardingState:n}),r.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),void(0,k().DO_NOT_USE_trackLegacy)(t,"cookie_modal_shown");if(xo().Ay.state.currentItem)return;const s=$().default.checkGate({gateName:"enable_reset_cookie_snackbar"});r.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),xo().Ay.setState({...xo().Ay.state,currentItem:{key:(0,wo().Ay)(),label:(0,Le.jsx)("div",{children:(0,So().Qq)(Io().i,"snackbar")}),right:(0,Le.jsx)(Po,{})},shouldReset:s}),Ao().JI({environment:t,type:"snackbar",onboardingState:n})}({environment:e})}),[e])}function Po(){const e=(0,s().v3)(),t=(0,ke().IS)((e=>({buttonContainer:{display:"flex"},buttonText:{color:e.text.inversePrimary},plainButton:{paddingInlineStart:8,paddingInlineEnd:8},dots:{width:14,marginInlineStart:14,fill:e.text.inversePrimary}})),[]);return(0,Le.jsxs)("div",{style:t.buttonContainer,children:[(0,Le.jsx)(bo().p,{onClick:()=>Ao().gz(e,{necessary:!0,performance:!0,preference:!0,targeting:!0}),children:(0,Le.jsx)("b",{style:t.buttonText,children:(0,Le.jsx)(_e().sA,{...So().LS.acceptAllButtonLabel})})}),(0,Le.jsx)(bo().p,{onClick:()=>Ao().gz(e,{necessary:!0,performance:!1,preference:!1,targeting:!1}),children:(0,Le.jsx)("b",{style:t.buttonText,children:(0,Le.jsx)(_e().sA,{...So().LS.rejectAllButtonLabel})})}),(0,Le.jsx)(ko().A,{hasDismissButton:!0,renderOrigin:e=>(0,Le.jsx)(bo().p,{style:t.plainButton,...e,children:(0,yo()._)(t.dots)})})]})}var Lo=()=>n(908006),Uo=()=>n(988083),Mo=()=>n(620689);const Ro=new(n(496506).ComputedStore)((()=>{const e=Uo().A.state;return e.phase===Uo().i.willShow?0:e.estimatedKeyboardWebViewOverlap}),{debugName:"estimatedKeyboardWebViewOverlapStore"});var Do=()=>n(406792);function jo(){const e=(0,s().v3)();(0,r.useEffect)((()=>{function t(t){!function(e,t){(0,k().DO_NOT_USE_trackLegacy)(e,"show_page_reload_confirmation_dialog",t)}(e,{reason:t})}return Ln().showConfirmationDialogEventEmitter.addListener(t),()=>{Ln().showConfirmationDialogEventEmitter.removeListener(t)}}),[e])}const Bo=300;var No=()=>n(280791);function Oo(){const e=(0,s().v3)(),t=(0,No().D)(e);(0,r.useEffect)((()=>{const e=b;e&&t.setPageVisitTrackerDataFromCrossOver(e)}),[t])}const qo=Math.random()<.001&&!0;var zo=()=>n(678293);var Wo=()=>n(253849),Fo=()=>n(858038),Ko=()=>n(855801),Vo=()=>n(862292),$o=()=>n(477293),Ho=()=>n(362749);var Go=()=>n(482099);var Jo=()=>n(250454);const Zo=5e3,Qo=Math.random()<.01&&!0;Jo().I.setShouldCollect(Qo);var Xo=()=>n(352246);const Yo=5e3;Xo().t.setShouldCollect(!1);var ei=()=>n(749804);var ti=()=>n(906537),ni=()=>n(649642);function ri(){const e=(0,s().v3)(),t=(0,r.useRef)("none"),n=(0,r.useCallback)((e=>{const n=t.current;e!==n&&(t.current=e,"dragging"===e?ni().A.setState({isDragging:!0}):"dragging"===n&&ni().A.setState({isDragging:!1}))}),[]),o=(0,r.useCallback)((()=>{"none"===t.current&&n("touching")}),[n]),i=(0,r.useCallback)((()=>{n("none")}),[n]),a=(0,r.useCallback)((()=>{"touching"===t.current&&ti().isExpanded(ti().get())&&n("dragging")}),[n]);(0,r.useEffect)((()=>{if(e.device.isIOS)return window.addEventListener("touchstart",o),window.addEventListener("touchend",i),window.addEventListener("touchcancel",i),document.addEventListener("selectionchange",a),()=>{window.removeEventListener("touchstart",o),window.removeEventListener("touchend",i),window.removeEventListener("touchcancel",i),document.removeEventListener("selectionchange",a)}}),[e.device.isIOS,o,i,a]);const c=(0,r.useCallback)((()=>{Lo().default.afterNextFlush((()=>{"empty"!==Fn().default.state.mode&&Fn().default.setState({...Fn().default.state,savedSelectionXPosition:void 0})}))}),[]),l=(0,r.useCallback)((()=>{setTimeout((()=>{ti().get()||(0,ei().I)({environment:e})}),0)}),[e]);(0,r.useEffect)((()=>(window.addEventListener("mousedown",c),e.device.isMobileBrowser&&document.addEventListener("focusout",l),()=>{window.removeEventListener("mousedown",c),document.removeEventListener("focusout",l)})),[e,c,l])}const oi=window.matchMedia("(prefers-color-scheme: dark)");const ii=!1,ai=(ii?1:10)*g().TD,si=5*ai;function ci(...e){ii&&console.log(...e)}function li(){(0,r.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,Pr().x0)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const r=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[r,o]of t.entries())n-o>si&&e.push(r);e.length&&ci("Removing tab ids:",e);for(const r of e)t.delete(r)})(),n.postMessage(e);const r=t.size+1;ci("Tab count is",r),Jr(r)}),ai);return()=>{n.close(),window.clearInterval(r)}}),[])}var di=()=>n(857048);const ui="loadCachedPageChunk";n(16280);const pi=function(){const e=(0,s().v3)(),t=(0,r.useCallback)(((t,n)=>{(0,D().u)({environment:e,event:{eventName:"statsig_client_init_error",eventProperties:{statsig_init_method:"bootstrap",statsig_init_error:n}}}),B().log({level:"error",from:"statsig",type:"initialize",error:(0,O().convertErrorToLog)(t),data:{userId:e.currentUser.id}})}),[e]);(0,u().w)((()=>{void 0!==zo().StatsigInitializer.statsigConfigFetch&&(0,D().u)({environment:e,event:{eventName:"statsig_config_file_fetch",eventProperties:{time:zo().StatsigInitializer.statsigConfigFetch.durationMs,timed_out:!zo().StatsigInitializer.statsigConfigFetch.success}}}),zo().StatsigInitializer.initializePromise?zo().StatsigInitializer.error?t(zo().StatsigInitializer.error,"error"):zo().StatsigInitializer.isComplete||t(new Error("`statsig.initialize` was not awaited on app bootstrap"),"incomplete"):t(new Error("`statsig.initialize` was not called on app bootstrap"),"uninitialized")}))};var mi=()=>n(763765),fi=()=>n(386466);const vi=function(){const e=(0,s().v3)(),t=(0,r.useCallback)((t=>{(0,D().u)({environment:e,event:{eventName:"statsig_client_update_user_error",eventProperties:{statsig_init_method:"bootstrap"}}}),B().log({level:"error",from:"statsig",type:"updateUser",error:(0,O().convertErrorToLog)(t),data:{nextUserId:e.currentUser.id,err:(0,n(319625).A)(t).message}})}),[e]),[o]=(0,de().Yb)((async()=>await pe().getExperimentDeviceId(e)),[e]),[c]=(0,de().Yb)((async()=>await pe().getBrowserId(e)),[e]),l=(0,p().K8)((()=>{var e,t;return!(null===(e=_().default.state.currentUserStore)||void 0===e||!e.isDefined())&&!(null!==(t=_().default.state.currentUserStore)&&void 0!==t&&t.getOnboardingCompleted())}),[]),d=(0,p().K8)((()=>{var e;return null===(e=_().default.state.sidebarSpaceStore)||void 0===e?void 0:e.isDefined()}),[]),u=(0,p().K8)((()=>"blank"===e.RouterStore.state.route.name),[e.RouterStore]),m=(0,r.useRef)(zo().StatsigInitializer.statsigStageTwoUser),f=(0,p().K8)((()=>{if("resolved"===o.status&&"resolved"===c.status&&(n(961581).A.state.initialRenderCompleted||u)&&(!e.currentUser.id||d||l||u)){const r=n(546369).getDataForStatsigUser({environment:e,deviceId:o.value,browserId:c.value});if(void 0===r.subscriptionTier){var t;const e=null===(t=m.current)||void 0===t||null===(t=t.custom)||void 0===t?void 0:t.spaceSubscriptionTier;n(326215).nb.find((t=>t===e))&&(r.subscriptionTier=e)}return(0,fi().tX)({data:r,config:{env:"production"}})}}),[e,o,c,d,l,u],{useDeepEqual:!0}),v=(0,r.useRef)(0),g=!(0,p().O$)(Ie().e),h=(0,p().K8)((()=>{var e;return null===(e=n(105764).LX.getState())||void 0===e?void 0:e.isStatsigUserDiffDebuggingEnabled}),[]);(0,r.useEffect)((()=>{var r;const o=null===(r=_().default.state.sidebarSpaceStore)||void 0===r?void 0:r.id;!async function(){if(zo().StatsigInitializer.isComplete&&f&&!N().n4(f,m.current)&&!g){m.current=f,v.current++;try{mi().t.USEWITHCAUTION_markStatsigUserFetched({userId:f.userID,spaceId:o,fetched:!1});const t=await zo().statsigClientLoader.getClient()||await zo().statsigClientLoader.getUninitializedStatsigClient({statsigUser:f,initialValues:void 0,overrideStableID:(0,zo().getOrCreateStableID)(),configFilePromise:zo().StatsigInitializer.fetchConfigFilePromise()}),r=async function(){var r,s,c,l,d,u,p;const m=(0,n(754704).createApiHttpJsonRequestOptions)({environment:e,eventName:"getStatsigResults",data:{...f.customIDs,device:(0,fi().getDeviceAttributesForStatsigUser)(e.device),locale:a().locale,clientSdkApiKey:i().A.statsig.apiKey,spaceId:o,additionalUserAttributes:{spaceCreatedTime:null===(r=f.custom)||void 0===r?void 0:r.spaceCreatedTime,spaceCreatedDate:null===(s=f.custom)||void 0===s?void 0:s.spaceCreatedDate,subscriptionTier:null===(c=f.custom)||void 0===c?void 0:c.spaceSubscriptionTier,isSalesAssistedPlan:null===(l=f.custom)||void 0===l?void 0:l.isSalesAssistedPlan,spacePlanType:null===(d=f.custom)||void 0===d?void 0:d.spacePlanType,userSignupTime:null===(u=f.custom)||void 0===u?void 0:u.userSignupTime,domainType:null===(p=f.custom)||void 0===p?void 0:p.domainType}},activeUserId:e.currentUser.id,tracking:void 0,eventListeners:(0,n(459225).getPerformanceEventListeners)({eventName:"getStatsigResults",isPrefetchRequest:!0})}),v=await(0,mr().default)(m);"success"===v.type?(t.dataAdapter.setData(JSON.stringify(v.data.initialValues)),zo().StatsigInitializer.currentUserDoNotUse=v.data.statsigUser,t.updateUserSync(v.data.statsigUser)):B().log({level:"error",from:"useUpdateStatsigData",type:"updateStatsigUser.failedToReachStatsigAndServer",data:{message:"Unable to reach statsig and fallback failed",err:(0,mr().V)(v),nextUserId:e.currentUser.id}})},s=async function(n){t.off("initialization_failure",s),B().log({level:"info",from:"useUpdateStatsigData",type:"updateStatsigUser.failedToReachStatsig",data:{message:"Unable to reach statsig, trying to get latest values from server.",nextUserId:e.currentUser.id}}),await r()};t.dataAdapter.getDataSync(f)?(t.on("initialization_failure",s),await t.updateUserAsync(f)):await r()}catch(r){t(r)}v.current--,0===v.current&&($().default.recomputeAllGroupStores(),Lo().default.afterNextFlush((()=>{mi().t.USEWITHCAUTION_markStatsigUserFetched({userId:f.userID,spaceId:o,fetched:!0})})))}}()}),[t,f,e,g,h])};var gi=()=>n(611648),hi=()=>n(921676),bi=()=>n(911988),Si=()=>n(960955),yi=()=>n(584262),wi=()=>n(243020),Ai=()=>n(427704),ki=()=>n(179034),Ii=()=>n(343666),_i=()=>n(245241);const Ci=["compact","regular","unknown"];var Ei=()=>n(671593),xi=()=>n(638681),Ti=()=>n(328523),Pi=()=>n(518646),Li=()=>n(324234),Ui=()=>n(858341),Mi=()=>n(333334),Ri=()=>n(495262),Di=()=>n(867201),ji=()=>n(577142),Bi=()=>n(537941),Ni=()=>n(260488),Oi=()=>n(778417),qi=()=>n(601866),zi=()=>n(112204),Wi=()=>n(72159),Fi=()=>n(324089),Ki=()=>n(840153),Vi=()=>n(994877),$i=()=>n(430483);var Hi=()=>n(357307);var Gi=()=>n(155959);var Ji=()=>n(644914);var Zi=()=>n(211419);function Qi(e){const t=(0,fn().Xz)(e);switch(t.type){case"native":return;case"web":const e=t.route;switch(e.name){case"page":return e.collectionViewId?"collection":"page";case"nativeTab":switch(e.tab){case"updates":return"updates";case"assistant":return"assistant";case"trash":return"trash";case"members":return"members";case"help":return"help";case"templates":return"templates";case"offline":return"offline_settings"}break;default:return}}}var Xi=()=>n(232930),Yi=()=>n(780865),ea=()=>n(111379),ta=()=>n(124749),na=()=>n(181405),ra=()=>n(395361),oa=()=>n(481292),ia=()=>n(969197),aa=()=>n(176106),sa=()=>n(978848);var ca=()=>n(459040),la=()=>n(1130);const da={MobileNativePerformanceListener:new(U().O2)("MobileNativePerformanceListener",(async()=>await n.e(62058).then(n.bind(n,227731))))},ua=(0,U()._h)(da.MobileNativePerformanceListener,(e=>e.MobileNativePerformanceListener));var pa=()=>n(671973),ma=()=>n(179266),fa=()=>n(129522),va=()=>n(106628),ga=()=>n(599412),ha=()=>n(624307),ba=()=>n(323914),Sa=()=>n(496067),ya=()=>n(718807),wa=()=>n(524450),Aa=()=>n(518888),ka=()=>n(732797),Ia=()=>n(529649),_a=()=>n(933371),Ca=()=>n(75368),Ea=()=>n(502438),xa=()=>n(466872),Ta=()=>n(224701);const Pa=N().Bj((async(e,t)=>(await va().T.searchActions.load()).getLocalCacheFromAppState({environment:e})),((e,t)=>{var n;return`${e.currentUser.id}-${(null===(n=_().default.state.sidebarSpaceViewStore)||void 0===n?void 0:n.id)??"none"}-${t??"none"}`}));function La(e,t){const{mobileNative:r,TabbedRouterStore:o,device:a}=e();if(a.isMobileNative&&r){var s;r.updateReceiveApiHandlers({nativeToWebRenderStart:e=>{pa().N.markNativeStart(e)},connectivityTypeChanged:e=>{Ie().A.setState({...Ie().A.state,mobileConnectivityType:e})},toggleAvailableOffline:t=>{const{pageId:n,operation:r}=t;ca().lX({store:new(Y().B)(e(),{table:ki().ev,id:n}),environment:e(),analyticsFrom:"mobile_home",operation:r})},statusBarTap:Ma,backButtonPress:()=>In().N6(e(),{type:"backbutton"}),getLocalizedUrl:e=>[{value:{url:(0,Xi().x)(e.routeId)}}],keyboardWillShow:t=>{Ui().m(e(),Uo().i.willShow,t??0)},keyboardDidShow:t=>{Ui().m(e(),Uo().i.shown,t??0)},keyboardWillHide:()=>{Ui().m(e(),Uo().i.willHide,0)},keyboardDidHide:()=>{Ui().m(e(),Uo().i.hidden,0),a.isIpad&&(Oi().IU({environment:e()}),sa().A.clear(!0))},keyboardConfigChanged:e=>{Uo().A.updateKeyboardConfig(e.packageName,e.activeLocale)},safeAreaConfigChanged:t=>{(0,Gi().T)("supportsNativeSafeAreaConfig")?(bi().U4.update((e=>({...e,supportsNativeSafeAreaConfig:!0,top:t.top,bottom:t.bottom,left:t.left,right:t.right}))),e().WindowSizeStore.updateWindowSize()):bi().U4.reset()},keyboardShortcut:t=>In().N6(e(),t),nativeBottomBarDidChange:e=>{void 0!==e.height&&Uo().A.update((t=>t.lastUpdatedTimestamp&&e.timestamp&&e.timestamp<t.lastUpdatedTimestamp?t:{...t,nativeBottomBarHeight:e.height,lastUpdatedTimestamp:e.timestamp}))},pushNotificationTokenRefresh:t=>Li().handleTokenRefresh(e(),t,"refresh"),resume:wa().A.resume,pause:async()=>{wa().A.pause();const{stopDictation:t}=await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(25151),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(2681),n.e(4902),n.e(69438)]).then(n.bind(n,881383));t({environment:e(),from:"native_action"})},refreshSubscriptionData:async t=>{await Qe().callApi({eventName:"invalidateSubscriptionData",environment:e(),data:{spaceId:t,provider:"revenue_cat"}});const n=_().default.state.sidebarSpaceStore;n&&await Ta().o2({environment:e(),spaceStore:n})},refreshSubscriptionDataV2:async()=>{const t=_().default.state.sidebarSpaceStore;t&&await Ta().o2({environment:e(),spaceStore:t})},processMobileActionBarAction:e=>{const{componentId:t,action:n}=e;r.componentEvents.dispatch("MobileActionBar",t,"onAction",{action:n})},logout:t=>{na().Yq({environment:e(),userId:t,logoutOrigin:wi().d.MobileNativeListener})},logoutV2:t=>{const{userId:n,fcmToken:r}=t;na().Yq({environment:e(),userId:n,logoutOrigin:wi().d.MobileNativeListener,fcmToken:r})},updateTranscriptionState:async t=>{const{blockId:r,state:o}=t,i=e(),a=new(Y().B)(i,{table:ki().ev,id:r});(await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(25151),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(2681),n.e(4902),n.e(69438)]).then(n.bind(n,271380))).setTranscriptionStateAndTrack({environment:i,blockStore:a,state:o,from:"native_sync"})},logoutAll:()=>{na().ri(e())},openDestinationV2:t=>{Si().A.closeAll();const n=e(),r=(0,fn().Xz)(n.TabbedRouterStore.state),{activeTab:o,tabs:i}=n.TabbedRouterStore.state,a=r===i[o].rootPage,s="native"===r.type,c=a&&s;switch((0,vn().A)(n)&&Bi().s({environment:n,tab:n.TabbedRouterStore.state.activeTab,nativeRootPageOverrideEnabled:!1}),t.type){case"moveTo":const e=new(Y().B)(n,{table:ki().ev,id:t.blockId});Di().Y({store:e,environment:n,pageVisitSource:yi().y8.Move}),function(e,t){const n=new(Y().B)(t,{table:ki().ev,id:e});Mi().ho({environment:t,blocks:[n],moveToContext:"home_tab",onAccept:e=>{Di().Y({store:n,environment:t,pageVisitSource:yi().y8.Move})}})}(t.blockId,n);break;case"trash":Ba({query:t.query});break;case"webSearch":!function(e,t){Ni()._N({environment:e,analyticsFrom:"mobile-bottom-bar",query:t}),Ti().Mq(e,{itemName:"search",logging_source:"mobile_native"})}(n,t.query);break;case"templates":!function(e,t){Na(e),Ca().A.setState({open:!0,isFromNativeHome:!0,source:t.source})}(n,{source:t.source});break;case"AIAssistant":!function(e,t,n){_a().X.update((e=>({query:n.query,searchSessionId:n.searchSessionId,from:n.from??"search",shouldReset:Boolean(n.query&&n.query.trim().length>0)}))),(0,ji().navigate)({environment:e,url:`${Ai().GJ.nativeTab}/assistant`,redirect:t})}(n,c,{query:t.query,searchSessionId:t.searchSessionId,from:t.from});break;case"passkeySettings":const r=`${Ai().GJ.nativeTab}/settings?addPasskey=true`;(0,ji().navigate)({environment:n,url:r,redirect:!0});break;case"createOrJoinWorkspace":return Da(n,t.userId);case"createNewWorkspace":return ja(n,t.userId)}},openDestination:t=>{Si().A.closeAll();const n=e();switch("closePopup"!==t&&(0,vn().A)(n)&&Boolean(n.TabbedRouterStore.state.tabs[n.TabbedRouterStore.state.activeTab].nativeRootPageOverrideEnabled)&&Bi().s({environment:n,tab:o.state.activeTab,nativeRootPageOverrideEnabled:!1}),t){case"addPage":Na(n);break;case"allUpdates":!function(e){(0,Gi().T)("supportsNativeHome")&&e.device.isPhone?(qn().TC({RouterStore:e.RouterStore,currentUserId:e.currentUser.id}),(0,ji().navigate)({environment:e,url:`${Ai().GJ.nativeTab}/updates`,redirect:!0})):xa().A.setState({...xa().A.state,open:!0})}(n);break;case"addAccount":ba().c.setState({...ba().c.state,open:!0});break;case"createOrJoinWorkspace":return Da(n);case"createNewWorkspace":return ja(n);case"notificationAndSettings":ha().A.setState({open:!0,source:ha().C.Home});break;case"trash":Ba({});break;case"memberSettings":Ia().A.setState({...Ia().A.state,open:!0});break;case"help":ka().A.setState({...ka().A.state,open:!0});break;case"intercom_messages":!function(e){Vi().SI({environment:e,from:"help_button"})}(n);break;case"aiWriter":!async function(e){(await Oa()).handleAi(e)}(n)}},updateFileUploadProgress:e=>{const{uploadKey:t,progressPercent:n}=e,r=Aa().default.getKeyState(t);r&&Aa().default.setKeyState(t,{...r,progressPercent:n})},setCurrentUserId:async t=>{await Ra(t,e())},setCurrentSpace:async t=>{await async function(e,t,n){const r=await Ki().T({environment:n,newCurrentUserId:e}),{currentUserRootStore:o,currentUserSettingsStore:i}=_().default.state;if(!o)return;await o.load();const a=(0,ea().k)(t);a&&await qi().tR({environment:r,spaceViewStore:a,userSettingsStore:i,userRootStore:o,pageVisitSource:yi().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})}(t.userId,t.spaceId,e())},updateHorizontalSizeClass:e=>{const t=(0,Ei().tf)(xi().literals(...Ci),e)?"unknown":e;t!==r.horizontalSizeClass.state&&r.horizontalSizeClass.setState(t)},updateTabbedRouterState:t=>{var n;const r=e(),{TabbedRouterStore:o}=r,i=o.state;if(t.tab!==i.activeTab||null!==(n=t.pages)&&void 0!==n&&n.length||!N().n4(t.modal,i.modal)||i.tabs[i.activeTab].pages.length){const n=t.navigationEffect;if(n&&"AIAssistant"===n.type)_a().X.update((e=>({query:n.query,searchSessionId:n.searchSessionId,from:"shortcut"===n.from?"search":n.from??"search",isFromShortcut:"shortcut"===n.from,shouldReset:Boolean(n.query&&n.query.trim().length>0)})));Bi().s({environment:e(),tab:t.tab,queryParams:t.queryParams,pages:t.pages,modal:t.modal,nativeRootPageOverrideEnabled:t.nativeRootPageOverrideEnabled,navigationAction:t.navigationAction,navigationSource:t.navigationSource})}else Ma();const a=o.state;return[{state:a,topPage:(0,fn().Xz)(a),webTransitionType:Qi(a),updateId:t.updateId??(0,gr().Ay)()}]},getLocalSearchResults:async t=>{const n=await Pa(e(),t.searchSessionId);if(!n)return[{error:"Local cache does not exist"}];const r=(0,Ei().tf)(_i().gG,t.sort);if(r)return[{error:`old sort type is unsupported! ${r}`}];const o=t.sort,i=!Ie().A.state.online&&$().default.checkGate({gateName:"download_for_offline"}),a={...t.filters,isOfflineOnly:i},{searchAndRerankLocalPages:s}=await va().T.search.load(),c=s({query:{query:{text:t.query??"",filters:a,sort:o},limit:t.limit},localCachedPages:n,includeRecordMap:!1,userId:e().currentUser.id,environment:e(),spaceStore:_().default.state.sidebarSpaceStore}),l=[{value:{total:0,results:[],recordMap:{},trackEventProperties:void 0}}];if(!c||0===c.results.length)return l;const d=Ie().A.state.online?Yi().kZ(e(),c.results):c.results;return[{value:{results:d,total:d.length,recordMap:{},trackEventProperties:{}}}]},customAddCommentMenuItemTapped:async()=>{const t=await Vo().T.formulas.load();(await Oa()).handleComment(e(),"custom_add_comment_menu_item",t)},convertEnrichedMarkdownToBlocks:async t=>{try{const{convertEnrichedMarkdownToBlocks:r}=await Promise.all([n.e(55373),n.e(36192),n.e(87249),n.e(71621),n.e(88924),n.e(89296),n.e(9294),n.e(40563),n.e(34442),n.e(98262)]).then(n.bind(n,749541));return[r(e(),t.spaceId,t.userId,t.markdown)]}catch(r){return[{error:`Failed to convert enhanced markdown to blocks: ${r instanceof Error?r.message:"Unknown error"}`}]}},undoRevision:()=>{Ri().tN({environment:e(),preventSelectText:!0})},searchTeams:async e=>{const{query:t}=e,n=_().default.state.sidebarSpaceStore,r=_().default.state.sidebarSpaceViewStore;if(!n||!r)return[{error:"SpaceStore or SpaceViewStore was undefined"}];const o=await va().T.searchActions.load();return[{value:{ids:(await o.searchTeams({spaceViewStore:r,query:t,teamStores:r.getTeamsStores()})).map((e=>e.id))}}]},getImageBlockUrls:async t=>{var r;const{blockId:o,renderWidth:a}=t,s=null===(r=fa().K.findBlockFromId(o))||void 0===r?void 0:r.getBlockStore();if(!s||"image"!==s.getType())return[{error:"blockId points to a non-image block"}];const c=s,{getEmbedSourceFromBlockStore:l}=await Promise.resolve().then(n.bind(n,483545)),d=l(c),u={isAuthenticated:!0,url:d,width:a,permissionRecord:c.pointer},p=e(),m=await(0,ma().L)(u,p);if(!m)return[{error:"could not get proxied image url"}];const f=0===m.indexOf("https:")?m:`${i().A.domainBaseUrl}${m}`;let v;return ln()._J(d)&&(v=await(0,Pi().k)(p,{url:d,download:!1,downloadName:"image",permissionRecord:c.pointer},!1,!1)),[{value:{previewUrl:f,originalUrl:v}}]},dismissKeyboard:()=>{if(!(Ea().default.state.stores.length>0))return;if("editing"===Fn().default.state.mode&&Fn().default.state.multiSelection.start.store.table===Ii().SN)return;const t=e();Oi().IU({environment:t}),(0,zi().k)()},focusOnBlock:t=>{var n;const{blockId:r,position:o}=t,i=null===(n=fa().K.findBlockFromId(r))||void 0===n?void 0:n.getBlockStore();if(!i)return;const a=i.getBlockTitleStore();if(!a)return;const s=e();Oi().hc({environment:s,store:i});const c=void 0!==o?{startIndex:o,endIndex:o}:{startIndex:0,endIndex:0};(0,Wi().t)({store:a,selection:c})},webViewBoundsChanged:()=>{e().WindowSizeStore.updateWindowSize()},syncNativePageStates:t=>{var n;const{states:r}=t,o=e(),i=null===(n=o.currentUser)||void 0===n?void 0:n.id;for(const e of r)"toggle"===e.type&&Fi().xT({environment:o,blockId:e.blockId,state:e.isExpanded,currentUserId:i,shouldNotSyncWithNative:!0})},forceShowWebError:e=>{t(new Error(e.message))}});const l=e().mobileNative;var c;if(null!=l&&null!==(s=l.api)&&void 0!==s&&s.ready)null==l||null===(c=l.api)||void 0===c||c.ready()}}function Ua(){const e=(0,s().v3)(),{device:t}=e,[n,i]=(0,r.useState)(null);(0,r.useEffect)((()=>La((()=>e),i)),[e]),function(){const e=(0,s().v3)(),t=(0,p().K8)((()=>(0,Hi().Y)(e)),[e]);(0,r.useEffect)((()=>{var n;null===(n=e.mobileNative)||void 0===n||n.toggleBottomBar(t)}),[e.mobileNative,t])}(),function(){const{mobileNative:e}=(0,s().v3)(),t=(0,p().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=_().default.state;if(!e||!t)return;const n=$i().zD.isShowingQNAOnMobile();return{userId:e.id,spaceId:t.id,enabled:n}}),[]);(0,r.useEffect)((()=>{t&&(null==e||e.updateAiAssistantEnabledState(t))}),[e,t])}(),function(){const e=(0,s().v3)(),{mobileNative:t,WindowSizeStore:n}=e,o=(0,p().O$)(n),i=(0,p().K8)((()=>({visible:ir().sidebarExpandedStore.state&&!(0,Ji().o1)(e),width:(0,Ji().r6)(e)})),[e]);(0,r.useEffect)((()=>{null==t||t.sidebarVisibility(i.visible,i.width)}),[e,t,o,i])}(),function(){const e=(0,s().v3)(),{mobileNative:t,TabbedRouterStore:n}=e,{state:o,previousState:i}=(0,p().K8)((()=>({state:n.state,previousState:n.getPreviousState()})),[n]);(0,r.useEffect)((()=>{const n=null==t?void 0:t.api.handleTabbedRouterStateUpdate;if(n){if(n({state:o,topPage:(0,fn().Xz)(o),webTransitionType:Qi(o),updateId:(0,wo().Ay)()}),!i)return;const t=(0,fn().WP)(i),r=(0,fn().WP)(o);N().n4(t,r)||Ti().yY(e,{origin:t,destination:r,from:o.navigationSource,action:o.navigationAction,logging_source:"mobile_native"})}}),[e,t,o,i])}(),function(){const{mobileNative:e,RouterStore:t}=(0,s().v3)(),{isIOS:n}=(0,s().Y0)(),o=(0,r.useRef)(!1),i=(0,p().O$)(Zi().QO),a=(0,p().K8)((()=>"onboarding"===t.state.route.name),[t]);(0,r.useEffect)((()=>{n&&null!=e&&e.setWebViewAllowsNavigationGestures&&(a||ir().sidebarOpenStore.state||hi().A.getPreventScrollType()!==gi().A.None?!1!==o.current&&(o.current=!1,e.setWebViewAllowsNavigationGestures(!1)):!0!==o.current&&(o.current=!0,e.setWebViewAllowsNavigationGestures(!0)))}),[n,a,e,i])}(),function(){const{mobileNative:e,TabbedRouterStore:t}=(0,s().v3)(),n=(0,p().K8)((()=>{var e;if(!(0,Gi().T)("supportsCustomAddCommentMenuItem"))return!1;const{currentUserStore:n}=_().default.state;if(!Boolean(null==n?void 0:n.id))return!1;if((0,Gi().T)("supportsNativeBottomBarOverlappingWebView")?Si().A.hasOpenMobileSlideUps():Si().A.hasOpenPopups())return!1;const r=(0,fn().Xz)(t.state),o="web"===r.type&&((null===(e=r.redirectedTo)||void 0===e?void 0:e.route)||r.route);if(!o||"page"!==o.name)return!1;const i=Fn().default.state;if("empty"===i.mode)return!1;const a=(0,Bn().ZS)({multiSelection:i.multiSelection,filterCommonAncestors:!0,focus:void 0});return!(!a||0===a.stores.length)&&a.stores.every((e=>e.canComment()))}),[t]);(0,r.useEffect)((()=>{(0,Gi().T)("supportsCustomAddCommentMenuItem")&&(null==e||e.updateCustomAddCommentMenuItemEnabled(n))}),[e,n])}(),function(){const{mobileNative:e}=(0,s().v3)(),t=(0,p().K8)((()=>{var e;return Boolean(null===(e=ee().ei.state)||void 0===e?void 0:e.isTranscriptionBlock())}),[]);(0,r.useEffect)((()=>{null==e||e.requestKeepScreenOn(t)}),[t,e])}(),function(){const e=(0,s().v3)(),{isMobileNative:t,isAndroid:n}=(0,s().Y0)(),{RouterStore:o}=e,i=(0,p().K8)((()=>{var e,r;if(!t||!n)return!1;if("page"!==o.state.route.name)return!1;if(Uo().A.state.phase!==Uo().i.hidden)return!1;if(aa().A.state.open)return!1;if(Gt().A.state.open)return!1;if(Boolean(null===(e=sa().A.state)||void 0===e?void 0:e.menu))return!1;const i=Fn().default.state,a="editing"===i.mode?i.multiSelection:void 0;if(a&&!(0,oa().k)(a))return!1;const s=null==a||null===(r=a.start)||void 0===r?void 0:r.store;return!s||!(0,ia().Le)(s)}),[o,n,t]),a=(0,ra().Y)(((e,t)=>{t&&(0,ei().I)({environment:e})}),150);(0,r.useEffect)((()=>{a(e,i)}),[e,i,a])}(),(0,r.useEffect)((()=>{t.isTablet&&ir().sidebarWidthStore.setState(300)}),[t]);const a=(0,r.useCallback)(((e,t=!1)=>{Object.keys(e.tabs).forEach((n=>{const r=n;t&&(e.tabs[r].nativeRootPageOverrideEnabled=void 0),r!==e.activeTab?e.tabs[r].pages=[]:e.tabs[r].pages=e.tabs[r].pages.slice(-1)}))}),[]),c=(0,r.useCallback)(((t,n)=>{var r;const{mobileNative:o,TabbedRouterStore:i,currentUser:s}=e,c=_().default.state.sidebarSpaceStore,l=null==c?void 0:c.id;if(null!=o&&null!==(r=o.api)&&void 0!==r&&r.setCurrentSpaceInfo&&(B().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"Web calling nativeAPI setCurrentSpaceInfo",spaceId:l}}),o.api.setCurrentSpaceInfo({spaceId:l,spaceViewId:null==t?void 0:t.id,userId:s.id,editable:(null==c?void 0:c.canEdit())??!0})),(0,vn().A)(e)){const e=e=>{if("web"!==e.type)return;const t={...e.queryParams},n=l&&(0,gr().Xw)(l);t.spaceId=n,e.queryParams=t,e.route.spaceId=n},t=N().mg(i.state);e(t.tabs.updates.rootPage),e(t.tabs.addPage.rootPage),void 0!==(null==n?void 0:n.id)&&a(t),i.setState(t)}Pa(e,void 0)}),[a,e]),l=(0,r.useCallback)((t=>{var n;null!==(n=e.mobileNative)&&void 0!==n&&null!==(n=n.api)&&void 0!==n&&n.setCurrentUserInfo&&e.mobileNative.api.setCurrentUserInfo({userId:null==t?void 0:t.id,loggedInUserIds:e.currentUser.loggedInUserIds});const r=!(0,vn().A)(e)||void 0===e.currentUser.id,{TabbedRouterStore:o}=e,i=N().mg(o.state);a(i,r),o.setState(i)}),[a,e]),d=(0,ta().$)(),u=(0,Ke().ZC)(d);(0,r.useEffect)((()=>{(null==d?void 0:d.id)!==(null==u?void 0:u.id)&&l(d)}),[l,d,u,t.isMobileNative,e.mobileNative]);const m=(0,p().O$)(_().AppStoreSidebarSpaceViewStore),f=(0,Ke().ZC)(m);(0,r.useEffect)((()=>{(null==m?void 0:m.id)!==(null==f?void 0:f.id)&&c(m,f)}),[c,m,f,t.isMobileNative,e.mobileNative]);const v=(0,o().X)("mab_debugging");if((0,de().Yb)((async()=>{(await Oa()).updateDebugShouldShow(v)}),[v]),(0,r.useEffect)((()=>{if(n){const e=setTimeout((()=>{i(null)}),0);return()=>clearTimeout(e)}}),[n]),n)throw n;return(0,Le.jsx)(ua,{})}function Ma(){var e;if(hi().A.getPreventScrollType()===gi().A.None)if(ir().sidebarOpenStore.state)On().A.SidebarMobileScroller&&(null===(e=On().A.SidebarMobileScroller.getNode())||void 0===e||e.scrollTo({top:0,behavior:"auto"}));else if(On().A.MenuScroller){var t;null===(t=On().A.MenuScroller.getNode())||void 0===t||t.scrollTo({top:0,behavior:"auto"})}else if(On().A.MenuPageScroller){var n;null===(n=On().A.MenuPageScroller.getNode())||void 0===n||n.scrollTo({top:0,behavior:"auto"})}else if(On().A.PageScroller){var r;null===(r=On().A.PageScroller.getNode())||void 0===r||r.scrollTo({top:0,behavior:"auto"})}}async function Ra(e,t){return t.currentUser.id===e?t:await Ki().T({environment:t,newCurrentUserId:e})}async function Da(e,t){let n=e;t&&(n=await Ra(t,e)),await la().createOrJoinSpace(n,"mobile_native_listener")}async function ja(e,t){let n=e;t&&(n=await Ra(t,e)),await la().createOrJoinSpace(n,"mobile_native_listener_sidebar_switcher")}function Ba(e){Sa().A.setState({open:!0});const{query:t}=e;t&&ya().Ay.setState({...ya().Ay.state,filter:t})}function Na(e){(0,Gi().T)("supportsNativeHome")&&e.device.isPhone?(qn().TC({RouterStore:e.RouterStore,currentUserId:e.currentUser.id}),(0,ga().M)({environment:e,from:"mobile_bottom_bar",redirect:!0,quickAddParentOverride:{type:"space-private-pages"}})):(0,ga().M)({environment:e,from:"mobile_bottom_bar"}),Ti().Mq(e,{itemName:"add_page"})}async function Oa(){return await n.e(86477).then(n.bind(n,986260))}function qa(e){var t;const h=(0,s().v3)(),b=(0,o().X)("enable_early_space_store");(0,u().l)((()=>{const{device:e,mobileNative:t}=h;if(b||_().default.setState(_().default.getInitialState()),(0,w().f)(h),A().fD(h),t&&t.hideSplashscreen(),i().A.isMobile){const e=document.body.parentElement;e&&e.classList.add(le().Hw6)}m().hR({device:e,config:i().A,cookieService:h.cookieService}),y().g5({locale:a().locale,env:"production"}),(0,f().O8)(window.location.href),S(window.location.href)})),(0,Go().p)(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{Ar().h.setAnalyticsSettingsFetcher(_r),(0,kr().E)(e)}),[e])}(),function(){const e=(0,s().v3)(),t=(0,s().Y0)();(0,r.useEffect)((()=>{if(t.isMobileNative)return;let e;document.hasFocus()&&(e=setInterval((()=>{L()}),P),L());const n=()=>{e&&clearInterval(e),e=setInterval((()=>{L()}),P),L()},r=()=>{e&&clearInterval(e),e=void 0};return window.addEventListener("focus",n),window.addEventListener("blur",r),()=>{e&&clearInterval(e),window.removeEventListener("focus",n),window.removeEventListener("blur",r)}}),[t.isMobileNative,e])}(),function(){const e=(0,r.useRef)(!1),t=(0,s().v3)(),n=(0,r.useCallback)((async e=>{if(e.currentUser.id&&Ye().fJ.size>0){const t=await Qe().callApi({eventName:"getTasks",environment:e,data:{taskIds:Array.from(Ye().fJ.values())}});if("success"===t.type){const{results:n}=t.data,r=new Set(Ye().fJ);for(const t of n)r.delete(t.id),t.status&&(0,Xe().s)({environment:e,eventName:t.eventName,response:t.status,userId:e.currentUser.id}),Ye().u_.emit(t.id,t),nt.emit(t.eventName,t),"failure"!==t.state&&"success"!==t.state&&"dead"!==t.state&&"timeout_before_execution"!==t.state||Ye().fJ.delete(t.id);if(r.size>0)for(const e of r.values())Ye().fJ.delete(e)}}}),[]),o=(0,p().K8)((()=>{var e;return null===(e=_().default.state)||void 0===e||null===(e=e.sidebarSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),i=(0,r.useCallback)((async e=>{if(e.currentUser.id&&o){const t=await Qe().callApi({eventName:"getUserTasks",environment:e,data:{spaceId:o}});if("success"===t.type){for(const e of t.data.taskIds)Ye().fJ.add(e);t.data.taskIds.length>0&&n(e)}}}),[n,o]),a=(0,r.useCallback)((()=>{const n=Ie().A.state.online;n&&!e.current&&i(t),e.current=n}),[t,i]);function c(e){"success"===e.state?et().A.setStatus(e.request.blockId,void 0):"in_progress"===e.state||"not_started"===e.state?et().A.setStatus(e.request.blockId,e.status):et().A.setStatus(e.request.blockId,void 0)}function l(e){"success"===e.state?tt().A.setStatus(e.request.blockId,!1):"in_progress"===e.state||"not_started"===e.state?tt().A.setStatus(e.request.blockId,!0):tt().A.setStatus(e.request.blockId,!1)}(0,r.useEffect)((()=>{e.current=Ie().A.state.online;const r=setInterval((()=>n(t)),2e3);return i(t),Ie().A.addListener(a),nt.addListener(Ze().r,c),nt.addListener(Je,l),()=>{clearInterval(r),Ie().A.removeListener(a),nt.removeListener(Ze().r,c),nt.removeListener(Je,l)}}),[t,n,a,i])}(),function(){const e=(0,s().v3)(),t=(0,r.useCallback)((()=>{rt().uh(e)}),[e]);(0,r.useEffect)((()=>(t(),ot().A.addListener(t),()=>{ot().A.removeListener(t)})),[t])}(),Oo(),ct(),kt(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{"external"===(0,Pt().parseRoute)({url:window.location.href,isMobile:Boolean(i().A.isMobile),baseUrl:i().A.domainBaseUrl,publicDomainName:i().A.publicDomainName,protocol:i().A.protocol,currentUrl:window.location.href}).name&&vt().ui({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,Le.jsx)(_e().sA,{defaultMessage:"OK",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=v().pf({relativeUrl:v().ZO(window.location.href),baseUrl:i().A.domainBaseUrl}),t=v().qg(e);t.protocol=v().qg(window.location.href).protocol,window.location.href=v().GP(t)}}]})}),[e])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{Ut(e);const t=window.setInterval((()=>Ut(e)),Rt);return()=>window.clearInterval(t)}),[e])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{(0,Dt().setEnvironment)(e)}),[e])}(),cn(),kn(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{fr(e);const t=window.setInterval((()=>fr(e)),g().pT);return()=>window.clearInterval(t)}),[e])}(),Sr(),function(){const e=(0,s().v3)(),t=(0,p().K8)((()=>Ir().default.state.isLoaded),[]),n=(0,p().K8)((()=>Ir().default.state.isLoggingEnabled),[]);(0,r.useEffect)((()=>{Ar().h.setDefaultEventPropertiesFetcher(Zr),t&&async function(){const t=await(0,Rr().T)(e);await xr().n_({config:i().A,isEnabled:n,deviceId:t,cookieService:e.cookieService,endpoint:Ir().default.state.endpoint})}()}),[e,t,n])}(),(0,c().A)(),(0,co().A)(),go(),ho(),To(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{if(i().A.isMobile){function t(){Lo().default.afterNextFlush((()=>{Mo().pS(e)}))}return Fn().default.addListener(t),Ro.addListener(t),Uo().A.addListener(t),()=>{Fn().default.removeListener(t),Ro.removeListener(t),Uo().A.addListener(t)}}}),[e])}(),(0,l().z)(),(0,d().Ay)(),function(){const[{value:e}]=(0,de().Yb)((()=>zo().statsigClientLoader.getClient()),[]),t=(0,p().O$)(Ie().e);(0,r.useEffect)((()=>{e&&(t?e.updateRuntimeOptions({disableLogging:!1}):e.updateRuntimeOptions({disableLogging:!0}))}),[e,t])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{if(!Jo().I.getShouldCollect())return;const t=setInterval((()=>{Jo().I.getLongEventMetrics().forEach((t=>{(0,D().u)({environment:e,event:t})})),Jo().I.resetMetrics()}),Zo);return()=>clearInterval(t)}),[e])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{if(!Xo().t.getShouldCollect())return;const t=setInterval((()=>{Xo().t.getMetrics().forEach((t=>{(0,D().u)({environment:e,event:t})})),Xo().t.resetMetrics()}),Yo);return()=>{clearInterval(t),Xo().t.resetMetrics()}}),[e])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{const{mobileNative:t}=e;t&&t.enableBridgeMetricsCollection(e,Do().default,$().default)}),[e])}(),jo(),function(){const e=(0,s().v3)(),t=(0,p().K8)((()=>"blank"===e.RouterStore.state.route.name),[e.RouterStore]);(0,r.useEffect)((()=>{if(t)return;let n,r=!document.hidden;function o(){e.device.isElectron||St().A.setState({...St().A.state,isVisible:!document.hidden});const t=!document.hidden;t!==r&&(r=t,St().P.setState(t),clearTimeout(n),t&&(n=setTimeout((()=>{St().P.setState(!1)}),Bo)));const o=mt().K7(),i=o&&(Date.now()-o)/g().nD>=7;if(e.device.isBrowser&&!document.hidden&&(!o||i)&&Ie().A.getState().online){const t=e.AppUpdateStore;if(t.isSilentUpdate()){const n=t.state.appUpdate;mt().JG({environment:e,url:window.location.href,version:n.version,versionCreatedTime:n.versionCreatedTime})}}}return document.addEventListener("visibilitychange",o),o(),()=>{document.removeEventListener("visibilitychange",o)}}),[e,t])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{if(!qo||e.device.isIOS)return;let t,r=!1;return(async()=>{try{const{initializePerformanceObserver:o}=await n.e(36773).then(n.bind(n,912287));if(r)return;t=o(e)}catch(o){}})(),()=>{var e;r=!0,null===(e=t)||void 0===e||e()}}),[e])}(),function(){const e=(0,s().v3)(),t=(0,p().K8)((()=>"blank"===e.RouterStore.state.route.name),[e]),n="on"===(0,$o().r)("prewarm_prefetch_more",{enableEventTrailLogging:!0});(0,r.useEffect)((()=>{t&&n&&(Wo().H.load(),Fo().U.load(),Ho().lA.sidebar.load(),Ko().VI.duplicateActions.load(!0),Vo().T.formulas.load())}),[t,n])}(),function(){const{WasmSqlite:e,ElectronSqlite:t}=(0,s().v3)(),n=e||t||void 0,i=(0,p().O$)(Ie().e),a=(0,o().X)("recover_from_sqlite_corruption");(0,r.useEffect)((()=>{n&&(a&&i?n.enableCorruptionRepair():n.disableCorruptionRepair())}),[n,a,i])}(),function(){const{deviceType:e}=(0,s().Y0)(),t=(0,s().v3)(),n=t.currentUser.isLoggedIn();(0,r.useEffect)((()=>{if(!n)return;if("windows-desktop"!==e&&"mac-desktop"!==e)return;const r=async()=>{await(0,V().a)()&&Qe().callApi({eventName:"registerDesktopApp",environment:t,data:{deviceType:e}})};r();const o=window.setInterval((()=>{r()}),5*g().Xb);return()=>{window.clearInterval(o)}}),[n,e,t])}(),li(),function(){const e=(0,s().v3)(),t=(0,r.useRef)(),n=(0,r.useRef)();(0,r.useEffect)((()=>{function r(){const r=Fn().default.state,o="empty"===r.mode?void 0:r.multiSelection.start.store,i="empty"===r.mode?void 0:r.multiSelection.end.store;if(t.current===o&&n.current===i)return;if(t.current=o,n.current=i,t.current!==n.current)return;const a=di().wg();if(!a)return;const{rowIndex:s,columnIndex:c,simpleTableStore:l}=a.getProps();di().VC({environment:e,rowIndex:s,columnIndex:c,simpleTableStore:l})}return Fn().default.addListener(r),()=>{Fn().default.removeListener(r),t.current=void 0,n.current=void 0}}))}(),function(){const e=(0,s().v3)(),t=(0,r.useCallback)((t=>{var n,r;const o={compressed:t.decodedBodySize!==t.encodedBodySize,local_cache_hit:0===t.transferSize,next_hop_protocol:t.nextHopProtocol,did_prefetch:"hit-match"===(null===(n=e.prefetchCache.getPrefetchAnalytic(`loadCachedPageChunk(${null===(r=_().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.id})`))||void 0===n?void 0:n.type)},i={dns_lookup:{startTime:t.domainLookupStart,endTime:t.domainLookupEnd},connection_establish:{startTime:t.connectStart,endTime:t.connectEnd},request_queued:{startTime:t.connectEnd,endTime:t.requestStart},response_wait:{startTime:t.requestStart,endTime:t.responseStart},response_download:{startTime:t.responseStart,endTime:t.responseEnd}};Do().default.DO_NOT_USE_measureLegacy({metricName:"load_cached_page_chunk.fetch",startTime:t.fetchStart,endTime:t.responseEnd},{environment:e,data:{...o,sub_metrics:{dns_lookup:i.dns_lookup.endTime-i.dns_lookup.startTime,connection_establish:i.connection_establish.endTime-i.connection_establish.startTime,request_queued:i.request_queued.endTime-i.request_queued.startTime,response_wait:i.response_wait.endTime-i.response_wait.startTime,response_download:i.response_download.endTime-i.response_download.startTime}}});for(const[a,{startTime:s,endTime:c}]of Object.entries(i))Do().default.DO_NOT_USE_measureLegacy({metricName:`load_cached_page_chunk.fetch.${a}`,startTime:s,endTime:c},{environment:e,data:o})}),[e]);(0,r.useEffect)((()=>{const e=new PerformanceObserver((n=>{const r=n.getEntries().find((e=>e.name.includes(`${i().A.api.http}/${ui}`)&&!e.name.endsWith("s")));r&&("resource"===r.entryType&&t(r),null==e||e.disconnect())}));return e.observe({type:"resource",buffered:!0}),()=>{e.disconnect()}}),[t])}(),pi(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{const t=()=>Rn().updateConnectionState(e);return t(),Ie().A.addListener(t),()=>{Ie().A.removeListener(t)}}),[e])}(),function(){const e=(0,s().v3)();(0,r.useEffect)((()=>{e.defaultRecordCache.persistedRecordCache&&e.defaultRecordCache.persistedRecordCache.setEnvironment(e)}),[e])}(),ri(),He(),ye(),Ue(),function(){const e=(0,s().v3)(),t=(0,s().Y0)(),n=(0,r.useRef)(!1),o=(0,r.useCallback)((()=>{"system"===rt().lv(e)&&ot().A.emit()}),[e]),i=(0,p().K8)((()=>{var e;return null===(e=_().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isReady()}),[]);(0,r.useLayoutEffect)((()=>{!n.current&&i&&(o(),n.current=!0)}),[i,o]),(0,r.useEffect)((()=>{if(t.isAndroid&&e.mobileNative)e.mobileNative.updateReceiveApiHandlers({themeChanged:e=>o()});else{if(oi.addEventListener&&oi.removeEventListener)return oi.addEventListener("change",o),()=>{oi.removeEventListener("change",o)};if(oi.addListener&&oi.removeListener)return oi.addListener(o),()=>{oi.removeListener(o)}}}),[t.isAndroid,e,o])}(),vi(),(0,r.useEffect)((()=>{function e(e){}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[!1]),function(){const e=(0,o().X)("enable_jam_recording_links"),t=(0,U().fJ)(ao,{disabled:!e}),n=(0,p().K8)((()=>so().I.state.recordingLinkId),[]);r.useEffect((()=>{if(!e)return;const{status:r,value:o}=t;"resolved"===r&&o&&!o.isInitialized()&&o.initialize({teamId:"b729e17e-7abd-4cc6-a15f-256d0eceb210",openImmediately:n})}),[t,n,e])}(),Ne(),function(){const e=(0,p().O$)(Ie().e);(0,r.useEffect)((()=>{Be().OPFSBootupRegistry.updateIsOnline(e)}),[e])}(),function(){const e=(0,s().v3)(),t=(0,p().O$)(Ie().e),n=(0,Me().T)(),o=(0,Re().r)();(0,r.useEffect)((()=>{const r=(0,De().bB)();if(!(r&&n&&o&&t))return;let i=null;const a=new AbortController,s=a.signal,c=()=>{r.cleanCacheForUser({userId:n,spaceId:o,environment:e,waitUntilOpts:{signal:s,timeout:q().Xb}}).catch((e=>{B().log({level:"error",from:"cleanCachePeriodically",type:"errorCleaningCache",error:(0,O().convertErrorToLog)(e)})})).finally((()=>{s.aborted||(i=setTimeout((()=>{i=null,s.aborted||c()}),je))}))};return c(),()=>{a.abort(),i&&(clearTimeout(i),i=null)}}),[n,o,t,e])}(),function(e,t){const n=(0,s().v3)();(0,de().Yb)((async()=>{if(!(await(0,pe().hasPermissionForTrackingType)("performance",n)))return;await $().default.waitUntilStatsigReadyAsync();const r=$().default.getEligibleGroup({experimentId:e,defaultGroup:t}),o=`boot:exp:${e}`,i=JSON.stringify(r);try{window.localStorage.setItem(o,i)}catch(a){(0,ue().reportLocalStorageError)(o,i,"PersistStatsigExperiment",a)}}),[e,t,n])}("query_client","control"),function(){const e=yt();(0,r.useEffect)((()=>{e&&navigator.serviceWorker.register("/sw.js")}),[e]),(0,r.useEffect)((()=>{}),[e])}();const k=(0,Oe().kg)();return(0,Le.jsxs)(Le.Fragment,{children:[i().A.isMobile?(0,Le.jsx)(Ua,{}):void 0,!i().A.isMobile&&h.device.isElectron?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Wa,{}),(0,Le.jsx)(Fa,{}),(0,Le.jsx)(Fe,{}),(0,Le.jsx)(we().gE,{}),(0,Le.jsx)(Ja,{dependency:Ae().W,hook:({useOfflineTransitionTracking:e})=>e}),(0,Le.jsx)(Ja,{dependency:$a,hook:({useCalendarMeetingNotificationScheduler:e})=>e})]}):void 0,!i().A.isMobile&&k?(0,Le.jsx)(Ka,{}):void 0,i().A.isMobile||null!==(t=h.mobileNative)&&void 0!==t&&t.supportsNativeHomeOnPhone()?void 0:(0,Le.jsx)(Ja,{dependency:Ae().W,hook:({useCacheSidebarImages:e})=>e}),(0,Le.jsx)(za,{}),(0,Le.jsx)(R,{}),(0,Le.jsx)(fe,{}),(0,Le.jsx)(Ja,{dependency:Ga,hook:({useRecentEventsListener:e})=>e}),(0,Le.jsx)(Ja,{dependency:Va,hook:({useMeetingKeywordToast:e})=>e}),(0,Le.jsx)(Ja,{dependency:Ae().W,hook:({useUpdateAutosyncedPages:e})=>e}),(0,Le.jsx)(Ja,{dependency:Ae().W,hook:({useRefetchOfflinePages:e})=>e}),(0,Le.jsx)(Ja,{dependency:Ha,hook:({useUserLifecycleProfile:e})=>e})]})}function za(){return(0,ve().y6)()?(0,Le.jsx)(ce().K,{from:"OfflineSyncListeners",fallback:()=>null,children:(0,Le.jsx)(Ja,{dependency:Ae().W,hook:({usePageSubscriptionManager:e})=>e})}):null}function Wa(){return pr(),null}function Fa(){const e=(0,p().K8)((()=>X().A.state.isActiveTab),[]);return(0,o().X)("meeting_detection_debounced_processing")?(0,Le.jsx)(oe,{isActiveTab:e??!1}):(0,Le.jsx)(se,{isActiveTab:e??!1})}function Ka(){return(0,Oe().a1)(),null}const Va=new(U().O2)("useMeetingKeywordToast",(()=>Promise.all([n.e(9773),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(33336),n.e(28156)]).then(n.bind(n,863960)))),$a=new(U().O2)("useCalendarMeetingNotificationScheduler",(()=>Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(25151),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(2681),n.e(4902),n.e(31034)]).then(n.bind(n,503571)))),Ha=new(U().O2)("useUserLifecycleProfile",(()=>n.e(2302).then(n.bind(n,770208)))),Ga=new(U().O2)("useRecentEventsListener",(()=>n.e(88738).then(n.bind(n,569313))));function Ja(e){const{value:t}=(0,U().fJ)(e.dependency);return t?(0,Le.jsx)(Za,{hook:e.hook(t)}):null}function Za(e){return e.hook(),null}},929871:(e,t,n)=>{n.d(t,{v:()=>i});n(898992),n(737550);var r=()=>n(534177);const o={zoom:["us.zoom.xos","Zoom.exe"],safari:["com.apple.WebKit.GPU"],chrome:["com.google.Chrome.helper","chrome.exe"],teams:["com.microsoft.teams2","ms-teams.exe"],edge:["msedge.exe"],brave:["com.brave.Browser.helper","brave.exe"],arc:["company.thebrowser.browser.helper","Arc.exe"],firefox:["org.mozilla.firefox","firefox.exe"]};function i(e){for(const t of(0,r().uv)(o)){if(o[t].some((t=>e.toLowerCase().includes(t.toLowerCase()))))return t}}},942906:(e,t,n)=>{n.d(t,{Lj:()=>s,W2:()=>c,xw:()=>a});var r=()=>n(416504),o=()=>n(231297),i=()=>n(755199);function a(e){const{environment:t,userSettingsStore:n}=e,o=n.getSettings(),i=null==o?void 0:o.time_zone,a=(0,r().P)();i!==a&&s({environment:t,userSettingsStore:n,timeZone:a})}function s(e){const{environment:t,userSettingsStore:n,timeZone:r}=e;o().createAndCommit({userAction:"checkUserTimeZoneAction.updateTimeZone",environment:t,canUndo:!0,perform:e=>{i().mJ({userSettingsStore:n,transaction:e,data:{time_zone:r}})},userId:n.id})}function c(e){const{environment:t,userSettingsStore:n,disableAutoSetTimezone:r}=e;o().createAndCommit({userAction:"checkUserTimeZoneAction.updateDisableAutoSetTimezone",environment:t,canUndo:!0,perform:e=>{i().mJ({userSettingsStore:n,transaction:e,data:{disable_auto_set_timezone:r}})},userId:n.id})}},965142:(e,t,n)=>{n.d(t,{V:()=>o});class r extends(()=>n(757695))().Store{getInitialState(){return{isKeyboardShortcutsOpen:!1,toggleSource:void 0,openCount:0}}}const o=new r;(0,n(852832).exposeDebugValue)("keyboardShortcutsModalStore",o)},969339:(e,t,n)=>{n.d(t,{C6:()=>a,HQ:()=>i,Yo:()=>s});var r=()=>n(645873);const o=new(r().O2)("login",(async()=>{const{default:e}=await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(96966)]).then(n.bind(n,465209)),{default:t}=await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(96966)]).then(n.bind(n,406370)),{LoginMobileNative:r}=await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(96966)]).then(n.bind(n,551256)),{default:o}=await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(96966)]).then(n.bind(n,204050)),{default:i}=await Promise.all([n.e(44711),n.e(35837),n.e(4422),n.e(4330),n.e(6642),n.e(7336),n.e(98718),n.e(96966)]).then(n.bind(n,52542));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:r,FrontLoginPage:o,LoginModalContent:i}})),i=(0,r()._h)(o,(e=>e.LoginPage)),a=(0,r()._h)(o,(e=>e.FrontLoginPage)),s=(0,r()._h)(o,(e=>e.LoginModalContent))},978879:(e,t,n)=>{n.d(t,{iI:()=>l,CB:()=>c,sS:()=>u,KX:()=>f,DW:()=>v,fF:()=>p,bo:()=>m});n(944114),n(898992),n(354520);var r=()=>n(534177),o=()=>n(720665),i=()=>n(638681);const a=i().object({required:{ai:i().number(),business:i().number(),education:i().number(),personal:i().number()},optional:{}}),s=["business","personal","education","ai"],c=0,l=9,d={business:1,education:2,personal:3};class u{constructor(e){this.pageCategories=void 0,this.pageCategories=e}getCategoriesForPage(e){const t=[];for(const n of this.pageCategories)n.pattern.test(e)&&t.push(n.category);return t}async trackPageVisit(e){const t=this.getCategoriesForPage(e);0!==t.length&&await this.incrementPageVisitCount(t)}}function p(e){try{a.validator(e)}catch(t){return!1}for(const n of(0,r().uv)(e))if(!Number.isInteger(e[n])||e[n]<c||e[n]>l)return!1;return!0}function m(e){return!!(0,r().Xk)(s,e)}function f(){return(0,o().MU)(s.map((e=>[e,c])))}function v(e){const t=Object.entries(e).filter((([e])=>"ai"!==e)).sort(((e,t)=>{if(t[1]!==e[1])return t[1]-e[1];return d[e[0]]-d[t[0]]}))[0];if(m(t[0])&&t[1]!==c)return t[0]}}}]);