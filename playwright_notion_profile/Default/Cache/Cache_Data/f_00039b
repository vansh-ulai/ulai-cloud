"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32254],{32254:(e,t,n)=>{n.d(t,{Hz:()=>ne,rq:()=>F,w1:()=>P,k2:()=>L,F8:()=>X,qq:()=>B,Rv:()=>ee,tD:()=>z,m5:()=>G,X6:()=>q,Kq:()=>J,X8:()=>Z,vA:()=>W,NC:()=>Q});n(898992),n(354520),n(672577),n(581454);var a=()=>n(906745),o=()=>n(242422),r=()=>n(584262),i=()=>n(465474),c=()=>n(798880),d=()=>n(496603),s=()=>n(615234),l=()=>n(534177),u=()=>n(559506),m=()=>n(901389),v=()=>n(384944),f=()=>n(27579),p=()=>n(281948),g=()=>n(471995),S=()=>n(231297),y=()=>n(338931),h=()=>n(767525),_=()=>n(972435),b=()=>n(583238),I=()=>n(406792),w=()=>n(765957),C=()=>n(705295),A=()=>n(90857),k=()=>n(658082),V=()=>n(812109);n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);function M({oldState:e,newState:t,updatedCalendars:n,fetchTime:a,lastSeenReasonEnqueuedAt:o}){const r=!e||t.botId!==e.botId,i=(0,k().tQ)({calendarsThatWereUpdated:n.map(V().N),oldCalendarFetchedTimes:r||null==e?void 0:e.calendarsToLastFetchedTime,fetchTime:a}),c=e?function(e){const{previousLastSeenReasonEnqueuedAt:t,newLastSeenReasonEnqueuedAt:n}=e,a={},o=new Set([...Object.keys(t),...Object.keys(n)]);for(const r of o){const e=r;a[e]=Math.max(t[e]??0,n[e]??0)}return a}({previousLastSeenReasonEnqueuedAt:e.lastSeenReasonEnqueuedAt,newLastSeenReasonEnqueuedAt:o}):o;if(!e||r)return{...t,lastSeenReasonEnqueuedAt:c,calendarsToLastFetchedTime:i};const d={...e,calendarsToLastFetchedTime:i};for(const s of(0,l().WP)(t))switch(s[0]){case"accounts":d.accounts=T({oldMap:e.accounts,newMap:t.accounts,keyGetter:({id:e})=>e});break;case"events":d.events=(0,A().$z)({events:e.events,calendars:e.calendars,updatedCalendarAndAccountIds:n,newEvents:t.events.getOrderedValues()});break;case"botId":d.botId=t.botId;break;case"timeMin":d.timeMin=Math.max(e.timeMin,t.timeMin);break;case"timeMax":d.timeMax=Math.min(e.timeMax,t.timeMax);break;case"calendars":d.calendars=T({oldMap:e.calendars,newMap:t.calendars,keyGetter:V().N});break;case"lastSeenReasonEnqueuedAt":d.lastSeenReasonEnqueuedAt=c;break;default:s[0]}return d}function T({oldMap:e,newMap:t,keyGetter:n}){const a=new(i().A)(e.getOrderedValues(),n);for(const o of(null==t?void 0:t.getOrderedValues())??[]){const e=n(o);a.append(e,o,{keepOrdering:!0})}return a}var E=()=>n(614016),O=()=>n(638681);const x=O().object({required:{botId:O().uuid(),timeMin:O().number(),timeMax:O().number(),accounts:O().array(O().tuple([O().string(),O().object({required:{},optional:{}})])),calendars:O().array(O().tuple([O().string(),O().object({required:{},optional:{}})])),events:O().array(O().tuple([O().string(),O().object({required:{},optional:{}})])),calendarsToLastFetchedTime:O().record(O().string(),O().number()),lastSeenReasonEnqueuedAt:O().record(O().string(),O().number())},optional:{}});const R=new class{constructor(){this.localStorageStore=new(n(553737).Ay)({namespace:"homeCalendarCache",important:!1,trackingType:"preference",maxValueLength:512e3})}waitUntilReady(){return this.localStorageStore.waitUntilReady()}get(e){let t;try{if(t=this.localStorageStore.get(e),void 0===t)return}catch{}if(t&&null===x.validator(t))return function(e){return{...e,accounts:i().A.fromJSON(e.accounts),calendars:i().A.fromJSON(e.calendars),events:i().A.fromJSON(e.events),calendarsToLastFetchedTime:Object.fromEntries(Object.entries(e.calendarsToLastFetchedTime).map((([e,t])=>[e,a().c9.fromMillis(t)])))}}(t);this.localStorageStore.remove(e)}set(e,t){try{this.localStorageStore.set(e,(n=t,{...n,accounts:n.accounts.toJSON(),calendars:n.calendars.toJSON(),events:n.events.toJSON(),calendarsToLastFetchedTime:Object.fromEntries(Object.entries(n.calendarsToLastFetchedTime).map((([e,t])=>[e,t.toMillis()])))}))}catch{}var n}remove(e){this.localStorageStore.remove(e)}};var D=()=>n(481887),N=()=>n(377515),U=()=>n(379560);function P({environment:e,timeRange:t,analyticsContext:n}){const{sidebarSpaceViewStore:a}=w().default.state;if(!a)return;const o=a.getHomeCalendarConfigStore().getKeyStore("time_range");S().createAndCommit({userAction:"homeCalendarActions.changeUpcomingEventsTimeRange",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:o,value:t})}}),(0,D().rP)({environment:e,calendarPanelContext:(0,D().sp)(n),newValue:t})}function q({environment:e,filter:t,entrypoint:n,analyticsContext:a}){var o,r;const{sidebarSpaceViewStore:i}=w().default.state;if(!i)return;let c;switch(n){case"personal_home":c=null===(o=i.getHomeCalendarConfigStore())||void 0===o||null===(o=o.getKeyStore("event_filters"))||void 0===o?void 0:o.getKeyStore(t);break;case"upcoming_meetings":c=null===(r=i.getUpcomingMeetingsSettingsStore())||void 0===r||null===(r=r.getKeyStore("event_filters"))||void 0===r?void 0:r.getKeyStore(t);break;default:(0,l().HB)(n)}const d=!(0,C().En)(t,n);if(S().createAndCommit({userAction:"homeCalendarActions.toggleCalendarEventFilter",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:c,value:d})}}),a){const n=(0,D().sp)(a);(0,D().jr)({environment:e,calendarPanelContext:n,filter:t,newValue:d})}}function F({environment:e,botId:t,shouldLog:n,analyticsContext:a}){const{sidebarSpaceViewStore:o}=w().default.state;if(!o)return;const r=o.getHomeCalendarConfigStore().getKeyStore("selected_calendar_bot_id");if(r.getValue()!==t&&(0,b().pH)().find((e=>e.id===t))&&(S().createAndCommit({userAction:"homeCalendarActions.changeSelectedCalendarBot",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:r,value:t})}}),n)){const n=(0,D().sp)(a);(0,D()._w)({environment:e,botId:t,calendarPanelContext:n})}}function L({environment:e}){const{sidebarSpaceViewStore:t}=w().default.state;if(!t)return;const n=t.getHomeCalendarConfigStore().getKeyStore("selected_calendar_bot_id");n.getValue()&&S().createAndCommit({userAction:"homeCalendarActions.clearSelectedCalendarBot",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:n,value:void 0})}})}async function B({environment:e,sidebarSpaceViewStore:t,botId:n,timeRange:r,calendarAndAccountIds:i,forceRefetch:s,updateMethod:l,reason:m}){if(!t||!t.isReady()||!t.canRead())return"failure";const f=Array.isArray(m)?m:[m];if(function(e){if(!o().default.checkGate({gateName:"get_calendar_events_versioned_reasons_fetch_guard"}))return!1;const t=U().A.getHomeCalendarStateForSpaceView();if(!t)return!1;for(const{reason:n,enqueuedAt:a}of e){if(void 0===a)return!1;const e=t.lastSeenReasonEnqueuedAt[n];if(!e)return!1;if(e>=a)return!0}return!1}(f))return"skipped";const p=o().default.checkGate({gateName:"calendar_home_tile_caching"});if(!s){var g;let e=U().A.getHomeCalendarStateForSpaceView();if(!e&&p&&(await R.waitUntilReady(),e=function({timeMin:e,botId:t}){const{sidebarSpaceViewStore:n}=w().default.state;if(!n)return;let o=R.get(n.id);if(o){const r=o.botId===t,i=e>=o.timeMin&&a().c9.fromMillis(e).plus({days:Y}).toMillis()<=o.timeMax;r&&i?(o=$({state:o}).newState,U().A.updateStateForSidebarSpaceView((()=>o))):(R.remove(n.id),o=void 0)}return o}({timeMin:r.timeMin,botId:n})),(null===(g=e)||void 0===g?void 0:g.botId)===n)if(i){if((0,k().zn)(i))return"skipped"}else if((0,k().zn)((0,N().GF)({botId:n,currentSpaceViewStore:t})))return"skipped"}const y=(0,N().AU)({spaceViewStore:t,botId:n,specificCalendars:i}),_=I().default.DO_NOT_USE_markLegacy("home.calendar.get_calendar_events_all"),b=Object.fromEntries(f.map((e=>[e.reason,e.enqueuedAt])).filter((([e,t])=>Boolean(t)))),C=await u().callApi({eventName:"getCalendarEvents",environment:e,data:{botId:n,spaceId:t.getSpaceId(),timeMin:r.timeMin,timeMax:r.timeMax,orderBy:"startTime",calendars:i,calendarVisibilityOverrides:"mirrorWithCron"===y.type?void 0:y.calendarOverrides,userTimeZone:(0,h().s1)().timeZone,versionedReasons:b,reason:(0,d().sb)(f.map((e=>e.reason))).sort().join(",")}});if("success"!==C.type)return"failure";i||I().default.DO_NOT_USE_measureLegacy(_,{environment:e});const{accounts:V,calendars:T,events:E,notionUsers:O,transcriptionBlockPointersByEventUId:x}=C.data,D=(0,k().MP)({calendarApiResponse:T,specificCalendarsFetched:i,calendarVisibilityOverrides:y});return U().A.updateStateForSidebarSpaceView((e=>{let o;switch(l){case void 0:case"merge":o=e;break;case"replace":o=void 0}const i=M({oldState:o,newState:(0,A().IC)({botId:n,accounts:V,calendars:T,events:E,notionUsers:O,transcriptionBlockPointersByEventUId:x,timeMin:r.timeMin,timeMax:r.timeMax}),updatedCalendars:D,fetchTime:a().c9.now(),lastSeenReasonEnqueuedAt:b});return p&&R.set(t.id,i),i})),function({environment:e,spaceViewStore:t,botId:n,calendarResponse:a}){const o=t.getHomeCalendarVisibilityConfig(n);if((0,N().Xg)({spaceViewStore:t,botId:n}))return;const r=(0,N().NU)({currentConfig:null==o?void 0:o.calendarVisibility,calendars:a});if("noChanges"===r.result)return;S().createAndCommit({userAction:"homeCalendarActions.populateCalendarConfigWithCalendarResponse",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:t.getHomeCalendarConfigStore().getKeyStore("shownCalendars").getKeyStore(n).getKeyStore("calendarVisibility"),value:r.newConfig})}})}({environment:e,spaceViewStore:t,botId:n,calendarResponse:T}),function({environment:e,notionUsers:t}){if(!t)return;const n=e.defaultRecordCache.inMemoryRecordCache,a=e.currentUser.id;for(const{user:o}of t){if(null==o||!o.value)continue;const e={table:c().oo,id:o.value.id},t={pointer:e,userId:a};n.hasRecord(t)||(n.setRecord(t,o),n.emitRecord(e,[]))}}({environment:e,notionUsers:O}),"success"}const K=(0,d().sg)(B,1e3,{leading:!1,trailing:!0});const H=2e3+2e3*Math.random(),j=Math.random()*s().Xb*20,z=function(){let e,t,n,o;let r=a().c9.now();return window.addEventListener("online",(()=>{r=a().c9.now()})),({version:i,...c})=>{let l=H;-1===i&&a().c9.now().diff(r).as("milliseconds")>=s().Xb&&(l=j);const u=Math.max(l,5e3);o=function(e,t){if(!t)return e;if(e.environment!==t.environment||e.sidebarSpaceViewStore!==t.sidebarSpaceViewStore||e.botId!==t.botId||e.timeRange.key!==t.timeRange.key)return;const n=(0,d().Bq)([e.reason,t.reason]),a={};for(const i of n){const e=a[i.reason]??0,t=i.enqueuedAt&&i.enqueuedAt>e?i.enqueuedAt:e;a[i.reason]=t}let o;const r={environment:e.environment,sidebarSpaceViewStore:e.sidebarSpaceViewStore,botId:e.botId,timeRange:{key:e.timeRange.key,timeMin:Math.max(e.timeRange.timeMin,t.timeRange.timeMin),timeMax:Math.max(e.timeRange.timeMax,t.timeRange.timeMax)},reason:Object.entries(a).map((([e,t])=>({reason:e,enqueuedAt:t}))),forceRefetch:e.forceRefetch||t.forceRefetch};return o=e.calendarAndAccountIds&&t.calendarAndAccountIds?{...r,calendarAndAccountIds:(0,d().hS)([...e.calendarAndAccountIds,...t.calendarAndAccountIds],V().N)}:{...r,updateMethod:"replace"===e.updateMethod||"replace"===t.updateMethod?"replace":"merge"},o}(c,o)??c;const m=a().c9.now(),v=m.plus({milliseconds:l}),f=m.plus({milliseconds:u});t=t?a().c9.min(t,f):f,e=a().c9.min(t,v),n&&clearTimeout(n);const p=o;n=setTimeout((()=>{B(p),t=void 0,e=void 0,o=void 0,n=void 0}),e.diff(m).as("milliseconds"))}}();function J({environment:e,botId:t,mirrorWithNotionCalendar:n,analyticsContext:a}){const{sidebarSpaceViewStore:o}=w().default.state;if(!o)return;const r=o.getHomeCalendarConfigStore().getKeyStore("shownCalendars").getKeyStore(t);S().createAndCommit({userAction:"homeCalendarActions.toggleCalendarMirroring",environment:e,canUndo:!0,perform:e=>{const t=n?void 0:(0,N().cL)(U().A.getCurrentCalendars()??[]);v().KY({transaction:e,store:r,value:{mirrorWithNotionCalendar:n,calendarVisibility:t}})}});const i=(0,D().sp)(a),c=n;(0,D().m3)({environment:e,calendarPanelContext:i,newValue:c}),K({environment:e,sidebarSpaceViewStore:o,botId:t,timeRange:(0,E().M)(),forceRefetch:!1,reason:{reason:"toggle_mirroring"}})}function W({environment:e,botId:t,calendarId:n,accountId:a,newIsVisible:o,analyticsContext:r}){const{sidebarSpaceViewStore:i}=w().default.state;if(!i)return;const c=i.getCalendarVisibilityStore({botId:t,calendarId:n,accountId:a});S().createAndCommit({userAction:"homeCalendarActions.toggleCalendarVisibility",environment:e,canUndo:!0,perform:e=>{v().KY({transaction:e,store:c,value:o})}}),(0,D().J3)({environment:e,calendarPanelContext:(0,D().sp)(r),calendarId:n,accountId:a,newValue:o}),K({environment:e,sidebarSpaceViewStore:i,botId:t,timeRange:(0,E().M)(),calendarAndAccountIds:[{calendarId:n,accountId:a}],forceRefetch:!1,reason:{reason:"toggle_calendar_visibility"}})}function Z({environment:e,botId:t,calendarId:n,accountId:a,newIsVisible:r,enqueuedAt:i}){var c;const{sidebarSpaceViewStore:s}=w().default.state;if(!s)return;const l=U().A.getCalendar({calendarId:n,accountId:a});if(!l||l.selected===r)return;U().A.updateStateForSidebarSpaceView((e=>{if(!e)return;const t=(0,d().mg)(e),i=t.calendars.get((0,V().N)({accountId:a,calendarId:n}));if(!i||i.selected===r)return e;i.selected=r;return o().default.checkGate({gateName:"calendar_home_tile_caching"})&&R.set(s.id,t),t}));((null===(c=s.getHomeCalendarVisibilityConfig(t))||void 0===c?void 0:c.mirrorWithNotionCalendar)??!1)&&r&&z({sidebarSpaceViewStore:s,environment:e,botId:t,timeRange:(0,E().M)(),calendarAndAccountIds:[{calendarId:n,accountId:a}],forceRefetch:!1,reason:{reason:"calendar_visibility_change",enqueuedAt:i}})}function $({now:e=a().c9.now(),state:t}){const{events:n}=t,{timeZone:o}=(0,h().s1)(),r=new(i().A)(n.getOrderedValues().filter((t=>!(0,A().FC)(t,e,o))),V().z);return r.length===n.length?{didChange:!1,newState:t}:{didChange:!0,newState:{...t,timeMin:e.toMillis(),events:r}}}function G({now:e=a().c9.now(),currentSpaceViewStore:t}){if(!t)return;const n=U().A.getHomeCalendarStateForSpaceView();if(!n)return;const{didChange:r,newState:i}=$({now:e,state:n});if(r){U().A.updateStateForSidebarSpaceView((()=>i));o().default.checkGate({gateName:"calendar_home_tile_caching"})&&R.set(t.id,i)}}const Y=1;function X(){const{sidebarSpaceViewStore:e}=w().default.state;e&&(U().A.clearStateForCurrentSpaceView(),R.remove(e.id))}async function Q(e){const{environment:t,botId:n,event:a,meetingNote:o,from:r}=e,i=a.isAllDay?{uid:a.uid,title:a.summary??"",attendees:(a.attendees??[]).map((e=>({email:e.email??"",self:e.self}))),isAllDay:!0,start:{date:a.start.date},end:{date:a.end.date}}:{uid:a.uid,title:a.summary??"",attendees:(a.attendees??[]).map((e=>({email:e.email??"",self:e.self}))),isAllDay:!1,start:{dateTime:a.start.dateTime,timeZone:a.start.timeZone},end:{dateTime:a.end.dateTime,timeZone:a.end.timeZone}};return await u().callApi({eventName:"upsertCalendarMeetingNote",environment:t,data:{botId:n,from:r,platform:t.device.platform,event:i,location:null==o?void 0:o.location,share:Boolean(null==o?void 0:o.share)}})}async function ee(e){const{environment:t,currentSpaceStore:n,meetingNoteUrl:a,openInNew:o,peekMode:i="center_peek"}=e,c=(0,y().xy)({environment:t,spaceStore:n,fileUrl:a});c&&!c.isReady()&&await c.waitUntil((()=>c.isReady())),null!=c&&c.isReady()?p().VU({environment:t,openInNew:o,store:c,pageVisitSource:r().y8.PersonalHomeCalendarAttachment,peekMode:i,resultsStore:void 0,collectionContextStore:void 0}):(0,f().L)({environment:t,url:a})}function te(e){const{event:t,meetingNote:n}=e;U().A.updateStateForSidebarSpaceView((e=>{if(!e)return;const a=(0,d().mg)(e),o=a.events.get((0,V().z)({accountId:t.accountId,calendarId:t.calendarId,id:t.id}));return o&&(o.meetingNote=n),a}))}async function ne(e){const{environment:t,botId:n,event:a,data:o,currentSpaceStore:r}=e;o.location&&te({event:a,meetingNote:{eventUid:a.uid,workspaceId:r.getSpaceId(),location:o.location,share:o.share}}),g().D6({label:_().A.getIntl().formatMessage({id:"homeCalendarActions.meetingNoteAdded",defaultMessage:"Added AI Meeting Note"})});const i=await u().callApi({eventName:"addEventMeetingNote",environment:t,data:{botId:n,...o}});return"failed"===i.type&&(te({event:a,meetingNote:void 0}),m().Qg(i)),i}},90857:(e,t,n)=>{n.d(t,{Om:()=>k,JF:()=>M,SG:()=>g,ft:()=>E,S6:()=>V,g2:()=>C,FC:()=>T,$z:()=>b,IC:()=>S});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var a=()=>n(906745),o=()=>n(465474),r=()=>n(165358),i=()=>n(100622),c=()=>n(496603),d=()=>n(534177),s=()=>n(379560),l=()=>n(569243),u=()=>n(705295),m=()=>n(812109),v=()=>n(606982),f=()=>n(823115);function p(e){if(e.isAllDay){const{date:t}=e.start;return(0,f().V$)(t,"UTC")}{const{dateTime:t}=e.start;return a().c9.fromISO(t,{zone:"UTC"})}}function g(e){if("object"==typeof e&&null!==e&&"enqueuedAt"in e&&"number"==typeof e.enqueuedAt)return e.enqueuedAt}function S({botId:e,accounts:t,calendars:n,events:a,notionUsers:r,transcriptionBlockPointersByEventUId:i,timeMin:c,timeMax:d}){const s=new(o().A)(n.map(y),m().N);return{botId:e,accounts:new(o().A)(t,(e=>e.id)),calendars:s,events:new(o().A)(h({events:a,notionUsers:r,transcriptionBlockPointersByEventUId:i}).sort(I(s)),m().z),timeMin:c,timeMax:d,lastSeenReasonEnqueuedAt:{}}}function y(e){return{...e,color:(0,l().Pf)({color:e.color,colorId:e.colorId,colorType:"calendar"}),colorId:void 0,primary:e.primary}}function h(e){const{events:t,notionUsers:n,transcriptionBlockPointersByEventUId:o}=e;return t.map((e=>function(e){var t,n,o,i,c,d,s;const{event:u,notionUsers:m,transcriptionBlockPointers:v}=e;let p;const g=_(null===(t=u.start)||void 0===t?void 0:t.timeZone),S=_(null===(n=u.end)||void 0===n?void 0:n.timeZone),y=(null===(o=u.start)||void 0===o?void 0:o.date)??(null===(i=u.start)||void 0===i?void 0:i.dateTime)??void 0,h=(null===(c=u.end)||void 0===c?void 0:c.date)??(null===(d=u.end)||void 0===d?void 0:d.dateTime)??void 0;if(!y||!h)return;const b=()=>{r().log({level:"error",from:"toHydratedEvent",type:"invalidDate",data:{miscDataToConvertToString:{accountId:u.accountId,calendarId:u.calendarId,eventId:u.id,start:y,end:h}}})};if(u.isAllDay){let e,t;try{e=(0,f().J_)(y,g||"UTC"),t=(0,f().J_)(h,g||"UTC")}catch(I){return void b()}p={isAllDay:!0,start:{date:e},end:{date:t}}}else{const e=a().c9.fromISO(y,{zone:g}),t=a().c9.fromISO(h,{zone:S});if(!e.isValid||!t.isValid)return void b();p={isAllDay:!1,start:{dateTime:y,timeZone:g},end:{dateTime:h,timeZone:S}}}return{...u,...p,attendees:null===(s=u.attendees)||void 0===s?void 0:s.map((e=>{var t;return{...e,notionUserId:e.email?null==m||null===(t=m.find((t=>t.email===e.email)))||void 0===t||null===(t=t.user)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.id:void 0}})),blockAttachments:v,color:(0,l().Pf)({colorId:u.colorId,colorType:"event"})}}({event:e,notionUsers:n,transcriptionBlockPointers:null==o?void 0:o[e.uid]}))).filter(d().O9)}function _(e){if(e)return a().R2.normalizeZone(e).isValid?e:void 0}function b({events:e,updatedCalendarAndAccountIds:t,newEvents:n,calendars:a}){const r=new Set(t.map(m().N)),i=function(e,t,n){const a=[];let o=0,r=0;for(;o<e.length&&r<t.length;){n(e[o],t[r])<=0?(a.push(e[o]),o++):(a.push(t[r]),r++)}o<e.length?a.push(...e.slice(o)):r<t.length&&a.push(...t.slice(r));return a}(e.getOrderedValues().filter((e=>!r.has((0,m().N)(e)))),[...n].sort(I(a)),I(a));return new(o().A)(i,m().z)}function I(e){const t=t=>e.get((0,m().N)(t));return(e,n)=>function({aCalendar:e,aEvent:t,aStartTimeOverride:n,bCalendar:a,bEvent:o,bStartTimeOverride:r}){let i=n,c=r;if(!i&&t.start&&(i=p(t)),!c&&o.start&&(c=p(o)),!i)return 1;if(!c)return-1;let d=(0,v().A)(i.toMillis(),c.toMillis());if(0===d){var s,l;const n=Boolean(null==e?void 0:e.primary),r=Boolean(null==a?void 0:a.primary),i=Boolean(null===(s=t.conferencing)||void 0===s?void 0:s.providerName),c=Boolean(t.hasParticipants),u=i&&c,m=Boolean(null===(l=o.conferencing)||void 0===l?void 0:l.providerName),v=Boolean(o.hasParticipants),f=m&&v,p="accepted"===t.responseStatus,g="accepted"===o.responseStatus,S="needsAction"===t.responseStatus,y="needsAction"===o.responseStatus,h="tentative"===t.responseStatus,_="tentative"===o.responseStatus;n&&!r?d=-1:r&&!n?d=1:u&&!f?d=-1:f&&!u?d=1:i&&!m?d=-1:m&&!i?d=1:c&&!v?d=-1:v&&!c?d=1:p&&!g?d=-1:g&&!p?d=1:!S||g||y?!y||p||S?h&&!(g||y||_)?d=-1:_&&!(p||S||h)&&(d=1):d=1:d=-1}return d}({aEvent:e,bEvent:n,aCalendar:t(e),bCalendar:t(n)})}function w(e,t){return(0,f().V$)(e,t).minus({days:1}).toISODate()}function C({events:e,getCalendarVisibility:t,calendars:n,startDate:a,endDateInclusive:r,eventFilters:i,timeZone:d}){const s=a.toISODate(),l=r.toISODate(),u=new(o().A)([],(({baseEvent:e})=>e.id));for(const o of e){const e=null==n?void 0:n.get((0,m().N)(o));if(!e||!t(e)||!A({event:o,minDate:s,maxDateInclusive:l,eventFilters:i,timeZone:d}))continue;const a=u.get(o.id);if(a)a.allSquashedEvents=(0,c().hS)([...a.allSquashedEvents,o],(e=>(0,m().z)(e)));else if(o.cronSyncOriginalEventData){const e=o.cronSyncOriginalEventData.eventId,t=u.get(e);t&&(t.allSquashedEvents=(0,c().hS)([...t.allSquashedEvents,o],m().z))}else u.append(o.id,{baseEvent:o,allSquashedEvents:[o]})}const v=new(o().A)((0,f().$D)(s,l,d).map((e=>({date:e,allDayEvents:[],timedEvents:[]}))),(({date:e})=>e));for(const{baseEvent:o,allSquashedEvents:c}of u.getOrderedValues())if(o.isAllDay){const e=(0,f().RY)({eventStartDate:o.start.date,eventEndDateInclusive:w(o.end.date,d),minDate:s,maxDateInclusive:l,timeZone:d});for(const t of e){const e=v.get(t);e&&e.allDayEvents.push({baseEvent:o,allSquashedEvents:c})}}else{const e=(0,f().J_)(o.start.dateTime,d),t=v.get(e);if(!t)continue;t.timedEvents.push({baseEvent:o,allSquashedEvents:c})}return v.getOrderedValues()}function A({event:e,minDate:t,maxDateInclusive:n,eventFilters:a,timeZone:o}){if(function(e){switch(e.responseStatus){case"declined":return!0;case"needsAction":case"tentative":case"accepted":case void 0:return!1;default:(0,d().HB)(e.responseStatus)}}(e))return!1;if(!(0,u().J4)({event:e,eventFilters:a}))return!1;const{start:r,end:i}=function(e,t){return e.isAllDay?{start:e.start.date,end:w(e.end.date,t)}:{start:(0,f().J_)(e.start.dateTime,t),end:(0,f().J_)(e.end.dateTime,t)}}(e,o);return!(r>n||i<t)&&(0,u().J4)({event:e,eventFilters:a})}function k(e){return[...e.allDayEvents,...e.timedEvents]}function V(e,t){const n=e.isAllDay?e.start.date:e.start.dateTime;return a().c9.fromISO(n,{zone:t})}function M(e,t){const n=e.isAllDay?e.end.date:e.end.dateTime;return a().c9.fromISO(n,{zone:t})}function T(e,t,n){return M(e,n)<t}function E(e){if(e.isAllDay)return;const t=s().A.getCalendar({calendarId:e.calendarId,accountId:e.accountId});if(!t)return;const n=(0,l().Sk)({theme:(0,i().O4)({theme:"light"}),eventColor:e.color,calendarColor:t.color}),a=(0,l().Sk)({theme:(0,i().O4)({theme:"dark"}),eventColor:e.color,calendarColor:t.color});return{accountId:e.accountId,calendarId:e.calendarId,id:e.id,startTime:e.start.dateTime,endTime:e.end.dateTime,responseStatus:e.responseStatus??"needsAction",colorHex:{light:n,dark:a},conferencing:e.conferencing}}},122406:(e,t,n)=>{n.d(t,{e:()=>o});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"1.68 2.37 17.01 15.26",svg:(0,n(474848).jsx)("path",{d:"M8 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M5.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M8 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923C13.1 12.945 10.7 11.63 8 11.63m-5.007 3.875c.761-1.488 2.672-2.626 5.007-2.626s4.246 1.138 5.007 2.626c.105.204.07.378-.067.54-.156.182-.448.33-.79.33h-8.3c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54m15.493-8.568a.625.625 0 0 1 0 .884L16.807 9.5l1.68 1.68a.625.625 0 1 1-.884.883l-1.68-1.68-1.68 1.68a.625.625 0 0 1-.883-.884L15.04 9.5l-1.68-1.68a.625.625 0 1 1 .884-.883l1.68 1.68 1.678-1.68a.625.625 0 0 1 .884 0"})},o=(0,n(340498).wt)("personXmark",a)},216296:(e,t,n)=>{n.d(t,{s:()=>o});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})},o=(0,n(340498).wt)("circle",a)},377515:(e,t,n)=>{n.d(t,{AU:()=>s,GF:()=>c,NU:()=>u,Pj:()=>d,Xg:()=>v,cL:()=>l});n(944114),n(898992),n(430670),n(737550);var a=()=>n(496603),o=()=>n(534177),r=()=>n(379560),i=()=>n(812109);function c(e){const t=function({botId:e,currentSpaceViewStore:t}){const n=r().A.getCurrentCalendars()??[],a={};for(const o of n)a[(0,i().N)(o)]={calendarId:o.id,accountId:o.accountId,visible:d({spaceViewStore:t,botId:e,calendar:o})};return a}(e);return Object.values(t).flatMap((({calendarId:e,accountId:t,visible:n})=>n?[{calendarId:e,accountId:t}]:[]))}function d({spaceViewStore:e,botId:t,calendar:n}){return function({spaceViewStore:e,botId:t,calendarId:n,accountId:a}){var o;const r=null==e?void 0:e.getHomeCalendarVisibilityConfig(t);if(!r||v({spaceViewStore:e,botId:t}))return;return null===(o=r.calendarVisibility)||void 0===o||null===(o=o[a])||void 0===o?void 0:o[n]}({spaceViewStore:e,botId:t,calendarId:n.id,accountId:n.accountId})??n.selected}function s({spaceViewStore:e,botId:t,specificCalendars:n}){const a=e.getHomeCalendarVisibilityConfig(t);if(!a||!(0,o().O9)(null==a?void 0:a.calendarVisibility)||v({spaceViewStore:e,botId:t}))return{type:"mirrorWithCron"};const r=[];for(const[i,c]of(0,o().WP)(a.calendarVisibility??{}))for(const[e,t]of(0,o().WP)(c??{}))!(0,o().O9)(t)||n&&!n.some((t=>t.accountId===i&&t.calendarId===e))||r.push({accountId:i,calendarId:e,visible:t});return{type:"calendarOverrides",calendarOverrides:r}}function l(e){const t={};for(const{id:n,accountId:a,selected:o}of e)t[a]={...t[a],[n]:o};return t}function u({currentConfig:e,calendars:t}){const n=(0,a().mg)(e)??{};let o=!1;for(const{id:a,accountId:i,selected:c}of t){var r;void 0===(null===(r=n[i])||void 0===r?void 0:r[a])&&(n[i]={...n[i],[a]:c},o=!0)}return o?{result:"updated",newConfig:n}:{result:"noChanges"}}const m=!0;function v({spaceViewStore:e,botId:t}){if(!e||!t)return m;const n=e.getHomeCalendarVisibilityConfig(t);return(null==n?void 0:n.mirrorWithNotionCalendar)??m}},465474:(e,t,n)=>{n.d(t,{A:()=>a});n(16280),n(944114),n(898992),n(354520),n(581454);class a{get length(){return this.orderedKeys.length}constructor(e,t){if(this.orderedKeys=void 0,this.keysToValues=void 0,!e&&!t)return this.orderedKeys=[],void(this.keysToValues={});if(!e||!t)throw new Error("Missing values or keyGetter in OrderedMap constructor");this.orderedKeys=e.map(t),this.keysToValues={};for(const n of e)this.keysToValues[t(n)]=n}append(e,t,{keepOrdering:n}={keepOrdering:!1}){if(e in this.keysToValues){if(this.keysToValues[e]=t,n)return;this.orderedKeys=[...this.orderedKeys.filter((t=>t!==e)),e]}else this.orderedKeys.push(e),this.keysToValues[e]=t}delete(e){this.orderedKeys=this.orderedKeys.filter((t=>t!==e)),delete this.keysToValues[e]}get(e){return this.keysToValues[e]}getOrderedValues(){return this.orderedKeys.map((e=>this.keysToValues[e]))}hasKey(e){return e in this.keysToValues}toJSON(){return this.orderedKeys.map((e=>[e,this.keysToValues[e]]))}static fromJSON(e){const t=new a;return t.orderedKeys=e.map((([e])=>e)),t.keysToValues=Object.fromEntries(e),t}}},481887:(e,t,n)=>{n.d(t,{G7:()=>p,IU:()=>v,J3:()=>I,V0:()=>g,_w:()=>h,jr:()=>y,lv:()=>S,m3:()=>_,np:()=>f,qL:()=>C,rP:()=>b,sp:()=>m});n(898992),n(354520),n(581454);var a=()=>n(314529),o=()=>n(321032),r=()=>n(765957),i=()=>n(379560),c=()=>n(705295),d=()=>n(614016),s=()=>n(377515);function l({state:e,calendars:t,event_filters:n,mirror_calendars:a,time_range:o,bot_id:r,view:i}){return{state:e,calendars:t,event_filters:n&&{all_day_events:n.all_day_events,events_without_participants:n.events_without_participants,events_without_location:n.events_without_location},mirror_calendars:a,time_range:o,bot_id:r,view:i}}function u({event_id:e,calendar_id:t,account_id:n,is_all_day:a,has_participants:o,conferencing_type:r,index:i,num_days_in_future:c}){return{event_id:e,calendar_id:t,account_id:n,is_all_day:a,has_participants:o,conferencing_type:r,index:i,num_days_in_future:c}}function m(e){var t,n,a;const o=r().default.state.sidebarSpaceViewStore,l=null===(t=i().A.getHomeCalendarStateForSpaceView())||void 0===t?void 0:t.botId;return{state:e.panelState,calendars:o&&l&&(null===(n=i().A.getCurrentCalendars())||void 0===n?void 0:n.map((e=>({type:e.provider,calendarId:e.id,accountId:e.accountId,isShown:(0,s().Pj)({spaceViewStore:o,botId:l,calendar:e})})))),mirror_calendars:(0,s().Xg)({botId:l,spaceViewStore:o}),event_filters:{all_day_events:(0,c().En)("all_day_events","personal_home"),events_without_participants:(0,c().En)("events_without_participants","personal_home"),events_without_location:(0,c().En)("events_without_location","personal_home")},time_range:(null==o||null===(a=o.getHomeCalendarConfigStore())||void 0===a?void 0:a.getKeyStore("time_range").getValue())??d().C0,bot_id:l,view:e.view}}function v({event:e,eventIndex:t,numDaysInFuture:n}){var a;return{event_id:e.id,calendar_id:e.calendarId,account_id:e.accountId,is_all_day:e.isAllDay,has_participants:e.hasParticipants,conferencing_type:null===(a=e.conferencing)||void 0===a?void 0:a.providerName,index:t,num_days_in_future:n}}function f({environment:e,target:t,eventContext:n,calendarPanelContext:r}){(0,a().DO_NOT_USE_trackLegacy)(e,"cal_event_click",{target:t,...l(r),...u(n)}),"conferencing"===t&&r.bot_id&&(0,o().R)(e,{botId:r.bot_id,payload:{type:"track",payload:{event:"joinMeeting",eventId:n.event_id,calendarId:n.calendar_id,conferencingProvider:n.conferencing_type,method:r.view}}})}function p({environment:e,eventContext:t,calendarPanelContext:n,attachmentType:r,notionBlockId:i,attachmentIndex:c}){(0,a().DO_NOT_USE_trackLegacy)(e,"cal_event_click",{target:"attachment",attachment_type:r,attachment_index:c,notion_block_id:i,...l(n),...u(t)}),n.bot_id&&(0,o().R)(e,{botId:n.bot_id,payload:{type:"track",payload:{event:"eventAttachmentOpened",provider:r,location:n.view}}})}function g(e){const{environment:t,calendarPanelContext:n,notionAnalyticsSessionId:r}=e;(0,a().DO_NOT_USE_trackLegacy)(t,"cal_create_event",{...l(n)}),n.bot_id&&(0,o().R)(t,{botId:n.bot_id,payload:{type:"track",payload:{event:"createEventButtonClicked",notionAnalyticsSessionId:r,method:n.view}}})}function S(e){(0,a().DO_NOT_USE_trackLegacy)(e.environment,"cal_settings_menu",{action:e.action,...l(e.calendarPanelContext)})}function y(e){w({environment:e.environment,calendarPanelContext:e.calendarPanelContext,action:`toggle_${e.filter}`,value:e.newValue})}function h(e){w({environment:e.environment,calendarPanelContext:e.calendarPanelContext,action:"change_calendar_bot",value:e.botId})}function _(e){w({environment:e.environment,calendarPanelContext:e.calendarPanelContext,action:"toggle_mirroring",value:e.newValue})}function b(e){w({environment:e.environment,calendarPanelContext:e.calendarPanelContext,action:"change_time_range",value:e.newValue})}function I(e){w({environment:e.environment,calendarPanelContext:e.calendarPanelContext,action:"toggle_calendar_visibility",calendarId:e.calendarId,accountId:e.accountId,value:e.newValue})}function w(e){(0,a().DO_NOT_USE_trackLegacy)(e.environment,"cal_configure_view",{...l(e.calendarPanelContext),action:e.action,value:e.value,..."calendarId"in e?{calendar_id:e.calendarId}:{},..."accountId"in e?{account_id:e.accountId}:{}})}function C(e){const{environment:t,calendarPanelContext:n}=e;(0,a().DO_NOT_USE_trackLegacy)(t,"cal_loaded",{...l(n)}),"connected_with_events"!==n.state&&"connected_no_events"!==n.state||!n.bot_id||(0,o().R)(t,{botId:n.bot_id,payload:{type:"page",payload:{page:n.view,state:n.state}}})}},569243:(e,t,n)=>{n.d(t,{Pf:()=>d,QL:()=>i,Sk:()=>c});const a={1:e=>e.orange.background.accentSecondary,2:e=>e.red.background.accentSecondary,3:e=>e.red.background.accentSecondary,4:e=>e.orange.background.accentSecondary,5:e=>e.orange.background.accentSecondary,6:e=>e.orange.background.accentSecondary,7:e=>e.green.background.accentSecondary,8:e=>e.green.background.accentSecondary,9:e=>e.green.background.accentSecondary,10:e=>e.green.background.accentSecondary,11:e=>e.yellow.background.accentSecondary,12:e=>e.yellow.background.accentSecondary,13:e=>e.green.background.accentSecondary,14:e=>e.blue.background.accentSecondary,15:e=>e.blue.background.accentSecondary,16:e=>e.blue.background.accentSecondary,17:e=>e.purple.background.accentSecondary,18:e=>e.purple.background.accentSecondary,19:e=>e.gray.background.accentSecondary,20:e=>e.gray.background.accentSecondary,21:e=>e.pink.background.accentSecondary,22:e=>e.pink.background.accentSecondary,23:e=>e.purple.background.accentSecondary,24:e=>e.purple.background.accentSecondary},o={1:e=>e.purple.background.accentSecondary,2:e=>e.green.background.accentSecondary,3:e=>e.pink.background.accentSecondary,4:e=>e.red.background.accentSecondary,5:e=>e.yellow.background.accentSecondary,6:e=>e.orange.background.accentSecondary,7:e=>e.blue.background.accentSecondary,8:e=>e.gray.background.accentSecondary,9:e=>e.blue.background.accentSecondary,10:e=>e.green.background.accentSecondary,11:e=>e.red.background.accentSecondary};function r({theme:e,color:t}){if("preset"===t.type){var n,r;if("calendar"===t.colorType)return null===(n=a[t.colorId])||void 0===n?void 0:n.call(a,e);if("event"===t.colorType)return null===(r=o[t.colorId])||void 0===r?void 0:r.call(o,e)}var i;if("custom"===t.type)return null===(i=t.colorHexes)||void 0===i?void 0:i[e.mode].backgroundPrimary}function i({theme:e,calendarColor:t}){const n=t&&r({theme:e,color:t});return n||e.blue.background.accentSecondary}function c({theme:e,eventColor:t,calendarColor:n}){const a=t&&r({theme:e,color:t});return a||i({theme:e,calendarColor:n})}function d(e){const{colorType:t,color:n,colorId:a}=e;return a?{type:"preset",colorId:a,colorType:t}:n?{type:"custom",colorHexes:n}:void 0}},614016:(e,t,n)=>{n.d(t,{B7:()=>l,C0:()=>c,M:()=>s,P8:()=>u,_I:()=>m,iI:()=>d});var a=()=>n(392998),o=()=>n(894074),r=()=>n(534177),i=()=>n(765957);const c="three_days";function d(){const e=m();return{key:e,...l(e)}}function s(){const e="one_week";return{key:e,...l(e)}}function l(e){const t=Date.now();return{timeMin:t,timeMax:(0,a().A)((0,o().A)(t,{hours:23,minutes:59,seconds:59,milliseconds:999}),u(e)-1).getTime()}}function u(e){switch(e){case"one_day":return 1;case"two_days":return 2;case"three_days":return 3;case"one_week":return 7;default:(0,r().HB)(e)}}function m(){var e;const t=null===(e=i().default.state.sidebarSpaceViewStore)||void 0===e||null===(e=e.getHomeCalendarConfigStore())||void 0===e||null===(e=e.getKeyStore("time_range"))||void 0===e?void 0:e.getValue();switch(t){case"one_day":case"two_days":case"three_days":case"one_week":return t;default:return c}}},658082:(e,t,n)=>{n.d(t,{MP:()=>d,oM:()=>l,tQ:()=>s,zn:()=>c});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(581454);var a=()=>n(496603),o=()=>n(534177),r=()=>n(379560),i=()=>n(812109);function c(e){return e.every((({calendarId:e,accountId:t})=>r().A.getCalendarFetchedTime({calendarId:e,accountId:t})))}function d({specificCalendarsFetched:e,calendarVisibilityOverrides:t,calendarApiResponse:n}){const r=new Set((e??[]).map(i().N)),c="calendarOverrides"===t.type?t.calendarOverrides:[],d=(0,a().pY)(c,i().N);return n.filter((t=>{const n=(0,i().N)(t);if(void 0!==e)return r.has(n);const a=d[n];return(0,o().O9)(a)?a.visible:t.selected})).map((({id:e,accountId:t})=>({calendarId:e,accountId:t})))}function s({calendarsThatWereUpdated:e,oldCalendarFetchedTimes:t,fetchTime:n}){const a={...t};for(const o of e)(!a[o]||a[o]<n)&&(a[o]=n);return a}function l(e){switch(e){case"events":return"connected_with_events";case"noEvents":return"connected_no_events";case"signedOut":return"disconnected";case"disconnectedAccount":case"missingScopes":return"connected_permissions_error";case"loadError":return"load_error";default:return}}},705295:(e,t,n)=>{n.d(t,{zP:()=>s,J4:()=>v,En:()=>m});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"2.05 2.53 15.65 15.64",svg:(0,n(474848).jsx)("path",{d:"M6.421 3.657a.55.55 0 0 1 .776.06l.222.258.012.017 8.777 10.24a.55.55 0 0 1-.847.701l-1.167-1.361-1.37 3.56c-.536 1.392-2.506 1.387-3.035-.008l-1.616-4.26c-.14-.368-.43-.66-.797-.8l-4.268-1.618c-1.395-.53-1.398-2.501-.006-3.036l4.37-1.681-1.11-1.296a.55.55 0 0 1 .059-.776M3.55 8.577a.375.375 0 0 0 .002.7l4.267 1.619a2.63 2.63 0 0 1 1.523 1.523l1.615 4.262a.375.375 0 0 0 .701.002l1.613-4.19-4.935-5.756zm11.942-5.931c1.314-.505 2.605.787 2.1 2.1l-2.5 6.492-.924-1.078 2.257-5.862a.375.375 0 0 0-.485-.484l-5.425 2.084L9.65 4.89z"})},o=(0,n(340498).wt)("pointerSlash",a);var r=()=>n(534177),i=()=>n(972435),c=()=>n(765957);const d=(0,n(69708).YK)({allDayEvents:{id:"NotionCalendarSettingsContent.allDayEvents",defaultMessage:"All-day events"},eventsWithoutParticipants:{id:"NotionCalendarSettingsContent.eventsWithoutParticipants",defaultMessage:"Events without participants"},eventsWithoutLocation:{id:"NotionCalendarSettingsContent.eventsWithoutLocation",defaultMessage:"Events without conferencing / location"}}),s={all_day_events:{title:i().A.formatMessage(d.allDayEvents),icon:n(216296).s},events_without_participants:{title:i().A.formatMessage(d.eventsWithoutParticipants),icon:n(122406).e},events_without_location:{title:i().A.formatMessage(d.eventsWithoutLocation),icon:o}},l={all_day_events:!0,events_without_participants:!0,events_without_location:!0},u={all_day_events:!1,events_without_participants:!0,events_without_location:!0};function m(e,t){const{sidebarSpaceViewStore:n}=c().default.state;switch(t){case"personal_home":return(null==n?void 0:n.getHomeCalendarFilter(e))??l[e];case"upcoming_meetings":return(null==n?void 0:n.getUpcomingMeetingsEventFilter(e))??u[e];default:(0,r().HB)(t)}}function v({event:e,eventFilters:t}){return(!1!==t.all_day_events||!e.isAllDay)&&(!(!1===t.events_without_participants&&!e.hasParticipants)&&!(!1===t.events_without_location&&!e.hasConferencingOrLocation))}},812109:(e,t,n)=>{function a(e){return"string"==typeof e?e:"calendarId"in e?`${e.accountId}:${e.calendarId}`:`${e.accountId}:${e.id}`}function o({id:e,accountId:t,calendarId:n}){return`${t}:${n}:${e}`}n.d(t,{N:()=>a,z:()=>o})},823115:(e,t,n)=>{n.d(t,{$D:()=>r,J_:()=>c,RY:()=>o,V$:()=>i,cK:()=>d,qi:()=>s});n(16280),n(944114),n(581454);var a=()=>n(906745);function o({eventStartDate:e,eventEndDateInclusive:t,minDate:n,maxDateInclusive:a,timeZone:o}){const i=function({startAndEndDaysRange:e,minAndMaxDaysRange:t}){if(e.end<t.min)return;if(e.start>t.max)return;const{start:n,end:a}=e,{min:o,max:r}=t,i=n<o?o:n,c=a>r?r:a;return{start:i,end:c}}({startAndEndDaysRange:{start:c(e,o),end:c(t,o)},minAndMaxDaysRange:{min:c(n,o),max:c(a,o)}});if(!i)return[];const{start:d,end:s}=i;return r(d,s,o)}function r(e,t,n){const a=c(t,n);let o=c(e,n);const r=[];for(;o<=a;)r.push(o),o=i(o,n).plus({days:1}).toISODate();return r}function i(e,t){const[n,o,r]=c(e,t).split("-").map(Number);return a().c9.fromObject({year:n,month:o,day:r},{zone:t})}function c(e,t){const n=a().c9.fromISO(e,{zone:t});if(!n.isValid)throw new Error(`Invalid date string: ${e}`);return e.includes("T")?n.toISODate():e}function d(e,t){const n="en-US";return a().c9.fromISO(e,{zone:"UTC"}).setLocale(n).toLocaleString(a().c9.DATE_SHORT)===t.setLocale(n).toLocaleString(a().c9.DATE_SHORT)}function s(e,t,n){const a=i(e,n);return i(t,n).diff(a,"days").days}}}]);