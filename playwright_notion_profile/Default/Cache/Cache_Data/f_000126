"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6331],{13898:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(970236),s=()=>o(69708),a=o(474848);function i(e){return(0,a.jsx)(n().E,{color:"blue",style:e.style,content:(0,a.jsx)(s().sA,{id:"betaBadgeComponent.label",defaultMessage:"Beta"})})}},84987:(e,t,o)=>{o.r(t),o.d(t,{SidebarInboxButton:()=>C,inboxMessages:()=>M});var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(401497),r=()=>o(929219),l=()=>o(252291),c=()=>o(69708),d=()=>o(284371),p=()=>o(35392),u=()=>o(296798),m=()=>o(859428),g=()=>o(490044),h=()=>o(477293),f=()=>o(152197),y=()=>o(770906),v=()=>o(441199),x=()=>o(303742),S=()=>o(797730),j=()=>o(644914),A=()=>o(749687),b=()=>o(765957),I=()=>o(509659),k=()=>o(105127),w=o(474848);function C(e){const t=(0,s().v3)(),o=(0,c().tz)(),C=(0,f().r)(),T=(0,a().K8)((()=>"inbox"===v().default.state.contentType&&v().default.isOpen()),[]),P=(0,a().O$)(A().sidebarExpandedStore),B=(0,a().K8)((()=>v().default.state.mode),[]),F=(0,a().O$)(b().AppStoreSidebarSpaceViewStore),R=T&&"panel"===B,D=(0,n.useCallback)((()=>{y().ZT({environment:t,contentType:"inbox"})}),[t]),_=(0,i().IS)((e=>({sidebarItem:{...R&&{fontWeight:d().Wy.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingInlineStart:3,paddingInlineEnd:3},number:{fontWeight:d().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.text.inverseSecondary}})),[R]),L=(0,a().K8)((()=>(0,x().o)(F)?"allGuestSpaces":"currentSpace"),[F]),E=(0,j().ab)(),O=(0,w.jsx)(k().A,{type:L,style:_.badge,numberStyle:_.number,fadeIn:!0,showExcessUnreadsAsStale:!0,isTranslucent:!0}),W="on"===(0,h().r)("collaboration_reaction_notifications")&&P,z=!(0,a().O$)(r().e);return(0,w.jsx)(m().A,{renderTooltip:()=>z?(0,w.jsx)("div",{children:o.formatMessage(M.offlineTooltip)}):(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:o.formatMessage(M.tooltip)}),(0,w.jsx)(p().A,{style:_.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:"right",render:t=>{var n;return(0,w.jsx)(u().A,{style:{...E.baseSidebarItem,..._.sidebarItem,...R&&E.currentSelectedSidebarItem},onClick:D,hoveredStyle:null===(n=e.styles)||void 0===n?void 0:n.buttonHoveredStyle,...t,disabled:z,disabledFeedback:z,children:(0,w.jsx)(g().A,{left:(0,w.jsx)(l().I,{icon:S().P.inbox,colorVariant:"secondary",size:"lg"}),right:W?(0,w.jsx)(I().f,{children:O},C):O,children:o.formatMessage(S().D.inbox)})})}})}const M=(0,c().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"View recent updates and notifications"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},89383:(e,t,o)=>{o.d(t,{DJ:()=>d,Oo:()=>r,a6:()=>c,hi:()=>l,qf:()=>i});o(16280),o(898992),o(803949),o(581454);var n=()=>o(206267),s=()=>o(509778),a=()=>o(180328);function i(e){s().Q.setState({...s().Q.state,isModalOpen:!0,flowId:n().JW(),onComplete:e})}function r(){s().Q.setState({...s().Q.state,isModalOpen:!1})}function l(e){const t=s().Q.state.spaceToTeamspaceMapping,o={};e.forEach((e=>{o[e.id]=t[e.id]||{confluenceSpaceId:e.id,confluenceSpaceKey:e.key,confluenceSpaceName:e.name,notionTeamspaceId:void 0}})),s().Q.setState({...s().Q.state,selectedSpaces:e,spaceToTeamspaceMapping:o})}function c({confluenceSpaceId:e,notionTeamspaceId:t}){const o=s().Q.state.spaceToTeamspaceMapping,n=o[e];n&&s().Q.setState({...s().Q.state,spaceToTeamspaceMapping:{...o,[e]:{...n,notionTeamspaceId:t}}})}async function d({environment:e,spaceStore:t,spaceViewStore:o}){const{spaceToTeamspaceMapping:n,flowId:i,onComplete:r}=s().Q.state;if(!i)throw new Error("No flow ID available");if(!r)throw new Error("onComplete function not available");try{s().Q.setState({...s().Q.state,isModalOpen:!1});const l=Object.values(n).map((e=>({id:e.confluenceSpaceId,key:e.confluenceSpaceKey,name:e.confluenceSpaceName,targetTeamSpaceId:e.notionTeamspaceId||void 0})));r(await a().lF({environment:e,spaceStore:t,spaceViewStore:o,spaces:l,flowId:i}),"confluence")}catch(l){throw s().Q.setState({...s().Q.state,isModalOpen:!1}),l}}},105127:(e,t,o)=>{o.d(t,{A:()=>d});o(581454),o(296540);var n=()=>o(56366),s=()=>o(534177),a=()=>o(171347),i=()=>o(21899),r=()=>o(179534),l=()=>o(765957),c=o(474848);function d(e){const{type:t,...o}=e,d=(0,n().K8)((()=>{switch(t){case"currentSpace":return r().A.getUnreadCountForSidebarSpace().mentions;case"otherSpaces":return r().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return r().A.getTotalUnreadMentionsCount();case"allGuestSpaces":const{currentUserRootStore:e}=l().default.state,o=(0,i().f)({currentUserRootStore:e});return r().A.getUnreadMentionsCountForSpaces(o.map((e=>e.getSpaceId())));default:(0,s().HB)(t)}}),[t]);return(0,c.jsx)(a().$,{count:d,...o})}},123411:(e,t,o)=>{o.d(t,{X:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.96 2 10.08 15.99",svg:(0,o(474848).jsx)("path",{d:"M12.21 13.71c-.34 0-.62-.28-.62-.62 0-1.31.7-2.45 1.32-3.46.12-.2.24-.39.36-.58.34-.58.53-1.3.53-2.06 0-2.06-1.7-3.73-3.79-3.73S6.22 4.93 6.22 6.99c0 .76.18 1.47.53 2.06.11.19.23.39.35.58l.023.037c.614 1 1.307 2.129 1.297 3.423 0 .34-.24.61-.63.62-.35 0-.62-.28-.62-.63 0-.96-.55-1.85-1.14-2.8q-.091-.15-.185-.3-.095-.15-.185-.3c-.46-.78-.7-1.71-.7-2.69 0-2.74 2.26-4.98 5.04-4.98s5.04 2.23 5.04 4.98c0 .98-.24 1.92-.7 2.69-.12.2-.24.4-.37.61-.59.95-1.14 1.84-1.14 2.8 0 .34-.28.62-.62.63zm-1.26 4.28h-1.9c-.35 0-.62-.28-.62-.62s.28-.62.62-.62h1.9c.34 0 .62.28.62.62s-.28.62-.62.62M8.1 15.85h3.8c.34 0 .62-.28.62-.62s-.28-.62-.62-.62H8.1c-.34 0-.62.28-.62.62s.27.62.62.62"})},s=(0,o(340498).wt)("lightBulbBright",n)},124858:(e,t,o)=>{o.d(t,{E:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("folder",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.4082 14.3672H13.7627C15.0684 14.3672 15.8271 13.6084 15.8271 12.1455V5.11816C15.8271 3.65527 15.0615 2.89648 13.585 2.89648H7.22754C6.73535 2.89648 6.44824 2.78027 6.07227 2.47266L5.67578 2.1582C5.19727 1.76172 4.8418 1.63184 4.13086 1.63184H2.19629C0.917969 1.63184 0.166016 2.37695 0.166016 3.8125V12.1455C0.166016 13.6084 0.931641 14.3672 2.4082 14.3672ZM1.50586 3.92871C1.50586 3.2998 1.84766 2.97168 2.46289 2.97168H3.77539C4.26074 2.97168 4.54102 3.08105 4.92383 3.39551L5.32031 3.7168C5.79199 4.10645 6.16113 4.23633 6.87207 4.23633H13.5098C14.1387 4.23633 14.4873 4.56445 14.4873 5.23438V5.63086H1.50586V3.92871ZM2.49023 13.0273C1.85449 13.0273 1.50586 12.6992 1.50586 12.0361V6.81348H14.4873V12.0361C14.4873 12.6992 14.1387 13.0273 13.5098 13.0273H2.49023Z"})})},125840:(e,t,o)=>{o.d(t,{A:()=>h});o(944114),o(581454);var n=o(296540),s=()=>o(484714),a=()=>o(401497),i=()=>o(278238),r=o(474848);const l=(0,o(340498).wt)("colorPickerCircle",{viewBox:"0 0 32 32",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),(0,r.jsx)("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"})]})});var c=()=>o(69708),d=()=>o(486666),p=()=>o(939740);const u=(0,c().YK)({selectColorLabel:{defaultMessage:"Set color as {color}",id:"horizontalColorPicker.selectColor"}});function m(e){const{parent:t,currentColor:n,onColorSelected:l,additionalItems:d}=e,u=(0,s().v3)(),m=(0,c().tz)(),h=(0,a().IS)((()=>({menu:{padding:4,...e.menuStyle}})),[e.menuStyle]),f=i().v3.map((e=>({key:e,action:o=>{t.close(),l({environment:u,color:e})},render:t=>(0,r.jsx)(o(859428).A,{renderTooltip:()=>m.formatMessage(i().jd[e]),placement:"bottom",render:o=>(0,r.jsx)(g,{ref:t.ref,color:e,tooltipEvents:o,menuListProps:t,currentColor:n})})})));return d&&f.push(...d),(0,r.jsx)(o(805751).A,{debugName:"ColorPicker",capture:!0,allowEsc:!0,children:(0,r.jsx)(p().Ay,{type:p().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:n?Math.max(i().v3.indexOf(n),0):10,sections:[{key:"variations",render:e=>(0,r.jsx)("div",{...e}),items:f}],renderRow:(t,o)=>{var n;return(0,r.jsx)("div",{role:"row",style:{display:"flex",padding:4,gap:4,justifyContent:"center",...(null===(n=e.rowStyle)||void 0===n?void 0:n.call(e,o))??{}},children:t},o)},style:h.menu})})}const g=n.forwardRef((function(e,t){const{color:m,tooltipEvents:g,menuListProps:h,currentColor:f}=e,y=(0,c().tz)(),v=(0,s().Y0)(),[x,S]=(0,n.useState)(!1),{isMenuListFocusVisible:j}=(0,n.useContext)(p().VU),A=h.focused&&j,b=(0,a().IS)((e=>({colorPickerItem:{display:"grid",gridTemplateColumns:"1fr",cursor:void 0!==f?"pointer":void 0},icon:{height:v.isMobile?24:16,width:v.isMobile?24:16,stroke:i().l8[e.mode][m],fill:i().l8[e.mode][m]},iconButton:{width:v.isMobile?d().UA:22,height:v.isMobile?d().UA:22,gridRowStart:1,gridColumnStart:1,...A&&{boxShadow:e.buttonBlueFocusRing}},selectedCircleWrapper:{width:v.isMobile?d().UA:22,height:v.isMobile?d().UA:22,gridRowStart:1,gridColumnStart:1,display:"flex",alignItems:"center",justifyContent:"center"},selectedCircle:{width:v.isMobile?30:22,height:v.isMobile?30:22,borderRadius:"100%",border:`1.5px solid ${i().l8[e.mode][m]}`,opacity:x?.5:1}})),[v.isMobile,x,m,A,f]),I=(0,n.useCallback)((e=>{S(!0),h.onMouseEnter&&h.onMouseEnter(e),g.onMouseEnter&&g.onMouseEnter(e)}),[h,g]),k=(0,n.useCallback)((e=>{S(!1),g.onMouseLeave&&g.onMouseLeave(e)}),[g]);return(0,r.jsxs)("div",{style:b.colorPickerItem,...(0,o(553965).A)(g,{onClick:void 0!==f?h.onClick:void 0}),onMouseEnter:I,onMouseLeave:k,children:[(0,r.jsx)(o(285790).A,{ref:t,disabled:void 0===f,ariaLabel:y.formatMessage(u.selectColorLabel,{color:y.formatMessage(i().jd[m])}),style:b.iconButton,icon:l,iconStyle:b.icon,hovered:x,role:h.role,id:h.id,disallowTabbing:!0}),f===m||void 0!==f&&(x||A)?(0,r.jsx)("div",{style:b.selectedCircleWrapper,children:(0,r.jsx)("div",{style:b.selectedCircle})}):void 0]})})),h=n.memo(m)},133043:(e,t,o)=>{o.d(t,{P:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.5 3.05 15 13.82",svg:(0,o(474848).jsx)("path",{d:"M9.08 3.341a1.625 1.625 0 0 1 1.84 0l5.875 4.035c.441.304.705.805.705 1.34v6.034a2.125 2.125 0 0 1-2.125 2.125h-2.716a1.625 1.625 0 0 1-1.625-1.625v-4.065H8.967v4.065c0 .898-.728 1.625-1.625 1.625H4.625A2.125 2.125 0 0 1 2.5 14.75V8.716c0-.535.264-1.036.705-1.34zm1.132 1.03a.375.375 0 0 0-.424 0L3.913 8.407a.38.38 0 0 0-.163.309v6.034c0 .483.392.875.875.875h2.716a.375.375 0 0 0 .375-.375v-4.19c0-.621.503-1.125 1.125-1.125h2.319c.62 0 1.124.504 1.124 1.125v4.19c0 .207.168.375.375.375h2.716a.875.875 0 0 0 .875-.875V8.716c0-.124-.06-.24-.163-.31z"})},s=(0,o(340498).wt)("home",n)},135221:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=o(474848);const s=function({style:e,styleParentContainer:t,isTriColored:s}){const a=(0,o(69708).tz)();return(0,n.jsxs)("div",{"aria-valuetext":a.formatMessage({id:"loadingDots.label",defaultMessage:"Loading..."}),role:"progressbar",className:"loading-dots",style:{...t},children:[(0,n.jsx)("div",{className:"loading-dot",style:{...e,...s&&{backgroundColor:"#F6C050"}}}),(0,n.jsx)("div",{className:"loading-dot",style:{...e,...s&&{backgroundColor:"#ED6A5F"}}}),(0,n.jsx)("div",{className:"loading-dot",style:{...e,...s&&{backgroundColor:"#5F9CDB"}}})]})}},136480:(e,t,o)=>{o.d(t,{s:()=>Pe,A:()=>Be});o(898992),o(823215),o(672577),o(581454),o(737550);var n=o(296540),s=()=>o(726637),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),l=()=>o(718827),c=()=>o(252291),d=()=>o(98126),p=()=>o(406094),u=()=>o(160432),m=()=>o(584262),g=()=>o(148307),h=()=>o(921940),f=()=>o(349679),y=()=>o(179034),v=()=>o(69708),x=()=>o(534177),S=()=>o(284371),j=()=>o(559926),A=()=>o(696977),b=()=>o(232930),I=()=>o(435761),k=()=>o(765957),w=()=>o(92513),C=()=>o(404141),M=()=>o(412532),T=()=>o(452951),P=()=>o(162402),B=()=>o(449552),F=()=>o(512062),R=()=>o(898808),D=()=>o(285790),_=()=>o(125565),L=()=>o(21140),E=()=>o(317182),O=o(474848);const W=function(){const e=(0,i().K8)((()=>w().A.state.result),[]);return e?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(_().A,{isMultiline:!0,children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,O.jsx)("div",{style:{marginTop:32},children:e.map((e=>(0,O.jsx)(z,{importStatus:e},e.asanaTeamId)))})]}):(0,O.jsx)(O.Fragment,{})};function z({importStatus:e}){const t=(0,v().tz)(),o=(0,r().DP)(),[s,a]=(0,n.useState)(!1),l=(0,i().O$)(k().AppStoreSidebarSpaceStore),c=(0,i().K8)((()=>w().A.state.teamsAndProjects),[]),d=(0,i().O$)(k().AppStoreSidebarSpaceViewStore),p=(0,i().K8)((()=>{if(!d)return;const e=d.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,O.jsx)(R().x,{disabled:!0,store:e})})));return l?(e||[]).concat({id:d.id,name:"Private",icon:(0,O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:F().M.light.gray[75]},children:(0,B().g)({color:o.icon.secondary,width:12.5,height:12.5})})}):e}),[d,l,o]),{notionTeamspaceName:u,notionTeamspaceIcon:m}=(0,n.useMemo)((()=>{const t=null==p?void 0:p.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[p,e]),g=(0,n.useMemo)((()=>{const t=c.find((t=>t.gid===e.asanaTeamId));return null==t?void 0:t.name}),[c,e]);return(0,O.jsxs)(L().Ye,{style:{marginTop:16},children:[(0,O.jsx)(D().A,{ariaLabel:t.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:M().l,onClick:()=>a((e=>!e)),style:{transform:s?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,O.jsx)(E().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,O.jsx)(L().Ye,{alignItems:"center",gap:2,children:(0,O.jsx)(_().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:g})}),style:{width:300}},{key:"importedInto",header:(0,O.jsxs)(L().Ye,{gap:4,children:[(0,O.jsxs)(L().Ye,{style:{alignItems:"center",gap:4},children:[(0,O.jsx)(_().A,{isSmall:!0,children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,T().Z)({width:12})]}),(0,O.jsxs)(L().Ye,{style:{alignItems:"center",gap:4},children:[m,u]})]}),style:{width:300}}],rows:function({collapsed:t}){return t?[]:e.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,O.jsxs)(L().Ye,{gap:8,alignItems:"center",children:[(0,P().q)({width:12,color:F().M.dark.green[600]}),(0,O.jsx)(_().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId),(0,O.jsxs)(_().A,{isSmall:!0,children:[e.numberOfTasks,(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})))}({collapsed:s})})]})}o(803949);var V=()=>o(8741),U=()=>o(338862),N=()=>o(508485),H=()=>o(719147);const q=function(){const e=(0,i().K8)((()=>w().A.state.result),[]);if(!e)return(0,O.jsx)(O.Fragment,{});let t=0;return e.forEach((e=>{t+=e.numberOfProjects})),(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(0,O.jsx)(_().A,{isMultiline:!0,style:{font:"SF Pro",fontWeight:S().Wy.semibold,fontSize:S().J.UIRegular.mobile,paddingTop:8},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.importComplete.subtitle",defaultMessage:"Imported {projectCount} projects into Notion",values:{projectCount:t}})}),(0,O.jsx)("div",{style:{marginTop:20},children:e.map((e=>(0,O.jsx)(K,{importStatus:e},e.asanaTeamId)))})]})};function K({importStatus:e}){const t=(0,i().O$)(k().AppStoreSidebarSpaceStore),o=(0,i().K8)((()=>w().A.state.teamsAndProjects),[]),r=(0,a().v3)(),l=(0,i().O$)(k().AppStoreSidebarSpaceViewStore),d=(0,i().K8)((()=>{if(!l)return;const e=l.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,O.jsx)(R().x,{disabled:!0,store:e})})));return t?(e||[]).concat({id:l.id,name:"Private",icon:(0,O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:F().M.light.gray[75]},children:(0,O.jsx)(c().I,{icon:U().N,size:"sm",colorVariant:"secondary"})})}):e}),[l,t]),{notionTeamspaceName:p,notionTeamspaceIcon:u}=(0,n.useMemo)((()=>{const t=null==d?void 0:d.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[d,e]),g=(0,n.useMemo)((()=>{const t=o.find((t=>t.gid===e.asanaTeamId));return null==t?void 0:t.name}),[o,e]);return(0,O.jsx)(L().Ye,{style:{marginTop:16},children:(0,O.jsx)(E().A,{tableStyle:{borderTop:0,gap:10},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,O.jsx)(L().Ye,{children:(0,O.jsx)(L().Ye,{alignItems:"center",gap:2,children:(0,O.jsx)(_().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis",font:"SF Pro",fontWeight:S().Wy.regular,fontSize:S().J.UIRegular.desktop},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.importComplete.importFrom",defaultMessage:"From {asanaTeamName} in Asana",values:{asanaTeamName:g}})})})}),style:{width:300}},{key:"seperator",header:(0,O.jsx)(L().Ye,{style:{alignItems:"center",gap:4},children:(0,O.jsx)(_().A,{isMultiline:!0,style:{fontWeight:S().Wy.regular,font:"SF Pro",fontSize:S().J.UIRegular.desktop,color:"rgba(172, 171, 169, 1)"},children:"â†’"})}),style:{width:13,height:18,paddingInlineEnd:20}},{key:"importedInto",header:(0,O.jsxs)(L().Ye,{style:{alignItems:"center",gap:4},children:[u,(0,O.jsx)(_().A,{style:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:S().J.UIRegular.desktop},children:p}),(0,O.jsx)(_().A,{style:{fontWeight:S().Wy.regular,fontSize:S().J.UIRegular.desktop,font:"SF Pro Text",color:"rgba(172, 171, 169, 1)"},children:"/"}),(0,O.jsx)(c().I,{icon:N().R,size:"lg",colorVariant:"secondary"}),(0,O.jsx)(_().A,{style:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:S().J.UIRegular.desktop},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.importComplete.projectLabel",defaultMessage:"Projects"})})]}),style:{width:300}}],rows:e.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,O.jsxs)(L().Ye,{gap:8,alignItems:"start",flexDirection:"column",children:[(0,O.jsx)(_().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300,fontWeight:S().Wy.medium,font:"SF Pro",fontSize:S().J.UIRegular.desktop},children:e.name}),(0,O.jsxs)(_().A,{isSmall:!0,children:[e.numberOfTasks,(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]},e.projectId),(0,O.jsx)(L().Ye,{},`${e.projectId}-seperator`),(0,O.jsx)(L().Ye,{children:(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{style:{display:"flex",gap:4,paddingBottom:6},children:[(0,O.jsx)(c().I,{icon:N().R,size:"lg",colorVariant:"secondary"}),(0,O.jsx)(H().A,{href:e.notionProjectId?(0,h().A)({pageId:e.notionProjectId,pageModel:r.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:y().ev,id:e.notionProjectId},userId:r.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:m().y8.Import}):void 0,style:{wordWrap:"break-word",fontWeight:S().Wy.medium,font:"SF Pro",fontSize:S().J.UIRegular.desktop,textDecorationLine:"underline",textDecorationColor:"rgba(227, 226, 224, 1)"},disableHover:!0,children:e.name})]}),(0,O.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,O.jsx)(c().I,{icon:V().arrowDiagonalUpRightSmallIcon,size:"sm",colorVariant:"secondary"}),(0,O.jsxs)(H().A,{href:e.notionProjectId?(0,h().A)({pageId:e.notionProjectId,pageModel:r.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:y().ev,id:e.notionProjectId},userId:r.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:m().y8.Import}):void 0,style:{color:"rgba(120, 119, 116, 1)",font:"SF Pro",fontSize:S().J.UISmall.desktop,fontWeight:S().Wy.regular},disableUnderline:!0,disableHover:!0,children:[e.numberOfTasks,(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})]})},`${e.projectId}-notionProjects`)]})))})})}o(944114),o(354520);var $=()=>o(729108),Y=()=>o(631524),G=()=>o(668725),J=()=>o(464699),Z=()=>o(722872),Q=()=>o(848237),X=()=>o(760217),ee=()=>o(406699),te=()=>o(404277),oe=()=>o(939740),ne=()=>o(89924),se=()=>o(709438);const ae=function(){const e=(0,a().v3)(),t=(0,v().tz)(),o=(0,i().K8)((()=>w().A.getState()),[]),{isLoadingProjects:s,workspaces:r,selectedWorkspace:l,teamsAndProjects:c}=o;return(0,n.useEffect)((()=>{l&&A().D5({selectedWorkspace:l,environment:e}).catch((()=>{}))}),[l,e]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(_().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,O.jsx)(re,{onSelectOption:e=>{w().A.setState({...o,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:r.map((e=>({key:e.gid,label:e.name}))),currentOption:l,placeHolder:t.formatMessage({id:"asanaImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"})}),l?(0,O.jsx)(_().A,{style:{fontWeight:S().Wy.semibold,marginTop:18},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,O.jsx)(O.Fragment,{}),s?(0,O.jsxs)(L().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,O.jsx)(d().A,{size:"sm"}),(0,O.jsx)(_().A,{isSmall:!0,style:{color:F().M.light.gray[400]},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):c.filter((e=>0!==e.projects.length)).map((e=>(0,O.jsx)(ie,{team:e,selectedWorkspace:l},`${e.gid}-table`)))]})};function ie({team:e,selectedWorkspace:t}){var o;const s=(0,a().v3)(),c=(0,v().tz)(),p=(0,r().DP)(),[u,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),[y,x]=(0,n.useState)(),j=(0,i().K8)((()=>w().A.getState()),[]),{importCompletedTasks:b,selectedProjectsAndTeamspaces:I}=j,C=(0,i().O$)(k().AppStoreSidebarSpaceViewStore),P=(0,i().K8)((()=>{const e=null==C?void 0:C.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,O.jsx)(R().x,{disabled:!0,store:e})})))}),[C]);(0,n.useEffect)((()=>{if(!P||!C)return;if(!I[e.gid]){x("private"),A().$8({teamId:e.gid,spaceId:null==C?void 0:C.id});for(const n of P){var t,o;if((null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(o=e.name)||void 0===o?void 0:o.toLowerCase())){x(n.id),A().$8({teamId:e.gid,spaceId:n.id});break}}}}),[P,e,C,I]);const W=(0,n.useCallback)((t=>{A().$8({teamId:e.gid,spaceId:t}),x(t)}),[e.gid]),z=(0,n.useCallback)((t=>{if("create"===t)return void Q().vn("asana_importer",{onClose:W});let o;if("private"===t){if(null==C||!C.id)return;o=C.id}else o=t;A().$8({teamId:e.gid,spaceId:o}),x(t)}),[null==C?void 0:C.id,e.gid,W]),V=[{key:"private",searchTerm:"private",label:(0,O.jsxs)(L().Ye,{alignItems:"center",style:{gap:8},children:[(0,O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:F().M.light.gray[75]},children:(0,B().g)({color:p.icon.secondary,width:12.5,height:12.5})}),(0,O.jsx)(_().A,{style:{fontWeight:S().Wy.regular},children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"})})]})}];return P&&V.push(...P.map((e=>({key:e.id,searchTerm:e.name,label:(0,O.jsxs)(L().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),V.push({key:"create",searchTerm:"New teamspace",label:(0,O.jsxs)(L().Ye,{alignItems:"center",style:{gap:4},children:[(0,J().b)({color:p.icon.secondary,width:16,height:16}),(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"})})]})}),(0,O.jsxs)(L().Ye,{style:{marginInlineStart:-18},children:[(0,O.jsx)(D().A,{ariaLabel:c.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:M().l,onClick:()=>m((e=>!e)),style:{transform:u?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:24,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,O.jsx)(E().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,O.jsxs)(L().Ye,{alignItems:"center",gap:2,children:[(0,O.jsx)(le,{onSelectOption:t=>{var o;w().A.setState({...j,selectedProjectsAndTeamspaces:{...I,[e.gid]:{notionTeamspaceId:null===(o=I[e.gid])||void 0===o?void 0:o.notionTeamspaceId,projects:t}}})},options:[{key:"in_complete",label:"Exclude completed projects"},{key:"all",label:"Select all projects"}],currentOption:(t=>{const o=null===(t=I[e.gid])||void 0===t?void 0:t.projects;return"string"==typeof o?o:null!=o&&o.length?"specific":void 0})()}),(0,O.jsx)(_().A,{style:{width:280,textOverflow:"ellipsis"},children:e.name})]}),style:{width:300}},{key:"importInto",header:(0,O.jsxs)(L().Ye,{style:{alignItems:"center"},children:[(0,O.jsx)("div",{children:(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,O.jsx)("div",{style:{marginInlineEnd:16,marginInlineStart:8},children:(0,T().Z)({width:12})}),(0,O.jsxs)(L().Ye,{style:{alignItems:"center",gap:8},children:[(0,O.jsx)("img",{src:g().A.emails.notionLogoBlackSmallPng,height:18}),(0,O.jsx)(re,{options:V,onSelectOption:z,currentOption:null===(o=V.find((e=>e.key===y)))||void 0===o?void 0:o.key,narrow:!0,allowSearch:!0,placeHolder:c.formatMessage({id:"asanaImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"})})]})]}),style:{width:"50%"}}],rows:function({collapsed:o}){if(o)return[];const n=e.projects.map((t=>({key:t.gid,columns:[(0,O.jsxs)(L().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,O.jsx)($().S,{style:{marginInlineEnd:2},onClick:()=>{const o={...I[e.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:n,projects:s}=o;let a;a="all"===s||"in_complete"===s?[]:s.includes(t.gid)?s.filter((e=>e!==t.gid)):s.concat(t.gid),w().A.setState({...j,selectedProjectsAndTeamspaces:{...I,[e.gid]:{notionTeamspaceId:n,projects:a}}})},checked:(()=>{const o={...I[e.gid]||{projects:[],notionTeamspaceId:void 0}};return"all"===o.projects||"in_complete"===o.projects&&!1===t.completed||o.projects.includes(t.gid)})(),size:14}),(0,O.jsx)(se().m,{color:t.color,size:6}),(0,O.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:t.completed?(0,O.jsxs)(_().A,{isMultiline:!0,style:{color:p.text.tertiary},children:[t.name,(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.completedHelperText",defaultMessage:" (Completed)"})]}):(0,O.jsx)(_().A,{isMultiline:!0,children:t.name})})]},`${t.gid}-container`),(0,O.jsxs)(_().A,{isSmall:!0,children:[b?t.task_counts.num_tasks:t.task_counts.num_incomplete_tasks,(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.gid}-tasks-count`)]})));return e.nextPage&&n.push({key:"loadMore",columns:[(0,O.jsx)(l().Ay,{disabled:h,style:{marginInlineStart:20,color:F().M.light.gray[400]},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},onClick:async()=>{t&&(f(!0),await A().Oh({team:e,environment:s}),f(!1))},children:h?(0,O.jsxs)(L().Ye,{alignItems:"center",gap:8,children:[(0,O.jsx)(d().A,{size:"sm"}),(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",defaultMessage:"Loading more projects..."})]}):(0,O.jsx)(v().sA,{id:"asanaImport.importsTab.selectData.loadMoreProjects",defaultMessage:"Load more projects..."})},`${e.gid}-loadmore`)]}),n}({collapsed:u})})]})}function re(e){var t;const{onSelectOption:o,options:s,currentOption:a,placeHolder:i,narrow:l,allowSearch:c}=e,d=(0,v().tz)(),[p,u]=(0,n.useState)(""),m=null===(t=s.find((({key:e})=>e===a)))||void 0===t?void 0:t.label,g=(0,r().IS)((e=>({icon:{width:12,height:12,marginInlineStart:4,fill:e.icon.tertiary}})),[]);return(0,O.jsx)(ee().A,{popupType:ee().z.Popup,placementToOrigin:"bottom",renderOrigin:e=>(0,O.jsxs)(Y().p,{...e,style:{paddingTop:l?2:8,paddingBottom:l?2:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:250,border:`1px solid ${F().M.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:a?void 0:F().M.light.gray[75],color:a?void 0:F().M.light.gray[300]},disabled:!1,children:[(0,O.jsx)(_().A,{style:{textOverflow:"ellipsis"},children:m||i}),(0,G().b)(g.icon)]}),render:e=>{const t={menuType:Z().gu.Popup,width:250,left:50},n=[{key:"asanaImport.dropdown.menuList",render:e=>(0,O.jsx)(ne().A,{...e}),items:(p.trim()?s.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())})):s).map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,O.jsx)(X().A,{...e,title:n,shouldWrapCaption:!0,isChecked:m===n})})))}];return(0,O.jsxs)(O.Fragment,{children:[c?(0,O.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:F().M.light.gray[200],paddingTop:2,paddingBottom:2,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,border:`1px solid ${F().M.light.gray[100]}`,justifyContent:"space-between",background:F().M.light.gray[75],fontSize:S().J.UIRegular.desktop,textOverflow:"ellipses"},placeholder:d.formatMessage({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"}),onChange:e=>u(e.target.value),value:p}):(0,O.jsx)(O.Fragment,{}),(0,O.jsx)(te().A,{...t,children:(0,O.jsx)(oe().Ay,{type:oe().Oh.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}function le(e){var t;const{onSelectOption:o,options:s,currentOption:a}=e,i=null===(t=s.find((({key:e})=>e===a)))||void 0===t?void 0:t.label,r=(0,n.useMemo)((()=>void 0!==a&&"specific"!==a&&("all"===a||"partial")),[a]);return(0,O.jsx)(ee().A,{popupType:ee().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",renderOrigin:e=>(0,O.jsx)(Y().p,{...e,style:{padding:0,margin:0,marginInlineEnd:4,height:14},hoveredStyle:{},children:(0,O.jsx)($().S,{checked:r,disabled:!0,size:14})}),render:e=>{const t={menuType:Z().gu.Popup,width:250,left:50},n=[{key:"asanaImport.checkboxDropdown.menuList",render:e=>(0,O.jsx)(ne().A,{...e}),items:s.map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,O.jsx)(X().A,{...e,title:n,shouldWrapCaption:!0,isChecked:i===n})})))}];return(0,O.jsx)(te().A,{...t,children:(0,O.jsx)(oe().Ay,{type:oe().Oh.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}var ce=()=>o(581369),de=()=>o(859428),pe=()=>o(690197),ue=()=>o(484392),me=()=>o(852424),ge=()=>o(340498),he=()=>o(100622),fe=()=>o(509657),ye=()=>o(936996);const ve=(0,v().YK)({selectProperties:{id:"asanaImport.selectProperties.subtitleForSelectPropertiesTab",defaultMessage:"By default, all Asana task properties will be imported. You can customize this for each teamspace below"},keepAllPropertiesDescription:{id:"asanaImport.selectProperties.keepAllPropertiesDescription",defaultMessage:"Add {count} properties from Asana into your Notion tasks"},customPropertiesLabel:{id:"asanaImport.selectProperties.customPropertiesLabel",defaultMessage:"Custom Properties"},defaultPropertiesLabel:{id:"asanaImport.selectProperties.defaultPropertiesLabel",defaultMessage:"Default Properties"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"}});function xe({propertiesLoadStatus:e,currentTeamSpaceId:t}){const o=(0,v().tz)(),{selectionMode:s,properties:a}=(0,i().K8)((()=>{if("resolved"!==e||!t)return{selectionMode:"all",properties:[]};const o=w().A.state.useSectionAsStatus,{selectionMode:n,properties:s}=w().A.state.selectedTeamspacesAndProperties[t],a=s.slice(),i=a.find((e=>"Completed?"===e.asanaFieldName)),r=a.find((e=>"Section"===e.asanaFieldName));return i&&r&&(o?(i.notionFieldType="checkbox",r.notionFieldType="status"):(i.notionFieldType="status",r.notionFieldType="select")),{selectionMode:n,properties:a}}),[t,e]),r=(0,n.useCallback)((e=>{const o=w().A.state;w().A.setState({...o,selectedTeamspacesAndProperties:{...o.selectedTeamspacesAndProperties,[t]:{...o.selectedTeamspacesAndProperties[t],properties:e}}})}),[t]),l=(0,n.useCallback)((e=>{w().A.setState({...w().A.state,selectedTeamspacesAndProperties:{...w().A.state.selectedTeamspacesAndProperties,[t]:{selectionMode:e,properties:a.map((t=>({...t,isSelected:t.isDefault||"all"===e})))}}})}),[t,a]),c=(0,n.useCallback)((e=>{const t=a.map((t=>t.asanaFieldName===e.asanaFieldName?{...t,isSelected:!t.isSelected}:t));r(t)}),[a,r]),d=(0,n.useCallback)((e=>{let t=!0,o=!0;const n=a.filter((t=>t.isDefault===("default"===e)));return n.length>0&&(n.forEach((e=>{e.isSelected?o=!1:t=!1})),!!t||!o&&"partial")}),[a]),p=(0,n.useCallback)((e=>{const t=!0===d(e),o=a.map((e=>({...e,isSelected:e.isDefault||!t})));r(o)}),[d,a,r]),[u,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{"resolved"===e&&0===(null==a?void 0:a.filter((e=>!e.isDefault)).length)&&m(!0)}),[e,a]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(L().Ye,{gap:8,style:{marginTop:10,width:"100%"},children:[(0,O.jsx)(fe().a,{name:"select-all-properties",selectType:"radio",label:"Select all properties",disabled:"pending"===e,value:"all",description:o.formatMessage(ve.keepAllPropertiesDescription,{count:Object.keys(a).length||"all"}),isSelected:"all"===s,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>l("all")}),(0,O.jsx)(fe().a,{name:"customise-properties",selectType:"radio",disabled:"pending"===e,label:"Customize properties",value:"custom",description:"Choose which properties you want to keep",isSelected:"custom"===s,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>l("custom")})]}),(0,O.jsx)("div",{style:{marginTop:8},children:(0,O.jsx)(ye().A,{title:(0,O.jsx)(L().Ye,{gap:4,children:(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{...ve.defaultPropertiesLabel})})}),rows:a.filter((e=>e.isDefault)),loading:"pending"===e,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>m((e=>!e)),collapsed:!u,onSelectGroup:()=>{},onSelectRow:()=>{},groupCheckedState:!0,rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,O.jsx)(Se,{property:e}),rowsContainerStyles:{display:"grid",gap:6},disabled:!0,rowStyles:{marginTop:4,height:24}})}),(0,O.jsx)("div",{style:{marginTop:8},children:(null==a?void 0:a.filter((e=>!e.isDefault)).length)>0?(0,O.jsx)(ye().A,{title:(0,O.jsx)(L().Ye,{gap:4,children:(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{...ve.customPropertiesLabel})})}),rows:a.filter((e=>!e.isDefault)),loading:"pending"===e,disabled:"all"===s,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>h((e=>!e)),collapsed:!g,onSelectGroup:()=>p("custom"),onSelectRow:e=>c(e),groupCheckedState:d("custom"),rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,O.jsx)(Se,{property:e}),rowsContainerStyles:{display:"grid",gap:6},rowStyles:{marginTop:4,height:24}}):void 0})]})}function Se({property:e,style:t}){const o=je();return(0,O.jsxs)(n.Fragment,{children:[(0,O.jsx)(L().Ye,{gap:12,alignItems:"center",style:{marginInlineStart:2,width:"250px",paddingTop:6,paddingInlineEnd:0,paddingBottom:6,paddingInlineStart:0,...t},children:(0,O.jsx)("span",{style:o.propertyLabel,children:e.asanaFieldName})}),(0,O.jsxs)(L().Ye,{style:{padding:"6px 6px"},gap:8,alignItems:"center",children:[(0,O.jsx)(Ae,{}),me().LE[e.notionFieldType]({width:ge().Ev.sm,fill:he().Tj.uiGray}),(0,O.jsx)("span",{style:o.propertyLabel,children:e.notionFieldType.split("_").map(ue().A).join(" ")})]})]},e.asanaFieldName)}function je(){return(0,r().IS)((e=>({teamSpaceLabel:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4},header:{font:"SF Pro",fontWeight:S().Wy.regular,fontSize:S().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},propertyLabel:{fontSize:S().J.UIRegular.desktop,color:e.text.primary,lineHeight:"19.6px"},lockedIcon:{color:e.icon.secondary,width:12.5,height:12.5}})),[])}function Ae({styles:e}){return(0,T().Z)({width:10,marginTop:2,marginInlineEnd:12,fill:he().Tj.uiLightGray,...e})}const be=function(){var e;const t=(0,a().v3)(),s=(0,v().tz)(),r=je(),[l,c]=(0,n.useState)(0),[{status:d}]=(0,o(187174).Yb)((async()=>A().kV(t,w().A.state.selectedProjectsAndTeamspaces)),[t]),p=(0,i().K8)((()=>{var e,t;const n=(0,o(496603).sb)(Object.values(w().A.state.selectedProjectsAndTeamspaces).filter((e=>e.projects.length>0)).map((e=>e.notionTeamspaceId)).filter(x().O9)),a=null===(e=k().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getTeamsStores(),i=null===(t=k().default.state.sidebarSpaceViewStore)||void 0===t?void 0:t.id;return n.map((e=>{const t=null==a?void 0:a.find((t=>t.id===e));return t||e!==i?{teamSpaceId:e,name:null==t?void 0:t.getName(),icon:(0,O.jsx)(R().x,{disabled:!0,store:t})}:{teamSpaceId:i,icon:(0,B().g)(r.lockedIcon),name:s.formatMessage(ve.privateSpaceLabel)}}))}),[r.lockedIcon,s]);return(0,O.jsxs)("div",{style:{paddingBottom:20},children:[(0,O.jsx)(_().A,{style:r.header,children:(0,O.jsx)(v().sA,{...ve.selectProperties})}),(0,O.jsx)(o(987017).Ay,{style:{padding:0},tabs:p.map((e=>(0,O.jsxs)(L().Ye,{alignItems:"center",gap:8,children:[e.icon,e.name]},e.name))),selectedIndex:l,onChange:c}),(0,O.jsx)(xe,{propertiesLoadStatus:d,currentTeamSpaceId:null===(e=p[l])||void 0===e?void 0:e.teamSpaceId})]})};const Ie=(0,v().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Asana workspace.",id:"Asanaimport.importingData.failed.problemsOccured"},chooseWorkspaceTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.chooseWorkspaceTab",defaultMessage:"Choose what to import"},importTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.importTab",defaultMessage:"Import"},customizeTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.selectPropertiesTab",defaultMessage:"Customize"},chooseWorkspaceNextButtonLabel:{id:"asanaImportsTab.chooseWorkspace.nextButtonText",defaultMessage:"Next"},chooseWorkspaceBackButtonLabel:{id:"asanaImport.chooseWorkspace.backButtonText",defaultMessage:"Back"},selectPropertiesBackButtonText:{id:"asanaImportsTab.selectProperties.backButtonText",defaultMessage:"Back"},startImportButtonText:{id:"asanaImportsTab.selectProperties.nextButtonText",defaultMessage:"Import"}});function ke(e){switch(e){case"selectData":return(0,O.jsx)(_().A,{style:{paddingBottom:8,fontSize:18,fontWeight:S().Wy.semibold,width:"100%"},children:(0,O.jsx)(v().sA,{id:"asanaImport.asanaImportsTab.selectData.tabHeader",defaultMessage:"Select Asana workspace"})});case"chooseWorkspace":return(0,O.jsx)(_().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,O.jsx)(v().sA,{id:"asanaImport.asanaImportsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Asana workspace"})});case"selectProperties":return(0,O.jsx)(_().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,O.jsx)(v().sA,{id:"asanaImport.asanaImportsTab.selectProperties.tabTitle",defaultMessage:"Select properties"})});default:return(0,O.jsx)(O.Fragment,{})}}function we({useV2Styles:e}={useV2Styles:!1}){return(0,r().IS)((e=>({stepIndicatorLabel:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:S().J.UIRegular.desktop},stepIndicatorContainer:{height:32,borderRadius:6,padding:"6px"},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},helpCenterButtonStytles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:S().J.UIRegular.desktop,paddingTop:"6px,",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:0,borderRadius:6,color:e.text.secondary,marginTop:2,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:"16px",height:"16px",paddingTop:"0.5px,",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:0,gap:"8px"},tabNotStarted:{color:e.text.tertiary},tabInProgress:{background:e.buttonHoveredBackground,color:e.text.primary},tabDone:{color:e.text.secondary}})),[])}const Ce=[["chooseWorkspace",Ie.chooseWorkspaceTabLabel],["selectProperties",Ie.customizeTabLabel],["importingData",Ie.importTabLabel],["importComplete",null]];function Me({tab:e}){const t=we(),o=(0,n.useCallback)((t=>{const o=Ce.findIndex((([t,o])=>t===e)),n=Ce.findIndex((([e,o])=>e===t));return(0,x().O9)(o)?n<o?"done":n===o?"in-progress":"not-started":"not-started"}),[e]),s=(0,n.useCallback)((e=>{switch(e){case"done":return t.tabDone;case"in-progress":return t.tabInProgress;default:return t.tabNotStarted}}),[t]);return(0,O.jsx)(L().Ye,{gap:12,alignContent:"center",alignItems:"center",style:{marginTop:10,marginBottom:10},children:Ce.map((([e,n])=>{const a=o(e);return n?(0,O.jsxs)(L().Ye,{alignContent:"center",alignItems:"center",justifyContent:"center",style:{...t.stepIndicatorContainer,...s(a)},gap:8,children:["done"===a?(0,O.jsx)(c().I,{icon:f().checkmarkSmallIcon,size:"sm",colorVariant:"tertiary"}):void 0,(0,O.jsx)(_().A,{style:{...t.stepIndicatorLabel},children:(0,O.jsx)(v().sA,{...n})})]},e):null}))})}function Te(){return(0,O.jsx)(pe().A,{buttonStyle:{height:28,paddingInlineStart:4},title:(0,O.jsx)(v().sA,{id:"asanaImportsTab.confirm.helpCenter",defaultMessage:"Learn more about importing from Asana"}),href:(0,b().x)("guides.importAsana"),analyticsFrom:"import",style:{marginInlineStart:-4}})}function Pe({left:e,next:t,back:o,children:n}){return(0,O.jsxs)(L().Ye,{justifyContent:"space-between",alignItems:"center",children:[e,(0,O.jsxs)(L().Ye,{alignItems:"center",gap:12,children:[n,(0,O.jsxs)("div",{style:{gap:2},children:[(0,O.jsx)(de().A,{placement:"top",alignment:"end",render:e=>(0,O.jsx)(p().A,{size:"lg",style:{border:0},disabled:o.disabled,onClick:o.onClick,...e,children:o.message}),disableTooltip:!o.renderTooltip,renderTooltip:o.renderTooltip||(()=>(0,O.jsx)(O.Fragment,{}))}),(0,O.jsx)(de().A,{placement:"top",alignment:"end",render:e=>(0,O.jsx)(u().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:t.disabled,onClick:t.onClick,...e,children:t.message}),disableTooltip:!t.renderTooltip,renderTooltip:t.renderTooltip||(()=>(0,O.jsx)(O.Fragment,{}))})]})]})]})}const Be=function({tab:e,fetchActiveImportTasks:t,analyticsFrom:r}){const{navigate:f}=(0,n.useContext)(o(312788).E),x=o(972435).A.getIntl(),S=(0,a().v3)(),b=(0,i().O$)(k().AppStoreSidebarSpaceStore),M=(0,i().O$)(k().AppStoreSidebarSpaceViewStore),T=(0,I().xJ)({spaceStore:b}),P=(0,I().gc)({spaceStore:b,teams:T.teams}).map((e=>e.store)),B=(0,i().O$)(w().A),F=(0,i().K8)((()=>o(522094).A.state.flowId),[])||o(206267).JW(),{importCompletedTasks:R,useSectionAsStatus:D,loggerPageId:E,selectedProjectsAndTeamspaces:z,selectedWorkspace:V,templateCreationInProgress:U,result:N,workspaces:H}=B,K=(0,n.useCallback)((e=>{switch(e){case"selectProperties":return!0;case"chooseWorkspace":const e=Object.values(z);return e.length&&!e.every((e=>0===e.projects.length&&void 0===e.notionTeamspaceId))&&!e.some((e=>0!==e.projects.length&&!e.notionTeamspaceId))&&!e.some((e=>e.notionTeamspaceId&&0===e.projects.length));case"selectData":return Object.values(z).some((e=>0!==e.projects.length));default:return!1}}),[z]),$=we();let Y=e;return"selectData"===e?Y="chooseWorkspace":"confirm"===e&&(Y="importComplete"),(0,O.jsxs)(o(843878).Ay,{controlRow:(e=>"selectData"===e?(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,O.jsx)(p().A,{size:"lg",style:{border:0},disabled:!H.length,onClick:()=>{t(),w().A.resetImport()},children:(0,O.jsx)(v().sA,{id:"asanaImport.selectData.backButtonText",defaultMessage:"Back"})}),(0,O.jsxs)(L().Ye,{alignItems:"center",gap:8,children:[V?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ce().A,{on:R,onClick:()=>w().A.setState({...B,importCompletedTasks:!R})}),(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.selectData.importCompletedTasks",defaultMessage:"Import completed tasks"})})]}):void 0,(0,O.jsx)("div",{style:{gap:2},children:(0,O.jsx)(u().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:!K(e),onClick:()=>{b&&M&&(A().Xn({environment:S,currentSpaceViewStore:M,spaceStore:b,teamsStores:P,flowId:F}).catch((()=>{})),j().eH(S,{import_source:"asana",from:r}))},children:U?(0,O.jsxs)(L().Ye,{alignItems:"center",gap:2,children:[(0,O.jsx)(d().A,{onDarkBackground:!0}),(0,O.jsx)(v().sA,{id:"asanaImportsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"})]}):(0,O.jsx)(v().sA,{id:"asanaImportsTab.selectData.nextButtonText",defaultMessage:"Import"})})})]})]}):"chooseWorkspace"===e?(0,O.jsx)(Pe,{left:(0,O.jsx)(Te,{}),next:{disabled:!K(e),onClick:A().uA,message:x.formatMessage(Ie.chooseWorkspaceNextButtonLabel),renderTooltip:K(e)?void 0:()=>(0,O.jsx)(v().sA,{id:"asanaImportsTab.selectData.ImportConfirmationTooltip",defaultMessage:"Please select projects and a teamspace to import into"})},back:{disabled:!1,onClick:()=>{t(),w().A.resetImport()},message:x.formatMessage(Ie.chooseWorkspaceBackButtonLabel)},children:V?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ce().A,{on:R,onClick:()=>w().A.setState({...B,importCompletedTasks:!R})}),(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.chooseWorkspace.chooseImportCompletedTasks",defaultMessage:"Import completed tasks"})})]}):void 0}):"selectProperties"===e?(0,O.jsx)(Pe,{left:(0,O.jsx)(Te,{}),next:{disabled:!K(e),onClick:()=>{b&&M&&(A().Xn({environment:S,currentSpaceViewStore:M,navigateBeforeTemplateCreation:!0,spaceStore:b,teamsStores:P,flowId:F}).catch((()=>{})),j().eH(S,{import_source:"asana",from:r,flowId:F}))},message:x.formatMessage(Ie.startImportButtonText)},back:{disabled:!1,onClick:()=>{w().A.setState({...B,currentTab:"chooseWorkspace"})},message:x.formatMessage(Ie.selectPropertiesBackButtonText)},children:(0,O.jsx)(de().A,{textWrap:!0,renderTooltip:e=>(0,O.jsx)(v().sA,{...e,id:"asanaImportsTab.selectProperties.selectPropertiesTooltip",defaultMessage:"Asana completed field is imported as status in Notion. Switch to importing sections as status and completed as checkboxes.",description:"Tooltip explaining the switcher to map completion to status."}),render:e=>(0,O.jsxs)("div",{...e,style:{display:"flex",gap:8},children:[(0,O.jsx)(ce().A,{on:D,onClick:()=>w().A.setState({...B,useSectionAsStatus:!D})}),(0,O.jsx)(_().A,{children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.selectProperties.selectPropertiesStatusMapping",defaultMessage:"Import Section as Status"})})]})})}):"importingData"===e?(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)(Te,{}),(0,O.jsx)(p().A,{size:"lg",disabled:!H.length||U,onClick:()=>{t(),w().A.resetImport()},children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})]}):"confirm"===e?(0,O.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,O.jsx)(u().A,{colorPalette:"blue",onClick:()=>{E&&f({url:(0,h().A)({pageId:E,pageModel:S.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:y().ev,id:E},userId:S.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:m().y8.Import}),environment:S}),w().A.resetImport(),C().A.reset()},children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,O.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,O.jsx)(p().A,{size:"lg",disabled:!H.length,onClick:()=>{t(),w().A.resetImport()},children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"importComplete"===e?(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",height:48,paddingTop:35,paddingBottom:28,border:"1px, 0px, 0px, 0px"},children:[(0,O.jsx)(Te,{}),(0,O.jsx)(u().A,{colorPalette:"blue",style:{width:"181px",height:"32px",paddingTop:"0px,",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:8,borderRadius:"4px",gap:"4px"},onClick:()=>{if(null!=N&&N.length&&E){const e=N.find((e=>void 0!==e.projectCollectionPageId)),t=(null==e?void 0:e.projectCollectionPageId)||E;f({url:(0,h().A)({pageId:t,pageModel:void 0===t?void 0:S.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:y().ev,id:t},userId:S.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:m().y8.Import}),environment:S})}w().A.resetImport(),C().A.reset()},children:(0,O.jsx)(v().sA,{id:"asanaImportsTab.confirm.viewImportedProjects",defaultMessage:"View imported projects"})})]}):void 0)(Y),controlRowPaddingTopBottom:"confirm"===e?0:10,removeBoxShadow:"confirm"===e,contentPaddingLeftRight:25,controlRowPaddingLeftRight:15,contentPaddingTopBottom:2,children:[(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,O.jsx)(Me,{tab:Y}),(0,O.jsx)("div",{style:{position:"absolute",top:12,insetInlineEnd:12},children:(0,O.jsx)(l().Ay,{onClick:()=>{t(),w().A.resetImport()},style:$.closeButton,hoveredStyle:$.closeButtonHover,children:(0,O.jsx)(c().I,{icon:o(995847).xMarkSmallIcon,size:"sm",colorVariant:"secondary"})})})]}),ke(Y),(e=>"selectData"===e?(0,O.jsx)(ae,{}):"importingData"===e?(0,O.jsx)(o(297464).A,{assetSrc:g().A.images.import.asanaPng}):"confirm"===e?(0,O.jsx)(W,{}):"failure"===e?(0,O.jsx)(o(352403).A,{assetSrc:g().A.images.import.asanaPng,loggerPageId:E,failedMessage:x.formatMessage(Ie.failed)}):"chooseWorkspace"===e?(0,O.jsx)(o(453529).Ay,{}):"selectProperties"===e?(0,O.jsx)(be,{}):"importComplete"===e?(0,O.jsx)(q,{}):void 0)(Y)]})}},147294:(e,t,o)=>{o.d(t,{Ee:()=>h,J1:()=>p,oG:()=>u});o(296540);var n=()=>o(59226),s=()=>o(56366),a=()=>o(401497),i=()=>o(970236),r=()=>o(69708),l=()=>o(765957),c=o(474848);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},http_request_automation_action:{launchDateMs:173324302e4,expiryDateMs:1738368e6},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5}};function p({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,c.jsx)(i().E,{color:"blue",style:t.badge,content:(0,c.jsx)(r().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function u(e){return(0,s().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=d[e],{currentUserSettingsStore:n}=l().default.state;if(n&&n.isReady()){var s;const e=null===(s=n.getSettings())||void 0===s?void 0:s.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function m({style:e,newBadgeKey:t}){return u(t)?(0,c.jsx)(p,{style:e}):null}function g({style:e,newBadgeKey:t}){return(0,n().X)(t)?(0,c.jsx)(p,{style:e}):null}function h(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(g,{...e}):(0,c.jsx)(m,{...e})}},158359:(e,t,o)=>{o.d(t,{P:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},162402:(e,t,o)=>{o.d(t,{q:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},167334:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(484714),s=()=>o(401497),a=()=>o(500066),i=()=>o(187820),r=o(474848);function l(e){const{icon:t,isAlias:o,isEmptyPage:l,iconStyle:c,size:d,iconRecordCategory:p}=e,u=function(){const e=(0,n().v3)();return(0,s().IS)((t=>({wrap:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:e.device.isMobile?28:22,height:e.device.isMobile?24:18,position:"relative"},pageLinkInicator:{position:"absolute",width:"50%",height:"50%",insetInlineEnd:0,bottom:-1,fill:"dark"===t.mode?t.text.primary:"#3E3C38",stroke:"dark"===t.mode?t.background.secondary:"white",strokeWidth:"dark"===t.mode?"1.85px":"1.5px"}})),[e])}();return(0,r.jsxs)("div",{style:u.wrap,children:[(0,r.jsx)(i().B6,{disabled:!0,icon:t,iconRecordCategory:p,isEmptyPage:l,size:d??19,style:c}),o?(0,r.jsx)("div",{children:(0,a().G)(u.pageLinkInicator)}):void 0]})}},171347:(e,t,o)=>{o.d(t,{$:()=>r});o(296540);var n=()=>o(401497),s=o(474848);const a={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(284371).Wy.semibold,borderRadius:4,position:"static",marginInlineStart:6,WebkitFontSmoothing:"auto"},i=99;function r({count:e,style:t,numberStyle:o,fadeIn:r,showExcessUnreadsAsStale:d,isTranslucent:p}){const u=(0,n().IS)((o=>{const n=(e??0)>i;return{badge:{...a,...t,...n&&{width:void 0,padding:2},background:d&&n?o.gray.background[p?"secondaryTranslucent":"tertiary"]:o.red.background.accentPrimary,color:d&&n?o.gray.text.accentPrimary:o.red.text.inversePrimary,...r&&{transition:"opacity 0.1s",opacity:l(e)?1:0}}}}),[e,r,p,d,t]);return r||l(e)?(0,s.jsx)("div",{style:u.badge,children:(0,s.jsx)(c,{count:e,numberStyle:o})}):null}function l(e){return!!e&&e>0}function c({count:e,numberStyle:t}){return e?1===e?(0,s.jsx)("span",{style:{marginInlineStart:-.5,...t},children:"1"}):e>i?(0,s.jsx)("span",{style:{letterSpacing:-.5,...t},children:"99+"}):e>9?(0,s.jsx)("span",{style:{letterSpacing:-.5,marginInlineStart:-.5,...t},children:e}):(0,s.jsx)("span",{style:{...t},children:e}):null}},192591:(e,t,o)=>{o.d(t,{P:()=>v,_:()=>x});var n=()=>o(836095),s=()=>o(726637),a=()=>o(651784),i=()=>o(939768),r=()=>o(559926),l=()=>o(901389),c=()=>o(725951),d=()=>o(522094),p=()=>o(313961),u=()=>o(404141),m=()=>o(250933),g=()=>o(559506),h=()=>o(496414),f=()=>o(383466);const y=(0,o(69708).YK)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",defaultMessage:"Authenticating with Trelloâ€¦"},titleMessage:{defaultMessage:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function v(e){const{environment:t,requestStore:o}=e,v=d().A.getOrCreateFlowId();r()._$(t,{import_source:"trello",data:{import_type:"api",status:"initiated",userId:t.currentUser.id},flowId:v});const S=(0,c().LX)(t);let j=(0,a().bQ)(s().A.domainBaseUrl,{authType:S,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(j=S.redirectToAuth?j:await(0,c().YN)(t,j),t.device.isElectron)return void(0,n().P)(j);const A=await f().P(t,{width:580,height:700,url:j,titleMessage:y.titleMessage});if(!A)return;const b=i().qg(A),I=b.query.oauth_token,k=b.query.oauth_verifier;if(!I||!k)return;h().m({message:y.authenticatingWithTrello});const w=await g().callApi({eventName:"authWithTrello",environment:t,data:{requestToken:I,verifier:k}});"failed"===w.type?(r()._$(t,{import_source:"trello",data:{import_type:"api",status:"failure",error:w.error,userId:t.currentUser.id},flowId:v}),console.error(w.error),l().Qg(w),h().V()):(r()._$(t,{import_source:"trello",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:v}),r().mu(t,{integration_name:"trello"}),await o.refresh(),u().A.setState({...u().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x(t,o).then((()=>{p().A.setState({open:!0})})).catch((()=>{m().A.setState({...m().A.state,isFetchingBoards:!0,showLoader:!1}),p().A.setState({open:!1})})),h().V())}async function x(e,t){m().A.setState({...m().A.state,isFetchingBoards:!0,showLoader:!0});const o=await g().callApi({eventName:"getTrelloBoards",environment:e,data:{}});if(await t.refresh(),"success"===o.type)return m().A.setState({...m().A.state,boardsResponse:o.data,isFetchingBoards:!1,showLoader:!1}),o.data;throw console.error(o.error),l().Qg(o),o.error}},201506:(e,t,o)=>{o.d(t,{W:()=>c});var n=o(296540),s=()=>o(819121),a=()=>o(56366),i=()=>o(353643);class r extends(()=>o(757695))().Store{getInitialState(){return{isSidebarItemHovered:!1,isSidebarItemFocused:!1,isActionButtonHovered:!1,isActionButtonFocused:!1,isActionButton2Hovered:!1,isActionButton2Focused:!1}}}var l=()=>o(487941);function c(){const e=(0,a().uB)(void 0,l().A),t=(0,a().uB)(void 0,r),o=(0,n.useCallback)((e=>{const o=e.target;o instanceof HTMLElement&&(0,s().p)(o)&&t.setState({...t.state,isSidebarItemFocused:!0})}),[t]),c=(0,n.useCallback)((()=>{t.setState({...t.state,isSidebarItemFocused:!1})}),[t]),d=(0,n.useCallback)((()=>{i().A.state.isDragging||t.setState({...t.state,isSidebarItemHovered:!0})}),[t]),p=(0,n.useCallback)((()=>{t.setState({...t.state,isSidebarItemHovered:!1})}),[t]);return{sidebarTooltipStore:e,sidebarItemHoverStore:t,handleFocus:o,handleBlur:c,handleMouseMove:d,handleMouseLeave:p}}},205160:(e,t,o)=>{o.d(t,{K:()=>a,v:()=>s});var n=()=>o(69708);const s=(0,n().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),a=(0,n().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},210741:(e,t,o)=>{o.d(t,{A:()=>S,l:()=>j});o(581454),o(296540);var n=()=>o(484714),s=()=>o(56366),a=()=>o(631524),i=()=>o(637997),r=()=>o(69708),l=()=>o(231297),c=()=>o(755199),d=()=>o(406699),p=()=>o(805751),u=()=>o(419357),m=()=>o(939740),g=()=>o(859428),h=()=>o(553965),f=()=>o(765957),y=()=>o(463830),v=()=>o(519116),x=o(474848);function S(){const e=(0,s().K8)((()=>{var e;return null===(e=f().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,n().v3)(),o=(0,s().uB)(void 0,y().A),l=(0,n().WS)();return(0,x.jsx)(g().A,{renderTooltip:()=>(0,x.jsx)(r().sA,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:"bottom",render:n=>(0,x.jsx)(d().A,{buttonPopupStore:o,popupType:d().z.Popup,renderOrigin:t=>(0,x.jsx)(a().p,{size:"sm",style:{fontSize:20,justifyContent:"center",height:l?u().LG:u().yD,width:l?u().LG:u().yD},...(0,h().A)(t,n),children:void 0!==e?i().pi[e]:"âœ‹"}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:n}=e,s=i().pi.map(((e,n)=>({key:e,action:()=>{t.close(),j({environment:o,skinTone:n})},render:t=>(0,x.jsx)(v().A,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,x.jsx)(p().A,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,x.jsx)(m().Ay,{type:m().Oh.Horizontal,initialFocus:n,sections:[{key:"variations",render:e=>(0,x.jsx)("div",{style:{display:"flex",padding:4},...e}),items:s}]})})}({parent:o,environment:t,currentSkinTone:e}),...n})})}function j(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:n}=f().default.state;n&&l().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{c().mJ({userSettingsStore:n,transaction:e,data:{emoji_picker_skin_tone:o}})}})}},250933:(e,t,o)=>{o.d(t,{A:()=>s});class n extends(()=>o(757695))().Store{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const s=new n},251994:(e,t,o)=>{o.d(t,{A:()=>K,h:()=>Y});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);var n=o(296540),s=()=>o(564884),a=()=>o(242422),i=()=>o(813974),r=()=>o(726637),l=()=>o(484714),c=()=>o(56366),d=()=>o(401497),p=()=>o(252291),u=()=>o(998531),m=()=>o(729108),g=()=>o(631524),h=()=>o(160432),f=()=>o(634201),y=()=>o(522419),v=()=>o(97889),x=()=>o(848392),S=()=>o(89463),j=()=>o(837420),A=()=>o(798880),b=()=>o(69708),I=()=>o(496603),k=()=>o(534177),w=()=>o(284371),C=()=>o(384944),M=()=>o(471995),T=()=>o(231297),P=()=>o(892632),B=()=>o(500507),F=()=>o(623580),R=()=>o(404277),D=()=>o(859428),_=()=>o(87878),L=()=>o(594794),E=()=>o(937182),O=()=>o(251057),W=()=>o(722872),z=()=>o(423219),V=()=>o(797162),U=()=>o(589994),N=()=>o(267419),H=o(474848);const q=(0,b().YK)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}});function K(e){const t=(0,l().v3)(),o=(0,b().tz)(),[p,v]=(0,n.useState)(""),[x,B]=(0,n.useState)(null),[K,Y]=(0,n.useState)(null),[Z,Q]=(0,n.useState)(null),[X,ee]=(0,n.useState)(!1),[te,oe]=(0,n.useState)(""),ne=e.allowUrlPaste&&t.device.isDesktop,se=e.allowUrlPaste&&t.device.isMobile,{existingEmojiStore:ae,isEditing:ie}=(0,c().K8)((()=>({existingEmojiStore:V().A.state.store,isEditing:V().A.state.isEditing})),[]),re=(0,c().K8)((()=>null==ae?void 0:ae.getName()),[ae]),le=(0,c().K8)((()=>(0,_().vZ)()),[]),ce=(0,c().K8)((()=>{var e;return le?(null===(e=z().A.getData(t,{spaceId:le.id}))||void 0===e?void 0:e.nameToPointerMap)??new Map:new Set}),[t,le]),de=(0,c().K8)((()=>N().A.state.emojiByName),[]),pe=(0,c().K8)((()=>(0,_().wA)({spaceStore:le})),[le]),ue=(0,c().K8)((()=>a().default.getConfigKey("custom_emojis_config","limit")),[]),me=(0,n.useCallback)((e=>{v(e),0!==e.length?S().x.VALID_NAME_REGEX.test(e)?e.length>50?B(o.formatMessage(q.nameInputLengthError)):e===re&&ie||!ce.has(e)&&!de.hasOwnProperty(e)?B(null):B(o.formatMessage(q.nameInputDuplicateError)):B(o.formatMessage(q.nameInputCharacterError)):B(null)}),[re,ie,ce,de,o]);function ge(e){const t=(0,y().pc)({source:e,secureFileConfigRootpath:r().A.secureFileConfig.rootPath,secureFileConfigHostname:r().A.secureFileConfig.hostname}),o=t?t.link:e,n=new Image;n.src=o,n.onload=()=>{Y({type:"url",url:o,isExistingImage:!1}),Q(null)},n.onerror=()=>{Q(ne?q.urlPasteHintImageError:q.urlPasteInputImageError)}}(0,n.useEffect)((()=>{null!=ae&&ae.isDefined()&&(me(ae.getName()),Y({type:"url",url:ae.getUrl(),isExistingImage:!0}))}),[ae,ie,me]);const he=void 0!==le&&(!e.confirmToAdd||X),fe=!ie&&ce.size>=ue,ye=he?Boolean(!p)||Boolean(!K)||Boolean(x)||p===re&&(null==K?void 0:K.isExistingImage)&&ie||fe:Boolean(!K);const ve=function(e){const{customEmojiLimitReached:t}=e,o=(0,l().v3)();return(0,d().IS)((e=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:w().J.UIRegular.desktop},title:{marginTop:12,fontSize:w().J.UIRegular.desktop,color:e.text.primary,fontWeight:w().Wy.semibold},description:{marginTop:2,color:e.text.secondary,fontSize:w().J.UISmall.desktop},errorDescription:{marginTop:2,color:e.red.text.accentPrimary,fontSize:w().J.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:e.text.secondary,fontWeight:w().Wy.medium,fontSize:w().J.UISmall.desktop},nameErrorText:{marginTop:10,color:e.red.text.accentPrimary,fontSize:w().J.UISmall.desktop},imageErrorText:{marginTop:10,color:e.red.text.accentPrimary,fontSize:w().J.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:w().J.UIRegular.desktop,...t&&{color:e.text.quaternary}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:o.device.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:e.text.secondary},primaryButton:{...o.device.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:e.text.tertiary,textAlign:"center",fontSize:w().J.UISmall.desktop},disabledCheckbox:{stroke:e.border.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${e.darkDividerColor}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:e.text.tertiary,textAlign:"center",fontSize:w().J.UISmall.desktop}})),[o.device.isMobile,t])}({customEmojiLimitReached:fe}),xe=e.showTitle?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("div",{style:ve.title,children:ie?(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),fe?(0,H.jsx)("div",{style:ve.errorDescription,children:(0,H.jsx)(b().sA,{...q.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}})}):(0,H.jsx)("div",{style:ve.description,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,Se=(0,H.jsx)($,{image:K,onFileChanged:e=>{if(null===e)return void Y(null);(null==e?void 0:e.name)&&(""===p||"file"===(null==K?void 0:K.type)&&J(K.file.name)===p)&&me(J(e.name)),Y({file:e,type:"file"})},isSavingAsCustomEmoji:he,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:Q,disabled:fe&&he}),je=(0,c().K8)((()=>{const e=i().getKeyboardShortcuts();return(0,O().dK)({name:"paste",shortcuts:e,environment:t})}),[t]),Ae=ne&&null===K&&!Boolean(Z)?(0,H.jsx)("div",{style:ve.pastePrompt,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image or link",values:{keyboardShortcut:je}})}):null,be=se&&null===K?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{style:ve.dividerContainer,children:[(0,H.jsx)("div",{style:ve.divider}),(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,H.jsx)("div",{style:ve.divider})]}),(0,H.jsx)(F().A,{placeholder:o.formatMessage(q.urlPasteInputPlaceholder),value:te,onChange:e=>oe(e.target.value),type:"text",autoComplete:"off"})]}):null,Ie=Boolean(Z)?(0,H.jsx)("div",{style:ve.imageErrorText,children:(0,H.jsx)(b().sA,{...Z,values:{br:(0,H.jsx)("br",{}),keyboardShortcut:je}})}):null,ke=t.device.isDesktop&&pe&&e.confirmToAdd&&null!==K?(0,H.jsx)(D().A,{style:ve.tooltip,placement:"bottom",alignment:"start",disableTooltip:!fe,renderTooltip:()=>(0,H.jsx)(b().sA,{...q.customEmojiLimitError,values:{customEmojiLimit:ue.toLocaleString()}}),render:e=>(0,H.jsxs)("label",{...e,style:ve.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,H.jsx)(m().S,{id:"confirmToAddCheckbox",size:14,checked:X,onClick:()=>ee(!X),disabled:fe,stroke:fe?ve.disabledCheckbox.stroke:void 0}),(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,we=he&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==K)?(0,H.jsxs)("label",{style:ve.textInputContainer,htmlFor:"emojiName",children:[(0,H.jsx)("div",{style:ve.textInputLabel,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,H.jsx)(F().A,{id:"emojiName",placeholder:o.formatMessage(q.nameInputPlaceholder),value:p,onChange:e=>me(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:fe}),Boolean(x)?(0,H.jsx)("div",{style:ve.nameErrorText,children:x}):void 0]}):null,Ce=(0,H.jsxs)("div",{style:ve.buttonFooter,children:[e.allowUrlPaste&&null!==K?(0,H.jsx)(g().p,{style:ve.secondaryButton,onClick:()=>{Y(null),Q(null),v(""),B(null),ee(!1),oe("")},children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,H.jsx)(g().p,{style:ve.secondaryButton,onClick:()=>{var t;V().A.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,se&&null===K?(0,H.jsx)(h().A,{colorPalette:"blue",onClick:()=>ge(te),disabled:0===te.length,style:ve.primaryButton,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,H.jsx)(h().A,{colorPalette:"blue",onClick:function(){var o;ye||(he?ie&&void 0!==ae?async function(e){const{environment:t,name:o,existingEmojiStore:n,image:s}=e,a=n.getModel();if(!a)return;if(s.isExistingImage)T().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{T().applyOperation({store:n,operation:a.ops.rename(o),transaction:e})}}),await U().transactionQueue.awaitRecordTransaction(n.pointer),M().D6({label:(0,H.jsx)(G,{name:o})});else{const e=async e=>{T().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{T().applyOperation({store:n,operation:a.ops.setUrl(e),transaction:t}),T().applyOperation({store:n,operation:a.ops.rename(o),transaction:t})}}),await U().transactionQueue.awaitRecordTransaction(n.pointer),M().D6({label:(0,H.jsx)(G,{name:o})})};"file"===s.type?P().QM({environment:t,file:s.file,bucket:"public",onComplete:e}):"url"===s.type?e(s.url):(0,k().HB)(s)}V().A.dismiss()}({environment:t,name:p,existingEmojiStore:ae,image:K}):((0,s().u)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===ce.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:n,uploadFileEventHandlers:s,image:a}=e,i=async e=>{const a=(0,L().JH)({environment:t,table:j().e,spaceId:n.getSpaceId()});if(T().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:s=>{C().eC({environment:t,table:j().e,inMemoryRecordCache:n.inMemoryRecordCache,transaction:s,value:{id:a.id,url:e,name:o,file_ids:[],space_id:a.spaceId,created_by_id:t.currentUser.id,created_by_table:A().oo,created_time:Date.now(),alive:!0}})}}),await U().transactionQueue.awaitRecordTransaction(a),M().D6({label:(0,H.jsx)(b().sA,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=s&&s.onComplete){const e=f().qg.toString(f().qg.fromPointer(a));s.onComplete(e)}};"file"===a.type?P().QM({...s,environment:t,file:a.file,bucket:"public",onComplete:i}):"url"===a.type?i(a.url):(0,k().HB)(a);V().A.dismiss()}({environment:t,name:p,currentSpaceStore:le,uploadFileEventHandlers:e.uploadFileEventHandlers,image:K})):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,K))},disabled:ye,style:ve.primaryButton,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let Me;return Me=t.device.isMobile?{menuType:W().gu.ActionSheet}:{menuType:W().gu.Popup,minWidth:280},(0,H.jsx)(R().A,{...Me,children:(0,H.jsx)(u().N,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:I().D_,onDown:I().D_,onLeft:I().D_,onRight:I().D_,onBackspace:I().D_,onSelectAll:I().D_,onUndo:I().D_,onRedo:I().D_,onTab:I().D_,onUntab:I().D_,onPaste:ne&&null===K?function(e){e.preventDefault();const t=Array.from(e.clipboardData.files).find((e=>e.type.startsWith("image/")));if(t){if(!(0,E().B7)({fileMimeType:t.type,allowedType:E().Dn}))return void Q(q.fileUploadImageError);return(null==t?void 0:t.name)&&(""===p||"file"===(null==K?void 0:K.type)&&J(K.file.name)===p)&&me(J(t.name)),Y({file:t,type:"file"}),void Q(null)}const o=e.clipboardData.getData("text/plain");o&&ge(o)}:I().D_,children:(0,H.jsxs)("div",{style:ve.wrapper,children:[xe,Se,Ae,be,Ie,ke,we,Ce]})})})}function $(e){const t=(0,l().v3)(),o=(0,b().tz)(),[s,a]=(0,n.useState)(null),{onFileChanged:i,image:r,isSavingAsCustomEmoji:c,largeEmoji:u,hideReplaceButton:m,setError:h,disabled:f}=e;(0,n.useEffect)((()=>{if(null!==r)if("file"===r.type)if(r.file instanceof File){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&a(e.target.result)},e.readAsDataURL(r.file)}else r.file.dataURL&&a(r.file.dataURL);else"url"===r.type?a(r.url):(0,k().HB)(r);else a(null)}),[r]);const y=(0,d().IS)((e=>({wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:e.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",gap:8,padding:14,color:e.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:u?16:12,...!m&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:w().J.UISmall.desktop,fontWeight:w().Wy.medium},previewLabel:{fontSize:w().J.UISmall.desktop,color:e.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:u?80:48,height:u?80:48,padding:u?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.darkDividerColor,objectFit:c?"contain":"cover"},darkBackground:{background:e.primaryBlack},lightBackground:{background:e.white}})),[c,u,m]),S=(0,n.useCallback)((e=>{h(null),i(e??null)}),[i,h]),j=(0,n.useCallback)((async()=>{const e=await P().dA({environment:t,supportsMobileNativeFileUpload:!1,multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,E().B7)({fileMimeType:e[0].type,allowedType:E().Dn})?S(e[0]):h(q.fileUploadImageError))}),[S,h,t]);return(0,H.jsx)("div",{style:y.wrapper,children:(0,H.jsx)(B().V,{type:E().Dn,style:y.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(h(null),e.file&&S(e.file)):h(q.fileUploadImageError)},disabled:f,children:s?(0,H.jsxs)("div",{style:y.dropZoneInnerWithEmoji,children:[(0,H.jsx)("div",{style:y.previewLabel,children:(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,H.jsxs)("div",{style:y.emojiContainer,children:[(0,H.jsx)("img",{style:{...y.emojiImage,...y.lightBackground},src:s,alt:"Light Mode Image"}),(0,H.jsx)("img",{style:{...y.emojiImage,...y.darkBackground},src:s,alt:"Dark Mode Image"})]}),m?void 0:(0,H.jsx)(g().p,{colorPalette:"gray",iconLeading:{icon:v().C,size:"xs"},onClick:j,"aria-label":o.formatMessage(q.uploadReplaceButton),disabled:f,disabledFeedback:f,children:(0,H.jsx)("div",{style:y.buttonCaption,children:o.formatMessage(q.uploadReplaceButton)})})]}):(0,H.jsxs)(g().p,{style:y.dropZoneInnerEmpty,onClick:j,disabled:f,disabledFeedback:f,children:[(0,H.jsx)(p().I,{icon:x().M,colorVariant:"secondary"}),(0,H.jsx)(b().sA,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const Y=function(){const{open:e,originRect:t,entrypoint:n}=(0,c().K8)((()=>V().A.state.open?{open:!0,originRect:V().A.state.originRect,entrypoint:V().A.state.entrypoint}:{open:!1,originRect:void 0,entrypoint:void 0}),[]),s=(0,c().K8)((()=>{if(V().A.state.open)return V().A.state.uploadFileEventHandlers}),[]);return(0,H.jsx)(o(417392).Ay,{popupType:o(30537).n.Popup,open:e,originRect:t,placementToOrigin:"bottom",alignmentToOrigin:"start",onDismiss:()=>V().A.dismiss(),onClosed:()=>V().A.reset(),render:()=>(0,H.jsx)(K,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:n,uploadFileEventHandlers:s}),sameWidthAsOrigin:!1})};function G({name:e}){return(0,H.jsx)(b().sA,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:e}})}function J(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const n=new RegExp(`[^${S().x.VALID_NAME_TOKENS}]`,"gu");return t.toLocaleLowerCase().replace(n,"-")}},255043:(e,t,o)=>{o.d(t,{O:()=>x,r:()=>S});o(898992),o(672577),o(581454);var n=o(296540),s=()=>o(401497),a=()=>o(631524),i=()=>o(324254),r=()=>o(512062),l=()=>o(534177),c=()=>o(722872),d=()=>o(760217),p=()=>o(406699),u=()=>o(419357),m=()=>o(404277),g=()=>o(939740),h=()=>o(89924),f=()=>o(125565),y=()=>o(21140),v=o(474848);function x(e){return(0,v.jsxs)(y().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,v.jsx)(f().A,{isSmall:e.isSmall,children:e.name})]})}function S(e){const{onSelectOption:t,options:o,currentOption:y,placeHolder:S,initialFocus:j,menuProps:A,iconOnly:b,inputProps:I,searchThreshold:k,selectorButtonStyle:w}=e,[C,M]=(0,n.useState)(""),T=o.find((({key:e})=>e===y)),P=(0,s().IS)((e=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${r().M.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{width:14,height:14,marginInlineStart:4,fill:e.icon.secondary}})),[]),B={..."workspace"===w?P.workspaceSelectorButton:{},..."teamspace"===w?P.teamspacePickerButton:{}};return(0,v.jsx)(p().A,{popupType:p().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,v.jsxs)(a().p,{...e,style:{color:y?void 0:r().M.light.gray[300],...B},children:[(0,v.jsx)(f().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:y?void 0:"#ACABA9",lineHeight:"19.6px"},children:(b?null==T?void 0:T.icon:T&&(0,v.jsx)(x,{...T}))??S}),(0,i().arrowChevronSingleDownSmallIcon)(P.menuChevronDownIcon)]}),render:e=>{const n=(0,v.jsx)(u().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>M(e.target.value),value:C,...I}),s={menuType:c().gu.Popup,width:376,left:50,header:(0,l().O9)(k)&&o.length>k?n:null,...A},a=o.map((({key:o,name:n,icon:s,searchTerm:a})=>({key:o,keywords:a??[],action:()=>{t(o),e.close()},render:e=>(0,v.jsx)(d().A,{...e,title:(0,v.jsx)(x,{name:n,icon:s}),shouldWrapCaption:!0,isChecked:y===o})})));return(0,v.jsx)(m().A,{...s,children:(0,v.jsx)(g().Ay,{type:g().Oh.Vertical,sections:[{key:"dropdown.menuList",render:e=>(0,v.jsx)(h().A,{...e}),items:a}],initialFocus:j,style:{position:"relative",alignItems:"flex-end"}})})}})}},281844:(e,t,o)=>{o.d(t,{v:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.76 15.98",svg:(0,o(474848).jsx)("path",{d:"M12.043 2.444a.625.625 0 0 0-1.13-.41l-6.17 8.55a.625.625 0 0 0 .507.99h3.098l-.401 5.5a.625.625 0 0 0 1.13.412l6.18-8.54a.625.625 0 0 0-.507-.991h-3.099z"})},s=(0,o(340498).wt)("lightningFill",n)},283220:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,unsplashTintableIcon:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1 1 18 18",svg:(0,o(474848).jsx)("path",{d:"M6.625 6.063V1h6.75v5.063zm6.75 2.812H19V19H1V8.875h5.625v5.063h6.75z"})},s=(0,o(340498).wt)("unsplashTintable",n)},297464:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),s=()=>o(401497),a=()=>o(69708),i=()=>o(125565),r=()=>o(21140),l=(o(581454),o(474848));const c=function(e){const{dotCount:t=6,speed:a=800}=e,[i,c]=(0,n.useState)(1),d=(0,s().IS)((e=>({iconStyle:{width:6,height:6,fill:e.icon.tertiary,opacity:.5},iconStyleBold:{width:6,height:6,fill:e.icon.tertiary}})),[]);return(0,n.useEffect)((()=>{const e=setInterval((()=>c((e=>e<t?e+1:1))),a);return()=>clearInterval(e)}),[t,a]),(0,l.jsx)(r().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:Array.from({length:t},((e,t)=>t+1)).map((e=>(0,l.jsx)("div",{children:(0,o(358373).v)(i===e?d.iconStyleBold:d.iconStyle)},e)))})};const d=function(e){const t=(0,o(56366).K8)((()=>o(92513).A.state.templateCreationInProgress),[]),n=(0,s().IS)((e=>({lightText:{color:e.text.tertiary}})),[]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,l.jsxs)(r().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,l.jsx)("img",{style:{width:32,height:32,marginInlineEnd:8},src:e.assetSrc}),(0,l.jsx)(c,{}),(0,l.jsx)("img",{style:{width:32,height:32,marginInlineStart:8},src:o(148307).A.images.notionLogoPng})]}),t?(0,l.jsx)(i().A,{style:n.lightText,children:(0,l.jsx)(a().sA,{id:"import.importingData.settingUpWorkspace",defaultMessage:"Creating templates for your projects and tasks."})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r().Ye,{children:(0,l.jsx)(i().A,{style:n.lightText,children:(0,l.jsx)(a().sA,{id:"import.importingData.feelFreeToLeave",defaultMessage:"Data is being imported. Feel free to leave this window."})})}),(0,l.jsx)(r().Ye,{children:(0,l.jsx)(i().A,{style:n.lightText,children:(0,l.jsx)(a().sA,{id:"import.importingData.sendEmail",defaultMessage:"We will send you an email when the import is complete or if any problems occur."})})})]})]})}},324009:(e,t,o)=>{o.d(t,{J:()=>v,p:()=>x});var n=()=>o(836095),s=()=>o(726637),a=()=>o(651784),i=()=>o(939768),r=()=>o(559926),l=()=>o(901389),c=()=>o(725951),d=()=>o(372555),p=()=>o(113507),u=()=>o(522094),m=()=>o(404141),g=()=>o(559506),h=()=>o(496414),f=()=>o(383466);const y=(0,o(69708).YK)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",defaultMessage:"Authenticating with Evernoteâ€¦"},titleMessage:{defaultMessage:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function v(e){const{environment:t,requestStore:o}=e,v=u().A.getOrCreateFlowId();r()._$(t,{import_source:"evernote",data:{import_type:"api",status:"initiated",userId:t.currentUser.id},flowId:v});const S=(0,c().LX)(t);let j=(0,a().TD)(s().A.domainBaseUrl,{authType:S,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(j=S.redirectToAuth?j:await(0,c().YN)(t,j),t.device.isElectron)return h().m({message:y.authenticatingWithEvernote}),d().A.setState({...d().A.state,linkingAccount:!0,showLoader:!0}),void(0,n().P)(j);const A=await f().P(t,{width:580,height:700,url:j,titleMessage:y.titleMessage});if(!A)return;const b=i().qg(A),I=b.query.oauth_token,k=b.query.oauth_verifier;if(!I||!k)return;h().m({message:y.authenticatingWithEvernote});const w=await g().callApi({eventName:"authWithEvernote",environment:t,data:{requestToken:I,verifier:k}});"failed"===w.type?(r()._$(t,{import_source:"evernote",data:{import_type:"api",status:"failure",error:w.error,userId:t.currentUser.id},flowId:v}),console.error(w.error),l().Qg(w),h().V()):(r()._$(t,{import_source:"evernote",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:v}),r().mu(t,{integration_name:"evernote"}),await o.refresh(),p().A.setState({open:!0}),m().A.setState({...m().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x({environment:t,requestStore:o}),h().V())}async function x(e){const{environment:t,requestStore:o}=e;try{d().A.setState({...d().A.state,isFetchingNotebooks:!0,showLoader:!0});const e=await g().callApi({eventName:"getEvernoteNotebooks",environment:t,data:{}});if(await o.refresh(),"success"===e.type){d().A.setState({...d().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:o}=e.data;return{userInfo:t,notebooks:o}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(n){return console.error(n),{notebooks:[],userInfo:void 0}}}},327165:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(484714),s=()=>o(718827),a=()=>o(160432),i=()=>o(100622),r=o(474848);const l=function({onClick:e,disabled:t,title:n}){return(0,r.jsx)(o(678553).Ay,{title:(0,r.jsx)(c,{onClick:e,disabled:t,title:n})})};function c({onClick:e,disabled:t,title:o}){const l=(0,n().v3)(),{isMobile:c}=l.device,d={width:"100%",color:i().Tj.blue};return c?(0,r.jsx)(s().Ay,{onClick:e,disabled:t,style:d,children:o}):(0,r.jsx)(a().A,{colorPalette:"blue",onClick:e,disabled:t,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"},children:o})}},344417:(e,t,o)=>{o.d(t,{u:()=>s});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},s=(0,o(340498).wt)("magnifyingGlassSmall",n)},352403:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(358373),s=()=>o(69708),a=()=>o(125565),i=o(474848);const r=function(e){var t;const r=(0,o(401497).IS)((e=>({iconStyle:{width:6,height:6,fill:e.icon.tertiary},closeIconStyle:{width:16,height:16,fill:e.red.icon.accentPrimary},lightText:{color:e.text.tertiary}})),[]);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,i.jsxs)(o(21140).Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,i.jsx)("img",{style:{width:32,height:32,marginInlineEnd:8},src:e.assetSrc}),(0,n().v)(r.iconStyle),(0,n().v)(r.iconStyle),(0,n().v)(r.iconStyle),(0,o(931121).J)(r.closeIconStyle),(0,n().v)(r.iconStyle),(0,n().v)(r.iconStyle),(0,n().v)(r.iconStyle),(0,i.jsx)("img",{style:{width:32,height:32,marginInlineStart:8},src:o(148307).A.images.notionLogoPng})]}),(0,i.jsx)(a().A,{style:r.lightText,children:e.failedMessage}),(0,i.jsx)(a().A,{style:r.lightText,children:(0,i.jsx)(s().sA,{id:"import.importingData.failed.viewLoggerPage",defaultMessage:"Please try again or read the {link} to troubleshoot.",values:{link:(0,i.jsx)("a",{style:{color:o(100622).Tj.black,cursor:"pointer"},href:`/${null===(t=e.loggerPageId)||void 0===t?void 0:t.replaceAll("-","")}`,children:(0,i.jsx)(s().sA,{id:"import.importingData.failed.linkText",defaultMessage:"import logs"})})}})})]})}},372555:(e,t,o)=>{o.d(t,{A:()=>s});class n extends(()=>o(757695))().Store{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1,linkingAccount:!1}}}const s=new n},388416:(e,t,o)=>{o.d(t,{Sq:()=>L,pX:()=>E,g3:()=>W,nM:()=>U,P0:()=>D,Jq:()=>O,Wh:()=>G,nP:()=>Y,$A:()=>Q,TJ:()=>X,i_:()=>V,oz:()=>J,$b:()=>R,qf:()=>_,dJ:()=>K,p7:()=>ee,No:()=>z,Mi:()=>H});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(430670),o(803949),o(581454);var n=()=>o(726637),s=()=>o(584262),a=()=>o(66689),i=()=>o(921940),r=()=>o(165358),l=()=>o(416845),c=()=>o(179034),d=()=>o(161479),p=()=>o(96689),u=()=>o(319625),m=()=>o(583835);const g=(0,m().Dv)("mondayFullImport"),h=(0,m().Dv)("parallelMondayImport");var f=()=>o(901389),y=()=>o(553003),v=()=>o(601734),x=()=>o(972435),S=()=>o(397292),j=()=>o(765957),A=()=>o(390181),b=()=>o(522094),I=()=>o(479199),k=()=>o(404141),w=()=>o(559926),C=()=>o(559506),M=()=>o(357625),T=()=>o(180328),P=()=>o(496414),B=()=>o(577142),F=()=>o(231297);const R=(0,o(69708).YK)({projectsAndTasksCountTooltip:{id:"mondayImport.importsTab.selectData.tooltipForProjectsAndTasksCount",defaultMessage:"Counts each item in the project board and each task board as a separate project"},boardsKeyWord:{id:"mondayImport.importsTab.selectData.boardsKeyWord",defaultMessage:" boards"},projectsKeyWord:{id:"mondayImport.importsTab.selectData.projectsKeyWord",defaultMessage:" projects"},projectsAndTasksExcludedToolTip:{id:"mondayImport.importsTab.selectData.tooltipForDisabledProjectsAndTasks",defaultMessage:"Project and task boards are excluded."},noBoardsTooltipMessage:{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolderV2",defaultMessage:"This folder has no boards."},successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:"Successfully connected monday.com instance."},fullImport:{defaultMessage:"Full Import",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport"},fullImportDescription:{defaultMessage:"Import all Monday board types as Notion databases. Recommended for a full migration.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport.description"},projectsAndTasks:{defaultMessage:"Projects & Tasks only",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks"},projectsAndTasksDescription:{defaultMessage:"Import project and task boards from Monday into Notion Projects. Recommended for Project management only.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks.description"},newTeamspaceLabel:{id:"mondayImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"mondayImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"},selectBoardsHeading:{id:"mondayImport.importsTab.chooseWorkspace.selectBoards",defaultMessage:"Choose boards to import"},selectWorkspaceV2:{id:"mondayImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"},chooseImportType:{id:"mondayImport.importsTab.chooseWorkspace.chooseImportType",defaultMessage:"Choose Import Type"},mapTeamspacesDescription:{id:"mondayImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Monday folder a Notion teamspace to collaborate in."},searchWorkspaces:{id:"mondayImport.importsTab.chooseWorkspace.searchWorkspaces",defaultMessage:"Search workspaces..."},chooseWorkSpace:{id:"mondayImport.importsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Monday workspace"},chooseTeamspace:{id:"mondayImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"},excludeProjectsAndTasks:{id:"mondayImport.importsTab.selectData.excludeProjectsAndTasks",defaultMessage:"Exclude projects & tasks boards"},selectWorkSpaceV1:{id:"MondayImport.importsTab.selectData.tabTitle",defaultMessage:"Select Monday.com workspace"},backButton:{id:"mondayImport.selectData.backButtonText",defaultMessage:"Back"},creatingTemplate:{id:"importsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"},nextButton:{id:"importsTab.selectData.nextButtonText",defaultMessage:"Next"}});function D(){return{ProjectsAndTasks:{title:R.projectsAndTasks,description:R.projectsAndTasksDescription},FullImport:{title:R.fullImport,description:R.fullImportDescription}}}function _(){I().A.setState({...I().A.state,isModalOpen:!0})}async function L(e){const{environment:t,userEmail:o,APIToken:n,flowId:s,spaceId:a}=e;if(w()._$(t,{import_source:"monday",data:{import_type:"api",status:"initiated"},flowId:s}),!t.currentUser.id||!o||!n)return f().rG({message:"Invalid details"}),void P().V();const i=await C().callApi({eventName:"authenticateMondayUser",environment:t,data:{userId:t.currentUser.id,spaceId:a,userEmail:o,APIToken:n}});"failed"===i.type?(w()._$(t,{import_source:"monday",data:{import_type:"api",status:"failure",error:i.error},flowId:s}),console.error(i.error),f().Qg(i)):(w()._$(t,{import_source:"monday",data:{import_type:"api",status:"success"},flowId:s}),I().A.setState({...I().A.state,account:o}),f().rG({message:x().A.formatMessage(R.successfullyConnected)})),P().V()}async function E(e){const{environment:t,spaceId:o}=e,n=await C().callApi({eventName:"disconnectMonday",environment:t,data:{spaceId:o}});"failed"===n.type?f().Qg(n):(w().kO(t,{integration_name:"monday.com"}),"success"===n.type&&I().A.setState({...I().A.state,account:void 0,workspaces:[]}))}async function O(e){const{environment:t,spaceId:o}=e;I().A.setState({...I().A.state,isLoadingMondayWorkspaces:!0});const n=await C().callApi({eventName:"getMondayWorkspaces",environment:t,data:{spaceId:o}});"success"===n.type&&I().A.setState({...I().A.state,workspaces:n.data.workspaces,isLoadingMondayWorkspaces:!1})}async function W(e){const{environment:t,spaceId:o,selectedWorkspace:n}=e;if(!o)return;I().A.setState({...I().A.state,isLoadingProjects:!0});const s=await C().callApi({eventName:"getMondayFoldersAndBoards",environment:t,data:{spaceId:o,selectedWorkspace:n}});"success"===s.type&&I().A.setState({...I().A.state,mondayFoldersAndBoards:s.data.mondayFoldersAndBoards,isLoadingProjects:!1})}function z({folderId:e,spaceId:t}){var o,n;const s=I().A.state.selectedProjectsAndTeamspaces;I().A.setState({...I().A.state,selectedProjectsAndTeamspaces:{...s,[e]:{projects:(null===(o=s[e])||void 0===o?void 0:o.projects)||[],notionTeamspaceId:t,isEntireFolderSelected:null===(n=s[e])||void 0===n?void 0:n.isEntireFolderSelected}}})}async function V(e){const{environment:t,spaceStore:o,currentSpaceViewStore:n,teamsStores:s,flowId:i}=e,{appTemplatesSetupActions:l,appConfigs:c}=await v().Aw.load(),p=I().A.state.selectedWorkspace;if(!p)return;I().A.setState({...I().A.state,templateCreationInProgress:!0});const u={},m={},g=[],f=new Set;try{for(const e in I().A.state.selectedProjectsAndTeamspaces){const i=I().A.state.selectedProjectsAndTeamspaces[e].projects;if(0===i.length)continue;let r;g.push(...i.map((e=>e.mondayProjectId)));const d=I().A.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:p}=d;if(!p)continue;f.add(p);const h=s.find((e=>e.id===d.notionTeamspaceId));if(r=h||o,!u[p]){const{serverCommitResult:e,performResult:o}=F().createAndCommit({environment:t,perform:e=>{var o;const s=a().tP,i=null===(o=(0,y().B)(c(),s))||void 0===o?void 0:o.uri;if(!i)return;const d=c().find((e=>e.uri===i));if(null==d?void 0:d.presets.find((e=>e.uri===s))){return l.initializeApp({environment:t,spaceViewStore:n,appParentStore:r,appUri:i,presetUri:s,transaction:e,from:"monday_import"})}return[]},canUndo:!0,userAction:"importActions.importMonday"});u[p]=o,await e}m.hasOwnProperty(p)?m[p]=[...m[p],{mondayFolderId:e,projects:i}]:m[p]=[{mondayFolderId:e,projects:i}]}}catch(R){return void I().A.setState({...I().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const x=[],k=j().default.state.sidebarSpaceViewStore;if(!k)return;const C=T().mD({environment:t,spaceStore:o,spaceViewStore:k,append:!0,mondayV2:(0,S().G)()});await C.deferred.promise;const P=C.pageId;I().A.setState({...I().A.state,loggerPageId:P});for(const[a,r]of Object.entries(m)){const e=u[a];e&&x.push({collectionViewBlocks:e.map((e=>({id:e.id,spaceId:(0,d().e)(o.id)}))),notionTeamSpaceId:a,mondayProjectsAndFolders:r})}w().Pd(t,{import_source:"monday",flowId:i,import_sub_type:"projectsAndTasksOnly"});const B=(0,M().UT)(t,h,{importParams:x,loggerPageId:P,spaceId:o.id,flowId:i,importId:A().R.getOrCreateImportId()},{spaceIds:[o.id]});I().A.setState({...I().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),b().A.reset(),p&&function(e,t,o){try{w().mM(e,{import_source:"monday",data:t,flowId:o})}catch(n){r().log({level:"error",from:"mondayActions",type:"parallelMondayImport",error:{miscDataString:JSON.stringify({error:n,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceId:p,projects:g,numberOfTeamspacesUsed:f.size,userId:t.currentUser.id,spaceId:(0,d().e)(o.id)},i);for await(const a of B){if(!I().A.state.isModalOpen)break;if(a.error)return void I().A.setState({...I().A.state,currentTab:"failure"});"success"===a.taskStatus&&I().A.setState({...I().A.state,currentTab:"confirm",result:a.value.status,isComplete:!0})}}async function U(e){const{environment:t,spaceId:o,selectedWorkspace:n}=e;I().A.setState({...I().A.state,isLoadingHierarchy:!0,isLoadingBoards:!0});try{const e=await C().callApi({eventName:"getMondayFoldersWithHierarchy",environment:t,data:{spaceId:o,selectedWorkspace:n},headers:{}});if("success"===e.type){const s=e.data.mondayFoldersDetailsMap;let a,i={},r=1,l=!0,c=I().A.getState();for(;l&&c.selectedWorkspace===n&&"FullImport"===c.selectedImportType&&!c.templateCreationInProgress;){const e=await C().callApi({eventName:"getMondayBoards",environment:t,data:{spaceId:o,selectedWorkspace:n,page:r},headers:{}});if("success"!==e.type){N();break}a=e.data.mondayBoardsDetailsMap,i={...i,...a},l=e.data.hasMoreBoards;for(const[t,o]of Object.entries(a))s[o.folderId].boards.push(t);I().A.setState({...I().A.state,isLoadingHierarchy:!1,fetchedHierarchy:!0,mondayBoardsDetailsMap:i,mondayFoldersDetailsMap:s}),r++,c=I().A.getState()}I().A.setState({...I().A.state,isLoadingBoards:!1})}else N()}catch(s){N()}}function N(){I().A.setState({...I().A.state,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1})}function H({folderId:e,notionTeamspaceId:t,notionRootTableName:o}){I().A.setState({...I().A.state,selectedTeamspacesForFullImport:{...I().A.state.selectedTeamspacesForFullImport,[e]:{notionTeamspaceId:t,notionRootTableName:o}}})}function q(e){const{mondayFolderDetails:t,currentfolderId:o}=e,n=[],s=[o];for(;s.length>0;){const e=s.pop();if(!e)continue;const o=t[e];if(o&&o.subFolders)for(const t of o.subFolders)n.push(t),s.push(t)}return n}function K(e){const{excludeProjectsAndTasks:t,board:o}=e;return t&&("task"===o.boardType||"project"===o.boardType)}function $(e){const{mondayFolderDetails:t,folderIds:o,excludeProjectsAndTasks:n,mondayBoardDetails:s}=e,a=[];for(;o.length>0;){const e=o.pop();if(!e)continue;const i=t[e];if(i&&i.boards)for(const t of i.boards)K({excludeProjectsAndTasks:n,board:s[t]})||a.push(t)}return a}function Y(e,t,o,n){return $({folderIds:[e,...q({currentfolderId:e,mondayFolderDetails:t})],mondayFolderDetails:t,mondayBoardDetails:o,excludeProjectsAndTasks:n}).length}function G(e,t,o,n,s){const a=$({folderIds:[e,...q({currentfolderId:e,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:s});let i=0;return a.forEach((e=>{t.has(e)&&(i+=1)})),i}async function J(e){const{environment:t,spaceStore:o,flowId:a,spaceViewStore:r}=e,d=I().A.state;if(!d.selectedWorkspace||!d.mondayFoldersDetailsMap)return;I().A.setState({...I().A.state,templateCreationInProgress:!0});const{selectedFolderIdsForFullImport:m,selectedBoardIdsForFullImport:h,mondayFoldersDetailsMap:y,mondayBoardsDetailsMap:v,excludeProjectsAndTasks:S}=d,j=Object.entries(d.mondayFoldersDetailsMap).flatMap((([e,t])=>t.parent?[]:[e])),C=new Map,P={notionTeamspaceId:o.getSpaceId(),notionRootTableName:p().NX},F=(e,t,o)=>{o.forEach((t=>{const o=m.has(t),n=y[t];if(o){const o={id:t,name:n.folderName,boards:[],folders:[]};F(o,n.boards,n.subFolders),e.folders.push(o)}else F(e,n.boards,n.subFolders)})),t.forEach((t=>{if(!h.has(t))return;const o=v[t];e.boards.push({id:t,name:o.name})}))};try{for(;j.length;){const e=j.pop();if(!e)break;const t=y[e];if(m.has(e)&&"null"!==e){const t=y[e],o={id:e,name:t.folderName,boards:[],folders:[]};F(o,t.boards,t.subFolders);const n=Z(e,P),s=C.get(n)??{boards:new Array,folders:new Array};s.folders.push(o),C.set(n,s)}else{for(const e of t.boards){if(!h.has(e))continue;const o=v[e],n=Z(t.folderId,P),s=C.get(n)??{boards:new Array,folders:new Array},a={id:e,name:o.name};s.boards.push(a),C.set(n,s)}j.push(...t.subFolders)}}}catch(L){return void I().A.setState({...I().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const R=Array.from(C.entries(),(([e,t])=>({notionRootTableId:e.notionTeamspaceId,notionRootTableName:e.notionRootTableName,mondayBoards:t.boards,mondayFolders:t.folders}))),D=T().mD({environment:t,spaceStore:o,spaceViewStore:r,append:!0,mondayV2:!0});await D.deferred.promise;const _=D.pageId;I().A.setState({...I().A.state,loggerPageId:_}),w().Pd(t,{import_source:"monday",flowId:a,import_sub_type:"fullImport"});try{const e=(0,M().UT)(t,g,{importParams:R,loggerPageId:_,spaceId:o.id,flowId:a,excludeProjectsAndTasks:S,importId:A().R.getOrCreateImportId()},{spaceIds:[o.id]});I().A.setState({...I().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),b().A.reset();for await(const t of e){if(!I().A.state.isModalOpen)break;if(t.error)throw I().A.setState({...I().A.state,currentTab:"failure",loggerPageId:_}),t.error}}catch(E){const e=E instanceof l().X5?E.body.clientData:void 0;if(e&&"code"in e&&"mondayImportError"===e.code){const e=x().A.formatMessage(T().DZ.importFailedWithError,{error:(0,u().A)(E).message});f().f1(e)}throw new Error((0,u().A)(E).message)}(0,B().navigate)({url:(0,i().A)({pageId:_,pageModel:t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:c().ev,id:_},userId:t.currentUser.id}),baseUrl:n().A.domainBaseUrl,pageVisitSource:s().y8.Import}),environment:t}),I().A.resetImport(),k().A.reset()}function Z(e,t){const{selectedTeamspacesForFullImport:o,mondayFoldersDetailsMap:n}=I().A.state;let s=e;for(;s;){var a;if(s in o)return o[s];s=null===(a=n[s])||void 0===a?void 0:a.parent}return t}function Q(e){const t=new Set(I().A.state.selectedBoardIdsForFullImport);t.has(e)?t.delete(e):t.add(e),I().A.setState({...I().A.state,selectedBoardIdsForFullImport:t})}function X(e,t,o,n){const s=I().A.state.selectedFolderIdsForFullImport.has(e);!function(e){const{mondayFolderDetails:t,currentfolderId:o,select:n,mondayBoardDetails:s,excludeProjectsAndTasks:a}=e,i=q({currentfolderId:o,mondayFolderDetails:t}),r=$({folderIds:[o,...i],mondayFolderDetails:t,mondayBoardDetails:s,excludeProjectsAndTasks:a}),{selectedFolderIdsForFullImport:l,selectedBoardIdsForFullImport:c}=I().A.state,d=(e,t)=>{t.forEach((t=>{n?e.add(t):e.delete(t)}))};d(l,i),d(c,r),I().A.setState({...I().A.state,selectedBoardIdsForFullImport:c,selectedFolderIdsForFullImport:l})}({currentfolderId:e,mondayFolderDetails:t,mondayBoardDetails:o,select:!s,excludeProjectsAndTasks:n});const a=new Set(I().A.state.selectedFolderIdsForFullImport);s?a.delete(e):a.add(e),I().A.setState({...I().A.state,selectedFolderIdsForFullImport:a})}function ee(e){const{currentfolderId:t,mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:s}=e,a=$({folderIds:[t,...q({currentfolderId:t,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:s});let i=!1;return a.forEach((e=>{K({excludeProjectsAndTasks:s,board:n[e]})||(i=!0)})),i}},412532:(e,t,o)=>{o.d(t,{l:()=>s});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.03 2.29 11.93 10.46",svg:(0,o(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},s=(0,o(340498).wt)("arrowCaretUpFillSmall",n)},417399:(e,t,o)=>{o.d(t,{A:()=>V,h:()=>z});o(581454);var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(401497),r=()=>o(869190),l=()=>o(69708),c=()=>o(512062),d=()=>o(284371),p=()=>o(559506),u=()=>o(972435),m=()=>o(765957),g=()=>o(92513),h=()=>o(372555),f=()=>o(404141),y=()=>o(297872),v=()=>o(676007),x=o(474848);const S=function({fetchActiveImportTasks:e,analyticsFrom:t}){const s=(0,a().O$)(g().A),{isModalOpen:i}=s,r=(0,n.useCallback)((()=>{g().A.resetImport()}),[]),l=(0,n.useCallback)((()=>{const{currentTab:n}=s;return(0,x.jsx)(o(136480).A,{fetchActiveImportTasks:e,tab:n,analyticsFrom:t})}),[s,e,t]);return(0,x.jsx)(v().a,{open:i,innerStyle:{height:"calc(100vh - 100px)",overflow:"hidden",maxHeight:675,borderRadius:12,width:900},render:()=>(0,x.jsx)(y().A,{capture:!0,allowEsc:!0,render:()=>l()}),onDismiss:r})};var j=()=>o(89383),A=()=>o(509778),b=(o(944114),o(898992),o(354520),()=>o(631524)),I=()=>o(160432),k=()=>o(493552),w=()=>o(471095),C=()=>o(617668),M=()=>o(654534),T=()=>o(848237),P=()=>o(898808),B=()=>o(125565),F=()=>o(453529),R=()=>o(21140);const D={privateSpaceLabel:{id:"confluenceMultiSpaceImport.teamspaceMapper.privateSpace",defaultMessage:"Private",description:"Label for private space option"},newTeamspaceLabel:{id:"confluenceMultiSpaceImport.teamspaceMapper.newTeamspace",defaultMessage:"Create new teamspace",description:"Label for creating new teamspace option"},mappingTitle:{id:"confluenceMultiSpaceImport.teamspaceMapper.title",defaultMessage:"Choose where to import each Confluence space",description:"Title for teamspace mapping step"},mappingDescription:{id:"confluenceMultiSpaceImport.teamspaceMapper.description",defaultMessage:"Each Confluence space will be imported into the Notion teamspace you choose.",description:"Description for teamspace mapping step"},cancelButton:{id:"confluenceMultiSpaceImport.teamspaceMapper.cancel",defaultMessage:"Cancel",description:"Cancel button text"},importButton:{id:"confluenceMultiSpaceImport.teamspaceMapper.import",defaultMessage:"Import {count, plural, one {# space} other {# spaces}}",description:"Import button text with count"},accessNote:{id:"confluenceMultiSpaceImport.teamspaceMapper.accessNote",defaultMessage:"Imported content will be accessible to all users who have access to the selected teamspace.",description:"Note about teamspace access permissions for imported content"}};function _({analyticsFrom:e}){const t=(0,s().v3)(),o=(0,l().tz)(),{selectedSpaces:i,spaceToTeamspaceMapping:r}=(0,a().O$)(A().Q),c=(0,a().K8)((()=>{var e;const t=null===(e=m().default.state.sidebarSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,x.jsx)(P().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)),n=[];return t&&n.push(...t.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name||""}}))),n.push({key:"private",searchTerm:["private"],icon:(0,w().i)({width:16,height:16}),name:o.formatMessage(D.privateSpaceLabel)}),n.push({key:"create",searchTerm:["new","create"],icon:(0,C().plusIcon)({width:16,height:16}),name:o.formatMessage(D.newTeamspaceLabel)}),n}),[o]),d=(0,n.useCallback)(((e,t)=>{if("create"===t)return void T().vn("confluence_importer",{onClose:t=>{j().a6({confluenceSpaceId:e,notionTeamspaceId:t})}});const o="private"===t?null:t;j().a6({confluenceSpaceId:e,notionTeamspaceId:o})}),[]),p=(0,n.useCallback)((()=>{j().Oo()}),[]),u=(0,n.useCallback)((async()=>{var e;const o=null===(e=m().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getSpaceStore(),n=m().default.state.sidebarSpaceViewStore;o&&n&&await j().DJ({environment:t,spaceStore:o,spaceViewStore:n})}),[t]),g=(0,a().K8)((()=>(0,M().u7)()),[]),h=(0,a().K8)((()=>(0,M().oX)()),[]);return(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,x.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:24,paddingBottom:0},children:[(0,x.jsxs)("div",{style:{marginBottom:24},children:[(0,x.jsx)("div",{style:{marginBottom:8},children:(0,x.jsx)(k().D,{styleKey:"Title-sm/Semibold",children:(0,x.jsx)(l().sA,{...D.mappingTitle})})}),(0,x.jsx)("div",{style:{marginBottom:8},children:(0,x.jsx)(k().D,{styleKey:"Body/Regular",colorVariant:"secondary",children:(0,x.jsx)(l().sA,{...D.mappingDescription})})}),(0,x.jsx)("div",{style:{paddingTop:4,paddingBottom:20},children:(0,x.jsx)(k().D,{styleKey:"Body/Regular",colorVariant:"tertiary",children:(0,x.jsx)(l().sA,{...D.accessNote})})})]}),(0,x.jsx)("div",{style:{marginBottom:24},children:i.map((e=>(0,x.jsx)(L,{confluenceSpace:e,currentMapping:r[e.id],teamspaceOptions:c,onTeamspaceSelect:t=>d(e.id,t)},e.id)))})]}),(0,x.jsx)("div",{style:{borderTop:"1px solid rgba(55, 53, 47, 0.09)",padding:24,paddingTop:16},children:(0,x.jsxs)(R().Ye,{justifyContent:"space-between",alignItems:"center",children:[(0,x.jsx)(b().p,{onClick:p,children:(0,x.jsx)(l().sA,{...D.cancelButton})}),(0,x.jsx)(I().A,{colorPalette:"blue",onClick:u,disabled:!h,children:(0,x.jsx)(l().sA,{...D.importButton,values:{count:g}})})]})})]})}function L({confluenceSpace:e,currentMapping:t,teamspaceOptions:o,onTeamspaceSelect:n}){return(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 0",borderBottom:"1px solid rgba(55, 53, 47, 0.09)"},children:[(0,x.jsxs)("div",{style:{flex:1},children:[(0,x.jsxs)(R().Ye,{alignItems:"center",gap:8,children:[(0,x.jsx)(k().D,{styleKey:"Body/Semibold",children:e.name}),void 0!==e.count?(0,x.jsxs)(B().A,{isSmall:!0,children:[e.count," ","pages"]}):void 0]}),(0,x.jsx)("div",{style:{marginTop:4},children:(0,x.jsx)(k().D,{styleKey:"Caption/Regular",colorVariant:"secondary",children:e.key})})]}),(0,x.jsx)("div",{style:{flex:1},children:(0,x.jsx)(F().cz,{onSelectOption:n,options:o,currentOption:(()=>{const e=null==t?void 0:t.notionTeamspaceId;if(void 0!==e)return null===e?"private":e})(),style:"full"})})]})}function E({analyticsFrom:e}){const t=(0,l().tz)(),o=(0,a().K8)((()=>A().Q.state.isModalOpen),[]),s=(0,n.useCallback)((()=>{j().Oo(),A().Q.resetImport()}),[]),i=(0,n.useCallback)((()=>(0,x.jsx)(_,{analyticsFrom:e})),[e]);return(0,x.jsx)(v().a,{ariaLabel:t.formatMessage({id:"confluenceMultiSpaceImportModal.modal.ariaLabel",defaultMessage:"Confluence multi-space import modal"}),open:o,showCloseIcon:!0,innerStyle:{width:900,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:675},render:()=>(0,x.jsx)(y().A,{capture:!0,allowEsc:!0,render:()=>i()}),onDismiss:s})}var O=()=>o(479199);const W=function({fetchActiveImportTasks:e,analyticsFrom:t}){const s=(0,a().O$)(O().A),i=(0,n.useCallback)((()=>{O().A.resetImport()}),[]),r=(0,a().K8)((()=>(0,o(397292).G)()),[]),c=(0,n.useCallback)((()=>{let{currentTab:n}=s;return r?"selectData"===n&&(n="chooseWorkspace"):O().A.setState({...s,selectedImportType:"ProjectsAndTasks"}),(0,x.jsx)(o(468093).A,{fetchActiveImportTasks:e,tab:n,analyticsFrom:t})}),[r,e,s,t]),d=(0,l().tz)();return(0,x.jsx)(v().a,{ariaLabel:d.formatMessage({id:"mondayImportModal.modal.ariaLabel",defaultMessage:"Monday import modal"}),open:s.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675,...r?{borderRadius:12,width:900}:{}},render:()=>(0,x.jsx)(y().A,{capture:!0,allowEsc:!0,render:()=>c()}),onDismiss:i})};const z=(0,l().YK)({tabTitle:{id:"importsTab.title",defaultMessage:"Import data"},importOrMigrateTitle:{id:"importsTab.importOrMigrateTitle",defaultMessage:"Import or migrate"},tabSubtitle:{id:"importsTab.subtitle",defaultMessage:"Import data from other apps and files into Notion"},unsupportedImportsHelperText:{id:"importsTab.unsupportedImportsHelperText",defaultMessage:"If your data is located somewhere we donâ€™t support yet, you can try importing it via CSV file."},zipImportTitle:{id:"importsTab.zipImport.title",defaultMessage:"Donâ€™t see the app you use? Import a ZIP file, and Notion will convert DOCX, CSV, Text, Markdown, HTML and EPUB files into Notion pages."},activeImportsAndSyncsTitle:{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"},activeImportsTitle:{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"},activeImportsImportTime:{id:"importsTab.activeImports.importTime",defaultMessage:"Time"},activeImportsImportFrom:{id:"importsTab.activeImports.importFrom",defaultMessage:"From"},activeImportsImportStatus:{id:"importsTab.activeImports.importStatus",defaultMessage:"Status"},activeImportsTableNoActiveImports:{id:"importsTab.activeImportsTable.noActiveImports",defaultMessage:"There are no ongoing imports associated with your account."},activeImportsStatusInProgress:{id:"activeImports.status.inProgress",defaultMessage:"In progress"}}),V=function(e){const{sidebarSpaceStore:t,mainEditorCurrentBlockStore:y,sidebarSpaceViewStore:v,currentUserSettingsStore:j}=(0,a().K8)((()=>({sidebarSpaceStore:m().default.state.sidebarSpaceStore,mainEditorCurrentBlockStore:m().default.state.mainEditorCurrentBlockStore,sidebarSpaceViewStore:m().default.state.sidebarSpaceViewStore,currentUserSettingsStore:m().default.state.currentUserSettingsStore})),[]),A=(0,a().K8)((()=>f().A.state.openedFrom),[]),b=(0,a().K8)((()=>g().A.state.isAccountLinkingInProgress),[]),I=(0,a().K8)((()=>h().A.state.linkingAccount),[]),k=A??"modal",w=(0,s().v3)(),C=w.device.isMobile,M=(0,l().tz)(),T="dark"===(0,i().eP)(),[P,F]=(0,n.useState)([]),R=(0,n.useCallback)((async()=>{if(null==t||!t.id)return;const e=await p().callApi({eventName:"getActiveImportTasks",environment:w,data:{spaceId:t.id}});"success"===e.type&&F(e.data)}),[t,w]);(0,n.useEffect)((()=>{R().catch((()=>{}));const e=setInterval(R,6e4);return()=>clearInterval(e)}),[t,w,R]),(0,n.useEffect)((()=>{let e;const t=async n=>{const s=await p().callApi({eventName:"getAsanaWorkspacesNames",environment:w,data:{}});if(n+=1,"success"===s.type)if(null!=s&&s.data.account){var a;g().A.setState({...g().A.state,account:s.data.account,workspaces:s.data.workspaces,isLoadingAsanaWorkspaces:!1,isAccountLinkingInProgress:!1,currentTab:"selectData",selectedWorkspace:(null===(a=s.data)||void 0===a||null===(a=a.workspaces[0])||void 0===a?void 0:a.gid)||void 0,isModalOpen:!0})}else{if(n>o)return;e=setTimeout((()=>t(n)),2e3)}},o=180;if(b){t(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[b,w]),(0,o(187174).Yb)((async()=>{let e;const t=async s=>{var a;const i=await p().callApi({eventName:"getEvernoteAccount",environment:w,data:{}});if(s+=1,"success"===i.type)if(null!=i&&i.data&&null!==(a=i.data)&&void 0!==a&&a.userInfo){h().A.setState({...h().A.state,isFetchingNotebooks:!0,showLoader:!0,linkingAccount:!1});const e=await p().callApi({eventName:"getEvernoteNotebooks",environment:w,data:{}});"success"===e.type&&h().A.setState({...h().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1}),o(113507).A.setState({open:!0})}else{if(s>n)return;e=setTimeout((async()=>await t(s)),2e3)}},n=180;if(I){const e=0;await t(e).catch((()=>{}))}return()=>{clearTimeout(e)}}),[I,w]);const D=(0,i().IS)((e=>({activeImportAndSyncTitle:{fontSize:d().J.UIRegular.mobile,fontWeight:d().Wy.medium,lineHeight:d().K_.UIRegular.mobile},arrowDownIcon:{width:11,height:12,gap:10,radius:3,fill:"#ACABA9"},activeImportsStatusTimeDiv:{display:"flex",alignItems:"center",flexDirection:"row",gap:4},importTabSubtitle:{display:"flex",alignItems:"center",gap:6},importLearnMoreLink:{color:e.blue.text.accentPrimary,fontSize:14,fontWeight:500}})),[]),_=(0,x.jsx)(l().sA,{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"}),L=(e,t,n)=>{o(559926).eH(w,{from:k,import_source:t,flowId:n}),o(857783).uK({environment:w,store:e,pageVisitSource:o(584262).y8.Import}),f().A.reset()};return t&&v&&v&&j?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o(8178).A,{large:!C||void 0,divider:C?void 0:"full",children:M.formatMessage(z.importOrMigrateTitle)}),(0,x.jsxs)("div",{style:D.importTabSubtitle,children:[(0,x.jsx)(B().A,{isSecondaryColor:!0,children:M.formatMessage(z.tabSubtitle)}),(0,x.jsx)(o(97294).N,{style:D.importLearnMoreLink,href:"https://www.notion.com/help/import-data-into-notion",metaHref:"https://www.notion.com/help/import-data-into-notion",external:!0,children:(0,x.jsx)(l().sA,{id:"importsTab.learnMoreCta",defaultMessage:"Learn more",values:{boldtext:e=>(0,x.jsx)("span",{style:{fontWeight:500},children:e})}})})]}),(0,x.jsxs)("div",{style:{marginTop:16,width:"100%",overflow:"hidden"},children:[(0,x.jsx)(o(633783).A,{pageStore:y,spaceStore:t,spaceViewStore:v,userSettingsStore:j,analyticsFrom:k,onComplete:L,readOnlyCreditButton:!1}),(0,x.jsx)(S,{fetchActiveImportTasks:R,analyticsFrom:k}),(0,x.jsx)(E,{analyticsFrom:k}),(0,x.jsx)(W,{fetchActiveImportTasks:R,analyticsFrom:k}),(0,x.jsx)(o(296402).CsvImportModal,{pageStore:y,spaceStore:t,spaceViewStore:v,analyticsFrom:k})]}),e.zipImporterEnabled?(0,x.jsx)("div",{style:{marginTop:18,width:"100%",gap:10,overflow:"hidden"},children:(0,x.jsx)(o(894612).A,{onComplete:L,analyticsFrom:k})}):void 0,(null==P?void 0:P.length)>0?(0,x.jsxs)("div",{style:{marginTop:32},children:[(0,x.jsx)(B().A,{isMultiline:!0,style:D.activeImportAndSyncTitle,children:_}),(0,x.jsx)(o(317182).A,{tableStyle:{borderTop:0},columns:[{key:"importTime",header:(0,x.jsxs)("div",{style:D.activeImportsStatusTimeDiv,children:[M.formatMessage(z.activeImportsImportTime),(0,o(158359).P)(D.arrowDownIcon)]})},{key:"importFrom",header:M.formatMessage(z.activeImportsImportFrom)},{key:"importStatus",header:M.formatMessage(z.activeImportsImportStatus)}],rows:P.map((e=>({key:`table-${e.taskId}`,columns:[e.startedAt?`${(0,r().W_)(e.startedAt,"long",u().A.getIntl().locale)} ${(0,r().W_)(e.startedAt,"time",u().A.getIntl().locale)}`:"",(0,o(496603).ZH)(e.source),(0,x.jsx)(o(881690).A,{isRound:!0,showRemoveButton:!1,value:(0,x.jsx)(B().A,{children:M.formatMessage(z.activeImportsStatusInProgress)}),backgroundColor:T?c().M.dark.blue[200]:c().M.light.blue[200],showColoredDot:"blue",format:o(784892).NY.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),P.length?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)(B().A,{isSmall:!0,style:{marginTop:16},children:M.formatMessage(z.activeImportsTableNoActiveImports)})]}):(0,x.jsx)(x.Fragment,{})]}):null}},423173:(e,t,o)=>{o.r(t),o.d(t,{giphyTintableIcon:()=>s,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.49 0.36 15 19.29",svg:(0,o(474848).jsx)("path",{fillRule:"evenodd",d:"M13.208 2.507h2.143v2.142h2.142v15h-15V.364h10.715zm-8.571 15H15.35V6.793h-4.286V2.507H4.637z",clipRule:"evenodd"})},s=(0,o(340498).wt)("giphyTintable",n)},424139:(e,t,o)=>{o.r(t),o.d(t,{emojiFaceIcon:()=>a,iconDefinition:()=>s});o(296540);var n=o(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},a=(0,o(340498).wt)("emojiFace",s)},426077:(e,t,o)=>{o.d(t,{S:()=>s});var n=()=>o(44551);function s(){var e;null===n().electronApi||void 0===n().electronApi||null===(e=n().electronApi.openQuickSearchShortcutSetting)||void 0===e||e.call(n().electronApi)}},453529:(e,t,o)=>{o.d(t,{Ar:()=>R,Ay:()=>_,cz:()=>F});o(944114),o(898992),o(354520),o(581454),o(908872),o(844751);var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(401497),r=()=>o(631524),l=()=>o(158359),c=()=>o(452951),d=()=>o(449552),p=()=>o(464699),u=()=>o(69708),m=()=>o(512062),g=()=>o(534177),h=()=>o(284371),f=()=>o(696977),y=()=>o(765957),v=()=>o(92513),x=()=>o(848237),S=()=>o(898808),j=()=>o(255043),A=()=>o(249117),b=()=>o(710149),I=()=>o(125565),k=()=>o(21140),w=()=>o(709438),C=()=>o(936996),M=o(474848);const T=(0,u().YK)({selectWorkspace:{id:"asanaImporter.chooseWorkspace.chooseWorkspacePlaceholder",defaultMessage:"Choose a workspace"},selectProjectHeading:{id:"asanaImport.importsTab.chooseWorkspace.selectProjects",defaultMessage:"Choose projects to import"},mapTeamspacesDescription:{id:"asanaImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Asana team a Notion teamspace to collaborate in. Each teamspace has a Projects database, where your imported projects will live."},chooseTeamspaceOption:{id:"asanaImport.importsTab.chooseWorkspace.selectTeamspace",defaultMessage:"Choose a teamspace"},filterTeams:{id:"asanaImport.importsTab.chooseWorkspace.filterTeams",defaultMessage:"Filter teamspaces..."},filterWorkspaces:{id:"asanaImport.importsTab.chooseWorkspace.searchAsanaWorkspaces",defaultMessage:"Filter workspaces..."},newTeamspaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"},completedProjectLabel:{id:"asanaImport.importsTab.chooseWorkspace.completedHelperText",defaultMessage:" (Completed)"}});function P({asanaTeam:e}){const t=R(),o=(0,u().tz)(),s=(0,a().K8)((()=>v().A.getState()),[]),i=(0,a().K8)((()=>{var e;const n=null===(e=y().default.state.sidebarSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,M.jsx)(S().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)),s=[];return n&&s.push(...n.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),s.push({key:"private",searchTerm:["private"],icon:(0,d().g)(t.lockedIcon),name:o.formatMessage(T.privateSpaceLabel)}),s.push({key:"create",searchTerm:["New"],icon:(0,p().b)(t.plusIcon),name:o.formatMessage(T.newTeamspaceLabel)}),s}),[o,t.lockedIcon,t.plusIcon]),{importCompletedTasks:r,selectedProjectsAndTeamspaces:l}=s,c=(0,n.useMemo)((()=>l[e.gid]||{projects:[],notionTeamspaceId:void 0}),[l,e.gid]),[m,g]=(0,n.useState)(c.notionTeamspaceId),h=(0,a().K8)((()=>{var e;return null===(e=y().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.id}),[]),j=(0,n.useCallback)((t=>{if(m===t)return f().$8({teamId:e.gid,spaceId:null}),void g(void 0);if("create"===t)return void x().vn("asana_importer",{onClose:t=>{f().$8({teamId:e.gid,spaceId:t}),g(t)}});let o;if("private"===t){if(!h)return;o=h}else o=t;f().$8({teamId:e.gid,spaceId:o}),g(t)}),[h,e.gid,m]),b=(0,n.useCallback)((t=>{const o={...l[e.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:n,projects:a}=o;let i=a;"all"===i&&(i=e.projects.map((e=>e.gid))),"in_complete"===i&&(i=e.projects.filter((e=>!e.completed)).map((e=>e.gid))),i=i.includes(t.gid)?i.filter((e=>e!==t.gid)):i.concat(t.gid),v().A.setState({...s,selectedProjectsAndTeamspaces:{...l,[e.gid]:{notionTeamspaceId:n,projects:i}}})}),[e.gid,e.projects,s,l]),k=(0,n.useMemo)((()=>{const{projects:t}=c;return 0!==t.length&&(t.length===e.projects.length||"partial")}),[c,e.projects]),w=(0,n.useCallback)((()=>{var t;let o=[];0===c.projects.length?(o=e.projects.filter((e=>!e.completed)).map((e=>e.gid)),0===o.length&&(o=e.projects.map((e=>e.gid)))):o=c.projects.length===e.projects.length?[]:e.projects.map((e=>e.gid)),v().A.setState({...s,selectedProjectsAndTeamspaces:{...l,[e.gid]:{notionTeamspaceId:null===(t=l[e.gid])||void 0===t?void 0:t.notionTeamspaceId,projects:o}}})}),[c.projects,e.projects,e.gid,s,l]),C=(0,n.useMemo)((()=>{const t=s.importCompletedTasks;let o=e.projects;return"in_complete"===c.projects?o=o.filter((e=>!e.completed)):"all"!==c.projects&&c.projects.length!==o.length&&(o=o.filter((e=>c.projects.includes(e.gid)))),{projects:o.length,tasks:o.reduce(((e,o)=>e+(t?o.task_counts.num_tasks:o.task_counts.num_incomplete_tasks)),0)}}),[c.projects,e.projects,s.importCompletedTasks]),[P,D]=(0,n.useState)(!1);return(0,M.jsx)("div",{style:t.asanaTeamSectionContainer,children:(0,M.jsxs)(A().xA,{gap:8,children:[(0,M.jsx)(A().LX,{row:1,col:1,children:(0,M.jsx)("div",{style:t.teamAndProjectsCollapse,children:(0,M.jsx)(B,{team:e,importCompletedTasks:r,collapsed:P,onToggle:()=>D((e=>!e)),checked:e=>"all"===c.projects||"in_complete"===c.projects&&!1===e.completed||c.projects.includes(e.gid),onSelectProject:b,onSelectGroup:w,groupCheckState:k})})}),(0,M.jsx)(A().LX,{row:1,col:2,children:(0,M.jsx)(F,{onSelectOption:j,options:i,currentOption:m,style:P?"compact":"full",children:(0,M.jsx)(I().A,{style:{fontSize:"14px",paddingInlineStart:P?"8px":0},children:(0,M.jsx)(u().sA,{id:"asanaImport.importsTab.chooseWorkspace.totalProjectsAndTasks",defaultMessage:"Import {nProjects} projects, {nTasks} tasks to",values:{nProjects:C.projects,nTasks:C.tasks}})})})})]})})}function B({team:e,collapsed:t,onToggle:o,importCompletedTasks:a,onSelectProject:i,onSelectGroup:c,groupCheckState:d,checked:p}){const h=R(),y=(0,u().tz)(),v=(0,s().v3)(),[x,S]=(0,n.useState)(!1);return(0,M.jsx)(C().A,{getIdentifier:e=>e.gid,onSelectRow:i,rows:e.projects,loadMoreButton:(0,g().O9)(e.nextPage)&&(0,M.jsx)(r().p,{style:{padding:0,width:"60%",height:20},hoveredStyle:{background:"transparent"},onClick:async()=>{S(!0),await f().Oh({team:e,environment:v}),S(!1)},children:x?(0,M.jsx)(b().A,{style:{height:14,width:"100%"}}):(0,M.jsxs)(M.Fragment,{children:[(0,l().P)(h.loadMoreArrowStyles),(0,M.jsx)(I().A,{style:h.loadMoreLabel,children:(0,M.jsx)(u().sA,{id:"asanaImport.importsTab.chooseWorkspace.loadMoreProjects",defaultMessage:"Load more projects"})})]})}),title:(0,M.jsx)("div",{style:{lineHeight:"20px",fontSize:"14px"},children:e.name}),renderRow:e=>(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w().m,{color:e.color,size:14,style:{borderRadius:"15%"}}),(0,M.jsxs)(I().A,{style:{...e.completed?h.projectNameCompleted:{},maxWidth:220},children:[e.name,e.completed?y.formatMessage(T.completedProjectLabel):void 0]}),(0,M.jsxs)(I().A,{isSmall:!0,style:{color:m().M.light.gray[400]},children:[a?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,M.jsx)(u().sA,{id:"asanaImport.importsTab.chooseWorkspace.tasksHelperText",defaultMessage:" tasks"})]})]}),onToggleGroup:o,onSelectGroup:c,collapsed:t,groupCheckedState:d,rowCheckedState:p})}function F({onSelectOption:e,options:t,currentOption:o,children:n,style:s}){const a=(0,u().tz)(),i=R();return(0,M.jsxs)(k().Ye,{flexDirection:"compact"===s?"row":"column",alignItems:"center",justifyContent:"center",style:i.teamSpaceContainer,children:[(0,c().Z)(i.arrowIconStyles),n,(0,M.jsx)(j().r,{onSelectOption:e,options:t,iconOnly:"compact"===s,currentOption:o,placeHolder:a.formatMessage(T.chooseTeamspaceOption),searchThreshold:5,menuProps:{maxWidth:300,maxHeight:400,left:50},inputProps:{placeholder:a.formatMessage(T.filterTeams)},selectorButtonStyle:"teamspace"})]})}function R(){return(0,i().IS)((e=>({loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6},workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${m().M.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},projectNameCompleted:{color:e.text.tertiary},menuChevonDownIcon:{width:12,height:12,marginInlineStart:4,fill:e.icon.tertiary},plusIcon:{color:e.icon.secondary,width:16,height:16},lockedIcon:{color:e.icon.secondary,width:12.5,height:12.5},asanaTeamSectionContainer:{marginBottom:20},teamAndProjectsCollapse:{paddingTop:8,paddingBottom:8},teamSpaceContainer:{height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:"8px 2px",gap:8,position:"relative"},arrowIconStyles:{position:"absolute",top:"50%",insetInlineStart:0,transform:"translate(-64%, -50%)",width:12,height:28,color:e.selectLightGray[700],backgroundColor:e.background.elevated},loadMoreLabel:{color:e.selectLightGray[700]},loadMoreArrowStyles:{width:12,color:e.selectLightGray[700],marginInlineEnd:8,marginInlineStart:1},teamSpaceLabel:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:m().M.light.gray[75]}})),[])}function D(){const e=R();return(0,M.jsxs)(A().xA,{gap:8,children:[(0,M.jsxs)(A().LX,{row:1,col:1,children:[(0,M.jsxs)(k().Ye,{style:{paddingInlineStart:6,paddingInlineEnd:8,...e.loadingRow},children:[(0,M.jsx)(b().A,{style:{height:14,width:34}}),(0,M.jsx)(b().A,{style:{height:14,width:200}})]}),(0,M.jsx)(b().A,{style:{marginInlineStart:40,marginTop:10,height:14,width:180}}),(0,M.jsx)(b().A,{style:{marginInlineStart:40,marginTop:12,height:14,width:240}})]}),(0,M.jsx)(A().LX,{row:1,col:2,children:(0,M.jsxs)(k().Ye,{flexDirection:"column",alignItems:"center",children:[(0,M.jsx)(b().A,{style:{marginInlineStart:40,marginTop:12,height:14,width:200}}),(0,M.jsx)(b().A,{style:{marginInlineStart:40,marginTop:12,height:14,width:140}})]})})]})}const _=function(){const e=(0,s().v3)(),t=(0,u().tz)(),i=(0,a().K8)((()=>v().A.getState()),[]),{isLoadingProjects:r,selectedWorkspace:l,teamsAndProjects:c,workspaces:d}=i;return(0,n.useEffect)((()=>{l&&f().D5({selectedWorkspace:l,environment:e}).catch((()=>{}))}),[l,e]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(k().Ye,{alignItems:"center",gap:8,children:[(0,M.jsx)("img",{src:o(148307).A.images.import.asanaPng,width:16,height:16}),(0,M.jsx)(j().r,{searchThreshold:5,onSelectOption:e=>{v().A.setState({...i,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:d.map((e=>({key:e.gid,name:e.name,searchTerm:e.name.split(" ")}))),currentOption:l,placeHolder:t.formatMessage(T.selectWorkspace),inputProps:{placeholder:t.formatMessage(T.filterWorkspaces)},selectorButtonStyle:"workspace"})]}),l?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(I().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,M.jsx)(u().sA,{...T.selectProjectHeading})}),(0,M.jsx)(I().A,{style:{font:"SF Pro",fontWeight:h().Wy.regular,fontSize:h().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:(0,M.jsx)(u().sA,{...T.mapTeamspacesDescription})})]}):void 0,r?(0,M.jsx)(D,{}):c.filter((e=>0!==e.projects.length)).map((e=>(0,M.jsx)(P,{asanaTeam:e},`${e.gid}-table`)))]})}},464699:(e,t,o)=>{o.d(t,{b:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},468093:(e,t,o)=>{o.d(t,{W:()=>pe,A:()=>ue});o(898992),o(672577),o(581454),o(737550);var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(401497),r=()=>o(98126),l=()=>o(406094),c=()=>o(160432),d=()=>o(148307),p=()=>o(69708),u=()=>o(284371),m=()=>o(388416),g=()=>o(435761),h=()=>o(765957),f=()=>o(479199),y=()=>o(125565),v=()=>o(690197),x=(o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),()=>o(21140)),S=(o(354520),o(908872),()=>o(252291)),j=()=>o(729108),A=()=>o(631524),b=()=>o(124858),I=()=>o(449552),k=()=>o(464699),w=()=>o(948316),C=()=>o(100622),M=()=>o(512062),T=()=>o(848237),P=()=>o(898808),B=()=>o(249117),F=()=>o(859428),R=()=>o(453529),D=()=>o(412532),_=()=>o(452951),L=()=>o(152197),E=()=>o(285790),O=()=>o(668725),W=()=>o(722872),z=()=>o(760217),V=()=>o(406699),U=()=>o(404277),N=()=>o(939740),H=()=>o(89924),q=o(474848);const K=function(){const e=(0,s().v3)(),t=(0,p().tz)(),o=(0,L().r)(),i=(0,a().K8)((()=>f().A.getState()),[]),{workspaces:r,selectedWorkspace:l,selectedImportType:c}=i;return(0,n.useEffect)((()=>{}),[c,l,e,o]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,q.jsx)($,{onSelectOption:e=>{f().A.setState({...i,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:r.map((e=>({key:e.id,label:e.name}))),currentOption:i.selectedWorkspace,placeHolder:t.formatMessage(m().$b.selectWorkSpaceV1)}),(0,q.jsx)(G,{})]})};function $(e){var t;const{onSelectOption:o,options:s,currentOption:a,placeHolder:r,narrow:l,allowSearch:c,shouldBeDisabled:d}=e,g=(0,p().tz)(),[h,f]=(0,n.useState)(""),v=null===(t=s.find((({key:e})=>e===a)))||void 0===t?void 0:t.label,x=(0,i().IS)((e=>({icon:{width:12,height:12,marginInlineStart:4,fill:e.icon.tertiary}})),[]);return(0,q.jsx)(V().A,{popupType:V().z.Popup,placementToOrigin:"bottom",disabled:d,renderOrigin:e=>(0,q.jsxs)(A().p,{...e,style:{paddingTop:l?2:8,paddingBottom:l?2:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:250,border:`1px solid ${M().M.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:a?void 0:M().M.light.gray[75],color:a?void 0:M().M.light.gray[300]},disabled:!1,children:[(0,q.jsx)(y().A,{style:{textOverflow:"ellipsis"},children:v||r}),(0,O().b)(x.icon)]}),render:e=>{const t={menuType:W().gu.Popup,width:250,left:50},n=[{key:"mondayImport.dropdown.menuList",render:e=>(0,q.jsx)(H().A,{...e}),items:(h.trim()?s.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase())})):s).map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,q.jsx)(z().A,{...e,title:n,shouldWrapCaption:!0,isChecked:v===n})})))}];return(0,q.jsxs)(q.Fragment,{children:[c?(0,q.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:M().M.light.gray[200],paddingTop:2,paddingBottom:2,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,border:`1px solid ${M().M.light.gray[100]}`,justifyContent:"space-between",background:M().M.light.gray[75],fontSize:u().J.UIRegular.desktop,textOverflow:"ellipses"},placeholder:g.formatMessage(m().$b.chooseTeamspace),onChange:e=>f(e.target.value),value:h}):(0,q.jsx)(q.Fragment,{}),(0,q.jsx)(U().A,{...t,children:(0,q.jsx)(N().Ay,{type:N().Oh.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}var Y=()=>o(317182);const G=function(){const e=(0,s().v3)(),t=(0,L().r)(),o=(0,a().K8)((()=>f().A.getState()),[]),{selectedWorkspace:i,mondayFoldersAndBoards:l}=o;return(0,n.useEffect)((()=>{i&&m().g3({environment:e,spaceId:t,selectedWorkspace:i}).catch((()=>{}))}),[i,e,t]),(0,q.jsxs)(q.Fragment,{children:[o.selectedWorkspace?(0,q.jsx)(y().A,{style:{fontWeight:u().Wy.semibold,marginTop:18},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,q.jsx)(q.Fragment,{}),o.isLoadingProjects?(0,q.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,q.jsx)(r().A,{size:"sm"}),(0,q.jsx)(y().A,{isSmall:!0,style:{color:M().M.light.gray[400]},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):null==l?void 0:l.map((e=>(0,q.jsx)(J,{mondayFolderAndBoards:e},`${e.folderId}-table`)))]})};function J({mondayFolderAndBoards:e}){const t=(0,i().DP)(),o=(0,p().tz)(),s=(0,a().K8)((()=>f().A.getState()),[]),[r,l]=(0,n.useState)(),c=(0,a().O$)(h().AppStoreSidebarSpaceViewStore),d=(0,a().K8)((()=>{const e=null==c?void 0:c.getTeamsStores();return null==e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,q.jsx)(P().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e))}),[c]);(0,n.useEffect)((()=>{if(!d||!c)return;if(!s.selectedProjectsAndTeamspaces[e.folderId]){l("private"),m().No({folderId:e.folderId,spaceId:null==c?void 0:c.id});for(const n of d){var t,o;if((null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(o=e.folderName)||void 0===o?void 0:o.toLowerCase())){l(n.id),m().No({folderId:e.folderId,spaceId:n.id});break}}}}),[d,e,c,s.selectedProjectsAndTeamspaces,l]);const g=[{key:"private",searchTerm:"private",label:(0,q.jsxs)(x().Ye,{alignItems:"center",style:{gap:8},children:[(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:M().M.light.gray[75]},children:(0,I().g)({color:t.icon.secondary,width:12.5,height:12.5})}),(0,q.jsx)(y().A,{style:{fontWeight:u().Wy.regular},children:o.formatMessage(m().$b.privateSpaceLabel)})]})}];d&&g.push(...d.map((e=>({key:e.id,searchTerm:e.name,label:(0,q.jsxs)(x().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),g.push({key:"create",searchTerm:"New teamspace",label:(0,q.jsxs)(x().Ye,{alignItems:"center",style:{gap:4},children:[(0,k().b)({color:t.icon.secondary,width:16,height:16}),(0,q.jsx)(y().A,{children:o.formatMessage(m().$b.newTeamspaceLabel)})]})});const v=!(e.projects.length||e.taskBoards.length);return(0,q.jsx)(F().A,{disableTooltip:!v,renderTooltip:()=>(0,q.jsx)(y().A,{style:{color:C().Tj.white},isSmall:!0,children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:t=>(0,q.jsx)("div",{...t,children:(0,q.jsx)(Q,{mondayFolderAndBoards:e,teamsOptions:g,setSelectedTeam:l,selectedTeam:r,mondayImportStoreState:s})})})}function Z({collapsed:e,mondayFolderAndBoards:t,mondayImportStoreState:o,isMondayV2Flow:n}){if(e)return[];const s=t.projects.map((e=>({key:e.id,columns:[(0,q.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,q.jsx)(j().S,{style:{marginInlineEnd:2},onClick:()=>{const n={...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:a}=n;let i;i=a.find((t=>t.mondayProjectId===e.id))?a.filter((t=>t.mondayProjectId!==e.id)):a.concat({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}),f().A.setState({...o,selectedProjectsAndTeamspaces:{...o.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:s,projects:i}}})},checked:{...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14}),(0,q.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,q.jsx)(y().A,{isMultiline:!0,style:n?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]}))),a=t.taskBoards.map((e=>({key:e.id,columns:[(0,q.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,q.jsx)(j().S,{style:{marginInlineEnd:2},onClick:()=>{const n={...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:s,projects:a}=n;let i;i=a.find((t=>t.mondayProjectId===e.id))?a.filter((t=>t.mondayProjectId!==e.id)):a.concat({name:e.name,mondayProjectId:e.id,collectionType:"tasks"}),f().A.setState({...o,selectedProjectsAndTeamspaces:{...o.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:s,projects:i}}})},checked:{...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14}),(0,q.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,q.jsx)(y().A,{isMultiline:!0,style:n?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]})));return[...s,...a]}function Q({mondayFolderAndBoards:e,selectedTeam:t,setSelectedTeam:o,teamsOptions:s,mondayImportStoreState:r}){var l;const[c,u]=(0,n.useState)(!1),g=!(e.projects.length||e.taskBoards.length),v=(0,a().K8)((()=>{var e;return null===(e=h().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.id}),[]),S=(0,i().DP)(),A=(0,p().tz)(),b=(0,n.useCallback)((t=>{m().No({folderId:e.folderId,spaceId:t}),o(t)}),[e.folderId,o]),I=(0,n.useCallback)((t=>{if("create"===t)return void T().vn("monday_importer",{onClose:b});let n;if("private"===t){if(!v)return;n=v}else n=t;m().No({folderId:e.folderId,spaceId:n}),o(t)}),[e.folderId,o,b,v]);return(0,q.jsxs)(x().Ye,{style:g?{color:S.text.secondary,fill:S.icon.secondary,opacity:.4,marginInlineStart:-18}:{marginInlineStart:-18},children:[(0,q.jsx)(E().A,{ariaLabel:A.formatMessage({id:"mondayImport.importsTab.selectData.collapseToggle",defaultMessage:"Collapse toggle"}),icon:D().l,onClick:()=>u((e=>!e)),style:{transform:c?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:15,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,q.jsx)(Y().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,q.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,q.jsx)(j().S,{style:{marginInlineEnd:4,height:14},disabled:g,checked:(()=>{const t={...r.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(t.isEntireFolderSelected)})(),size:14,onClick:()=>{const t={...r.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:n}=t;let s,a;if(n)s=[],a=!1;else{s=[...e.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...e.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],a=!0}f().A.setState({...r,selectedProjectsAndTeamspaces:{...r.selectedProjectsAndTeamspaces,[e.folderId]:{notionTeamspaceId:o,projects:s,isEntireFolderSelected:a}}})}}),(0,q.jsx)(y().A,{style:{width:280,textOverflow:"ellipsis"},children:e.folderName})]}),style:{width:300}},...s?[{key:"importInto",header:(0,q.jsxs)(x().Ye,{style:{alignItems:"center"},children:[(0,q.jsx)("div",{children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,q.jsx)("div",{style:{marginInlineEnd:16,marginInlineStart:8},children:(0,_().Z)({width:12})}),(0,q.jsxs)(x().Ye,{style:{alignItems:"center",gap:8},children:[(0,q.jsx)("img",{src:d().A.emails.notionLogoBlackSmallPng,height:18}),(0,q.jsx)($,{options:s,onSelectOption:I,currentOption:null===(l=s.find((e=>e.key===t)))||void 0===l?void 0:l.key,narrow:!0,allowSearch:!0,placeHolder:A.formatMessage({id:"mondayImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"}),shouldBeDisabled:g})]})]}),style:{width:"50%"}}]:[]],rows:Z({collapsed:c,mondayFolderAndBoards:e,mondayImportStoreState:r,isMondayV2Flow:!1})})]})}var X=()=>o(606273);function ee(){const e=(0,a().K8)((()=>f().A.getState()),[]),t=(0,R().Ar)(),o=(0,p().tz)(),n=(0,a().K8)((()=>{var e;const n=null===(e=h().default.state.sidebarSpaceViewStore)||void 0===e||null===(e=e.getTeamsStores())||void 0===e?void 0:e.map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,q.jsx)(P().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)),s=[];return n&&s.push(...n.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),s.push({key:"private",searchTerm:["private"],icon:(0,I().g)(t.lockedIcon),name:o.formatMessage(m().$b.privateSpaceLabel)}),s.push({key:"create",searchTerm:["New"],icon:(0,k().b)(t.plusIcon),name:o.formatMessage(m().$b.newTeamspaceLabel)}),s}),[o,t.lockedIcon,t.plusIcon]),{mondayFoldersDetailsMap:s,selectedImportType:i,isLoadingHierarchy:l,mondayFoldersAndBoards:c,isLoadingProjects:d}=e;return"FullImport"===i?l?(0,q.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,q.jsx)(r().A,{size:"sm"}),(0,q.jsx)(y().A,{isSmall:!0,style:{color:M().M.light.gray[400]},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.loadingBoardsHelperText",defaultMessage:"Loading boards in the workspace..."})})]}):(0,q.jsx)(q.Fragment,{children:Object.entries(s).filter((([,e])=>!e.parent)).map((([e,t])=>(0,q.jsx)(oe,{currentFolderId:t.folderId,notionTeamspaceOptions:n},`${e}-table`)))}):"ProjectsAndTasks"===i?d?(0,q.jsxs)(x().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,q.jsx)(r().A,{size:"sm"}),(0,q.jsx)(y().A,{isSmall:!0,style:{color:M().M.light.gray[400]},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):(0,q.jsx)(q.Fragment,{children:null==c?void 0:c.map((e=>(0,q.jsx)(ne,{mondayFolderAndBoards:e,notionTeamspaceOptions:n},e.folderId)))}):null}const te=function(){const e=(0,s().v3)(),t=(0,a().O$)(h().AppStoreSidebarSpaceStore),n=(0,a().K8)((()=>f().A.getState()),[]),{selectedWorkspace:i,fetchedHierarchy:r,selectedImportType:l,isLoadingHierarchy:c}=n;return(0,o(187174).Yb)((async()=>{if(i&&l&&t)if("FullImport"===l){if(c||r)return;await m().nM({environment:e,spaceId:t.getSpaceId(),selectedWorkspace:i})}else"ProjectsAndTasks"===l&&await m().g3({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:i})}),[e,r,c,l,i,t]),(0,q.jsx)(ee,{})};function oe({currentFolderId:e,notionTeamspaceOptions:t}){const o=(0,i().DP)(),s=(0,p().tz)(),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(),g=(0,a().K8)((()=>f().A.getState()),[]),{mondayFoldersDetailsMap:v,mondayBoardsDetailsMap:A,excludeProjectsAndTasks:I,selectedBoardIdsForFullImport:k,selectedFolderIdsForFullImport:M,isLoadingBoards:P}=g,D=null==v?void 0:v[e],_=(0,a().O$)(h().AppStoreSidebarSpaceViewStore);(0,n.useEffect)((()=>{if(!_||!D||!_.getSpaceId())return;g.selectedFolderIdsForFullImport.has(D.folderId)||u("private")}),[D,_,g.selectedFolderIdsForFullImport]);const L=(0,n.useCallback)((e=>{D&&(m().Mi({folderId:D.folderId,notionTeamspaceId:e,notionRootTableName:"team"}),u(e))}),[D]),E=(0,n.useCallback)((e=>{if(D)if("create"!==e){if("private"===e){if(null==_||!_.getSpaceId()||!D)return;m().Mi({folderId:D.folderId,notionTeamspaceId:_.getSpaceId(),notionRootTableName:"space"})}else m().Mi({folderId:D.folderId,notionTeamspaceId:e,notionRootTableName:"team"});u(e)}else T().vn("monday_importer",{onClose:L})}),[D,L,_]),O=(0,n.useMemo)((()=>M?{boardsCount:m().Wh(e,k,v,A,I)}:{boardsCount:0}),[e,I,A,v,k,M]),W=(0,n.useMemo)((()=>({boardsCount:m().nP(e,v,A,I)})),[e,I,A,v]),z=!(D.boards.length||D.subFolders.length),V=(0,n.useMemo)((()=>m().p7({currentfolderId:e,mondayFolderDetails:v,mondayBoardDetails:A,excludeProjectsAndTasks:I})),[e,I,A,v]),U={color:o.text.secondary,fill:o.icon.secondary,opacity:.4};function N({mondayFoldersMap:e,mondayBoardsMap:t,currentFolderId:n,excludeProjectsAndTasks:a}){if(l)return[];const i=e[n];return[...i.boards.map((e=>{const n=t[e];if(!n||!i)return null;const r=m().dJ({excludeProjectsAndTasks:a,board:n});return{key:e,columns:[(0,q.jsxs)(x().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,q.jsx)(j().S,{style:r?{color:o.text.secondary,fill:o.icon.secondary,opacity:.4,marginInlineEnd:2}:{marginInlineEnd:2},onClick:()=>{m().$A(e)},checked:k.has(e),size:14,disabled:r}),(0,q.jsx)(F().A,{disableTooltip:!r,renderTooltip:()=>(0,q.jsx)(y().A,{style:{color:C().Tj.white},isSmall:!0,children:s.formatMessage(m().$b.projectsAndTasksExcludedToolTip)}),render:e=>(0,q.jsx)("div",{...e,children:(0,q.jsx)("div",{style:r?{color:o.text.secondary,fill:o.icon.secondary,opacity:.4,width:240,wordWrap:"break-word"}:{width:240,wordWrap:"break-word"},children:(0,q.jsxs)(y().A,{style:{lineHeight:"20px",fontSize:"14px"},children:[(0,q.jsx)("div",{style:{display:"inline-block",paddingInlineEnd:"4px"},children:(0,q.jsx)(S().I,{style:{display:"inline-block",color:o.icon.secondary,width:12.5,height:12.5},icon:w().C})}),n.name]})})})})]},`${e}-container`)]}})).filter((e=>null!==e)),...i.subFolders.map((n=>{const s=e[n];return s?{key:n,columns:[(0,q.jsx)(x().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20,marginTop:"4px"},children:(0,q.jsx)(Y().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:[{key:"team",header:(0,q.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,q.jsx)(j().S,{style:P?{...U,marginInlineEnd:4,height:14}:{marginInlineEnd:4,height:14},checked:M.has(n),size:14,disabled:P,onClick:()=>m().TJ(n,e,t,a)}),(0,b().E)({display:"inline-block",color:o.icon.secondary,width:12.5,height:12.5}),(0,q.jsx)(y().A,{style:{width:280,textOverflow:"ellipsis"},children:s.folderName})]}),style:{width:300,paddingBottom:0}}],rows:N({mondayFoldersMap:e,mondayBoardsMap:t,currentFolderId:n,excludeProjectsAndTasks:a})})},`${n}-container`)]}:null})).filter((e=>null!==e)).flat()]}return D&&A&&V?(0,q.jsx)(F().A,{disableTooltip:!z,renderTooltip:()=>(0,q.jsx)(y().A,{style:{color:C().Tj.white},isSmall:!0,children:s.formatMessage(m().$b.noBoardsTooltipMessage)}),render:e=>{var o;return(0,q.jsx)("div",{...e,children:(0,q.jsx)("div",{style:{marginBottom:10},children:(0,q.jsxs)(B().xA,{gap:8,children:[(0,q.jsx)(B().LX,{row:1,col:1,children:(0,q.jsx)(se,{shouldBeDisabled:z,collapsed:l,onCollapse:()=>c((e=>!e)),columns:[{key:"team",header:(0,q.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,q.jsx)(j().S,{style:{marginInlineEnd:4,height:14},disabled:z||P,checked:g.selectedFolderIdsForFullImport.has(D.folderId),size:14,onClick:()=>m().TJ(D.folderId,v,A,I)}),(0,b().E)({height:12,width:12,display:"inline-block"}),(0,q.jsxs)(x().Ye,{alignItems:"center",gap:6,children:[(0,q.jsx)(y().A,{style:P?{...U,textOverflow:"ellipsis"}:{textOverflow:"ellipsis"},children:D.folderName}),P?(0,q.jsx)(r().A,{size:"sm"}):void 0,(0,q.jsxs)(y().A,{isSmall:!0,children:[W.boardsCount,s.formatMessage(m().$b.boardsKeyWord)]})]})]}),style:{width:300,paddingBottom:0}}],rows:N({mondayFoldersMap:v,mondayBoardsMap:A,currentFolderId:D.folderId,excludeProjectsAndTasks:I})})}),(0,q.jsx)(B().LX,{row:1,col:2,children:(0,q.jsx)(R().cz,{onSelectOption:E,options:t,currentOption:null===(o=t.find((e=>e.key===d)))||void 0===o?void 0:o.key,style:l?"compact":"full",children:(0,q.jsx)(y().A,{style:{fontSize:"14px",paddingInlineStart:l?"8px":0},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalBoards",defaultMessage:"Import {boardsCount} boards to",values:{boardsCount:O.boardsCount}})})})})]})})})}}):null}function ne({mondayFolderAndBoards:e,notionTeamspaceOptions:t}){const o=(0,R().Ar)(),[s,i]=(0,n.useState)(!1),[r,l]=(0,n.useState)(),c=(0,a().K8)((()=>f().A.getState()),[]),d=(0,a().O$)(h().AppStoreSidebarSpaceViewStore),u=(0,a().K8)((()=>{const e=null==d?void 0:d.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:(0,q.jsx)(P().x,{disabled:!0,store:e})})))}),[d]);(0,n.useEffect)((()=>{if(!u||!d)return;if(!c.selectedProjectsAndTeamspaces[e.folderId]){l("private"),m().No({folderId:e.folderId,spaceId:null==d?void 0:d.id});for(const n of u){var t,o;if((null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(o=e.folderName)||void 0===o?void 0:o.toLowerCase())){l(n.id),m().No({folderId:e.folderId,spaceId:n.id});break}}}}),[e,d,c.selectedProjectsAndTeamspaces,u]);const g=!(e.projects.length||e.taskBoards.length),v=(0,n.useCallback)((t=>{m().No({folderId:e.folderId,spaceId:t}),l(t)}),[e.folderId]),S=(0,n.useCallback)((t=>{if("create"===t)return void T().vn("monday_importer",{onClose:v});let o;if("private"===t){if(null==d||!d.id)return;o=d.id}else o=t;m().No({folderId:e.folderId,spaceId:o}),l(t)}),[null==d?void 0:d.id,e.folderId,v]),A=(0,p().tz)(),b=(0,n.useMemo)((()=>({projectsCount:e.projects.length,tasksCount:e.taskBoards.length})),[e.projects.length,e.taskBoards.length]),I=(0,n.useMemo)((()=>{var t;const o=null===(t=c.selectedProjectsAndTeamspaces[e.folderId])||void 0===t?void 0:t.projects,[n,s]=o?o.reduce((([e,t],o)=>"projects"===o.collectionType?[e+1,t]:[e,t+1]),[0,0]):[0,0];return{projectsCount:n,tasksCount:s}}),[e.folderId,c.selectedProjectsAndTeamspaces]);return(0,q.jsx)(F().A,{disableTooltip:!g,renderTooltip:()=>(0,q.jsx)(y().A,{style:{color:C().Tj.white},isSmall:!0,children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:n=>{var a;return(0,q.jsx)("div",{...n,children:(0,q.jsx)("div",{style:o.asanaTeamSectionContainer,children:(0,q.jsxs)(B().xA,{gap:8,children:[(0,q.jsx)(B().LX,{row:1,col:1,children:(0,q.jsx)(se,{shouldBeDisabled:g,collapsed:s,onCollapse:()=>i((e=>!e)),columns:[{key:"team",header:(0,q.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,q.jsx)(j().S,{style:{marginInlineEnd:4,height:14},disabled:g,checked:(()=>{const t={...c.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(t.isEntireFolderSelected)})(),size:14,onClick:()=>{const t={...c.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:n}=t;let s,a;if(n)s=[],a=!1;else{s=[...e.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...e.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],a=!0}f().A.setState({...c,selectedProjectsAndTeamspaces:{...c.selectedProjectsAndTeamspaces,[e.folderId]:{notionTeamspaceId:o,projects:s,isEntireFolderSelected:a}}})}}),(0,q.jsxs)(x().Ye,{alignItems:"center",gap:6,children:[(0,q.jsx)(y().A,{style:{textOverflow:"ellipsis"},children:e.folderName}),(0,q.jsx)(F().A,{renderTooltip:()=>(0,q.jsx)(y().A,{style:{color:C().Tj.white},isSmall:!0,children:A.formatMessage(m().$b.projectsAndTasksCountTooltip)}),render:e=>(0,q.jsx)("div",{...e,children:(0,q.jsxs)(y().A,{isSmall:!0,children:[b.projectsCount+b.tasksCount,A.formatMessage(m().$b.projectsKeyWord)]})})})]})]}),style:{width:300,paddingBottom:0}}],rows:Z({collapsed:s,mondayFolderAndBoards:e,mondayImportStoreState:c,isMondayV2Flow:!0})})}),(0,q.jsx)(B().LX,{row:1,col:2,children:(0,q.jsx)(R().cz,{onSelectOption:S,options:t,currentOption:null===(a=t.find((e=>e.key===r)))||void 0===a?void 0:a.key,style:s?"compact":"full",children:(0,q.jsx)(y().A,{style:{fontSize:"14px",paddingInlineStart:s?"8px":0},children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalprojectsAnsTasks",defaultMessage:"Import {projectsCount} Projects to",values:{projectsCount:I.projectsCount+I.tasksCount}})})})})]})})})}})}function se({columns:e,rows:t,shouldBeDisabled:o,collapsed:n,onCollapse:s}){const a=(0,i().DP)(),r=(0,R().Ar)();return(0,q.jsx)("div",{style:r.teamAndProjectsCollapse,children:(0,q.jsxs)(x().Ye,{style:o?{color:a.text.secondary,fill:a.icon.secondary,opacity:.4}:{},children:[(0,q.jsx)("div",{style:{marginTop:6},children:(0,q.jsx)(A().p,{onClick:()=>s(),pressedStyle:{background:"transparent"},ignoreLocalHoverState:!0,children:(0,q.jsx)(X().f,{disabled:!0,style:{pointerEvents:"none"},isSidebar:!1,open:!n,fill:!1,onClick:e=>{e.stopPropagation(),s()},icon:"chevron"})})}),(0,q.jsx)(Y().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:e,rows:t})]})})}const ae=function(){const e=(0,p().tz)(),t=(0,a().K8)((()=>f().A.getState()),[]),n=m().P0(),{selectedWorkspace:i,workspaces:r,selectedImportType:l,excludeProjectsAndTasks:c}=t,d=(0,s().v3)().device.isMobile,g="FullImport"===l?{on:c,title:e.formatMessage(m().$b.excludeProjectsAndTasks),focused:!0,onClick:()=>f().A.setState({...t,excludeProjectsAndTasks:!c,selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,selectedTeamspacesForFullImport:{}})}:void 0,h=[];return g&&h.push({key:"monday-exclude-projects-and-asks",props:g}),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(x().Ye,{alignItems:"center",gap:8,children:(0,q.jsx)(o(255043).r,{searchThreshold:5,onSelectOption:e=>{f().A.setState({...t,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:r.map((e=>({key:e.id,name:e.name,searchTerm:[e.name,...e.name.split(" ")]}))),currentOption:i,placeHolder:e.formatMessage(m().$b.selectWorkspaceV2),inputProps:{placeholder:e.formatMessage(m().$b.searchWorkspaces)},selectorButtonStyle:"workspace"})}),i?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(m().$b.chooseImportType)}),(0,q.jsx)(x().Ye,{alignItems:"left",gap:8,children:(0,q.jsx)(o(702723).A,{isMobile:d,type:"dropdown",currentOption:l,options:Object.entries(n).map((([t,o])=>({key:t,label:e.formatMessage(o.title),caption:e.formatMessage(o.description)}))),buttonStyle:{paddingInlineStart:"0px",marginInlineStart:"0px"},menuStyle:{width:"300px"},onSelectOption:e=>{f().A.setState({...t,selectedImportType:e,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}})},switcherButtons:h})})]}):void 0,i&&l?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:e.formatMessage(m().$b.selectBoardsHeading)}),(0,q.jsx)(y().A,{style:{font:"SF Pro",fontWeight:u().Wy.regular,fontSize:u().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:e.formatMessage(m().$b.mapTeamspacesDescription)})]}):void 0,(0,q.jsx)(te,{})]})};var ie=()=>o(162402);const re=function(){const e=(0,a().K8)((()=>f().A.state.result),[]);return e?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(y().A,{isMultiline:!0,children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,q.jsx)("div",{style:{marginTop:32},children:e.map((e=>(0,q.jsx)(le,{importStatus:e},e.mondayFolderId)))})]}):(0,q.jsx)(q.Fragment,{})};function le({importStatus:e}){const t=(0,p().tz)(),o=(0,i().DP)(),[s,r]=(0,n.useState)(!1),l=(0,a().O$)(h().AppStoreSidebarSpaceStore),c=(0,a().K8)((()=>f().A.state.mondayFoldersAndBoards),[]),d=(0,a().O$)(h().AppStoreSidebarSpaceViewStore),u=(0,a().K8)((()=>{if(!d)return;const e=d.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:(0,q.jsx)(P().x,{disabled:!0,store:e})})));return l?(e||[]).concat({id:d.id,name:"Private",icon:(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:M().M.light.gray[75]},children:(0,I().g)({color:o.icon.secondary,width:12.5,height:12.5})})}):e}),[d,l,o]),{notionTeamspaceName:m,notionTeamspaceIcon:g}=(0,n.useMemo)((()=>{const t=null==u?void 0:u.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[u,e]),v=(0,n.useMemo)((()=>{var t;return null==c||null===(t=c.find((t=>t.folderId===e.mondayFolderId)))||void 0===t?void 0:t.folderName}),[c,e]);return(0,q.jsxs)(x().Ye,{style:{marginTop:16},children:[(0,q.jsx)(E().A,{ariaLabel:t.formatMessage({id:"mondayImport.importsTab.confirm.collapseToggle",defaultMessage:"Collapse toggle"}),icon:D().l,onClick:()=>r((e=>!e)),style:{transform:s?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,q.jsx)(Y().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,q.jsx)(x().Ye,{alignItems:"center",gap:2,children:(0,q.jsx)(y().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:v})}),style:{width:300}},{key:"importedInto",header:(0,q.jsxs)(x().Ye,{gap:4,children:[(0,q.jsxs)(x().Ye,{style:{alignItems:"center",gap:4},children:[(0,q.jsx)(y().A,{isSmall:!0,children:(0,q.jsx)(p().sA,{id:"mondayImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,_().Z)({width:12})]}),(0,q.jsxs)(x().Ye,{style:{alignItems:"center",gap:4},children:[g,m]})]}),style:{width:300}}],rows:function({collapsed:t}){return t?[]:e.projects.map((e=>({key:e.projectId,columns:[(0,q.jsxs)(x().Ye,{gap:8,alignItems:"center",children:[(0,ie().q)({width:12,color:M().M.dark.green[600]}),(0,q.jsx)(y().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId)]})))}({collapsed:s})})]})}const ce=(0,p().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Monday workspace.",id:"Mondayimport.importingData.failed.problemsOccured"}});function de(e,t){switch(e){case"selectData":return(0,q.jsx)(y().A,{style:{paddingBottom:8,fontSize:18,width:"100%",fontWeight:u().Wy.semibold},children:t.formatMessage(m().$b.selectWorkSpaceV1)});case"chooseWorkspace":return(0,q.jsx)(y().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:t.formatMessage(m().$b.chooseWorkSpace)});default:return(0,q.jsx)(q.Fragment,{})}}function pe({style:e}){return(0,q.jsx)(v().A,{title:(0,q.jsx)(p().sA,{id:"mondayAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Monday.com"}),href:"https://www.notion.so/help/monday",analyticsFrom:"import",style:e})}const ue=function({tab:e,fetchActiveImportTasks:t,analyticsFrom:u}){const{navigate:y}=(0,n.useContext)(o(312788).E),v=o(972435).A.getIntl(),S=(0,s().v3)(),j=(0,a().O$)(h().AppStoreSidebarSpaceStore),A=(0,a().O$)(h().AppStoreSidebarSpaceViewStore),b=(0,g().xJ)({spaceStore:j}),I=(0,g().gc)({spaceStore:j,teams:b.teams}).map((e=>e.store)),k=(0,a().O$)(f().A),w=(0,a().K8)((()=>o(522094).A.state.flowId),[])||o(206267).JW(),{workspaces:C}=k,M=(0,n.useCallback)((()=>{if("FullImport"===k.selectedImportType)return k.selectedBoardIdsForFullImport.size>0||k.selectedFolderIdsForFullImport.size>0;return Object.values(k.selectedProjectsAndTeamspaces).some((e=>0!==e.projects.length))}),[k.selectedProjectsAndTeamspaces,k.selectedFolderIdsForFullImport,k.selectedBoardIdsForFullImport,k.selectedImportType]),T=(0,n.useCallback)((()=>{j&&A&&("FullImport"===k.selectedImportType?(m().oz({environment:S,spaceStore:j,flowId:w,spaceViewStore:A}).catch((()=>{})),o(559926).eH(S,{import_source:"monday",from:u,flowId:w})):m().i_({environment:S,spaceStore:j,currentSpaceViewStore:A,teamsStores:I,flowId:w}).catch((()=>{})))}),[A,S,w,k.selectedImportType,j,I,u]),P=(0,i().IS)((e=>({closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.text.secondary}})),[]),B=(0,n.useMemo)((()=>"chooseWorkspace"===e),[e]);return(0,q.jsxs)(o(843878).Ay,{controlRow:(e=>"chooseWorkspace"===e?(0,q.jsx)(o(136480).s,{left:(0,q.jsx)(pe,{}),next:{disabled:!M()||k.templateCreationInProgress,onClick:T,message:v.formatMessage(m().$b.nextButton)},back:{disabled:!C.length,onClick:()=>{t(),f().A.resetImport()},message:v.formatMessage(m().$b.backButton)}}):"selectData"===e?(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsx)(l().A,{size:"lg",style:{border:0},disabled:!C.length,onClick:()=>{t(),f().A.resetImport()},children:v.formatMessage(m().$b.backButton)}),(0,q.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,q.jsx)(x().Ye,{alignItems:"center",gap:8,children:(0,q.jsx)(c().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:!M()||k.templateCreationInProgress,onClick:()=>{T()},children:k.templateCreationInProgress?(0,q.jsxs)(x().Ye,{alignItems:"center",gap:2,children:[(0,q.jsx)(r().A,{onDarkBackground:!0}),v.formatMessage(m().$b.creatingTemplate)]}):(0,q.jsx)(q.Fragment,{children:v.formatMessage(m().$b.nextButton)})})})})]}):"importingData"===e?(0,q.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,q.jsx)(l().A,{size:"lg",disabled:!C.length,onClick:()=>{t(),f().A.resetImport()},children:(0,q.jsx)(p().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"confirm"===e?(0,q.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,q.jsx)(c().A,{colorPalette:"blue",onClick:()=>{var e;if(null!==(e=k.result)&&void 0!==e&&e.length&&k.loggerPageId){const e=k.result.find((e=>void 0!==e.projectCollectionPageId)),t=(null==e?void 0:e.projectCollectionPageId)||k.loggerPageId;y({url:(0,o(921940).A)({pageId:t,pageModel:void 0===t?void 0:S.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:o(179034).ev,id:t},userId:S.currentUser.id}),baseUrl:o(726637).A.domainBaseUrl,pageVisitSource:o(584262).y8.Import}),environment:S})}f().A.resetImport(),o(404141).A.reset()},children:(0,q.jsx)(p().sA,{id:"importsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,q.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,q.jsx)(l().A,{size:"lg",disabled:!C.length,onClick:()=>{t(),f().A.resetImport()},children:(0,q.jsx)(p().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):void 0)(e),controlRowPaddingTopBottom:B?10:20,contentPaddingLeftRight:B?25:void 0,controlRowPaddingLeftRight:B?15:void 0,contentPaddingTopBottom:B?2:void 0,children:[(0,q.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:(0,q.jsx)("div",{style:{position:"absolute",top:12,insetInlineEnd:12},children:(0,q.jsx)(o(718827).Ay,{onClick:()=>{t(),f().A.resetImport()},style:P.closeButton,hoveredStyle:P.closeButtonHover,children:(0,o(66913).V)(P.closeButtonIcon)})})}),de(e,v),(e=>"selectData"===e?(0,q.jsx)(K,{}):"chooseWorkspace"===e?(0,q.jsx)(ae,{}):"importingData"===e?(0,q.jsx)(o(297464).A,{assetSrc:d().A.images.import.mondayPng}):"confirm"===e?(0,q.jsx)(re,{}):"failure"===e?(0,q.jsx)(o(352403).A,{assetSrc:d().A.images.import.mondayPng,loggerPageId:k.loggerPageId,failedMessage:v.formatMessage(ce.failed)}):void 0)(e)]})}},480034:(e,t,o)=>{o.d(t,{q:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25m0 4c.345 0 .625.28.625.625v2.375H13a.625.625 0 1 1 0 1.25h-2.375V13a.625.625 0 1 1-1.25 0v-2.375H7a.625.625 0 1 1 0-1.25h2.375V7c0-.345.28-.625.625-.625"})},s=(0,o(340498).wt)("plusCircleFill",n)},489538:(e,t,o)=>{o.d(t,{o:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.76 13.75",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M3.75 3.125c.345 0 .625.28.625.625v7.097l3.016-2.639a.625.625 0 0 1 .854.028l3.036 3.037 3.485-3.485H12.75a.625.625 0 1 1 0-1.25h3.5c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0V8.696l-3.902 3.902a.625.625 0 0 1-.884 0L7.774 9.534l-3.399 2.974v2.242c0 .483.392.875.875.875h11a.625.625 0 1 1 0 1.25h-11a2.125 2.125 0 0 1-2.125-2.125v-11c0-.345.28-.625.625-.625"})},s=(0,o(340498).wt)("chartLineUptrend",n)},500550:(e,t,o)=>{o.d(t,{P:()=>c,g:()=>d});var n=()=>o(242422),s=()=>o(56366),a=()=>o(231297),i=()=>o(755199),r=()=>o(680074),l=()=>o(765957);function c(e){const t=(0,r().R$)(e);if(!t)return;n().default.checkGate({gateName:"show_ai_moved_banner"})&&a().createAndCommit({environment:e,userAction:"userSettingsActions.markAiLandingPageAsSeenOrDismissed",canUndo:!0,cellTarget:"main",perform:e=>{i().mJ({userSettingsStore:t,transaction:e,data:{banner_or_ai_landing_page_seen_or_dismissed_at:Date.now()}})}})}function d(){return(0,s().K8)((()=>{const e=l().default.state.currentUserSettingsStore;if(void 0===e||!e.isDefined())return!0;return!!e&&void 0!==e.getSettingsStore().getKeyStore("banner_or_ai_landing_page_seen_or_dismissed_at").getValue()}),[])}},508485:(e,t,o)=>{o.d(t,{R:()=>a});o(296540);var n=o(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.938 7.313a2.625 2.625 0 1 0 0 5.25 2.625 2.625 0 0 0 0-5.25"}),(0,n.jsx)("path",{d:"M10 4.875a5.125 5.125 0 1 0 0 10.25 5.125 5.125 0 0 0 0-10.25M6.125 10a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},a=(0,o(340498).wt)("target",s)},509657:(e,t,o)=>{o.d(t,{a:()=>n().a});var n=()=>o(505108)},509659:(e,t,o)=>{o.d(t,{f:()=>P});o(898992),o(354520),o(430670),o(803949),o(581454);var n=()=>o(203066),s=()=>o(153321),a=o(296540),i=()=>o(56366),r=()=>o(401497),l=()=>o(959044),c=()=>o(204384),d=()=>o(96689),p=()=>o(496603),u=()=>o(534177),m=()=>o(56086),g=()=>o(299545),h=()=>o(152197),f=()=>o(179534),y=()=>o(765957),v=()=>o(865241),x=()=>o(819616),S=()=>o(285068),j=()=>o(985405);o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class A extends(()=>o(757695))().Store{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((o=>{const n=o.emojisBySpace[t]||[],s=new Set(n),a=e.filter((e=>!s.has(e)));if(a.length>0){const e=10-n.length,s=a.slice(0,e);if(s.length>0)return{emojisBySpace:{...o.emojisBySpace,[t]:[...n,...s]}}}return o}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],o=t[t.length-1];return o&&this.update((o=>({emojisBySpace:{...o.emojisBySpace,[e]:t.slice(0,-1)}}))),o}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const b=new A;var I=o(474848);const k=.8,w=1,C=24,M=432,T=1;function P(e){const{children:t}=e,[o,A]=(0,a.useState)(!1),[P,B]=(0,a.useState)(void 0),F=(0,i().K8)((()=>v().A.state.isVisible),[]);(0,i().K8)((()=>{const e=f().A.state.results,t=y().default.state.currentUserRootStore,o=v().A.state.isVisible;t&&o&&e.forEach((e=>{var o;const n=(null===(o=e.unreceived)||void 0===o?void 0:o.notificationIds)||[],s=e.spaceId;if(!s||!n.length)return;const a=j().SpaceStore.createChildStore(t,{table:d().NX,id:s});if(!a)return;f().A.markNotificationsAsReceived(s,n);const i=n.map((e=>x().T.createChildStore(a,{table:l()._p,id:e,spaceId:s}))),r=p().oE(i.map((e=>{const t=g().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const o=Number(null==e?void 0:e.getEndTime())||0;return(Number(null==t?void 0:t.getEndTime())||0)-o})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const o=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-o}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>S().L.createChildStore(a,{table:c().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(u().O9);r.length>0&&b.addEmojis(r,s)}))}),[]);const R=(0,h().r)(),D=a.useRef(),_=a.useRef(),L=(0,a.useCallback)((()=>{D.current&&(clearTimeout(D.current),D.current=void 0),_.current&&(clearTimeout(_.current),_.current=void 0),A(!1),B(void 0)}),[]),E=(0,a.useCallback)((()=>{if(!F)return void L();if(!R)return void L();const e=b.popEmoji(R);B(e),e?(A(!0),D.current=setTimeout((()=>{A(!1),_.current=setTimeout((()=>{E()}),1e3*k)}),1e3*w)):L()}),[L,F,R]);(0,i().K8)((()=>{if(!R)return;b.getEmojis(R).length>0&&!o&&!D.current&&E()}),[o,E,R]),(0,a.useEffect)((()=>L),[L]);const O=(0,r().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,I.jsx)("div",{style:O.container,children:(0,I.jsx)(n().N,{mode:"wait",children:P?(0,I.jsx)(s().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:k,type:"spring",damping:C,stiffness:M,mass:T},children:(0,I.jsx)(m().A,{char:P,size:18})},`emoji-${P}`):(0,I.jsx)(s().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:k,type:"spring",damping:C,stiffness:M,mass:T},style:O.badge,children:t},"number")})})}},515918:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(401497),s=()=>o(970236),a=()=>o(69708),i=o(474848);function r(e){const{style:t}=e,o=(0,n().IS)((e=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,i.jsx)(s().E,{color:"blue",style:o.badge,content:(0,i.jsx)(a().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}},519116:(e,t,o)=>{o.d(t,{A:()=>m});o(581454);var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(634201),r=()=>o(406699),l=()=>o(939740),c=()=>o(553965),d=()=>o(486666),p=o(474848);const u=(0,n.forwardRef)((function(e,t){const{variations:n,emoji:s,focused:i,onClick:r,onMouseEnter:l,insertEmoji:c,showTooltip:d,id:u,role:m}=e,h=(0,a().uB)(void 0,o(463830).A);return void 0===(0,a().K8)((()=>(0,o(712030).bb)()),[])&&n&&n.length>0?(0,p.jsx)(y,{role:m,id:u,buttonPopupStore:h,emoji:s,focused:i,insertEmoji:c,onClick:r,onMouseEnter:l,showTooltip:d,variations:n,ref:t}):(0,p.jsx)(g,{role:m,id:u,emoji:s,focused:i,onClick:r,onMouseEnter:l,ref:t,showTooltip:d})})),m=u,g=(0,n.forwardRef)((function({events:e,emoji:t,focused:r,onClick:u,onMouseEnter:m,showTooltip:g,id:h,role:f},y){const v=(0,s().v3)(),x=i().qg.isCustomEmojiString(t),{isMenuListFocusVisible:S}=(0,n.useContext)(l().VU),j=r&&S,A=(0,o(401497).IS)((e=>({emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...v.device.isMobile?{width:d().UA,height:d().UA,fontSize:d().ru}:{width:d().Sq,height:d().Sq,fontSize:d().Zl},...j&&{boxShadow:e.buttonBlueFocusRing}}})),[v.device.isMobile,j]),b=A.emojiButton.fontSize,I=(0,a().K8)((()=>{if(x){const e=i().qg.fromCustomEmojiString(t);return(0,o(87878).nA)({parentStore:void 0,pointer:e.pointer})}}),[t,x]),k=(0,a().K8)((()=>x?null==I?void 0:I.getName():i().Yf(t,o(267419).A.state)),[I,t,x]);return(0,p.jsx)(o(859428).A,{forceVisibleState:!!j||void 0,placement:j?"bottom":void 0,allowHover:g,renderTooltip:()=>k,closeDelay:0,disableTooltip:!g,render:n=>(0,p.jsx)(o(718827).Ay,{role:f,ref:y,id:h,focused:r,onClick:u,...(0,c().A)(e||{},(0,c().A)({onMouseEnter:m},n)),ignoreLocalHoverState:!0,style:A.emojiButton,disallowTabbing:!0,children:x?I?(0,p.jsx)(o(448664).A,{size:b,emojiStore:I}):null:(0,p.jsx)(o(56086).A,{size:b,char:t})},t)})}));function h({props:e}){return(0,p.jsx)("div",{style:{display:"flex",padding:4},children:e.children})}function f(e){const{parent:t,emoji:n,variations:a,insertEmoji:i}=e,r=(0,s().v3)(),c=(a&&a.length>0?[n,...a]:[n]).map(((n,s)=>({key:n,action:e=>{t.close(),(null==a?void 0:a.length)===o(637997).aI&&(0,o(210741).l)({environment:r,skinTone:s}),i(n,s)},render:t=>(0,p.jsx)(u,{...e,...t,emoji:n,variations:void 0,showTooltip:!1})})));return(0,p.jsx)(o(805751).A,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,p.jsx)(l().Ay,{type:l().Oh.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,p.jsx)(h,{props:e}),items:c}]})})}const y=(0,n.forwardRef)((function(e,t){const{emoji:s,focused:a,onClick:i,onMouseEnter:l,showTooltip:c,variations:d,insertEmoji:u,buttonPopupStore:m,id:h,role:y}=e,v=(0,n.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(m)),[m]),x=(0,n.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,m)),[m]);return(0,p.jsx)(o(998531).N,{debugName:"EmojiPickerMenuItem",capture:a,onEnter:x,onEsc:v,children:(0,p.jsx)(r().A,{buttonPopupStore:m,popupType:r().z.Popup,renderOrigin:e=>(0,p.jsx)(g,{ref:t,emoji:s,focused:a,onClick:i,onMouseEnter:l,showTooltip:c,events:e,id:h,role:y}),render:e=>(0,p.jsx)(f,{parent:e,emoji:s,variations:d,insertEmoji:u})})},s)}))},536583:(e,t,o)=>{o.d(t,{d:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},s=(0,o(340498).wt)("docOnDoc",n)},538739:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=o(474848);const s=function(e){const{style:t}=(0,o(401497).IS)((t=>({style:{display:"inline-block",textAlign:"center",color:e.disabled?t.text.tertiary:t.text.secondary,userSelect:"none",WebkitUserSelect:"none",width:8,...e.style}})),[e.disabled,e.style]);return(0,n.jsx)("div",{style:t,children:"Â·"})}},553003:(e,t,o)=>{o.d(t,{B:()=>n});o(898992),o(672577),o(737550);function n(e,t){return e.find((e=>e.presets.some((e=>e.uri===t))))}},555555:(e,t,o)=>{o.d(t,{n:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("import",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},566254:(e,t,o)=>{o.d(t,{HC:()=>c,Pz:()=>p,_s:()=>r,ml:()=>u,rA:()=>d,x_:()=>l});var n=()=>o(559926),s=()=>o(666803),a=()=>o(559506),i=()=>o(908928);async function r(e,t){const o=await a().callApi({eventName:"getConnectedAppsStatus",environment:e,data:{spaceId:t}});if("failed"===o.type){const e=o.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return o.data}async function l(e,t){await a().callApi({eventName:"disconnectTrello",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"trello"})}async function c(e,t){await a().callApi({eventName:"disconnectAsana",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"asana"})}async function d(e,t){await a().callApi({eventName:"disconnectEvernote",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"evernote"})}async function p(e,t,o){await a().callApi({eventName:"disconnectConfluence",environment:e,data:{spaceId:o}}),await t.refresh(),n().kO(e,{integration_name:"confluence"})}async function u(e){const{environment:t,requestStore:o,botId:a}=e;await i().KA({environment:t,botId:a,onSuccess:()=>{!async function(e){const{environment:t,requestStore:o}=e;await o.refresh();const a=s().Ay.getInitialState();s().Ay.setState(a),n().kO(t,{integration_name:"jira"})}({environment:t,requestStore:o})}})}},583262:(e,t,o)=>{o.d(t,{$Q:()=>a,hW:()=>s});o(16280);var n=()=>o(242422);function s(e){switch(e){case"browse-templates":return"navigate";case"create-page":case"create-database":case"create-meeting":return"create";case"custom":return"custom";default:throw new Error(`Unhandled shortcut action type: ${e}`)}}function a(){return"on"===n().default.getEligibleGroup({experimentId:"home_shortcut_actions",defaultGroup:"control"})}},583550:(e,t,o)=>{o.r(t),o.d(t,{SidebarAiButton:()=>R,getTooltipDescriptionForAi:()=>D,sidebarAiButtonMessages:()=>_});var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(401497),r=()=>o(929219),l=()=>o(699143),c=()=>o(252291),d=()=>o(529099),p=()=>o(848538),u=()=>o(69708),m=()=>o(500550),g=()=>o(35392),h=()=>o(296798),f=()=>o(147294),y=()=>o(859428),v=()=>o(490044),x=()=>o(47373),S=()=>o(646736),j=()=>o(797730),A=()=>o(644914),b=()=>o(201506),I=()=>o(118884),k=()=>o(274570),w=()=>o(285790),C=()=>o(554283),M=()=>o(770906),T=()=>o(539412),P=()=>o(907893),B=o(474848);function F(e){const{sidebarItemHoverStore:t,sidebarTooltipStore:o}=e,r=(0,s().v3)(),l=(0,u().tz)(),d=(0,a().O$)(t),p=d.isSidebarItemHovered||d.isSidebarItemFocused,m=(0,P().Kd)(),g=(0,i().IS)((e=>({button:{...m.button,height:24,width:24,margin:0},iconContainer:{opacity:p?1:0,padding:0,transition:"opacity 0.1s ease-in-out"}})),[m.button,p]);(0,I().X)((()=>{t.setState({...t.state,isActionButtonHovered:!1,isActionButtonFocused:!1})}));const h=(0,n.useCallback)((()=>{o.reset(),(0,M().ZT)({environment:r,contentType:"assistant"})}),[r,o]),[f,y]=(0,C().B)();(0,n.useEffect)((()=>{t.setState({...t.state,isActionButtonHovered:y})}),[y,t]);const v=(0,n.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!0})}),[t]),x=(0,n.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!1})}),[t]);if((0,T().x9)())return null;const S=l.formatMessage({id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"});return(0,B.jsx)("div",{ref:f,style:g.iconContainer,children:(0,B.jsx)(w().A,{onFocus:v,onBlur:x,icon:()=>(0,B.jsx)(c().I,{size:"default",icon:k().clockIcon}),style:g.button,ariaLabel:S,onClick:h})})}function R(e){const t=(0,s().v3)(),o=(0,u().tz)(),p=(0,a().K8)((()=>"ai"===t.RouterStore.state.route.name),[t]),x=!(0,a().O$)(r().e),{sidebarTooltipStore:I,sidebarItemHoverStore:k,handleFocus:w,handleBlur:C,handleMouseMove:M,handleMouseLeave:T}=(0,b().W)(),P=(0,A().ab)(),R=(0,i().IS)((e=>({linkBoxStyle:{...P.baseSidebarItem,...p&&P.currentSelectedSidebarItem},iconWrapper:{position:"relative"},shortcutLabel:{color:e.text.inverseSecondary}})),[p,P.baseSidebarItem,P.currentSelectedSidebarItem]),{isActionButtonFocused:L,isActionButtonHovered:E,isSidebarItemFocused:O,isSidebarItemHovered:W}=(0,a().O$)(k),z=(W||O)&&!x,V=(0,S().I_)(),U=(0,m().g)(),N=(0,a().K8)((()=>D(V)),[V]),H=(0,n.useCallback)((()=>E||L?(0,B.jsx)(u().sA,{..._.chatHistoryTooltip}):(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{children:o.formatMessage(N)}),(0,B.jsx)(g().A,{style:R.shortcutLabel,name:"navigateToNotionAIPage"})]})),[o,R.shortcutLabel,L,E,N]);return(0,B.jsx)(y().A,{store:I,renderTooltip:H,originGap:6,placement:"right",render:t=>{var n;return(0,B.jsx)(h().A,{style:R.linkBoxStyle,href:"/ai",hoveredStyle:null===(n=e.styles)||void 0===n?void 0:n.buttonHoveredStyle,...t,onFocus:e=>{var o;null===(o=t.onFocus)||void 0===o||o.call(t,e),w(e)},onBlur:e=>{var o;null===(o=t.onBlur)||void 0===o||o.call(t,e),C()},testId:"sidebar-ai-button",children:(0,B.jsx)(v().A,{left:(0,B.jsx)("div",{style:R.iconWrapper,children:(0,B.jsx)(c().I,{icon:d().aiFaceIcon,colorVariant:"secondary",size:"lg"})}),right:z?(0,B.jsx)("div",{style:{display:"flex",flexDirection:"row",marginInlineEnd:-4,justifyContent:"center",gap:3},children:(0,B.jsx)(F,{sidebarItemHoverStore:k,sidebarTooltipStore:I})}):(0,B.jsx)(f().Ee,{keyType:"feature_gate",newBadgeKey:"show_ai_moved_banner",didUserEngage:U}),onMouseMove:M,onMouseLeave:T,children:(0,B.jsx)(l().Y1,{direction:"horizontal",gap:4,align:"center-left",children:o.formatMessage(j().D.notionAi)})})})}})}function D(e){const t=(0,x().$6)(),o=(0,p().Wf)(null==e?void 0:e.getMembershipType());return t&&o?_.tooltipAiAndAgents:_.tooltipAiOnly}const _=(0,u().YK)({tooltipAiAndAgents:{id:"sidebar.agents.tooltipAiAndAgents",defaultMessage:"Work with AI and manage your agents"},tooltipAiOnly:{id:"sidebar.agents.tooltipAiOnly",defaultMessage:"Ask, research, and create with AI"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}})},606331:(e,t,o)=>{o.d(t,{S6:()=>dt,wn:()=>ut,Lj:()=>mt,Nu:()=>lt,nR:()=>ct});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(908872);var n=()=>o(242422),s=()=>o(484714),a=()=>o(56366),i=()=>o(929219),r=()=>o(187174),l=()=>o(179034),c=()=>o(620333),d=()=>o(245241),p=()=>o(496603),u=()=>o(763824),m=()=>o(534177),g=()=>o(720665),h=()=>o(222917),f=()=>o(972435),y=()=>o(148777),v=()=>o(466088),x=()=>o(658883),S=()=>o(780865),j=()=>o(135055),A=()=>o(981342),b=()=>o(617711),I=()=>o(406792),k=()=>o(109054),w=()=>o(690978),C=(o(672577),o(737550),o(296540),()=>o(716016)),M=()=>o(713998),T=()=>o(529099),P=()=>o(820579),B=()=>o(940563),F=()=>o(489538),R=()=>o(536583),D=()=>o(764781),_=()=>o(212727),L=()=>o(133043),E=()=>o(829548),O=()=>o(281844),W=o(474848);const z={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",svg:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("path",{d:"M8.089 5.348a.416.416 0 0 1 .538.538 4.241 4.241 0 0 0 5.486 5.486.416.416 0 0 1 .538.538 5.08 5.08 0 0 1-4.529 3.238l-.201.004a5.074 5.074 0 0 1-1.832-9.804"}),(0,W.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 1 0 15.25 7.625 7.625 0 0 1 0-15.25m0 1.25a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},V=(0,o(340498).wt)("moonCircle",z);var U=()=>o(120282),N=()=>o(826693),H=()=>o(120739),q=()=>o(427704),K=()=>o(69708),$=()=>o(498212),Y=()=>o(939768),G=()=>o(884107),J=()=>o(426077),Z=()=>o(209660),Q=()=>o(260488),X=()=>o(471995),ee=()=>o(175320),te=()=>o(813297),oe=()=>o(212395),ne=()=>o(583262),se=()=>o(679794),ae=()=>o(417399),ie=()=>o(309534),re=()=>o(763336),le=()=>o(549500),ce=()=>o(862292),de=()=>o(157857),pe=()=>o(71304),ue=()=>o(141966),me=()=>o(37433),ge=()=>o(900681),he=()=>o(84987),fe=()=>o(346),ye=()=>o(756114),ve=()=>o(568821),xe=()=>o(696746),Se=()=>o(578136),je=()=>o(770906),Ae=()=>o(583550),be=()=>o(837822),Ie=()=>o(797730),ke=()=>o(765957),we=()=>o(430483),Ce=()=>o(712505),Me=()=>o(148832),Te=()=>o(404141),Pe=()=>o(329304),Be=()=>o(898808);const Fe=(0,K().YK)({tooltip:{id:"team_home.tooltip",defaultMessage:"See announcements and other team updates"},searchResultCaption:{id:"team_home.searchResultCaption",defaultMessage:"Teamspace â€“ See announcements and other team updates"}}),Re=2;const De=!1;function _e(e){const{environment:t,isCommandSearch:o}=e,s=n().default.checkGate({gateName:"search_meeting_notes_action"});if(!o&&s)return{type:"client_action",eventName:"create_meeting_notes",value:{behavior:"action",title:f().A.formatMessage(Ze.createMeetingNotes),aliases:[f().A.formatMessage(Ze.notesAlias),f().A.formatMessage(Ze.recordAlias),f().A.formatMessage(Ze.micAlias),f().A.formatMessage(Ze.meetingNotesAlias),f().A.formatMessage(Ze.voiceAlias),f().A.formatMessage(Ze.transcriptionAlias),f().A.formatMessage(Ze.speechAlias),f().A.formatMessage(Ze.dictationAlias),f().A.formatMessage(Ze.audioAlias)],caption:f().A.formatMessage(Ze.createMeetingNotesCaption),icon:U().a,action:async()=>{(await le().$O.load()).transcriptionCreateActions.createAndNavigateToTranscriptionBlock({environment:t,from:"search_meeting_notes",title:"title_with_event",origin:"search_meeting_notes"})}}}}function Le(e){const{isCommandSearch:t}=e,o=n().default.checkGate({gateName:"meeting_notes_page"});if(!t&&o)return{type:"client_action",eventName:"meetings_tab",value:{behavior:"navigation",title:f().A.formatMessage(Ze.meetingsTab),aliases:[f().A.formatMessage(Ze.meetingsAlias)],caption:f().A.formatMessage(Ze.meetingsTabCaption),icon:U().a,destination:{type:"url",url:q().JZ.meet}}}}function Ee(e){const{environment:t}=e;return{type:"client_action",eventName:"settings",value:{behavior:"action",title:f().A.formatMessage(ie().O.settings),aliases:void 0,icon:_().gearIcon,caption:f().A.formatMessage(ie().O.tooltip),action:()=>{t.device.isElectron?(0,J().S)():Z().Ow({openedFrom:"search_modal",currentTab:"settings"})}}}}function Oe(e){if(!De)return[];const t=Ce().default.getPeekMode(),o=(0,p().hS)([Ce().default.state.open?{name:"center_peek"===t?"center":"peek",store:Ce().default.state.targetStore}:void 0,"center_peek"!==t?{name:"main",store:ke().default.state.mainEditorCurrentBlockStore}:void 0],(e=>{var t;return null==e||null===(t=e.store)||void 0===t?void 0:t.id})),n=[];for(const{name:a,store:i}of(0,p().oE)(o)){var s;if(!i)continue;const t=i.getAssociatedCollectionStore();if(!t)continue;const o=t.getSchema();if(!o)continue;const r=(0,m().WP)(o).find((([e,t])=>"auto_increment_id"===(null==t?void 0:t.type)));if(!r)continue;const[l,c]=r;if(!c)continue;const d=null===(s=t.getRecordKeyStore())||void 0===s?void 0:s.getRecordKey(),p=(0,M().On)(i.getPropertyValue(l));if(!d||!p)continue;const u=(0,C().H4)(d,p);if(u){const t=(0,pe().tS)({environment:e.environment,intl:f().A.getIntl(),store:i});n.push({type:"client_action",eventName:`${a}_unique_id`,value:{behavior:"action",title:f().A.formatMessage(Ze.copyUniqueIdForPage,{pageTitle:t,idPropertyName:c.name}),aliases:[f().A.formatMessage(Ze.copyUniqueIdAlias)],caption:f().A.formatMessage(Ze.copyUniqueIdForPageCaption),icon:R().d,shouldIgnoreTitle:!1,action:async()=>{const t=await G().R.clipboardActions.load();await t.copyString({environment:e.environment,stringValue:u,copiedMessage:Ze.copyUniqueIdSnackNotification})}}})}}return n}function We({spaceUserStore:e}){if(!we().zD.isAiEnabled())return;const t=(0,Ae().getTooltipDescriptionForAi)(e);return{type:"client_action",eventName:"ai_shortcut",value:{behavior:"navigation",title:f().A.formatMessage(Ie().D.notionAi),aliases:[f().A.formatMessage(Ze.aiAlias)],icon:T().aiFaceIcon,caption:f().A.formatMessage(t),destination:{type:"url",url:q().JZ.ai}}}}function ze(e){const t=(0,xe().x$)(ke().default.state.sidebarSpaceViewStore);if(!t)return;const o=(0,be().Oc)();return{type:"client_action",eventName:"home",value:{behavior:"navigation",title:f().A.formatMessage(be().aQ.label),aliases:void 0,icon:L().P,caption:f().A.formatMessage(o),destination:{type:"block",blockStore:t}}}}function Ve(e){var t;const{environment:o}=e;if(!(0,Se().D)({isMobileNative:o.device.isMobileNative,disableExposureLogging:!0}))return[];const{sidebarSpaceViewStore:n,currentUserStore:s,sidebarSpaceStore:a}=ke().default.state,i=(null==n?void 0:n.getTeamsStores())??[],r=null==s?void 0:s.id;if(!r||!a)return[];const l=null===(t=(0,ge().y)({userId:r,spaceStore:a,teamTypes:new Set(["Joined","UnjoinedActive"])}))||void 0===t?void 0:t.teams;if(!l)return[];const c=(0,me().dT)({spaceStore:a,teams:l}).map((e=>e.store)).filter((e=>"closed"!==e.getTeamAccessLevel())),d=new Set(i.map((e=>e.id)));return c.sort(((e,t)=>Number(d.has(t.id))-Number(d.has(e.id)))).map((e=>{const t=e.getIcon();return{type:"client_action",eventName:"team_home",value:{behavior:"navigation",aliases:void 0,title:e.getName()??"UnnamedTeamspace",icon:t?(e,o)=>(0,W.jsx)(Be().x,{icon:t,style:e}):L().P,caption:f().A.formatMessage(Fe.searchResultCaption),destination:{type:"url",url:(0,H().a)({teamId:e.id,spaceId:e.getSpaceId()})}}}}))}function Ue(e){var t;const{environment:o}=e;if(!(0,ne().$Q)())return[];const n=(0,xe().XH)("shortcuts");if(null==n||!n.isReady())return[];const s=f().A.getIntl(),a=ke().default.state.currentUserStore,i=null!=a&&a.isDefined()?null===(t=a.getModel())||void 0===t?void 0:t.getDisplayName(s):void 0,r=n.getContentStores().filter((e=>e.isType("button")));return(0,p().oE)(r.map((e=>{const t=e.getAutomationStore();if(!t)return;const n=t.getNameStore().getValue()??f().A.formatMessage(oe().yn.buttonPlaceholder);return{type:"client_action",eventName:"home_shortcut",value:{behavior:"action",title:n,aliases:void 0,caption:f().A.formatMessage(Ze.homeShortcutsCaption,{user_name:i||"User"}),icon:()=>(0,W.jsx)(se().p,{config:{type:"custom",store:e},shortcutHealthStatus:"valid",size:20}),action:async()=>{var s;const{automationExecutionActions:a}=await te().QV.automations.load(),i=await ce().T.formulas.load(),[r,l]=await Promise.all([te().QV.automationTypecheck.load(),te().QV.automationActionRegistry.load()]),c=e.getRecordStoreUIRoot(),d=c instanceof Me().B&&c.isPageBlock()?c:void 0,p=await(0,Pe().Se)(o,{name:"premium_automations",spaceId:t.getSpaceId(),userId:null===(s=ke().default.state.currentUserStore)||void 0===s?void 0:s.id}),u={automationStore:t,automationTypecheckModule:r,automationActionRegistryModule:l,blockStore:e,currentUserId:o.currentUser.id,formulasModule:i,intl:f().A.getIntl(),isLoggedIn:o.currentUser.isLoggedIn(),pageStore:d,parentRecordStore:t,type:"button_block"};(0,de().T1)({clientContext:{...u,environment:o,isSubscribed:Boolean(p)}})?X().D6({label:f().A.formatMessage(Ze.homeShortcutsRunFailed,{title:n})}):(await a.executeClientAutomation({clientContext:u,environment:o}),X().D6({label:f().A.formatMessage(Ze.homeShortcutsRan,{title:n})}))}}}})))}function Ne(e){const{environment:t,isCommandSearch:o}=e;if(De&&!o)return{type:"client_action",eventName:"inbox",value:{behavior:"action",title:f().A.formatMessage(Ie().D.inbox),aliases:[f().A.formatMessage(Ze.inboxNotificationAlias),f().A.formatMessage(Ze.inboxUpdateAlias)],caption:f().A.formatMessage(he().inboxMessages.tooltip),icon:E().y,action:()=>(0,je().ZT)({environment:t,contentType:"inbox"})}}}function He(e){if((0,ue().l5)()&&!e.isCommandSearch)return{type:"client_action",eventName:"experiments",value:{behavior:"action",title:f().A.formatMessage(Ze.experiments),aliases:[f().A.formatMessage(Ze.experimentGateAlias)],caption:f().A.formatMessage(Ze.experimentsCaption),icon:F().o,action:()=>{Te().A.setState({...Te().A.state,open:!0,currentTab:"experiments",defaultSubtab:void 0})}}}}function qe(e){if(!e.isCommandSearch)return{type:"client_action",eventName:"import",value:{behavior:"action",title:f().A.formatMessage(ae().h.tabTitle),aliases:void 0,caption:f().A.formatMessage(ae().h.tabSubtitle),icon:P().arrowLineDownIcon,action:()=>Te().A.setState({...Te().A.state,open:!0,currentTab:"imports",defaultSubtab:void 0})}}}function Ke(e){return{type:"client_action",eventName:"templates",value:{behavior:"navigation",title:f().A.formatMessage(re().U.title),aliases:[f().A.formatMessage(Ze.templatesGalleryAlias)],caption:f().A.formatMessage(re().U.templatesMwnTooltip),icon:N().notionTemplateIcon,destination:{type:"url",url:q().JZ.marketplace}}}}function $e(e){if(De&&!e.isCommandSearch)return{type:"client_action",eventName:"toggle_performance_toolbar",value:{behavior:"action",title:f().A.formatMessage(Ze.performanceToolbar),aliases:void 0,caption:f().A.formatMessage(Ze.performanceToolbarCaption),icon:O().v,action:()=>{(0,ye().D)(e.environment,e.environment.RouterStore.state)&&fe().T1.load().then((()=>{(0,ve().PM)("pin")}))}}}}function Ye(e){const{environment:t}=e,o="light"===t.ThemeStore.state.mode;if(De)return{type:"client_action",eventName:"toggle_theme",value:{behavior:"action",title:f().A.formatMessage(Ze.toggleTheme),aliases:[f().A.formatMessage(Ze.darkMode),f().A.formatMessage(Ze.lightMode),f().A.formatMessage(Ze.themeMode)],caption:f().A.formatMessage(o?Ze.toggleDarkThemeCaption:Ze.toggleLightThemeCaption),icon:V,action:()=>{const e=o?"dark":"light";ee().C5(e)}}}}function Ge(e){if(!De)return[];const{query:t,environment:o}=e,n=(0,$().parseUUIDWithoutDashes)(t);if(void 0===n)return[];const s=Y().Gm({url:`/${t}`});return[{type:"client_action",eventName:"copy_as_dashed_uuid",value:{behavior:"action",title:f().A.formatMessage(Ze.copyAsDashedUuid),aliases:[],caption:n,icon:D().V,shouldIgnoreTitle:!0,action:async()=>{const e=await G().R.clipboardActions.load();await e.copyString({environment:o,stringValue:n,copiedMessage:Ze.copyAsDashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_undashed_uuid",value:{behavior:"navigation",title:f().A.formatMessage(Ze.navigateToUuid),aliases:[],caption:s,icon:B().arrowStraightRightIcon,shouldIgnoreTitle:!0,destination:{type:"url",url:s}}}]}function Je(e){if(!De)return[];const{query:t,environment:o}=e;if(!(0,$().uj)(t))return[];const n=(0,$().Xw)(t),s=Y().Gm({url:`/${n}`});return[{type:"client_action",eventName:"copy_as_undashed_uuid",value:{behavior:"action",title:f().A.formatMessage(Ze.copyAsUndashedUuid),aliases:[],caption:n,icon:D().V,shouldIgnoreTitle:!0,action:async()=>{const e=await G().R.clipboardActions.load();await e.copyString({environment:o,stringValue:n,copiedMessage:Ze.copyAsUndashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_dashed_uuid",value:{behavior:"navigation",title:f().A.formatMessage(Ze.navigateToUuid),aliases:[],caption:s,icon:B().arrowStraightRightIcon,shouldIgnoreTitle:!0,destination:{type:"url",url:s}}}]}const Ze=(0,K().YK)({homeShortcutsRunFailed:{id:"search.actionResult.homeShortcuts.runFailed",defaultMessage:"Failed to run {title} shortcut"},homeShortcutsRan:{id:"search.actionResult.homeShortcuts.ran",defaultMessage:"Ran {title} shortcut"},homeShortcutsCaption:{id:"search.actionResult.homeShortcuts.caption",defaultMessage:"Custom shortcut button from {user_name}â€™s Home"},performanceToolbar:{id:"search.actionResult.performanceToolbar",defaultMessage:"Performance toolbar"},performanceToolbarCaption:{id:"search.actionResult.fpsCaption",defaultMessage:"Toggle the performance toolbar."},toggleTheme:{id:"search.actionResult.toggleTheme",defaultMessage:"Toggle theme"},toggleDarkThemeCaption:{id:"search.actionResult.toggleDarkThemeCaption",defaultMessage:"Switch to dark theme."},toggleLightThemeCaption:{id:"search.actionResult.toggleLightThemeCaption",defaultMessage:"Switch to light theme."},darkMode:{id:"search.actionResult.darkModeAlias",defaultMessage:"Dark mode"},lightMode:{id:"search.actionResult.lightModeAlias",defaultMessage:"Light mode"},themeMode:{id:"search.actionResult.themeModeAlias",defaultMessage:"Theme"},copyAsDashedUuid:{id:"search.actionResult.copyAsDashedUuid",defaultMessage:"Copy as dashed UUID"},copyAsDashedUuidSnackbar:{id:"search.actionResult.copyAsDashedUuidSnackbar",defaultMessage:"Copied dashed UUID"},navigateToUuid:{id:"search.actionResult.navigateToUuid",defaultMessage:"Navigate to block UUID"},copyAsUndashedUuid:{id:"search.actionResult.copyAsUndashedUuid",defaultMessage:"Copy as undashed UUID"},copyAsUndashedUuidSnackbar:{id:"search.actionResult.copyAsUndashedUuidSnackbar",defaultMessage:"Copied as undashed UUID"},experiments:{id:"search.actionResult.experiments",defaultMessage:"Experiments"},experimentsCaption:{id:"search.actionResult.experimentsCaption",defaultMessage:"View and manage experiments."},inboxUpdateAlias:{defaultMessage:"updates",id:"search.actionResult.inbox.updates"},inboxNotificationAlias:{defaultMessage:"notifications",id:"search.actionResult.inbox.notifications"},templatesGalleryAlias:{defaultMessage:"gallery",id:"search.actionResult.templates.gallery"},experimentGateAlias:{defaultMessage:"gate",id:"search.actionResult.experiments.gate"},copyUniqueIdForPage:{defaultMessage:"Copy {idPropertyName} for {pageTitle}",id:"search.actionResult.copyUniqueId"},copyUniqueIdForPageCaption:{defaultMessage:"Copy unique identifier for page to clipboard",id:"search.actionResult.copyUniqueIdCaption"},copyUniqueIdSnackNotification:{defaultMessage:"Unique ID copied",id:"search.actionResult.copyUniqueIdSnackNotification"},copyUniqueIdAlias:{defaultMessage:"unique",id:"search.actionResult.copyUniqueIdAlias"},createMeetingNotes:{defaultMessage:"Create AI Meeting Notes",id:"search.actionResult.createMeetingNotes"},meetingNotesAlias:{defaultMessage:"meeting notes",id:"search.actionResult.meetingNotes.meetingNotes"},notesAlias:{defaultMessage:"notes",id:"search.actionResult.meetingNotes.notes"},recordAlias:{defaultMessage:"record",id:"search.actionResult.meetingNotes.record"},createMeetingNotesCaption:{defaultMessage:"Create a new meeting note",id:"search.actionResult.createMeetingNotesCaption"},micAlias:{defaultMessage:"microphone",id:"search.actionResult.meetingNotes.mic"},voiceAlias:{defaultMessage:"voice",id:"search.actionResult.meetingNotes.voice"},transcriptionAlias:{defaultMessage:"transcription",id:"search.actionResult.meetingNotes.transcription"},speechAlias:{defaultMessage:"speech",id:"search.actionResult.meetingNotes.speech"},dictationAlias:{defaultMessage:"dictation",id:"search.actionResult.meetingNotes.dictation"},audioAlias:{defaultMessage:"audio",id:"search.actionResult.meetingNotes.audio"},aiAlias:{defaultMessage:"ai",id:"search.actionResult.ai.ai"},meetingsTab:{defaultMessage:"AI Meeting Notes",id:"search.actionResult.meetingsTab"},meetingsAlias:{defaultMessage:"meetings",id:"search.actionResult.meetingsTab.meetings"},meetingsTabCaption:{defaultMessage:"View and manage your meetings",id:"search.actionResult.meetingsTabCaption"}});var Qe=()=>o(21899),Xe=()=>o(303742),et=()=>o(326589),tt=()=>o(968172),ot=()=>o(20199),nt=()=>o(793765),st=()=>o(899677),at=()=>o(498719),it=()=>o(250484),rt=()=>o(646736);function lt(e){const t=(0,s().v3)(),o=(0,j().y6)();return(0,a().K8)((()=>{const n=Boolean(i().A.state.online);let s=it().Ay.state.query;!n&&o&&(s={...s,filters:{...s.filters,isOfflineOnly:!0}});const{hasPublicAccessPermission:a,publicAccessPermissionAncestorBlockId:r}=S().Er(t);return{isOnline:n,limit:it().Ay.state.limit,parentStore:e,hasPublicAccessPermission:a,publicAccessPermissionAncestorBlockId:r,currentSpaceStore:ke().default.state.sidebarSpaceStore,debug:nt().Ay.getDebugLevel(),openAsPage:st().default.state.openAsPage,currentSpaceViewStore:ke().default.state.sidebarSpaceViewStore,query:s,localSearchablePagesStore:ot().A}}),[t,e,o])}function ct({dependencies:e,debugColumnStore:t,localDebounce:o=75,serverSearchFn:i,searchResultStore:l,permanentFilterOverride:c,enabled:d,preventUpdateSearchMetrics:u}){const m=(0,s().v3)(),g=(0,a().K8)((()=>function(e){const{debugColumnStore:t}=e,o=t.state.searchExperimentOverrides;function s(e){return(null==o?void 0:o[e])??n().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:!0})}function a(e,t,s="control"){const a=null==o?void 0:o[e];if(a)return a;const i=n().default.getEligibleGroup({experimentId:e,parameter:t,defaultGroup:s});return void 0===i?"control":i}return{isLocalBlendingDisabled:"on"===s("search-no-local-blending"),shouldUseNewRerankerDebugOverrideEnabled:"on"===a("search-use-local-reranker-layered","shouldUseLocalReranker","control"),forcedClusterPattern:t.state.forcedClusterPattern,searchExperimentOverrides:t.state.searchExperimentOverrides,forcedBlockIds:t.state.forcedBlockIds}}({debugColumnStore:t})),[t]);(0,r().Yb)((()=>d?async function(e){const{query:t,openAsPage:o,store:n,environment:s,serverSearchFn:a}=e;if(o&&p().n4(t,n.state.selectedQueryResultQuery))return;const i=Date.now(),r=st().default.state.searchMode;if(function(e){const{parentStore:t,environment:o,query:n,debug:s,limit:a,hasPublicAccessPermission:i,isOnline:r,store:l,permanentFilterOverride:c,preventUpdateSearchMetrics:d,now:p,shouldUseNewRerankerDebugOverrideEnabled:u,searchMode:m,localSearchablePagesStore:g,currentSpaceStore:f}=e,v=I().default.mark("rum.local_quick_search_query"),x=g.state.localSearchableBlocksCache,j=(0,y().PE)({environment:o,overrideCurrentUserId:o.currentUser.id,overrideSpaceId:null==f?void 0:f.id,overrideLocalSearchableBlocksCache:x});if("quick_find_scroll"===it().Ay.state.source)return;let A;const b={...n,filters:{...n.filters,...c}},{text:k,sort:w}=b,C=(0,S().Bh)(k);C.length>0&&h().o(o,{operations:C,searchSessionId:h().wr()});const M="nav-local-only"!==m,T=e.isLocalBlendingDisabled||"full-content"===m;if((0,S().Bi)({isLocalBlendingDisabled:T,queryOperations:C,queryText:k,querySort:w})){var P;A=S().mj(dt({parentStore:t,spaceStore:f,environment:o,requestInput:{query:b,debug:s,limit:a},hasPublicAccessPermission:i,isOnline:r,localSearchCache:x,shouldUseNewRerankerDebugOverrideEnabled:u,shouldLimitLocalResultsWhenOnline:M})),I().default.measure(v,{environment:o,data:{success:Boolean(A),start_time:v.startTime,surface:"quick_search",num_results:(null===(P=A)||void 0===P||null===(P=P.results)||void 0===P?void 0:P.length)||0,search_session_id:st().default.state.sessionId,local_cache_metadata:j,local_cache_readiness_timings:(0,y().Yp)(),query_length:k.length}}),d||at().default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1})))}else A=void 0;l.update((e=>{var t;return null===(t=A)||void 0===t||t.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-p))),{...e,localResults:A}}))}({...e,now:i,searchMode:r}),ut({query:t.text,store:n,environment:s,searchMode:r}),"nav-local-only"===r)n.update((e=>({...e,serverResults:void 0})));else{var l;const t=new Set;null===(l=n.state.localResults)||void 0===l||l.results.forEach((e=>t.add(e.id)));const o="default"!==r?mt:a;await o({...e,now:i,excludedBlockIds:[...t],searchMode:r})}}({...e,...g,store:l,serverSearchFn:i,environment:m,permanentFilterOverride:c,preventUpdateSearchMetrics:u}):Promise.resolve()),[e,g,l,i,m,c,d,u],{debounce:o})}function dt(e){const{parentStore:t,spaceStore:o,requestInput:n,isOnline:s,environment:a,hasPublicAccessPermission:i,localSearchCache:r,forceLocalCacheUsage:l,shouldUseNewRerankerDebugOverrideEnabled:c,shouldLimitLocalResultsWhenOnline:p}=e,{query:u}=n;if(!r)return;if(!u.text.trim()&&!l)return;if(i)return;const m=(0,w().getLocalFrecencyRankedSearchResultsWithStore)({query:n,localCachedPages:r,parentStore:t,spaceStore:o,environment:a,isOnline:s,shouldLimitLocalResultsWhenOnline:p,applyScoreThresholdWhenOnline:!0,canUseLtr:!0,shouldUseNewRerankerDebugOverrideEnabled:c});return!m||null!=m&&m.error||m.value.results.forEach((e=>{const t=[];if(Boolean(e.store.isTemplate())){const e={type:"is_template",properties:{},label:f().A.formatMessage(d().Nz.template)};t.push(e)}if(e.workflowData){const e={type:"agent",properties:{},label:f().A.formatMessage(d().Nz.agent)};t.push(e)}e.badges=e.badges?[...e.badges,...t]:t})),m}async function pt(e){const{parentStore:t,currentSpaceStore:o,requestInput:n,isOnline:s,environment:a,publicAccessPermissionAncestorBlockId:i,searchSessionId:r,searchSessionFlowNumber:c,source:p,spaceId:u,searchExperimentOverrides:h,forcedClusterPattern:f,forcedBlockIds:y,excludedBlockIds:x}=e;if(!s)return{error:d().yq.Offline};const j=(0,v().w)(a),I=(0,et().g)();(j||I)&&i&&(n.query.filters.includePublicPagesWithoutExplicitAccess=!0);const w=await S().Uc({environment:a,input:n,spaceId:u,publicAccessPermissionAncestorBlockId:i,searchSessionId:r,searchSessionFlowNumber:c,source:p,searchExperimentOverrides:h,forcedClusterPattern:f,recentPagesForBoosting:u&&"on"!==(null==h?void 0:h["search-debug-only-no-recent-boosting"])?tt().A.getWithoutSubscribing(u):[],forcedBlockIds:y,excludedBlockIds:x});if(!w)return;if("failed"===w.type)return w.offline?{error:d().yq.Offline}:{error:d().yq.RequestFailed};const{trackEventProperties:C,results:M,total:T,debug:P,clusterInfo:B}=w.data,F=(0,g().MU)((0,m().WP)(C).map((([e,t])=>[`server-${e}`,t]))),R=M.map(((e,o)=>({...e,serverEventProperties:F,originalPosition:o,store:Me().B.createChildStore(t,{table:l().ev,id:e.id})})));let D=R;if(o){const e=(0,b().$e)(o),t=(0,A().jj)(o);t&&e||(D=R.filter((o=>(0,k().oU)({blockStore:o.store,shouldShowPeopleCollection:t,shouldShowUserProfiles:e}))))}return{value:{results:D,total:T,debugInfo:P,serverEventProperties:F,clusterInfo:B}}}function ut(e){const{query:t,store:o,environment:s,searchMode:a}=e,i=n().default.checkGate({gateName:"search-custom-action-results"}),r=s.currentUser.isLoggedIn();if(!i||!r)return;const l=Boolean(st().default.state.isNewElectronTab),c=(0,rt().sE)(ke().default.state.sidebarSpaceStore,s.currentUser.id),d=function(e){const{query:t,environment:o,isNewElectronTab:n,spaceUserStore:s}=e;if(t.length<Re)return[];const a={spaceUserStore:s,query:t,environment:o,isCommandSearch:(0,x().q)(o)},i=e=>{var o;if(!e||"action"===e.value.behavior&&n)return!1;if(e.value.shouldIgnoreTitle)return!0;const s=t.toLowerCase();if(e.value.title.toLowerCase().startsWith(s))return!0;const a=null===(o=e.value.aliases)||void 0===o?void 0:o.some((e=>e.toLowerCase().startsWith(s)));return Boolean(a)};return[[Ne(a)].filter(i),[He(a)].filter(i),[$e(a)].filter(i),[Ye(a)].filter(i),Ge(a).filter(i),Je(a).filter(i),Oe(a).filter(i),[ze()].filter(i),[We(a)].filter(i),Ue(a).filter(i).slice(0,6),Ve(a).filter(i).slice(0,5),[Ee(a)].filter(i),[qe(a)].filter(i),[Ke()].filter(i),[_e(a)].filter(i),[Le(a)].filter(i)].flat()}({query:t,environment:s,isNewElectronTab:l,spaceUserStore:c}),p=(0,x().q)(s),u="nav-local-only"===a,m=(()=>{if(!u)return[];const e=function(e){const{isCommandSearch:t,query:o,environment:n}=e;if(t)return;return{type:"client_action",eventName:"deep_dive",value:{behavior:"action",title:`Search for " ${o.trim()} " in full page`,icon:T().aiFaceIcon,shouldIgnoreTitle:!0,action:()=>Q().sv({environment:n,shouldResetAssistantStore:!0,device:n.device,quickSearchMode:t,from:t?"command_search_deep_dive":"search_deep_dive"}),aliases:void 0,caption:void 0}}}({spaceUserStore:c,query:t,environment:s,isCommandSearch:p});return e?[e]:[]})(),g=m?[...m,...d]:d;return null==o||o.update((e=>({...e,queryBasedActionResults:g}))),g}async function mt({parentStore:e,environment:t,query:o,debug:n,isOnline:s,publicAccessPermissionAncestorBlockId:a,currentSpaceStore:i,currentSpaceViewStore:r,searchExperimentOverrides:l,forcedClusterPattern:d,store:m,forcedBlockIds:g,limit:f,permanentFilterOverride:y,excludedBlockIds:v,preventUpdateSearchMetrics:j,now:A,searchMode:b}){var k,w,C,M,T,P,B,F;const R=I().default.mark("rum.server_quick_search_query"),D=I().default.mark("time_to_render_search_results"),_={...o,filters:{...o.filters,...y}};if(!_.text.trim()&&!S().J3(_.filters))return;const L=it().Ay.state.source,E="quick_find_scroll"===L,O=E||0===at().default.state.numServerRequests&&"full-content"!==b;m.update((e=>{var o;return{...e,serverResultsLoading:!0,...O?{serverResults:e.serverResults,serverEventProperties:null===(o=e.serverResults)||void 0===o?void 0:o.serverEventProperties}:{serverResults:void 0,serverEventProperties:void 0},timeToRenderServerResultsMetric:{eventName:D,environment:t,query_length:_.text.length,source:L,search_session_id:st().default.state.sessionId||""}}})),j||at().default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const W=(0,c().mk)({searchSessionId:st().default.state.sessionId,searchSessionFlowNumber:at().default.state.numServerRequests}),z={query:_,debug:n,limit:f};let V;if((0,Xe().o)(r)){const{currentUserRootStore:o}=ke().default.state,n=(0,p().oE)(o?(0,Qe().f)({currentUserRootStore:o}).map((e=>e.getSpaceId())):[null==i?void 0:i.id]);V=await async function(e){const{spaceIds:t,...o}=e,n=await(0,u().lX)(t,10,(e=>pt({spaceId:e,...o}))),s=(0,p().oE)(n.filter((e=>!(null!=e&&e.error))));return 0===s.length?n[0]:s.reduce(((e,t)=>({value:{results:e.value.results.concat(t.value.results),total:e.value.total+t.value.total}})))}({parentStore:e,currentSpaceStore:i,environment:t,requestInput:z,spaceIds:n,searchSessionId:st().default.state.sessionId,searchSessionFlowNumber:at().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:a,isOnline:s,source:L,searchExperimentOverrides:l,forcedClusterPattern:d,forcedBlockIds:g,excludedBlockIds:v})}else V=await pt({parentStore:e,currentSpaceStore:i,environment:t,requestInput:z,spaceId:null==i?void 0:i.id,searchSessionId:st().default.state.sessionId,searchSessionFlowNumber:at().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:a,isOnline:s,source:L,searchExperimentOverrides:l,forcedClusterPattern:d,forcedBlockIds:g,excludedBlockIds:v});if(W!==(0,c().mk)({searchSessionId:st().default.state.sessionId,searchSessionFlowNumber:at().default.state.numServerRequests}))return;if(!V||V.error)return m.update((e=>{var t;return{...e,serverError:null===(t=V)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0}}));const U=E?S().RH({existingResults:m.state.serverResults,newPageResults:V.value}):V.value;I().default.measure(R,{environment:t,data:{start_time:R.startTime,success:!0,surface:"quick_find",num_results:(null===(k=m.state.serverResults)||void 0===k?void 0:k.results.length)||0,search_session_id:st().default.state.sessionId,search_session_flow_number:at().default.state.numServerRequests,query_length:_.text.length}}),m.update((e=>{var t;return V.value.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-A))),{...e,serverError:null===(t=V)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:U,serverResultsAllLoaded:V.value.results.length<f,serverEventProperties:V.value.serverEventProperties}}));const N=(null===(w=m.state.serverResults)||void 0===w?void 0:w.results.map((e=>{var t;return{id:e.id,badges:(null===(t=e.badges)||void 0===t?void 0:t.map((e=>e.type)))??[]}})))??[],H=new Map;for(const{badges:c}of N)for(const e of c){const t=H.get(e)??0;H.set(e,t+1)}const{sections:q}=S().HA({intentBasedGrouping:(0,x().Y)(),localResults:null===(C=m.state.localResults)||void 0===C?void 0:C.results,serverResults:null===(M=m.state.serverResults)||void 0===M?void 0:M.results}),K={};for(const[c,p]of Object.entries(q))K[c]=p.map((e=>e.id));h().fe(t,{numLocalResults:(null===(T=m.state.localResults)||void 0===T?void 0:T.results.length)||0,localResultsIds:(null===(P=m.state.localResults)||void 0===P?void 0:P.results.map((e=>e.id)))||[],totalLocalResultIds:(null===(B=m.state.localResults)||void 0===B?void 0:B.totalResultIds)||[],numServerResults:(null===(F=m.state.serverResults)||void 0===F?void 0:F.results.length)||0,...m.state.serverEventProperties,badgeCounts:H,badgesByResultId:N,idsBySection:K,timeToRenderById:[...m.state.timesToRender.entries()].map((([e,t])=>({id:e,timeToRender:t})))})}},613735:(e,t,o)=>{o.d(t,{b:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(278238),s=()=>o(945778),a=()=>o(536504),i=()=>o(267419);function r({icon:e,themeMode:t}){if(e){if((0,s().A)(e))return i().A.state.emojiByColorProcessed[e];if((0,a().MP)(e)){const{color:t}=(0,a().uX)(e);return(0,a().hI)(t)}return(0,n().T8)(e)?function({uri:e,themeMode:t}){var o;const s=null===(o=e.match(/\/icons\/[\w\-]*_(.+)\.svg/))||void 0===o?void 0:o[1];if(!function(e){if(!e)return!1;return l.has(e)}(s))return;return n().l8[t][s]}({uri:e,themeMode:t}):void 0}}const l=new Set((0,o(534177).uv)(n().l8.light))},633783:(e,t,o)=>{o.d(t,{A:()=>vo});o(581454);var n=o(296540),s=()=>o(564884),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),l=()=>o(929219),c=()=>o(97294),d=()=>o(98126),p=()=>o(148307),u=()=>o(187174),m=()=>o(30626),g=()=>o(555555),h=()=>o(721479),f=()=>o(206267),y=()=>o(490884),v=()=>o(69708),x=()=>o(970330),S=()=>o(559926),j=()=>o(696977),A=()=>o(901389),b=()=>o(757695);class I extends b().Store{getInitialState(){return{}}}const k=new I;var w=()=>o(559506),C=()=>o(496414);async function M(e){const{environment:t,spaceId:o,requestStore:n}=e;if(!t.currentUser.id)return A().rG({message:"Invalid details"}),void C().V();k.setState({...k.state,[o]:{...k.state[o],showLoader:!0}});const s=await w().callApi({eventName:"getConfluenceSpaces",environment:t,data:{spaceId:o}});if(await(null==n?void 0:n.refresh()),k.setState({...k.state,[o]:{...k.state[o],showLoader:!1}}),"failed"!==s.type)return k.setState({...k.state,[o]:{...k.state[o],spacesResult:s.data}}),s.data;console.error(s.error),A().Qg(s),C().V()}var T=()=>o(745800),P=()=>o(324009),B=()=>o(180328),F=()=>o(388416),R=()=>o(192591),D=()=>o(654534),_=()=>o(73848),L=()=>o(310795),E=()=>o(226323),O=()=>o(866042),W=()=>o(267584),z=()=>o(722872),V=()=>o(397292),U=()=>o(874096),N=()=>o(242422);var H=()=>o(232930),q=()=>o(62368),K=()=>o(92513),$=()=>o(214437),Y=()=>o(113507),G=()=>o(522094),J=()=>o(313961),Z=()=>o(666803),Q=()=>o(479199),X=()=>o(40851),ee=()=>o(404141),te=()=>o(250933),oe=()=>o(765957),ne=()=>o(463830);const se=new(ne().A);var ae=()=>o(575143),ie=()=>o(406699),re=()=>o(285790),le=()=>o(404277),ce=()=>o(939740),de=()=>o(417392),pe=()=>o(89924),ue=()=>o(718827),me=()=>o(284371),ge=()=>o(970236),he=o(474848);function fe(e){const{style:t}=e,o=(0,r().IS)((e=>({baseBadgeStyle:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,he.jsx)(ge().E,{color:"blue",style:{...o.baseBadgeStyle,...e.style},content:(0,he.jsx)(v().sA,{id:"syncBadgeComponent.label",defaultMessage:"Sync"})})}const ye={fontSize:14,fontWeight:me().Wy.medium},ve=24,xe={flexShrink:0,width:ve,height:ve,borderRadius:4,marginInlineEnd:10,background:o(100622).Tj.white};const Se=function({title:e,actionButton:t,onClick:n,tooltipEvents:s,icon:a,logo:i,caption:l,shouldWrapCaption:c,showSyncBadge:d,showNewBadge:p,showBetaBadge:u,tooltip:m}){const g=(0,r().DP)();return(0,he.jsx)(ue().Ay,{...s,onClick:n,style:je(g),children:(0,he.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,he.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,he.jsx)(Ie,{icon:a,logo:i}),(0,he.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,he.jsxs)("div",{style:{display:"flex"},children:[(0,he.jsx)("div",{style:ye,children:e}),d?(0,he.jsx)(fe,{}):void 0,p?(0,he.jsx)(o(515918).A,{}):void 0,u?(0,he.jsx)(o(13898).A,{}):void 0,(0,he.jsx)("div",{style:{marginInlineStart:"auto"},children:t})]})})]}),l?(0,he.jsxs)("div",{style:{flex:"1 0 100%",marginTop:6,display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,he.jsx)(ke,{caption:l,shouldWrapCaption:!0}),m]}):void 0]})})};function je(e){return{display:"flex",alignItems:"center",padding:12,borderRadius:4,marginBottom:12,cursor:"pointer",boxShadow:e.shadowXS,transition:"background 200ms ease-out",background:e.importOptionsButtonBackground}}function Ae(e){return{display:"flex",alignItems:"center",justifyContent:"center",width:ve,height:ve,borderRadius:4,marginInlineEnd:8,color:e.text.secondary,background:e.importOptionsIconWrapBackground}}function be(e,t){return{fontSize:12,color:e.text.secondary,lineHeight:"16px",wordBreak:"keep-all",...!t&&{...me().RC}}}function Ie({icon:e,logo:t}){const o=(0,r().DP)();return t?(0,he.jsx)("img",{style:xe,src:t}):e?(0,he.jsx)("div",{style:Ae(o),children:e({flexShrink:0,width:ve,height:ve})}):null}function ke({caption:e,shouldWrapCaption:t}){const o=(0,r().DP)();return e?(0,he.jsx)("div",{style:be(o,t),children:e}):null}const we={whiteSpace:"pre-wrap"};const Ce=function(){const e=(0,i().O$)(K().A),{account:t,isLoadingAsanaWorkspaces:o,isAccountDelinkingInProgress:s,isAccountLinkingInProgress:r}=e,l=(0,a().v3)(),c=(0,v().tz)(),{device:u}=l,g=(0,i().O$)(G().A),h=g.flowId||f().JW();(0,n.useEffect)((()=>{g.flowId||G().A.setState({flowId:h})}),[h,g]);const y={title:c.formatMessage({id:"asanaImportOption.asanaButton.title",defaultMessage:"Asana"}),logo:p().A.images.import.asanaPng,caption:r?c.formatMessage({id:"asanaImportOption.asanaButton.accountLinkingInProgress",defaultMessage:"Authenticating..."}):s?c.formatMessage({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",defaultMessage:"Removing account..."}):t??c.formatMessage({id:"asanaImportOption.asanaButton.defaultCaption",defaultMessage:"Migrate your projects and tasks"}),actionButton:t?(x=[{name:c.formatMessage({id:"asanaImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),captionText:c.formatMessage({id:"asanaImportOption.connectAnotherAccount.captionText",defaultMessage:"Ensure you are logged into the new Asana account in your browser"}),action:()=>j().x3({environment:l,flowId:h}).catch((()=>{}))},{name:c.formatMessage({id:"asanaImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>j().bk({environment:l})}],(0,he.jsx)(ie().A,{popupType:de().nl.Popup,renderOrigin:e=>o?(0,he.jsx)(d().k,{}):(0,he.jsx)(re().A,{ariaLabel:c.formatMessage({id:"asanaImportOption.asanaButton.ariaLabel",defaultMessage:"Import from Asana button"}),icon:m()._,...e}),render:e=>{const t={key:"section",render:e=>(0,he.jsx)(pe().A,{...e}),items:x.map((({name:t,captionText:o,action:n})=>({key:t,render:e=>(0,he.jsx)(ae().A,{...e,title:t,caption:o,captionStyle:o?we:void 0}),action:()=>{n(),e.close()}})))};return(0,he.jsx)(le().A,{menuType:z().gu.Popup,width:200,children:(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:[t]})})}})):void 0,onClick:()=>{}};var x;return(0,he.jsx)(ie().A,{onClick:async()=>{var e;S().fJ(l,{import_source:"asana",from:"settings_modal",userId:l.currentUser.id,spaceId:null===(e=oe().default.state.sidebarSpaceStore)||void 0===e?void 0:e.id,flowId:h}),K().A.resetImport(),o||r||s||(t?(await j().xd({environment:l}),j().qf()):j().x3({environment:l,flowId:h}).catch((()=>{})))},popupType:u.isMobile?ie().z.SlideUp:ie().z.Popup,buttonPopupStore:se,renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...y,onClick:e}),render:()=>null})};var Me=()=>o(251126),Te=(o(898992),o(672577),()=>o(726637)),Pe=()=>o(406094),Be=()=>o(631524),Fe=()=>o(160432),Re=()=>o(668725),De=()=>o(738418),_e=()=>o(89383),Le=()=>o(566254),Ee=()=>o(760217),Oe=()=>o(802790),We=()=>o(805751),ze=()=>o(623580),Ve=()=>o(676007),Ue=()=>o(859428),Ne=()=>o(690197),He=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(354520),o(430670),o(803949),()=>o(852507)),qe=()=>o(729108),Ke=()=>o(778078),$e=()=>o(290913);class Ye extends b().Store{getInitialState(){return{searchQuery:"",selection:new Set}}}const Ge=Ye;var Je=()=>o(419357),Ze=()=>o(64e3),Qe=()=>o(125565),Xe=()=>o(21140);function et({checked:e,enableMultiSelect:t,onClick:o}){return t?(0,he.jsx)(qe().S,{size:16,checked:e,onClick:e=>{e.stopPropagation(),null==o||o()}}):null}const tt=function({searchInputPlaceholder:e,sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:s,onComplete:a}){const r=(0,i().uB)(void 0,Ge),l=(0,D().HW)(),c=(0,i().K8)((()=>r.state.selection),[r]),d=(0,n.useCallback)((()=>{const e=t.flatMap((e=>e.items)).filter((e=>c.has(e.key)));a(e)}),[t,c,a]),p=(0,n.useCallback)((()=>{r.setState({...r.state,selection:new Set})}),[r]),u=l?(0,he.jsxs)(pe().A,{topBorder:!0,style:{padding:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,he.jsx)(Be().p,{onClick:p,disabled:0===c.size,children:(0,he.jsx)(v().sA,{id:"confluenceImportPopup.clearSelection",defaultMessage:"Clear"})}),(0,he.jsx)(Fe().A,{colorPalette:"blue",onClick:d,disabled:0===c.size,children:(0,he.jsx)(v().sA,{id:"confluenceImportPopup.applySelection",defaultMessage:"Apply"})})]}):void 0;return(0,He().l)((()=>{const e=r.state.selection;if(!l){const[o]=t;if(o){const[t]=o.items;t&&e.add(t.key)}}r.emit()})),(0,he.jsx)(le().A,{menuType:z().gu.Popup,header:(0,he.jsx)(ot,{searchInputPlaceholder:e,store:r,enableMultiSelect:l}),footer:u,width:280,maxHeight:350,children:(0,he.jsx)(nt,{sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:s,onComplete:a,store:r,enableMultiSelect:l})})};function ot({searchInputPlaceholder:e,store:t,enableMultiSelect:o}){const n=(0,v().tz)(),s=(0,i().uB)(t,Ge),a=(0,i().K8)((()=>s.state.searchQuery),[s]),r=(0,i().K8)((()=>s.state.selection),[s]);return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(pe().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:(0,he.jsx)(Je().Ay,{focus:!0,focusAfterAnimation:!0,value:a,onChange:e=>{s.setState({...s.state,searchQuery:e.target.value})},placeholder:e})}),o&&r.size>0?(0,he.jsx)(pe().A,{desktopStyle:{paddingBottom:8,paddingTop:4},children:(0,he.jsx)("div",{style:{fontSize:12,color:"rgba(55, 53, 47, 0.65)",paddingInlineStart:12},children:n.formatMessage({id:"confluenceImportPopup.selectedSpacesWithLimit",defaultMessage:"{count} of {limit} {count, plural, one {space selected} other {spaces selected}}"},{count:r.size,limit:$e().w})})}):void 0]})}function nt({sections:e,noSearchResultsPlaceholder:t,handleClickImportConfluenceWorkspace:o,onComplete:n,store:s,enableMultiSelect:a}){const r=(0,v().tz)(),l=(0,i().uB)(s,Ge),c=(0,i().K8)((()=>l.state.searchQuery),[l]),d=(0,i().K8)((()=>l.state.selection),[l]),p=e.map((e=>{const t=(0,Ke().Ay)(c,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===p.length)return(0,he.jsx)(pe().A,{children:(0,he.jsx)(Ze().A,{title:t})});const u=p.map((t=>{const s=t.items.map((e=>e.name)),i={};return s.forEach((e=>{i[e]=i[e]?i[e]+1:1})),{key:t.name,render:o=>(0,he.jsx)(pe().A,{...o,title:e.length>1?t.name:void 0}),items:t.items.map((e=>{const t=d.has(e.key),s=()=>{!function(e,t,o,n){if(n){const t=o.state.selection,n=t.has(e.key),s=new Set(t);if(n)s.delete(e.key);else{if(t.size>=$e().w)return;s.add(e.key)}o.setState({...o.state,selection:s})}else t([e])}(e,n,l,a)},c=(0,he.jsxs)(Xe().Ye,{gap:6,alignItems:"center",children:[(0,he.jsx)(et,{checked:t,enableMultiSelect:a,onClick:s}),(0,he.jsxs)(Xe().Ye,{gap:2,alignItems:"center",children:[e.name,i[e.name]>1?(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>e.key,render:t=>(0,he.jsx)(re().A,{ariaLabel:r.formatMessage({id:"integrationConfluenceImportPopup.associatedSpaceKey",defaultMessage:"Associated space key: {key}"},{key:e.key}),disableBackground:!0,icon:De().G,...t})}):void 0]})]});return{key:e.key,render:t=>(0,he.jsx)(Ee().A,{...t,title:c,right:void 0!==e.count?(0,he.jsx)(Qe().A,{isSmall:!0,children:e.count}):null}),action:()=>{a?s():(o(e.key,e.name),n([e]))}}}))}}));return(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:u})}const st={whiteSpace:"pre-wrap"};function at(e){const{key:t,value:o,spaceId:n}=e;k.setState({...k.state,[n]:{...k.state[n],[t]:o}})}function it(e){var t,o;const n=(0,v().tz)(),s=(0,i().K8)((()=>k.getState()),[]),{spaceStore:r,flowId:l}=e,c=(0,D().HW)(),u=[{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi",defaultMessage:"Import via API"}),captionText:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi.message",defaultMessage:"Recommended for the best import experience"}),action:()=>{e.handleApiImportClick("confluence",l),at({key:"open",value:!0,spaceId:r.id})}},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),captionText:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile.message",defaultMessage:"Best for importing partial workspace content"}),action:()=>e.handleFileUploadClick("confluence",l)}],m=(0,a().v3)(),{confluenceResult:g,onComplete:h,requestStore:y,spaceViewStore:x}=e,{account:j}=g,A={spacesResult:void 0,showLoader:!1},{showLoader:b}=s[r.id]||A;function I(e,t){S().mM(m,{import_source:"confluence",data:{spaceKey:e,spaceName:t},flowId:l})}function w(e){return(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{style:{fontSize:"12px",color:"rgba(55, 53, 47, 0.65)",paddingInlineStart:"12px"},children:c?(0,he.jsx)(v().sA,{id:"confluenceImportOption.search.title.multiSelect",defaultMessage:"Select spaces to import"}):(0,he.jsx)(v().sA,{id:"confluenceImportOption.search.title",defaultMessage:"Select a space to import"})}),(0,he.jsx)(tt,{searchInputPlaceholder:n.formatMessage({id:"confluenceImportOption.search.placeholder",defaultMessage:"Search for a Space"}),noSearchResultsPlaceholder:n.formatMessage({id:"confluenceImportOption.search.noResultsPlaceholder",defaultMessage:"No Spaces"}),sections:[e],onComplete:async e=>{await async function(e){const{environment:t,onComplete:o,selectedSpaces:n,spaceStore:s,spaceViewStore:a,flowId:i}=e,r=(0,D().ic)();if(r)_e().hi(n),_e().qf(o);else{const e=n[0];o(await B().Od({environment:t,spaceStore:s,spaceViewStore:a,space:e,flowId:i||f().JW()}),"confluence")}}({environment:m,onComplete:h,selectedSpaces:e,spaceStore:r,spaceViewStore:x,flowId:l})},handleClickImportConfluenceWorkspace:I})]})}const C={title:"Confluence",logo:p().A.images.import.confluencePng,caption:j??n.formatMessage({id:"confluenceImportOption.actionsMenu.defaultCaption",defaultMessage:"Transfer your team's documentation"}),actionButton:j&&b?(0,he.jsx)(d().k,{}):j&&e.renderItemActionsButton([{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),action:()=>e.handleFileUploadClick("confluence",l)},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{e.handleApiImportClick("confluence",l),at({key:"open",value:!0,spaceId:r.id})}},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e){const{environment:t,spaceId:o,requestStore:n}=e;k.setState({...k.state,[o]:{...k.state[o],showLoader:!1}}),await Le().Pz(t,n,o)}({environment:m,spaceId:r.id,requestStore:y})}]),onClick:()=>{}},T=(null===(t=s[r.id])||void 0===t||null===(t=t.spacesResult)||void 0===t?void 0:t.spaces)||[],P={key:"default",name:n.formatMessage({id:"confluenceImportOption.spacesProperty.defaultName",defaultMessage:"Spaces"}),items:T.map((e=>({id:e.id,key:e.key,name:e.name})))},F=u.map((({name:e,captionText:t,action:o})=>{const n={key:e,render:o=>(0,he.jsx)(ae().A,{...o,title:e,caption:t,captionStyle:t?st:void 0}),action:o};return n})),R={key:"section",render:e=>(0,he.jsx)(pe().A,{...e}),items:F},_=n.formatMessage({id:"confluenceAuthentication.emailHelpText",defaultMessage:"Email address of the Confluence user importing the data"}),L=n.formatMessage({id:"confluenceAuthentication.instanceHelperText",defaultMessage:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),E=n.formatMessage({id:"confluenceAuthentication.siteHelperText",defaultMessage:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),O=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",defaultMessage:"Click to learn how to get access token from Confluence cloud"}),W=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",defaultMessage:"Click to learn how to get personal authentication token from Confluence server"}),V=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",defaultMessage:"Click to learn how to know the version of Confluence you are running"}),U=n.formatMessage({id:"confluenceAuthentication.usernameHelpText",defaultMessage:"Username of the Confluence user importing the data"}),N=n.formatMessage({id:"confluenceAuthentication.passwordHelpText",defaultMessage:"Password of the Confluence user importing the data"});return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ie().A,{popupType:Te().A.isMobile?ie().z.SlideUp:ie().z.Popup,onClick:()=>{S().fJ(m,{import_source:"confluence",from:"settings_modal",userId:m.currentUser.id,spaceId:r.id,flowId:l}),j&&M({environment:m,requestStore:y,spaceId:r.id}).catch((()=>{}))},buttonPopupStore:$().A,render:e=>j?function(e){return b?(0,he.jsx)(he.Fragment,{}):w(e)}(P):(0,he.jsx)(le().A,{menuType:z().gu.Popup,width:200,children:(0,he.jsx)(ce().Ay,{onAccept:e.close,type:ce().Oh.Vertical,initialFocus:void 0,sections:[R]})}),renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...C,onClick:e})}),(0,he.jsx)(Ve().a,{open:null===(o=s[r.id])||void 0===o?void 0:o.open,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{at({key:"open",value:!1,spaceId:r.id})},render:()=>(0,he.jsx)(ct,{hidePopup:()=>{at({key:"open",value:!1,spaceId:r.id})},environment:m,title:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.emailMessage",defaultMessage:"Email"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>_,render:e=>(0,he.jsx)(re().A,{ariaLabel:_,disableBackground:!0,icon:De().G,...e})})]}),accountType:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.instanceMessage",defaultMessage:"Confluence instance"}),(0,he.jsx)(Ue().A,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>L,render:e=>(0,he.jsx)(re().A,{ariaLabel:L,disableBackground:!0,icon:De().G,...e})})]}),site:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.siteMessage",defaultMessage:"Site"}),(0,he.jsx)(Ue().A,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>E,render:e=>(0,he.jsx)(re().A,{ariaLabel:E,disableBackground:!0,icon:De().G,...e})})]}),APIToken:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>O,render:e=>(0,he.jsx)(re().A,{ariaLabel:O,onClick:()=>{window.open("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:De().G,...e})})]}),personalAccessToken:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"}),(0,he.jsx)(Ue().A,{placement:"right",style:{width:300,whiteSpace:"normal"},renderTooltip:()=>W,render:e=>(0,he.jsx)(re().A,{ariaLabel:W,onClick:()=>{window.open("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:De().G,...e})})]}),confluenceVersion:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.confluenceVersion",defaultMessage:"Confluence version"}),(0,he.jsx)(Ue().A,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>V,render:e=>(0,he.jsx)(re().A,{ariaLabel:V,onClick:()=>{window.open("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:De().G,...e})})]}),username:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.username",defaultMessage:"Username"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>U,render:e=>(0,he.jsx)(re().A,{ariaLabel:U,disableBackground:!0,icon:De().G,...e})})]}),password:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"confluenceAuthentication.password",defaultMessage:"Password"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>N,render:e=>(0,he.jsx)(re().A,{ariaLabel:N,disableBackground:!0,icon:De().G,...e})})]}),spaceId:r.id,flowId:l,requestStore:y})})]})}function rt(e){var t;const{onSelectOption:o,options:n,currentOption:s}=e,a=null===(t=n.find((({key:e})=>e===s)))||void 0===t?void 0:t.label,i=(0,r().IS)((e=>({icon:{width:10,marginInlineStart:4,fill:e.icon.tertiary}})),[]);return(0,he.jsx)(ie().A,{popupType:ie().z.Popup,placementToOrigin:"left",renderOrigin:e=>(0,he.jsxs)(Be().p,{...e,size:"lg",style:{opacity:1},disabled:!1,children:[a,(0,Re().b)(i.icon)]}),render:e=>{const t={menuType:z().gu.Popup,width:250,left:50},s=[{key:"settings-item-section",render:e=>(0,he.jsx)(pe().A,{...e}),items:n.map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,he.jsx)(Ee().A,{...e,title:n,shouldWrapCaption:!0,isChecked:a===n})})))}];return(0,he.jsx)(le().A,{...t,children:(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,sections:s,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}async function lt(e){await async function(e){const{environment:t,requestStore:o,userEmail:n,site:s,access_token:a,instance:i,spaceId:r,username:l,password:c,flowId:d}=e;if(S()._$(t,{import_source:"confluence",data:{import_type:"api",status:"initiated"},flowId:d}),!t.currentUser.id)return A().rG({message:"Invalid details"}),void C().V();const p=await w().callApi({eventName:"authenticateConfluenceUser",environment:t,data:{userEmail:n,site:s,access_token:a,instance:i,userId:t.currentUser.id,spaceId:r,username:l,password:c}});await o.refresh(),"failed"===p.type?(S()._$(t,{import_source:"confluence",data:{import_type:"api",status:"failure",error:p.error},flowId:d}),console.error(p.error),A().Qg(p)):(S()._$(t,{import_source:"confluence",data:{import_type:"api",status:"success"},flowId:d}),A().rG({message:"Successfully connected confluence instance."}),await M({environment:t,requestStore:o,spaceId:r})),C().V()}(e)}function ct({environment:e,title:t,email:o,accountType:n,site:s,APIToken:a,personalAccessToken:l,confluenceVersion:c,username:d,password:p,hidePopup:u,spaceId:m,flowId:g,requestStore:h}){const f=(0,i().K8)((()=>k.getState()),[]),y=(0,r().IS)((e=>({title:{fontWeight:me().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"}})),[]);return(0,he.jsx)(We().A,{debugName:"ConfluenceImportOption",capture:!0,children:(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,he.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,he.jsxs)("div",{style:{marginBottom:24},children:[(0,he.jsx)("div",{style:y.title,children:t}),(0,he.jsx)(Ne().A,{title:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",analyticsFrom:"import",style:{marginTop:8,marginInlineStart:-4}})]}),(0,he.jsxs)("div",{children:[(0,he.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,he.jsx)("label",{htmlFor:"accountType",style:{...y.inputLabels},children:n}),(0,he.jsx)(rt,{onSelectOption:e=>{at({key:"instanceValue",value:e,spaceId:m})},options:[{key:"Cloud",label:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",defaultMessage:"Cloud"})},{key:"Server",label:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",defaultMessage:"Server/On-Premise"})}],currentOption:f[m].instanceValue??"Cloud"})]}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0}),(0,he.jsx)("div",{children:"Server"===f[m].instanceValue?(0,he.jsxs)("div",{children:[(0,he.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"},children:[(0,he.jsx)("label",{htmlFor:"confluenceVersion",style:{...y.inputLabels},children:c}),(0,he.jsx)(rt,{onSelectOption:e=>{at({key:"confluenceAuthenticationTypeValue",value:e,spaceId:m})},options:[{key:"OAuth2.0",label:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",defaultMessage:"7.9 or later"})},{key:"Basic",label:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",defaultMessage:"Prior to 7.9"})}],currentOption:f[m].confluenceAuthenticationTypeValue??"OAuth2.0"})]}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0})]}):void 0}),(0,he.jsx)("label",{htmlFor:"email",style:{...y.inputLabels},children:o}),(0,he.jsx)(ze().A,{id:"email",value:f[m].emailValue,autoComplete:"off",autoCapitalize:"off",onChange:e=>{at({key:"emailValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"site",style:{...y.inputLabels},children:s}),(0,he.jsx)(ze().A,{id:"site",value:f[m].siteValue,onChange:e=>at({key:"siteValue",value:e.target.value,spaceId:m}),showClearButton:!0,placeholder:"Cloud"===f[m].instanceValue?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0}),"Cloud"===f[m].instanceValue?(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"APIToken",style:{...y.inputLabels},children:a}),(0,he.jsx)(ze().A,{id:"AccessToken",type:"password",value:f[m].tokenValue,onChange:e=>{at({key:"tokenValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]}):(0,he.jsx)("div",{children:(0,he.jsx)("div",{children:"Basic"===f[m].confluenceAuthenticationTypeValue?(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"username",style:{...y.inputLabels},children:d}),(0,he.jsx)(ze().A,{id:"username",value:f[m].usernameValue,onChange:e=>{at({key:"usernameValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"confluenceUser",inputElementAttributes:{minLength:1}}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0}),(0,he.jsx)("label",{htmlFor:"password",style:{...y.inputLabels},children:p}),(0,he.jsx)(ze().A,{type:"password",id:"password",value:f[m].passwordValue,onChange:e=>{at({key:"passwordValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"P@S$w0rd",inputElementAttributes:{minLength:1}})]}):(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"AccessToken",style:{fontSize:"14px",fontWeight:"400"},children:l}),(0,he.jsx)(ze().A,{id:"AccessToken",type:"password",value:f[m].tokenValue,onChange:e=>{at({key:"tokenValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})})})]})]})]}),(0,he.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,he.jsx)(Oe().A,{size:24}),(0,he.jsx)(Fe().A,{colorPalette:"blue",size:"lg",onClick:async()=>{const t=f[m].instanceValue??"Cloud",o=f[m].confluenceAuthenticationTypeValue??"OAuth2.0";await lt({environment:e,userEmail:f[m].emailValue,site:"/"===f[m].siteValue[f[m].siteValue.length-1]?f[m].siteValue.slice(0,-1):f[m].siteValue,access_token:"Server"===t&&"Basic"===o?void 0:f[m].tokenValue,instance:f[m].instanceValue??"Cloud",username:"Basic"===o?f[m].usernameValue:void 0,password:"Basic"===o?f[m].passwordValue:void 0,spaceId:m,flowId:g,requestStore:h}),u(),$().A.setState({open:!0})},children:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,he.jsx)(Pe().A,{size:"lg",style:{marginInlineStart:12},onClick:()=>{u()},children:(0,he.jsx)(v().sA,{id:"confluenceAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}var dt=()=>o(161479),pt=()=>o(496603),ut=()=>o(27579),mt=()=>o(372555),gt=(o(944114),()=>o(678553)),ht=()=>o(538739);const ft=function({analyticsName:e,sections:t,searchInputPlaceholder:o,onComplete:n,noSearchResultsPlaceholder:s}){const a=(0,i().uB)(void 0,Ge);return(0,He().l)((()=>{const e=a.state.selection,[o]=t;if(o){const[t]=o.items;t&&e.add(t.key)}a.emit()})),(0,he.jsx)(le().A,{menuType:z().gu.Popup,header:(0,he.jsx)(yt,{analyticsName:e,sections:t,searchInputPlaceholder:o,store:a}),footer:(0,he.jsx)(vt,{sections:t,onComplete:n,store:a}),width:280,maxHeight:350,children:(0,he.jsx)(xt,{sections:t,noSearchResultsPlaceholder:s,analyticsName:e,store:a})})};function yt({analyticsName:e,sections:t,searchInputPlaceholder:o,store:s}){const r=(0,a().v3)(),l=(0,n.useCallback)((()=>function(e,t,o){const{selection:n}=o.state;n.clear(),o.emit(),S().aq(e,{integration_name:t})}(r,e,s)),[r,e,s]),c=(0,n.useCallback)((()=>function(e,t,o,n){const{selection:s}=n.state;for(const a of t)for(const e of a.items)s.add(e.key);n.emit(),S().V(e,{integration_name:o})}(r,t,e,s)),[r,t,e,s]),d=(0,i().K8)((()=>s.state.searchQuery),[s]),p=Boolean(d);return(0,he.jsxs)(pe().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:[(0,he.jsx)(Je().Ay,{focus:!0,focusAfterAnimation:!0,value:d,onChange:e=>{s.setState({...s.state,searchQuery:e.target.value})},placeholder:o}),(0,he.jsx)(gt().Ay,{isTokenTitle:!0,style:{marginTop:2},title:(0,he.jsxs)("div",{style:{marginInlineStart:-3},children:[(0,he.jsx)(Be().p,{colorPalette:"gray",size:"xs",onClick:c,disabled:p,disabledFeedback:!0,children:(0,he.jsx)(v().sA,{id:"importPopup.selectAll",defaultMessage:"Select all"})}),(0,he.jsx)(ht().A,{disabled:p}),(0,he.jsx)(Be().p,{colorPalette:"gray",size:"xs",onClick:l,disabled:p,disabledFeedback:!0,children:(0,he.jsx)(v().sA,{id:"importPopup.deselectAll",defaultMessage:"Deselect all"})})]})})]})}function vt({sections:e,onComplete:t,store:o}){const s=(0,n.useCallback)((()=>function(e,t,o){const{selection:n}=o.state,s=pt().Bq(e.map((e=>e.items))),a=[];n.forEach((e=>{const t=s.find((t=>t.key===e));t&&a.push(t)})),t(a)}(e,t,o)),[e,t,o]),a=0===(0,i().K8)((()=>o.state.selection.size),[o]);return(0,he.jsx)(pe().A,{topBorder:!0,desktopStyle:{paddingTop:8,paddingBottom:8},children:(0,he.jsx)(gt().Ay,{title:(0,he.jsx)(Fe().A,{colorPalette:"blue",disabled:a,onClick:s,children:(0,he.jsx)(v().sA,{id:"integrationImportPopup.importButton.label",defaultMessage:"Import"})})})})}function xt({sections:e,noSearchResultsPlaceholder:t,analyticsName:o,store:n}){const s=(0,a().v3)(),{searchQuery:r,selection:l}=(0,i().K8)((()=>{const{searchQuery:e,selection:t}=n.state;return{searchQuery:e,selection:t}}),[n]),c=e.map((e=>{const t=(0,Ke().Ay)(r,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===c.length)return(0,he.jsx)(pe().A,{children:(0,he.jsx)(Ze().A,{title:t})});const d=c.map((t=>({key:t.name,render:o=>(0,he.jsx)(pe().A,{...o,title:e.length>1?t.name:void 0}),items:t.items.map((e=>{const t=()=>function(e,t,o,n){const{selection:s}=n.state;s.has(e.key)?(s.delete(e.key),S().VW(t,{integration_name:o})):(s.add(e.key),S().q5(t,{integration_name:o})),n.emit()}(e,s,o,n);return{key:e.key,render:o=>(0,he.jsx)(Ee().A,{...o,title:e.name,icon:(0,he.jsx)(qe().S,{checked:l.has(e.key),size:16,onClick:t}),right:void 0!==e.count&&(0,he.jsx)(Qe().A,{isSmall:!0,children:e.count})}),action:t}}))})));return(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:d})}const St=function({requestStore:e,analyticsFrom:t,evernoteResult:o,renderItemActionsButton:s,defaultActionButton:r,spaceStore:l,spaceViewStore:c,userSettingsStore:m,onComplete:g}){const h=(0,a().v3)(),f=(0,v().tz)(),y=(0,i().K8)((()=>mt().A.getState()),[]),x=(0,n.useCallback)((()=>async function(e,t,o){const{isFetchingNotebooks:n}=o;n&&await P().p({environment:e,requestStore:t})}(h,e,y)),[h,e,y]),{device:j}=h,{userInfo:A}=o,{notebooksResponse:b,showLoader:I}=y,k=(null==b?void 0:b.notebooks)||[],M=pt().$z(k,(e=>e.stack||""));(0,u().Yb)((async()=>{y.linkingAccount||(await e.refresh(),C().V())}),[y.linkingAccount,e]);const T=Object.keys(M).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(M[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),F={title:"Evernote",logo:p().A.images.import.evernotePng,shouldWrapCaption:!A,caption:A?A.name||A.username||A.email:f.formatMessage({id:"evernoteImportOption.actionsMenu.defaultCaption",defaultMessage:"Bring your notes and notebooks"}),actionButton:A&&I?(0,he.jsx)(d().k,{}):A?s([{name:f.formatMessage({id:"evernoteImportOption.actionsMenu.learnMore",defaultMessage:"Learn more"}),action:()=>function(e){(0,ut().L)({environment:e,url:(0,H().x)("guides.importEvernote")})}(h)},{name:f.formatMessage({id:"evernoteImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>Y().A.setState({open:!0})},{name:f.formatMessage({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>jt(e,h)},{name:f.formatMessage({id:"evernoteImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await w().callApi({eventName:"disconnectEvernote",environment:t,data:{}}),mt().A.setState({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await e.refresh(),S().kO(t,{integration_name:"evernote"})}(e,h)}]):r,onClick:()=>{}};return(0,he.jsx)(ie().A,{popupType:j.isMobile?ie().z.SlideUp:ie().z.Popup,buttonPopupStore:Y().A,onClick:x,render:()=>I?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(ft,{searchInputPlaceholder:f.formatMessage({id:"evernoteImportOption.search.placeholder",defaultMessage:"Search for a notebookâ€¦"}),noSearchResultsPlaceholder:f.formatMessage({id:"evernoteImportOption.search.noResultsPlaceholder",defaultMessage:"No notebooks"}),analyticsName:"evernote",sections:T,onComplete:e=>{!async function(e,t,o,n,s,a,i){const{notebooks:r}=e,l=r.filter((e=>Boolean(t.find((t=>t.key===e.guid))))),c=G().A.getOrCreateFlowId();S().Pd(i,{import_source:"evernote",count:t.length,flowId:c});const d=await B().U7({environment:i,spaceStore:o,spaceViewStore:n,userSettingsStore:s,notebooks:l,flowId:c});S().mM(i,{import_source:"evernote",data:{notebooks:l.map((e=>e.guid)),userId:i.currentUser.id,spaceId:(0,dt().e)(o.id)},flowId:c}),a(d,"evernote",c)}(b,e,l,c,m,g,h)}}),renderOrigin:({onClick:t})=>(0,he.jsx)(Se,{...F,onClick:async()=>{var o;const n=G().A.getOrCreateFlowId();S().fJ(h,{import_source:"evernote",from:"settings_modal",userId:h.currentUser.id,spaceId:null===(o=oe().default.state.sidebarSpaceStore)||void 0===o?void 0:o.id,flowId:n}),A?t():await jt(e,h)}})})};async function jt(e,t){await P().J({environment:t,requestStore:e})}var At=()=>o(415559),bt=()=>o(682022),It=()=>o(397740);const kt=new(ne().A);const wt=function({requestStore:e,renderItemActionsButton:t,spaceStore:o,spaceViewStore:s,pageStore:r,analyticsFrom:l,onComplete:c}){const d=(0,a().v3)(),u=(0,v().tz)(),{loading:m,areAccountsFetched:g,accountsResponse:h,selectedFileId:f}=(0,i().K8)((()=>{const{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:n}=It().A.state;return{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:n}}),[]),y=(0,i().K8)((()=>kt.state.open),[]),{device:x}=d,j=h.accounts,A=(0,n.useCallback)((async()=>{await Mt({environment:d,requestStore:e,areAccountsFetched:g,analyticsFrom:l,googleDriveResponse:h,pageStore:r,spaceStore:o,spaceViewStore:s,onComplete:c,selectedFileId:f})}),[d,e,g,l,r,c,s,o,h,f]),b={title:"Google Docs",logo:p().A.images.import.googleDocsPng,actionButton:j&&j.length>0&&t([{name:u.formatMessage({id:"googleDocImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:s,analyticsFrom:a,pageStore:i,onComplete:r}=e,l=G().A.getOrCreateFlowId();S()._$(s,{import_source:"googleDocs",data:{import_type:"api",status:"initiated"},flowId:l});const c=await At().W3(s);c?(S()._$(s,{import_source:"googleDocs",data:{import_type:"api",status:"success"},flowId:l}),await t.refresh(),ee().A.setState({...ee().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await Mt({environment:s,requestStore:t,areAccountsFetched:!1,analyticsFrom:a,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:n,onComplete:r,pageStore:i})):S()._$(s,{import_source:"googleDocs",data:{import_type:"api",status:"failure"},flowId:l})}({environment:d,requestStore:e,analyticsFrom:l,pageStore:r,spaceStore:o,spaceViewStore:s,onComplete:c})},{name:u.formatMessage({id:"googleDocImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove All Accounts"}),action:()=>async function(e,t,o){if(!o||0===o.length)return;o.forEach((async e=>{await w().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}})})),It().A.setState({...It().A.state,accountsResponse:{accounts:[]},loading:!1}),await e.refresh()}(e,d,j)}]),onClick:()=>{},caption:u.formatMessage({id:"googleDocsImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your documents seamlessly"})},I={type:"drive",title:(0,he.jsx)(v().sA,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async t=>await Ct({account:t,onComplete:c,requestStore:e,spaceStore:o,spaceViewStore:s,analyticsFrom:l,pageStore:r,environment:d,selectedFileId:f})};return(0,he.jsx)(ie().A,{open:y,popupType:x.isMobile?ie().z.SlideUp:ie().z.Popup,buttonPopupStore:kt,onClick:A,onClose:()=>{It().A.setState({...It().A.state,selectedFileId:void 0})},render:()=>m?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(bt().HR,{tab:I,accounts:j,type:bt().aD.Docs}),renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...b,onClick:e})})};async function Ct(e){const{account:t,requestStore:o,spaceStore:n,spaceViewStore:s,environment:a,analyticsFrom:i,pageStore:r,onComplete:l,selectedFileId:c}=e;t&&t.token||await async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:s,analyticsFrom:a,pageStore:i,onComplete:r,selectedFileId:l}=e;await At().W3(s),await t.refresh(),await Mt({environment:s,requestStore:t,areAccountsFetched:!1,analyticsFrom:a,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:n,onComplete:r,pageStore:i,selectedFileId:l})}({environment:a,requestStore:o,analyticsFrom:i,spaceStore:n,spaceViewStore:s,onComplete:l,pageStore:r,selectedFileId:c}),t&&t.token&&(c?await Tt({fileId:c,token:t.token,environment:a,spaceStore:n,spaceViewStore:s,analyticsFrom:i,onComplete:l,pageStore:r}):await(0,E().openGoogleDriveFilePicker)({environment:a,accessToken:t.token.accessToken,viewType:"documents",from:"import_google_doc",mimeType:"application/vnd.google-apps.document",callback:async e=>{await Tt({fileId:e,token:t.token,environment:a,spaceStore:n,spaceViewStore:s,analyticsFrom:i,onComplete:l,pageStore:r})}}),kt.setState({...kt.state,open:!1}))}async function Mt(e){var t;const{requestStore:o,spaceStore:n,spaceViewStore:s,environment:a,analyticsFrom:i,pageStore:r,onComplete:l,googleDriveResponse:c,areAccountsFetched:d,selectedFileId:p}=e,u=G().A.getOrCreateFlowId();S().fJ(a,{import_source:"googleDocs",from:i,userId:a.currentUser.id,spaceId:null===(t=oe().default.state.sidebarSpaceStore)||void 0===t?void 0:t.id,flowId:u});let m=c;d||(It().A.setState({...It().A.state,loading:!0}),m=await At().QZ(a),m&&m.accounts&&It().A.setState({...It().A.state,accountsResponse:m,areAccountsFetched:!0,loading:!1}));const g=m&&1===m.accounts.length?m.accounts[0]:void 0;return g?await Ct({account:g,onComplete:l,requestStore:o,spaceStore:n,spaceViewStore:s,analyticsFrom:i,pageStore:r,environment:a,selectedFileId:p}):(kt.setState({...kt.state,open:!0}),await o.refresh()),m}async function Tt(e){const{fileId:t,token:o,environment:n,spaceStore:s,spaceViewStore:a,analyticsFrom:i,onComplete:r,pageStore:l}=e;if(!l)return;It().A.setState({...It().A.state,loading:!0});const c=G().A.getOrCreateFlowId();await B().ZB({environment:n,fileId:t,token:o,spaceStore:s,spaceViewStore:a,pageStore:l,analyticsFrom:i,flowId:c}).then((e=>{r(e,"googleDocs",c),e&&x().vH(n,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()})})).catch((()=>{})),It().A.setState({...It().A.state,loading:!1,selectedFileId:void 0})}o(737550);var Pt=()=>o(485444);const Bt=function(e){const t=(0,a().v3)(),{device:n}=t,{jiraResult:r,spaceStore:l,requestStore:c,analyticsFrom:d}=e,u=(0,i().K8)((()=>(0,q().p)(l)),[l]),m=(0,i().K8)((()=>(0,o(272509).I)(l)),[l]),{account:g,isOwner:h}=(0,i().K8)((()=>{const e=r.account;if(e){const t=o(53137).A.state;if(t.loaded){const o=e.find((e=>t.externalAuthentications.some((t=>t.id===e.id))));return o?{account:o,isOwner:Boolean(o)}:{account:e[0],isOwner:!1}}}return{}}),[r]),f=(0,v().tz)(),y=[{name:f.formatMessage({id:"jiraImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{Pt().j({environment:t,from:"import_settings",action:"add_account"});const e=Z().Ay.createNewFlowId();(0,s().u)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}}];g&&h&&y.push({name:f.formatMessage({id:"jiraImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>{Le().ml({environment:t,requestStore:c,botId:g.id})}});const x=(null==g?void 0:g.site)??f.formatMessage({id:"jiraImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your issues and projects"}),j={title:"Jira",logo:p().A.images.externalIntegrations.jiraIconPng,onClick:()=>{},caption:x,actionButton:u&&g?e.renderItemActionsButton(y):null,showNewBadge:e.showNewBadge,showSyncBadge:e.showSyncBadge};return m?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(ie().A,{renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...j,onClick:()=>{var e;const o=G().A.getOrCreateFlowId();S().fJ(t,{import_source:"jira",from:d,userId:t.currentUser.id,spaceId:null===(e=oe().default.state.sidebarSpaceStore)||void 0===e?void 0:e.id,flowId:o}),Z().Ay.setState({...Z().Ay.state,flowId:o,spaceId:l.id,botId:null==g?void 0:g.id}),Pt().j({environment:t,from:"import_settings",action:"show_teamspaces"}),(0,s().u)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:o}}})}}),popupType:n.isMobile?ie().z.SlideUp:ie().z.Popup,render:()=>(0,he.jsx)(he.Fragment,{})})};var Ft=()=>o(468093);const Rt={whiteSpace:"pre-wrap"};function Dt(e){const t=(0,v().tz)(),o=(0,i().O$)(Q().A),{environment:n,spaceStore:s,flowId:a}=e,r=t.formatMessage({id:"mondayAuthentication.emailHelpText",defaultMessage:"Email address of the Monday.com user importing the data"}),l=t.formatMessage({id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",defaultMessage:"Click to learn how to get API token from Monday.com"});return(0,he.jsx)(Ve().a,{open:o.showAuthPopup,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!1})},render:()=>(0,he.jsx)(_t,{hidePopup:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!1})},environment:n,title:(0,he.jsx)(v().sA,{id:"mondayAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"mondayAuthentication.emailMessage",defaultMessage:"Email"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>r,render:e=>(0,he.jsx)(re().A,{...e,ariaLabel:r,disableBackground:!0,icon:De().G})})]}),APIToken:(0,he.jsxs)(Xe().Ye,{style:{alignItems:"center",gap:2},children:[(0,he.jsx)(v().sA,{id:"mondayAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,he.jsx)(Ue().A,{placement:"right",renderTooltip:()=>l,render:e=>(0,he.jsx)(re().A,{...e,ariaLabel:l,onClick:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:De().G})})]}),flowId:a,spaceStore:s})})}function _t({environment:e,title:t,email:o,APIToken:n,hidePopup:s,flowId:a,spaceStore:l}){const c=(0,i().O$)(Q().A),d=(0,r().IS)((e=>({title:{fontWeight:me().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"}})),[]);return(0,he.jsx)(We().A,{debugName:"MondayImportOption",capture:!0,children:(0,he.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,he.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,he.jsxs)("div",{style:{marginBottom:24},children:[(0,he.jsx)("div",{style:d.title,children:t}),(0,he.jsx)(Ft().W,{style:{marginInlineStart:-4}})]}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"email",style:{...d.inputLabels},children:o}),(0,he.jsx)(ze().A,{id:"email",value:c.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Q().A.setState({...Q().A.state,email:e.target.value})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,he.jsx)(Oe().A,{size:12,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"APIToken",style:{...d.inputLabels},children:n}),(0,he.jsx)(ze().A,{id:"AccessToken",type:"password",value:c.APIToken,onChange:e=>{Q().A.setState({...Q().A.state,APIToken:e.target.value})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})]})]}),(0,he.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,he.jsx)(Oe().A,{size:24}),(0,he.jsx)(Fe().A,{colorPalette:"blue",size:"lg",onClick:async()=>{await F().Sq({environment:e,userEmail:c.email,APIToken:c.APIToken,flowId:a,spaceId:l.id}),s(),await F().Jq({environment:e,spaceId:l.id}),F().qf()},children:(0,he.jsx)(v().sA,{id:"mondayAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,he.jsx)(Pe().A,{size:"lg",style:{marginInlineStart:12},onClick:()=>{s()},children:(0,he.jsx)(v().sA,{id:"mondayAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const Lt=function(e){const t=(0,i().O$)(Q().A),o=(0,i().O$)(G().A),{account:s,isLoadingMondayWorkspaces:r}=t,{spaceStore:l}=e,c=(0,a().v3)(),u=(0,v().tz)(),{device:g}=c,h=o.flowId||f().JW();(0,n.useEffect)((()=>{o.flowId||G().A.setState({flowId:h})}),[h,o]);const y={title:u.formatMessage({id:"mondayImportOption.mondayButton.title",defaultMessage:"Monday.com"}),logo:p().A.images.import.mondayPng,showNewBadge:!1,caption:s??u.formatMessage({id:"mondayImportOption.actionsMenu.defaultCaption",defaultMessage:"Migrate your workspaces and tasks"}),actionButton:s?(x=[{name:u.formatMessage({id:"mondayImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{Q().A.setState({...Q().A.state,showAuthPopup:!0})}},{name:u.formatMessage({id:"mondayImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>F().pX({environment:c,spaceId:l.id})}],(0,he.jsx)(ie().A,{popupType:de().nl.Popup,renderOrigin:e=>r?(0,he.jsx)(d().k,{}):(0,he.jsx)(re().A,{ariaLabel:u.formatMessage({id:"mondayImportOption.mondayButton.ariaLabel",defaultMessage:"Import from Monday.com button"}),icon:m()._,...e}),render:e=>{const t=x.map((({name:t,captionText:o,action:n})=>{const s={key:t,render:e=>(0,he.jsx)(ae().A,{...e,title:t,caption:o,captionStyle:o?Rt:void 0}),action:()=>{n(),e.close()}};return s})),o={key:"section",render:e=>(0,he.jsx)(pe().A,{...e}),items:t};return(0,he.jsx)(le().A,{menuType:z().gu.Popup,width:200,children:(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var x;return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ie().A,{onClick:async()=>{S().fJ(c,{import_source:"monday",from:e.analyticsFrom,userId:c.currentUser.id,spaceId:l.id,flowId:h}),Q().A.resetImport(),s?(await F().Jq({environment:c,spaceId:l.id}),F().qf()):Q().A.setState({...Q().A.state,showAuthPopup:!0})},popupType:g.isMobile?ie().z.SlideUp:ie().z.Popup,buttonPopupStore:se,renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...y,onClick:e}),render:()=>null}),(0,he.jsx)(Dt,{environment:c,spaceStore:l,flowId:h})]})};var Et=()=>o(940563),Ot=()=>o(66913),Wt=()=>o(426388),zt=()=>o(997769),Vt=(o(16280),()=>o(179034)),Ut=()=>o(319625);const Nt=(0,o(583835).Dv)("importQuip");var Ht=()=>o(972435);class qt extends b().Store{getInitialState(){return{showAuthPopup:!1,email:void 0,spaceId:void 0,personalAccessToken:void 0,companyId:void 0,account:void 0,accountEmail:void 0,isFetchingAccount:!1,authResponse:void 0,invalidFields:[]}}resetImport(){const{account:e,accountEmail:t}=this.getState();this.setState({...this.getInitialState(),account:e,accountEmail:t})}}const Kt=new qt;var $t=()=>o(148832),Yt=()=>o(357625);const Gt=(0,v().YK)({importFailed:{id:"quipActions.importFailedError.message",defaultMessage:"Import failed"},importingFromQuipMessage:{id:"quipActions.importingFromQuip.loadingMessage",defaultMessage:"Importing from quip."}});async function Jt(e){const{environment:t,spaceStore:o}=e;if(!t.currentUser.id)throw new Error("User does not exist");let n,s;C().m({message:Gt.importingFromQuipMessage}),Kt.setState({...Kt.state});try{const e=await w().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o.id}});if("success"!==e.type)throw new Error("User account does not exist");n=e.data.email;const a=(0,Yt().UT)(t,Nt,{userId:t.currentUser.id,email:n,page:{spaceId:o.id}},{spaceIds:[]});for await(const t of a){if(t.error)throw t.error;t.value.isComplete||(t.value.rootPageId&&(s=t.value.rootPageId),C().m(t.value.status))}if(!s)throw new Error("No root page");C().V();return $t().B.createChildStore(o,{id:s,table:Vt().ev,spaceId:o.id})}catch(a){throw A().f1(Ht().A.formatMessage(Gt.importFailed)),C().V(),new Error((0,Ut().A)(a).message)}}var Zt=()=>o(719147);const Qt={whiteSpace:"pre-wrap"},Xt=(0,v().YK)({authenticationFailed:{id:"quipActions.authenticationFailed.message",defaultMessage:"Authentication Failed (Please check user details)"},disconnectFailed:{id:"quipActions.disconnectFailed.message",defaultMessage:"Disconnect Account Failed"},headerTitle:{id:"quipActions.header.title",defaultMessage:"Import from Quip"},importCta:{id:"quipActions.importCta",defaultMessage:"Import"}});function eo(){return(0,r().IS)((e=>({title:{fontWeight:me().Wy.semibold},inputLabels:{fontSize:me().J.UISmall.desktop,fontWeight:me().Wy.semibold,font:"SF Pro",lineHeight:me().K_.UISmall.desktop,color:e.text.tertiary},placeHolder:{font:"SF Pro",fontWeight:me().Wy.regular,fontSize:me().J.UIRegular.desktop,lineHeight:me().K_.UISmall.desktop},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.text.tertiary},inputBox:{width:"100%",height:28,padding:4,gap:4,radius:"default"},captionText:{font:"SF Pro",fontWeight:me().Wy.regular,lineHeight:me().K_.UISmall.desktop,fontSize:me().J.UISmall.desktop,color:e.text.tertiary},spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,insetInlineStart:0},wrapper:{paddingTop:20,paddingInlineEnd:14,paddingBottom:10,paddingInlineStart:14,height:"100%",display:"flex",flexDirection:"column"},header:{fontWeight:me().Wy.medium,fontSize:17,textAlign:"center",marginTop:8},description:{fontWeight:me().Wy.regular,color:e.text.secondary,fontSize:me().J.UIRegular.desktop,maxHeight:72,textAlign:"center",padding:"0px 68px",marginBottom:24},icon:{height:40,width:40},iconGroup:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gridColumnGap:9,marginBottom:9},arrowRight:{width:20,height:20,opacity:.4,fontWeight:me().Wy.bold,padding:3},notionLogo:{height:40,width:40,color:e.icon.primary},closeButton:{position:"absolute",top:14,insetInlineEnd:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.text.secondary},headerWrapper:{marginBottom:18},invalidInput:{boxShadow:e.inputRedFocusRing},buttonItem:{color:e.text.secondary}})),[])}function to(e){const t=(0,i().O$)(Kt),o=eo(),{isFetchingAccount:n}=t,{environment:s,spaceStore:a,onComplete:r}=e;return(0,he.jsx)(Ve().a,{open:t.showAuthPopup,innerStyle:{width:450,height:"fit-content",overflow:"scroll",borderRadius:5,maxHeight:675,minHeight:300,padding:6},onDismiss:()=>{Kt.setState({...Kt.state,invalidFields:[],showAuthPopup:!1,personalAccessToken:"",email:""})},render:()=>n?(0,he.jsx)(oo,{loading:t.isFetchingAccount}):(0,he.jsxs)("div",{style:o.wrapper,children:[(0,he.jsx)(so,{handleModalClose:()=>{Kt.setState({...Kt.state,showAuthPopup:!1})}}),(0,he.jsx)(no,{email:(0,he.jsx)(Xe().Ye,{style:{alignItems:"center",gap:2},children:(0,he.jsx)(v().sA,{id:"quipAuthentication.emailMessage",defaultMessage:"Email"})}),personalAccessToken:(0,he.jsx)(Xe().Ye,{style:{alignItems:"center",gap:2},children:(0,he.jsx)(v().sA,{id:"quipAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"})})}),(0,he.jsx)(ao,{children:(0,he.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,he.jsx)(Fe().A,{colorPalette:"blue",onClick:async()=>{await async function(e){const{environment:t,email:o,personalAccessToken:n,spaceStore:s,companyId:a,account:i}=e,r=function(e){const{email:t,personalAccessToken:o}=e,n=[];t&&zt().t6(t,"email")||n.push("email");o||n.push("personalAccessToken");return n}({email:o,personalAccessToken:n});if(r.length)return void Kt.setState({...Kt.state,showAuthPopup:!0,isFetchingAccount:!1,invalidFields:r});if(i){if(!(await lo({environment:t,spaceStore:s})))return}const l=await async function(e){const{environment:t,email:o,personalAccessToken:n,spaceId:s,companyId:a}=e;if(Kt.setState({...Kt.state,isFetchingAccount:!0}),!(t.currentUser.id&&o&&s&&n))return;const i=await w().callApi({eventName:"authenticateQuipUser",environment:t,data:{userId:t.currentUser.id,email:o,personalAccessToken:n,spaceId:s,companyId:a}});return i&&"failed"!==i.type?i.data:void 0}({environment:t,email:o,personalAccessToken:n,spaceId:s.id,companyId:a});void 0===l?(A().rG({message:Ht().A.formatMessage(Xt.authenticationFailed)}),Kt.setState({...Kt.state,showAuthPopup:!0,isFetchingAccount:!1})):Kt.setState({...Kt.state,showAuthPopup:!1,isFetchingAccount:!1})}({environment:s,email:t.email,spaceStore:a,personalAccessToken:t.personalAccessToken,companyId:t.companyId,account:t.account});const e=await Jt({environment:s,spaceStore:a});r(e,"quip")},children:(0,he.jsx)(v().sA,{...Xt.importCta})})})})]})})}function oo(e){const t=eo();return(0,he.jsx)(he.Fragment,{children:e.loading?(0,he.jsx)("div",{style:t.spinner,children:(0,he.jsx)(d().A,{style:{position:"absolute",top:"50%",insetInlineStart:"50%"}})}):void 0})}function no({email:e,personalAccessToken:t}){const o=(0,i().O$)(Kt),n=eo();return(0,he.jsx)(We().A,{debugName:"QuipImportOption",capture:!0,children:(0,he.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%"},children:(0,he.jsx)("div",{style:{overflowY:"scroll"},children:(0,he.jsxs)("div",{style:{padding:2},children:[(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"email",style:{...n.inputLabels},children:e}),(0,he.jsx)(Oe().A,{size:8,isHidden:!0}),(0,he.jsx)(ze().A,{id:"email",value:o.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{Kt.setState({...Kt.state,email:e.target.value,invalidFields:[]})},showClearButton:!0,placeholder:"notion@acmelabs.com",style:{...n.inputBox,...o.invalidFields.includes("email")&&n.invalidInput}})]}),(0,he.jsx)(Oe().A,{size:14,isHidden:!0}),(0,he.jsxs)("div",{children:[(0,he.jsx)("label",{htmlFor:"personalAccessToken",style:{...n.inputLabels},children:t}),(0,he.jsx)(Oe().A,{size:8,isHidden:!0}),(0,he.jsx)(ze().A,{id:"personalAccessToken",type:"password",value:o.personalAccessToken,showClearButton:!0,onChange:e=>{Kt.setState({...Kt.state,personalAccessToken:e.target.value,invalidFields:[]})},placeholder:"Paste your token here",inputElementAttributes:{minLength:4},style:{...n.inputBox,...o.invalidFields.includes("personalAccessToken")&&n.invalidInput}}),(0,he.jsx)(Oe().A,{size:8,isHidden:!0}),(0,he.jsx)("div",{style:{...n.captionText,marginBottom:18},children:(0,he.jsx)(v().sA,{id:"quipAuthentication.stepsToGetPersonalAccessToken",defaultMessage:"<getapitokenlink>Get Personal Access Token</getapitokenlink>",values:{getapitokenlink:(...e)=>(0,he.jsx)(Zt().A,{external:!0,href:"https://quip.com/dev/token",onClick:()=>{},children:e})}})})]})]})})})})}function so({handleModalClose:e,caption:t,title:o}){const n=eo(),s=o||Xt.headerTitle;return(0,he.jsxs)("div",{style:n.headerWrapper,children:[(0,he.jsx)(ue().Ay,{onClick:e,style:n.closeButton,hoveredStyle:n.closeButtonHover,children:(0,Ot().V)(n.closeButtonIcon)}),(0,he.jsxs)("div",{style:n.iconGroup,children:[(0,he.jsx)("img",{style:n.icon,src:p().A.images.import.quipPng,alt:"Quip Icon"}),(0,Et().arrowStraightRightIcon)(n.arrowRight),(0,Wt().S)(n.notionLogo)]}),(0,he.jsx)("div",{style:n.header,children:(0,he.jsx)(v().sA,{...s})}),t]})}function ao(e){return(0,he.jsx)("div",{children:e.children})}const io=function(e){const t=(0,i().O$)(G().A),o=(0,i().O$)(Kt),{spaceStore:s,onComplete:r}=e,{account:l,authResponse:c,accountEmail:d}=o,u=(0,a().v3)(),g=(0,v().tz)(),{device:h}=u,y=eo(),x=(0,n.useCallback)((async()=>{await async function(e){const{environment:t,spaceStore:o,account:n,authResponse:s}=e;if(n)Kt.setState({...Kt.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0});else{Kt.setState({...Kt.state,isFetchingAccount:!0});let e=s;void 0===e&&(e=await async function(e){const{environment:t,spaceId:o}=e;let n={account:"",email:""};try{const e=await w().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o}});"success"===e.type&&(n=e.data)}catch(s){}finally{return n}}({environment:t,spaceId:o.id})),e&&""!==e.account?Kt.setState({...Kt.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0,account:e.account,accountEmail:e.email}):Kt.setState({...Kt.state,isFetchingAccount:!1,showAuthPopup:!0})}}({environment:u,account:l,spaceStore:s,authResponse:c})}),[u,l,s,c]),S=t.flowId||f().JW();(0,n.useEffect)((()=>{t.flowId||G().A.setState({flowId:S})}),[S,t]);const j={title:g.formatMessage({id:"quipImportOption.quipButton.title",defaultMessage:"Quip"}),logo:p().A.images.import.quipPng,caption:l??g.formatMessage({id:"quipImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your collaborative documents"}),actionButton:l?(A=[{name:g.formatMessage({id:"quipImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{ro({})}},{name:g.formatMessage({id:"quipImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove account"}),action:async()=>{await lo({environment:u,spaceStore:s})}}],(0,he.jsx)(ie().A,{popupType:de().nl.Popup,renderOrigin:e=>(0,he.jsx)(re().A,{ariaLabel:g.formatMessage({id:"quipImportOption.quipButton.ariaLabel",defaultMessage:"Import from Quip.com button"}),icon:m()._,...e}),render:e=>{const t=A.map((({name:t,captionText:o,action:n})=>{const s={key:t,render:e=>(0,he.jsx)(ae().A,{...e,title:t,caption:o,captionStyle:o?Qt:void 0}),action:()=>{n(),e.close()}};return s})),o={key:"section",render:e=>(0,he.jsx)(pe().A,{...e}),items:t};return(0,he.jsx)(le().A,{menuType:z().gu.Popup,width:200,children:(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var A;return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(ie().A,{onClick:x,popupType:h.isMobile?ie().z.SlideUp:ie().z.Popup,renderOrigin:({onClick:e})=>(0,he.jsx)(Se,{...j,onClick:e}),render:()=>l?(0,he.jsxs)(n.Fragment,{children:[(0,he.jsx)(pe().A,{children:(0,he.jsx)(Ee().A,{title:(0,he.jsx)(v().sA,{defaultMessage:"Import from {email}",id:"quipImportOption.menuItem.email.label",values:{email:d}}),onClick:async()=>{const e=await Jt({environment:u,spaceStore:s});r(e,"quip")},focused:!1})}),(0,he.jsx)(pe().A,{topBorder:!0,children:(0,he.jsx)(Ee().A,{title:(0,he.jsx)(v().sA,{defaultMessage:"Connect another account",id:"quipImportOption.menuItem.connectAnotherQuipAccount.label"}),onClick:()=>ro({}),style:y.buttonItem,focused:!1})})]}):null}),(0,he.jsx)(to,{environment:u,spaceStore:s,flowId:S,onComplete:r})]})};function ro(e){Kt.setState({...Kt.state,isFetchingAccount:!1,showAuthPopup:!0,personalAccessToken:void 0,email:void 0,companyId:void 0})}async function lo(e){const{environment:t,spaceStore:o}=e,n=await async function(e){const{environment:t,spaceId:o}=e,n=await w().callApi({eventName:"disconnectQuipAccount",environment:t,data:{spaceId:o}});if(n&&"failed"!==n.type)return n.data}({environment:t,spaceId:o.id});return void 0===n?(A().rG({message:Ht().A.formatMessage(Xt.disconnectFailed)}),!1):(Kt.setState({...Kt.state,account:void 0,accountEmail:void 0}),!0)}const co=function({requestStore:e,analyticsFrom:t,trelloResult:o,renderItemActionsButton:s,spaceStore:r,spaceViewStore:l,onComplete:c}){const u=(0,a().v3)(),m=(0,v().tz)(),{boardsResponse:g,showLoader:h,isFetchingBoards:f}=(0,i().K8)((()=>{const{boardsResponse:e,showLoader:t,isFetchingBoards:o}=te().A.state;return{boardsResponse:e,showLoader:t,isFetchingBoards:o}}),[]),y=(0,n.useCallback)((()=>async function(e,t,o,n){const s=G().A.getOrCreateFlowId();S().fJ(e,{import_source:"trello",from:o,flowId:s}),n&&await R()._(e,t).then((()=>{J().A.setState({open:!0})})).catch((()=>{te().A.setState({...te().A.state,isFetchingBoards:!0,showLoader:!1}),J().A.setState({open:!1})}))}(u,e,t,f)),[u,e,t,f]),{device:x}=u,{account:j}=o,A=g.boards,b={key:"default",name:m.formatMessage({id:"trelloImportOption.boardProperty.defaultName",defaultMessage:"Boards"}),items:A.map((e=>({key:e.id,name:e.name})))},I={title:"Trello",logo:p().A.images.import.trelloPng,caption:j??m.formatMessage({id:"trelloImportOption.actionsMenu.defaultCaption",defaultMessage:"Move over your boards and cards"}),actionButton:j&&h?(0,he.jsx)(d().k,{}):j&&s([{name:m.formatMessage({id:"trelloImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>J().A.setState({open:!0})},{name:m.formatMessage({id:"trelloImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>po(e,u)},{name:m.formatMessage({id:"trelloImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await w().callApi({eventName:"disconnectTrello",environment:t,data:{}}),te().A.setState({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await e.refresh(),S().kO(t,{integration_name:"trello"})}(e,u)}]),onClick:()=>{}};return(0,he.jsx)(ie().A,{popupType:x.isMobile?ie().z.SlideUp:ie().z.Popup,buttonPopupStore:J().A,onClick:y,render:()=>h?(0,he.jsx)(he.Fragment,{}):(0,he.jsx)(ft,{searchInputPlaceholder:m.formatMessage({id:"trelloImportOption.search.placeholder",defaultMessage:"Search for a boardâ€¦"}),noSearchResultsPlaceholder:m.formatMessage({id:"trelloImportOption.search.noResultsPlaceholder",defaultMessage:"No boards found."}),analyticsName:"trello",sections:[b],onComplete:e=>async function(e,t,o,n,s,a){const{boards:i}=e,r=i.filter((e=>Boolean(t.find((t=>t.key===e.id))))),l=G().A.getOrCreateFlowId();S().Pd(a,{import_source:"trello",count:t.length,flowId:l});const c=await B().MW({environment:a,spaceStore:o,spaceViewStore:n,boards:r,flowId:l});S().mM(a,{import_source:"trello",data:{notebooks:r.map((e=>e.id)),userId:a.currentUser.id,spaceId:(0,dt().e)(o.id)},flowId:l}),s(c,"trello",l)}(g,e,r,l,c,u)}),renderOrigin:({onClick:t})=>(0,he.jsx)(Se,{...I,onClick:j?t:()=>po(e,u)})})};async function po(e,t){await R().P({environment:t,requestStore:e})}var uo=()=>o(894612);const mo={display:"flex",alignItems:"center",justifyContent:"center",minHeight:240,width:"100%",overflow:"hidden"},go=["csv","pdf","markdown","html","word"],ho=["asana","confluence","trello","workflowy","evernote","jira","monday","quip","googleDoc"];function fo({analyticsFrom:e,spaceStore:t,onComplete:o,spaceViewStore:s,userSettingsStore:c,pageStore:p}){const u=(0,a().v3)(),m=(0,r().DP)(),[g,h]=(0,n.useState)(!1),f=(0,i().uB)(void 0,X().A),y=(0,i().uB)(void 0,X().A),x=(0,i().uB)(void 0,X().A),S=(0,i().uB)(void 0,X().A),j=(0,i().uB)(void 0,X().A),A=(0,i().O$)(l().e),b=(0,i().K8)((()=>ee().A.getState().defaultSubtab),[]),I=(0,n.useCallback)((e=>{y.refresh=e.confluence,x.refresh=e.evernote,j.refresh=e.googleDoc,f.refresh=e.jira,S.refresh=e.trello}),[y,x,j,f,S]),k=(0,i().K8)((()=>Ao()),[]),w=(0,n.useCallback)((n=>n?(g||(h(!0),xo({defaultSubtab:b,pageStore:p,spaceStore:t,spaceViewStore:s,trelloRequestStore:S,evernoteRequestStore:x,confluenceRequestStore:y,googleDocRequestStore:j,result:n,environment:u,onComplete:o,analyticsFrom:e,flowId:k})),ee().A.setState({...ee().A.state,defaultSubtab:void 0}),(0,he.jsx)("div",{style:mo,children:(0,he.jsx)(Ro,{analyticsFrom:e,onComplete:o,spaceStore:t,spaceViewStore:s,userSettingsStore:c,pageStore:p,trelloRequestStore:S,evernoteRequestStore:x,confluenceRequestStore:y,jiraRequestStore:f,googleDocRequestStore:j,result:n})})):(0,he.jsx)("div",{style:"onboarding"===e?{}:mo,children:(0,he.jsx)(d().k,{})})),[e,y,u,x,k,j,f,o,p,b,t,s,S,c,g]);return A?(0,he.jsx)(Co,{spaceStore:t,setRefreshers:I,renderChildren:w}):(0,he.jsx)("div",{style:{...mo,fontSize:14,color:m.text.secondary},children:(0,he.jsx)(v().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}function yo({analyticsFrom:e,spaceStore:t,onComplete:o,spaceViewStore:n,userSettingsStore:s,pageStore:c}){const p=(0,a().v3)(),u=(0,r().DP)(),m=(0,i().uB)(void 0,X().A),g=(0,i().uB)(void 0,X().A),h=(0,i().uB)(void 0,X().A),f=(0,i().uB)(void 0,X().A),y=(0,i().uB)(void 0,X().A),x=(0,i().uB)(void 0,X().A),S=(0,i().uB)(void 0,X().A),j=(0,i().O$)(l().e),A=(0,i().K8)((()=>ee().A.getState().defaultSubtab),[]),b=(0,i().K8)((()=>Ao()),[]);return j?(0,he.jsx)(Mo,{spaceStore:t,trelloRequestStore:x,asanaRequestStore:y,evernoteRequestStore:f,confluenceRequestStore:h,mondayRequestStore:g,jiraRequestStore:m,googleDocRequestStore:S,renderChildren:a=>a?(xo({defaultSubtab:A,pageStore:c,spaceStore:t,spaceViewStore:n,trelloRequestStore:x,evernoteRequestStore:f,confluenceRequestStore:h,googleDocRequestStore:S,result:a,environment:p,onComplete:o,analyticsFrom:e,flowId:b}),ee().A.setState({...ee().A.state,defaultSubtab:void 0}),(0,he.jsx)("div",{style:mo,children:(0,he.jsx)(Ro,{analyticsFrom:e,onComplete:o,spaceStore:t,spaceViewStore:n,userSettingsStore:s,pageStore:c,trelloRequestStore:x,evernoteRequestStore:f,confluenceRequestStore:h,jiraRequestStore:m,googleDocRequestStore:S,result:a})})):(0,he.jsx)("div",{style:"onboarding"===e?{}:mo,children:(0,he.jsx)(d().k,{})})}):(0,he.jsx)("div",{style:{...mo,fontSize:14,color:u.text.secondary},children:(0,he.jsx)(v().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}const vo=function(e){return(0,o(59226).X)("use_new_import_options")?(0,he.jsx)(fo,{...e}):(0,he.jsx)(yo,{...e})};function xo({defaultSubtab:e,environment:t,pageStore:o,spaceStore:n,spaceViewStore:a,trelloRequestStore:i,evernoteRequestStore:r,confluenceRequestStore:l,googleDocRequestStore:c,result:d,onComplete:p,analyticsFrom:u,flowId:m}){if(e){if(!y().fF.includes(e)||"googleDocs"===e&&d.googleDocResult.isGoogleDocImporterEnabled||"csv"===e&&(0,_().v)())switch(e){case"trello":!function(e,t,o,n){const s=o.account;s?R()._(e,t).then((()=>{J().A.setState({open:!0})})).catch((()=>{te().A.setState({...te().A.state,isFetchingBoards:!0,showLoader:!1}),J().A.setState({open:!1})})):R().P({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(t,i,d.trelloResult);break;case"evernote":!function(e,t,o,n){const{userInfo:s}=o;s?P().p({environment:e,requestStore:t}).then((()=>{Y().A.setState({open:!0})})).catch((()=>{})):P().J({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(t,r,d.evernoteResult);break;case"monday":!function(e,t,o,n){t.user?F().Jq({environment:e,spaceId:o}).then((()=>{Q().A.setState({...Q().A.state,currentTab:"selectData",isModalOpen:!0})})).catch((()=>{})):Q().A.setState({...Q().A.state,showAuthPopup:!0})}(t,d.mondayResult,n.id);break;case"confluenceApi":!function(e,t,o,n,s){const{account:a}=t;ee().A.setState({...ee().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),a?M({environment:e,requestStore:n,spaceId:o}).then((()=>{$().A.setState({open:!0})})).catch((()=>{k.setState({...k.state,[o]:{...k.state[o],showLoader:!1}})})):k.setState({...k.state,[o]:{...k.state[o],open:!0}})}(t,d.confluenceResult,n.id,l);break;case"asana":!function(e,t,o){const{account:n}=t;n?j().xd({environment:e}).then((()=>{K().A.setState({...K().A.state,isModalOpen:!0})})).catch((()=>{K().A.setState({...K().A.state,isAccountLinkingInProgress:!1,isModalOpen:!1})})):j().x3({environment:e,flowId:f().JW()}).then((()=>{})).catch((()=>{}))}(t,d.asanaResult);break;case"jira":!function(e,t,o){const{account:n}=t;if(!n)return;const a=Z().Ay.getState(),i=Z().Ay.createNewFlowId();n.length?(Z().Ay.setState({...a,type:"teamspace-selection",open:!0}),(0,s().u)({environment:e,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:i}}})):(Z().Ay.setState({...a,type:"auth",open:!0}),(0,s().u)({environment:e,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:i}}}));ee().A.setState(ee().A.getInitialState())}(t,d.jiraResult);break;case"googleDocs":!function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:s,analyticsFrom:a,pageStore:i,onComplete:r,areAccountsFetched:l,googleDriveResponse:c,selectedFileId:d}=e;Mt({environment:s,requestStore:t,areAccountsFetched:l,analyticsFrom:a,googleDriveResponse:c,pageStore:i,spaceStore:o,spaceViewStore:n,selectedFileId:d,onComplete:r}).then((()=>{})).catch((()=>{}))}({environment:t,requestStore:c,analyticsFrom:u,pageStore:o,onComplete:p,spaceStore:n,spaceViewStore:a,areAccountsFetched:d.googleDocResult.areAccountsFetched,googleDriveResponse:d.googleDocResult.accountsResponse,selectedFileId:d.googleDocResult.selectedFileId});break;case"csv":T().Z({importType:"import",spaceId:n.id,parentId:(null==o?void 0:o.id)??"",parentTable:"block",analyticsFrom:u,importLocation:"new"})}else!function({environment:e,pageStore:t,spaceStore:o,spaceViewStore:n,uploadType:s,onComplete:a,analyticsFrom:i,flowId:r}){if(!t)return;B().un({environment:e,pageStore:t,spaceStore:o,spaceViewStore:n,analyticsFrom:i,uploadType:s,flowId:r}).then((t=>{t&&(x().vH(e,{from:"import",type:"page",new_page_id:t.id,creating_block_id:t.id,parent_collection_id:t.getParentCollectionIdUpToTwoLevels()}),a(t,s,r))})).catch((()=>{}))}({pageStore:o,spaceStore:n,spaceViewStore:a,environment:t,uploadType:e,onComplete:p,analyticsFrom:u,flowId:m});"googleDocs"!==e&&S().fJ(t,{import_source:"confluenceApi"===e?"confluence":e,from:u,flowId:m,userId:t.currentUser.id,spaceId:n.id})}}function So({url:e,helpButtonMessage:t,helpMessageWidth:o,disableBackground:n,marginLeft:s}){return(0,he.jsx)(Ue().A,{renderTooltip:()=>t??(0,he.jsx)(v().sA,{id:"importOptions.helpButton.tooltip",defaultMessage:"Learn about how to import"}),style:{width:o??"max-content"},textWrap:!0,render:t=>(0,he.jsx)(c().N,{external:!0,href:e,style:{marginInlineStart:s??"auto"},...t,children:(0,he.jsx)(re().A,{icon:h().questionMarkCircleSmallIcon,disableBackground:n??!1})})})}function jo({actions:e}){return(0,he.jsx)(ie().A,{popupType:de().nl.Popup,renderOrigin:e=>(0,he.jsx)(re().A,{icon:m()._,...e}),render:t=>{const o={key:"section",render:e=>(0,he.jsx)(pe().A,{...e}),items:e.map((({name:e,action:o})=>({key:e,render:t=>(0,he.jsx)(Ee().A,{...t,title:e}),action:()=>{o(),t.close()}})))};return(0,he.jsx)(le().A,{menuType:z().gu.Popup,width:200,children:(0,he.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:void 0,sections:[o]})})}})}function Ao(){return G().A.state.flowId||f().JW()}async function bo(e,t,o,n,s,a,i,r){S().fJ(a,{import_source:e,from:t,import_type:"file",flowId:r});const l=await B().un({environment:a,pageStore:i,spaceStore:o,spaceViewStore:n,analyticsFrom:t,uploadType:e,flowId:r});l&&(x().vH(a,{from:"import",type:"page",new_page_id:l.id,creating_block_id:l.id,parent_collection_id:l.getParentCollectionIdUpToTwoLevels()}),s(l,e,r))}function Io({flowId:e,analyticsFrom:t,spaceStore:o,spaceViewStore:n,onComplete:s,pageStore:i}){const r=(0,a().v3)();return(0,he.jsx)(Se,{title:"Confluence",logo:p().A.images.import.confluencePng,onClick:()=>bo("confluence",t,o,n,s,r,i,e),actionButton:(0,he.jsx)(So,{url:(0,H().x)("guides.importConfluence")})})}function ko({analyticsFrom:e,spaceStore:t,spaceViewStore:o,onComplete:s,pageStore:r}){const l=(0,a().v3)(),c=(0,i().K8)((()=>Ao()),[]),d=(0,n.useCallback)((()=>{S().fJ(l,{import_source:"csv",from:e,import_type:"file",flowId:c,userId:l.currentUser.id,spaceId:t.id}),T().Z({importType:"import",spaceId:t.id,parentId:(null==r?void 0:r.id)??"",parentTable:null!=r&&r.id?"block":"space",analyticsFrom:e})}),[t.id,null==r?void 0:r.id,e,l,c]);return(0,he.jsx)(Se,{title:"CSV",logo:p().A.images.import.csvPng,onClick:d})}function wo({analyticsFrom:e,spaceStore:t,spaceViewStore:o,onComplete:n,pageStore:s}){const i=(0,a().v3)();return(0,he.jsx)(Ue().A,{placement:"bottom",render:a=>(0,he.jsx)(Se,{tooltipEvents:a,title:"CSV",logo:p().A.images.import.csvPng,onClick:()=>bo("csv",e,t,o,n,i,s,void 0)}),renderTooltip:()=>(0,he.jsx)(v().sA,{id:"importOptions.csvImport.tooltip",defaultMessage:"Ensure first row in the CSV is the header"})})}function Co(e){const{renderChildren:t,spaceStore:o,setRefreshers:s}=e,r=(0,a().v3)(),l=o.id,[c,d]=(0,u().Yb)((()=>(0,O().L)(r)),[r]),[p,m]=(0,u().Yb)((()=>(0,O().fG)(r,l)),[r,l]),[g,h]=(0,u().Yb)((()=>(0,O().PV)(r)),[r]),[f,y]=(0,u().Yb)((()=>(0,O().wc)()),[]),[v,x]=(0,u().Yb)((()=>(0,O().D1)(r,l)),[r,l]),[S,j]=(0,u().Yb)((()=>(0,O().$d)(r,l)),[r,l]),[A,b]=(0,u().Yb)((()=>(0,O().p1)(r)),[r]);(0,n.useEffect)((()=>{s({confluence:async()=>{await m()},evernote:async()=>{await h()},googleDoc:async()=>{await y()},jira:async()=>{await x()},trello:async()=>{await b()}})}),[s,d,m,h,y,x,j,b]);return(0,i().K8)((()=>t(A.value&&c.value&&g.value&&p.value&&S.value&&v.value&&f.value?{trelloResult:A.value,asanaResult:c.value,evernoteResult:g.value,confluenceResult:p.value,mondayResult:S.value,jiraResult:v.value,googleDocResult:f.value}:void 0)),[t,A,c,g,p,S,v,f])}function Mo({renderChildren:e,spaceStore:t,trelloRequestStore:o,asanaRequestStore:n,evernoteRequestStore:s,confluenceRequestStore:i,mondayRequestStore:r,jiraRequestStore:l,googleDocRequestStore:c}){const d=(0,a().v3)();return(0,he.jsx)(Me().A,{request:d,performRequest:O().p1,requestStore:o,render:(o,a)=>(0,he.jsx)(Me().A,{request:d,performRequest:O().L,requestStore:n,render:(o,n)=>(0,he.jsx)(Me().A,{request:d,performRequest:O().PV,requestStore:s,render:(o,s)=>(0,he.jsx)(Me().A,{request:d,performRequest:()=>(0,O().fG)(d,t.id),requestStore:i,render:(o,i)=>(0,he.jsx)(Me().A,{request:d,performRequest:()=>(0,O().$d)(d,t.id),requestStore:r,render:(o,r)=>(0,he.jsx)(Me().A,{request:d,performRequest:()=>(0,O().D1)(d,t.id),requestStore:l,render:(t,o)=>(0,he.jsx)(Me().A,{request:d,performRequest:O().wc,requestStore:c,render:(t,l)=>e(a&&n&&s&&i&&r&&o&&l?{trelloResult:a,asanaResult:n,evernoteResult:s,confluenceResult:i,mondayResult:r,jiraResult:o,googleDocResult:l}:void 0)})})})})})})})}function To({analyticsFrom:e,onComplete:t,spaceStore:o,spaceViewStore:n,userSettingsStore:s,googleDocRequestStore:a,pageStore:i}){return(0,he.jsx)(wt,{renderItemActionsButton:e=>(0,he.jsx)(jo,{actions:e}),onComplete:t,requestStore:a,spaceStore:o,spaceViewStore:n,userSettingsStore:s,pageStore:i,analyticsFrom:e})}function Po({trelloResult:e,analyticsFrom:t,onComplete:o,spaceStore:n,spaceViewStore:s,userSettingsStore:a,trelloRequestStore:i}){return(0,he.jsx)(co,{trelloResult:e,analyticsFrom:t,renderItemActionsButton:e=>(0,he.jsx)(jo,{actions:e}),onComplete:o,requestStore:i,spaceStore:n,spaceViewStore:s,userSettingsStore:a})}function Bo({confluenceResult:e,flowId:t,analyticsFrom:o,onComplete:n,spaceStore:s,spaceViewStore:i,userSettingsStore:r,pageStore:l,confluenceRequestStore:c}){const d=(0,a().v3)();return(0,he.jsx)(it,{confluenceResult:e,analyticsFrom:o,flowId:t,renderItemActionsButton:e=>(0,he.jsx)(jo,{actions:e}),onComplete:n,spaceStore:s,requestStore:c,spaceViewStore:i,userSettingsStore:r,handleFileUploadClick:(e,t)=>bo(e,o,s,i,n,d,l,t),handleApiImportClick:(e,t)=>function(e,t,o,n,s,a){M({environment:s,requestStore:t,spaceId:o.id}).catch((()=>{})),S().fJ(s,{import_source:e,from:n,import_type:"api",flowId:a})}(e,c,s,o,d,t)})}function Fo({evernoteResult:e,onComplete:t,spaceStore:o,spaceViewStore:n,userSettingsStore:s,evernoteRequestStore:a}){return(0,he.jsx)(St,{evernoteResult:e,analyticsFrom:"onboarding",renderItemActionsButton:e=>(0,he.jsx)(jo,{actions:e}),onComplete:t,requestStore:a,spaceStore:o,spaceViewStore:n,userSettingsStore:s})}function Ro({result:e,analyticsFrom:t,onComplete:o,spaceStore:s,spaceViewStore:l,userSettingsStore:c,pageStore:d,trelloRequestStore:u,evernoteRequestStore:m,confluenceRequestStore:h,jiraRequestStore:f,googleDocRequestStore:y}){const x=(0,a().v3)(),S=(0,i().K8)((()=>Ao()),[]),j=(0,i().K8)((()=>(0,D().n0)(x)),[x]),A=(0,i().K8)((()=>(0,V().c)()),[]),b=(0,i().K8)((()=>N().default.checkGate({gateName:"quip_importer"})),[]),I=(0,i().K8)((()=>(0,L().LB)()),[]),k=(0,i().K8)((()=>(0,L().jw)()),[]),w=(0,i().K8)((()=>(0,q().p)(s)),[s]),C=(0,i().K8)((()=>(0,W().yX)()),[])&&!w,M=(0,i().K8)((()=>(0,U().s)()),[]),T=(0,i().K8)((()=>(0,E().V)()),[]),P=(0,i().K8)((()=>(0,_().v)()),[]),B=(0,v().tz)(),F=(0,r().IS)((e=>({importTypeSection:{marginTop:6,marginBottom:8,display:"flex",alignItems:"center"},importTypeHeader:{fontSize:12,color:e.text.secondary,lineHeight:"16px",wordBreak:"keep-all",fontWeight:400,marginInlineEnd:2}})),[]),R=(0,i().K8)((()=>({asana:(0,he.jsx)(Ce,{}),confluence:j?(0,he.jsx)(Bo,{analyticsFrom:t,onComplete:o,spaceStore:s,spaceViewStore:l,userSettingsStore:c,pageStore:d,confluenceRequestStore:h,confluenceResult:e.confluenceResult,flowId:S}):(0,he.jsx)(Io,{analyticsFrom:t,spaceStore:s,spaceViewStore:l,onComplete:o,pageStore:d,flowId:S}),googleDoc:T?(0,he.jsx)(To,{onComplete:o,spaceStore:s,spaceViewStore:l,userSettingsStore:c,googleDocRequestStore:y,pageStore:d,analyticsFrom:t}):(0,he.jsx)(Se,{title:"Google Docs",caption:B.formatMessage({id:"googleDocsImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your documents seamlessly"}),logo:p().A.images.import.googleDocsPng,actionButton:(0,he.jsx)(So,{url:(0,H().x)("guides.importGoogleDocs")}),onClick:()=>bo("googleDocs",t,s,l,o,x,d,S)}),pdf:M&&(0,he.jsx)(Se,{title:"PDF",showBetaBadge:!1,logo:p().A.images.import.pdfSvg,onClick:()=>bo("pdf",t,s,l,o,x,d,S)}),csv:P?(0,he.jsx)(ko,{analyticsFrom:t,spaceStore:s,spaceViewStore:l,onComplete:o,pageStore:d}):(0,he.jsx)(wo,{analyticsFrom:t,spaceStore:s,spaceViewStore:l,onComplete:o,pageStore:d}),markdown:(0,he.jsx)(Se,{title:(0,he.jsx)(v().sA,{id:"importOptions.textMarkdown.title",defaultMessage:"Text & Markdown"}),logo:p().A.images.import.textPng,onClick:()=>bo("markdown",t,s,l,o,x,d,S)}),html:(0,he.jsx)(Se,{title:"HTML",logo:p().A.images.import.htmlPng,onClick:()=>bo("html",t,s,l,o,x,d,S)}),word:(0,he.jsx)(Se,{title:"Word",logo:p().A.images.import.wordPng,onClick:()=>bo("docx",t,s,l,o,x,d,S)}),dropbox:(0,he.jsx)(Se,{title:"Dropbox Paper",logo:p().A.images.import.dropboxPaperPng,onClick:()=>bo("dropbox",t,s,l,o,x,d,S),caption:B.formatMessage({id:"dropboxImportOption.actionsMenu.defaultCaption",defaultMessage:"Bring in your stored files and docs"})}),trello:(0,he.jsx)(Po,{analyticsFrom:t,onComplete:o,spaceStore:s,spaceViewStore:l,userSettingsStore:c,trelloRequestStore:u,trelloResult:e.trelloResult}),evernote:(0,he.jsx)(Fo,{onComplete:o,spaceStore:s,spaceViewStore:l,userSettingsStore:c,evernoteRequestStore:m,evernoteResult:e.evernoteResult}),monday:A&&(0,he.jsx)(Lt,{spaceStore:s,analyticsFrom:t,flowId:S}),quip:b?(0,he.jsx)(io,{spaceStore:s,analyticsFrom:t,flowId:S,onComplete:o}):(0,he.jsx)(Se,{title:"Quip",logo:p().A.images.import.quipPng,onClick:()=>bo("quip",t,s,l,o,x,d,S),caption:B.formatMessage({id:"quipImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your collaborative documents"})}),workflowy:(0,he.jsx)(Se,{title:"Workflowy",logo:p().A.images.import.workflowyPng,caption:B.formatMessage({id:"workflowyImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your outlines and lists"}),onClick:()=>bo("workflowy",t,s,l,o,x,d,S)}),generic:I&&!k&&(0,he.jsx)(Se,{title:(0,he.jsx)(v().sA,{id:"importOptions.genericImporter.title",defaultMessage:"Universal import"}),icon:g().n,onClick:()=>bo("genericImporter",t,s,l,o,x,d,S),actionButton:(0,he.jsx)(So,{url:"",helpButtonMessage:(0,he.jsx)(v().sA,{id:"importOptions.universalImport.tooltip",defaultMessage:"Import any ZIP file that contains text, Markdown, CSV, HTML, and other files"}),helpMessageWidth:240,disableBackground:!0})}),jira:!C&&(0,he.jsx)(Bt,{flowId:S,spaceStore:s,showNewBadge:!1,showSyncBadge:!1,requestStore:f,jiraResult:e.jiraResult,renderItemActionsButton:e=>(0,he.jsx)(jo,{actions:e}),analyticsFrom:t}),zip:(0,he.jsx)(Se,{title:"Zip",logo:p().A.images.import.zipPng,onClick:()=>(0,uo().Q)(x,"genericImporter",o,t),tooltip:(0,he.jsx)(So,{url:"",helpButtonMessage:(0,he.jsx)(v().sA,{id:"importOptions.zipImport.tooltip",defaultMessage:"Upload a zip file containing DOCX, MD, HTML, CSV, EPUB files and we will convert them into pages"}),helpMessageWidth:240,disableBackground:!0,marginLeft:"unset"})})})),[t,h,m,S,y,f,s,l,u,c,P,I,T,A,M,b,k,C,x,B,o,d,e,j]),O=[(0,n.useMemo)((()=>(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)("div",{style:F.importTypeSection,children:(0,he.jsx)("div",{style:F.importTypeHeader,children:(0,he.jsx)(v().sA,{id:"importOptions.fileBasedImports.title",defaultMessage:"File-based imports"})})}),(0,he.jsx)(Do,{children:go.map((e=>{const t=R[e];return t||null}))})]})),[F,R]),(0,n.useMemo)((()=>(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)("div",{style:F.importTypeSection,children:(0,he.jsx)("div",{style:F.importTypeHeader,children:(0,he.jsx)(v().sA,{id:"importOptions.thirdPartyImports.title",defaultMessage:"3rd-party imports"})})}),(0,he.jsx)(Do,{children:ho.map((e=>{const t=R[e];return t||null}))})]})),[R,F])];return(0,he.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:O.map((e=>e))})}function Do({children:e}){return(0,he.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",overflow:"hidden",gridAutoRows:"auto",gap:"4px 20px",padding:2,width:"100%"},children:e})}},640945:(e,t,o)=>{o.d(t,{X:()=>S});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),s=()=>o(484714),a=()=>o(56366),i=()=>o(187174),r=()=>o(921997),l=()=>o(519831),c=()=>o(763824),d=()=>o(559506),p=()=>o(435761),u=()=>o(249847),m=()=>o(941541),g=()=>o(765957),h=()=>o(543665),f=()=>o(578136);const y=new(o(299919).Y)((e=>new v(e)));class v extends(()=>o(757695))().Store{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,o(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const o=5e3*Math.random();await new Promise((e=>setTimeout(e,o)));const n=await d().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===n.type&&n.data){const e=n.data[0];this.setState(e)}}}function x(e){const t=(0,s().v3)(),o=(0,a().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),l=(0,n.useMemo)((()=>e.filter((e=>!y.has(e)))),[e]);(0,i().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:o}=e,n=await c().dS(o,10,(async e=>(await e.load(),e.isDefined())));if(0===n.length)return;const s=n[0].getSpaceId(),a=await d().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:s,collectionIds:n.map((e=>e.id))}});if("success"===a.type&&a.data)for(let i=0;i<n.length;i++){const e=n[i],t=a.data[i];t.collectionId===e.id&&y.get(e).setState(t)}}({environment:t,collectionStores:l})}),[l,t]);const p=(0,n.useMemo)((()=>e.map((e=>y.get(e)),[])),[e]);return(0,n.useEffect)((()=>{if(!o)return;const e=p.map((e=>m().Ay.addListener((0,r().eG)(e.collectionStore.id),void 0,(0,m().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&m().Ay.removeListener(e,t)}))}}),[p,o,t]),p}function S(){const e=(0,s().v3)(),t=(0,a().K8)((()=>(0,f().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),o=(0,u().T)(),n=(0,a().O$)(g().AppStoreSidebarSpaceStore),{teams:i}=(0,p().ww)({userId:o,spaceStore:n}),r=(0,p().gc)({spaceStore:n,teams:i}),c=x((0,a().K8)((()=>{if(!t)return[];if(!o||!n)return[];return r.map((({store:e})=>e)).map((e=>h().m.createChildStore(e,{table:l().Vl,id:e.id,spaceId:n.id})))}),[t,o,n,r]));return(0,a().K8)((()=>{var e;if(!g().default.state.sidebarSpaceStore)return!1;const t=(null===(e=g().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return c.find((e=>!!e.getLatestPostCreatedById()&&(!(e.getLatestPostCreatedTime()<=t)&&e.getLatestPostCreatedById()!==o)))}),[c,o])}},654601:(e,t,o)=>{o.d(t,{X:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("sparkles",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.2757 4.82358C7.57934 4.71847 7.57934 4.53161 7.2757 4.41483L5.62905 3.78419C5.33709 3.67908 4.99842 3.3404 4.88164 3.03676L4.25101 1.39009C4.1459 1.08644 3.95905 1.08644 3.84226 1.39009L3.21163 3.03676C3.10653 3.32872 2.76786 3.6674 2.46422 3.78419L0.817572 4.41483C0.513934 4.51994 0.513934 4.70679 0.817572 4.82358L2.46422 5.45422C2.75618 5.55933 3.09485 5.898 3.21163 6.20165L3.84226 7.84832C3.94737 8.15196 4.13422 8.15196 4.25101 7.84832L4.88164 6.20165C4.98674 5.90968 5.32541 5.571 5.62905 5.45422L7.2757 4.82358ZM15.2991 10.5929C16.2334 10.3593 16.2334 9.9739 15.2991 9.74032L13.2321 9.22647C12.2978 8.9929 11.3402 8.03526 11.1066 7.10097L10.5928 5.03387C10.3592 4.09959 9.97382 4.09959 9.74025 5.03387L9.2264 7.10097C8.99283 8.03526 8.03521 8.9929 7.10094 9.22647L5.03387 9.74032C4.09961 9.9739 4.09961 10.3593 5.03387 10.5929L7.10094 11.1067C8.03521 11.3403 8.99283 12.2979 9.2264 13.2322L9.74025 15.2993C9.97382 16.2336 10.3592 16.2336 10.5928 15.2993L11.1066 13.2322C11.3402 12.2979 12.2978 11.3403 13.2321 11.1067L15.2991 10.5929Z"})})},668577:(e,t,o)=>{o.d(t,{Z:()=>n,o:()=>a});const n=100;class s extends(()=>o(757695))().Store{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(178624).R)({key:`emojiFrecency:${e}`,namespace:o(553737).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(){var e;const t=this.getStore(null===(e=o(765957).default.state.sidebarSpaceStore)||void 0===e?void 0:e.getSpaceId());if(!t)return{};return t.state??{}}}const a=new s},679794:(e,t,o)=>{o.d(t,{U:()=>h,p:()=>f});o(296540);var n=()=>o(56366),s=()=>o(401497),a=()=>o(252291),i=()=>o(278238),r=()=>o(281844),l=()=>o(945778),c=()=>o(751735),d=()=>o(100622),p=()=>o(947993),u=()=>o(613735),m=()=>o(187820),g=o(474848);const h=24;function f(e){const{config:t,size:o=h,shortcutHealthStatus:f}=e,y=(0,n().K8)((()=>{var e;return"custom"!==t.type||null===(e=t.store.getAutomationStore())||void 0===e?void 0:e.getIconStore().getValue()}),[t]),v=function(e){const{config:t,size:o,possibleCustomIcon:a}=e,r=(0,n().K8)((()=>{if("custom"===t.type){return t.store.getFormat().block_color??"default"}return t.color}),[t]),m=(0,s().eP)(),g=(0,n().K8)((()=>{if("default"!==t.type)return function(e){const{icon:t,mode:o}=e;if(!t||0===t.length)return;if((0,l().A)(t)){const e=(0,u().b)({icon:t,themeMode:o});return e?(0,c().X4)(e,p().VN):void 0}const n=(0,i().Sp)(t);if(void 0===n)return;return(0,i().u9)({color:n,useLightGrayColor:!1,mode:o})}({mode:m,icon:a})}),[t.type,a,m]);return(0,s().IS)((e=>{let n;n="default"===t.type?"light"===e.mode?e.palette[t.color][100]:e.palette[t.color][300]:a&&0!==a.length?g:e.gray.background.secondaryTranslucent;const s=(0,d().eA)(r,e);return{iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,width:o,height:o,backgroundColor:n},iconFill:{fill:s.fill}}}),[r,t,g,a,o])}({config:t,size:o,possibleCustomIcon:y}),x=(0,n().K8)((()=>{var e;if("default"===t.type)return!0;const o=null===(e=t.store.getAutomationStore())||void 0===e?void 0:e.getIconStore().getValue();return!o||0===o.length||Boolean(v.iconContainer.backgroundColor)}),[t,v.iconContainer.backgroundColor])?Math.floor(.7*o):o,S=(0,n().K8)((()=>{const e={largeIcon:!0,disabled:!0,isEmptyPage:!1,size:x,isLarge:!0,style:{width:o,height:o}};if("default"===t.type)return(0,g.jsx)(m().B6,{...e,defaultIcon:(0,g.jsx)(a().I,{icon:t.icon,colorVariant:"secondary",size:x,style:v.iconFill})});if("custom"===t.type){var n;const o=null===(n=t.store.getAutomationStore())||void 0===n?void 0:n.getIconStore().getValue();return o?(0,g.jsx)(m().B6,{...e,icon:{icon:o,pointer:t.store.pointer}}):(0,g.jsx)(m().B6,{...e,defaultIcon:(0,g.jsx)(a().I,{icon:r().v,colorVariant:"needs_setup"===f?"disabled":"secondary",size:x})})}}),[x,o,t,v.iconFill,f]);return(0,g.jsx)("div",{style:v.iconContainer,children:S})}},682022:(e,t,o)=>{o.d(t,{HR:()=>_t,aD:()=>Ct,Ay:()=>xt});o(898992),o(672577),o(581454);var n=o(296540),s=()=>o(59226),a=()=>o(726637),i=()=>o(484714),r=()=>o(56366),l=()=>o(401497),c=()=>o(406094),d=()=>o(631524),p=()=>o(160432),u=()=>o(522419),m=()=>o(278238),g=o(474848);const h={viewBox:"0 0 16 16",fittedViewBox:"1.85 2.34 12.3 11.32",directional:!0,svg:(0,g.jsx)("path",{d:"M11.982 2.526a.625.625 0 0 0-.884.884l.915.915H10.93a3.83 3.83 0 0 0-3.27 1.837l-.386.635-.388-.637a3.83 3.83 0 0 0-3.268-1.837H2.48a.625.625 0 0 0 0 1.25h1.14c.9 0 1.733.469 2.2 1.237L6.543 8 5.82 9.19a2.58 2.58 0 0 1-2.2 1.237H2.48a.625.625 0 1 0 0 1.25h1.14A3.83 3.83 0 0 0 6.887 9.84l.388-.638.386.636a3.83 3.83 0 0 0 3.268 1.837h1.085l-.916.915a.625.625 0 1 0 .884.884l1.98-1.98a.625.625 0 0 0 0-.884l-1.98-1.98a.625.625 0 0 0-.884.884l.911.91h-1.08a2.58 2.58 0 0 1-2.2-1.236L8.006 8l.723-1.188a2.58 2.58 0 0 1 2.2-1.237h1.08l-.91.911a.625.625 0 1 0 .883.884l1.98-1.98a.625.625 0 0 0 0-.884z"})},f=(0,o(340498).wt)("arrowIntersectRightSmall",h);var y=()=>o(344417),v=()=>o(824375),x=()=>o(423173),S=()=>o(283220),j=()=>o(69708),A=()=>o(496603),b=()=>o(901997),I=()=>o(559926),k=()=>o(415559),w=()=>o(896628),C=()=>o(471995),M=()=>o(892632),T=(o(944114),()=>o(654601)),P=()=>o(798880),B=()=>o(847743),F=()=>o(765957),R=()=>o(870092),D=()=>o(38337),_=()=>o(792540),L=()=>o(693202),E=()=>o(712855);function O(e){const{placeholder:t,onSubmit:o}=e,s=(0,l().IS)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:6,padding:"6px 10px",marginInlineStart:8,marginInlineEnd:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),a=(0,n.useCallback)((e=>{if(o&&!e.shiftKey)o();else{L().default.state.mode}}),[o]);return(0,g.jsx)("div",{style:s.wrap,className:D().CCX,children:(0,g.jsx)(E().A,{placeholder:t,disabled:!1,store:e.store,style:s.text,placeholderStyle:s.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:a,disableMobileActionBar:!1,disabledMentionTypes:{reminder:!0,property:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:_().Os.none})})}var W=()=>o(736767),z=()=>o(89924),V=()=>o(327165);function U(e){const{tab:t}=e,o=(0,i().v3)(),{store:s}=(0,B().AI)({initialValue:void 0,onChange:A().D_}),a=(0,l().IS)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginInlineEnd:4},captionStyle:{textAlign:o.device.isMobile?"start":"center"}})),[o.device.isMobile]),r=(0,n.useCallback)((async()=>{const o=s.getValue();if(!o)return;const n=[];for(const e of o){var a;if("â€£"===e[0]&&null!==(a=e[1])&&void 0!==a&&a.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;n.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{sidebarSpaceStore:o}=F().default.state;if(!o)return{users:[],bots:[]};const s=R().L.createChildStore(o,{table:P().oo,id:t});await s.load();const a=s.getEmail();n.push(a||"")}}else n.push(e[0])}const i=n.join(""),r=t.integration;if(i){e.store.setState({...e.store.state,loading:!0});const o=await t.getResults(i,r);e.store.setState({...e.store.state,loading:!1,result:o.results})}}),[s,e.store,t]);return(0,g.jsxs)("div",{children:[(0,g.jsx)(z().A,{desktopStyle:a.desktopStyle,children:(0,g.jsx)(O,{placeholder:e.placeholder,onSubmit:r,store:s})}),(0,g.jsx)(z().A,{children:(0,g.jsx)(V().A,{onClick:r,title:t.buttonText||(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(j().sA,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),(0,g.jsx)("div",{children:(0,T().X)(a.sparkleStyle)})]}),fullWidth:e.isSmallWidth})}),t.caption?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:t.caption,style:a.captionStyle}):void 0]})}var N=()=>o(251126),H=()=>o(760217),q=()=>o(500507),K=()=>o(854672),$=()=>o(419357),Y=()=>o(135221);function G({render:e,threshold:t,onSwipeLeft:o,onSwipeRight:s,onSwipeDown:a,onSwipeUp:i}){const l=(0,n.useRef)(),c=(0,n.useRef)();return(0,r().K8)((()=>e({onTouchStart:e=>{l.current=e.touches[0].clientX,c.current=e.touches[0].clientY},onTouchMove:e=>{if(void 0===l.current)return;const n=t||120,r=l.current-e.touches[0].clientX;if(r>n&&o&&(o(),l.current=void 0),r<-1*n&&s&&(s(),l.current=void 0),void 0===c.current)return;const d=c.current-e.touches[0].clientY;d<-1*n&&a&&(a(),c.current=void 0),d>n&&i&&(i(),c.current=void 0)},onTouchEnd:()=>{l.current=void 0,c.current=void 0},onTouchCancel:()=>{l.current=void 0,c.current=void 0}})),[e,t,o,s,a,i])}var J=()=>o(859428),Z=()=>o(21140),Q=()=>o(320865),X=()=>o(987017),ee=()=>o(235921),te=()=>o(210741);var oe=()=>o(937182),ne=()=>o(722872),se=()=>o(757695);class ae extends se().Store{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const ie=ae;class re extends se().Store{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const le=new re;var ce=()=>o(969141),de=()=>o(118849),pe=()=>o(134217),ue=()=>o(749240),me=()=>o(153861),ge=()=>o(204330),he=()=>o(948033),fe=()=>o(536504),ye=()=>o(751735);function ve(e){const{tab:t}=e,[o,s]=(0,n.useState)(fe().WJ),[i,r]=(0,n.useState)(fe().i),[c,p]=(0,n.useState)(),[u,m]=(0,n.useState)(),h=(0,n.useMemo)((()=>{const e=c??o,t=u??i;return(0,fe().Oy)({baseUrl:a().A.domainBaseUrl||"",shape:e,color:t})}),[o,i,c,u]);(0,n.useEffect)((()=>{if(t.agentIcon){const{shape:e,color:o}=(0,fe().uX)(t.agentIcon);s(e),r(o)}}),[t.agentIcon]);const f=(0,l().IS)((e=>({container:{padding:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:20,height:"100%"},iconButton:{width:96,height:96,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},buttonGrid:{display:"grid",gridTemplateColumns:"repeat(9, 24px)",gap:12},shapeButton:{width:24,height:24,appearance:"none",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:e.icon.secondary,padding:0,background:"transparent",borderRadius:"50%",position:"relative"},increasedButtonHitTarget:{position:"absolute",inset:-6,background:"transparent"},shapeButtonHovered:{outline:`2px solid ${e.border.primaryTranslucent}`,outlineOffset:2,background:"transparent"},shapeButtonSelected:{outline:`2px solid ${e[i].border.primaryTranslucent}`,outlineOffset:2,color:(0,fe().hI)(i),background:"transparent"},colorButton:{width:24,height:24,borderRadius:"50%",appearance:"none",border:"none",position:"relative"},colorButtonHovered:{outline:`2px solid ${e.border.primaryTranslucent}`,outlineOffset:2},colorButtonSelected:{outline:`2px solid ${(0,ye().X4)((0,fe().hI)(i),.3)}`,outlineOffset:2},separator:{width:"100%",height:1,backgroundColor:e.border.secondary}})),[i]),y=(0,n.useCallback)(((e,o)=>{const n=a().A.domainBaseUrl||"";s(e),r(o),t.onChange((0,fe().Oy)({baseUrl:n,shape:e,color:o}),{keepVisible:!0})}),[t]),v=(0,n.useCallback)((e=>{p(e)}),[]),x=(0,n.useCallback)((()=>{p(void 0)}),[]),S=(0,n.useCallback)((e=>{m(e)}),[]),j=(0,n.useCallback)((()=>{m(void 0)}),[]);return(0,g.jsxs)("div",{style:f.container,children:[(0,g.jsx)(d().p,{style:f.iconButton,onClick:()=>y(o,i),children:(0,g.jsx)("img",{src:h,alt:`${u??i} ${c??o}`,width:96,height:96})}),(0,g.jsx)("div",{role:"separator",style:f.separator}),(0,g.jsx)("div",{style:f.buttonGrid,children:fe().PF.map((e=>(0,g.jsxs)(d().p,{"aria-label":e,hoveredStyle:o===e?f.shapeButtonSelected:f.shapeButtonHovered,pressedStyle:o===e?f.shapeButtonSelected:f.shapeButtonHovered,style:{...f.shapeButton,...o===e&&f.shapeButtonSelected},onClick:()=>y(e,i),onMouseEnter:()=>v(e),onMouseLeave:x,children:[(0,g.jsx)("div",{style:f.increasedButtonHitTarget}),(0,g.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 1020 1020",fill:"currentColor",children:xe(e)})]},e)))}),(0,g.jsx)("div",{role:"separator",style:f.separator}),(0,g.jsx)("div",{style:f.buttonGrid,children:fe().tR.map((e=>{const t=(0,fe().hI)(e);return(0,g.jsx)(d().p,{"aria-label":e,hoveredStyle:{...i===e?f.colorButtonSelected:f.colorButtonHovered,background:t},pressedStyle:{...i===e?f.colorButtonSelected:f.colorButtonHovered,background:t},onClick:()=>y(o,e),onMouseEnter:()=>S(e),onMouseLeave:j,style:{...f.colorButton,...i===e&&f.colorButtonSelected,background:t},children:(0,g.jsx)("div",{style:f.increasedButtonHitTarget})},e)}))})]})}function xe(e){switch(e){case"triangle":return(0,g.jsx)("path",{d:"M769.398 106.766C780.333 100.443 793.801 100.309 804.874 106.449C816.121 112.687 823.187 124.451 823.41 137.31L835.982 864.884C836.204 877.743 829.548 889.745 818.523 896.367C807.497 902.989 793.777 903.226 782.529 896.989L146.144 544.09C134.896 537.852 127.831 526.088 127.609 513.228C127.387 500.369 134.041 488.367 145.067 481.745L768.879 107.071L769.398 106.766Z"});case"square":return(0,g.jsx)("path",{d:"M700.418 111.352C719.253 106.467 738.655 117.472 744.046 136.287L905.248 698.836C910.724 717.948 899.67 737.883 880.557 743.36L318.008 904.561C298.896 910.038 278.961 898.982 273.484 879.87L112.283 317.322C106.806 298.209 117.861 278.274 136.974 272.797L699.522 111.596L700.418 111.352Z"});case"chat":return(0,g.jsx)("path",{d:"M519.493 133.271C519.766 133.278 520.038 133.286 520.311 133.299C685.085 140.795 780.612 205.272 832.655 291.229C882.688 373.864 888.768 470.538 888.818 536.79C888.825 537.072 888.83 537.354 888.83 537.637C888.827 598.578 872.33 646.848 842.298 683.579C812.632 719.862 772.436 741.611 730.655 754.842C655.602 778.608 565.923 777.351 501.479 776.992L395.646 898.952C385.798 910.3 369.938 914.34 355.862 909.084C341.787 903.828 332.455 890.382 332.455 875.357V754.77C271.022 740.986 222.745 721.232 190.079 684.683C151.69 641.73 141.375 583.131 141.375 509.861C141.375 420.559 171.356 326.704 234.14 254.658C297.601 181.834 392.94 133.262 518.675 133.262L519.493 133.271Z"});case"check":return(0,g.jsx)("path",{d:"M468.711 600.914L396.779 495.019C385.607 478.572 363.218 474.296 346.771 485.468C330.325 496.64 326.049 519.028 337.22 535.475L443.057 691.285C450.181 701.772 462.295 707.738 474.95 706.994C487.605 706.25 498.937 698.904 504.782 687.655L743.923 227.402C750.117 215.48 762.434 208 775.868 208H789.144L790.067 208.012C799.583 208.255 808.63 212.261 815.213 219.172C822.007 226.306 825.581 235.913 825.101 245.753L799.134 778.541C798.199 797.719 782.377 812.788 763.177 812.788H230.843C220.992 812.788 211.57 808.751 204.775 801.617C197.981 794.483 194.407 784.876 194.886 775.036L220.854 242.247L220.909 241.352C222.284 222.602 237.911 208.001 256.811 208H646.52C658.523 208 666.252 220.726 660.718 231.377L468.711 600.914Z"});case"hat":return(0,g.jsx)("path",{d:"M545.576 127.394C552.866 114.38 567.457 107.186 582.262 109.381C597.302 111.611 609.32 123.05 612.289 137.962L694.202 549.355C717.555 550.212 748.479 552.253 775.634 560.048C796.917 566.157 819.769 576.607 837.766 595.458C856.464 615.044 867.315 640.983 868.456 672.703C869.877 712.188 850.771 742.983 825.002 765.135C800.014 786.616 767.217 801.585 734.562 812.241C668.991 833.639 592.877 841.146 547.656 841.906C501.52 842.681 410.552 834.844 328.263 812.971C287.162 802.047 245.963 787.044 213.179 766.398C180.916 746.081 151.066 716.529 144.759 674.869C140.325 645.581 143.68 618.576 156.4 595.648C169.131 572.702 189.111 557.684 210.875 548.498C245.002 534.093 286.797 532.491 326.446 537.26L545.233 128.018L545.576 127.394Z"});case"globe":return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M234.479 101.544C248.538 87.4853 271.333 87.4854 285.392 101.544C299.45 115.603 299.45 138.397 285.392 152.456C147.537 290.311 147.537 513.819 285.392 651.674C423.247 789.529 646.754 789.529 784.609 651.674C798.668 637.615 821.462 637.615 835.521 651.674C849.579 665.733 849.579 688.526 835.521 702.585C761.699 776.407 667.476 817.393 571 825.545V876.929H678.304C698.186 876.929 714.304 893.047 714.304 912.929C714.304 932.811 698.186 948.929 678.304 948.929H538.121C537.092 949.017 536.052 949.065 535 949.065C533.948 949.065 532.908 949.017 531.879 948.929H391.918C372.036 948.929 355.918 932.811 355.918 912.929C355.918 893.047 372.036 876.929 391.918 876.929H499V825.545C402.524 817.393 308.301 776.407 234.479 702.585C68.5069 536.612 68.5068 267.517 234.479 101.544Z"}),(0,g.jsx)("path",{d:"M535 110.065C696.267 110.065 827 240.798 827 402.065C827 563.332 696.267 694.065 535 694.065C373.733 694.065 243 563.332 243 402.065C243 240.797 373.733 110.065 535 110.065Z"})]});case"plug":return(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M646.088 109C677.257 109 701.723 134.329 700.609 165.471L693.771 357.176H826.411L827.326 357.188C836.763 357.428 845.744 361.368 852.316 368.179C859.1 375.209 862.736 384.696 862.388 394.46L857.157 541.158C855.174 596.706 819.67 627.812 786.416 647.364C770.167 656.917 752.344 664.976 737.566 671.887C721.867 679.229 709.26 685.424 699.227 692.225C677.171 707.177 664.302 717.394 655.457 730.718C647.115 743.283 640.189 762.136 638.923 797.607L636.113 876.312C635.421 895.682 619.517 911.028 600.135 911.028H387.604C377.834 911.028 368.483 907.056 361.699 900.025C354.914 892.994 351.279 883.507 351.627 873.743L354.438 795.039C355.708 759.447 350.066 741.032 343.027 729.152C335.548 716.53 323.992 706.7 303.004 691.75L302.126 691.131C292.967 684.751 281.306 678.811 266.575 671.685C252.358 664.807 234.94 656.673 219.207 647.018C203.293 637.252 186.459 624.414 173.885 606.417C160.783 587.664 153.563 565.093 154.508 538.592L159.739 391.894L159.783 390.989C160.928 372.048 176.636 357.176 195.716 357.176H330.919L337.778 164.899C338.884 133.982 364.798 109 395.745 109C426.914 109 451.379 134.329 450.265 165.471L443.427 357.176H581.263L588.122 164.899C589.228 133.982 615.142 109 646.088 109ZM442.133 159.414C442.124 159.308 442.117 159.201 442.107 159.095L442.102 159.048C442.113 159.17 442.123 159.292 442.133 159.414Z"});case"apple":return(0,g.jsx)("path",{d:"M623.016 70.9998C667.836 70.9248 716.816 86.2103 750.704 120.77C757.663 127.867 761.379 137.527 760.969 147.458C760.56 157.389 756.062 166.709 748.543 173.21C714.656 202.504 669.51 216.694 626.218 216.995C601.96 217.163 576.99 212.962 553.871 203.66L537.313 287.297C558.378 277.754 583.878 270.252 611.481 271.059L611.48 271.06C668.571 272.728 712.292 291.902 741.759 310.825C756.452 320.261 767.659 329.664 775.349 336.893C779.202 340.515 782.198 343.616 784.333 345.936C785.401 347.097 786.256 348.067 786.898 348.811C787.114 349.062 787.305 349.288 787.472 349.487L788.311 350.458C788.98 351.242 789.864 352.3 790.926 353.621C793.047 356.26 795.893 359.965 799.159 364.645C805.665 373.968 813.988 387.37 821.563 404.093C836.661 437.421 849.501 485.645 836.889 541.056C827.993 580.141 806.44 643.586 785.549 699.576C774.984 727.888 764.352 754.923 755.201 776.841C746.448 797.804 738.063 816.513 732.128 826.386C710.887 861.713 670.786 901.293 608.057 908.327C563.544 913.318 527.479 896.274 504.085 879.979C500.717 877.634 497.559 875.268 494.619 872.936C491.24 875.72 487.583 878.571 483.663 881.399C460.67 897.988 424.21 917.103 380.788 912.233C316.348 905.006 276.85 859.607 256.876 826.386C250.94 816.513 242.556 797.802 233.803 776.839C224.653 774.921 214.022 747.887 203.459 719.575C182.568 663.584 161.017 600.143 152.116 561.061L152.114 561.056C139.503 505.645 152.342 457.421 167.44 424.093C175.016 407.37 183.339 393.968 189.844 384.645C193.11 379.966 195.957 376.26 198.078 373.621C199.139 372.3 200.023 371.242 200.692 370.458C200.998 370.1 201.259 369.798 201.471 369.555C201.652 369.34 201.862 369.092 202.102 368.813C202.744 368.069 203.6 367.1 204.668 365.939C206.803 363.619 209.799 360.517 213.651 356.895C221.341 349.665 232.548 340.261 247.241 330.825C276.707 311.901 320.427 292.728 377.522 291.06C410.516 290.095 440.123 300.991 462.762 313.124L492.184 144.509C492.539 142.719 493.021 140.987 493.618 139.32C494.657 133.776 497.012 128.406 500.721 123.697C530.121 86.3792 578.661 71.0741 623.016 70.9998Z"});case"bulb":return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M602.444 816.46C592.561 862.564 551.827 895.5 504.677 895.5C464.547 895.5 414.834 895.5 368.449 895.5C323.85 895.5 291.213 853.479 302.23 810.263L302.23 810.263C303.994 803.343 310.227 798.5 317.369 798.5H591.449C599.089 798.5 604.784 805.545 603.182 813.015L602.444 816.46Z"}),(0,g.jsx)("path",{d:"M535.11 145.015C619.554 144.253 707.417 170.85 771.57 220.822C836.634 271.504 878.69 347.972 862.605 442.072C855.528 485.601 841.532 517.345 821.912 543.153C803.014 568.013 779.904 585.779 759.603 601.667L759.602 601.666C721.617 631.395 682.213 647.002 661.575 658.191C650.275 664.318 643.273 669.409 638.322 674.982C633.767 680.109 629.535 687.241 626.699 699.553C625.192 706.099 623.54 713.617 621.802 721.765C620.22 729.178 613.687 734.5 606.107 734.5H333.223C325.616 734.5 319.947 727.515 321.268 720.023C324.575 701.263 326.715 681.747 325.78 663.085C325.069 648.9 321.738 644.004 317.822 640.708C310.039 634.158 262.144 603.61 227.902 563.12C190.913 519.382 160.755 456.175 179.929 373.387C201.425 280.541 257.914 222.563 325.832 188.702C392.328 155.55 469.218 145.611 535.11 145.015Z"})]});case"file":return(0,g.jsx)("path",{d:"M337.613 194C365.958 194 390.282 201.976 406.764 221.675C422.718 240.743 423.984 265.342 429.022 288.568H776.371C816.833 288.568 847.894 302.035 867.997 326.272C887.038 349.23 892 376.791 892 397.602C892 414.422 887.992 508.792 884.083 597.216C881.513 655.363 878.886 713.508 876.197 771.649V771.653C875.308 790.868 859.472 805.99 840.236 805.99H165.739C165.257 806 164.773 806.003 164.286 805.993C144.686 805.604 129 789.604 129 770V769.99C129 769.518 129.501 768.573 129.028 768.573L150.449 228.573C151.215 209.261 167.094 194 186.421 194H337.613Z"});case"ghost":return(0,g.jsx)("path",{d:"M155.626 602.783C213.044 682.296 244.467 553.003 248.426 602.783C257.601 718.161 304.552 790.404 368.696 705.413C410.317 650.264 368.746 878.704 500.191 860.962C595.236 848.133 597.038 685.532 638.532 723.052C767.991 840.115 748.688 573.654 795.253 636.458C846.377 705.413 929.663 583.508 941.326 459.609C947.416 394.913 918.731 339.544 769.596 370.261C683.055 388.085 730.705 139.87 562.731 121.701C433.284 107.698 406.752 260.123 352.646 326.682C298.616 393.146 187.823 285.269 146.131 370.261C104.439 455.251 129.295 566.318 155.626 602.783Z"});case"mailbox":return(0,g.jsx)("path",{d:"M494.208 69C499.373 69 504.289 71.2187 507.706 75.0918C511.123 78.9651 512.712 84.1204 512.067 89.2451L500.57 180.725C499.439 189.727 491.784 196.48 482.711 196.48H379.131L375.469 273.96H744.281C774.977 273.96 813.112 287.033 843.588 317.277C874.925 348.377 896.271 395.627 896.272 460.479C896.272 551.445 896.272 460.479 888.084 733.135C887.097 752.271 871.293 767.28 852.132 767.28H609.793V907.471C609.793 927.353 593.675 943.471 573.793 943.471H473.113C453.231 943.471 437.114 927.353 437.113 907.471V767.28H159.711C149.537 767.28 139.838 762.974 133.013 755.429C126.188 747.883 122.874 737.802 123.892 727.679C123.932 727.683 152.182 473.427 158.405 444.659C164.678 415.66 178.048 375.679 199.87 341.964C220.563 309.994 254.372 275.714 303.318 274.025C306.906 217.712 310.784 141.823 315.136 85.6104L315.176 85.1729C316.107 76.0123 323.827 69.0002 333.082 69H494.208Z"});case"rock":return(0,g.jsx)("path",{d:"M660.706 168.198C679.184 168.198 696.525 177.129 707.256 192.173L904.892 469.252C914.397 482.577 917.736 499.338 914.062 515.289L851.302 787.778C845.323 813.733 822.216 832.122 795.582 832.122H265.072C243.928 832.122 224.511 820.453 214.586 801.784L110.289 605.594C102.532 591.002 101.466 573.766 107.37 558.329L242.523 204.95L242.61 204.727L242.846 204.128L242.928 203.922C251.653 182.363 272.601 168.198 295.929 168.198H660.706Z"});case"sign":return(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M538.859 102.999C548.94 102.999 558.559 107.227 565.377 114.652C572.195 122.078 575.587 132.023 574.728 142.067L568.494 214.957H713.61C722.451 214.957 730.984 218.211 737.58 224.099L923.58 390.099C931.482 397.151 935.878 407.325 935.597 417.912C935.316 428.499 930.387 438.426 922.122 445.049L708.122 616.549C701.735 621.667 693.795 624.457 685.61 624.457H533.479L510.728 890.524C509.135 909.15 493.552 923.458 474.859 923.458H388.359C378.278 923.458 368.658 919.23 361.84 911.805C355.023 904.379 351.631 894.435 352.49 884.391L374.716 624.457H200.61C190.545 624.457 180.939 620.243 174.122 612.838C167.306 605.432 163.901 595.511 164.733 585.48L192.733 247.98L192.816 247.109C194.769 228.871 210.174 214.957 228.61 214.957H409.732L416.49 135.933L416.575 135.063C418.57 116.864 433.957 102.999 452.359 102.999H538.859Z"});case"book":return(0,g.jsx)("path",{d:"M155.936 241.898C157.178 225.525 168.461 211.462 184.385 207.453C396.964 153.936 471.229 258.474 510.572 323.289C547.309 259.936 646.798 156.773 848.993 207.527C864.681 211.465 875.8 225.267 877.21 241.38L918.57 714C920.215 732.8 908.365 750.149 890.254 755.455L521.959 863.353C514.53 865.529 506.627 865.481 499.226 863.214L147.961 755.607C130.256 750.183 118.673 733.214 120.073 714.749L155.936 241.898Z"});case"alarm":return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M503.988 261.705C685.331 261.705 832.339 408.712 832.339 590.054C832.339 771.397 685.331 918.405 503.988 918.405C322.646 918.405 175.639 771.397 175.639 590.054C175.639 408.712 322.646 261.705 503.988 261.705Z"}),(0,g.jsx)("path",{d:"M645.24 175.03C689.396 137.837 754.54 132.889 804.572 167.008C854.604 201.128 873.783 263.58 855.282 318.268C848.91 337.102 825.932 341.305 809.506 330.103L650.936 221.966C634.511 210.764 630.034 187.838 645.24 175.03Z"}),(0,g.jsx)("path",{d:"M236.286 144.983C288.732 114.703 353.322 124.514 394.571 164.907C408.777 178.817 402.596 201.344 385.378 211.286L219.16 307.251C201.942 317.193 179.343 311.282 174.398 292.024C160.042 236.105 183.84 175.262 236.286 144.983Z"})]});case"puzzle":return(0,g.jsx)("path",{d:"M841.889 338.063C801.785 342.687 770.329 377.999 739.114 393.103L717.31 202.68C714.821 180.94 695.171 165.339 673.432 167.845L577.599 178.893C564.431 180.411 555.209 192.375 554.493 205.61C550.847 273.069 499.065 330.069 429.716 338.064C360.366 346.058 296.973 302.335 278.073 237.476C274.365 224.75 262.663 215.198 249.495 216.716L153.429 227.79C131.781 230.286 116.218 249.802 118.601 271.462L178.959 819.881C181.36 841.699 201.051 857.402 222.857 854.888L742.442 794.991C764.185 792.485 779.772 772.814 777.241 751.074L759.253 596.506C795.503 596.506 834.114 623.207 874.227 618.582C951.665 609.656 1004.52 539.933 995.595 462.468C986.664 385.003 919.327 329.137 841.889 338.063Z"});case"unbrella":return(0,g.jsx)("path",{d:"M517.241 96.1883C519.899 69.8123 543.434 50.5847 569.81 53.242C596.186 55.8993 615.414 79.4353 612.757 105.811C611.656 116.737 610.143 130.765 608.297 147.291C813.616 195.378 890.768 400.318 910.933 522.923C914.596 545.19 895.154 563.451 872.748 560.764C740.235 544.873 648.47 533.971 563.006 523.741C548.327 641.733 534.982 746.3 530.037 781.65C522.777 833.545 499.836 874.327 466.278 900.905C433.153 927.141 392.571 937.172 354.459 932.827C316.448 928.494 279.515 909.652 254.667 876.7C229.318 843.083 219.517 798.786 228.838 749.568C233.771 723.522 258.884 706.405 284.931 711.338C310.977 716.27 328.093 741.385 323.161 767.431C318.231 793.463 324.231 809.503 331.317 818.901C338.905 828.964 351.045 835.815 365.332 837.444C379.519 839.061 394.462 835.322 406.675 825.649C418.455 816.319 430.668 799.052 434.963 768.349C439.852 733.399 453.103 629.543 467.691 512.285C382.213 501.962 290.134 490.693 157.134 474.167C134.313 471.331 119.766 448.075 128.938 426.987C186.588 294.45 307.137 138.458 512.859 136.944C514.676 120.687 516.162 106.903 517.241 96.1883Z"})}}var Se=()=>o(718827),je=()=>o(559273),Ae=()=>o(360083),be=()=>o(972435);function Ie({pageCover:e,tab:t}){const{coverUrl:o,title:s,subtitle:a,position:i}=e,r=(0,l().IS)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.text.inversePrimary},subtitle:{color:e.text.inverseSecondary},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(i||0)}%`,borderRadius:4}})),[i]),c=(0,n.useCallback)((()=>{t.onChange({url:o,position:i})}),[t,o,i]);return(0,g.jsx)("div",{style:r.container,children:(0,g.jsx)(J().A,{originGap:0,placement:"bottom",delayThreshold:600,renderTooltip:()=>(0,g.jsxs)("div",{style:r.tooltip,children:[(0,g.jsx)("span",{style:r.title,children:be().A.formatMessage(s)})," ",(0,g.jsx)("span",{style:r.subtitle,children:a?be().A.formatMessage(a):void 0})]}),render:e=>(0,g.jsx)(Se().Ay,{hoveredStyle:r.buttonHover,...e,onClick:c,children:(0,g.jsx)(Ae().A,{url:o,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,g.jsx)(je().A,{src:t,style:r.imageBox})})})})})}const ke=function({tab:e}){const[t,s]=(0,n.useState)({}),[a,i]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{i(!0),await o(748539).f.load().then((e=>{s(e),i(!1)}))})()}),[]);const r=(0,he().b0)(),c=(0,l().IS)((e=>({container:{paddingBottom:8},groupTitle:{marginInlineStart:-5},loader:{height:300}})),[]);return a?(0,g.jsx)("div",{style:c.loader,children:(0,g.jsx)(o(555267).A,{})}):(0,g.jsx)("div",{style:c.container,children:Object.keys(t).map((n=>{const s=t[n];return(0,g.jsx)(z().A,{title:(0,g.jsx)(o(97294).N,{style:c.groupTitle,href:s.url,external:!0,children:(0,g.jsx)(d().p,{colorPalette:"gray",size:"xs",children:be().A.formatMessage(s.title)})}),noTextOverflow:!0,children:(0,g.jsx)("div",{style:r.galleryWrap,children:s.items.map(((t,o)=>(0,g.jsx)(Ie,{pageCover:t,tab:e},o)))})},n)}))})};var we=()=>o(98126),Ce=()=>o(559506),Me=()=>o(125565),Te=()=>o(719147),Pe=()=>o(361330);const Be=(0,j().YK)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function Fe(e){const{tab:t,results:o,ready:s,isSmallWidth:a,giphyRandomId:i}=e,r=(0,l().IS)((e=>({loading:(0,he().$n)(),captionMenuItem:{textAlign:a?"start":"center",color:e.text.secondary}})),[a]);return s?!o||o&&!o.length?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsx)(j().sA,{defaultMessage:"No results found",id:"mediaPicker.giphy.noResultsText"}),style:r.captionMenuItem}):(0,g.jsxs)(n.Fragment,{children:[o.map(((e,o)=>(0,g.jsx)(Re,{tab:t,image:e,giphyRandomId:i},o))),(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsx)(j().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:r.captionMenuItem})]}):(0,g.jsx)("div",{style:r.loading,children:(0,g.jsx)(we().k,{})})}function Re({tab:e,image:t,giphyRandomId:o}){var s;const a=(0,i().v3)(),{device:r}=a,c=(0,l().IS)((e=>({container:{width:r.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[r.isMobile]),d=(0,n.useCallback)((async()=>{var n;if(e.onChange({url:t.imageUrl}),null!==(n=t.analytics)&&void 0!==n&&n.onclick)try{var s;await Ce().callApi({eventName:"postGiphyAnalytics",environment:a,data:{url:null===(s=t.analytics)||void 0===s?void 0:s.onclick.url,timestamp:Date.now(),random_id:o}})}catch(i){}}),[a,o,t.imageUrl,e,null===(s=t.analytics)||void 0===s?void 0:s.onclick]);return(0,g.jsxs)("div",{style:c.container,children:[(0,g.jsx)(Se().Ay,{hoveredStyle:c.hoveredButton,onClick:d,children:(0,g.jsx)(je().A,{src:t.thumbUrl,style:c.imageBox})}),(0,g.jsx)(Me().A,{isSmall:!0,isSecondaryColor:!0,style:c.label,children:(0,g.jsx)(j().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:t.authorName||"GIPHY",inlinetextlink:e=>(0,g.jsx)(Te().A,{external:!0,href:t.imageUrl,children:e})}})})]},t.id)}const De=function({tab:e,isSmallWidth:t}){const[o,s]=(0,n.useState)(""),[a,r]=(0,n.useState)(""),l=(0,i().v3)(),{device:c}=l,d=(0,he().b0)(),p=(0,n.useCallback)((async()=>{if(!A().Im(o))return o;const e=await Ce().callApi({eventName:"getGiphyRandomId",environment:l,data:{}});return"success"===e.type?(s(e.data.random_id),e.data.random_id):void 0}),[l,o]);return(0,g.jsxs)("div",{style:{paddingBottom:8},children:[(0,g.jsx)(z().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,g.jsx)($().Ay,{value:a,placeholder:be().A.formatMessage(Be.giphyPlaceholder),showClearButton:!0,focus:!c.isMobile||void 0,onChange:e=>r(e.target.value)})}),(0,g.jsx)("div",{style:d.galleryWrap,children:(0,g.jsx)(N().A,{request:a,debounce:Pe().tu,performRequest:async e=>{await p();const t=await Ce().callApi({eventName:"searchGiphyImages",environment:l,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(n,s,a)=>(0,g.jsx)(Fe,{tab:e,results:s,ready:a,isSmallWidth:t,giphyRandomId:o})})})]})};o(354520);var _e=()=>o(852507),Le=()=>o(148307),Ee=()=>o(634201),Oe=()=>o(187174),We=()=>o(994310),ze=()=>o(284371),Ve=()=>o(939740),Ue=()=>o(228927),Ne=()=>o(974233),He=()=>o(970585),qe=()=>o(486666),Ke=()=>o(998531),$e=()=>o(406699),Ye=()=>o(553965),Ge=()=>o(463830);const Je=(0,n.forwardRef)((function(e,t){const{shouldOpenVariations:o,icon:n,focused:s,color:a,onClick:i,onMouseEnter:l,variations:c,hideTooltip:d,insertIcon:p,id:u,role:m}=e,h=(0,r().uB)(void 0,Ge().A);return o?(0,g.jsx)(et,{ref:t,id:u,icon:n,focused:s,color:a,onClick:i,onMouseEnter:l,variations:c,hideTooltip:d,insertIcon:p,buttonPopupStore:h,role:m}):(0,g.jsx)(Qe,{ref:t,id:u,icon:n,focused:s,color:a,onClick:i,onMouseEnter:l,variations:c,hideTooltip:d,role:m})})),Ze=Je,Qe=(0,n.forwardRef)((function(e,t){const{events:o,icon:s,focused:a,color:r,onClick:c,onMouseEnter:d,variations:p,hideTooltip:u,id:m,role:h}=e,f=(0,l().eP)(),y=(0,i().v3)(),{isMenuListFocusVisible:v}=(0,n.useContext)(Ve().VU),x=a&&v,S=(0,l().IS)((e=>({iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...y.device.isMobile?{width:qe().UA,height:qe().UA,fontSize:qe().ru}:{width:qe().Sq,height:qe().Sq,fontSize:qe().Zl},...x&&{boxShadow:e.buttonBlueFocusRing}},iconImage:{...y.device.isMobile?{width:qe().ru,height:qe().ru}:{width:qe().Zl,height:qe().Zl}}})),[y.device.isMobile,x]),j=(p.tooltip?p.tooltip:s).replaceAll("-"," ").replaceAll("_"," "),A=`${j} ${r}`,b="dark"===f?p.dark:p.light;return(0,g.jsx)(J().A,{forceVisibleState:!!x||void 0,placement:x?"bottom":void 0,allowHover:Boolean(s&&!u),disableTooltip:u,renderTooltip:()=>j,closeDelay:0,render:e=>(0,g.jsx)(Se().Ay,{ref:t,ariaLabel:A,id:m,role:h,focused:a,onClick:c,...(0,Ye().A)(o||{},(0,Ye().A)({onMouseEnter:d},e)),ignoreLocalHoverState:!0,style:S.iconButton,disallowTabbing:!0,children:(0,g.jsx)("img",{alt:A,src:`data:image/svg+xml;utf8,${encodeURIComponent(b[r])}`,style:S.iconImage,onContextMenu:e=>e.preventDefault()})},s)})}));function Xe(e){const{parent:t,icon:n,variations:s,insertIcon:a}=e,i=(0,l().eP)(),r=(0,l().IS)((()=>({variationMenu:{display:"flex",padding:2,gap:1}})),[]),c="dark"===i?s.light:s.dark,d=Object.keys(c).sort(((e,t)=>m().v3.indexOf(e)-m().v3.indexOf(t))).map((o=>{const i=`${n}_${o}`;return{key:i,action:e=>{t.close(),a(`/icons/${i}.svg`)},render:t=>(0,g.jsx)(Je,{...e,...t,icon:i,color:o,variations:s,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,g.jsx)(o(805751).A,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,g.jsx)(Ve().Ay,{type:Ve().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,g.jsx)("div",{...e}),items:d}],renderRow:(e,t)=>(0,g.jsx)("div",{role:"row",style:r.variationMenu,children:e},t)})})}const et=(0,n.forwardRef)((function(e,t){const{icon:o,focused:s,color:a,onClick:i,onMouseEnter:r,variations:l,hideTooltip:c,insertIcon:d,buttonPopupStore:p,id:u,role:m}=e,h=(0,n.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(p)),[p]),f=(0,n.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,p)),[p]),{isMenuListFocusVisible:y}=(0,n.useContext)(Ve().VU);return(0,g.jsx)(Ke().N,{debugName:"IconPickerMenuItem",capture:s&&y,onEnter:f,children:(0,g.jsx)($e().A,{buttonPopupStore:p,popupType:$e().z.Popup,renderOrigin:e=>(0,g.jsx)(Qe,{ref:t,id:u,icon:o,focused:s,color:a,onClick:i,onMouseEnter:r,variations:l,hideTooltip:c,events:e,role:m}),render:e=>(0,g.jsx)(Ke().N,{debugName:"IconPickerMenuItem.VariationMenuComponent",capture:s,onEsc:h,children:(0,g.jsx)(Xe,{parent:e,icon:o,variations:l,insertIcon:d})})})},o)})),tt={display:"flex",flexDirection:"column"},ot="recentIcons",nt=100,st=(0,j().YK)({noResults:{defaultMessage:"No results",id:"iconPicker.noResults.message"}});function at(e){const{filter:t,enforceIconColor:o,onSubmit:s,menuRef:a,iconLoggingData:c,comboboxProps:d}=e,p=(0,i().v3)(),u=(0,l().DP)(),{isDesktop:m,isMobile:h}=(0,i().Y0)(),[f,y]=(0,n.useState)(!0),[v,x]=(0,n.useState)(void 0),{loadIconCount:S,recentIcons:I}=(0,r().O$)(le),k=(0,r().uB)(void 0,He().A),w=(0,r().K8)((()=>{var e;return null===(e=F().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),C=(0,ne().Tf)(),M=(0,r().K8)((()=>Math.floor((0,he().so)(p,a,C))),[p,a,C]),T=(0,r().K8)((()=>(0,he().uu)(p)),[p]);(0,_e().l)((()=>{const e=We().A.get(ot);le.update((t=>({...t,recentIcons:e||[]})))}));const[P]=(0,Oe().Yb)((async()=>{try{const e=await async function(e,t,o){if(!A().Im(o.allIcons))return o.allIcons;const n=await(0,Ne().default)({environment:t,url:e,method:"GET",format:"json",mode:"cors"});if("success"===n.type)return le.setState({...o,allIcons:n.data}),n.data;throw n.error}(Le().A.icons.alliconsV2Json,p,le.state);x(e),y(!1)}catch(e){throw e}}),[p]),B=(0,n.useMemo)((()=>Ee().f7(e.filter)??""),[e.filter]),R=(0,n.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);s(t);const o=t.split(/[/_.]/),n=o[2],a=o[3];!function(e,t){const o=We().A.get(ot),n=A().KC([e],o),s=A().s(n,t);We().A.set(ot,s),le.update((e=>({...e,recentIcons:s})))}(n,qe().Te*T),c&&b().aU(p,"pick_colored_icon",{icon:n,color:a,...c})}),[p,s,c,T]),D=(0,n.useCallback)(((e,t)=>{const n=o??w??"gray",s=`/icons/${`${e}_${n}`}.svg`;return{key:s,action:()=>R(s),render:s=>(0,g.jsx)(Ze,{...s,icon:e,color:n??"gray",variations:t,insertIcon:R,shouldOpenVariations:!o&&!w})}}),[o,R,w]),_=(0,n.useCallback)((e=>{if(!e)return[];const o=function(e,t){const o=A().oE(Object.keys(e).map((o=>{const n=e[o],s=((null==n?void 0:n.tooltip)??o).replace("-"," "),a=[s,...n.tags],i=a.findIndex((e=>e===t));if(-1!==i)return[0===i?100:50,o];const r=a.findIndex((e=>e.startsWith(t))),l=s.includes(t);return 0!==r&&l?[40,o]:-1!==r?[0===r?80:30,o]:void 0})));return A().Ul(o,(e=>-e[0])).map((e=>e[1]))}(e,t.toLowerCase());return 0===o.length?[]:[{key:"search-results",items:o.map((t=>D(t,e[t]))),render:e=>(0,g.jsx)(z().A,{children:(0,g.jsx)("div",{style:(0,he().ze)(p,u,C),children:e.children})},e.key)}]}),[t,D,p,u,C]),L=(0,n.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?I||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return D(e,t[e])})).filter(Boolean),render:t=>(0,g.jsx)(z().A,{title:e.title,children:(0,g.jsx)("div",{style:(0,he().ze)(p,u,C),children:t.children})},t.key)}:void 0}),[I,D,p,u,C]),E=(0,n.useCallback)((e=>{const o=A().oE(function(e){return A().oE([!e&&{id:"recent",title:(0,g.jsx)(j().sA,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,g.jsx)(j().sA,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(t).map((t=>L(t,e))));return t&&B?_(e):o}),[t,B,L,_]),O=(0,n.useCallback)((e=>{const t=E(e);let o=0;for(const n of t)o+=n.items.length;return o}),[E]),V=(0,n.useCallback)((e=>{let t=S;0===S&&(t+=M*T);const o=[],n=E(e);let s=0;for(const a of n){if(!(s+a.items.length<=t)){o.push({...a,items:a.items.slice(0,t-s)});break}o.push(a),s+=a.items.length}return o}),[E,S,M,T]),U=(0,n.useMemo)((()=>({type:Ve().Oh.Grid,getItemsPerRowForSection:()=>M,renderRow:(e,t)=>(0,g.jsx)("div",{role:"row",style:{display:"flex"},children:e},t)})),[M]),N=(0,n.useCallback)((e=>{if(Math.abs(e)<nt){const{loadIconCount:e,allIcons:t}=le.state,o=M*T,n=Math.max(o,O(t));le.setState({...le.state,loadIconCount:Math.min(n,e+o)})}}),[T,M,O]),H=(0,n.useMemo)((()=>{const e=V(v),t=m&&e.length>0?0:void 0;return"resolved"===P.status&&0===e.length&&e.push({key:"no results",items:[{key:"no results",action:A().lQ,render:e=>(0,g.jsx)(W().A,{...e,style:{fontWeight:ze().Wy.medium,marginBottom:2,marginInlineStart:2,height:20,boxSizing:"content-box"},caption:be().A.formatMessage(st.noResults)})}],render:e=>(0,g.jsx)(z().A,{...e})}),(0,g.jsxs)("div",{style:tt,children:[(0,g.jsx)("div",{style:{flexGrow:1},children:(0,g.jsx)(Ve().Ay,{...U,store:k,initialFocus:t,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:h,comboboxProps:d})}),(0,g.jsx)(Ue().A,{onChange:N})]})}),[V,v,m,U,k,h,N,P.status,d]);return(0,g.jsxs)("div",{children:[f?(0,g.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,g.jsx)(we().k,{})}):void 0,H]})}var it=()=>o(720321),rt=()=>o(231297),lt=()=>o(755199),ct=()=>o(125840),dt=()=>o(574036);const pt=(0,j().YK)({selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function ut(){const e=(0,r().K8)((()=>{var e;return null===(e=F().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,j().tz)(),o=(0,i().v3)(),n=(0,l().DP)(),s=(0,i().Y0)(),a=(0,r().uB)(void 0,Ge().A);return(0,g.jsx)(J().A,{renderTooltip:()=>t.formatMessage(pt.selectIconColor),placement:"bottom",render:i=>(0,g.jsx)($e().A,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:a,popupType:$e().z.Popup,renderOrigin:o=>(0,g.jsx)($().KF,{ariaLabel:t.formatMessage(pt.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?m().jd[e]:pt.noIconColor)}),icon:it().a,iconStyle:{stroke:e?m().l8[n.mode][e]:m().l8[n.mode].lightgray,fill:e?m().l8[n.mode][e]:n.icon.tertiary},...(0,Ye().A)(o,i)}),render:a=>function(e){const{parent:t,environment:o,currentIconPickerColor:n,theme:s,device:a}=e,i=[];return i.push({key:"askEveryTime",action:()=>{t.close(),mt({environment:o,color:void 0})},render:e=>(0,g.jsx)(dt().A,{...e,title:(0,g.jsx)(j().sA,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{mt(void 0!==n?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===n,style:{boxShadow:void 0},textWrapperStyle:{marginInlineStart:a.isMobile?10:6},rightStyle:{marginInlineEnd:4}})}),(0,g.jsx)(ct().A,{parent:t,currentColor:n,onColorSelected:mt,additionalItems:i,rowStyle:e=>({...e<2&&{opacity:void 0===n?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${s.regularDividerColor}`}}),menuStyle:{padding:"4px 0"}})}({parent:a,environment:o,currentIconPickerColor:e,theme:n,device:s,intl:t})})})}function mt(e){const{environment:t,color:o}=e,{currentUserSettingsStore:n}=F().default.state;n&&rt().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;lt().mJ({userSettingsStore:n,transaction:e,data:{icon_picker_color:t}})}})}const gt=(0,j().YK)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an imageâ€¦"}});function ht(e){const{tab:t,results:o,ready:s,isSmallWidth:a}=e,i=(0,l().IS)((e=>({loading:(0,he().$n)(),captionMenuItem:{textAlign:a?"start":"center",color:e.text.secondary}})),[a]);return s?!o||o&&!o.length?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsx)(j().sA,{defaultMessage:"No results found",id:"mediaPicker.unsplash.noResultsText"}),style:i.captionMenuItem}):(0,g.jsxs)(n.Fragment,{children:[o.map(((e,o)=>(0,g.jsx)(ft,{tab:t,image:e},o))),(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsx)(j().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:i.captionMenuItem})]}):(0,g.jsx)("div",{style:i.loading,children:(0,g.jsx)(we().k,{})})}function ft({tab:e,image:t}){const o=(0,i().v3)(),{device:s}=o,a=(0,n.useCallback)((async()=>{const n=await(0,Ne().default)({environment:o,url:t.downloadUrl,method:"GET",format:"json"});"success"===n.type&&e.onChange({url:n.data.url})}),[o,t.downloadUrl,e]);return(0,g.jsxs)("div",{style:{width:s.isMobile?"33%":"25%",padding:3},children:[(0,g.jsx)(Se().Ay,{hoveredStyle:{opacity:.85},onClick:a,children:(0,g.jsx)(je().A,{src:t.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,g.jsx)(Me().A,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,g.jsx)(j().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:t.authorName,inlinetextlink:e=>(0,g.jsx)(Te().A,{external:!0,href:t.unsplashUrl,children:e})}})})]},t.id)}const yt=function({tab:e,isSmallWidth:t}){const[o,s]=(0,n.useState)(""),a=(0,i().v3)(),{device:r}=a,l=(0,he().b0)();return(0,g.jsxs)("div",{style:{paddingBottom:8},children:[(0,g.jsx)(z().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,g.jsx)($().Ay,{value:o,placeholder:be().A.formatMessage(gt.unsplashPlaceholder),showClearButton:!0,focus:!r.isMobile||void 0,onChange:e=>s(e.target.value)})}),(0,g.jsx)("div",{style:l.galleryWrap,children:(0,g.jsx)(N().A,{request:o,debounce:Pe().tu,performRequest:async e=>{const t=await Ce().callApi({eventName:"searchUnsplashImages",environment:a,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(o,n,s)=>(0,g.jsx)(ht,{tab:e,results:n,ready:s,isSmallWidth:t})})})]})},vt=(0,j().YK)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://â€¦"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filterâ€¦"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});const xt=function(e){var t,s;const l=(0,i().v3)(),c=(0,n.useRef)(null),[d,p]=(0,n.useState)(""),[u,h]=(0,n.useState)({inputValue:"",focus:!1}),[f,y]=(0,n.useState)({inputValue:"",focus:!1}),v=(0,r().uB)(void 0,ie),[x,S]=(0,o(857437).$)();function b(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,g.jsx)(j().sA,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,g.jsx)(zt,{isSmallWidth:e.isSmallWidth,embedInputValue:d,setEmbedInputValue:p,tab:t});case"file":return(0,g.jsx)(kt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,tab:t});case"emoji":return(0,g.jsx)(o(828265).p,{onSubmit:t.onChange,filter:u.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1,comboboxProps:S,hideCustomEmoji:e.hideCustomEmoji});case"icon":return(0,g.jsx)(at,{filter:f.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c,comboboxProps:S});case"gallery":return(0,g.jsx)(ke,{tab:t});case"unsplash":return(0,g.jsx)(yt,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,g.jsx)(De,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,g.jsx)(Lt,{tab:t});case"box":return(0,g.jsx)(Bt,{tab:t});case"aiSourcePicker":return(0,g.jsx)(Et,{isSmallWidth:e.isSmallWidth,aiSourcePickerStore:v,tab:t});case"custom":return(0,g.jsx)(Wt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,embedInputValue:d,setEmbedInputValue:p,tab:t});case"customEmoji":return(0,g.jsx)(o(251994).A,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});case"customAgent":return(0,g.jsx)(ve,{tab:t,filter:f.inputValue||""});default:(0,o(534177).HB)(t)}}const I=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(s=c.current)||void 0===s?void 0:s.offsetWidth)-24)/32:12,{device:k}=l,C=(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(Dt,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,g.jsx)(St,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=I*(0,he().uu)(l);h({...u,inputValue:e.currentTarget.value}),y({...f,inputValue:e.currentTarget.value}),le.setState({...le.state,loadIconCount:t})},iconInput:f.inputValue,emojiInput:u.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t,o){const{device:n}=o,s=e.find((e=>e.type===t));if(s&&"emoji"===s.type){const e=w().aB();s.onChange(e,{keepVisible:!n.isMobile})}}(e.tabs,e.currentTab,l):"icon"===t.type?function(e,t,o){const{device:n}=e,s=t.find((e=>e.type===o));if(s&&"icon"===s.type){const e=s.enforceIconColor??(null===(a=F().default.state)||void 0===a||null===(a=a.currentUserSettingsStore)||void 0===a||null===(a=a.getSettings())||void 0===a?void 0:a.icon_picker_color),t=`/icons/${A().XM(Object.keys(le.getState().allIcons))}_${e??A().XM(m().v3)}.svg`;s.onChange(t,{keepVisible:!n.isMobile})}var a}(l,e.tabs,e.currentTab):"customAgent"===t.type&&function(e,t,o){const n=e.find((e=>e.type===t));n&&"customAgent"===n.type&&n.onChange("__SHUFFLE__",{keepVisible:!a().A.isMobile})}(e.tabs,e.currentTab)},comboboxProps:x})]});let M;if(k.isMobile)M={menuType:ne().gu.Modal,title:e.title,header:C,right:(0,g.jsx)(j().sA,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,g.jsx)(j().sA,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{M={menuType:ne().gu.Popup,header:C};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;M.width=e.popupWidth||300,M.height=o||e.popupHeight,M.maxHeight=e.maxHeight,M.maxWidth=e.maxWidth}return(0,g.jsx)(G,{onSwipeLeft:()=>function(e,t){if(!ce().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ce().A.state.currentTab),n=e[o+1];void 0!==n&&Rt(n.type,t)}(e.tabs,l),onSwipeRight:()=>function(e,t){if(!ce().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ce().A.state.currentTab),n=e[o-1];void 0!==n&&Rt(n.type,t)}(e.tabs,l),render:e=>(0,g.jsx)(o(404277).A,{...M,...e,className:D().aIQ,innerRef:c,children:b()})})};function St(e){const t=(0,j().tz)(),{isMobile:o,isAndroid:n}=(0,i().Y0)(),s=(0,ne().Tf)(),a=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==a?void 0:a.type)||"icon"===(null==a?void 0:a.type)){const i="emoji"===a.type?e.emojiInput:e.iconInput,r=()=>e.onRandomButtonClick(a),l=(0,g.jsx)(bt,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!a.hideRandomButton}),c=(0,g.jsx)($().Ay,{value:i,placeholder:t.formatMessage(vt.filterPlaceholder),autoFocus:!o||void 0,focusInitial:!o||void 0,showClearButton:!0,inputLeft:(0,g.jsx)($().Zf,{icon:y().u}),onChange:e.onFilterChange,right:(0,g.jsxs)("div",{style:{display:"flex"},children:[null!=a&&a.hideRandomButton?void 0:(0,g.jsx)(J().A,{renderTooltip:()=>(0,g.jsx)(j().sA,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:"bottom",render:e=>(0,g.jsx)($().KF,{icon:f,onClick:r,...e})}),l]}),isRightLastElementOfInput:!0,style:{...n&&{borderBottom:"none"}},...e.comboboxProps});return(0,g.jsx)("div",{style:{...!o&&{marginTop:4},marginBottom:10},children:s?(0,g.jsx)(z().A,{children:c}):(0,g.jsx)("div",{children:c})},`input-header-${a.type}`)}return null}function jt(e){return e.fileUpload?oe().cM:e.imageUpload?oe().Dn:e.videoUpload?oe().Rt:void 0}async function At({tab:e,environment:t}){const o=e.imageUpload?"image/*":e.videoUpload?"video/*":e.accept,n=await M().dA({environment:t,supportsMobileNativeFileUpload:!0,multiple:e.allowMultipleFileSelection??!1,accept:o});null!=n&&n.length&&e.onUpload(n)}function bt({hasRandomButtonOnLeft:e,tabs:t,currentTab:o}){const n=t.find((e=>e.type===o));if(!n)return null;let s;return"emoji"===(null==n?void 0:n.type)?s=(0,g.jsx)(te().A,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(s=(0,g.jsx)(ut,{})),e&&s?(0,g.jsx)("div",{style:{marginInlineStart:6},children:s}):s??null}function It({tab:e,isSmallWidth:t}){const o=(0,i().v3)();return e.imageUpload||e.videoUpload?(0,g.jsxs)(z().A,{desktopStyle:{marginBlockStart:12,display:"flex",justifyContent:"center",marginInlineEnd:12,marginInlineStart:12},children:[e.imageUpload?(0,g.jsx)(c().A,{size:"lg",onClick:()=>At({tab:e,environment:o}),style:{width:"100%"},children:(0,g.jsx)(j().sA,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}):void 0,e.videoUpload?(0,g.jsx)(V().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>At({tab:e,environment:o}),fullWidth:t}):void 0]}):null}function kt({tab:e,isSmallWidth:t,onCancel:o}){const n=(0,i().v3)(),c=(0,r().O$)(ue().subscriptionDataStoreInstance),d=(0,l().IS)((e=>({dropzone:{background:e.mediaPickerDropzoneBg},caption:{textAlign:t?"start":"center",color:e.text.secondary},fileLimitWrapper:{display:"flex",alignItems:"center",justifyContent:a().A.isMobile?"flex-start":"center"},fileLimitInner:{marginInlineEnd:6,color:e.text.secondary}})),[t]),p=(0,r().K8)((()=>ee().A.isOnboarding()),[]),u=(0,r().K8)((()=>pe().Si(n)||"plus"),[n]),m=(0,s().X)("upgrade_system_page"),h=wt({upgradeSystemEnabled:m,subscriptionTier:u,subscriptionData:c,isOnboarding:p,existingCaption:e.caption});return(0,g.jsx)(q().V,{type:jt(e)??oe().hy,dropTargetKey:"uploadTab",onDropFile:t=>{if("invalidFileDrop"===t.type)return C().D6({label:(0,g.jsx)(j().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;e.onUpload([t.file])},dropzoneStyle:d.dropzone,children:(0,g.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[e.fileUpload?(0,g.jsx)(z().A,{desktopStyle:{marginTop:t?8:24},children:(0,g.jsx)(V().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>At({tab:e,environment:n}),fullWidth:t})}):void 0,(0,g.jsx)(It,{isSmallWidth:t,tab:e}),h?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:h,style:d.caption}):void 0,c&&pe().Fq(c)?(0,g.jsx)("div",{style:{height:8}}):void 0,m||!c||pe().Fq(c)?void 0:(0,g.jsx)(W().A,{style:{marginTop:0},shouldWrapCaption:!0,caption:(0,g.jsxs)("div",{style:d.fileLimitWrapper,children:[(0,g.jsx)("div",{style:d.fileLimitInner,children:(0,g.jsx)(j().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:M().u1}})}),p?void 0:(0,g.jsx)(de().A,{subscriptionTier:u,onClick:()=>{o&&o()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})})}function wt(e){const{upgradeSystemEnabled:t,subscriptionTier:o,subscriptionData:n,isOnboarding:s,existingCaption:a}=e;if(!(t&&o&&n)||pe().Fq(n)||s)return a;const i=(0,me().N5)({messages:Vt,values:{fileSize:M().u1.toString()}});return(0,g.jsxs)(Z().Ye,{alignItems:"center",justifyContent:a?"space-between":"center",style:{paddingInline:8,marginBottom:4},children:[a,(0,g.jsx)(ge().R,{upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"},source:"media_picker",display:"text",customMessages:i,size:"small"})]})}let Ct=function(e){return e.Drive="drive",e.Docs="googleDocs",e}({});function Mt({tab:e,type:t}){return t===Ct.Docs?(0,g.jsx)(Pt,{tab:e}):(0,g.jsx)(Tt,{tab:e})}function Tt({tab:e}){const t=(0,l().IS)((e=>({buttonItem:{color:e.blue.text.accentPrimary}})),[]);return(0,g.jsxs)(z().A,{children:[(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:t.buttonItem}),(0,g.jsx)(W().A,{shouldWrapCaption:!1,caption:(0,g.jsx)(j().sA,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function Pt({tab:e}){return(0,g.jsx)(z().A,{children:(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>e.onSelect(),focused:!1})})}function Bt({tab:e}){const t=(0,l().IS)((e=>({connectFirstAccountButton:{color:e.blue.text.accentPrimary},connectSecondAccountButton:{color:e.text.secondary}})),[]),{accounts:o}=e;return 0===o.length?(0,g.jsxs)(z().A,{children:[(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:t.connectFirstAccountButton}),(0,g.jsx)(W().A,{shouldWrapCaption:!1,caption:(0,g.jsx)(j().sA,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(z().A,{children:o.map((t=>(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))}),(0,g.jsx)(z().A,{topBorder:!0,children:(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>e.onSelect(),style:t.connectSecondAccountButton,focused:!1})})]})}function Ft(e,t){return()=>{e&&t.onChange(e)}}function Rt(e,t){ce().A.state.isActive&&(ce().A.setState({...ce().A.state,currentTab:e}),"icon"===e&&ce().A.state.recordIconLoggingData&&b().uZ(t,"select_icon_tab",ce().A.state.recordIconLoggingData))}function Dt({tabs:e,onDelete:t,currentTab:o}){const s=(0,l().IS)((e=>({sparklesIcon:{width:16,height:16,marginInlineEnd:4,color:e.palette.purple[400]}})),[]),a=(0,i().v3)(),{device:r}=a;if(e.length<=1&&!t)return null;{const i={gallery:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,g.jsxs)(n.Fragment,{children:[(0,S().unsplashTintableIcon)({width:12,marginInlineEnd:4,height:12}),(0,g.jsx)("span",{children:"Unsplash"})]}),giphy:(0,g.jsxs)(n.Fragment,{children:[(0,x().giphyTintableIcon)({width:12,marginInlineEnd:4,height:12}),(0,g.jsx)("span",{children:"GIPHY"})]}),drive:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),customAgent:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.customAgent",defaultMessage:"Agent"}),aiSourcePicker:(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,v().sparklesIcon)(s.sparklesIcon)]})},l=e.findIndex((e=>e.type===o)),c=e.map((e=>e.title||i[e.type])),p=e.find((e=>e.type===o)),u=p&&"emoji"!==p.type&&r.isAndroid;return(0,g.jsx)(X().Ay,{tabs:c,selectedIndex:l,onChange:t=>{Rt(e[t].type,a)},right:t&&!r.isMobile&&(0,g.jsx)(d().p,{colorPalette:"gray",onClick:t,children:(0,g.jsx)(j().sA,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...u&&{borderBottom:"none"}}})}}function _t({tab:e,accounts:t,type:o=Ct.Drive}){const s=(0,l().IS)((e=>({buttonItem:{color:e.text.secondary}})),[]);return"accounts"in e?e.accounts&&0===e.accounts.length?(0,g.jsx)(Mt,{tab:e,type:o}):(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(z().A,{children:e.accounts.map(((t,o)=>(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))}),(0,g.jsx)(z().A,{topBorder:!0,children:(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:s.buttonItem,focused:!1})})]}):t?0===t.length?(0,g.jsx)(Mt,{tab:e,type:o}):(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(z().A,{children:t.map(((t,o)=>(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.accountName}}),onClick:()=>e.onSelect(t),focused:!1},t.accountId)))}),(0,g.jsx)(z().A,{topBorder:!0,children:(0,g.jsx)(H().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:s.buttonItem,focused:!1})})]}):null}function Lt({tab:e}){const t=(0,i().v3)();return"accounts"in e?(0,g.jsx)(_t,{tab:e}):(0,g.jsx)(N().A,{request:t,performRequest:k().QZ,render:(t,o,n)=>{if(!n)return(0,g.jsx)(z().A,{children:(0,g.jsx)(Q().A,{})});const s=o&&o.accounts?o.accounts:[];return(0,g.jsx)(_t,{tab:e,accounts:s})}})}function Et({tab:e,isSmallWidth:t,aiSourcePickerStore:o}){var s,a;const i=(0,j().tz)(),c=(0,l().IS)((e=>({captionItem:{textAlign:t?"start":"center",color:e.text.secondary},aiResult:{cursor:"pointer",color:e.text.secondary,textAlign:"start",hyphens:"auto",padding:"10px 8px",display:"flex",flexDirection:"row"},aiTitleWrapper:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingInlineStart:8},aiLoadingWrapper:{flex:1,color:e.palette.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginInlineStart:10},loadingDots:{backgroundColor:e.palette.purple[400]}})),[t]),d=(0,r().uB)(o,ie),p=(0,r().O$)(d);return(0,g.jsxs)(n.Fragment,{children:[p.result&&!1===p.loading?0===(null===(s=p.result)||void 0===s?void 0:s.length)?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsx)(j().sA,{defaultMessage:"No results found",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:c.captionItem}):null===(a=p.result)||void 0===a?void 0:a.map((t=>(0,g.jsxs)("div",{style:{...c.aiResult,backgroundColor:p.hover===t.url?"rgba(55,53,47,0.08)":""},onClick:Ft(t.url,e),onMouseEnter:()=>{d.setState({...p,hover:t.url})},children:[(0,g.jsx)(K().A,{imageURL:"NONE"===t.avatar?e.defaultAvatar:t.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),(0,g.jsx)("div",{style:c.aiTitleWrapper,children:t.title})]},t.url))):void 0,p.loading?(0,g.jsxs)("div",{style:c.aiLoadingWrapper,children:[i.formatMessage(vt.aiIsFetchingLoader),(0,g.jsx)(Y().A,{style:c.loadingDots})]}):void 0,p.result||p.loading?void 0:(0,g.jsx)(U,{tab:e,placeholder:e.inputPlaceholder||i.formatMessage(vt.aiSourcePickerPlaceholder),store:d,isSmallWidth:t})]})}function Ot(e,t,o){return()=>{const n=o;if(n){const o=(0,u().Zv)(n)||(0,u().ku)(n,a().A.secureFileConfig.hostname);e.onChange({originUrl:n,pastedSecureFile:o}),I().oF(t,{pastedText:n,source:"media_picker"})}}}function Wt({tab:e,isSmallWidth:t,onCancel:o,embedInputValue:n,setEmbedInputValue:a}){const c=(0,j().tz)(),d=(0,i().v3)(),u=(0,i().Y0)(),m=(0,r().O$)(ue().subscriptionDataStoreInstance),h=(0,r().K8)((()=>pe().Si(d)),[d]),f=(0,r().K8)((()=>ee().A.isOnboarding()),[]),y=(0,l().IS)((e=>({dropZone:{background:e.mediaPickerDropzoneBg},caption:{textAlign:t?"start":"center",color:e.text.secondary},subscriptionLimitWrapper:{display:"flex",alignItems:"center",justifyContent:t?"flex-start":"center"},subscriptionLimitInner:{marginInlineEnd:6,color:e.text.secondary}})),[t]),v=(0,s().X)("upgrade_system_page"),x=wt({upgradeSystemEnabled:v,subscriptionTier:h,subscriptionData:m,isOnboarding:f,existingCaption:e.caption}),S=(0,g.jsx)(p().A,{colorPalette:"blue",onClick:Ot(e,d,n),disabled:0===n.length,hovered:!1,children:e.buttonText||(0,g.jsx)(j().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),A=(0,g.jsx)(z().A,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,g.jsx)($().Ay,{type:"url",value:n,placeholder:e.inputPlaceholder||c.formatMessage(vt.embedPlaceholder),autoFocus:!u.isMobile||void 0,showClearButton:!0,focus:!u.isMobile||void 0,onSubmit:Ot(e,d,n),onChange:e=>a(e.target.value),inputRight:u.isPhone?S:void 0,right:u.isPhone?void 0:S,isRightLastElementOfInput:!0})}),b=(0,g.jsx)(q().V,{type:jt(e)??oe().hy,dropTargetKey:"uploadTab",onDropFile:t=>{if("invalidFileDrop"===t.type)return C().D6({label:(0,g.jsx)(j().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;e.onUpload([t.file])},dropzoneStyle:y.dropZone,children:(0,g.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[e.fileUpload?(0,g.jsx)(z().A,{desktopStyle:{marginTop:t?8:24},children:(0,g.jsx)(V().A,{title:(0,g.jsx)(j().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>At({tab:e,environment:d}),fullWidth:t})}):void 0,(0,g.jsx)(It,{isSmallWidth:t,tab:e}),x?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:x,style:y.caption}):void 0,!v&&m&&pe().Fq(m)?(0,g.jsx)("div",{style:{height:8}}):void 0,v||!m||pe().Fq(m)?void 0:(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:(0,g.jsxs)("div",{style:y.subscriptionLimitWrapper,children:[(0,g.jsx)("div",{style:y.subscriptionLimitInner,children:(0,g.jsx)(j().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:M().u1}})}),f?void 0:(0,g.jsx)(de().A,{subscriptionTier:h||"plus",onClick:()=>{o&&o()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})});return(0,g.jsxs)(g.Fragment,{children:[A,b]})}function zt({tab:e,isSmallWidth:t,embedInputValue:o,setEmbedInputValue:s}){const a=(0,i().v3)(),r=(0,j().tz)(),{device:l}=a;return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(z().A,{desktopStyle:{marginTop:8},children:(0,g.jsx)($().Ay,{type:"url",value:o,placeholder:e.inputPlaceholder||r.formatMessage(vt.embedPlaceholder),autoFocus:!l.isMobile||void 0,showClearButton:!0,focus:!l.isMobile||void 0,onSubmit:Ot(e,a,o),onChange:e=>s(e.target.value)})}),(0,g.jsx)(z().A,{style:e.caption?{}:{marginBottom:6},children:(0,g.jsx)(V().A,{onClick:Ot(e,a,o),title:e.buttonText||(0,g.jsx)(j().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:t})}),e.caption?(0,g.jsx)(W().A,{shouldWrapCaption:!0,caption:e.caption,style:{textAlign:l.isMobile?"start":"center",marginBottom:4}}):void 0]})}const Vt=(0,j().YK)({eligible_for_upgrade:{id:"MediaPicker.upgrade.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> for files larger than {fileSize}MB"},eligible_for_trial:{id:"MediaPicker.upgrade.eligibleForTrial",defaultMessage:"<highlight>Try</highlight> for files larger than {fileSize}MB"},sales_eligible:{id:"MediaPicker.upgrade.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> for files larger than {fileSize}MB"},sales_assisted:{id:"MediaPicker.upgrade.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> for files larger than {fileSize}MB"},eligible_to_request:{id:"MediaPicker.upgrade.eligible_to_request",defaultMessage:"<highlight>Request</highlight> for files larger than {fileSize}MB"},request_pending:{id:"MediaPicker.upgrade.requestPending",defaultMessage:"<highlight>Request pending</highlight> for files larger than {fileSize}MB"}})},694874:(e,t,o)=>{o.d(t,{F$:()=>v,Oh:()=>x,Qs:()=>y,Wy:()=>m,aX:()=>h,it:()=>f,tL:()=>g});o(898992),o(354520),o(430670);var n=()=>o(994310),s=()=>o(534177),a=()=>o(384944),i=()=>o(231297),r=()=>o(755199),l=()=>o(638146),c=()=>o(765957),d=()=>o(846955),p=()=>o(696746),u=()=>o(705059);function m(e){const{currentUserSettingsStore:t}=c().default.state;t&&i().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function g(e){const{currentUserSettingsStore:t}=c().default.state;t&&(d().default.setState({type:"inactive"}),i().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:Date.now()}})}}))}function h(e){const{environment:t,newSeenWelcomeHomeValue:o}=e,n=c().default.state.sidebarSpaceViewStore;n&&i().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=n.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");a().KY({store:t,transaction:e,value:o})}})}function f(e){const{environment:t,tipType:o,completed:n}=e,{currentUserSettingsStore:s}=c().default.state;if(!s)return;const a=s.getPersonalHomeTipsSettings(),l={...a,progress_data:{...a.progress_data,[o]:{completed:n}}};i().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:s,transaction:e,data:{personal_home_tips_settings:l}})}})}function y(e){const{environment:t,hide:o}=e,{currentUserSettingsStore:n}=c().default.state;if(!n)return;const s={...n.getPersonalHomeTipsSettings(),hide_completed:o};i().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{personal_home_tips_settings:s}})}})}function v(e){const{currentUserSettingsStore:t}=c().default.state;t&&i().createAndCommit({environment:e,userAction:"personalHomeActions.markPersonalHomeSidebarItemClicked",canUndo:!0,cellTarget:"main",perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{personal_home_sidebar_item_clicked_at:Date.now()}})}})}function x(e){const{blockId:t,enabledFeatures:o,userId:a}=e,i=(0,s().WP)(o).flatMap((([e,t])=>{if(!t)return[];switch(e){case"tasks":return[(0,p().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const t=(0,p().NY)("customDb");return[t&&(0,l().cf)({userId:a,viewBlockId:t})];case"similarUsersAndTrending":return[(0,p().NY)("similarUsersCollectionView"),(0,p().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,p().NY)("postsCollectionView")];case"recents":case"templates":case"tips":case"calendar":case"aiBannerModule":case"suggested":case"trending":case"shortcuts":return[];default:(0,s().HB)(e)}})).filter(s().O9),{isHomeKey:r,homeCollectionViewIdsKey:c,unifiedFeedEnabledKey:d}=(0,u().h)(t);n().A.set(r,!0),n().A.set(c,i),n().A.set(d,o.unifiedFeed)}},696977:(e,t,o)=>{o.d(t,{x3:()=>T,bk:()=>P,D5:()=>B,uA:()=>E,xd:()=>D,kV:()=>R,Xn:()=>_,Oh:()=>F,qf:()=>O,$8:()=>L});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(581454);var n=()=>o(836095),s=()=>o(726637),a=()=>o(66689),i=()=>o(165358),r=()=>o(206267),l=()=>o(651784),c=()=>o(161479),d=()=>o(496603),p=()=>o(534177),u=()=>o(939768);const m=(0,o(583835).Dv)("parallelAsanaImport");var g=()=>o(553003),h=()=>o(601734),f=()=>o(725951),y=()=>o(765957),v=()=>o(92513),x=()=>o(390181),S=()=>o(522094),j=()=>o(559926),A=()=>o(559506),b=()=>o(901389),I=()=>o(357625),k=()=>o(180328),w=()=>o(383466),C=()=>o(231297);const M=(0,o(69708).YK)({titleMessage:{id:"asanaActions.loginWithAsanaPopupModal.title",defaultMessage:"Asana login"}});async function T(e){const{environment:t,flowId:o}=e;j()._$(t,{import_source:"asana",data:{import_type:"api",status:"initiated"},flowId:o}),await A().callApi({eventName:"disconnectAsana",environment:t,data:{}});const a=(0,f().LX)(t);let i=(0,l().Rq)(s().A.domainBaseUrl,{authType:a,userId:t.currentUser.id});if(i=a.redirectToAuth?i:await(0,f().YN)(t,i),t.device.isElectron)return v().A.setState({...v().A.state,isAccountLinkingInProgress:!0}),void(0,n().P)(i);const r=await w().P(t,{width:580,height:800,url:i,titleMessage:M.titleMessage});if(!r)return;const c=u().qg(r);if(!c.query.code||!c.query.state)return;v().A.setState({...v().A.state,isAccountLinkingInProgress:!0});const d=await A().callApi({eventName:"authWithAsana",environment:t,data:{code:c.query.code,encryptedState:c.query.state}}),p=await A().callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});if("failed"===d.type)j()._$(t,{import_source:"asana",data:{import_type:"api",status:"failure",error:d.error},flowId:o}),console.error(d.error),b().Qg(d);else if(j()._$(t,{import_source:"asana",data:{import_type:"api",status:"success"},flowId:o}),"success"===p.type){const{data:{account:e,workspaces:t}}=p;v().A.setState({...v().A.state,isAccountLinkingInProgress:!1,account:e,workspaces:t,currentTab:"selectData",isModalOpen:!0})}}async function P(e){const{environment:t}=e;v().A.setState({...v().A.state,isAccountDelinkingInProgress:!0});const o=await A().callApi({eventName:"disconnectAsana",environment:t,data:{}});"failed"===o.type?(console.error(o.error),b().Qg(o)):(j().kO(t,{integration_name:"asana"}),"success"===o.type&&v().A.setState({...v().A.state,isAccountDelinkingInProgress:!1,account:void 0,workspaces:[]}))}async function B(e){const{selectedWorkspace:t,environment:o,forceReload:n=!0}=e;if(n||!v().A.state.teamsAndProjects.length){v().A.setState({...v().A.state,isLoadingProjects:!0});const e=await A().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:t,size:5}});"success"===e.type&&v().A.setState({...v().A.state,teamsAndProjects:e.data,isLoadingProjects:!1})}}async function F(e){const{team:t,environment:o}=e,n=v().A.getState(),{selectedWorkspace:s,teamsAndProjects:a,loadMoreClicks:i}=n;if(!s)return;const r=await A().callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:s,teamId:t.gid,size:5,nextPage:t.nextPage}}),l=a.findIndex((e=>e.gid===t.gid));if(-1!==l){if("success"===r.type){const e=r.data.find((e=>e.gid===t.gid));if(!e)return;const o={...a[l],projects:[...a[l].projects,...e.projects],nextPage:e.nextPage},s=a.slice(0,l).concat(o,a.slice(l+1));v().A.setState({...n,teamsAndProjects:s,loadMoreClicks:i+1})}return r}}async function R(e,t){const o=[];for(const s of Object.keys(t)){const{notionTeamspaceId:e,projects:n}=t[s];!(0,d().Kg)(n)&&(0,p().O9)(e)&&o.push({asanaTeamId:s,projectIds:n,notionTeamSpaceId:e})}const n=await A().callApi({eventName:"getAsanaTaskProperties",environment:e,data:o});if("success"===n.type){const{selectedTeamspacesAndProperties:e}=v().A.state;for(const{notionTeamSpaceId:t,properties:o}of n.data.data)o&&(e[t]={selectionMode:"all",properties:o.map((e=>({...e,isSelected:!0})))});v().A.setState({...v().A.state,selectedTeamspacesAndProperties:e})}}async function D({environment:e}){v().A.setState({...v().A.state,isLoadingAsanaWorkspaces:!0});const t=await A().callApi({eventName:"getAsanaWorkspacesNames",environment:e,data:{}});var o;"success"===t.type&&v().A.setState({...v().A.state,account:t.data.account,workspaces:t.data.workspaces,selectedWorkspace:null===(o=t.data)||void 0===o||null===(o=o.workspaces[0])||void 0===o?void 0:o.gid,isLoadingAsanaWorkspaces:!1})}async function _({environment:e,spaceStore:t,currentSpaceViewStore:o,teamsStores:n,flowId:s,navigateBeforeTemplateCreation:l}){const{appTemplatesSetupActions:d,appConfigs:p}=await h().Aw.load(),u=v().A.state.selectedWorkspace;if(!u)return;v().A.setState({...v().A.state,...l&&{currentTab:"importingData"},templateCreationInProgress:!0});const f={},A={};try{for(const s in v().A.state.selectedProjectsAndTeamspaces){if(0===v().A.state.selectedProjectsAndTeamspaces[s].projects.length)continue;let i;const r=v().A.state.selectedProjectsAndTeamspaces[s],{notionTeamspaceId:l}=r;if(!l)continue;const c=n.find((e=>e.id===r.notionTeamspaceId));if(i=c||t,A[l])f[s]=A[l];else{const{serverCommitResult:t,performResult:n}=C().createAndCommit({environment:e,perform:t=>{var n;const s=a().tP,r=null===(n=(0,g().B)(p(),s))||void 0===n?void 0:n.uri;if(!r)return;const l=p().find((e=>e.uri===r));if(null==l?void 0:l.presets.find((e=>e.uri===s))){const n=d.initializeApp({environment:e,spaceViewStore:o,appParentStore:i,appUri:r,presetUri:s,transaction:t,from:"asana_import"});if(2!==(null==n?void 0:n.length))return;return n}},canUndo:!0,userAction:"importActions.importAsana"});f[s]=n,A[l]=n,await t}}}catch(_){return void v().A.setState({...v().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const b=[],w=y().default.state.sidebarSpaceViewStore;if(!w)return;const M=k().mD({environment:e,spaceStore:t,spaceViewStore:w,append:!0});await M.deferred.promise;const T=M.pageId;v().A.setState({...v().A.state,loggerPageId:T});const P=new Set,B=[],F=[];for(const a in f){const e=v().A.state.selectedProjectsAndTeamspaces[a],o=f[a];if(!(o&&e.notionTeamspaceId&&e.projects.length))continue;const n="string"==typeof e.projects?[]:e.projects;B.push(...n);const s=v().A.state.selectedTeamspacesAndProperties[e.notionTeamspaceId];s&&(s.useSectionAsStatus=v().A.state.useSectionAsStatus),P.add(e.notionTeamspaceId),F.push(a),b.push({collectionViewBlocks:[{id:o[0].id,spaceId:(0,c().e)(t.id)},{id:o[1].id,spaceId:(0,c().e)(t.id)}],projectIds:n,asanaTeamId:a,notionTeamSpaceId:e.notionTeamspaceId,propertySelection:s,importAllProjects:"all"===e.projects,importOnlyIncompleteProjects:"in_complete"===e.projects})}j().Pd(e,{import_source:"asana",flowId:s});const R=(0,I().UT)(e,m,{importParams:b,spaceId:(0,c().e)(t.id),asanaWorkspaceId:u,importCompletedTasks:v().A.state.importCompletedTasks,loggerPageId:T,flowId:s||r().JW(),importId:x().R.getOrCreateImportId()},{spaceIds:[]});v().A.setState({...v().A.state,templateCreationInProgress:!1,currentTab:"importingData",choosingWorkspacesCompleted:!0}),S().A.reset();const D=v().A.state.workspaces.find((e=>e.gid===u));D&&function(e,t,o){try{j().mM(e,{import_source:"asana",data:t,flowId:o})}catch(n){i().log({level:"error",from:"asanaV2Actions",type:"parallelAsanaImport",error:{miscDataString:JSON.stringify({error:n,message:"Errored in tracking import_source_input event."})}})}}(e,{workspaceName:D.name,teams:F,projects:B,numberOfTeamspacesUsed:P.size,completedTasks:v().A.state.importCompletedTasks,userId:e.currentUser.id,spaceId:(0,c().e)(t.id)},s);for await(const a of R){if(!v().A.state.isModalOpen)break;if(a.error)return void v().A.setState({...v().A.state,currentTab:"failure"});"success"===a.taskStatus&&v().A.setState({...v().A.state,currentTab:"confirm",result:a.value.status,isComplete:!0})}}function L({teamId:e,spaceId:t}){var o;v().A.setState({...v().A.state,selectedProjectsAndTeamspaces:{...v().A.state.selectedProjectsAndTeamspaces,[e]:{projects:(null===(o=v().A.state.selectedProjectsAndTeamspaces[e])||void 0===o?void 0:o.projects)||[],notionTeamspaceId:t||void 0}}})}function E(){v().A.setState({...v().A.state,currentTab:"selectProperties"})}function O(){v().A.setState({...v().A.state,isModalOpen:!0})}},709438:(e,t,o)=>{o.d(t,{m:()=>r});o(296540);var n=()=>o(401497),s=()=>o(69708),a=o(474848);const i=8;function r({color:e,size:t,style:o}){const r=(0,s().tz)(),l=(0,n().IS)((n=>({dot:{height:t||i,width:t||i,background:e||n.blue.icon.accentPrimary,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...o}})),[t,e,o]);return(0,a.jsx)("div",{role:"img","aria-label":r.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},720321:(e,t,o)=>{o.d(t,{a:()=>s});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.95 1.94 12.11 12.1",svg:(0,o(474848).jsx)("path",{d:"M8 1.95a6.05 6.05 0 1 0 0 12.1 6.05 6.05 0 0 0 0-12.1"})},s=(0,o(340498).wt)("circleFillSmall",n)},736767:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),s=o(474848);function a(e,t){return(0,s.jsx)(o(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const i=(0,n.forwardRef)(a)},738418:(e,t,o)=>{o.d(t,{G:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("info",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.97266 14.9453C11.7871 14.9453 14.9453 11.7803 14.9453 7.97266C14.9453 4.1582 11.7803 1 7.96582 1C4.1582 1 1 4.1582 1 7.97266C1 11.7803 4.16504 14.9453 7.97266 14.9453ZM7.97266 13.7832C4.74609 13.7832 2.16895 11.1992 2.16895 7.97266C2.16895 4.74609 4.73926 2.16211 7.96582 2.16211C11.1924 2.16211 13.7764 4.74609 13.7832 7.97266C13.79 11.1992 11.1992 13.7832 7.97266 13.7832ZM7.91113 5.53906C8.41016 5.53906 8.7998 5.14258 8.7998 4.64355C8.7998 4.14453 8.41016 3.74805 7.91113 3.74805C7.41895 3.74805 7.02246 4.14453 7.02246 4.64355C7.02246 5.14258 7.41895 5.53906 7.91113 5.53906ZM6.77637 11.7324H9.55859C9.83887 11.7324 10.0576 11.5273 10.0576 11.2471C10.0576 10.9805 9.83887 10.7686 9.55859 10.7686H8.71094V7.28906C8.71094 6.91992 8.52637 6.67383 8.17773 6.67383H6.89258C6.6123 6.67383 6.39355 6.88574 6.39355 7.15234C6.39355 7.43262 6.6123 7.6377 6.89258 7.6377H7.62402V10.7686H6.77637C6.49609 10.7686 6.27734 10.9805 6.27734 11.2471C6.27734 11.5273 6.49609 11.7324 6.77637 11.7324Z"})})},748054:(e,t,o)=>{o.d(t,{M:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},s=(0,o(340498).wt)("flag",n)},797730:(e,t,o)=>{o.d(t,{D:()=>n,P:()=>s});const n=(0,o(69708).YK)({agents:{id:"sidebar.agents.button",defaultMessage:"Agents"},notionAi:{id:"sidebar.notionAi.button",defaultMessage:"Notion AI"},inbox:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messages:{id:"sidebar.messages.button",defaultMessage:"Messages"},feed:{id:"sidebarFeedButton.label",defaultMessage:"Feed"},meetings:{id:"sidebar.meetings.button",defaultMessage:"Meetings"}}),s={inbox:o(829548).y,feed:o(925695).N}},820579:(e,t,o)=>{o.r(t),o.d(t,{arrowLineDownIcon:()=>s,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,o(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},s=(0,o(340498).wt)("arrowLineDown",n)},826693:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>s,notionTemplateIcon:()=>a});o(296540);var n=o(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},a=(0,o(340498).wt)("notionTemplate",s)},828265:(e,t,o)=>{o.d(t,{D:()=>oe,p:()=>ae});o(944114),o(269479),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(690825),s=o(296540),a=()=>o(17022),i=()=>o(484714),r=()=>o(852507),l=()=>o(56366),c=()=>o(401497),d=()=>o(718827),p=()=>o(252291),u=()=>o(637997),m=()=>o(669729),g=()=>o(634201),h=()=>o(340498),f=o(474848);const y={viewBox:"0 0 20 20",fittedViewBox:"2.39 3.05 15.76 13.89",svg:(0,f.jsx)("path",{d:"M5.29 3.366a.63.63 0 0 1 .54-.311h2.81c.182 0 .356.08.474.218l4.023 4.692h2.983c1.112 0 2.025.897 2.025 2.025v.02a2.03 2.03 0 0 1-2.025 2.025h-2.983l-4.023 4.692a.63.63 0 0 1-.474.218H5.83a.625.625 0 0 1-.542-.936l2.274-3.974H6.496l-1.949 1.358-.026.017c-.24.15-.533.255-.851.255h-.65a.625.625 0 0 1-.597-.81L3.306 10l-.883-2.855a.625.625 0 0 1 .597-.81h.65c.298 0 .61.079.883.276l1.943 1.354h1.066L5.288 3.99a.63.63 0 0 1 .001-.624m1.618.939 2.274 3.974a.625.625 0 0 1-.542.936H6.3a.63.63 0 0 1-.357-.112L3.896 7.677l.661 2.138a.63.63 0 0 1 0 .37l-.661 2.138 2.047-1.426a.63.63 0 0 1 .357-.112h2.34a.625.625 0 0 1 .542.935l-2.274 3.975h1.445l4.023-4.692a.63.63 0 0 1 .474-.218h3.27a.78.78 0 0 0 .775-.775v-.02a.773.773 0 0 0-.775-.775h-3.27a.63.63 0 0 1-.474-.218L8.353 4.305z"})},v=(0,h().wt)("airplane",y),x={viewBox:"0 0 20 20",fittedViewBox:"1.67 1.55 16.78 16.78",svg:(0,f.jsx)("path",{d:"M11.375 5.413a4.5 4.5 0 0 1-.152-1.177c0-1.482.673-2.683 1.504-2.683.742 0 1.358.957 1.481 2.217.898-.62 1.846-.767 2.318-.296.471.472.324 1.42-.296 2.318 1.26.123 2.217.74 2.217 1.481 0 .83-1.201 1.504-2.683 1.504a4.5 4.5 0 0 1-1.177-.152 3.23 3.23 0 0 1-1.378 3.606l-9.233 5.853c-1.346.852-2.912-.714-2.06-2.06L7.77 6.791a3.23 3.23 0 0 1 3.606-1.378m.517 1.708a1.976 1.976 0 0 0-3.067.339l-.175.276 1.232 1.232a.55.55 0 1 1-.777.778L8.047 8.688l-.467.736 1.306 1.307a.55.55 0 1 1-.778.778l-1.132-1.132-4.004 6.317a.23.23 0 0 0-.042.16.26.26 0 0 0 .075.14.26.26 0 0 0 .141.076.23.23 0 0 0 .16-.042l3.221-2.042-.561-.561a.55.55 0 1 1 .778-.778l.735.736 5.06-3.208a1.976 1.976 0 0 0 .34-3.067z"})},S=(0,h().wt)("carrot",x);const j={viewBox:"0 0 20 20",fittedViewBox:"1.92 3.31 16.8 14.56",svg:(0,f.jsx)("path",{d:"M2.545 3.31a.625.625 0 0 0-.625.625c0 5.882 4.312 10.763 9.765 10.763h3.581c.737.8 1.472 1.718 2.306 2.88a.624.624 0 1 0 1.012-.728c-.947-1.32-1.78-2.344-2.621-3.232C15.747 7.94 11.518 3.31 6.207 3.31zm12.024 8.956c-1.239-1.104-2.624-2.118-4.489-3.483l-1.023-.75a.62.62 0 0 0-.872.134.63.63 0 0 0 .137.875l1.013.742c2.007 1.47 3.42 2.505 4.68 3.664h-2.33c-4.46 0-8.208-3.871-8.497-8.888h3.019c4.102 0 7.602 3.276 8.362 7.706"})},A=(0,h().wt)("leaf",j);var b=()=>o(863330);const I={viewBox:"0 0 20 20",fittedViewBox:"1.87 1.87 16.26 16.26",svg:(0,f.jsx)("path",{d:"M10 1.875a8.125 8.125 0 1 0 0 16.25 8.125 8.125 0 0 0 0-16.25M4.896 5.393a6.9 6.9 0 0 1 2.298-1.671L9.45 5.36v1.35L7.04 8.46l-1.283-.417zm-1.733 5.334L5.417 9.09l1.284.417.92 2.833-.793 1.091H4.04a6.8 6.8 0 0 1-.878-2.703m5.416 6.001-.861-2.651.793-1.092h2.978l.793 1.092-.861 2.651a6.9 6.9 0 0 1-2.842 0m7.38-3.298h-2.787l-.793-1.091.92-2.833 1.284-.417 2.254 1.638a6.8 6.8 0 0 1-.878 2.703m-.855-8.037-.861 2.65-1.283.417-2.41-1.75V5.36l2.256-1.638c.879.393 1.66.966 2.298 1.671"})},k=(0,h().wt)("soccerBall",I);var w=()=>o(69708),C=()=>o(496603),M=()=>o(534177),T=()=>o(284371),P=()=>o(901997),B=()=>o(736767),F=()=>o(939740),R=()=>o(89924),D=()=>o(859428),_=()=>o(87878),L=()=>o(63467),E=()=>o(722872),O=()=>o(486666),W=()=>o(948033),z=()=>o(423219),V=()=>o(797162),U=()=>o(970585),N=()=>o(765957),H=()=>o(712030);const q=1,K=6048e5;function $(e,t,o){if(void 0===e||void 0===t)return 0;const n=o-t,s=e*Math.pow(.5,n/K);return Math.round(s)}var Y=()=>o(668577);var G=()=>o(267419),J=()=>o(285790);function Z(e){const t=(0,w().tz)(),o=(0,c().IS)((e=>({wrapper:{borderTop:`solid 1px ${e.border.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingInlineStart:12,paddingInlineEnd:12}})),[]);return(0,f.jsx)("div",{style:o.wrapper,children:oe.map(((o,n)=>e.isHidden(o)?null:(0,f.jsx)(D().A,{alignment:"start",placement:"bottom",render:n=>(0,s.createElement)(J().A,{focused:e.isFocused(o),disabled:e.isDisabled(o),...n,key:o.id,ariaLabel:t.formatMessage({id:"emojiPicker.category.label",defaultMessage:"Jump to category: {category}"},{category:o.category??o.id}),icon:()=>o.icon?(0,f.jsx)(p().I,{icon:o.icon,size:"lg",colorVariant:"secondary"}):void 0,style:{width:32,height:32},onClick:t=>{e.onCategoryClick(o,t)}}),renderTooltip:e=>(0,f.jsx)("div",{...e,children:o.title})},o.id)))})}var Q=()=>o(519116);const X=(0,w().YK)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),ee=(0,f.jsx)(w().sA,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),te="__ADD_CUSTOM_EMOJI__",oe=[{id:"recent",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(274570).clockIcon},{id:"callout",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:o(424139).emojiFaceIcon},{id:"nature",category:"Animals & Nature",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:A},{id:"food",category:"Food & Drink",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:S},{id:"activities",category:"Activities",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:k},{id:"travel",category:"Travel & Places",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:v},{id:"objects",category:"Objects",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:o(123411).X},{id:"symbols",category:"Symbols",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:o(671089).checkmarkCircleIcon},{id:"flags",category:"Flags",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:o(748054).M},{id:"custom",title:(0,f.jsx)(w().sA,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:o(858141).squareGrid2X2Icon},{id:"add",title:ee,icon:o(480034).q}],ne=Object.fromEntries(oe.map((e=>[e.id,e]))),se=["ðŸ’¡","ðŸ‘‰","â˜","ðŸ‘Œ","ðŸ”‘","ðŸš§","âš ï¸","ðŸ”¥","ðŸ“Œ","âœ‚ï¸","â“","ðŸš«","â›”","â°","â˜Žï¸","ðŸš¨","â™»ï¸","âœ…","ðŸ”’","ðŸ“Ž","ðŸ“–","ðŸ—£","âž¡ï¸","ðŸ“¢","ðŸ› ","âš™"];function ae(e){const{onSubmit:t,isInline:o,onUpload:h,iconLoggingData:y,comboboxProps:v,hideCustomEmoji:x}=e,S=(0,i().v3)(),j=(0,c().DP)(),A=(0,w().tz)(),I=(0,i().Y0)(),k=(0,E().Tf)(),K=(0,l().K8)((()=>Math.floor((0,W().so)(S,e.menuRef,k))),[S,e.menuRef,k]),J=(0,l().K8)((()=>(0,W().uu)(S)),[S]),oe=(0,l().K8)((()=>(0,_().wA)({spaceStore:(0,_().vZ)()})),[]),ae=I.isDesktop&&oe&&!x,de=(0,s.useMemo)((()=>a().e.withListenerIgnored((()=>Y().o.getEmojiFrecencyMap()))),[]),pe=(0,s.useMemo)((()=>Object.keys(de).sort(((e,t)=>de[t].f!==de[e].f?de[t].f-de[e].f:de[t].u-de[e].u)).slice(0,O().Te*K)),[de,K]),ue=(0,l().K8)((()=>{var e;const t=(0,_().vZ)();if(!t)return[];return((null===(e=z().A.getData(S,{spaceId:t.id}))||void 0===e?void 0:e.pointers)??[]).map((e=>g().qg.toString(g().qg.fromPointer(e))))}),[S]),me=(0,s.useCallback)((e=>{t(e),function(e){var t;const o=Y().o.getStore(null===(t=N().default.state.sidebarSpaceStore)||void 0===t?void 0:t.getSpaceId());if(!o)return;let n=o.state??{};const s=Date.now();for(const i in n)n[i].f=$(n[i].f,n[i].u,s);const a=(0,H().t4)(e);if(a in n?(n[a].f+=q,n[a].u=s):n[a]={f:q,u:s},Object.keys(n).length>Y().Z){const e=Object.entries(n);e.sort(((e,t)=>e[1].f!==t[1].f?t[1].f-e[1].f:t[1].u-e[1].u)),n=Object.fromEntries(e.slice(0,Y().Z))}o.setState(n)}(e),y&&P().aU(S,"pick_emoji",{icon:e,...y})}),[t,y,S]),ge=(0,G()._)(),he=(0,l().K8)(H().bb,[]),fe=(0,s.useCallback)((e=>{const t=void 0===he?g().Fq(e,ge):[];return{key:e,action:()=>{0===t.length&&me(e)},render:o=>(0,f.jsx)(Q().A,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:me})}}),[me,ge,he]),ye=(0,l().K8)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:n,maxEmojisPerSection:s,showCategoriesThreshold:a,customEmojiStrings:i,shouldShowCustomAddButton:r,frequentlyUsedEmojis:l,emojiFrecencyMap:c,hideCustomEmoji:d}=e,p=function(e){return C().oE([e.filterIsEmpty?ne.recent:void 0,e.isCallout?ne.callout:void 0,ne.people,ne.nature,ne.food,ne.activities,ne.travel,ne.objects,ne.symbols,ne.flags,e.hideCustomEmoji?void 0:ne.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:n,hideCustomEmoji:d}),u=g().f7(o)??"",h=o.split(" ").filter(Boolean),f=p.map((e=>{const o=function(e,t,o){return"recent"===e.id?o:"callout"===e.id?se:"custom"===e.id?t:G().A.state.emojiByCategory[e.category]||[]}(e,i,l),n=function(e,t,o,n,s,a){const i=C().oE(t.map((t=>{if(a&&g().qg.isCustomEmojiString(t))return;if(""===o)return{rank:100,emoji:t};const i=(0,m().$)(t,G().A.state);let r=[];if(i&&i.keywords)r=i.keywords||[];else if(g().qg.isCustomEmojiString(t)){var l;const o=g().qg.fromCustomEmojiString(t).pointer,n=e.currentUser.id;if(!n)return;const s=null===(l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:n}))||void 0===l?void 0:l.value;if(!s||!s.alive)return;r=g().AP(s.name)}const c=o.length<3||o.includes(" ")?r:r.map((e=>e.replaceAll(" ",""))),d=o.indexOf(t);if(-1!==d)return{rank:100-d+re(t,s),emoji:t};const p=":",u=c.findIndex((e=>e===`${p}${o}`));if(-1!==u)return{rank:100-u+re(t,s),emoji:t};const h=c.findIndex((e=>e===o));if(-1!==h)return{rank:10*(10-h)+re(t,s),emoji:t};const f=c.findIndex((e=>e.startsWith(o)));if(-1!==f)return{rank:10-f+re(t,s),emoji:t};if(n.length>1){const e=i&&i.uniqueKeywords||[];if(n.every((t=>e.find((e=>e.startsWith(t))))))return{rank:n.length+re(t,s),emoji:t}}return c.some((e=>e.includes(o)))?{rank:1+re(t,s),emoji:t}:void 0})));return i.sort(((e,t)=>t.rank-e.rank))}(t,o,u,h,c,d);return{category:e,emojis:n.map((e=>({rank:e.rank,emoji:le(e.emoji)})))}})),y=[];let v=0;for(const{category:m,emojis:g}of f){if(r&&"custom"===m.id){const e={rank:-1/0,emoji:te};g.unshift(e)}let e=0;for(;e<g.length;){const t=g.slice(e,e+s);y.push({id:m.id,title:0===e?m.title:void 0,emojis:t}),e+=t.length}v+=g.length}if(""===o||v>a){return y.map((e=>({...e,emojis:e.emojis.map((({emoji:e})=>e))})))}const x=C().Ul(y.flatMap((e=>e.emojis)),(e=>-e.rank)).map((({emoji:e})=>e));if(0===x.length)return[];return[{emojis:x}]}({environment:S,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:K,showCategoriesThreshold:Math.floor(K*J/2),customEmojiStrings:ue,shouldShowCustomAddButton:ae,frequentlyUsedEmojis:pe,emojiFrecencyMap:de,hideCustomEmoji:x});return t}),[S,e.filter,e.isCallout,K,J,ae,ue,pe,de,x]),ve=(0,s.useRef)(null),xe=(0,s.useMemo)((()=>{const e=[];for(const[t,o]of ye.entries()){let n;n=I.isMobile?O().UA:O().Sq;const s=void 0!==o.title,a=t===ye.length-1||void 0!==ye[t+1].title;s&&(I.isMobile?n+=47.5:n+=33.5),a&&I.isMobile&&(n+=10),e.push(n)}return e}),[ye,I]),Se=(0,n().Te)({count:ye.length,getScrollElement:()=>ve.current,estimateSize:e=>xe[e]}),je=(0,s.useCallback)((e=>{const t=ye.findIndex((t=>t.id===e));-1!==t&&Se.scrollToIndex(t,{behavior:"auto",align:"start"})}),[Se,ye]),Ae=(0,s.useRef)(null);(0,r().w)((()=>{!async function(){await(0,L().y)(),await async function(){if(!ie){await G().A.waitUntilLoaded();for(const t in G().A.state.positionalEmojiData){var e;const o=null===(e=(0,m().$)(t,G().A.state))||void 0===e?void 0:e.keywords;o&&(u().fB[t]={...u().fB[t],uniqueKeywords:C().sb(o.flatMap((e=>e.split(" "))))})}ie=!0}}()}()}));const be=(0,l().uB)(void 0,U().A);(0,r().l)((()=>{be.setState({...be.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}));const Ie=ae?1===ye.length&&ye[0].emojis[0]===te:0===ye.length;(0,s.useEffect)((()=>{Ie?be.unsetFocus():be.setState({...be.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,be,Ie]);const ke=(0,s.useMemo)((()=>ae?{key:"custom-emoji-add",action:()=>{Ae.current&&V().A.setState({open:!0,isEditing:!1,entrypoint:"picker",originRect:Ae.current.getBoundingClientRect(),uploadFileEventHandlers:h})},render:e=>(0,f.jsx)(D().A,{renderTooltip:()=>ee,render:t=>(0,f.jsx)(d().Ay,{...e,...t,ref:Ae,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${j.border.primary}`,cursor:"pointer",borderRadius:15},children:(0,f.jsx)(p().I,{icon:b().plusSmallIcon,size:"sm",colorVariant:"secondary"})})})}:null),[h,ae,j]),we=[];let Ce,Me=!1;if(Ie)we.push({key:"no results",items:[{key:"no results",action:()=>{Ae.current&&ae&&V().A.setState({open:!0,isEditing:!1,entrypoint:"no_results",originRect:Ae.current.getBoundingClientRect(),uploadFileEventHandlers:h})},render:(e,t)=>(0,f.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,f.jsx)(B().A,{...!ae&&e,caption:A.formatMessage(X.noResults),style:{fontWeight:T().Wy.medium,marginBottom:2,marginInlineStart:2,height:20,boxSizing:"content-box"}}),ae?(0,f.jsxs)(d().Ay,{...e,ref:Ae,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${j.border.primary}`,fontWeight:T().Wy.medium,fontSize:T().J.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,f.jsx)(p().I,{icon:b().plusSmallIcon,size:"sm",colorVariant:"primary"}),ee]}):null]})}],render:e=>(0,f.jsx)(R().A,{...e})});else if(1===ye.length&&void 0===ye[0].id){const e=C().sb(ye[0].emojis).map((e=>e===te?ke:fe(e))).filter(M().Pe);we.push({key:"search-results",items:e,render:e=>(0,f.jsx)(R().A,{shouldShowBottomDivider:!0,children:(0,f.jsx)("div",{style:(0,W().ze)(S,j,k),children:e.children})},e.key)})}else Me=!0,Se.getVirtualItems().map((e=>{var t;const{key:o,index:n,start:s,end:a,size:i}=e,r=ye[n],l=void 0!==r.title,c=n===ye.length-1||void 0!==ye[n+1].title,[d,p]=[Se.scrollOffset??0,(Se.scrollOffset??0)+((null===(t=Se.scrollRect)||void 0===t?void 0:t.height)??0)];p<s||d>=a||void 0===Ce&&(Ce=r.id);const u=r.emojis.map((e=>e===te?ke:fe(e))).filter(M().Pe);return{key:o.toString(),items:u,render:e=>(0,f.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:i,transform:`translateY(${s}px)`},children:(0,f.jsx)("div",{"data-index":n,children:(0,f.jsx)(R().A,{title:r.title,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...l?{paddingTop:16}:{}},desktopTitleStyle:{...l?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,f.jsx)("div",{style:{...(0,W().ze)(S,j,k),...l&&I.isMobile?{paddingTop:10}:{},...c&&I.isMobile?{paddingBottom:10}:{},...I.isPhone&&{boxShadow:ce({theme:j,isFirstRowInSection:l,isLastRowInSection:c})}},children:e.children})})},o.toString())},n)}})).forEach((e=>e&&we.push(e)));const Te=I.isDesktop&&we.length>0?0:void 0,Pe=(0,f.jsx)(F().Ay,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:F().Oh.Grid,getItemsPerRowForSection:()=>K,renderRow:(e,t)=>(0,f.jsx)("div",{role:"row",style:{display:"flex"},children:e},t),store:be,initialFocus:Te,sections:we,disableKeyboardArrowWrap:!0,unfocusOnScroll:I.isMobile,performHandleEnterOnTab:o,comboboxProps:v,captureKeyboardOnlyWhenFocused:!o});if(!Me)return(0,f.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,f.jsx)("div",{style:{width:"100%",flexGrow:1},children:Pe})});const Be=(0,f.jsx)(Z,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return x||!oe&&0===ue.length;case"add":return!ae;default:return!1}},isFocused:e=>Ce===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=ye.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?V().A.setState({open:!0,isEditing:!1,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:h}):je(e.id)}});return(0,f.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,f.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:I.isDesktop?O().w$:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:ve,children:(0,f.jsx)("div",{style:{height:Se.getTotalSize(),width:"100%",position:"relative"},children:Pe})}),Be]})}let ie=!1;function re(e,t){const o=t[e];return o?100*o.f:0}function le(e){var t;const o=(0,H().bb)();if(!(void 0!==o&&0!==o))return e;const n=null===(t=(0,m().$)(e,G().A.state))||void 0===t?void 0:t.variations;return 5===(null==n?void 0:n.length)||"ðŸ¤"===e?(null==n?void 0:n[o-1])??e:e}function ce(e){const{theme:t,isFirstRowInSection:o,isLastRowInSection:n}=e;return o&&n?`0 1px 0 ${t.regularDividerColor}, 0 -1px 0 ${t.regularDividerColor}`:o?`0 -1px 0 ${t.regularDividerColor}`:n?`0 1px 0 ${t.regularDividerColor}`:"none"}},829548:(e,t,o)=>{o.d(t,{y:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1.87 3.62 16.25 12.75",svg:(0,o(474848).jsx)("path",{d:"M6.303 3.625c-.71 0-1.374.355-1.768.946L2.232 8.025c-.233.35-.357.76-.357 1.18v5.045c0 1.174.951 2.125 2.125 2.125h12a2.125 2.125 0 0 0 2.125-2.125V9.204c0-.42-.124-.83-.357-1.179l-2.303-3.454a2.13 2.13 0 0 0-1.768-.946zm-.728 1.64a.88.88 0 0 1 .728-.39h7.394c.293 0 .566.146.728.39l2.303 3.454a1 1 0 0 1 .083.156h-4.702a.625.625 0 0 0-.625.625v.476a1.484 1.484 0 0 1-2.968 0V9.5a.625.625 0 0 0-.625-.625H3.189a1 1 0 0 1 .083-.156zm-2.45 4.86H7.27a2.734 2.734 0 0 0 5.46 0h4.145v4.125a.875.875 0 0 1-.875.875H4a.875.875 0 0 1-.875-.875z"})},s=(0,o(340498).wt)("inbox",n)},837822:(e,t,o)=>{o.d(t,{ke:()=>k,xw:()=>w,Ay:()=>T,Oc:()=>C,aQ:()=>M});var n=o(296540),s=()=>o(56366),a=()=>o(401497),i=()=>o(252291),r=()=>o(133043),l=()=>o(69708),c=()=>o(35392),d=()=>o(296798),p=()=>o(859428),u=()=>o(490044),m=()=>o(694874),g=()=>o(696746),h=()=>o(765957),f=()=>o(551694),y=()=>o(846955),v=()=>o(644914),x=()=>o(645873);const S={LazyAiLandingPageExperimentSwitcher:new(x().O2)("LazyAiLandingPageExperimentSwitcher",(()=>o.e(66169).then(o.bind(o,981440))))},j=(0,x()._h)(S.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var A=o(474848);const b=(0,l().YK)({experimentSwitcherTooltip:{id:"aiLandingPageExperimentSwitcherTooltip",defaultMessage:"[dev only] experience switcher"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}});function I(e){const{styles:t}=e,f=(0,o(484714).v3)(),x=(0,s().K8)((()=>{const{sidebarSpaceViewStore:e}=h().default.state;if(e)return g().x$(e)}),[]),S=(0,s().K8)((()=>{const e=h().default.state.mainEditorCurrentBlockStore;return!!e&&g().Nh(e.id)}),[]),I=(0,s().K8)((()=>"home_available"===y().default.getState().type),[]),k=(0,s().K8)((()=>{const e=null==x?void 0:x.getModel();return e&&x&&(0,o(488715).Q)({model:e,getRecordModel:x.getRecordModel,pageVisitSource:o(584262).y8.SidebarHome})}),[x]),T=(0,o(640945).X)(),P=(0,o(59226).X)("feed_sidebar_item"),{sidebarTooltipStore:B,sidebarItemHoverStore:F,handleFocus:R,handleBlur:D,handleMouseMove:_,handleMouseLeave:L}=(0,o(201506).W)(),E=(0,n.useCallback)((()=>{(0,m().Wy)(f),(0,m().F$)(f),(0,o(162674).ZL)({environment:f,from:"sidebar"}),I&&(0,m().tL)(f),o(441199).default.isVisible()&&(0,o(770906).VI)({environment:f})}),[f,I]),O=(0,v().ab)(),W=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.inverseSecondary},linkBoxStyle:{...O.baseSidebarItem,...S&&O.currentSelectedSidebarItem}})),[S,O]),z=(0,s().O$)(F),V=(0,s().K8)((()=>C()),[]),U=(0,n.useCallback)((()=>{const{isActionButtonFocused:e,isActionButtonHovered:t,isActionButton2Focused:o,isActionButton2Hovered:n}=z;return t?(0,A.jsx)(l().sA,{...b.chatHistoryTooltip}):n?(0,A.jsx)(l().sA,{...b.experimentSwitcherTooltip}):e?(0,A.jsx)(l().sA,{...b.chatHistoryTooltip}):o?(0,A.jsx)(l().sA,{...b.experimentSwitcherTooltip}):(0,A.jsxs)("div",{style:W.tooltip,children:[(0,A.jsx)("div",{children:(0,A.jsx)(l().sA,{...V})}),(0,A.jsx)(c().A,{style:W.shortcutLabel,name:"openHome"})]})}),[z,W.shortcutLabel,W.tooltip,V]);return(0,A.jsx)(p().A,{store:B,renderTooltip:U,disableTooltip:I,originGap:6,textWrap:!0,placement:"right",render:e=>(0,A.jsx)(d().A,{...e,style:W.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:k,onClick:E,onFocus:t=>{var o;null===(o=e.onFocus)||void 0===o||o.call(e,t),R(t)},onBlur:t=>{var o;null===(o=e.onBlur)||void 0===o||o.call(e,t),D()},"aria-current":S?"page":void 0,children:(0,A.jsx)(u().A,{left:(0,A.jsx)(i().I,{icon:r().P,colorVariant:"secondary",size:"lg"}),disableMobileBorder:!0,right:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginInlineEnd:-4,justifyContent:"center",gap:3},children:[(0,A.jsx)(j,{sidebarItemHoverStore:F,sidebarTooltipStore:B}),Boolean(T)&&!P?(0,A.jsx)(w,{}):void 0]}),onMouseMove:_,onMouseLeave:L,children:(0,A.jsx)(l().sA,{...M.label})})})})}function k(e){const{styles:t}=e,o=(0,s().K8)((()=>"home_available"===y().default.getState().type),[]),n=(0,v().ab)(),m=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.inverseSecondary}})),[]);return(0,A.jsx)(p().A,{renderTooltip:()=>(0,A.jsxs)("div",{style:m.tooltip,children:[(0,A.jsx)("div",{children:(0,A.jsx)(l().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"Notion AI, recent pages, and more"})}),(0,A.jsx)(c().A,{style:m.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:"right",render:e=>(0,A.jsx)(d().A,{...e,style:n.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{f().A.open()},children:(0,A.jsx)(u().A,{left:(0,A.jsx)(i().I,{icon:r().P,colorVariant:"secondary",size:"lg"}),disableMobileBorder:!0,children:(0,A.jsx)(l().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function w(){const e=(0,a().IS)((e=>({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24},unreadBadge:{backgroundColor:e.red.icon.accentPrimary,width:8,height:8,borderRadius:5,transform:"scale(0)",position:"relative"},pulseRing:{position:"absolute",width:8,height:8,borderRadius:"50%",transform:"scale(0)",background:e.red.icon.accentPrimary}})),[]),t=n.useRef(null),o=n.useRef(null);return n.useEffect((()=>{const e=t.current,n=o.current;if(!e||!n)return;const s=n.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:300,easing:"ease-out",fill:"forwards",delay:500}),a=e.animate([{transform:"scale(1)",opacity:.5},{transform:"scale(2.5)",opacity:0}],{duration:2e3,easing:"ease-out",delay:800});return()=>{a.cancel(),s.cancel()}}),[]),(0,A.jsx)("div",{style:e.wrapper,children:(0,A.jsx)("div",{ref:o,style:e.unreadBadge,children:(0,A.jsx)("div",{ref:t,style:e.pulseRing})})})}function C(){return M.tooltipNoAi}const M=(0,l().YK)({tooltipNoAi:{id:"sidebarPersonalHomeButton.tooltipNoAi",defaultMessage:"Recent pages, upcoming events, and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),T=n.memo(I)},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>s});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.74 2.74 10.52 10.52",svg:(0,o(474848).jsx)("path",{d:"M8 2.74a.66.66 0 0 1 .66.66v3.94h3.94a.66.66 0 0 1 0 1.32H8.66v3.94a.66.66 0 0 1-1.32 0V8.66H3.4a.66.66 0 0 1 0-1.32h3.94V3.4A.66.66 0 0 1 8 2.74"})},s=(0,o(340498).wt)("plusSmall",n)},894612:(e,t,o)=>{o.d(t,{A:()=>v,Q:()=>x});o(296540);var n=()=>o(416845),s=()=>o(206267),a=()=>o(69708),i=()=>o(970330),r=()=>o(559926),l=()=>o(901389),c=()=>o(180328),d=()=>o(972435),p=()=>o(765957),u=()=>o(522094);class m extends(()=>o(757695))().Store{getInitialState(){return{isDragOverActive:!1}}}const g=new m;var h=()=>o(125565),f=o(474848);const y=(0,a().YK)({invalidFileFormat:{id:"zipImportOptions.invalidFile",defaultMessage:"Unsupported file format, Please drag and drop a ZIP file"}});const v=function(e){const t=(0,o(484714).v3)(),s=(0,o(401497).IS)((e=>({containerStyle:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",paddingInlineStart:12,paddingInlineEnd:12,paddingTop:18,paddingBottom:18,marginBottom:32,borderColor:e.zipImport.border,borderStyle:"dashed",borderWidth:1,borderRadius:6,gap:4,background:e.zipImport.background},iconStyle:{width:24,height:24,marginBottom:8},zipContentContainerStyle:{display:"flex",alignItems:"center",justifyContent:"center"},zipContentStyle:{display:"block",maxWidth:480,paddingInlineStart:4,paddingInlineEnd:4,whiteSpace:"normal",wordBreak:"break-word",textAlign:"center"},zipContentChildrenStyle:{overflow:"visible",whiteSpace:"normal",marginInlineEnd:4},zipTitleStyle:{color:e.text.primary,fontWeight:500,fontSize:14},boldTextStyle:{fontWeight:500},zipTextStyle:{color:e.text.secondary,fontSize:12,overflow:"visible"},zipButtonStyle:{display:"inline-block"},buttonContainerStyle:{display:"inline-block",alignItems:"center",justifyContent:"center",background:"none"},zipButtonTextStyle:{color:e.zipImport.border}})),[]),u=e=>{g.setState({...g.state,isDragOverActive:e})};return(0,f.jsxs)("div",{style:s.containerStyle,onDrop:o=>{o.preventDefault(),u(!1);const s=o.dataTransfer.files[0];(async function(e,t,o,s){var a;if(1!==t.length)return;if("zip"!==(null===(a=t[0].name.split(".").pop())||void 0===a?void 0:a.toLowerCase())){const e=d().A.formatMessage(y.invalidFileFormat);throw l().f1(e),new(n().yI)("Invalid file format, please upload it as a zip file")}const{mainEditorCurrentBlockStore:u,sidebarSpaceStore:m,sidebarSpaceViewStore:g}=p().default.state;if(!m||!g||!u)return;const h=S();r().fJ(e,{import_source:"genericImporter",from:s,import_type:"file",flowId:h});const f=await c().lD({environment:e,pageStore:u,spaceStore:m,spaceViewStore:g,analyticsFrom:s,uploadType:"genericImporter",flowId:S()},t);f&&(i().vH(e,{from:"import",type:"page",new_page_id:f.id,creating_block_id:f.id,parent_collection_id:f.getParentCollectionIdUpToTwoLevels()}),o(f,"zip",h))})(t,[s],e.onComplete,e.analyticsFrom).then((()=>{})).catch((()=>{}))},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),u(!0)},onDragLeave:e=>{e.preventDefault(),u(!1)},children:[(0,f.jsx)("img",{style:s.iconStyle,alt:"Zip upload icon",src:o(148307).A.images.import.zipCloudPng}),(0,f.jsx)(h().A,{isSecondaryColor:!0,style:s.zipTitleStyle,children:(0,f.jsx)(a().sA,{id:"zipImport.convertZipToPages",defaultMessage:"Convert Zip to pages"})}),(0,f.jsx)("div",{style:s.zipContentContainerStyle,children:(0,f.jsxs)("div",{style:s.zipContentStyle,children:[(0,f.jsx)(h().A,{isInline:!0,isSecondaryColor:!0,style:{...s.zipTextStyle,...s.zipContentChildrenStyle},children:(0,f.jsx)(a().sA,{id:"zipImport.convertZipToPagesDescription",defaultMessage:"Import a zip file that contains DOCX, CSV, Text, Markdown, HTML and EPUB files to convert to pages"})}),(0,f.jsx)(h().A,{isInline:!0,isSecondaryColor:!0,style:{...s.zipTextStyle,...s.boldTextStyle,...s.zipContentChildrenStyle},children:(0,f.jsx)(a().sA,{id:"zipImport.dragAndDropZip",defaultMessage:"Drag and drop a Zip file"})}),(0,f.jsx)(h().A,{isInline:!0,isSecondaryColor:!0,style:{...s.zipTextStyle,...s.zipContentChildrenStyle},children:(0,f.jsx)(a().sA,{id:"zipImport.dragAndDropOr",defaultMessage:"or"})}),(0,f.jsx)(o(718827).Ay,{onClick:()=>x(t,"genericImporter",e.onComplete,e.analyticsFrom),style:{...s.buttonContainerStyle,...s.zipContentChildrenStyle,...s.zipButtonStyle},hoveredStyle:s.buttonContainerStyle,pressedStyle:s.buttonContainerStyle,children:(0,f.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,f.jsx)("div",{style:{display:"flex"},children:(0,f.jsx)("div",{style:{...s.zipTextStyle,...s.boldTextStyle,...s.zipButtonTextStyle},children:(0,f.jsx)(a().sA,{id:"zipImport.chooseFile",defaultMessage:"Choose file"})})})})})]})}),(0,f.jsx)(h().A,{isSecondaryColor:!0,style:s.zipTextStyle,children:(0,f.jsx)(a().sA,{id:"zipImport.maxFileSize",defaultMessage:"Maximum file size: 25MB"})})]})};async function x(e,t,o,n){const s=p().default.state,{mainEditorCurrentBlockStore:a,sidebarSpaceStore:l,sidebarSpaceViewStore:d}=s;if(!l||!d||!a)return;const u=S();r().fJ(e,{import_source:"genericImporter",from:n,import_type:"file",flowId:u});const m=await c().un({environment:e,pageStore:a,spaceStore:l,spaceViewStore:d,analyticsFrom:n,uploadType:t,flowId:u,allowMultiple:!1});m&&(i().vH(e,{from:"import",type:"page",new_page_id:m.id,creating_block_id:m.id,parent_collection_id:m.getParentCollectionIdUpToTwoLevels()}),o(m,"zip",u))}function S(){return u().A.state.flowId||s().JW()}},907893:(e,t,o)=>{o.d(t,{Ay:()=>D,Kd:()=>W});o(18107),o(967357),o(898992),o(354520),o(581454);var n=o(296540),s=()=>o(726637),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),l=()=>o(718827),c=()=>o(252291),d=()=>o(126617),p=()=>o(863330),u=()=>o(869558),m=()=>o(69708),g=()=>o(901265),h=()=>o(872539),f=()=>o(778417),y=()=>o(760217),v=()=>o(406699),x=()=>o(404277),S=()=>o(939740),j=()=>o(45552),A=()=>o(16006),b=()=>o(89924),I=()=>o(859428),k=()=>o(167334),w=()=>o(722872),C=()=>o(553965),M=()=>o(422366),T=()=>o(115512),P=()=>o(913530),B=()=>o(205160),F=o(474848);function R(e){const{store:t,from:n,type:a,canEditItem:l,itemDepth:c,isHovered:d,isFocused:p,onToggle:u}=e,m=s().A.isMobile||d||p,g=(0,i().K8)((()=>{var e;const n=(0,o(242028).s)(t),s=t.isPlaceholderWorkflowTemplateBlock(),a=null===(e=t.getCollectionStoreIfSingleSource())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&l&&!n&&!s&&!a)}),[t,l]),h=function(e){const{showRightIcons:t}=e;return(0,r().IS)((()=>({iconContainer:{display:"flex",paddingInlineStart:3,...t?{}:{...T().Qg,display:"block"}}})),[t])}({showRightIcons:m});return a===o(946065).yy?null:(0,F.jsxs)("div",{style:h.iconContainer,children:[(0,F.jsx)(O,{store:t,from:n,type:e.type,itemIndex:e.itemIndex,itemDepth:c}),g?(0,F.jsx)(_,{store:t,onToggle:u,isTopLevelItem:0===c,from:n,type:a}):void 0]})}const D=n.memo(R);function _(e){const{store:t,onToggle:o,isTopLevelItem:n,from:r,type:l}=e,c=(0,a().v3)(),d=(0,m().tz)(),p=(0,i().K8)((()=>t.isCollectionView()),[t]),g=(0,i().K8)((()=>t.getOwnedAndLinkedCollectionStores()),[t]),f=(0,i().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const n=P().p.createChildStore(t,{table:u().Gy,id:o});return null==n?void 0:n.getFormatStore().getValue()}),[t]),y=d.formatMessage(B().v.addAPageInside);return p&&!f&&0===g.length?(0,F.jsx)(L,{disabled:!0}):g.length<=1?(0,F.jsx)(I().A,{renderTooltip:()=>y,placement:"bottom",render:e=>{const s={...e,onClick:e=>{var s;const a=(null===(s=g[0])||void 0===s?void 0:s.getParentBlockStore())??t;h().ru({store:a,shouldNavigateToSource:!1,environment:c,analytics:{from:r,type:l},toggleOptions:{onToggle:o,isTopLevelItem:n}})}};return(0,F.jsx)(L,{events:s})}}):(0,F.jsx)(I().A,{renderTooltip:()=>y,placement:"bottom",render:e=>(0,F.jsx)(v().A,{popupType:s().A.isMobile?v().z.BottomSheet:v().z.Popup,renderOrigin:t=>(0,F.jsx)(L,{events:(0,C().A)(e,t)}),render:e=>(0,F.jsx)(E,{blockStore:t,parent:e,from:r,type:l})})})}function L(e){const t=W(),o=(0,m().tz)();return(0,F.jsx)(l().Ay,{ariaLabel:o.formatMessage(B().v.addAPageInside),style:t.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,F.jsx)(c().I,{icon:p().plusSmallIcon,size:"sm",colorVariant:s().A.isMobile?"tertiary":"secondary"})})}function E(e){const{blockStore:t,parent:o,from:n,type:l}=e,c=(0,a().v3)(),d=(0,i().K8)((()=>t.getOwnedAndLinkedCollectionStores().filter((e=>!e.isSyncedCollection()))),[t]),p=(0,r().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),u={menuType:s().A.isMobile?w().gu.Modal:w().gu.Popup,right:s().A.isMobile?(0,F.jsx)(j().DoneMenuText,{}):void 0},g={key:"collections",render:e=>(0,F.jsx)(b().A,{...e,title:(0,F.jsx)(m().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:d.map((e=>({key:e.id,render:o=>{var n;return(0,F.jsx)(y().A,{...o,title:(0,F.jsx)("div",{style:p.menuItem,children:(0,F.jsx)(A().A,{store:e})}),icon:(0,F.jsx)(k().A,{icon:e.getIcon(),size:14,isEmptyPage:!1,isAlias:(null===(n=e.getParentBlockStore())||void 0===n?void 0:n.id)!==t.id,iconRecordCategory:"collection"})})},action:t=>{h().ru({store:e,environment:c,shouldNavigateToSource:!0,analytics:{from:n,type:l}})}})))};return(0,F.jsx)(x().A,{...u,children:(0,F.jsx)(S().Ay,{type:S().Oh.Vertical,onAccept:o.close,initialFocus:void 0,sections:[g]})})}function O(e){const{store:t,from:o,type:n,itemDepth:i,itemIndex:r}=e,p=(0,m().tz)(),u=(0,a().v3)(),h=W(),y=e=>{const s=(0,M().U)(t);f().Lt({environment:u,store:t}),g().it({environment:u,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:s,type:0===i?"top_level":"nested",outliner_type:n,outliner_position:r,outliner_depth:i,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},v="bookmarks"===n?p.formatMessage({defaultMessage:"Remove, rename, and moreâ€¦",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):p.formatMessage({defaultMessage:"Delete, duplicate, and moreâ€¦",id:"sidebarItem.pageMenuButton.tooltip"});return(0,F.jsx)(I().A,{renderTooltip:()=>v,placement:"bottom",render:e=>(0,F.jsx)(l().Ay,{ariaLabel:v,style:h.button,onClick:y,...e,children:(0,F.jsx)(c().I,{icon:d().ellipsisSmallIcon,size:"sm",colorVariant:s().A.isMobile?"tertiary":"secondary"})})})}function W(){return(0,r().IS)((e=>({button:s().A.isMobile?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginInlineStart:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginInlineStart:4}})),[])}},936996:(e,t,o)=>{o.d(t,{A:()=>p});o(581454),o(296540);var n=()=>o(401497),s=()=>o(729108),a=()=>o(631524),i=()=>o(100622),r=()=>o(710149),l=()=>o(21140),c=()=>o(606273),d=o(474848);function p({getIdentifier:e,onSelectRow:t,rows:o,title:p,renderRow:u,onToggleGroup:m,onSelectGroup:g,collapsed:h,groupCheckedState:f,rowCheckedState:y,disabled:v,rowStyles:x={},rowsContainerStyles:S={},loadMoreButton:j,checkboxStyles:A={},loading:b}){const I=(0,n().IS)((e=>({row:{display:"flex",cursor:"pointer",alignItems:"center",gap:6,height:24,marginTop:4,marginInlineStart:40},loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6}})),[]);if(b){const e=(null==x?void 0:x.lineHeight)||14;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(l().Ye,{style:{paddingInlineStart:6,paddingInlineEnd:8,...I.loadingRow},children:[(0,d.jsx)(r().A,{style:{height:14,width:34}}),(0,d.jsx)(r().A,{style:{height:e,width:200}})]}),(0,d.jsxs)("div",{style:{...I.row,...x},children:[(0,d.jsx)(r().A,{style:{height:14,width:14}}),(0,d.jsx)(r().A,{style:{height:e,width:64}})]}),(0,d.jsxs)("div",{style:{...I.row,...x},children:[(0,d.jsx)(r().A,{style:{height:14,width:14}}),(0,d.jsx)(r().A,{style:{height:e,width:96}})]})]})}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a().p,{onClick:m,pressedStyle:{background:"transparent"},ignoreLocalHoverState:!0,children:(0,d.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,d.jsx)(c().f,{disabled:!0,style:{pointerEvents:"none"},isSidebar:!1,open:!h,fill:!1,onClick:e=>{e.stopPropagation(),m()},icon:"chevron"}),(0,d.jsx)(s().S,{disabled:v,onClick:g,checked:f,style:{borderRadius:2,...A},size:14,checkedColor:v?i().IF.blueWithAlpha(.3):i().Tj.blue}),p]})}),h?void 0:(0,d.jsxs)("div",{style:S,children:[o.map((o=>(0,d.jsxs)("div",{style:{...I.row,...x},onClick:v?void 0:()=>{t(o)},children:[(0,d.jsx)(s().S,{style:{marginInlineEnd:1,borderRadius:2,...A},onClick:e=>{e.stopPropagation(),t(o)},disabled:v,checked:y(o),size:14,checkedColor:v?i().IF.blueWithAlpha(.3):i().Tj.blue}),u(o)]},e(o)))),j&&!v?(0,d.jsx)("div",{style:I.row,children:j}):void 0]})]})}},947993:(e,t,o)=>{o.d(t,{Lq:()=>i,QG:()=>g,Uk:()=>p,VN:()=>c,_O:()=>r,de:()=>u,dn:()=>l,lK:()=>a,tH:()=>d,vY:()=>m});var n=()=>o(751735),s=()=>o(284371);const a=28,i=44,r=144,l=144,c=.1,d=124,p=118;function u({theme:e,dominantColorFromIcon:t,height:o,width:s}){return{container:{position:"relative",width:s,height:o,display:"flex",justifyContent:"stretch"},coverAndIconContainer:{position:"relative",width:s,marginBottom:16},emptyGalleryCoverStyle:{border:"unset",background:t?(0,n().X4)(t,c):e.home.cards.coverPhoto.base}}}const m={titleWrap:{width:"100%",minHeight:72,paddingTop:10,paddingBottom:12,paddingInlineStart:16,paddingInlineEnd:16,position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:10,flexGrow:1},titleText:{fontWeight:s().Wy.medium,fontSize:s().J.UIRegular.desktop,lineHeight:"normal",width:"auto",whiteSpace:"pre-wrap",...(0,o(115512).pA)(2)}},g={position:"absolute",bottom:-a/2,insetInlineStart:16,width:a,height:a,display:"flex",justifyContent:"flex-start"}},948033:(e,t,o)=>{o.d(t,{$n:()=>c,b0:()=>l,so:()=>p,uu:()=>u,ze:()=>d});var n=()=>o(484714),s=()=>o(56366),a=()=>o(401497),i=()=>o(100622),r=()=>o(486666);function l(){const{device:e,WindowSizeStore:t}=(0,n().v3)(),o=(0,s().K8)((()=>e.isPhone),[e]),{phonePaddingLeft:i,phonePaddingRight:r}=(0,s().K8)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,a().IS)((e=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:e.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingInlineStart:o?i:12,paddingInlineEnd:o?r:12,boxShadow:o?`0 1px 0 ${e.regularDividerColor}`:""}})),[o,i,r])}function c(){return{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1}}function d(e,t,o){const{device:n,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",...o?{}:{alignItems:"flex-start"},...n.isPhone?o?{background:i().Tj.transparent,paddingInlineStart:s.getSafePaddingLeftCSS(0),paddingInlineEnd:s.getSafePaddingRightCSS(0)}:{background:t.popoverBackground,paddingInlineStart:s.getSafePaddingLeftCSS(r().H),paddingInlineEnd:s.getSafePaddingRightCSS(r().MP)}:n.isTablet?{background:i().Tj.transparent,paddingInlineStart:r().FU,paddingInlineEnd:r().FU}:{background:i().Tj.transparent,paddingInlineStart:r().zG,paddingInlineEnd:r().zG}}}function p(e,t,o){var n,s;const{device:a,WindowSizeStore:i}=e;if(a.isPhone){const e=o?0:r().H,t=o?0:r().MP;return(window.innerWidth-i.getSafePaddingLeftPx(e)-i.getSafePaddingRightPx(t))/r().UA}return a.isTablet?r().Vq:null!=t&&null!==(n=t.current)&&void 0!==n&&n.offsetWidth?((null==t||null===(s=t.current)||void 0===s?void 0:s.offsetWidth)-2*r().zG)/r().Sq:r().bc}function u(e){return e.device.isMobile?r().zR:r().zf}}}]);