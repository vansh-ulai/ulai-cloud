"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[35738],{53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},70899:(e,t,n)=>{n.d(t,{U:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.26",svg:(0,n(474848).jsx)("path",{d:"M11.904 3.28a6.125 6.125 0 1 0-1.648 10.415.625.625 0 1 0-.46-1.163 4.875 4.875 0 1 1 2.808-2.93c-.102.294-.43.523-.878.523a.87.87 0 0 1-.872-.872V5.705a.625.625 0 0 0-1.242-.098 3.04 3.04 0 0 0-1.746-.527c-.792 0-1.542.277-2.095.825-.557.55-.871 1.332-.871 2.256s.313 1.714.864 2.276 1.3.858 2.102.858c.8 0 1.55-.294 2.104-.85a2.12 2.12 0 0 0 1.756.93c.835 0 1.738-.441 2.058-1.361a6.125 6.125 0 0 0-1.88-6.734M6.65 6.793c.294-.29.715-.463 1.216-.463.5 0 .929.173 1.228.466.296.289.508.735.508 1.365 0 .631-.213 1.095-.515 1.4-.303.306-.73.484-1.221.484-.49 0-.91-.178-1.209-.482-.296-.303-.507-.767-.507-1.402 0-.633.21-1.08.5-1.368"})},i=(0,n(340498).wt)("atSmall",o)},73223:(e,t,n)=>{n.r(t),n.d(t,{checkIsTutorialDone:()=>f,dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>g});var o=()=>n(541235),i=()=>n(231297),r=()=>n(755199),a=()=>n(739135),s=()=>n(765957);function l(e,t,n){var o;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const l=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;n?r().mJ({userSettingsStore:i,transaction:n,data:{tutorials:{...l,[t]:(0,a().i9)(i,t)}}}):v({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...l,[t]:(0,a().i9)(i,t)}}})},userId:i.id})}function c(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;v({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(o,t)}}})},userId:o.id})}function d(e,t){var n;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;(null==a?void 0:a[t])!==o().YD&&v({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:o().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&v({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const c=(0,a().gt)(l,t);o().c$[t].steps.findIndex((e=>e.id===c))>=o().c$[t].steps.findIndex((e=>e.id===n))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:n}}})}function m(e,t,n){if((0,a().ll)(n))return;const o=(0,a().tb)(t,n);o&&p(e,t,o)}function g(e,t,n,o){var i;const{currentUserSettingsStore:a}=s().default.state;if(!a)return;const l=null===(i=a.getSettings())||void 0===i?void 0:i.tutorials;o?r().mJ({userSettingsStore:a,transaction:o,data:{tutorials:{...l,[t]:n}}}):v({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:a,transaction:e,data:{tutorials:{...l,[t]:n}}})},userId:a.id})}function f(e){const{currentUserSettingsStore:t}=s().default.state;return!!t&&(0,a().x$)(t,e)}function v(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},97059:(e,t,n)=>{n.d(t,{s:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,n(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},i=(0,n(340498).wt)("magicWandSmall",o)},124749:(e,t,n)=>{n.d(t,{$:()=>r});var o=()=>n(56366);const i=new(n(496506).ComputedStore)((()=>n(765957).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function r(){return(0,o().O$)(i)}},173614:(e,t,n)=>{n.d(t,{c:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.02 15.83 14.46",svg:(0,n(474848).jsx)("path",{d:"M7.662 5.794a2.77 2.77 0 1 1-5.538 0 2.77 2.77 0 0 1 5.538 0m-1.25 0a1.52 1.52 0 1 0-3.038 0 1.52 1.52 0 0 0 3.038 0m2.498-.55a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.053 0a.55.55 0 0 0 0 1.1h.098a.55.55 0 1 0 0-1.1zm2.603 4.329a.55.55 0 1 0-.952-.552l-.049.085a.55.55 0 1 0 .952.55zm-6.208-.552a.55.55 0 0 0-.952.552l.049.084a.55.55 0 0 0 .951-.551zm5.182 2.324a.55.55 0 0 0-.953-.552l-.048.085a.55.55 0 0 0 .951.551zm-4.156-.551a.55.55 0 0 0-.952.55l.05.085a.55.55 0 1 0 .951-.551zm6.722-2.231a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.337 7.343a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0"})},i=(0,n(340498).wt)("integration",o)},175882:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkTriangleSmallIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,o.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},r=(0,n(340498).wt)("exclamationMarkTriangleSmall",i)},176412:(e,t,n)=>{n.d(t,{L:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.97 2.72 18.06 14.56",svg:(0,n(474848).jsx)("path",{d:"M3.893 2.875a.626.626 0 0 1 .79-.02l.091.088.128.148.015.033.072.105 11.27 13.148a.623.623 0 0 1-1.033.68l-1.616-1.884c-1.12.408-2.338.633-3.61.633-3.757 0-7.049-1.946-8.707-4.843l-.155-.283a1.46 1.46 0 0 1 0-1.359l.155-.283c.89-1.554 2.25-2.834 3.898-3.687L3.825 3.757l-.072-.105a.626.626 0 0 1 .14-.777M7.41 7.941a3.3 3.3 0 0 0-.717 2.056l.004.17A3.307 3.307 0 0 0 9.83 13.3l.17.004c.595 0 1.151-.161 1.634-.437l-1.52-1.773a1.104 1.104 0 0 1-1.18-1.377zM10 4.194c3.878 0 7.26 2.075 8.862 5.127l.074.164c.125.332.125.7 0 1.032l-.074.163a9.3 9.3 0 0 1-2.987 3.327l-2.69-3.138a3.3 3.3 0 0 0 .116-.702l.005-.17a3.31 3.31 0 0 0-3.136-3.303L10 6.691a3 3 0 0 0-.377.022L7.682 4.447A10.7 10.7 0 0 1 10 4.194"})},i=(0,n(340498).wt)("eyeSlashFill",o)},219348:(e,t,n)=>{n.d(t,{DV:()=>S,EQ:()=>g,Mu:()=>f,Nr:()=>v,cP:()=>u,m0:()=>m,m2:()=>d,s8:()=>p});n(898992),n(354520),n(672577);var o=()=>n(242422),i=()=>n(56366),r=()=>n(84520),a=()=>n(821062),s=()=>n(72234),l=()=>n(231297),c=()=>n(765957);const d={"baseball-cap":"permanent",bow:"permanent",cat:"permanent",cherry:"permanent",cowboy:"permanent",crown:"permanent",duck:"permanent",firefighter:"permanent",flower:"permanent",glasses:"permanent",headphone:"permanent",leaf:"permanent",magician:"permanent",mustache:"permanent",paprika:"permanent",pencil:"permanent",propeller:"permanent","safety-hat":"permanent",scarf:"permanent","seasonal-bat":"october25","seasonal-demon":"october25","seasonal-frankenstein":"october25","seasonal-pumpkin":"october25"};function u(e){const{store:t,from:n}=e;if(t.update((e=>({...e,isOpen:!0,openCount:e.openCount+1,from:n||"unknown"}))),e.shouldSetSeenPersonalizationSettingsModal){const{sidebarSpaceViewStore:t}=c().default.state;t&&l().createAndCommit({environment:e.environment,userAction:"AgentPersonalizationSettings.markSeen",canUndo:!1,perform:e=>{const n=t.getSettings()||{},o={...n,agent_personalization_settings:{...n.agent_personalization_settings||{},has_already_seen_personalization_settings_modal:!0}};s().AG(t,e,o)}})}}function p(e){const{store:t}=e;t.update((e=>({...e,isOpen:!1})))}function m(e){const{store:t}=e;return t.state.isOpen}function g(e){const{store:t}=e;return t.state.from||"unknown"}function f(e){var t;const{environment:n,agentName:o,customizationItems:i,newPageIdToAdd:r,contextPageId:d}=e,{sidebarSpaceViewStore:u}=c().default.state;if(!u)return;const p=null===(t=u.getSettings())||void 0===t?void 0:t.agent_personalization_settings;let m=(null==p?void 0:p.recently_used_pages)||[];r&&(m=m.filter((e=>e.page_id!==r)),m.unshift({page_id:r,used_at:Date.now()}),m=m.slice(0,10));const g={name:o,customization_items:i,context_page_id:d,recently_used_pages:m.length>0?m:void 0,has_already_seen_personalization_settings_modal:(null==p?void 0:p.has_already_seen_personalization_settings_modal)||!0};(0,a().A)(g,p)||l().createAndCommit({environment:n,userAction:"AgentPersonalizationSettings.save",canUndo:!0,perform:e=>{const t=u.getSettings()||{},n={...t,agent_personalization_settings:{...t.agent_personalization_settings||{},...g}};s().AG(u,e,n)}})}function v(){return(0,i().K8)((()=>{const e=o().default.getConfigKey("agent_seasonal_accessories","batch"),t=o().default.getConfigKey("agent_seasonal_accessories","batch_expiration_time"),n=t&&new Date(t)<new Date;return r().sy.filter((t=>{const o=d[t];return"permanent"===o||o===e&&!n}))}),[])}function S(e){const t=v();return(0,i().K8)((()=>{var n,i;const a=null==e||null===(n=e.getSettings())||void 0===n?void 0:n.agent_personalization_settings;if(null!=a&&null!==(i=a.customization_items)&&void 0!==i&&i[0]){const e=a.customization_items[0];if(t.includes(e))return e}const s=o().default.getEligibleGroup({experimentId:"nosy_default_accessory"}),l=(null==a?void 0:a.has_already_seen_personalization_settings_modal)??!1;if(s&&"control"!==s&&!l){const e=r().sy.find((e=>e===s));if(e)return e}}),[e,t])}},279647:(e,t,n)=>{n.d(t,{Yo:()=>x,sL:()=>h,gf:()=>y,zC:()=>C,UZ:()=>b});var o=n(296540),i=()=>n(726637),r=()=>n(401497),a=n(474848);const s=(0,n(340498).wt)("at",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})});var l=()=>n(476724),c=()=>n(689094),d=()=>n(381138),u=()=>n(379632),p=()=>n(969842),m=()=>n(607935),g=()=>n(534177),f=()=>n(267419),v=()=>n(148832),S=()=>n(543665);function y(e){return"+"===e.insertionType?(0,a.jsx)(x,{}):(0,a.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,a.jsx)(_,{svg:d().q.__iconDefinition.svg,viewBox:d().q.__iconDefinition.viewBox})})}function x(){return(0,a.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,a.jsx)(_,{svg:c().W.__iconDefinition.svg,viewBox:c().W.__iconDefinition.viewBox})})}function C(){return(0,a.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,a.jsx)(_,{svg:l().I.__iconDefinition.svg,viewBox:l().I.__iconDefinition.viewBox})})}function h(){return(0,a.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,a.jsx)(_,{svg:s.__iconDefinition.svg,viewBox:s.__iconDefinition.viewBox})})}function b(e){const{store:t,theme:n,isSafariOrIOS:o,emojiType:r,currentUserId:a}=e;return t instanceof v().B?(0,p().h6)({pageModel:t.getModel(),pageRole:t.getRole(),showEmojiInline:!0,emojiType:r,baseUrl:i().A.domainBaseUrl,getRecordModel:t.getRecordModel,isClient:!0,isSafariOrIOS:o,currentUserId:a,theme:n,emojiData:f().A.state}):t instanceof S().m?(0,m().e)({collectionPointer:null===(s=t.getModel())||void 0===s?void 0:s.pointer,showEmojiInline:!0,emojiType:r,baseUrl:i().A.domainBaseUrl,getRecordModel:t.getRecordModel,getRecordRole:t.inMemoryRecordCache.makeGetRecordRoleFn(a),isSafariOrIOS:o,isClient:!0,currentUserId:a,theme:n,emojiData:f().A.state}):void(0,g().HB)(t);var s}function _(e){const{svg:t,viewBox:n}=e,i=(0,o.useMemo)((()=>{const e=u().A.renderToString((0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:n,children:t}));return`url("${`data:image/svg+xml,${encodeURIComponent(e)}`}")`}),[t,n]),s=(0,r().IS)((e=>({container:{width:"100%",height:"100%",backgroundColor:e.icon.secondary,WebkitMaskImage:i,maskImage:i,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}})),[i]);return(0,a.jsx)("div",{style:s.container})}},280244:(e,t,n)=>{n.d(t,{BT:()=>C,DK:()=>_,bO:()=>b});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(56366),a=()=>n(794198),s=()=>n(247331),l=()=>n(239381),c=()=>n(158115),d=()=>n(201980),u=()=>n(69708),p=()=>n(496603),m=()=>n(829300),g=()=>n(231297),f=()=>n(375447),v=()=>n(575143),S=()=>n(89924),y=()=>n(279647),x=n(474848);function C(e){const{mentionMenuCurrentFormulaStore:t,setTemporaryInputData:n,isFirstSection:i,formulaContextVariableResults:d}=e,m=d.filter((e=>e.kind===s().FormulaContextValueKind.ContextValue&&"block"===e.type.type)),g=(0,r().K8)((()=>{const e=m.map((e=>{const o=(0,l().sM)(e),i=(0,l().E9)(e),r=(0,l().Ix)(e.type);return{action:h(e,t),key:e.id,render:e=>(e.focused&&n({title:o,icon:(0,x.jsx)(y().sL,{}),allowTabCompletion:!1}),(0,x.jsx)(v().A,{...e,right:(0,x.jsx)(a().I,{icon:c().arrowChevronSingleRightFillSmallIcon,size:"xs"}),svg:r,title:o,tooltipText:i}))}}));return(0,p().oE)(e)}),[m,t,n]),f=(0,o.useMemo)((()=>{if(0!==g.length)return{items:g,key:"formula property results",render:e=>(0,x.jsx)(S().A,{...e,title:(0,x.jsx)(u().sA,{defaultMessage:"Property from",id:"mentionMenu.formulaPropertySection.title"}),desktopTitleStyle:i?{paddingTop:4}:void 0,topBorder:!i})}}),[g,i]);return f}function h(e,t){return function(){t.setState({formulaTypecheckContextValue:e}),f().Ay.updateOpenState({showFormulaProperty:!0})}}function b(e){const{query:t,formulaContextVariableResults:n,setTemporaryInputData:a,isFirstSection:c}=e,d=(0,i().v3)(),p=(0,r().K8)((()=>w({environment:d,formulaVariableFilter:e=>e.kind===s().FormulaContextValueKind.ContextValue&&(0,l().IF)(e),query:t,formulaContextVariableResults:n,setTemporaryInputData:a})),[d,n,t,a]),m=(0,o.useMemo)((()=>{if(0!==p.length)return{items:p,key:"custom formula results",render:e=>(0,x.jsx)(S().A,{...e,title:(0,x.jsx)(u().sA,{defaultMessage:"Custom",id:"mentionMenu.customFormulaVariables.title"}),desktopTitleStyle:c?{paddingTop:4}:void 0,topBorder:!c})}}),[p,c]);return m}function _(e){const{formulaReturnType:t,query:n,formulaContextVariableResults:o,setTemporaryInputData:r}=e;return w({environment:(0,i().v3)(),formulaVariableFilter:e=>e.kind===s().FormulaContextValueKind.ContextValue&&e.type.type===t&&!(0,l().IF)(e),query:n,formulaContextVariableResults:o,setTemporaryInputData:r})}function w(e){const{environment:t,formulaVariableFilter:n,query:o,formulaContextVariableResults:i,setTemporaryInputData:r}=e;if(0===i.length)return[];const a=i.filter(n);return 0===a.length?[]:a.map((e=>{const n=(0,l().sM)(e),i=(0,l().E9)(e),a=(0,l().Ix)(e.type);return{action:I(t,e,o),key:e.id,render:t=>(t.focused&&r({allowTabCompletion:!0,icon:(0,x.jsx)(y().sL,{}),title:e.name}),(0,x.jsx)(v().A,{...t,svg:a,title:n,tooltipText:i}))}}))}function I(e,t,n){return function(o){g().createAndCommit({userAction:"MentionMenu.formulaMenuItem",environment:e,canUndo:!0,perform:i=>{const r=(0,d().CA$)(t);m().Ju({annotations:[r],editorMode:"default",environment:e,mentionType:"formulaContextVariable",menuListItemAction:o,query:n,transaction:i})}})}}},289190:(e,t,n)=>{n.d(t,{m:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:o,sessionIdForAnalytics:i,collectionId:r}=e,a=i||n(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:r,numBlocksToAutofill:o.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const i=new o},381379:(e,t,n)=>{n.d(t,{r:()=>_});n(898992),n(354520),n(581454);var o=()=>n(484714),i=()=>n(56366),r=()=>n(179034),a=()=>n(519831),s=()=>n(245241),l=()=>n(534177),c=()=>n(807700),d=()=>n(486674),u=()=>n(847585),p=()=>n(825972),m=()=>n(135599),g=()=>n(981342),f=()=>n(311337),v=()=>n(73199),S=()=>n(765957),y=()=>n(148832),x=()=>n(543665);const C=20;function h(e,t){return e instanceof y().B?t?!e.isPersonProfile():!e.isPersonProfile()&&!e.isPeopleCollectionViewPage():e instanceof x().m||void(0,l().HB)(e)}function b(e){return e instanceof x().m?!(0,c().l)(e)&&!(0,u().z)(e):e instanceof y().B||void(0,l().HB)(e)}function _(e){const{query:t,disabled:n,includeDataSources:l,blockStore:c}=e,u=(0,o().v3)(),y=(0,i().O$)(S().AppStoreSidebarSpaceStore),_=(0,i().K8)((()=>(0,f().y)(u)),[u]),{overriddenPublicShareLinkSpaceStore:w,furthestPublicShareAncestorId:I}=(0,v().W)(),T=(0,i().K8)((()=>Boolean(S().AppStoreSidebarSpaceStore||w||c)),[c,w]),M=(0,i().K8)((()=>{var e;return null===(e=(0,d().a)())||void 0===e?void 0:e.id}),[]),A=(0,i().K8)((()=>{if(n)return[];return p().NK.state.filter((e=>e.pageId!==M)).slice(0,C).map((e=>e.store))}),[M,n]),V=""===t,{results:k,isResultsLoading:D}=(0,m().W)({..._?{type:s().Vz.BlocksInAncestor,ancestorId:I??""}:{type:s().Vz.BlocksInSpace},source:"mention_menu",query:t,limit:C,filters:{isDeletedOnly:!1,excludeTemplates:!0,includePublicPagesWithoutExplicitAccess:_,navigableBlockContentOnly:!0,excludeSurrogateCollections:!l},options:{disable:n||!T||V||_&&!I,overrideSpaceStore:_?w:void 0},peopleBlocksToInclude:"collection_view_page"}),j=(0,i().K8)((()=>(0,g().jj)(y)),[y]),R=(0,i().K8)((()=>V?A.map((e=>({store:e,serverEventProperties:void 0}))).filter((({store:e})=>h(e,j)&&b(e))):k.map((({store:e,collectionId:t,isSurrogateCollection:n,serverEventProperties:o})=>({store:n&&t?x().m.createChildStore(e,{table:a().Vl,id:t}):e,serverEventProperties:o}))).filter((({store:e})=>h(e,j)&&b(e)))),[k,A,V,j]);return l?{results:R,isLoading:D}:{results:R.filter((e=>e.store.table===r().ev)),isLoading:D}}},388182:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).Store.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},448801:(e,t,n)=>{n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},482871:(e,t,n)=>{n.d(t,{z:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(430670),n(581454);var o=()=>n(898244),i=()=>n(448801),r=()=>n(179034),a=()=>n(722101),s=()=>n(878710),l=(n(354520),()=>n(496603));function c(e){const{collectionContextStore:t,collectionViewStore:n,transaction:i}=e,c=n.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:n}=e;if(!t||t.length<=o().WF)return[];const i=t.filter((e=>!n.has(e)));return l().sb([...i.reverse(),...l().o8(t).reverse()]).slice(0,t.length-o().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const o of p)a().TF({parentStore:c,childToRemoveStore:(0,s().v3)(c,{table:r().ev,id:o}),transaction:i})}function d(e){const{resultIds:t,collectionViewStore:n,collectionContextStore:l,transaction:d}=e,u=n.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,i().i)(p,t.slice(0,o().WF));for(const[o,i]of Object.entries(m))if(i){const e=(0,s().v3)(n,{table:r().ev,id:i});a().nc({parentStore:u,insertStore:(0,s().v3)(n,{table:r().ev,id:o}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===o)),i=t[e-1],l=i?(0,s().v3)(n,{table:r().ev,id:i}):void 0;a().WH({parentStore:u,insertStore:(0,s().v3)(n,{table:r().ev,id:o}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:n,transaction:d})}},491848:(e,t,n)=>{n.d(t,{w:()=>i});n(898992),n(672577);var o=()=>n(755199);function i({collectionContextStore:e,transaction:t}){const n="collectionTypedView"===e.contextType,i=e.databaseType,r=e.collectionStoresStore.state,a=r.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||r[0];!n&&a&&o().ee({transaction:t,databaseType:i,collectionId:a.id})}},541235:(e,t,n)=>{n.d(t,{Ud:()=>a,YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]}},i="completed",r="dismissed";function a(e,t){return null==t?void 0:t[e]}},542129:(e,t,n)=>{n.d(t,{h:()=>I,v:()=>T});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(56366),a=()=>n(401497),s=()=>n(98126),l=()=>n(416504),c=()=>n(519831),d=()=>n(201980),u=()=>n(69708),p=()=>n(496603),m=()=>n(829300),g=()=>n(231297),f=()=>n(712030),v=()=>n(62856),S=()=>n(375447),y=()=>n(148832),x=()=>n(305390),C=()=>n(89924),h=()=>n(279647),b=()=>n(381379),_=()=>n(280244),w=n(474848);function I(e,t,n){const{useMentionMenuStore:o,open:i,disabled:a=!1}=t??{useMentionMenuStore:!0},s=(0,r().K8)((()=>!a&&(o?S().Ay.state.mentionTypes.page:i)),[i,o,a]),l=(0,r().K8)((()=>o&&S().Ay.state.open&&S().Ay.state.textStore instanceof y().B?S().Ay.state.textStore:void 0),[o]),c=(0,b().r)({query:e,disabled:!s,includeDataSources:!0,blockStore:l}),d=(0,b().r)({query:e,disabled:!s,includeDataSources:!1,blockStore:l});return n.includeDataSources?c:d}function T(e){const{query:t,isFirstSection:n,setTemporaryInputData:s,formulaContextVariableResults:v,disabled:y=!1,shouldIncludeDataSourceMentions:b}=e,T=(0,u().tz)(),V=(0,i().v3)(),k=(0,a().DP)(),{device:D}=V,j=V.currentUser.id,R=D.isSafari||D.isIOS,{results:z,isLoading:P}=I(t,{useMentionMenuStore:!0,disabled:y},{includeDataSources:b}),B=(0,_().DK)({formulaReturnType:"block",query:t,formulaContextVariableResults:v,setTemporaryInputData:s}),E=(0,o.useMemo)((()=>(0,p().oE)(z.map((({store:e,serverEventProperties:n})=>{const o=e.table===c().Vl;return{key:e.id,render:t=>{const n=e.getModel();if(t.focused&&n){const t=n.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,l().P)(),intl:T})??"";s({title:t,icon:(0,w.jsx)(h().UZ,{store:e,theme:k,isSafariOrIOS:R,emojiType:(0,f().FN)(V),currentUserId:j}),allowTabCompletion:!0})}return(0,w.jsx)(x().A,{...t,store:e,showVerifiedPageBadge:!0})},action:i=>{g().createAndCommit({userAction:"MentionMenu.getPageResultsMenuSection",environment:V,canUndo:!0,perform:r=>{var a;m().Ju({environment:V,editorMode:"default",annotations:[o?(0,d().ETy)({collectionId:e.id,spaceId:e.getSpaceId(),parentCvbId:null===(a=e.getParentPointer())||void 0===a?void 0:a.id}):(0,d().ld4)(e.id,e.getSpaceId())],transaction:r,menuListItemAction:i,query:t,serverEventProperties:n,mentionType:o?"collection":"page",resultId:e.id})}})}}})))),[j,V,T,R,t,z,s,k]),U=(0,o.useMemo)((()=>[...B,...E]),[B,E]),O=!(U.length>0)&&!P?A.noPageResults:A.linkToPage,H=(0,o.useMemo)((()=>(0,w.jsxs)(w.Fragment,{children:[T.formatMessage(O),(0,w.jsx)(M,{show:P})]})),[T,P,O]),F=(0,r().K8)((()=>S().Ay.state.mentionTypes.page),[]),K=(0,o.useMemo)((()=>{if(!y&&F&&(P||0!==U.length))return{key:"no page results",render:e=>(0,w.jsx)(C().A,{...e,title:H,desktopTitleStyle:n?{paddingTop:4}:void 0,topBorder:!n}),items:U}}),[U,H,n,y,F,P]);return{pageResultsSection:K,isPageResultsLoading:P}}function M({show:e}){const t=(0,v().A)(e,500,300);return(0,w.jsx)(s().A,{style:{textAlign:"center",visibility:t?"visible":"hidden",display:"inline",marginInlineStart:8}})}const A=(0,u().YK)({noPageResults:{defaultMessage:"No page results",id:"mentionMenu.noPageSearchResults.title"},linkToPage:{defaultMessage:"Link to page",id:"mentionMenu.pagesSection.title2"}})},563884:(e,t,n)=>{n.d(t,{k:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("calendar",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.24902 14.7764H12.6621C14.1455 14.7764 14.918 14.0107 14.918 12.5479V4.22852C14.918 2.76562 14.1455 2 12.6621 2H3.24902C1.77246 2 1 2.75879 1 4.22852V12.5479C1 14.0107 1.77246 14.7764 3.24902 14.7764ZM3.24219 13.416C2.6748 13.416 2.36035 13.1221 2.36035 12.5205V6.23145C2.36035 5.62988 2.6748 5.33594 3.24219 5.33594H12.6689C13.2363 5.33594 13.5508 5.62988 13.5508 6.23145V12.5205C13.5508 13.1221 13.2363 13.416 12.6689 13.416H3.24219ZM6.63965 7.69434H7.04297C7.28906 7.69434 7.37109 7.61914 7.37109 7.37988V6.97656C7.37109 6.73047 7.28906 6.65527 7.04297 6.65527H6.63965C6.39355 6.65527 6.31152 6.73047 6.31152 6.97656V7.37988C6.31152 7.61914 6.39355 7.69434 6.63965 7.69434ZM8.875 7.69434H9.27832C9.51758 7.69434 9.59961 7.61914 9.59961 7.37988V6.97656C9.59961 6.73047 9.51758 6.65527 9.27832 6.65527H8.875C8.62891 6.65527 8.54688 6.73047 8.54688 6.97656V7.37988C8.54688 7.61914 8.62891 7.69434 8.875 7.69434ZM11.1035 7.69434H11.5068C11.7529 7.69434 11.835 7.61914 11.835 7.37988V6.97656C11.835 6.73047 11.7529 6.65527 11.5068 6.65527H11.1035C10.8643 6.65527 10.7822 6.73047 10.7822 6.97656V7.37988C10.7822 7.61914 10.8643 7.69434 11.1035 7.69434ZM4.41113 9.89551H4.80762C5.05371 9.89551 5.13574 9.82031 5.13574 9.57422V9.1709C5.13574 8.93164 5.05371 8.85645 4.80762 8.85645H4.41113C4.16504 8.85645 4.08301 8.93164 4.08301 9.1709V9.57422C4.08301 9.82031 4.16504 9.89551 4.41113 9.89551ZM6.63965 9.89551H7.04297C7.28906 9.89551 7.37109 9.82031 7.37109 9.57422V9.1709C7.37109 8.93164 7.28906 8.85645 7.04297 8.85645H6.63965C6.39355 8.85645 6.31152 8.93164 6.31152 9.1709V9.57422C6.31152 9.82031 6.39355 9.89551 6.63965 9.89551ZM8.875 9.89551H9.27832C9.51758 9.89551 9.59961 9.82031 9.59961 9.57422V9.1709C9.59961 8.93164 9.51758 8.85645 9.27832 8.85645H8.875C8.62891 8.85645 8.54688 8.93164 8.54688 9.1709V9.57422C8.54688 9.82031 8.62891 9.89551 8.875 9.89551ZM11.1035 9.89551H11.5068C11.7529 9.89551 11.835 9.82031 11.835 9.57422V9.1709C11.835 8.93164 11.7529 8.85645 11.5068 8.85645H11.1035C10.8643 8.85645 10.7822 8.93164 10.7822 9.1709V9.57422C10.7822 9.82031 10.8643 9.89551 11.1035 9.89551ZM4.41113 12.0898H4.80762C5.05371 12.0898 5.13574 12.0146 5.13574 11.7754V11.3721C5.13574 11.126 5.05371 11.0508 4.80762 11.0508H4.41113C4.16504 11.0508 4.08301 11.126 4.08301 11.3721V11.7754C4.08301 12.0146 4.16504 12.0898 4.41113 12.0898ZM6.63965 12.0898H7.04297C7.28906 12.0898 7.37109 12.0146 7.37109 11.7754V11.3721C7.37109 11.126 7.28906 11.0508 7.04297 11.0508H6.63965C6.39355 11.0508 6.31152 11.126 6.31152 11.3721V11.7754C6.31152 12.0146 6.39355 12.0898 6.63965 12.0898ZM8.875 12.0898H9.27832C9.51758 12.0898 9.59961 12.0146 9.59961 11.7754V11.3721C9.59961 11.126 9.51758 11.0508 9.27832 11.0508H8.875C8.62891 11.0508 8.54688 11.126 8.54688 11.3721V11.7754C8.54688 12.0146 8.62891 12.0898 8.875 12.0898Z"})})},625194:(e,t,n)=>{n.d(t,{m:()=>a});var o=n(296540),i=()=>n(96330),r=n(474848);const a=o.memo((function(e){const{textValue:t}=e,n=(0,o.useMemo)((()=>(0,i().X1)((0,i().eC)(t))),[t]);return(0,r.jsx)("span",{children:n})}))},739135:(e,t,n)=>{n.d(t,{KD:()=>c,gt:()=>d,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var o=()=>n(541235),i=()=>n(496603);function r(e,t){return a(d(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function s(e,t){if(a(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function l(e,t){const n=d(e,t);if(n&&!a(n))return s(t,n)}function c(e,t){const n=d(e,t);if(n)return function(e,t){const n=o().c$[e];var r;if(a(t))return null===(r=(0,i().HV)(n.steps))||void 0===r?void 0:r.id;const s=n.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?n.steps[s-1].id:void 0}(t,n)}function d(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},766854:(e,t,n)=>{n.d(t,{H:()=>h,Q:()=>C});n(898992),n(672577);var o=()=>n(242422),i=()=>n(929219),r=()=>n(700500),a=()=>n(179034),s=()=>n(201980),l=()=>n(557281),c=()=>n(384944),d=()=>n(381678),u=()=>n(476492),p=()=>n(646736),m=()=>n(406792),g=()=>n(765957),f=()=>n(148832),v=()=>n(622811),S=()=>n(491848),y=()=>n(482871);function x(e,t,n){const i=(0,d()._)(e),r=null==i?void 0:i.id;if(!r||!n)return;if(!o().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const a=t.getSpaceStore();return a&&(0,p().dp)(a,r).isMember()?[{role:"editor",type:"user_permission",user_id:r}]:void 0}function C(e){const{collectionContextStore:t,transaction:n}=e;return(0,S().w)({collectionContextStore:t,transaction:n}),h(e)}function h(e){var t,n,o;const{environment:d,collectionContextStore:p,groupsPointer:S,insertAtIndex:C,shouldCoerce:h,templateStore:b,transaction:_,from:w,tracker:I,inMemoryRecordCache:T,isKeyboard:M,title:A}=e,V=m().default.DO_NOT_USE_markLegacy("collections.add_item_lag");m().default.DO_NOT_USE_measureAfterNextFlushLegacy(V,{environment:d,getData:()=>({...u().kz(p),from:w.createBlock})});const k="collectionTypedView"===p.contextType,D=p.databaseType,j=p.collectionStoresStore.state,R=j.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||j[0],z=null===(t=g().default.state.sidebarSpaceStore)||void 0===t?void 0:t.id,P=g().default.state.currentUserSettingsStore,B=k&&D&&z&&P&&[...P.getAllPreferredCollections(z),...P.getPreferredCollectionsOfType(z,D)]||[];let E;const U=S[0];if("group_header"===w.createBlock&&"location"===U.value.type){const e=U.value.value;if(e){E=j.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else E=function(e,t){for(const n of e){const e=t.find((e=>e.id===n&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(B,j);const O=E??R,H=null==O?void 0:O.getSpaceId(),F=p.collectionViewStore(),K=p.getViewType(),Z=c().Wv({environment:d,type:r().xd.page,inMemoryRecordCache:T,transaction:_,spaceId:H,tracker:I,permissions:x(d,O,H),properties:{title:(0,s().x9d)(A)}});if(!O||!F||!K)return{coercionSucceeded:!0,newStore:Z};const q=null===(n=p.groupsStore.getGroupState(S))||void 0===n?void 0:n.groupUiParentStore;if(!q)return{coercionSucceeded:!0,newStore:Z};const L=f().B.createChildStore(q,{table:a().ev,id:Z.id});b&&i().A.state.online&&l().n5({title:"template",environment:d,store:Z,templateStore:b,isKeyboard:M??!1,isCreateIn:!1,transaction:_,from:w.initCollection??"collection_group_actions"});const W=(0,v().j)({environment:d,store:Z,collectionStore:O,collectionContextStore:p,groupsPointer:S,shouldCoerce:h,transaction:_}),$=(null===(o=p.groupsStore.getGroupState(S))||void 0===o||null===(o=o.reducerResultStore.state)||void 0===o?void 0:o.blockIds)||[],G=void 0!==C?C:$.length;if(p.permissionScopesStore.state.canEditContent||k){const e=[...$.slice(0,G),L.id,...$.slice(G)];(0,y().z)({resultIds:e,collectionViewStore:F,collectionContextStore:p,transaction:_})}return{coercionSucceeded:W,newStore:L}}},977870:(e,t,n)=>{n.d(t,{c:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{wasGetVisibleUsersCalled:!1}}}const i=new o;n(852832).exposeDebugValue("GetVisibleUsersStore",i)},981305:(e,t,n)=>{n.d(t,{B:()=>r});n(16280);var o=n(296540),i=()=>n(472090);function r(e,t,n=0){(0,o.useEffect)((()=>{const o=new(i().E)({throttleMs:n});if(!e.current)throw new Error("ref.current is null");return o.observe(e.current),o.rect.addListener(t),()=>{o.destroy()}}),[t])}}}]);