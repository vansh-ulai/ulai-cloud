"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46080,85873,95737],{5813:(e,t,n)=>{function i(e){return!!e&&e.getZeroRetentionEnabled()}n.d(t,{A:()=>i})},19676:(e,t,n)=>{n.d(t,{i:()=>o,y:()=>a});var i=()=>n(340498),s=()=>n(284371);function o(e){const{theme:t,isInHomeWidget:n,isFeedbackButton:o,isMobile:a}=e;return{button:{display:"flex",alignItems:"center",fontSize:14,padding:6,...o?{height:n?24:28,color:t.text.tertiary,fill:t.icon.tertiary}:n?{height:24,width:24,color:t.text.tertiary,fill:t.icon.tertiary}:{height:a?32:28,width:a?32:28,color:t.icon.secondary,fill:t.icon.secondary},fontWeight:s().Wy.regular,lineHeight:1,borderRadius:6},icon:{width:a?i().Ev.default:i().Ev.sm,height:a?i().Ev.default:i().Ev.sm,fill:t.icon.secondary}}}function a(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.icon.secondary,fontWeight:s().Wy.regular,lineHeight:1,borderRadius:6}}},38679:(e,t,n)=>{n.d(t,{P:()=>s});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"0.37 6.08 19.25 8.5",svg:(0,n(474848).jsx)("path",{fillRule:"evenodd",d:"M14.5 6.081c1.576 0 2.938.968 3.59 2.375H19a.625.625 0 0 1 0 1.25h-.543q.042.307.043.625c0 2.347-1.79 4.25-4 4.25s-4-1.903-4-4.25q.001-.547.124-1.056a1.53 1.53 0 0 0-1.249 0q.123.507.125 1.056c0 2.347-1.79 4.25-4 4.25s-4-1.903-4-4.25q0-.319.043-.625H1a.625.625 0 0 1 0-1.25h.91c.652-1.407 2.014-2.375 3.59-2.375 1.444 0 2.709.814 3.412 2.033a2.78 2.78 0 0 1 2.174 0c.703-1.22 1.97-2.033 3.414-2.033m-9 1.25c-1.448 0-2.75 1.27-2.75 3s1.302 3 2.75 3 2.75-1.27 2.75-3-1.302-3-2.75-3m9 0c-1.448 0-2.75 1.27-2.75 3s1.302 3 2.75 3 2.75-1.27 2.75-3-1.302-3-2.75-3",clipRule:"evenodd"})},s=(0,n(340498).wt)("eyeglasses",i)},51218:(e,t,n)=>{n.d(t,{E:()=>g,b:()=>m});n(296540);var i=()=>n(401497),s=()=>n(203717),o=()=>n(377114),a=()=>n(599813),r=()=>n(558687),c=()=>n(582162),l=()=>n(284371),d=()=>n(460292),u=()=>n(21140),p=n(474848);function g({size:e=40}){const t=(0,i().IS)((t=>({wrapper:{width:e,height:e,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},largeLogo:{width:"80%",height:"80%",position:"absolute",top:"-10%",insetInlineStart:"-5%"},smallLogoWrapper:{width:"60%",height:"60%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:0,insetInlineEnd:0,boxShadow:t.shadowMD,borderRadius:"50%",backgroundColor:t.palette.gray[0]},smallLogo:{width:"70%"}})),[e]);return(0,p.jsxs)("div",{style:t.wrapper,children:[(0,p.jsx)(d().Q,{iconGroup:s().G.sharepoint,variantName:"default",style:t.largeLogo}),(0,p.jsx)("div",{style:t.smallLogoWrapper,children:(0,c().oneDriveIcon)(t.smallLogo)})]})}function m(e){const{connectorType:t,title:n,subtext:c,titleSubtitleGap:m=!1,fullWidthTitle:h=!1}=e,f=s().G[t],v="dark"===(0,i().eP)(),y=(0,i().IS)((e=>({logoSection:{paddingTop:40,paddingInlineEnd:20,paddingBottom:24,paddingInlineStart:20,gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center",alignItems:"center",gap:m?12:0},title:{fontSize:16,paddingInlineStart:20,paddingInlineEnd:20,width:h?"auto":352,fontWeight:l().Wy.medium,lineHeight:"22px",marginBottom:"2px",justifyContent:"center",textWrap:"balance"},subtext:{fontSize:14,fontWeight:l().Wy.regular,color:`${e.text.secondary}`,textAlign:"center",alignItems:"center",justifyContent:"center",paddingInlineStart:20,paddingInlineEnd:20,textWrap:"balance"},wrapper:{paddingBottom:16}})),[m,h]);return(0,p.jsxs)("div",{style:y.wrapper,children:[(0,p.jsxs)(u().Ye,{style:y.logoSection,children:[(0,r().notionIcon)(y.logos),e.disconnectFlow?(0,a().xMarkIcon)(y.arrowLogo):(0,o().arrowLeftRightIcon)(y.arrowLogo),"sharepoint"===t?(0,p.jsx)(g,{}):(0,p.jsx)(d().Q,{iconGroup:f,overrideSize:()=>y.logos.width,variantName:v?"darkMode":"default"})]}),(0,p.jsxs)(u().wt,{style:y.titleWrapper,children:[(0,p.jsx)(u().Ye,{style:y.title,children:n}),c?(0,p.jsx)(u().Ye,{style:y.subtext,children:c}):(0,p.jsx)(p.Fragment,{})]})]})}},72563:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,priceTagFillIcon:()=>s});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.19 15.61 15.61",svg:(0,n(474848).jsx)("path",{d:"M13.166 2.216a2.05 2.05 0 0 1 1.74.58l2.298 2.299c.456.456.671 1.1.58 1.74l-.383 2.68a2.05 2.05 0 0 1-.58 1.16l-6.529 6.53c-.8.8-2.098.8-2.899 0l-4.597-4.598c-.8-.8-.8-2.099 0-2.9L9.324 3.18a2.05 2.05 0 0 1 1.16-.58zm-.828 5.446a1.188 1.188 0 1 0 1.68-1.68 1.188 1.188 0 0 0-1.68 1.68"})},s=(0,n(340498).wt)("priceTagFill",i)},112452:(e,t,n)=>{n.d(t,{_:()=>s});n(296540);var i=n(474848);const s=(0,n(340498).wt)("undo",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M14.542 10.6826C14.542 7.96875 12.71 6.10254 9.59961 6.10254H5.29297L3.70703 6.1709L4.91016 5.15234L6.67383 3.43652C6.80371 3.30664 6.89258 3.14258 6.89258 2.91699C6.89258 2.5 6.59863 2.19238 6.1543 2.19238C5.96973 2.19238 5.76465 2.28125 5.61426 2.4248L1.69043 6.29395C1.5332 6.4375 1.45117 6.64258 1.45117 6.84766C1.45117 7.05273 1.5332 7.25098 1.69043 7.40137L5.61426 11.2705C5.76465 11.4141 5.96973 11.5029 6.1543 11.5029C6.59863 11.5029 6.89258 11.1953 6.89258 10.7715C6.89258 10.5527 6.80371 10.3887 6.67383 10.252L4.91016 8.53613L3.70703 7.52441L5.29297 7.59277H9.64746C11.8486 7.59277 13.0586 8.84375 13.0586 10.6211C13.0586 12.4053 11.8486 13.7109 9.64746 13.7109H8.05469C7.60352 13.7109 7.2959 14.0459 7.2959 14.4629C7.2959 14.873 7.61035 15.208 8.05469 15.208H9.69531C12.751 15.208 14.542 13.4102 14.542 10.6826Z"})})},140181:(e,t,n)=>{n.d(t,{cg:()=>te,Mp:()=>ee,_u:()=>ce});n(16280),n(944114),n(898992),n(354520),n(581454);var i=n(296540),s=()=>n(242422),o=()=>n(484714),a=()=>n(56366),r=()=>n(401497),c=()=>n(252291),l=()=>n(30537),d=()=>n(406094),u=()=>n(631524),p=()=>n(160432),g=()=>n(373009),m=()=>n(340498),h=n(474848);const f={viewBox:"0 0 21 20",fittedViewBox:"-0.01 2.12 20.29 15.76",svg:(0,h.jsx)("path",{d:"m4.004 10.548.76-.76A.875.875 0 1 1 6 11.025l-2.254 2.254a.875.875 0 0 1-1.237 0L.256 11.025a.875.875 0 0 1 1.238-1.237l.76.76V10a7.875 7.875 0 0 1 13.234-5.77.875.875 0 0 1-1.192 1.281A6.125 6.125 0 0 0 4.003 10zm14-1.096.76.76A.875.875 0 1 0 20 8.976l-2.254-2.254a.875.875 0 0 0-1.237 0l-2.254 2.254a.875.875 0 0 0 1.238 1.238l.76-.76V10A6.125 6.125 0 0 1 5.96 14.489a.875.875 0 1 0-1.19 1.282A7.875 7.875 0 0 0 18.004 10z"})},v=(0,m().wt)("arrowCircleLoopFill",f),y={viewBox:"0 0 20 20",fittedViewBox:"1.28 3.52 17.42 12.96",svg:(0,h.jsx)("path",{d:"M10.45 3.525a6.48 6.48 0 0 0-6.384 5.39 3.856 3.856 0 0 0 1.056 7.56H15.2a3.494 3.494 0 0 0 1.725-6.532 6.475 6.475 0 0 0-6.475-6.418m-.075 3.25c.345 0 .625.28.625.625v3.15a.625.625 0 1 1-1.25 0V7.4c0-.345.28-.625.625-.625m0 6.775a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},x=(0,m().wt)("cloudExclamationFill",y);var S=()=>n(765974),b=()=>n(69708),A=()=>n(534177),j=()=>n(284371),_=()=>n(917791),C=()=>n(874480),w=()=>n(631404),k=()=>n(625940),M=()=>n(231297),I=()=>n(987267),T=()=>n(866893),P=()=>n(802790),N=()=>n(417392),D=()=>n(21140),B=()=>n(631611),L=()=>n(229533),O=()=>n(972435),z=()=>n(176983),F=()=>n(152197),W=()=>n(765957),R=()=>n(604018),E=()=>n(174636),U=()=>n(825355),V=()=>n(564884),K=()=>n(726637),q=()=>n(576590),H=()=>n(756315);function Y(){const e=(0,F().r)(),t=(0,o().v3)(),n="chat_menu",i=K().A.isMobile?void 0:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.ctaForGoogleDrive",defaultMessage:"Finish setup"}),onClick:()=>{e&&((0,V().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_google_drive_resume_pending_connection",integration_type:"google-drive",setup_session_id:H().d.state.sessionId,from:n}}}),(0,q().navigateToAIConnectorOnboarding)({connector:"google-drive",analyticsFrom:n,sessionId:H().d.state.sessionId}))}};return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.googleDriveConnectionPendingStatusConfirmation",defaultMessage:"Complete Google Drive Connection"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.googleDriveConnectionPendingStatusConfirmationDescription",defaultMessage:"We need more information before starting your google drive connection"}),actionButton:i})}var G=()=>n(99254);function J(){const e=(0,F().r)(),t=(0,o().v3)(),{isMobile:n}=(0,o().Y0)(),i="chat_menu",s=n?void 0:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.ctaForJira",defaultMessage:"Finish setup"}),onClick:()=>{e&&((0,V().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_jira_resume_pending_connection",integration_type:"jira",setup_session_id:G().y.state.sessionId,from:i}}}),(0,q().navigateToAIConnectorOnboarding)({connector:"jira",analyticsFrom:i,sessionId:G().y.state.sessionId}))}};return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionPendingStatusConfirmation",defaultMessage:"Confirm Jira Connection"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionPendingStatusConfirmationDescription",defaultMessage:"We need more information before starting your jira connection"}),actionButton:s})}function $(e){const[t,n]=(0,i.useState)(!1),s=(0,F().r)(),r=(0,o().v3)(),c=(0,a().O$)(W().AppStoreCurrentUserSettingsStore),l=(0,a().O$)(G().y),{isMobile:d}=(0,o().Y0)(),u=(0,a().O$)(W().AppStoreSidebarSpaceViewStore),p=(0,i.useCallback)((()=>{(0,V().u)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_dismiss",integration_type:"jira",setup_session_id:G().y.state.sessionId,from:"connect_nudge"}}}),c&&u&&(M().createAndCommit({userAction:"jiraAIConnector.onboarding.dismissPersonalAuthPrompt",environment:r,canUndo:!0,perform:e=>{M().applyOperation({store:u,operation:{pointer:u.pointer,path:["settings"],command:"update",args:{...u.getSettings(),dismissed_jira_user_auth_prompt:!0}},transaction:e})}}),G().y.setState({...l,missingUserAuth:!1}))}),[c,u,r,l]),g=(0,a().K8)((()=>{const e=G().y.state.jiraSiteUrl.match(/^https:\/\/([a-zA-Z0-9-]+)\.atlassian\.net/);return e?e[1]:G().y.state.jiraSiteUrl}),[]),m="chat_menu",f=d?void 0:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.ctaForJiraPersonalAuth",defaultMessage:"Log in"}),onClick:async()=>{s&&(n(!0),await C().ol({environment:r,spaceId:s,analyticsProperties:{buttonName:"user_auth_connect",analyticsFrom:m,sessionId:G().y.state.sessionId}}),e.hideNotification("jira_connect_user"),n(!1),(0,V().u)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_jira_user_auth_success",integration_type:"jira",setup_session_id:G().y.state.sessionId,from:m}}}))},disabled:t};return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionStatusActionRequiredForLogin",defaultMessage:"Log in to Jira"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionStatusActionRequiredForLoginDescription",defaultMessage:"Authenticate to get answers from {jiraSiteName}",values:{jiraSiteName:g}}),actionButton:f,onDismiss:p})}function Q(){const e=(0,F().r)(),t=(0,o().v3)(),n="chat_menu",s=K().A.isMobile?void 0:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.ctaForJiraForge",defaultMessage:"Update"}),onClick:()=>{e&&((0,V().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_jira_migrate_to_forge",integration_type:"jira",setup_session_id:G().y.state.sessionId,from:n}}}),(0,q().navigateToAIConnectorOnboarding)({connector:"jira",analyticsFrom:n}))}},r=(0,a().O$)(W().AppStoreSidebarSpaceViewStore),c=(0,i.useCallback)((()=>{r&&M().createAndCommit({userAction:"jiraAIConnector.onboarding.dismissMigrateToForgePrompt",environment:t,canUndo:!0,perform:e=>{M().applyOperation({store:r,operation:{pointer:r.pointer,path:["settings"],command:"update",args:{...r.getSettings(),dismissed_jira_migrate_prompt:!0}},transaction:e})}})}),[t,r]);return(0,h.jsx)(ee,{type:"error",onDismiss:c,title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionMigratePopupTitle",defaultMessage:"Update Jira AI connector"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraConnectionMigratePopupDescription",defaultMessage:"Update to the latest Jira connector by Sep 30, 2025 to continue getting Jira answers in Notion AI"}),actionButton:s})}var Z=()=>n(980933);const X=(0,b().YK)({actionRequiredLabel:{id:"assistantChat.ingestion.actionRequiredButton",defaultMessage:"Action required"},infoLabel:{id:"assistantChat.ingestion.infoButton",defaultMessage:"Info"},syncingLabel:{id:"assistantChat.ingestion.syncingButton",defaultMessage:"Syncing"},mobileNotAvailable:{id:"assistantChat.ingestion.actionMenuNotAvailable",defaultMessage:"Access Notion on desktop to fix this issue."},disconnectingPopupTitle:{id:"assistantChat.ingestion.disconnectingPopupTitle",defaultMessage:"Disconnecting {appName}"},disconnectingPopupCaption:{id:"assistantChat.ingestion.disconnectingPopupCaption",defaultMessage:"Your workspace owner has disconnected {appName}. This can take up to 3 hours."},connectingPopupTitle:{id:"assistantChat.ingestion.connectingPopupTitle",defaultMessage:"Connecting {appName}"}});function ee({type:e,title:t,caption:n,actionButton:s,onDismiss:a}){const{isMobile:l}=(0,o().Y0)(),u=(0,r().IS)((e=>({container:{display:"flex",gap:8,paddingBottom:s||a?4:0},iconContainer:{paddingTop:2},contentContainer:{display:"flex",flexDirection:"column",gap:2},title:{fontSize:l?j().J.UIRegular.mobile:j().J.UIRegular.desktop},caption:{fontSize:l?j().J.UISmall.mobile:j().J.UISmall.desktop,color:e.text.secondary},actionsContainer:{marginTop:6,display:"flex",gap:8}})),[l,s,a]),g={info:x,error:S().exclamationMarkTriangleFillIcon,progress:v,disconnecting:v},m=l?(0,h.jsx)("div",{style:u.caption,children:(0,h.jsx)(b().sA,{...X.mobileNotAvailable})}):(0,h.jsxs)(D().Ye,{gap:8,children:[s?(0,h.jsx)(p().A,{size:"sm",onClick:s.onClick,children:s.label}):void 0,a?(0,h.jsx)(d().A,{size:"sm",onClick:a,children:(0,h.jsx)(b().sA,{id:"aiConnectorNotifications.ingestion.dismissButton",defaultMessage:"Dismiss"})}):void 0]}),[f,y]=(0,i.useMemo)((()=>{switch(e){case"info":return[void 0,"secondary"];case"error":return["red","accentPrimary"];case"progress":case"disconnecting":return["blue","accentPrimary"]}}),[e]);return(0,h.jsxs)(D().Ye,{style:u.container,children:[(0,h.jsx)("div",{style:u.iconContainer,children:(0,h.jsx)(c().I,{icon:g[e],size:"sm",colorPalette:f,colorVariant:y})}),(0,h.jsxs)("div",{style:u.contentContainer,children:[(0,h.jsx)("div",{style:u.title,children:t}),(0,h.jsx)("div",{style:u.caption,children:n}),s||a?(0,h.jsx)("div",{style:u.actionsContainer,children:m}):void 0]})]})}function te(e){const{tooltipEvents:t}=e,n=O().A.getIntl(),c=(0,o().v3)(),{isMobile:d}=(0,o().Y0)(),p=(0,B().jw)().isType("fullPage"),m=(0,z().J)(),f=(0,a().O$)(W().AppStoreSidebarSpaceViewStore),y=(0,a().K8)((()=>(0,R().kB)()),[]),[b,j]=(0,i.useState)([]),_=(0,i.useCallback)((e=>{j((t=>[...t,e]))}),[]),C=(0,a().K8)((()=>L()._1.filter((e=>{return"slack_select_channels"!==e&&("microsoft_teams_select_teams"!==e&&("sharepoint_select_sites"!==e&&("google_drive_connection_pending"!==e&&("slack_re_auth"===e?null==f||null===(t=f.getSettings())||void 0===t?void 0:t.dismissed_slack_personal_auth_prompt:"slack_v2_user_connection"===e?"dismissed_slack_v2_user_connection_prompt":"github_re_auth"===e?null==f||null===(n=f.getSettings())||void 0===n?void 0:n.dismissed_github_personal_auth_prompt:"jira_connection_pending"===e?null==f||null===(i=f.getSettings())||void 0===i?void 0:i.dismissed_jira_installation_pending_prompt:"jira_connect_user"===e?null==f||null===(s=f.getSettings())||void 0===s?void 0:s.dismissed_jira_user_auth_prompt:"jira_select_projects"===e?null==f||null===(o=f.getSettings())||void 0===o?void 0:o.dismissed_jira_select_projects_prompt:"jira_migrate"===e?null==f||null===(a=f.getSettings())||void 0===a?void 0:a.dismissed_jira_migrate_prompt:"slack_migrate"!==e&&("linear_re_auth"===e?null==f||null===(r=f.getSettings())||void 0===r?void 0:r[U().$Y.linear]:"discord_re_auth"===e?null==f||null===(c=f.getSettings())||void 0===c?void 0:c[U().$Y.discord]:"salesforce_re_auth"===e?null==f||null===(l=f.getSettings())||void 0===l?void 0:l[U().$Y.salesforce]:"asana_re_auth"===e?null==f||null===(d=f.getSettings())||void 0===d?void 0:d[U().$Y.asana]:void(0,A().HB)(e))))));var t,n,i,s,o,a,r,c,l,d}))),[f]),w=(0,a().K8)((()=>s().default.getConfigKey("ai_connector_user_notifications","notifications").map((e=>({type:"readonly_notification",message:e})))),[]),k=(0,a().K8)((()=>{const e=[];for(const t of y){const n=(0,L().uD)(t,m);for(const i of n)b.includes(i.type)||C.includes(i.type)||e.push({connector:t,type:"action_required",action:i})}return e}),[y,m,b,C]),M=(0,a().K8)((()=>{const e=[];for(const t of y){const n=(0,L().LT)(t);n.isInProgress&&e.push({connector:t,type:"in_progress",ingestionProgress:n.ingestionProgress})}return e}),[y]),I=(0,a().K8)((()=>{const e=[];for(const t of y){(0,L().$t)(t)&&e.push({connector:t,type:"disconnecting"})}return e}),[y]),T=k.length>0,D=w.length>0,F=(0,i.useMemo)((()=>[...w,...k,...M,...I]),[w,k,M,I]),[E,V]=(0,i.useState)(!1);(0,i.useEffect)((()=>{setTimeout((()=>{d||V(T)}),1e3)}),[d,T]);const K=(0,i.useCallback)((()=>{V(!1)}),[]),q=(0,i.useCallback)(((e,t)=>e?S().exclamationMarkTriangleFillIcon:t?x:v),[]),H=(0,r().IS)((e=>({popupStyle:{minWidth:250},popupContainer:{display:"flex",flexDirection:"column",gap:2,paddingInlineStart:12,paddingTop:8,paddingInlineEnd:10,paddingBottom:8,maxWidth:d?void 0:250,maxHeight:400,overflowY:"scroll"}})),[d]);return 0===F.length?null:(0,h.jsx)(N().Ay,{popupType:c.device.isMobile?l().n.BottomSheet:l().n.Popup,originGap:6,alignmentToOrigin:"center",open:E,onDismiss:()=>{V(!1)},placementToOrigin:p?"bottom":"top",borderRadius:6,trapFocus:!1,render:()=>(0,h.jsx)("div",{style:H.popupContainer,children:F.map(((e,t)=>(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(ne,{notification:e,hideNotification:_,minimizePopup:K}),t!==F.length-1?(0,h.jsx)(P().A,{size:14,isHidden:!1}):void 0]},t)))}),origin:p?(0,h.jsx)(g().E,{size:"xxs",...t,iconLeading:q(T,D),colorPalette:T?"red":D?void 0:"blue",onClick:()=>{V(!0)},children:T?O().A.formatMessage(X.actionRequiredLabel):D?O().A.formatMessage(X.infoLabel):O().A.formatMessage(X.syncingLabel)}):(0,h.jsx)(u().p,{...t,size:"sm",iconLeading:q(T,D),colorPalette:T?"red":D?"gray":"blue",colorVariant:T?void 0:D?"tertiary":void 0,ariaLabel:n.formatMessage({id:"assistantChat.ingestion.viewConnectionStatusAriaLabel",defaultMessage:"View connection status"}),onClick:()=>{V(!0)}}),style:H.popupStyle})}function ne(e){const{notification:t,hideNotification:n,minimizePopup:i}=e,s=(0,z().J)();if("action_required"===t.type){if("slack_select_channels"===t.action.type)return(0,h.jsx)(re,{});if("microsoft_teams_select_teams"===t.action.type)return(0,h.jsx)(Z().n,{});if("sharepoint_select_sites"===t.action.type)return(0,h.jsx)(ce,{canAdmin:s});if("slack_re_auth"===t.action.type)return(0,h.jsx)(de,{hideNotification:n});if("slack_v2_user_connection"===t.action.type)return(0,h.jsx)(le,{hideNotification:n});if("github_re_auth"===t.action.type||"linear_re_auth"===t.action.type||"discord_re_auth"===t.action.type||"salesforce_re_auth"===t.action.type||"asana_re_auth"===t.action.type){if("github"===t.connector||"linear"===t.connector||"discord"===t.connector||"salesforce"===t.connector||"asana"===t.connector)return(0,h.jsx)(U().cy,{connector:t.connector,minimizePopup:i,hideNotification:n,showDismiss:!0,shouldDismiss:!0});throw new Error(`Unsupported connector: ${t.connector}`)}if("jira_connection_pending"===t.action.type)return(0,h.jsx)(J,{});if("google_drive_connection_pending"===t.action.type)return(0,h.jsx)(Y,{});if("jira_connect_user"===t.action.type)return(0,h.jsx)($,{hideNotification:n});if("jira_select_projects"===t.action.type)return(0,h.jsx)(ae,{});if("jira_migrate"===t.action.type)return(0,h.jsx)(Q,{});if("slack_migrate"===t.action.type)return null;(0,A().HB)(t.action)}else{if("in_progress"===t.type){const{connector:e,ingestionProgress:n}=t;return(0,h.jsx)(se,{connection:e,ingestionProgress:n,time:(0,T().iu)(e)})}if("disconnecting"===t.type){const{connector:e}=t;return(0,h.jsx)(oe,{connection:e})}if("readonly_notification"===t.type)return(0,h.jsx)(ie,{message:t.message});(0,A().HB)(t)}}function ie(e){const{message:t}=e;return(0,h.jsx)(ee,{type:"info",title:t.title,caption:t.caption})}function se(e){const{connection:t,time:n,ingestionProgress:i}=e,s=I().w0[t],o=i?(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.textWithProgress",defaultMessage:"This can take up to 36h{br}{ingestionProgress}% done",values:{ingestionProgress:i,br:(0,h.jsx)("br",{})}}):(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.textWithoutProgress",defaultMessage:"This can take up to {time}h",values:{time:n||36}});return(0,h.jsx)(ee,{type:"progress",title:(0,h.jsx)(b().sA,{...X.connectingPopupTitle,values:{appName:s}}),caption:o})}function oe(e){const{connection:t}=e,n=I().w0[t];return(0,h.jsx)(ee,{type:"disconnecting",title:(0,h.jsx)(b().sA,{...X.disconnectingPopupTitle,values:{appName:n}}),caption:(0,h.jsx)(b().sA,{...X.disconnectingPopupCaption,values:{appName:n}})})}function ae(){const e=(0,a().O$)(W().AppStoreSidebarSpaceViewStore),t=(0,o().v3)(),n=(0,i.useCallback)((()=>{e&&M().createAndCommit({userAction:"jiraAIConnector.onboarding.dismissSelectProjectsPrompt",environment:t,canUndo:!0,perform:t=>{M().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),dismissed_jira_select_projects_prompt:!0}},transaction:t})}})}),[e,t]);return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraSelectProjectsPopupTitle",defaultMessage:"Select Jira projects"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraSelectProjectsPopupCaption",defaultMessage:"Select projects to connect to Jira AI connector"}),actionButton:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.jiraSelectProjectsActionRequiredButton",defaultMessage:"Select projects"}),onClick:()=>{C().G({analyticsFrom:"chat_menu",screenToShow:"connection_complete_screen"})}},onDismiss:n})}function re(){return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.connectionStatusActionRequired",defaultMessage:"No Slack channels selected"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.connectionStatusActionRequiredCaption",defaultMessage:"Click to confirm channels or disconnect"}),actionButton:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.slackActionRequiredButton",defaultMessage:"Finish setup"}),onClick:()=>{k().nh()}}})}function ce(e){const{canAdmin:t}=e;return(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.sharepointConnectionStatusActionRequired",defaultMessage:"No SharePoint sites selected"}),caption:t?(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.sharepointConnectionStatusActionRequiredCaption",defaultMessage:"Click to select sites"}):(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.sharepointConnectionStatusActionRequiredCaptionNonAdmin",defaultMessage:"Your workspace owner needs to select sites"}),actionButton:t?{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.sharepointActionRequiredButton",defaultMessage:"Select sites"}),onClick:()=>{w().o()}}:void 0})}function le(e){const{hideNotification:t}=e,n=(0,o().v3)(),i=(0,F().r)();return(0,a().O$)(W().AppStoreSidebarSpaceViewStore)&&i?(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.userConnectionStatusActionRequired",defaultMessage:"Connect to Slack"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.userConnectionStatusActionRequiredCaption",defaultMessage:"Please connect your Slack account to continue using Notion AI"}),actionButton:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.userConnectionStatusActionRequiredButton",defaultMessage:"Connect"}),onClick:()=>{t("slack_v2_user_connection"),k().JR({environment:n,spaceId:i})}}}):null}function de(e){const{hideNotification:t}=e,n=(0,o().v3)(),i=(0,F().r)(),s=(0,a().O$)(W().AppStoreSidebarSpaceViewStore);return s&&i?(0,h.jsx)(ee,{type:"error",title:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.connectionStatusActionRequiredForLoginStatusMenu",defaultMessage:"Log in to Slack"}),caption:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.connectionStatusActionRequiredCaptionForLogin",defaultMessage:"We couldn’t verify your slack e-mail. Authenticate to proceed."}),actionButton:{label:(0,h.jsx)(b().sA,{id:"assistantChat.ingestion.slackActionRequiredButtonForLogin",defaultMessage:"Log in"}),onClick:()=>{t("slack_re_auth"),(0,_().t)({connector:"slack",environment:n,spaceId:i,analyticsProperties:{buttonName:"connect_slack_user_mapping"}})}},onDismiss:()=>{k().R2({environment:n,sidebarSpaceViewStore:s,analyticsProperties:{analyticsFrom:E().R.state.analyticsFrom,buttonName:"dismiss_connect_slack_user_mapping",sessionId:E().R.state.sessionId}})}}):null}},190106:(e,t,n)=>{n.d(t,{A:()=>v});var i=n(296540),s=()=>n(787470),o=()=>n(484714),a=()=>n(401497),r=()=>n(199734),c=()=>n(69708),l=()=>n(284371),d=()=>n(701763),u=()=>n(888643),p=()=>n(145214),g=()=>n(285790),m=()=>n(297872),h=()=>n(623580),f=n(474848);function v({handleSearchQueryChange:e,handleEnterPressed:t,handleInputCleared:n,currentTab:v,isSearchBarAlwaysOpen:y}){const x=(0,o().v3)(),{styles:S,isSearchOpen:b,intl:A,handleSearchButtonClick:j,handleSearchDismiss:_,searchQuery:C,setSearchQuery:w}=function({handleSearchQueryChange:e,handleInputCleared:t,currentTab:n,isSearchBarAlwaysOpen:s}){const r=(0,a().IS)((e=>({searchIcon:{width:14,height:void 0,fill:e.text.secondary},topbarIconButton:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.icon.secondary,fontWeight:l().Wy.regular,lineHeight:1,borderRadius:4},searchInput:{fontSize:14,lineHeight:1,paddingInlineEnd:4,color:e.text.primary,marginBottom:1}})),[]),u=(0,o().v3)(),[p,g]=(0,i.useState)(!1),[m,h]=(0,i.useState)(void 0),f=(0,i.useCallback)((()=>{g(!0),n&&d().Z9(u,{current_tab:n})}),[u,n]),v=(0,i.useCallback)((()=>{g(!1),h(void 0),e(void 0),null==t||t()}),[e,t]),y=(0,c().tz)();return{styles:r,isSearchOpen:p||s,intl:y,handleSearchButtonClick:f,handleSearchDismiss:v,searchQuery:m,setSearchQuery:h}}({handleSearchQueryChange:e,handleInputCleared:n,currentTab:v,isSearchBarAlwaysOpen:y});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g().A,{ariaLabel:A.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),icon:r().U,iconStyle:S.searchIcon,style:S.topbarIconButton,onClick:j,disableBackground:y}),(0,f.jsx)(p().A,{visible:b,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},skip:y,children:(0,f.jsx)(m().A,{capture:b,allowEsc:!0,render:n=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},...n,children:(0,f.jsx)(h().A,{style:S.searchInput,format:h().C.Transparent,value:C,onChange:t=>{const n=t.target.value;w(n),e(n)},placeholder:A.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),focusInitial:b,showClearButton:!0,onCancel:_,onClick:u().k,onClearButtonClick:_,onKeyDown:e=>{27===e.keyCode&&_(),t&&(0,s().A)(x,e,"enter")&&t()},onBlur:()=>{!C&&_()}})})})})]})}},191197:(e,t,n)=>{n.d(t,{i:()=>s,z:()=>o});var i=()=>n(314529);function s(e,t){const{from:n}=t;(0,i().DO_NOT_USE_trackLegacy)(e,"show_tooltip",{from:n,time:Date.now()})}function o(e,t){const{from:n}=t;(0,i().DO_NOT_USE_trackLegacy)(e,"dismiss_tooltip",{from:n,time:Date.now()})}},216128:(e,t,n)=>{n.d(t,{R:()=>o});n(296540);var i=n(474848);const s={viewBox:"0 0 16 16",fittedViewBox:"3.41 3.05 9.98 9.9",directional:!0,svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M4.482 3.238a.625.625 0 1 0-.884.884L7.476 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"}),(0,i.jsx)("path",{d:"M8.882 3.238a.625.625 0 0 0-.884.884L11.876 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})]})},o=(0,n(340498).wt)("arrowChevronDoubleForwardSmall",s)},264154:(e,t,n)=>{n.d(t,{l:()=>i});const i=(0,n(340498).xh)("arrowChevronSingleDown",{default:{loader:()=>n.e(95737).then(n.bind(n,803960))},small:{loader:()=>n.e(95737).then(n.bind(n,324254))},fill:{loader:()=>n.e(95737).then(n.bind(n,626466))},fillSmall:{loader:()=>n.e(95737).then(n.bind(n,854705))}},["chevron","down","arrow","direction","downward"])},303470:(e,t,n)=>{n.d(t,{w:()=>k});var i=n(296540),s=()=>n(401497),o=()=>n(699143),a=()=>n(631524),r=()=>n(493552),c=()=>n(69708),l=()=>n(981305),d=(n(581454),()=>n(484714)),u=()=>n(56366),p=()=>n(252291),g=()=>n(132855),m=()=>n(187820),h=()=>n(625247),f=()=>n(665381),v=()=>n(765957),y=()=>n(559273),x=n(474848);function S({position:e,iconSource:t}){const n=(0,c().tz)(),i=(0,s().IS)((n=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:38,height:38,padding:8,borderRadius:"100%",background:n.background.elevated,boxShadow:n.shadowXS,position:"absolute",...e},..."src"in t?{image:{borderRadius:t.isSquare?0:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,width:t.width??22,height:t.height??22},placeholder:{display:"flex",justifyContent:"center",alignItems:"center"}}:{}})),[e,t]);return(0,x.jsx)("div",{style:i.iconContainer,children:"icon"in t?(0,x.jsx)(p().I,{icon:t.icon,size:"lg",colorVariant:"tertiary"}):(0,x.jsx)(y().A,{src:t.src,alt:t.alt??n.formatMessage({id:"upgrade.feature_icon",defaultMessage:"Feature icon"}),style:i.image,placeholderLoadedStyle:i.placeholder})})}function b({size:e}){const t=(0,s().IS)((e=>({ring:{stroke:e.border.primary}})),[]);return(0,x.jsx)("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",overflow:"visible"},children:(0,x.jsx)("rect",{width:e,height:e,rx:e/2,stroke:t.ring.stroke,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.1 9"})})}const A=304,j=185,_={fourIcons:{outer:[{top:148.5,insetInlineStart:-19},{top:118,insetInlineEnd:-19}],inner:[{top:34,insetInlineStart:-9},{top:112,insetInlineEnd:-8}]},sixIcons:{outer:[{top:148.5,insetInlineStart:-19},{top:118,insetInlineEnd:-19}],inner:[{top:34,insetInlineStart:-9},{top:146,insetInlineStart:24},{top:1,insetInlineEnd:15},{top:111,insetInlineEnd:-8}]}};function C({icons:e}){const t=(0,d().v3)(),{spaceIcon:n,spaceName:i}=(0,u().K8)((()=>{const{sidebarSpaceStore:e}=v().default.state;return e?{spaceIcon:(0,h().c)(t,e),spaceName:(0,f().G)(t,e)}:{}}),[t]),o=(0,s().IS)((e=>{const t={display:"flex",justifyContent:"center",alignItems:"center"};return{illustrationContainer:{...t,flex:"1 0 0",alignSelf:"stretch"},outerRing:{...t,flexShrink:0,position:"absolute",width:A,height:A},innerRing:{...t,flexShrink:0,position:"relative",width:j,height:j},spaceIconContainer:{...t,position:"relative"},upArrowIcon:{position:"absolute",bottom:-7,insetInlineEnd:-8,width:32,height:32,borderRadius:"100%",background:e.background.secondary,display:"flex",justifyContent:"center",alignItems:"center"},spaceIcon:{borderRadius:12,boxShadow:e.shadowXS,background:e.gray.background.tertiaryTranslucent}}}),[]),a=4===e.length?_.fourIcons:_.sixIcons;return(0,x.jsx)("div",{style:o.illustrationContainer,children:(0,x.jsxs)("div",{style:o.outerRing,children:[(0,x.jsx)(b,{size:A}),(0,x.jsx)(S,{position:a.outer[0],iconSource:e[0]}),(0,x.jsx)(S,{position:a.outer[1],iconSource:e[e.length-1]}),(0,x.jsxs)("div",{style:o.innerRing,children:[(0,x.jsx)(b,{size:j}),e.slice(1,-1).map(((e,t)=>(0,x.jsx)(S,{position:a.inner[t],iconSource:e},t))),(0,x.jsxs)("div",{style:o.spaceIconContainer,children:[(0,x.jsx)(m().B6,{disabled:!0,icon:n,iconRecordCategory:"workspace",isEmptyPage:!1,title:i,size:64,isLarge:!0,iconBoxStyles:o.spaceIcon}),(0,x.jsx)("div",{style:o.upArrowIcon,children:(0,x.jsx)(p().I,{icon:g().arrowInCircleUpFillIcon,colorPalette:"blue",colorVariant:"accentPrimary",size:"xl"})})]})]})]})})}var w=()=>n(204330);function k(e){const{title:t,description:n,onClickLearnMore:a,source:r,rightSideVisibleMinWidth:c=600,...d}=e,u=(0,s().IS)((t=>({container:{borderRadius:10,border:`1px solid ${t.border.secondary}`,background:`linear-gradient(90deg, ${t.background.primary} 0%, ${t.background.secondary} 100%)`,...e.icons||e.children&&e.hideOverflow?{position:"relative",overflow:"hidden"}:{}}})),[e.icons,e.children,e.hideOverflow]),p=(0,i.useRef)(null),[g,m]=(0,i.useState)(!0);(0,l().B)(p,(e=>{const{width:t}=e.getState();m(t>c)}));const h=e.children||(0,x.jsx)(C,{icons:e.icons});return(0,x.jsxs)(o().Y1,{direction:"horizontal",align:"center",padding:24,gap:12,width:"fill",style:u.container,ref:p,children:[(0,x.jsx)(M,{title:t,description:n,onClickLearnMore:a,source:r,...d}),g?h:void 0]})}function M({title:e,description:t,onClickLearnMore:n,source:i,...s}){return(0,x.jsxs)(o().Y1,{direction:"vertical",align:"center-left",gap:20,children:[(0,x.jsxs)(o().Y1,{direction:"vertical",align:"center-left",gap:4,children:[(0,x.jsx)(r().D,{styleKey:"Body/Medium",colorVariant:"primary",children:e}),(0,x.jsx)("span",{style:{textWrap:"pretty"},children:(0,x.jsx)(r().D,{styleKey:"Body/Regular",colorVariant:"secondary",children:t})})]}),(0,x.jsxs)(o().Y1,{direction:"horizontal",width:"hug",gap:4,align:"center-left",children:[(0,x.jsx)(w().R,{display:"primary",source:i,...s}),n?(0,x.jsx)(a().p,{size:"lg",colorPalette:"blue",onClick:n,children:(0,x.jsx)(c().sA,{id:"upgrade.button.learnMore",defaultMessage:"Learn more"})}):null]})]})}},333461:(e,t,n)=>{n.d(t,{F:()=>s});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{fillRule:"evenodd",d:"M17.4685918,3.4486694c-.276062-.4232178-.7411499-.6759033-1.2441406-.6759033-.1889648,0-.3743896.0357056-.5512085.1061401L3.0777837,7.8930664c-.40271.1603394-.6936035.5178223-.7687378.9447021s.0762329.8622437.4000244,1.1503906l2.4732056,2.2012329v4.2337646c0,.6617432.793457,1.0004272,1.2713013.5426636l1.9723511-1.8895264,2.0613403,1.8346558c.2311401.2056885.52771.3162842.8310547.3162842.088501,0,.1775513-.0094604.2657471-.0286255.390625-.0849609.71698-.3516235.8781738-.7174683l5.1207275-11.6225586c.2032471-.4614868.1604614-.9884644-.1143799-1.4099121ZM16.4390508,4.3546143l-5.1207275,11.6225586-3.963623-3.52771,5.2460327-5.0794067c.064209-.065918.0716553-.168457.0177002-.243042-.0568237-.0785522-.1638184-.1014404-.2478638-.0530396l-6.562439,3.9990234-2.2680054-2.0185547,12.5956421-5.0142822c.0299683-.0119019.0598755-.017395.0886841-.017395.15979,0,.2867432.1680908.2145996.3318481Z",clipRule:"evenodd"})},s=(0,n(340498).wt)("mail",i)},354987:(e,t,n)=>{n.d(t,{A:()=>I});n(898992),n(354520),n(581454);var i=n(296540),s=()=>n(484714),o=()=>n(56366),a=()=>n(401497),r=()=>n(252291),c=()=>n(898244),l=()=>n(713998),d=()=>n(416504),u=()=>n(187174),p=()=>n(216128),g=()=>n(906380),m=()=>n(450648),h=()=>n(179034),f=()=>n(201980),v=()=>n(69708),y=()=>n(534177),x=()=>n(284371),S=()=>n(645873);const b={diffHelpers:new(S().O2)("async-diffs",(async()=>await Promise.all([n.e(16471),n.e(79254)]).then(n.bind(n,501770))))};var A=()=>n(907514),j=()=>n(346923),_=()=>n(148832),C=()=>n(859428),w=()=>n(890022),k=n(474848);const M=(0,v().YK)({intermediateChanges:{id:"editPropertyDiff.intermediateChanges",defaultMessage:"{count, plural, one {# change} other {# changes}}"}});function I(e){const t=c().QP(e.propertySchema);switch(t){case"text":return(0,k.jsx)(T,{...e});case"relation":return(0,k.jsx)(D,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"arrow":return(0,k.jsx)(B,{...e});default:(0,y().HB)(t)}}function T(e){const t=(0,s().v3)(),n=(0,j().l)(N(e.beforeValue.value)),i=(0,j().l)(N(e.afterValue.value)),o=(0,S().fJ)(b.diffHelpers).value,[a]=(0,u().Yb)((async()=>{if(o)return await o.diffTextValueAsync({environment:t,from:"textPropertyDiff",before:n,after:i,insertionAnnotation:[f().Ifu.Inserted],deletionAnnotation:[f().Ifu.Deleted]})}),[t,n,i,o],{});if(void 0===a.value)return(0,k.jsx)(P,{});const r={value:a.value,spaceId:e.beforeValue.spaceId};return(0,k.jsx)(w().A,{value:r,propertySchema:e.propertySchema,rootStore:e.rootStore})}const P=i.memo((function(){return(0,k.jsx)(n(710149).A,{style:{display:"inline-block",verticalAlign:"baseline",width:"60%",height:14,borderRadius:4}})}));function N(e){return f().JG8(e,1e3,[f().Ey_("…")])}function D(e){const{beforeValue:t,afterValue:n,propertySchema:i,rootStore:s}=e,a=(0,o().K8)((()=>l().tH({beforeValue:t.value,afterValue:n.value,propertySchema:i,getRecordModel:s.getRecordModel,getBlockTitle:e=>_().B.createChildStore(s,{table:h().ev,id:e.id}).getPropertyValue("title")})),[t,n,i,s]);return(0,k.jsx)(w().A,{value:{value:a,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:s})}function B(e){const t=(0,a().IS)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center",overflow:"hidden",flexWrap:"wrap",rowGap:6}})),[]),n=e.intermediateChanges&&e.intermediateChanges.length>0;return(0,k.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,k.jsx)(w().A,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),n?(0,k.jsx)(O,{intermediateChanges:e.intermediateChanges,propertySchema:e.propertySchema,rootStore:e.rootStore,latestTimestamp:e.latestIntermediateTimestamp}):(0,k.jsx)(L,{}),(0,k.jsx)(w().A,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function L(){const e=(0,a().IS)((e=>({container:{padding:"0px 6px"}})),[]);return(0,k.jsx)("div",{style:e.container,children:(0,k.jsx)(r().I,{icon:g().arrowChevronSingleRightSmallIcon,size:"xs",colorVariant:"tertiary"})})}function O(e){const t=(0,v().tz)(),n=(0,a().IS)((e=>({container:{padding:"4px 8px"},tooltipContent:{display:"flex",flexDirection:"column",alignItems:"flex-start"},tooltipTitle:{fontWeight:500,maxWidth:264,...x().RC},tooltipBody:{color:e.text.secondary,display:"flex",flexDirection:"row"},tooltipSeperatorDot:{margin:"0px 4px"}})),[]),i=e=>{if(e)return(0,A().nl)(e,{useCompactFormat:!0})},s=(0,o().K8)((()=>{const n=(0,d().P)();return e.intermediateChanges.map((i=>{const s=(0,m().r4)({textValue:i.value.value,getRecordModel:e.rootStore.getRecordModel,userTimeZone:n,intl:t,disableAnnotationPrefix:!0,deterministic:!0});return"date"===e.propertySchema.type?s:s.replace(/,/g," / ")})).filter(Boolean).join(", ")||""}),[e.intermediateChanges,e.rootStore.getRecordModel,e.propertySchema.type,t]);return(0,k.jsx)(C().A,{placement:"top",renderTooltip:t=>(0,k.jsxs)("div",{...t,style:n.tooltipContent,children:[(0,k.jsx)("div",{style:n.tooltipTitle,children:s}),(0,k.jsxs)("div",{style:n.tooltipBody,children:[(0,k.jsx)(v().sA,{...M.intermediateChanges,values:{count:e.intermediateChanges.length}}),(0,k.jsx)("div",{style:n.tooltipSeperatorDot,children:"•"}),i(e.latestTimestamp)]})]}),render:e=>(0,k.jsx)("div",{...e,style:n.container,children:(0,k.jsx)(r().I,{icon:p().R,size:"xs",colorVariant:"tertiary"})})})}},385527:(e,t,n)=>{n.d(t,{h:()=>s});n(296540);var i=n(474848);const s=(0,n(340498).wt)("personCircle",{viewBox:"0 0 18 17",svg:(0,i.jsx)("path",{d:"M8.99219 16.6797C10.0964 16.6797 11.1354 16.4688 12.1094 16.0469C13.0833 15.6302 13.9427 15.0495 14.6875 14.3047C15.4323 13.5599 16.0156 12.7005 16.4375 11.7266C16.8594 10.7526 17.0703 9.71354 17.0703 8.60938C17.0703 7.50521 16.8594 6.46615 16.4375 5.49219C16.0156 4.51823 15.4323 3.66146 14.6875 2.92188C13.9427 2.17708 13.0833 1.59375 12.1094 1.17188C11.1354 0.75 10.0938 0.539062 8.98438 0.539062C7.88021 0.539062 6.84115 0.75 5.86719 1.17188C4.89844 1.59375 4.04167 2.17708 3.29688 2.92188C2.55729 3.66146 1.97656 4.51823 1.55469 5.49219C1.13281 6.46615 0.921875 7.50521 0.921875 8.60938C0.921875 9.71354 1.13281 10.7526 1.55469 11.7266C1.97656 12.7005 2.55729 13.5599 3.29688 14.3047C4.04167 15.0495 4.90104 15.6302 5.875 16.0469C6.84896 16.4688 7.88802 16.6797 8.99219 16.6797ZM8.99219 15.0859C8.09635 15.0859 7.25521 14.9193 6.46875 14.5859C5.6875 14.2526 5 13.7891 4.40625 13.1953C3.81771 12.6016 3.35677 11.9141 3.02344 11.1328C2.6901 10.3516 2.52344 9.51042 2.52344 8.60938C2.52344 7.71354 2.6901 6.875 3.02344 6.09375C3.35677 5.30729 3.81771 4.61719 4.40625 4.02344C4.99479 3.42969 5.67969 2.96615 6.46094 2.63281C7.2474 2.29948 8.08854 2.13281 8.98438 2.13281C9.88542 2.13281 10.7266 2.29948 11.5078 2.63281C12.2943 2.96615 12.9844 3.42969 13.5781 4.02344C14.1719 4.61719 14.6354 5.30729 14.9688 6.09375C15.3021 6.875 15.4688 7.71354 15.4688 8.60938C15.4688 9.51042 15.3021 10.3516 14.9688 11.1328C14.6354 11.9141 14.1719 12.6016 13.5781 13.1953C12.9844 13.7891 12.2969 14.2526 11.5156 14.5859C10.7344 14.9193 9.89323 15.0859 8.99219 15.0859ZM14.2031 13.7656L14.1719 13.6328C14.0052 13.2474 13.6849 12.8776 13.2109 12.5234C12.7422 12.1641 12.1484 11.8724 11.4297 11.6484C10.7161 11.4193 9.90365 11.3047 8.99219 11.3047C8.09115 11.3047 7.28125 11.4193 6.5625 11.6484C5.84375 11.8724 5.2474 12.1641 4.77344 12.5234C4.30469 12.8776 3.98698 13.2448 3.82031 13.625L3.78906 13.7656C4.27865 14.2188 4.83333 14.599 5.45312 14.9062C6.07292 15.2188 6.69271 15.4557 7.3125 15.6172C7.9375 15.7786 8.4974 15.8594 8.99219 15.8594C9.49219 15.8594 10.0521 15.7786 10.6719 15.6172C11.2917 15.4557 11.9115 15.2188 12.5312 14.9062C13.151 14.599 13.7083 14.2188 14.2031 13.7656ZM8.99219 10.0156C9.4974 10.0208 9.95312 9.89583 10.3594 9.64062C10.7656 9.38021 11.0885 9.02604 11.3281 8.57812C11.5677 8.125 11.6875 7.61979 11.6875 7.0625C11.6875 6.54167 11.5651 6.0625 11.3203 5.625C11.0807 5.18229 10.7578 4.82812 10.3516 4.5625C9.95052 4.29688 9.4974 4.16406 8.99219 4.16406C8.49219 4.16406 8.03646 4.29688 7.625 4.5625C7.21875 4.82812 6.89583 5.18229 6.65625 5.625C6.41667 6.0625 6.29948 6.54167 6.30469 7.0625C6.3099 7.61979 6.42969 8.1224 6.66406 8.57031C6.90365 9.01302 7.22656 9.36458 7.63281 9.625C8.03906 9.88021 8.49219 10.0104 8.99219 10.0156Z"})})},495427:(e,t,n)=>{n.d(t,{Jj:()=>m,Ke:()=>g,nv:()=>h});var i=n(296540),s=()=>n(401497),o=()=>n(160432),a=()=>n(199734),r=()=>n(69708),c=()=>n(496603),l=()=>n(972435),d=()=>n(623580),u=()=>n(190106),p=n(474848);let g=function(e){return e.OnChange="on-change",e.Button="button",e.AnimatedSearchButton="animated-search-button",e}({});const m=(0,r().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"},titleOnlyPlaceholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function h({mode:e,query:t,setQueryFilter:n,placeholderText:h,disabled:f}){const[v,y]=(0,i.useState)(t??""),x=function(e){return(0,s().IS)((t=>({searchIcon:{color:t.icon.tertiary,width:14},input:{paddingTop:4,paddingInlineEnd:4,paddingBottom:4,paddingInlineStart:10,margin:"0 auto 8px",width:"100%",background:t.background.elevated,opacity:e?.5:1},button:{opacity:e?.5:1},searchInputContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"}})),[e])}(f),S=(0,i.useMemo)((()=>(0,c().sg)(n,500)),[n]),b=(0,i.useCallback)((t=>{void 0===t&&e===g.AnimatedSearchButton||(y(t??""),e!==g.OnChange&&e!==g.AnimatedSearchButton||S(t??""))}),[S,e]),A=(0,i.useCallback)((e=>{b(e.target.value)}),[b]);return e===g.AnimatedSearchButton?(0,p.jsx)("div",{style:x.searchInputContainer,children:(0,p.jsx)(u().A,{handleSearchQueryChange:b,handleEnterPressed:()=>n(v),handleInputCleared:()=>n(""),isSearchBarAlwaysOpen:!1})}):(0,p.jsx)(d().A,{value:v,style:x.input,left:(0,a().U)(x.searchIcon),placeholder:h||l().A.formatMessage(m.placeholder),focus:!f&&void 0,onChange:A,onSubmit:()=>n(v),disabled:f,right:e===g.Button?(0,p.jsx)(o().A,{colorPalette:"blue",onClick:()=>n(v),disabled:f,style:x.button,children:(0,p.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},553719:(e,t,n)=>{n.r(t),n.d(t,{SlackConnectionOptions:()=>W});n(944114),n(898992),n(354520),n(581454);var i=n(296540),s=()=>n(564884),o=()=>n(836095),a=()=>n(59226),r=()=>n(484714),c=()=>n(852507),l=()=>n(56366),d=()=>n(401497),u=()=>n(98126),p=()=>n(406094),g=()=>n(519143),m=()=>n(340498),h=n(474848);const f=(0,m().wt)("key",{viewBox:"0 0 30 30",svg:(0,h.jsx)("path",{d:"M14.757 4A5.724 5.724 0 009 9.748c0 2.364 1.389 4.456 3.586 5.335V23.6c0 .255.079.483.272.676l1.53 1.477a.578.578 0 00.808-.009l2.769-2.768a.598.598 0 000-.87l-1.591-1.574 2.232-2.232a.602.602 0 00-.017-.861l-2.171-2.18c2.628-1.116 4.087-3.13 4.087-5.511A5.733 5.733 0 0014.757 4zm0 5.344a1.55 1.55 0 01-1.547-1.547c0-.861.685-1.547 1.547-1.547a1.55 1.55 0 011.547 1.547 1.55 1.55 0 01-1.547 1.547z"})}),v=(0,m().wt)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,h.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})});var y=()=>n(385527),x=()=>n(846899),S=()=>n(236262),b=()=>n(69708),A=()=>n(284371),j=()=>n(625940),_=()=>n(559506),C=()=>n(901389),w=()=>n(383466),k=()=>n(576590),M=()=>n(760217),I=()=>n(404277),T=()=>n(939740),P=()=>n(89924),N=()=>n(21140),D=()=>n(722872),B=()=>n(176983),L=()=>n(152197),O=()=>n(430483),z=()=>n(174636);const F=(0,b().YK)({userOverwritePopupTitle:{id:"slackConnectionOptions.overwriteEmail.title",defaultMessage:"User Authorization"}});function W({parent:e,from:t}){var n;const p=(0,r().v3)(),[g,m]=(0,i.useState)(),y=(0,a().X)("ingestion_mapped_child_spaces"),j=(0,B().J)(),W=(0,d().IS)((e=>({privateConnectedLabel:{color:e.text.primary},icon:{width:16,height:16},progressIcon:{width:16,height:16,fill:e.blue.icon.accentPrimary},caption:{color:e.text.tertiary,fontSize:12,textWrap:"wrap"},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},disabledOptionLabel:{color:e.text.tertiary,fontSize:14,marginBottom:2},iconWrapper:{paddingTop:4}})),[]),V=(0,L().r)(),K=(0,l().K8)((()=>z().R.state.isPublicSync),[]),q=(0,l().K8)((()=>z().R.state.isSyncCompleted),[]),H=(0,l().K8)((()=>z().R.state.sessionId),[]),Y=(0,l().O$)(z().R),[G,J]=i.useState(!0),[$,Q]=i.useState([]),Z=(0,l().K8)((()=>z().R.state.isDisconnecting),[]),X=(0,l().K8)((()=>z().R.state.analyticsFrom),[]),ee=(0,l().K8)((()=>O().zD.state.isSlackV2AiConnectorEnabled()&&2===z().R.state.connectionVersion),[]),[te,ne]=(0,i.useState)(!0),ie=(0,l().K8)((()=>z().R.state.isSlackGridAiConnectorEnabled),[]);(0,c().l)((async()=>{if(!V)return;if(y){const e=await _().callApi({eventName:"getMappedParentSpace",environment:p,data:{spaceId:V}});if("success"!==e.type)return;if(e.data.isMapped)return m(e.data),void J(!1)}"success"===(await(0,k().updateSlackConnectionStatus)({environment:p,spaceId:V})).status&&z().R.state.connectedApps&&Q(z().R.state.connectedApps),J(!1)}));const se=(0,l().K8)((()=>$.includes("slack-admin")),[$]),oe=(0,l().K8)((()=>$.includes("slack")),[$]),ae={key:"slack-ingestion-admin-auth",label:R($,q,K,ie,W),caption:E(j,$,K,Z,q),icon:v(W.icon),disabled:!0,connected:se,hidden:!1,action:()=>{V&&((0,k().navigateToAIConnectorOnboarding)({analyticsFrom:t||"chat_menu",connector:"slack"}),(0,s().u)({environment:p,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"connect_public_slack",integration_type:"slack",setup_session_id:H,from:t||X}}}))}},re=null!=g&&g.isMapped?[{key:"inherited-space",label:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectionDisabled",defaultMessage:"Disabled"}),caption:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.disabledDescription",defaultMessage:"Cannot connect Slack to this space. Slack connection is inherited from {parentSpaceName}",values:{parentSpaceName:(0,h.jsx)("u",{children:null===(n=g.spaceDetails)||void 0===n?void 0:n.spaceName})}}),icon:v(W.icon),disabled:!0,connected:!1,hidden:!1,action:()=>{}}]:[ae,{key:"slack-overwrite-email",label:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.overWriteEmail",defaultMessage:"Log in to Slack"}),caption:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.overWriteEmailCaption",defaultMessage:"We couldn’t verify your Slack e-mail. Click to authenticate."}),icon:f(W.icon),disabled:!1,connected:oe,hidden:!!ie||(!q||te),action:async()=>{if(!V)return;(0,s().u)({environment:p,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"connect_slack_user_mapping",integration_type:"slack",setup_session_id:H,from:t||X}}});const e=await _().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:p,data:{spaceId:V,isAdminAuth:!1,isDesktopApp:p.device.isElectron,isUserMapping:!0,sessionId:H}});"success"===e.type&&(p.device.isElectron?(0,o().P)(e.data.url):await w().P(p,{width:800,height:600,url:e.data.url,titleMessage:F.userOverwritePopupTitle}))}},{key:"slack-overwrite-email-logout",label:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.overWriteEmailLogout",defaultMessage:"Disconnect your account"}),caption:(0,h.jsx)(h.Fragment,{}),icon:(0,S().trashIcon)(W.icon),disabled:!1,connected:!1,hidden:!!ie||!$.includes("slack-user-mapping"),action:async()=>{if(!V)return;null==e||e.close();const{accept:n}=await C().Gh({message:(0,h.jsxs)(N().wt,{gap:8,children:[(0,h.jsx)("div",{style:{fontWeight:A().Wy.semibold,fontSize:18},children:(0,h.jsx)(b().sA,{id:"universalQna.slackChannelSelection.disconnectOverwriteHeader",defaultMessage:"Are you sure?"})}),(0,h.jsx)("div",{style:{fontWeight:A().Wy.regular},children:(0,h.jsx)(b().sA,{id:"universalQna.slackChannelSelection.disconnectOverwriteNote1",defaultMessage:"Your Slack data will be permanently deleted from Notion."})}),(0,h.jsx)("div",{style:{fontWeight:A().Wy.regular},children:(0,h.jsx)(b().sA,{id:"universalQna.slackChannelSelection.disconnectOverwriteNote2",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."})})]}),acceptLabel:(0,h.jsx)(b().sA,{id:"universalQna.slackChannelSelection.disconnectButtonLabel",defaultMessage:"Disconnect Slack"})});n&&((0,s().u)({environment:p,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_user_mapping_disconnect",integration_type:"slack",setup_session_id:H,from:t||X}}}),await _().callApi({eventName:"disconnectSlackIngestion",environment:p,data:{spaceId:V,disconnectUserMapping:!0}}))}}],ce=[ae,...U({environment:p,slackUniversalQnAConnectionStoreState:Y,styles:W,isGridEnabledSpace:ie,spaceId:V,parent:e})],le=[{key:"slack-connection-section",render:e=>(0,h.jsx)(P().A,{...e}),items:(ee?ce:re).filter((e=>!e.hidden)).map((({key:t,label:n,caption:i,icon:s,disabled:o,connected:a,action:r})=>({key:t,action:async()=>{await r(),null==e||e.close()},render:e=>(0,h.jsx)(M().A,{...e,title:(0,h.jsxs)(N().Ye,{gap:4,children:[(0,h.jsx)("div",{style:W.iconWrapper,children:s}),(0,h.jsxs)("div",{style:W.option,children:[(0,h.jsx)("div",{style:o?W.disabledOptionLabel:W.optionLabel,children:n}),(0,h.jsx)("div",{style:W.caption,children:i})]})]}),isChecked:a,disabled:o})})))}];return g||!$.includes("slack-admin")||!j||K||Z||le.push({key:"slack-settings-section",render:e=>(0,h.jsx)(P().A,{...e,topBorder:!0}),items:[{key:"slack-settings",action:()=>{V&&(z().R.setState({...z().R.state,currentScreen:"settings"}),null==e||e.close())},render:e=>(0,h.jsx)(M().A,{...e,title:(0,h.jsxs)(N().Ye,{gap:4,children:[(0,h.jsx)("div",{style:W.iconWrapper,children:(0,x().B)(W.icon)}),(0,h.jsx)("div",{style:W.option,children:(0,h.jsx)("div",{style:W.optionLabel,children:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.settings",defaultMessage:"Settings"})})})]})})}]}),(0,h.jsx)(I().A,{menuType:D().gu.Popup,children:G?(0,h.jsx)(N().Ye,{style:{padding:8,justifyContent:"center"},children:(0,h.jsx)(u().k,{})}):(0,h.jsx)(T().Ay,{type:T().Oh.Vertical,sections:le,initialFocus:void 0})})}function R(e,t,n,i,s){return n||t||!e.includes("slack-admin")?(0,h.jsx)("div",{style:null==s?void 0:s.privateConnectedLabel,children:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.adminAuth",defaultMessage:"Public conversations"})}):i?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.noWorkspacesSelected",defaultMessage:"No workspaces selected"}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.noChannelsSelected",defaultMessage:"No channels selected"})}function E(e,t,n,i,s){return e?i?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.disconnectingPublicSlack",defaultMessage:"Disconnecting. This can take up to 3 hours."}):n?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectingPublicSlack",defaultMessage:"Connecting. This can take up to 36 hours."}):t.includes("slack-admin")?s?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectedByWorkspaceOwner",defaultMessage:"Connected by workspace owner"}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.selectChannels",defaultMessage:"Your workspace owner hasn’t completed the setup."}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectSlackToEnhanceResults",defaultMessage:"Connect to enhance your AI results"}):t.includes("slack-admin")?s?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectedByWorkspaceOwner",defaultMessage:"Connected by workspace owner"}):n?(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.connectingPublicSlack",defaultMessage:"Connecting. This can take up to 36 hours."}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.selectChannels",defaultMessage:"Your workspace owner hasn’t completed the setup."}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackIngestion.contactAdmin",defaultMessage:"Contact your workspace owner to connect"})}function U(e){const{environment:t,slackUniversalQnAConnectionStoreState:n,styles:i,isGridEnabledSpace:o,spaceId:a,parent:r}=e,c=n.isSyncCompleted,l=n.sessionId,d=n.analyticsFrom,u=n.connectedApps??[],p=(null==u?void 0:u.includes("slack"))??!1;return[{key:"slack-ingestion-status-connecting",label:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.connecting",defaultMessage:"Connecting"}),caption:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.subtext",defaultMessage:"Your workspace owner is connecting Slack. This can take up to 36 hours"}),icon:(0,g().D)(i.progressIcon),disabled:!0,connected:!1,hidden:!0,action:()=>{}},{key:"slack-ingestion-user-auth",label:p?(0,h.jsx)("div",{style:i.privateConnectedLabel,children:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.personalSlack",defaultMessage:"Private conversations"})}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.userAuth",defaultMessage:"Login for Private conversations"}),caption:p?(0,h.jsx)(V,{parent:r}):(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.userCaption",defaultMessage:"Login to get access to DMs and private channels"}),icon:(0,y().h)(i.icon),disabled:!!p,connected:p,hidden:!!o||!c,action:async()=>{a&&(p||(await j().JR({environment:t,spaceId:a}),(0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"connect_private_slack",integration_type:"slack",setup_session_id:l,from:d}}})))}}]}function V({parent:e}){const t=(0,d().IS)((e=>({disconnectedLabel:{color:e.text.primary,border:`1px solid ${e.border.primary}`,marginTop:4,width:"80%"}})),[]),n=(0,L().r)(),o=(0,r().v3)(),a=(0,l().K8)((()=>z().R.state.sessionId),[]),c=(0,l().K8)((()=>z().R.state.analyticsFrom),[]),[u,g]=(0,i.useState)(!1);return(0,h.jsxs)(N().wt,{children:[(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.slackAIIngestion.connectedByYou",defaultMessage:"Connected by you. Click below to disconnect"}),(0,h.jsx)(p().A,{style:t.disconnectedLabel,isLoading:u,onClick:async()=>{if(!n)return;g(!0);const t=await j().lx({environment:o,spaceId:n});g(!1),t&&(null==e||e.close()),(0,s().u)({environment:o,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_private_slack",integration_type:"slack",setup_session_id:a,from:c}}})},children:(0,h.jsx)(b().sA,{id:"assistantOverflowMenu.ingestion.logged_in.disconnect",defaultMessage:"Disconnect"})})]})}},569670:(e,t,n)=>{n.d(t,{D:()=>i});const i=(0,n(69708).YK)({slackUniversalSearchOauthPopupTitle:{id:"universalSearch.slack.slackOauthPopupTitle",defaultMessage:"Authenticate Slack"},userOverwritePopupTitle:{id:"slackConnectionOptions.overwriteEmail.title",defaultMessage:"User Authorization"},githubAIConnectorOauthPopupTitle:{id:"githubAIConnector.oauthPopup.title",defaultMessage:"GitHub Authentication"},jiraAIConnectorOauthPopupTitle:{id:"jiraAIConnector.oauthPopup.title",defaultMessage:"Jira Authentication"},linearAIConnectorOauthPopupTitle:{id:"linearAIConnector.oauthPopup.title",defaultMessage:"Linear Authentication"},discordAIConnectorOauthPopupTitle:{id:"discordAIConnector.oauthPopup.title",defaultMessage:"Discord Authentication"},salesforceAIConnectorOauthPopupTitle:{id:"salesforceAIConnector.oauthPopup.title",defaultMessage:"Salesforce Authentication"}})},582162:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>s,oneDriveIcon:()=>o});n(296540);var i=n(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"-0.01 3.44 20.01 12.82",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_501_593)",children:[(0,i.jsx)("path",{fill:"#0364B8",d:"m7.626 7.008 4.2 2.514 2.501-1.053a4.05 4.05 0 0 1 1.885-.321A6.25 6.25 0 0 0 4.936 6.264L5 6.262a5 5 0 0 1 2.626.746"}),(0,i.jsx)("path",{fill:"#0078D4",d:"M7.627 7.007v.001A5 5 0 0 0 5 6.262l-.064.002A4.998 4.998 0 0 0 .898 14.12l3.703-1.558 1.646-.692 3.664-1.542 1.914-.806z"}),(0,i.jsx)("path",{fill:"#1490DF",d:"M16.212 8.148a4.05 4.05 0 0 0-1.885.322l-2.502 1.052.726.435 2.378 1.424 1.037.622 3.548 2.125a4.062 4.062 0 0 0-3.302-5.98"}),(0,i.jsx)("path",{fill:"#28A8EA",d:"m15.967 12.003-1.038-.622-2.378-1.424-.726-.435-1.913.806-3.665 1.542-1.646.692L.898 14.12A5 5 0 0 0 5 16.263h10.938a4.06 4.06 0 0 0 3.576-2.135z"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_501_593",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 3.45h20v12.813H0z"})})})]})},o=(0,n(340498).wt)("oneDrive",s)},592420:(e,t,n)=>{n.d(t,{Q:()=>o});var i=()=>n(765957),s=()=>n(134217);function o(e){var t;return!(null===(t=i().default.state.sidebarSpaceStore)||void 0===t||!t.canAdmin())&&(0,s().n)(e,"enterprise")}},601751:(e,t,n)=>{n.d(t,{r:()=>s});class i extends(()=>n(757695))().Store{getInitialState(){return{isOpen:!1,openCount:0,from:void 0}}}const s=new i;(0,n(852832).exposeDebugValue)("agentPersonalizationSettingsModalStore",s)},625940:(e,t,n)=>{n.d(t,{FM:()=>v,JR:()=>f,R2:()=>m,lx:()=>g,nh:()=>h});n(898992),n(354520);var i=()=>n(564884),s=()=>n(836095),o=()=>n(174636),a=()=>n(972435),r=()=>n(430483),c=()=>n(559506),l=()=>n(383466),d=()=>n(471995),u=()=>n(231297),p=()=>n(569670);async function g(e){const{environment:t,spaceId:n}=e,i=await c().callApi({eventName:"disconnectSlackIngestion",environment:t,data:{spaceId:n,disconnectForWorkspace:!1}});var s;"success"===i.type&&o().R.setState({...o().R.state,connectedApps:null===(s=o().R.state.connectedApps)||void 0===s?void 0:s.filter((e=>"slack"!==e)),isPrivateSync:!1});return"success"===i.type}function m(e){const{environment:t,sidebarSpaceViewStore:n,analyticsProperties:s}=e,{analyticsFrom:o,buttonName:a,sessionId:r}=s;(0,i().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:a,integration_type:"slack",setup_session_id:r,from:o}}}),u().createAndCommit({userAction:"slackAIConnector.onboarding.dismissPersonalAuthPrompt",environment:t,canUndo:!0,perform:e=>{u().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),dismissed_slack_personal_auth_prompt:!0}},transaction:e})}})}function h(){o().R.setState({...o().R.state,currentScreen:"settings"})}async function f(e){const{environment:t,spaceId:n}=e,i=r().zD.isSlackV2AiConnectorEnabled(),u=await c().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:t,data:{spaceId:n,isAdminAuth:!1,isDesktopApp:t.device.isElectron}});let g;"success"===u.type&&(g=t.device.isElectron?await(0,s().P)(u.data.url):await l().P(t,{width:800,height:600,url:u.data.url,titleMessage:p().D.userOverwritePopupTitle})),i&&g&&(o().R.setState({...o().R.state,connectedApps:[...o().R.state.connectedApps??[],"slack"]}),d().D6({label:a().A.getIntl().formatMessage({defaultMessage:"You are connected to both Private and Public messages",id:"slack.v2.user.auth.success"}),position:"bottom"}))}async function v(e){const{environment:t,spaceId:n}=e,i=await c().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:t,data:{spaceId:n,isAdminAuth:!0,isDesktopApp:t.device.isElectron}});let r;"success"===i.type&&(r=t.device.isElectron?await(0,s().P)(i.data.url):await l().P(t,{width:800,height:600,url:i.data.url,titleMessage:p().D.slackUniversalSearchOauthPopupTitle})),r&&(o().R.setState({...o().R.state,connectionVersion:2,connectedApps:[...o().R.state.connectedApps??[],"slack"]}),d().D6({label:a().A.getIntl().formatMessage({defaultMessage:"Slack AI updated, You now have access to Private conversations",id:"slack.v2.admin.auth.success"}),position:"bottom"}))}},626466:(e,t,n)=>{n.r(t),n.d(t,{arrowChevronSingleDownFillIcon:()=>s,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.72 6.72 12.56 7.16",svg:(0,n(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},s=(0,n(340498).wt)("arrowChevronSingleDownFill",i)},631404:(e,t,n)=>{n.d(t,{o:()=>a,v:()=>o});var i=()=>n(963702),s=()=>n(92383);function o(){i().F.setState({...i().F.state,currentScreen:"settings"})}function a(){s().E.setState({...s().E.state,currentScreen:"settings"})}},680683:(e,t,n)=>{n.d(t,{B:()=>P});n(944114),n(898992),n(354520),n(581454);var i=n(296540),s=()=>n(484714),o=()=>n(56366),a=()=>n(401497),r=()=>n(631524),c=()=>n(324254),l=()=>n(179034),d=()=>n(245241),u=()=>n(69708),p=()=>n(722872),g=()=>n(825972),m=()=>n(71304),h=()=>n(135599),f=()=>n(857437),v=()=>n(765957),y=()=>n(970585),x=()=>n(148832),S=()=>n(406699),b=()=>n(419357),A=()=>n(404277),j=()=>n(939740),_=()=>n(305390),C=()=>n(89924),w=()=>n(125565),k=()=>n(21140),M=()=>n(320865),I=n(474848);const T=(0,u().YK)({placeholder:{id:"pageSelector.placeholder",defaultMessage:"Search for a page or database..."},placeholderDatabasesOnly:{id:"pageSelector.placeholderDatabasesOnly",defaultMessage:"Search for a database..."},placeholderPagesOnly:{id:"pageSelector.placeholderPagesOnly",defaultMessage:"Search for a page..."},pagesSection:{id:"pageSelector.pagesSection",defaultMessage:"Pages"},collectionsSection:{id:"pageSelector.collectionsSection",defaultMessage:"Databases"}});function P({value:e,onChange:t,placeholder:n,width:P=250,disabled:N=!1,searchOptions:D,hidePages:B=!1,showCollections:L=!1,excludedBlockIds:O=[],peopleBlocksToInclude:z,renderOrigin:F,renderSections:W}){const R=(0,s().v3)(),E=(0,u().tz)(),[U,V]=(0,i.useState)(""),K=(0,o().O$)(v().AppStoreSidebarSpaceStore),q=(0,o().uB)(void 0,y().A),[H,Y]=(0,f().$)(),G=(0,a().IS)((e=>({selectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:N?.4:1,width:P,border:`1px solid ${e.border.secondary}`,justifyContent:"space-between",borderRadius:4,backgroundColor:e.background.primary},chevronIcon:{width:12,height:12,marginInlineStart:4,fill:e.icon.tertiary},selectedText:{color:e.text.primary,fontSize:14,fontWeight:"medium"},placeholderText:{color:e.text.secondary,fontSize:14}})),[N,P]),J=(0,o().K8)((()=>{if(!e||!K)return null;const t=new(x().B)(R,{table:l().ev,id:e,spaceId:K.id});return t.getModel()?{id:e,store:t}:null}),[K,R,e]),$=(0,h().W)({type:d().Vz.BlocksInSpace,query:U,source:D.source,excludedBlockIds:O,limit:5,filters:{blockTypes:["page"]},options:{disable:B||!U},peopleBlocksToInclude:z}),Q=(0,o().K8)((()=>U&&$.results.length>0?$.results.map((e=>({id:e.id,store:e.store}))):(g().wI.state||[]).filter((e=>{const t=e.store.getModel();return"page"===(null==t?void 0:t.type)})).slice(0,5).map((e=>({id:e.pageId,store:e.store})))),[U,$.results]),Z=(0,h().W)({type:d().Vz.CollectionsInSpace,query:U,source:D.source,excludedBlockIds:O,limit:5,options:{disable:!L},peopleBlocksToInclude:z}),X=(0,i.useMemo)((()=>Z.results.length>0?Z.results.map((e=>({id:e.id,store:e.store,collectionId:e.collectionId}))):[]),[Z.results]),ee=(0,i.useMemo)((()=>B&&L?E.formatMessage(T.placeholderDatabasesOnly):B||L?E.formatMessage(T.placeholder):E.formatMessage(T.placeholderPagesOnly)),[B,L,E]),te=(0,o().K8)((()=>J?(0,m().Jq)(J.store,E,R)??(0,m().gG)(J.store,E):n||ee),[J,n,ee,E,R]),ne=(0,i.useCallback)((e=>{null==t||t(e),V(""),q.unsetFocus()}),[t,q]),ie=(0,i.useMemo)((()=>{let e=[];e.push({key:"search",render:()=>(0,I.jsx)(C().A,{isInput:!0,children:(0,I.jsx)(b().Ay,{placeholder:ee,value:U,onChange:e=>V(e.target.value),inputElementAttributes:H.inputElementAttributes,suppressFocusRing:H.suppressFocusRing,onFocus:H.onFocus,onBlur:H.onBlur})}),items:[]});const t=Q&&Q.length>0,n=$.isResultsLoading;if(!B){const i=[...t?Q.map((e=>({key:e.id,action:()=>ne(e),render:t=>(0,I.jsx)(_().A,{...t,store:e.store})}))):[],...n?[{key:"loading-pages-item",action:()=>{},render:()=>(0,I.jsx)(M().A,{})}]:[]];e.push({key:"pages",render:e=>(0,I.jsx)(C().A,{title:(0,I.jsx)(u().sA,{...T.pagesSection}),children:e.children}),items:i,showNoResultMessage:!n&&!t})}const i=X&&X.length>0,s=Z.isResultsLoading;if(L){const t=[...i?X.map((e=>({key:e.id,action:()=>ne(e),render:t=>(0,I.jsx)(_().A,{...t,store:e.store})}))):[],...s?[{key:"loading-collections-item",action:()=>{},render:()=>(0,I.jsx)(M().A,{})}]:[]];e.push({key:"collections",render:e=>(0,I.jsx)(C().A,{title:(0,I.jsx)(u().sA,{...T.collectionsSection}),children:e.children}),items:t,showNoResultMessage:!s&&!i})}return W&&(e=W(e)),e}),[$.isResultsLoading,Q,U,ne,H,Z.isResultsLoading,X,B,L,ee,W]);return(0,I.jsx)(S().A,{popupType:S().z.Popup,placementToOrigin:"bottom",disabled:N,renderOrigin:F??(e=>(0,I.jsxs)(r().p,{...e,style:G.selectorButton,disabled:N,children:[(0,I.jsx)(k().Ye,{alignItems:"center",style:{minWidth:0},children:(0,I.jsx)(w().A,{style:J?G.selectedText:G.placeholderText,children:te})}),(0,c().arrowChevronSingleDownSmallIcon)(G.chevronIcon)]})),render:()=>(0,I.jsx)(A().A,{menuType:p().gu.Popup,width:P,maxHeight:400,children:(0,I.jsx)(j().Ay,{type:j().Oh.Vertical,initialFocus:void 0,store:q,comboboxProps:Y,sections:ie})})})}},825355:(e,t,n)=>{n.d(t,{$Y:()=>y,cy:()=>x});var i=n(296540),s=()=>n(564884),o=()=>n(484714),a=()=>n(852507),r=()=>n(56366),c=()=>n(69708),l=()=>n(917791),d=()=>n(231297),u=()=>n(987267),p=()=>n(229533),g=()=>n(152197),m=()=>n(765957),h=()=>n(140181),f=n(474848);const v={asana:n(624820).P0,github:n(291075).o,slack:n(174636).R,linear:n(46657).W,discord:n(262246).l,salesforce:n(723771).C},y={asana:"dismissed_asana_personal_auth_prompt",github:"dismissed_github_personal_auth_prompt",slack:"dismissed_slack_personal_auth_prompt",linear:"dismissed_linear_personal_auth_prompt",discord:"dismissed_discord_personal_auth_prompt",salesforce:"dismissed_salesforce_personal_auth_prompt"};function x({connector:e,showDismiss:t,shouldDismiss:n,parent:x,minimizePopup:S,hideNotification:b}){const[A,j]=(0,i.useState)(!1),_=(0,r().K8)((()=>v[e].state),[e]),C=(0,g().r)(),w=(0,o().v3)(),k=(0,r().O$)(m().AppStoreCurrentUserSettingsStore),{isMobile:M}=(0,o().Y0)(),I=(0,r().O$)(m().AppStoreSidebarSpaceViewStore),T=u().w0[e],P=(0,i.useCallback)((()=>{if(!k||!I)return;if(!n)return;const t=y[e];d().createAndCommit({userAction:`AIConnector.${e}.onboarding.dismissPersonalAuthPrompt`,environment:w,canUndo:!0,perform:e=>{d().applyOperation({store:I,operation:{pointer:I.pointer,path:["settings"],command:"update",args:{...I.getSettings(),[t]:!0}},transaction:e})}})}),[k,I,w,e,n]),N=(0,i.useCallback)((()=>{(0,s().u)({environment:w,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_dismiss",integration_type:e,setup_session_id:_.sessionId,from:"connect_nudge"}}}),v[e].setState({..._,forceShowAuthNotificationTriggeredAt:void 0}),P()}),[P,w,_,e]),D=(0,r().K8)((()=>(0,p().UK)(e)),[e]),B=t?"connect_nudge":"chat_menu";(0,a().l)((()=>{(0,s().u)({environment:w,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:`show_${e}_personal_auth_prompt`,integration_type:e,setup_session_id:_.sessionId,from:B}}})}));const L=M?void 0:{label:(0,f.jsx)(c().sA,{id:"assistantChat.ingestion.ctaForConnectorPersonalAuth",defaultMessage:"Log in"}),onClick:async()=>{if(!C)return;const t=Boolean(_.forceShowAuthNotificationTriggeredAt);v[e].setState({..._,analyticsFrom:B,forceShowAuthNotificationTriggeredAt:void 0}),t||null==b||b(`${e}_re_auth`),j(!0),await(0,l().t)({connector:e,environment:w,spaceId:C,analyticsProperties:{buttonName:"user_auth_connect"},onAuthSuccess:()=>{null==x||x.close(),null==S||S()}}),j(!1)},disabled:A};return(0,f.jsx)(h().Mp,{type:"error",title:(0,f.jsx)(c().sA,{id:"assistantChat.ingestion.connectionStatusActionRequiredForLogin",defaultMessage:"Log in to {connectorName}",values:{connectorName:T}}),caption:(0,f.jsx)(c().sA,{id:"assistantChat.ingestion.connectionStatusActionRequiredForLoginDescription",defaultMessage:"Authenticate to get answers from {orgName}",values:{orgName:D}}),actionButton:L,onDismiss:t?N:void 0})}},866893:(e,t,n)=>{n.d(t,{Iu:()=>en,aV:()=>on,KZ:()=>vn,iu:()=>pn,LR:()=>an});n(944114),n(581454);var i=n(296540),s=()=>n(564884),o=()=>n(59226),a=()=>n(242422),r=()=>n(484714),c=()=>n(56366),l=()=>n(401497),d=()=>n(699143),u=()=>n(406094),p=()=>n(631524),g=()=>n(493552),m=()=>n(902006),h=()=>n(203717),f=()=>n(340498),v=n(474848);const y={viewBox:"0 0 17 16",fittedViewBox:"-0.02 1.74 16.11 12.51",svg:(0,v.jsx)("path",{d:"m3.303 8.778.523-.522a.75.75 0 0 1 1.06 1.06L3.083 11.12a.75.75 0 0 1-1.06 0L.22 9.316a.75.75 0 1 1 1.06-1.06l.523.522V8a6.25 6.25 0 0 1 9.752-5.178.75.75 0 1 1-.842 1.242A4.75 4.75 0 0 0 3.303 8zm11-1.556.523.522a.75.75 0 0 0 1.06-1.06L14.085 4.88a.75.75 0 0 0-1.061 0L11.22 6.684a.75.75 0 0 0 1.06 1.06l.523-.522V8a4.75 4.75 0 0 1-7.41 3.936.75.75 0 1 0-.841 1.242A6.25 6.25 0 0 0 14.303 8z"})},x=(0,f().wt)("arrowCircleLoopFillSmall",y);var S=()=>n(73956),b=()=>n(765974),A=()=>n(212727),j=()=>n(73822),_=()=>n(427704),C=()=>n(762433),w=()=>n(871392),k=()=>n(979340),M=()=>n(69708),I=()=>n(778078),T=()=>n(534177),P=()=>n(284371),N=()=>n(917791),D=()=>n(576590);var B=()=>n(874480),L=()=>n(631404),O=()=>n(625940),z=()=>n(901389),F=()=>n(384944),W=()=>n(706024),R=()=>n(601866),E=()=>n(231297),U=()=>n(987267),V=()=>n(843014),K=()=>n(96563),q=()=>n(634877),H=()=>n(852507),Y=()=>n(98126),G=()=>n(846899),J=()=>n(21140),$=()=>n(229533),Q=()=>n(176983),Z=()=>n(765957),X=()=>n(140181),ee=()=>n(980933),te=()=>n(825355),ne=()=>n(760217),ie=()=>n(404277),se=()=>n(939740),oe=()=>n(89924),ae=()=>n(722872);function re(e){const{items:t}=e,n=(0,l().IS)((e=>({option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},caption:{color:e.text.tertiary,fontSize:12,textWrap:"wrap"}})),[]),i=e=>{const{key:t,component:i,caption:s,icon:o,iconElement:a,disabled:r,action:c,labelStyleOverride:l,captionStyleOverride:d,iconStyleOverride:u,body:p}=e,g=o?o({width:12,height:12}):a;return{key:t,action:()=>{c()},render:e=>(0,v.jsx)(ne().A,{...e,style:n.option,title:i,titleStyle:l??n.optionLabel,captionStyle:d??n.caption,caption:s,disabled:r,left:g,leftStyle:u,body:p})}},s=t.map(((e,t)=>({key:e.key,render:e=>(0,v.jsx)(oe().A,{...e,topBorder:0!==t}),items:[i(e)]})));return(0,v.jsx)(ie().A,{menuType:ae().gu.Popup,minWidth:230,children:(0,v.jsx)(se().Ay,{type:se().Oh.Vertical,sections:s,initialFocus:void 0})})}function ce(e){const{parent:t,callGetStatusAPI:n,connector:s,connectionStatus:o}=e,a=Boolean(n),[d,p]=i.useState(a),g=(0,l().IS)((e=>({connectedStatusIcon:{width:16,height:16,fill:e.icon.tertiary},connectingStatusIcon:{width:16,height:16,fill:e.blue.icon.accentPrimary}})),[]),h=(0,Q().J)(),f=(0,c().O$)(q().NT[s]),y=(0,c().K8)((()=>(0,$().zM)(s)),[s]),b=(0,c().K8)((()=>(0,$().hA)(s)),[s]),A=(0,c().K8)((()=>(0,$().UK)(s)),[s]),j=(0,c().K8)((()=>(0,$().o5)(s)),[s]),{analyticsFrom:_}=f,C=(0,c().O$)(Z().AppStoreSidebarSpaceStore),w=(0,c().O$)(Z().AppStoreSidebarSpaceViewStore),k=(0,r().v3)();(0,H().l)((async()=>{C&&a&&(p(!0),await(0,q().getAiConnectorRefreshFunction)(s)({environment:k,spaceId:C.getSpaceId()}),p(!1))}));const I=(0,i.useMemo)((()=>{const e=[];return"action_required"!==o.type&&e.push(o.type),"action_required"===o.type&&"sharepoint_select_sites"===o.action&&e.push("sharepoint_select_sites"),"action_required"===o.type&&"microsoft_teams_select_teams"===o.action&&e.push("microsoft_teams_select_teams"),"action_required"===o.type&&("slack_re_auth"===o.action||"github_re_auth"===o.action||"linear_re_auth"===o.action||"salesforce_re_auth"===o.action)||y&&"linear"!==s?e.push("authentication_required"):"connected"===o.type&&("github"===s||"slack"===s||"salesforce"===s||"linear"===s&&b)&&e.push("authenticated_with_logout_option"),(h||(0,m().q1)(s))&&"disconnecting"!==o.type&&"in_progress"!==o.type&&e.push("settings"),e}),[o,y,h,s,b]);return d?(0,v.jsx)(J().Ye,{style:{width:200,height:50,justifyContent:"center",alignItems:"center"},children:(0,v.jsx)(Y().k,{})}):(0,v.jsx)(re,{items:I.map((e=>"in_progress"===e?{key:"ingestion-status-connecting",component:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connecting",defaultMessage:"Connecting..."}),caption:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.subtext",defaultMessage:"This can take up to {hours} hours",values:{hours:pn(s)}})}),"in_progress"===o.type&&o.ingestionProgress?(0,v.jsx)("div",{children:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.subtextWithPercent",defaultMessage:"{percentComplete}% complete",values:{percentComplete:o.ingestionProgress}})}):void 0]}),iconElement:x(g.connectingStatusIcon),disabled:!0,action:()=>{}}:"connected"===e?{key:"ingestion-status-connected",component:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected",defaultMessage:"Connected"}),caption:(0,v.jsx)(le,{connector:s,orgName:A}),iconElement:(0,S().checkmarkFillSmallIcon)(g.connectedStatusIcon),disabled:!0,action:()=>{}}:"disconnecting"===e?{key:"ingestion-status-disconnecting",component:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.disconnecting",defaultMessage:"Disconnecting {connector}",values:{connector:U().w0[s]}}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.disconnecting.subtext",defaultMessage:"This can take up to 3 hours."}),iconElement:x(g.connectingStatusIcon),disabled:!0,action:()=>{}}:"authentication_required"===e?{key:"ingestion-status-personal-auth-not-complete",component:("slack"===s||"github"===s||"linear"===s||"salesforce"===s)&&(0,v.jsx)(te().cy,{connector:s,parent:t,showDismiss:!1,shouldDismiss:!1}),disabled:!0,action:()=>{}}:"authenticated_with_logout_option"===e?{key:"ingestion-status-logged-in",component:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.logged_in",defaultMessage:"Logged in"}),caption:j?(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.logged_in.subtext_with_external_username",defaultMessage:"Your {connector} user {externalUsername} is connected to Notion AI.",values:{connector:U().w0[s],externalUsername:j}}):(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.logged_in.subtext",defaultMessage:"Your {connector} user is connected to Notion AI.",values:{connector:U().w0[s]}}),body:(0,v.jsx)(u().A,{onClick:()=>{w&&("github"!==s&&"linear"!==s&&"salesforce"!==s||(0,D().disconnectConnectorPersonalAuth)({connector:s,sidebarSpaceViewStore:w,environment:k}))},children:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.logged_in.disconnect",defaultMessage:"Disconnect"})}),iconElement:(0,S().checkmarkFillSmallIcon)(g.connectedStatusIcon),disabled:!0,action:()=>{}}:"microsoft_teams_select_teams"===e?{key:"ingestion-status-microsoft-teams-select-teams",component:(0,v.jsx)(ee().n,{}),disabled:!0,action:()=>{}}:"sharepoint_select_sites"===e?{key:"ingestion-status-sharepoint-select-sites",component:(0,v.jsx)(X()._u,{canAdmin:h}),disabled:!0,action:()=>{}}:"settings"===e?{key:"ingestion-status-settings",component:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.settings",defaultMessage:"Settings"}),icon:G().B,disabled:!1,action:()=>{null==t||t.close(),(0,D().navigateToAIConnectorSettingsScreen)({connector:s,analyticsFrom:_,sessionId:f.sessionId})}}:void(0,T().HB)(e)))})}function le(e){const{connector:t,orgName:n}=e;return"gmail"===t||"google-drive"===t?n?(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected.subtext.googleWorkspace",defaultMessage:"Google Workspace {orgName} is connected to Notion.",values:{connector:U().w0[t],orgName:n}}):(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected.subtext.googleWorkspace.withoutOrgName",defaultMessage:"{connector} is connected to Notion.",values:{connector:U().w0[t]}}):"github"===t?n?(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected.subtext.github",defaultMessage:"{connector} organization {orgName} is connected to Notion.",values:{connector:U().w0[t],orgName:n}}):(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected.subtext.github.withoutOrgName",defaultMessage:"{connector} is connected to Notion.",values:{connector:U().w0[t]}}):(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.ingestion.connected.subtext",defaultMessage:"{connector} workspace{maybeOrgName} is connected to Notion.",values:{connector:U().w0[t],maybeOrgName:n?` ${n}`:""}})}var de=()=>n(51218),ue=(n(898992),n(354520),()=>n(252291));const pe={viewBox:"0 0 16 16",fittedViewBox:"1.89 1.89 12.21 12.21",svg:(0,v.jsx)("path",{fillRule:"evenodd",d:"M8 1.9a6.1 6.1 0 1 1 0 12.202A6.1 6.1 0 0 1 8 1.9m3.111 4.724a.44.44 0 0 0-.553-.056l-.069.056-.902.902a.44.44 0 0 0 .623.622l.15-.15V8a2.36 2.36 0 0 1-3.966 1.73.44.44 0 0 0-.6.645A3.24 3.24 0 0 0 11.24 8v-.002l.152.15a.44.44 0 0 0 .622-.622zM8 4.76A3.24 3.24 0 0 0 4.76 8v.002l-.15-.15a.44.44 0 0 0-.623.622l.902.902c.15.15.383.168.553.056l.069-.056.902-.902a.44.44 0 0 0-.623-.622L5.64 8a2.361 2.361 0 0 1 3.966-1.73.44.44 0 0 0 .6-.646A3.23 3.23 0 0 0 8 4.76",clipRule:"evenodd"})},ge=(0,f().wt)("arrowsCircleinCircleFillSmall",pe);var me=()=>n(413267),he=()=>n(236262),fe=()=>n(99254);function ve(e){const{parent:t,from:n}=e,i=(0,l().IS)((e=>({bannerLikeIcon:{alignSelf:"flex-start",marginBottom:48,marginInlineEnd:4},caption:{color:e.text.tertiary,fontSize:P().J.UISmall.desktop,textWrap:"wrap"},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},disabledOptionLabel:{color:e.text.tertiary,fontSize:14,marginBottom:2}})),[]),s=(0,r().v3)(),o=(0,Q().J)(),a=(0,c().K8)((()=>fe().y.state.jiraSyncState),[]),d=(0,c().K8)((()=>fe().y.state.userConnected),[]),u=(0,c().K8)((()=>fe().y.state.analyticsFrom),[]),p=(0,c().O$)(Z().AppStoreSidebarSpaceStore),g=(0,c().K8)((()=>null==p?void 0:p.getSpaceId()),[p]),m="completed"===a,h=[{key:"jira-connection-section",render:e=>(0,v.jsx)(oe().A,{...e}),items:[{key:"jira-ingestion-status-connecting",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connecting",defaultMessage:"Connecting"}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.subtext",defaultMessage:"Your workspace owner is connecting Jira. This can take up to 36 hours"}),iconElement:(0,v.jsx)("div",{style:i.bannerLikeIcon,children:(0,v.jsx)(ue().I,{icon:ge,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"})}),disabled:!0,hidden:!("in_progress"===a||"editing"===a),action:()=>{}},{key:"jira-ingestion-status-connected",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connected",defaultMessage:"Connected"}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connected.subtext",defaultMessage:"Connected by workspace owner"}),icon:me().b,disabled:!0,hidden:!m,action:()=>{}},{key:"jira-ingestion-disconnect",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnect",defaultMessage:"Disconnecting..."}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnecting.subtext",defaultMessage:"Your workspace owner has disconnected Jira. This can take up to 3 hours."}),iconElement:(0,v.jsx)("div",{style:i.bannerLikeIcon,children:(0,v.jsx)(ue().I,{icon:ge,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"})}),disabled:!0,hidden:"disconnecting"!==a,action:()=>{}},{key:"jira-ingestion-settings",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.settings",defaultMessage:"Settings"}),icon:G().B,disabled:!1,hidden:"completed"!==a||!o,action:()=>{null==t||t.close(),(0,D().navigateToJiraUniversalScreen)({screenToShow:"settings",analyticsFrom:n||u||"chat_menu"})}},{key:"jira-ingestion-user-disconnect",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.userDisconnect",defaultMessage:"Disconnect your account"}),icon:he().trashIcon,disabled:!1,hidden:!d||"completed"!==a,action:async()=>{null==t||t.close(),g&&await(0,D().disconnectJiraUserConnection)({spaceId:g,environment:s})}}].filter((e=>!e.hidden)).map((e=>{const{key:t,label:n,caption:s,icon:o,iconElement:a,disabled:r,action:c,labelStyleOverride:l,captionStyleOverride:d,iconStyleOverride:u}=e,p=o?o({width:12,height:12}):a;return{key:t,action:()=>c(),render:e=>(0,v.jsx)(ne().A,{...e,disabled:r,title:(0,v.jsx)(J().Ye,{children:(0,v.jsxs)("div",{style:i.option,children:[(0,v.jsx)("div",{style:l??(r?i.disabledOptionLabel:i.optionLabel),children:n}),s?(0,v.jsx)("div",{style:d??i.caption,children:s}):void 0]})}),left:p,leftStyle:u})}}))}];return(0,v.jsx)(ie().A,{menuType:ae().gu.Popup,minWidth:230,children:(0,v.jsx)(se().Ay,{type:se().Oh.Vertical,sections:h,initialFocus:void 0})})}var ye=()=>n(693954),xe=()=>n(479350);function Se(e){const{parent:t,from:n}=e,i=(0,l().IS)((e=>({bannerLikeIcon:{alignSelf:"flex-start",marginBottom:48,marginInlineEnd:4},caption:{color:e.text.tertiary,fontSize:P().J.UISmall.desktop,textWrap:"wrap"},option:{paddingTop:4,paddingBottom:4},optionLabel:{fontSize:14,marginBottom:2},disabledOptionLabel:{color:e.text.tertiary,fontSize:14,marginBottom:2}})),[]),s=(0,Q().J)(),o=(0,c().K8)((()=>xe().E.state.jiraSyncState),[]),a=(0,c().K8)((()=>xe().E.state.analyticsFrom),[]),r="completed"===o,d=[{key:"jira-connection-section",render:e=>(0,v.jsx)(oe().A,{...e}),items:[{key:"jira-ingestion-status-connecting",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connecting",defaultMessage:"Connecting"}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.subtext",defaultMessage:"Your workspace owner is connecting Jira. This can take up to 36 hours"}),iconElement:(0,v.jsx)("div",{style:i.bannerLikeIcon,children:(0,v.jsx)(ue().I,{icon:ge,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"})}),disabled:!0,hidden:!("in_progress"===o||"editing"===o||"pending_installation"===o),action:()=>{}},{key:"jira-ingestion-status-connected",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connected",defaultMessage:"Connected"}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.connected.subtext",defaultMessage:"Connected by workspace owner"}),icon:me().b,disabled:!0,hidden:!r,action:()=>{}},{key:"jira-ingestion-disconnect",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnect",defaultMessage:"Disconnecting..."}),caption:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.disconnecting.subtext",defaultMessage:"Your workspace owner has disconnected Jira. This can take up to 3 hours."}),iconElement:(0,v.jsx)("div",{style:i.bannerLikeIcon,children:(0,v.jsx)(ue().I,{icon:ge,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"})}),disabled:!0,hidden:"disconnecting"!==o,action:()=>{}},{key:"jira-ingestion-settings",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.settings",defaultMessage:"Settings"}),icon:G().B,disabled:!1,hidden:"completed"!==o||!s,action:()=>{null==t||t.close(),B().G({screenToShow:"settings",analyticsFrom:n||a||"chat_menu"})}},{key:"jira-select-projects",label:(0,v.jsx)(M().sA,{id:"assistantOverflowMenu.jiraIngestion.selectProjects",defaultMessage:"Select projects"}),icon:ye().Q,disabled:!1,hidden:"pending_selection"!==o,action:()=>{null==t||t.close(),B().G({screenToShow:"connection_complete_screen",analyticsFrom:n||a||"chat_menu"})}}].filter((e=>!e.hidden)).map((e=>{const{key:t,label:n,caption:s,icon:o,iconElement:a,disabled:r,action:c,labelStyleOverride:l,captionStyleOverride:d,iconStyleOverride:u}=e,p=o?o({width:12,height:12}):a;return{key:t,action:()=>c(),render:e=>(0,v.jsx)(ne().A,{...e,disabled:r,title:(0,v.jsx)(J().Ye,{children:(0,v.jsxs)("div",{style:i.option,children:[(0,v.jsx)("div",{style:l??(r?i.disabledOptionLabel:i.optionLabel),children:n}),s?(0,v.jsx)("div",{style:d??i.caption,children:s}):void 0]})}),left:p,leftStyle:u})}}))}];return(0,v.jsx)(ie().A,{menuType:ae().gu.Popup,minWidth:230,children:(0,v.jsx)(se().Ay,{type:se().Oh.Vertical,sections:d,initialFocus:void 0})})}var be=()=>n(553719),Ae=()=>n(604018),je=()=>n(592420),_e=()=>n(47373),Ce=()=>n(972435),we=()=>n(232930),ke=()=>n(5813),Me=()=>n(997583),Ie=()=>n(152197),Te=()=>n(369955),Pe=()=>n(510473),Ne=()=>n(430483),De=()=>n(605402),Be=()=>n(756315),Le=()=>n(208993),Oe=()=>n(329304),ze=()=>n(204330),Fe=()=>n(148307),We=()=>n(529099),Re=()=>n(209969),Ee=()=>n(38679);const Ue={viewBox:"0 0 16 16",fittedViewBox:"3.55 1.77 8.89 12.28",svg:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("path",{d:"M8 1.775A2.375 2.375 0 0 0 5.625 4.15v2.8a2.375 2.375 0 0 0 4.75 0v-2.8A2.375 2.375 0 0 0 8 1.775M6.875 4.15a1.125 1.125 0 0 1 2.25 0v2.8a1.125 1.125 0 0 1-2.25 0z"}),(0,v.jsx)("path",{d:"M4.696 8.614a.625.625 0 0 0-1.03.71 5.26 5.26 0 0 0 3.709 2.24V12.8H4.85a.625.625 0 0 0 0 1.25h6.3a.625.625 0 0 0 0-1.25H8.625v-1.237a5.26 5.26 0 0 0 3.708-2.238.625.625 0 0 0-1.029-.71A4.01 4.01 0 0 1 8 10.35c-1.37 0-2.58-.686-3.304-1.736"})]})},Ve=(0,f().wt)("microphoneSmall",Ue);var Ke=()=>n(564613),qe=()=>n(74007),He=()=>n(280746),Ye=()=>n(333461),Ge=()=>n(679132),Je=()=>n(888382),$e=()=>n(783793),Qe=()=>n(303470);const Ze=(0,M().YK)({title:{id:"aiVisualUpsellBanner.title",defaultMessage:"The AI workspace that works for you"},description:{id:"aiVisualUpsellBanner.description",defaultMessage:"Get the Business plan for the all-in-one AI that takes notes, searches apps, and builds workflows"},notionAiFeatures:{id:"aiVisualUpsellBanner.notionAiFeatures",defaultMessage:"Write, ask, chat"},allCoreAiFeatures:{id:"aiVisualUpsellBanner.allCoreAiFeatures",defaultMessage:"All core AI features"},meetingNotes:{id:"aiVisualUpsellBanner.meetingNotes",defaultMessage:"Meeting notes"},researchMode:{id:"aiVisualUpsellBanner.researchMode",defaultMessage:"Research mode"},notionMailAutoLabel:{id:"aiVisualUpsellBanner.notionMailAutoLabel",defaultMessage:"Notion Mail Auto Label"},searchAcross:{id:"aiVisualUpsellBanner.searchAcross",defaultMessage:"Search across"},connectorsPlusCount:{id:"aiVisualUpsellBanner.connectorsPlusCount",defaultMessage:"+2"}});function Xe(e){const t=(0,l().IS)((e=>({container:{height:30,borderRadius:100,border:`1px solid ${e.border.secondary}`,background:e.state.hover,display:"flex",alignItems:"center",justifyContent:"center",gap:4,paddingTop:0,paddingInlineEnd:10,paddingBottom:0,paddingInlineStart:8,width:"fit-content"}})),[]);return(0,v.jsx)("div",{style:t.container,children:e.children})}function et(e){return(0,v.jsx)(g().D,{colorVariant:e.tertiaryColor?"tertiary":void 0,styleKey:"Caption/Medium",children:e.content})}function tt(e){const t=(0,M().tz)();return(0,v.jsx)(Qe().w,{source:"business_trial_ai_connectors_upsell",upsell:e.upsell,title:t.formatMessage(Ze.title),description:t.formatMessage(Ze.description),hideOverflow:!0,rightSideVisibleMinWidth:600,children:(0,v.jsx)(nt,{})})}function nt(){const e=(0,l().IS)((()=>({rightSideContainer:{display:"flex",alignItems:"center",alignSelf:"stretch",flex:"1 0 0",justifyContent:"end"},contentsContainer:{display:"flex",alignItems:"center",flexShrink:0,position:"absolute",gap:23,paddingInlineEnd:8}})),[]);return(0,v.jsx)("div",{style:e.rightSideContainer,children:(0,v.jsxs)("div",{style:e.contentsContainer,children:[(0,v.jsxs)(d().Y1,{direction:"vertical",gap:8,align:"center-right",children:[(0,v.jsx)(it,{}),(0,v.jsx)(at,{}),(0,v.jsx)(rt,{}),(0,v.jsx)(ct,{}),(0,v.jsx)(st,{}),(0,v.jsx)(ot,{})]}),(0,v.jsx)($e().x_,{style:{cursor:"default"},variant:"upsell_banner",imgSource:Fe().A.images.subscriptions.nosyFacePng})]})})}function it(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(ue().I,{icon:We().aiFaceIcon,size:"sm"}),(0,v.jsx)(et,{content:e.formatMessage(Ze.notionAiFeatures)})]})}function st(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(ue().I,{icon:Ee().P,colorPalette:"red",colorVariant:"accentPrimary",size:"sm"}),(0,v.jsx)(et,{content:e.formatMessage(Ze.researchMode)})]})}function ot(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(ue().I,{icon:Ye().F,size:"sm"}),(0,v.jsx)(et,{content:e.formatMessage(Ze.notionMailAutoLabel)})]})}function at(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(ue().I,{icon:Re().checkmarkCircleFillIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,v.jsx)(et,{content:e.formatMessage(Ze.allCoreAiFeatures)})]})}function rt(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(ue().I,{icon:Ve,size:"sm"}),(0,v.jsx)(et,{content:e.formatMessage(Ze.meetingNotes)})]})}function ct(){const e=(0,M().tz)();return(0,v.jsxs)(Xe,{children:[(0,v.jsx)(et,{content:e.formatMessage(Ze.searchAcross)}),(0,v.jsx)(ue().I,{size:"sm",icon:Je().slackIcon}),(0,v.jsx)(ue().I,{size:"sm",icon:qe().googleDriveIcon}),(0,v.jsx)(ue().I,{size:"sm",icon:Ke().gitHubIcon}),(0,v.jsx)(ue().I,{size:"sm",icon:He().jiraIcon}),(0,v.jsx)(ue().I,{size:"sm",icon:Ge().microsoftTeamsIcon}),(0,v.jsx)(et,{content:e.formatMessage(Ze.connectorsPlusCount),tertiaryColor:!0})]})}var lt=()=>n(641300),dt=()=>n(13898),ut=()=>n(406699),pt=()=>n(173783),gt=()=>n(285790),mt=()=>n(460292),ht=()=>n(187820),ft=()=>n(132389),vt=()=>n(859428),yt=()=>n(125565),xt=()=>n(719147),St=()=>n(8178),bt=()=>n(702723),At=()=>n(495427),jt=()=>n(259476),_t=()=>n(72234),Ct=()=>n(540144),wt=()=>n(575143),kt=()=>n(680683),Mt=()=>n(906745),It=()=>n(970236),Tt=()=>n(416504),Pt=()=>n(187174),Nt=()=>n(471995),Dt=()=>n(615234);const Bt=[{key:"never",label:"Never",caption:"Keep transcripts indefinitely"},{key:"immediately",label:"Immediately",caption:"Delete right after the summary is generated"},{key:"one_day",label:"After 1 day",caption:"Auto-delete 24 hours after transcription"},{key:"one_week",label:"After 1 week",caption:"Auto-delete 7 days after transcription"},{key:"one_month",label:"After 1 month",caption:"Auto-delete 30 days after transcription"},{key:"one_year",label:"After 1 year",caption:"Auto-delete 365 days after transcription"}];function Lt(e){switch(e){case"never":return;case"immediately":return 0;case"one_day":return Dt().i5;case"one_week":return Dt()._h;case"one_month":return 30*Dt().i5;case"one_year":return Dt().xq;default:(0,T().HB)(e)}}function Ot(e){switch(e){case void 0:return"never";case 0:return"immediately";case Dt().i5:return"one_day";case Dt()._h:return"one_week";case 30*Dt().i5:return"one_month";case Dt().xq:return"one_year";default:return"never"}}const zt=(0,M().YK)({meetingNotesAutomaticTranscriptDeletionHeader:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionHeader",defaultMessage:"Automatic transcript deletion"},meetingNotesAutomaticTranscriptDeletionDescription:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionDescription",defaultMessage:"Delete AI Meeting Notes recordings and transcripts for all users in the workspace after a set time."},meetingNotesAutomaticTranscriptDeletionRetentionUpdateError:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionRetentionUpdateError",defaultMessage:"Something went wrong while updating the retention settings. Please try again."}}),Ft=(0,M().YK)({confirmationModalExplanation:{id:"aiSettings.confirmationModal.explanation",defaultMessage:"Delete AI Meeting Notes recordings and transcripts for all users in the workspace after a set time."},confirmationModalImmediateEffect:{id:"aiSettings.confirmationModal.immediateEffect",defaultMessage:"Reducing this retention setting may lead to transcripts being deleted immediately. Please confirm."}});function Wt(e){const{spaceStore:t}=e,n=(0,r().v3)(),s=(0,M().tz)(),o=(0,c().K8)((()=>{var e;return null===(e=t.getSettings())||void 0===e?void 0:e.purge_transcripts_delay_seconds}),[t]),a=(0,c().K8)((()=>{const e=(0,Tt().P)();return Mt().c9.utc().set({hour:11,minute:0,second:0,millisecond:0}).setZone(e).toLocaleString({hour:"numeric",minute:"2-digit",timeZoneName:"short"})}),[]),l=(0,i.useCallback)((e=>{E().createAndCommit({userAction:"AiSettings.setAutomatedTranscriptDeletion",environment:n,canUndo:!1,perform:n=>{E().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","purge_transcripts_delay_seconds"],command:"set",args:Lt(e)},transaction:n}),n.postSubmitCallbacks.push((e=>{e&&(Nt().N2(),Nt().D6({label:s.formatMessage(zt.meetingNotesAutomaticTranscriptDeletionRetentionUpdateError)}))}))}})}),[n,t,s]),[,d]=(0,Pt().V$)((async e=>{if(e)if(function(e,t){const n=Lt(e),i=Lt(t);return void 0!==i&&(void 0===n||n>i)}(Ot(o),e)){const{accept:t}=await z().Gh({message:s.formatMessage(Ft.confirmationModalExplanation),description:s.formatMessage(Ft.confirmationModalImmediateEffect),icon:(0,he().trashIcon)({width:24,height:24})});t&&l(e)}else l(e)}),[o,s,l]);return(0,v.jsx)(bt().A,{type:"dropdown",currentOption:Ot(o),options:Bt,onSelectOption:d,title:(0,v.jsx)(M().sA,{...zt.meetingNotesAutomaticTranscriptDeletionHeader}),caption:(0,v.jsx)(M().sA,{...zt.meetingNotesAutomaticTranscriptDeletionDescription}),badge:(0,v.jsx)(It().E,{color:"gray",content:(0,v.jsx)(M().sA,{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionRetentionTriggerTime",defaultMessage:"Runs daily at {retentionTriggerTimeUserLocale}",values:{retentionTriggerTimeUserLocale:a}})})})}const Rt=(0,M().YK)({eligible_for_upgrade:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to set transcript auto-deletion timing."},eligible_for_trial:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to set transcript auto-deletion timing."},sales_eligible:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to set transcript auto-deletion timing"},sales_assisted:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to set transcript auto-deletion timing"},eligible_to_request:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to set transcript auto-deletion timing"},not_eligible:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to set transcript auto-deletion timing"},request_pending:{id:"aiSettings.meetingNotesAutomaticTranscriptDeletionUpgradeMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to set transcript auto-deletion timing"}});function Et(e){var t;const{spaceStore:n}=e,i=(0,r().v3)(),s=n.id,o=(0,Oe()._X)({name:"ai_meeting_notes_custom_transcript_retention",spaceId:s,userId:null===(t=i.currentUser)||void 0===t?void 0:t.id}),a=(0,c().K8)((()=>{var e;return null===(e=n.getSettings())||void 0===e?void 0:e.purge_transcripts_delay_seconds}),[n]),l=null==o?void 0:o.upsell;return(0,v.jsx)(bt().A,{type:"dropdown",currentOption:Ot(a),options:Bt,onSelectOption:()=>{},disabled:!0,title:(0,v.jsx)(M().sA,{...zt.meetingNotesAutomaticTranscriptDeletionHeader}),upsellOptions:l?{upsell:l,analyticsName:"ai_meeting_notes_custom_transcript_retention",customMessages:Rt}:void 0})}const Ut=(0,M().YK)({meetingNotesSettingsHeader:{id:"aiSettings.meetingNotesSettingsHeader",defaultMessage:"AI Meeting Notes"},meetingNotesSettingsDescription:{id:"aiSettings.meetingNotesSettingsDescription",defaultMessage:"When enabled, all members can access the AI Meeting Notes block to automatically create transcripts and summaries of their meetings. <learnmore>Learn more</learnmore>"},meetingNotesWorkspaceAvailabilityLabel:{id:"aiSettings.meetingNotesWorkspaceAvailability.label",defaultMessage:"Workspace availability"},meetingNotesWorkspaceAvailabilityDescription:{id:"aiSettings.meetingNotesWorkspaceAvailability.description",defaultMessage:"Allow everyone in your workspace to access AI Meeting Notes."},meetingNotesSaveLocalRecordingsLabel:{id:"aiSettings.meetingNotesSaveLocalRecordings.label",defaultMessage:"Store audio locally"},meetingNotesSaveLocalRecordingsDescription:{id:"aiSettings.meetingNotesSaveLocalRecordings.description",defaultMessage:"Allow members to temporarily store a local, on-device copy of their meeting audio for added reliability. <learnmore>Learn more</learnmore>"},meetingNotesDefaultDatabaseLabel:{id:"aiSettings.meetingNotesDefaultDatabase.label",defaultMessage:"Default meetings database"},meetingNotesDefaultDatabaseDescription:{id:"aiSettings.meetingNotesDefaultDatabase.description",defaultMessage:"Link or create a new database to store new AI meeting notes."},hideMeetingsTabLabel:{id:"aiSettings.hideMeetingsTab.label",defaultMessage:"Hide meetings tab"},hideMeetingsTabDescription:{id:"aiSettings.hideMeetingsTab.description",defaultMessage:"Hide the meetings tab from the sidebar."}});function Vt(e){var t,n;const{spaceStore:s,headingMessage:a}=e,l=(0,r().v3)(),d=(0,Q().J)(),u=(0,o().X)("meeting_notes_entrypoints_v2"),p=(0,o().X)("meeting_notes_page"),g=s.id,m=d,h=(0,o().X)("meeting_notes_save_local_recordings")&&d,f=u,y=p,x="available"===(null===(t=(0,Oe()._X)({name:"ai_meeting_notes_custom_transcript_retention",spaceId:g,userId:null===(n=l.currentUser)||void 0===n?void 0:n.id}))||void 0===t?void 0:t.type),S=(0,o().X)("automated_transcript_deletion")&&d,b=(0,c().O$)(Z().AppStoreSidebarSpaceViewStore),{meetingNotesEnabled:A,meetingNotesSaveLocalRecordingsEnabled:j}=(0,c().K8)((()=>{const e=s.getModel();return e?{meetingNotesEnabled:e.isTranscriptionEnabled(),meetingNotesSaveLocalRecordingsEnabled:e.isMeetingNotesSaveLocalRecordingsEnabled()}:{meetingNotesEnabled:!1,meetingNotesSaveLocalRecordingsEnabled:!1}}),[s]),{defaultMeetingNotesLocationBlockId:_,hideMeetingsTab:C}=(0,c().K8)((()=>{var e;const t=null==b?void 0:b.getSettings();return{defaultMeetingNotesLocationBlockId:null==t||null===(e=t.default_meeting_notes_location)||void 0===e||null===(e=e.block)||void 0===e?void 0:e.id,hideMeetingsTab:(null==t?void 0:t.hide_meetings_tab)??!1}}),[b]),w=(0,i.useCallback)((()=>{E().createAndCommit({userAction:"AiSettings.toggleTranscription",environment:l,canUndo:!1,perform:e=>{F().zv({store:s.getSettingsStore(),transaction:e,data:{disable_transcription:A}})}})}),[A,s,l]),k=(0,i.useCallback)((()=>{E().createAndCommit({userAction:"AiSettings.toggleSaveLocalRecordings",environment:l,canUndo:!1,perform:e=>{F().zv({store:s.getSettingsStore(),transaction:e,data:{disable_meeting_notes_save_local_recordings:j}})}})}),[j,s,l]),I=(0,i.useCallback)((()=>{b&&E().createAndCommit({userAction:"AiSettings.toggleHideMeetingsTab",environment:l,canUndo:!1,perform:e=>{_t().AG(b,e,{hide_meetings_tab:!C})}})}),[C,b,l]),T=(0,i.useCallback)((()=>{b&&E().createAndCommit({userAction:"AiSettings.removeDefaultMeetingNotesLocation",environment:l,canUndo:!1,perform:e=>{E().applyOperation({store:b,operation:{pointer:b.pointer,path:["settings","default_meeting_notes_location"],command:"set",args:void 0},transaction:e})}})}),[l,b]),P=(0,i.useCallback)((e=>{if(!b)return;const t={table:"block",id:e.id},n=e.collectionId?{table:"collection",id:e.collectionId}:void 0;E().createAndCommit({userAction:"AiSettings.setDefaultMeetingNotesLocation",environment:l,canUndo:!1,perform:e=>{E().applyOperation({store:b,operation:{pointer:b.pointer,path:["settings","default_meeting_notes_location"],command:"set",args:{block:t,collection:n}},transaction:e})}})}),[l,b]);const N=m||h||f||S||y;return(0,v.jsxs)(v.Fragment,{children:[a&&N?(0,v.jsx)(St().A,{divider:"full",hasMarginTop:!0,children:(0,v.jsx)(M().sA,{...a})}):void 0,m?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(bt().A,{type:"toggle",isOn:A,onToggle:w,title:(0,v.jsx)(M().sA,{...u?Ut.meetingNotesWorkspaceAvailabilityLabel:Ut.meetingNotesSettingsHeader}),caption:(0,v.jsx)(M().sA,{...u?Ut.meetingNotesWorkspaceAvailabilityDescription:Ut.meetingNotesSettingsDescription,values:{learnmore:e=>(0,v.jsx)(xt().A,{href:(0,Ct().zv)(),external:!0,onClick:e=>e.stopPropagation(),children:e})}})}),(0,v.jsx)(ft().A,{size:8})]}):void 0,h?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(bt().A,{type:"toggle",isOn:j,onToggle:k,title:(0,v.jsx)(M().sA,{...Ut.meetingNotesSaveLocalRecordingsLabel}),caption:(0,v.jsx)(M().sA,{...Ut.meetingNotesSaveLocalRecordingsDescription,values:{learnmore:e=>(0,v.jsx)(xt().A,{href:(0,Ct().HQ)(),external:!0,onClick:e=>e.stopPropagation(),children:e})}})}),(0,v.jsx)(ft().A,{size:8})]}):void 0,y?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(bt().A,{type:"toggle",isOn:C,onToggle:I,title:(0,v.jsx)(M().sA,{...Ut.hideMeetingsTabLabel}),caption:(0,v.jsx)(M().sA,{...Ut.hideMeetingsTabDescription})}),(0,v.jsx)(ft().A,{size:8})]}):void 0,f?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(bt().A,{type:"custom",title:(0,v.jsx)(M().sA,{...Ut.meetingNotesDefaultDatabaseLabel}),caption:(0,v.jsx)(M().sA,{...Ut.meetingNotesDefaultDatabaseDescription}),customButton:(0,v.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4},children:(0,v.jsx)(kt().B,{value:_,onChange:P,hidePages:!0,showCollections:!0,searchOptions:{source:"ai_meeting_notes_location_picker",requireEditPermissions:!1},renderSections:function(e){return _?(e.push({key:"customFilingLocationSettingActions",items:[{key:"removeFilingLocationSetting",action:()=>T(),render:e=>(0,v.jsx)(wt().A,{...e,svg:jt().trashSmallIcon,isRed:!0,title:(0,v.jsx)(M().sA,{id:"aiSettings.meetingNotesDefaultDatabase.remove",defaultMessage:"Remove"})})}],render:e=>(0,v.jsx)(oe().A,{...e,topBorder:!0})}),e):e},peopleBlocksToInclude:"none"})})}),(0,v.jsx)(ft().A,{size:8})]}):void 0,S?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ft().A,{size:8}),x?(0,v.jsx)(Wt,{spaceStore:s}):(0,v.jsx)(Et,{spaceStore:s}),(0,v.jsx)(ft().A,{size:8})]}):void 0]})}var Kt=()=>n(209660),qt=()=>n(219348);const Ht=n.p+"d81827135b71fcf9.png";var Yt=()=>n(601751);const Gt=(0,M().YK)({personalizationHeader:{id:"aiSettings.personalizationHeader",defaultMessage:"Personalization"},agentPersonalizationButton:{id:"aiSettings.agentPersonalizationButton",defaultMessage:"Edit"},agentPersonalizationSubtitle:{id:"aiSettings.agentPersonalizationSubtitle",defaultMessage:"Pick a name, choose an accessory, and set how Notion AI talks and helps you. Start from a template or build your own style."}});function Jt(){const e=(0,l().IS)((e=>({personalizationCard:{display:"flex",alignItems:"center",borderRadius:8,marginBottom:16,flexWrap:"wrap",gap:24,minWidth:200},personalizationContent:{display:"flex",flexDirection:"column",gap:8,flex:1,padding:16},personalizationSubtitle:{maxWidth:400},personalizationImage:{width:197,maxWidth:"100%",height:"auto",borderRadius:4}})),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{divider:"full",hasMarginTop:!0,children:(0,v.jsx)(M().sA,{...Gt.personalizationHeader})}),(0,v.jsxs)("div",{style:e.personalizationCard,children:[(0,v.jsxs)("div",{style:e.personalizationContent,children:[(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",style:e.personalizationSubtitle,children:(0,v.jsx)(M().sA,{...Gt.agentPersonalizationSubtitle})}),(0,v.jsx)("div",{style:{marginTop:8},children:(0,v.jsx)(u().A,{onClick:()=>{qt().cP({store:Yt().r,from:"ai_settings",shouldSetSeenPersonalizationSettingsModal:!1}),Kt().os()},children:(0,v.jsx)(M().sA,{...Gt.agentPersonalizationButton})})})]}),(0,v.jsx)("img",{src:Ht,alt:"",style:e.personalizationImage})]})]})}const $t=(0,M().YK)({aiWebSearchSettingsHeader:{id:"aiSettings.aiWebSearchSettingsHeader",defaultMessage:"AI Web Search"},aiWebSearchGlobalToggleLabel:{id:"aiSettings.aiWebSearch.globalToggleLabel",defaultMessage:"Enable web search for workspace"},aiWebSearchGlobalToggleCaption:{id:"aiSettings.aiWebSearch.globalToggleCaption",defaultMessage:"Allow AI to search the web for up-to-date information when answering questions."},aiWebSearchZeroRetentionTooltip:{id:"aiSettings.aiWebSearch.zeroRetentionTooltip",defaultMessage:"AI web search is disabled for HIPAA workspaces."},turnOffAiWhenSubscribedToAiWarning:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."},turnOffAiWhenSubscribedToAccept:{id:"spaceBasicSettings.aiFeature.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"},enterpriseAiConnectorsDisabledTooltip:{id:"aiSettings.aiConnectors.enterpriseAiConnectorsDisabledTooltip",defaultMessage:"This connector is only available on the Enterprise plan"},personalAiConnectorsDisabledTooltip:{id:"aiSettings.aiConnectors.personalAiConnectorsDisabledTooltip",defaultMessage:"Your workspace is already connected to {workspaceConnector}"},personalAiConnectorsHeader:{id:"aiSettings.aiConnectors.personalAiConnectorsHeader",defaultMessage:"Notion apps"},personalAiConnectorsDescription:{id:"aiSettings.aiConnectors.personalAiConnectorsDescription",defaultMessage:"Connect your personal knowledge across your Notion apps."},workspaceAiConnectorsHeader:{id:"aiSettings.aiConnectors.workspaceAiConnectorsHeader",defaultMessage:"Workspace AI Connectors"},workspaceAiConnectorsDescription:{id:"aiSettings.aiConnectors.workspaceAiConnectorsDescription",defaultMessage:"Workspace owners can connect all your team’s knowledge, across all apps you use for work."},workspaceAiConnectorsDescriptionWithLearnMore:{id:"aiSettings.aiConnectors.workspaceAiConnectorsDescriptionWithLearnMore",defaultMessage:"Workspace owners can connect all your team’s knowledge, across all apps you use for work. <learnmore>Learn more</learnmore>"},connectedAppsLabel:{id:"aiSettings.aiConnectors.connectedAppsLabel",defaultMessage:"Connected"},aiLeapLabel:{id:"spaceBasicSettings.aiLeap.label",defaultMessage:"Share data to improve Notion AI"},aiLeapDescription:{id:"spaceBasicSettings.aiLeap.description",defaultMessage:"Help improve Notion’s AI models by allowing data from across this workspace to be shared with Notion. By enabling AI LEAP (Learning and Early Access Program) you are agreeing to the <inlinelink>Notion AI LEAP Supplementary Terms</inlinelink>. <learnmore>Learn more</learnmore>."},aiLeapDescriptionWithoutLearnMore:{id:"spaceBasicSettings.aiLeap.descriptionWithoutLearnMore",defaultMessage:"Help improve Notion’s AI models by allowing data from across this workspace to be shared with Notion. By enabling AI LEAP (Learning and Early Access Program) you are agreeing to the <inlinelink>Notion AI LEAP Supplementary Terms</inlinelink>."},aiLeapShortDescription:{id:"spaceBasicSettings.aiLeap.shortDescription",defaultMessage:"Help improve Notion AI by allowing data from this workspace to be shared with Notion. By enabling the Learning and Early Access Program you are agreeing to the <inlinelink>Supplementary Terms</inlinelink>. <learnmore>Learn more</learnmore>."},aiLeapShortDescriptionWithoutLearnMore:{id:"spaceBasicSettings.aiLeap.shortDescriptionWithoutLearnMore",defaultMessage:"Help improve Notion AI by allowing data from this workspace to be shared with Notion. By enabling the Learning and Early Access Program you are agreeing to the <inlinelink>Supplementary Terms</inlinelink>."},aiConnectedAppsSettingsButton:{id:"aiSettings.aiConnectedApps.settingsButton",defaultMessage:"Settings"},aiConnectedAppsConnectedStatus:{id:"aiSettings.aiConnectedApps.connectedStatus",defaultMessage:"Connected"},aiConnectedAppsConnectingStatus:{id:"aiSettings.aiConnectedApps.connectingStatus",defaultMessage:"Connecting... Could take up to {hours} hours"},aiConnectedAppsConnectingStatusWithProgress:{id:"aiSettings.aiConnectedApps.connectingStatusWithProgress",defaultMessage:"Connecting... {progress}% complete"},aiConnectedAppsDisconnectingStatus:{id:"aiSettings.aiConnectedApps.disconnectingStatus",defaultMessage:"Disconnecting..."},aiConnectorsSettingsHeader:{id:"aiSettings.aiConnectorsSettingsHeader",defaultMessage:"AI Connectors"},aiSettingsMeetingNotesHeader:{id:"aiSettings.meetingNotesHeader",defaultMessage:"AI Meeting Notes"},customAgentCreationHeader:{id:"aiSettings.customAgentCreationHeader",defaultMessage:"Agents"},customAgentCreationLabel:{id:"aiSettings.customAgentCreation.label",defaultMessage:"Who can create agents"},customAgentCreationCaption:{id:"aiSettings.customAgentCreation.caption",defaultMessage:"Control who can create AI agents in this workspace"},customAgentCreationOptionAllMembers:{id:"aiSettings.customAgentCreation.option.allMembers",defaultMessage:"All workspace members"},customAgentCreationOptionOwnersOnly:{id:"aiSettings.customAgentCreation.option.ownersOnly",defaultMessage:"Workspace owners only"},customAgentCreationOptionCustomOwners:{id:"aiSettings.customAgentCreation.option.customOwners",defaultMessage:"Custom + Workspace Owners"},permissionGroupCustomPoliciesHeader:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.header",defaultMessage:"Custom Permissions"},permissionGroupCustomPoliciesCaption:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.caption",defaultMessage:"Choose which permission groups can create agents"},permissionGroupCustomPoliciesSearchPlaceholder:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.searchPlaceholder",defaultMessage:"Search groups by name..."},permissionGroupCustomPoliciesNoResults:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.noResults",defaultMessage:"No groups found matching ‘{searchQuery}’"},permissionGroupCustomPoliciesNoGroups:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.noGroups",defaultMessage:"No permission groups available in this workspace."},permissionGroupCustomPoliciesGroupCount:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.groupCount",defaultMessage:"{count, plural, =1 {# group} one {# group} other {# groups}}"},permissionGroupCustomPoliciesFilteredGroupCount:{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.filteredGroupCount",defaultMessage:"{filteredCount} of {totalCount, plural, =1 {# group} one {# group} other {# groups}}"},aiFeatureLabel:{id:"spaceBasicSettings.aiFeature.label",defaultMessage:"Enable Notion AI"},aiFeatureCaption:{id:"spaceBasicSettings.aiFeature.ga.caption",defaultMessage:"Enable to provide AI-powered functionality for all members of your workspace. By enabling Notion AI, you are agreeing to the <inlinelink>Notion AI Supplementary Terms</inlinelink>"},aiFeatureShortCaption:{id:"spaceBasicSettings.aiFeature.ga.shortCaption",defaultMessage:"Enable AI for all members of your workspace, agreeing to the <inlinelink>Notion AI Terms</inlinelink>"},learnMore:{id:"spaceBasicSettings.aiFeature.learnMore",defaultMessage:"Learn more"}}),Qt=(0,M().YK)({slack_select_channels:{id:"aiSettings.aiConnectedApps.slackSelectChannels",defaultMessage:"Select channels"},microsoft_teams_select_teams:{id:"aiSettings.aiConnectedApps.microsoftTeamsSelectTeams",defaultMessage:"Select teams"},sharepoint_select_sites:{id:"aiSettings.aiConnectedApps.sharepointSelectSites",defaultMessage:"Select sites"},slack_re_auth:{id:"aiSettings.aiConnectedApps.slackReAuth",defaultMessage:"Login required"},slack_v2_user_connection:{id:"aiSettings.aiConnectedApps.slackV2UserConnection",defaultMessage:"Login required"},github_re_auth:{id:"aiSettings.aiConnectedApps.githubReAuth",defaultMessage:"Login required"},jira_connection_pending:{id:"aiSettings.aiConnectedApps.jiraConnectionPending",defaultMessage:"Finish setup"},jira_connect_user:{id:"aiSettings.aiConnectedApps.jiraConnectUser",defaultMessage:"Login required"},jira_select_projects:{id:"aiSettings.aiConnectedApps.jiraSelectProjects",defaultMessage:"Select projects"},jira_migrate:{id:"aiSettings.aiConnectedApps.jiraMigrate",defaultMessage:"Update"},slack_migrate:{id:"aiSettings.aiConnectedApps.slackMigrate",defaultMessage:"Update"},linear_re_auth:{id:"aiSettings.aiConnectedApps.linearReAuth",defaultMessage:"Login required"},discord_re_auth:{id:"aiSettings.aiConnectedApps.discordReAuth",defaultMessage:"Login required"},salesforce_re_auth:{id:"aiSettings.aiConnectedApps.salesforceReAuth",defaultMessage:"Login required"},google_drive_connection_pending:{id:"aiSettings.aiConnectedApps.googleDriveConnectionPending",defaultMessage:"Finish setup"},asana_re_auth:{id:"aiSettings.aiConnectedApps.asanaReAuth",defaultMessage:"Login required"}}),Zt=(0,M().YK)({slack_select_channels:{id:"aiSettings.aiConnectedApps.slackSelectChannelsNonAdminTooltip",defaultMessage:"Your workspace owner needs to select channels"},microsoft_teams_select_teams:{id:"aiSettings.aiConnectedApps.microsoftTeamsSelectTeamsNonAdminTooltip",defaultMessage:"Your workspace owner needs to select teams"},sharepoint_select_sites:{id:"aiSettings.aiConnectedApps.sharepointSelectSitesNonAdminTooltip",defaultMessage:"Your workspace owner needs to select sites"},jira_connection_pending:{id:"aiSettings.aiConnectedApps.jiraConnectionPendingNonAdminTooltip",defaultMessage:"Your workspace owner needs to finish setup"},jira_select_projects:{id:"aiSettings.aiConnectedApps.jiraSelectProjectsNonAdminTooltip",defaultMessage:"Your workspace owner needs to select projects"},jira_migrate:{id:"aiSettings.aiConnectedApps.jiraMigrateNonAdminTooltip",defaultMessage:"Your workspace owner needs to update Jira connector"},slack_migrate:{id:"aiSettings.aiConnectedApps.slackMigrateNonAdminTooltip",defaultMessage:"Your workspace owner needs to update Slack connector"},google_drive_connection_pending:{id:"aiSettings.aiConnectedApps.googleDriveConnectionPendingNonAdminTooltip",defaultMessage:"Your workspace owner needs to finish setup"}}),Xt=(0,M().YK)({slack_migrate:{id:"aiSettings.aiConnectedApps.slackMigrateAdminTooltip",defaultMessage:"Update the Slack AI Connector to enable answers from private channels and messages for your workspace. Every user must authenticate."}});function en({isUpgradeSystemEnabled:e,securitySettingsStore:t,spaceStore:n,useShortDescription:i}){const s=(0,r().v3)(),o=(0,c().K8)((()=>Boolean(t.state.enableAiTraining)),[t]);return(0,v.jsx)(bt().A,{type:"toggle",isOn:o,onToggle:()=>{W().X(s,{securitySettingsStore:t,spaceStore:n,fields:{enableAiTraining:!o}})},title:(0,v.jsxs)(d().Y1,{direction:"horizontal",gap:3,align:"center-left",children:[(0,v.jsx)(M().sA,{...$t.aiLeapLabel}),e?(0,v.jsx)(Le().W,{tooltipTitle:(0,v.jsx)(M().sA,{...$t.learnMore}),buttonProps:{href:_().JZ.aiLeapProgramFaqs,external:!0}}):void 0]}),caption:(0,v.jsx)(M().sA,{...e?i?$t.aiLeapShortDescriptionWithoutLearnMore:$t.aiLeapDescriptionWithoutLearnMore:i?$t.aiLeapShortDescription:$t.aiLeapDescription,values:{learnmore:e=>(0,v.jsx)(xt().A,{href:_().JZ.aiLeapProgramFaqs,external:!0,onClick:e=>e.stopPropagation(),children:e}),inlinelink:e=>(0,v.jsx)(xt().A,{href:"https://notion.notion.site/0c55d702d0154a788d9e70c4ee396399",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})}function tn({spaceStore:e}){const t=(0,r().v3)(),n=(0,M().tz)(),i=(0,c().K8)((()=>e.getSetting("custom_agent_creation_policy")??"workspace_owners_only"),[e]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(bt().A,{type:"dropdown",currentOption:i,onSelectOption:n=>{try{E().createAndCommit({userAction:"AiSettings.updateCustomAgentCreationPolicy",environment:t,canUndo:!1,perform:t=>{F().zv({store:e.getSettingsStore(),transaction:t,data:{custom_agent_creation_policy:n}})}})}catch(i){}},title:(0,v.jsx)(M().sA,{...$t.customAgentCreationLabel}),caption:(0,v.jsx)(M().sA,{...$t.customAgentCreationCaption}),options:[{key:"all_workspace_members",label:n.formatMessage($t.customAgentCreationOptionAllMembers)},{key:"workspace_owners_only",label:n.formatMessage($t.customAgentCreationOptionOwnersOnly)},{key:"custom",label:n.formatMessage($t.customAgentCreationOptionCustomOwners)}]}),"custom"===i?(0,v.jsx)(sn,{spaceStore:e}):void 0]})}function nn(){const e=(0,l().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.border.primary}`}})),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ft().A,{size:16}),(0,v.jsx)(yt().A,{isSmall:!0,style:{marginBottom:6},children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesHeader})}),(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesCaption})}),(0,v.jsx)(ft().A,{size:12}),(0,v.jsx)(yt().A,{isSmall:!0,style:e.noRowContainer,children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesNoGroups})})]})}function sn({spaceStore:e}){const t=(0,M().tz)(),n=(0,l().DP)(),s=(0,r().v3)(),[o,a]=(0,i.useState)(""),d=(0,c().K8)((()=>De().A.state.permissionGroupsAndMemberCounts.sort(((e,t)=>{const n=e.group.name||"",i=t.group.name||"";return n.localeCompare(i)}))),[]),u=(0,c().K8)((()=>(0,I().Ay)(o,d,(e=>e.group.name||""))),[o,d]),p=(0,i.useCallback)(((t,n)=>{E().createAndCommit({userAction:"AiSettings.updatePermissionGroupAgentPolicy",environment:s,canUndo:!0,perform:i=>{const s=(0,Pe().E)({spaceStore:e,groupId:t}),o={...s.getSettings()||{},can_create_custom_agents:n};R().O1({spacePermissionGroupStore:s,transaction:i,value:{settings:o,last_edited_at:Date.now()}})}})}),[s,e]),m=(0,c().K8)((()=>u.map((e=>{const n=e.group.v("settings"),i=!0===(null==n?void 0:n.can_create_custom_agents);return{id:e.group.group_id,isClickable:!1,groupId:e.group.group_id,groupName:e.group.name||t.formatMessage({id:"spacePermissionsSettings.groupsTab.untitled",defaultMessage:"Untitled"}),memberCount:e.memberCount,group:e.group,currentPolicy:i}}))),[u,t]),h=(0,i.useMemo)((()=>[{id:"name",headerTitle:(0,v.jsx)(M().sA,{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.table.nameColumn",defaultMessage:"Group"}),renderCell:t=>(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,v.jsx)(pt().A,{size:28}),(0,v.jsx)("span",{children:t.groupName}),t.group.icon?(0,v.jsx)(ht().B6,{disabled:!0,bucket:"public",icon:{pointer:e.pointer,icon:t.group.icon},size:18,isEmptyPage:!1,title:t.groupName,style:{marginInlineStart:4}}):void 0]}),widthData:{widthPercent:50,minWidth:150},sortable:!1},{id:"members",headerTitle:(0,v.jsx)(M().sA,{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.table.membersColumn",defaultMessage:"Members"}),renderCell:e=>(0,v.jsx)("span",{style:{color:n.text.secondary,fontSize:"14px"},children:1===e.memberCount?"1 member":`${e.memberCount} members`}),widthData:{widthPercent:25,minWidth:150},sortable:!1},{id:"policy",headerTitle:(0,v.jsx)(M().sA,{id:"aiSettings.customAgentCreation.permissionGroupCustomPolicies.table.policyColumn",defaultMessage:"Agent Creation"}),renderCell:e=>(0,v.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,v.jsx)(bt().A,{type:"toggle",isOn:e.currentPolicy,onToggle:()=>p(e.groupId,!e.currentPolicy)})}),widthData:{widthPercent:25,minWidth:150},sortable:!1}]),[p,n,e.pointer]),f=(0,lt().rC)({columnRenderInfo:h,theme:n,containerMarginTop:12}),y=(0,l().IS)((e=>({searchContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},searchInput:{width:240,maxWidth:"40%"},groupCount:{fontSize:"13px",color:e.text.tertiary},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.border.primary}`}})),[]);return 0===d.length?(0,v.jsx)(nn,{}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ft().A,{size:16}),(0,v.jsx)(St().A,{style:{marginBottom:6},children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesHeader})}),(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesCaption})}),(0,v.jsx)(ft().A,{size:12}),(0,v.jsxs)("div",{style:y.searchContainer,children:[(0,v.jsx)("span",{style:y.groupCount,children:t.formatMessage(u.length===d.length?$t.permissionGroupCustomPoliciesGroupCount:$t.permissionGroupCustomPoliciesFilteredGroupCount,u.length===d.length?{count:d.length}:{filteredCount:u.length,totalCount:d.length})}),(0,v.jsx)("div",{style:y.searchInput,children:(0,v.jsx)(At().nv,{mode:At().Ke.OnChange,query:o,setQueryFilter:a,placeholderText:t.formatMessage($t.permissionGroupCustomPoliciesSearchPlaceholder)})})]}),(0,v.jsx)(lt().WE,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:h,rows:m,styles:f,renderNoRowsComponent:()=>(0,v.jsx)(yt().A,{isSmall:!0,style:y.noRowContainer,children:(0,v.jsx)(M().sA,{...$t.permissionGroupCustomPoliciesNoResults,values:{searchQuery:o.trim()}})})})]})}function on({billingData:e,spaceStore:t,useShortDescription:n}){const i=(0,r().v3)(),o=(0,c().K8)((()=>t.isAiEnabledOnSpace()),[t]);return(0,v.jsx)(bt().A,{type:"toggle",isOn:o,onToggle:async()=>{await async function(e){const{environment:t,billingData:n,spaceStore:i}=e,o=(0,w().a)({billingData:n,experimentService:a().default,spaceId:i.id}),r=i.isAiEnabledOnSpace();if((0,s().u)({environment:t,event:{eventName:"clicked_toggle_notion_ai",eventProperties:{ai_is_enabled:r,has_ai_product:o}}}),r&&o){if(!(await z().Gh({message:Ce().A.formatMessage($t.turnOffAiWhenSubscribedToAiWarning),acceptLabel:Ce().A.formatMessage($t.turnOffAiWhenSubscribedToAccept)})).accept)return void(0,s().u)({environment:t,event:{eventName:"clicked_dismiss_turn_off_notion_ai",eventProperties:{}}});(0,s().u)({environment:t,event:{eventName:"clicked_turn_off_notion_ai_confirmation",eventProperties:{}}})}E().createAndCommit({userAction:"AiSettings.toggleAiFeature",environment:t,canUndo:!1,perform:e=>{"enterprise"===i.getSubscriptionTier()?F().zv({store:i.getSettingsStore(),transaction:e,data:{enable_ai_feature:!r}}):F().zv({store:i.getSettingsStore(),transaction:e,data:{disable_ai_feature:r}})}})}({environment:i,billingData:e,spaceStore:t})},title:(0,v.jsx)(M().sA,{...$t.aiFeatureLabel}),caption:(0,v.jsx)(M().sA,{...n?$t.aiFeatureShortCaption:$t.aiFeatureCaption,values:{inlinelink:e=>(0,v.jsx)(xt().A,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,onClick:e=>e.stopPropagation(),children:e})}})})}function an(e){var t;const{spaceStore:n,billingData:i}=e;return!!n.canAdmin()&&(!!Boolean(null===(t=n.getModel())||void 0===t?void 0:t.isAiLeapEnabledOnSpace())||!(0,C().N8)(i)&&Ne().zD.isWorkspaceLeapEligible({ignoreEnterpriseCheck:!0}))}function rn({connectorType:e}){const t=(0,r().v3)(),[n,s]=(0,i.useState)(!1),o="dark"===(0,l().eP)(),a=(0,Te().L)(),d=(0,c().K8)((()=>null==a?void 0:a.getSubscriptionTier()),[a]),u=(0,c().K8)((()=>{if((0,m().n6)(e)&&"enterprise"!==d&&!Ne().zD.isEnterpriseAiConnectorBypassOn(e))return{enabled:!1,reason:"enterprise_only",message:$t.enterpriseAiConnectorsDisabledTooltip};if((0,m().q1)(e)){const t=(0,U().uV)(e),n=U().w0[t];if((0,Ae().wd)().includes(t))return{enabled:!1,reason:"workspace_connector_already_connected",message:$t.personalAiConnectorsDisabledTooltip,messageValues:{workspaceConnector:n}}}return{enabled:!0}}),[e,d]),g=(0,l().IS)((e=>({contentWrapper:{display:"flex",flexDirection:"column",gap:4,height:"auto",borderRadius:4,padding:12,...u.enabled?{boxShadow:e.shadowXS,opacity:1}:{boxShadow:e.shadow2XS,opacity:.4,background:e.background.tertiary}},topRow:{display:"flex",justifyContent:"space-between",width:"100%"},iconTitleWrapper:{display:"flex",alignItems:"center",gap:4,width:"fit-content",maxWidth:"calc(100% - 24px)"},iconWrapper:{width:24,height:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center"},title:{fontSize:P().J.UIRegular.desktop,color:e.text.primary,fontWeight:P().Wy.medium,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",alignItems:"center",gap:2},fakePlusIconButton:{width:24,height:24,flexShrink:0,borderRadius:"50%",backgroundColor:n?e.palette.blue[100]:e.palette.blue[50],display:"flex",alignItems:"center",justifyContent:"center"},fakePlusIcon:{fill:e.palette.uiBlue[600],width:16,height:16},betaBadge:{marginInlineStart:0,alignSelf:"flex-start",marginTop:4}})),[n,u.enabled]),f=(0,Ie().r)(),y=(0,Oe()._X)({name:"ai_connectors",spaceId:f,userId:t.currentUser.id});return(0,v.jsx)(vt().A,{disableTooltip:u.enabled,alignment:"start",renderTooltip:()=>u.enabled?null:(0,v.jsx)("div",{style:{padding:2,maxWidth:160,whiteSpace:"normal",overflow:"wrap"},children:(0,v.jsx)(M().sA,{...u.message,values:u.messageValues})}),render:n=>(0,v.jsx)(p().p,{disabled:!y||!u.enabled,onClick:()=>{y&&function(e,t,n){(0,K().pp)({connector:e,environment:t,analyticsFrom:"ai_workspace_settings_connector_cards",connectorsFeatureAvailability:n})}(e,t,y)},style:g.contentWrapper,...n,children:(0,v.jsxs)("div",{style:g.topRow,children:[(0,v.jsxs)("div",{style:g.iconTitleWrapper,children:[(0,v.jsx)("div",{style:g.iconWrapper,children:"sharepoint"===e?(0,v.jsx)(de().E,{size:24}):(0,v.jsx)(mt().Q,{iconGroup:h().G[e],variantName:o?"darkMode":"default"})}),(0,v.jsx)("div",{style:g.title,children:U().w0[e]}),(0,U().Bm)(e)?void 0:(0,v.jsx)(dt().A,{style:g.betaBadge})]}),u.enabled?(0,v.jsx)("div",{style:g.fakePlusIconButton,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:(0,j().plusFillIcon)(g.fakePlusIcon)}):void 0]})})})}function cn({availableConnectors:e}){const[t,n]=(0,Me().z)(),s=(0,i.useMemo)((()=>n<250?1:Math.min(3,Math.floor(n/250))),[n]);return(0,v.jsx)("div",{ref:t,style:{display:"grid",gridTemplateColumns:`repeat(${s}, 1fr)`,gap:8},children:e.map((e=>(0,v.jsx)(rn,{connectorType:e},e)))})}function ln({availableConnectors:e}){return 0===e.length?null:(0,v.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,v.jsx)(cn,{availableConnectors:e})})}function dn({connectorType:e,connectionStatus:t,showTopBorder:n}){const i=(0,M().tz)(),s="dark"===(0,l().eP)(),o=(0,l().IS)((e=>({contentWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0px",borderBottom:`1px solid ${e.border.secondary}`,borderTop:n?`1px solid ${e.border.secondary}`:"none",borderRadius:4},leftContentWrapper:{display:"flex",alignItems:"center",gap:10},rightContentWrapper:{display:"flex",alignItems:"center",gap:12},iconWrapper:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center"},titleAndExternalSourceNameWrapper:{display:"flex",flexDirection:"column",gap:0},title:{display:"flex",alignItems:"center",gap:4,fontSize:P().J.UIRegular.desktop,fontWeight:P().Wy.medium,color:e.text.primary},externalSourceName:{fontSize:P().J.UISmall.desktop,fontWeight:P().Wy.regular,color:e.text.secondary}})),[n]);return(0,v.jsxs)("div",{style:o.contentWrapper,children:[(0,v.jsxs)("div",{style:o.leftContentWrapper,children:[(0,v.jsx)("div",{style:o.iconWrapper,children:"sharepoint"===e?(0,v.jsx)(de().E,{size:24}):(0,v.jsx)(mt().Q,{iconGroup:h().G[e],variantName:s?"darkMode":"default"})}),(0,v.jsxs)("div",{style:o.titleAndExternalSourceNameWrapper,children:[(0,v.jsxs)("div",{style:o.title,children:[U().w0[e],(0,U().Bm)(e)?void 0:(0,v.jsx)(dt().A,{})]}),t.externalSourceName?(0,v.jsx)("div",{style:o.externalSourceName,children:t.externalSourceName}):null]})]}),(0,v.jsxs)("div",{style:o.rightContentWrapper,children:[(0,v.jsx)(mn,{connectorType:e,connectionStatus:t}),(0,v.jsx)(ut().A,{popupType:ut().z.Popup,renderOrigin:e=>(0,v.jsx)(gt().A,{...e,style:{width:24,height:24},iconStyle:{width:20,height:20},icon:A().gearIcon,ariaLabel:i.formatMessage($t.aiConnectedAppsSettingsButton)}),render:n=>(0,v.jsx)(un,{connectorType:e,connectionStatus:t,buttonPopupParent:n})})]})]})}function un(e){const{connectorType:t,connectionStatus:n,buttonPopupParent:i}=e,s=(0,c().K8)((()=>xe().E.isJiraForgeConnectionDone()),[]);return"slack"===t?(0,v.jsx)(be().SlackConnectionOptions,{parent:i}):"jira"===t?s?(0,v.jsx)(Se,{parent:i}):(0,v.jsx)(ve,{parent:i}):(0,v.jsx)(ce,{connector:t,parent:i,connectionStatus:n})}function pn(e){return"github"===e||"microsoft-teams"===e?72:36}const gn=["slack_select_channels","microsoft_teams_select_teams","sharepoint_select_sites","jira_connection_pending","jira_select_projects","jira_migrate","slack_migrate","google_drive_connection_pending"];function mn(e){const{connectorType:t,connectionStatus:n}=e,i=(0,r().v3)(),o=(0,Ie().r)(),a=(0,Q().J)(),c=(0,l().IS)((e=>({connectedStatusWrapper:{display:"flex",gap:4,flexWrap:"nowrap"},connectedStatusIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},connectedStatusIcon:{width:16,height:16,fill:e.icon.tertiary},connectedStatusMessage:{fontSize:P().J.UISmall.desktop,fontWeight:P().Wy.regular,color:e.text.secondary},connectingStatusWrapper:{display:"flex",gap:4,flexWrap:"nowrap"},connectingStatusIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},connectingStatusMessage:{fontSize:P().J.UISmall.desktop,fontWeight:P().Wy.regular,color:e.text.secondary},connectingStatusIcon:{width:16,height:16,fill:e.palette.uiBlue[600]}})),[]);if("connected"===n.type)return(0,v.jsxs)("div",{style:c.connectedStatusWrapper,children:[(0,v.jsx)("div",{style:c.connectedStatusIconWrapper,children:(0,S().checkmarkFillSmallIcon)(c.connectedStatusIcon)}),(0,v.jsx)("div",{style:c.connectedStatusMessage,children:(0,v.jsx)(M().sA,{...$t.aiConnectedAppsConnectedStatus})})]});if("in_progress"===n.type)return(0,v.jsxs)("div",{style:c.connectingStatusWrapper,children:[(0,v.jsx)("div",{style:c.connectingStatusIconWrapper,children:x(c.connectingStatusIcon)}),(0,v.jsx)("div",{style:c.connectingStatusMessage,children:n.ingestionProgress?(0,v.jsx)(M().sA,{...$t.aiConnectedAppsConnectingStatusWithProgress,values:{progress:n.ingestionProgress}}):(0,v.jsx)(M().sA,{...$t.aiConnectedAppsConnectingStatus,values:{hours:pn(t)}})})]});if("action_required"===n.type){const e=(0,T().Xk)(gn,n.action)&&!a,t=a&&(0,T().O)(Xt,n.action);return(0,v.jsx)(vt().A,{disableTooltip:!(e||t),renderTooltip:()=>{const{action:e}=n;if(a&&(0,T().O)(Xt,e)){const t=Xt[e];return(0,v.jsx)(M().sA,{...t})}if((0,T().O)(Zt,e)){const t=Zt[e];return(0,v.jsx)(M().sA,{...t})}return null},render:t=>(0,v.jsx)(u().A,{...t,iconLeading:{icon:b().exclamationMarkTriangleFillIcon,colorVariant:"accentPrimary",colorPalette:"red",size:"sm"},disabled:e,onClick:()=>{o&&function(e){const{action:t,environment:n,spaceId:i,analyticsFrom:o}=e;"slack_select_channels"===t?O().nh():"microsoft_teams_select_teams"===t?L().v():"sharepoint_select_sites"===t?L().o():"jira_select_projects"===t?B().zr():"slack_re_auth"===t?(0,N().t)({connector:"slack",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):"slack_v2_user_connection"===t?O().JR({environment:n,spaceId:i}):"github_re_auth"===t?(0,N().t)({connector:"github",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):"jira_connection_pending"===t?B().bS({environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t,sessionId:fe().y.state.sessionId}}):"jira_connect_user"===t?B().ol({environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t,sessionId:fe().y.state.sessionId}}):"jira_migrate"===t?B().G({analyticsFrom:o,screenToShow:"introduction"}):"slack_migrate"===t?O().FM({environment:n,spaceId:i}):"linear_re_auth"===t?(0,N().t)({connector:"linear",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):"discord_re_auth"===t?(0,N().t)({connector:"discord",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):"salesforce_re_auth"===t?(0,N().t)({connector:"salesforce",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):"google_drive_connection_pending"===t?function(e){const{environment:t,spaceId:n,analyticsProperties:i}=e;n&&((0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:i.buttonName,integration_type:"google-drive",setup_session_id:i.sessionId,from:i.analyticsFrom}}}),(0,D().navigateToAIConnectorOnboarding)({connector:"google-drive",analyticsFrom:i.analyticsFrom,sessionId:i.sessionId}))}({environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t,sessionId:Be().d.state.sessionId}}):"asana_re_auth"===t?(0,N().t)({connector:"asana",environment:n,spaceId:i,analyticsProperties:{analyticsFrom:o,buttonName:t}}):(0,T().HB)(t)}({action:n.action,environment:i,spaceId:o,analyticsFrom:"ai_workspace_settings"})},children:(0,v.jsx)(M().sA,{...Qt[n.action]})})})}if("disconnecting"===n.type)return(0,v.jsxs)("div",{style:c.connectingStatusWrapper,children:[(0,v.jsx)("div",{style:c.connectedStatusIconWrapper,children:x(c.connectingStatusIcon)}),(0,v.jsx)("div",{style:c.connectingStatusMessage,children:(0,v.jsx)(M().sA,{...$t.aiConnectedAppsDisconnectingStatus})})]});(0,T().HB)(n)}function hn({connectedConnectors:e}){const t=(0,l().IS)((()=>({contentWrapper:{display:"flex",flexDirection:"column"}})),[]);return(0,v.jsx)("div",{style:t.contentWrapper,children:e.map(((e,t)=>(0,v.jsx)(fn,{connectorType:e,showTopBorder:0===t},e)))})}function fn(e){const{connectorType:t,showTopBorder:n}=e,i=(0,c().K8)((()=>(0,$().HF)(t)),[t]);return(0,v.jsx)(dn,{connectorType:t,connectionStatus:i,showTopBorder:n})}function vn(e){const{spaceStore:t,billingData:n,securitySettingsStore:i}=e,s=(0,r().v3)(),a=(0,Q().J)(),l=(0,c().K8)((()=>(0,je().Q)(s)),[s]),d=(0,c().K8)((()=>t.isAiEnabledOnSpace()),[t]),u=(0,c().K8)((()=>an({spaceStore:t,billingData:n})&&d),[t,n,d]),p=d,g=d,m=(0,c().K8)((()=>(0,_e().$6)()),[]),h=(0,o().X)("agent_creation_permissions"),f=(0,c().K8)((()=>(0,k().OX)(t.getSubscriptionTier())),[t]),y=d&&a&&m&&h&&f,x=a&&(l||u),S=(0,c().K8)((()=>d&&(0,Ae().kB)().length>0),[d]),b=d&&a,A=(0,o().X)("upgrade_system_settings"),j=(0,c().K8)((()=>t.getSpaceId()),[t]),_=(0,Oe()._X)({name:"ai_connectors",spaceId:j,userId:s.currentUser.id}),C=Boolean(A&&(null==_?void 0:_.upsell)),w=C?"none":"full";return(0,v.jsxs)(v.Fragment,{children:[x?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{divider:w,fontSize:C?16:void 0,fontWeight:C?P().Wy.medium:void 0,style:C?{marginBottom:16}:{},hasMarginTop:g,children:(0,v.jsx)(M().sA,{...V().D.notionAI})}),A&&null!=_&&_.upsell?(0,v.jsx)("div",{style:{margin:"24px 0"},children:(0,v.jsx)(tt,{upsell:_.upsell})}):void 0,l?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(on,{billingData:n,spaceStore:t,useShortDescription:!0}),(0,v.jsx)(ft().A,{size:16})]}):void 0,u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(en,{isUpgradeSystemEnabled:A,securitySettingsStore:i,spaceStore:t,useShortDescription:!0}),(0,v.jsx)(ft().A,{size:16})]}):void 0]}):void 0,S?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{divider:"full",hasMarginTop:!0,children:(0,v.jsx)(M().sA,{...$t.aiConnectorsSettingsHeader})}),(0,v.jsx)(yn,{isUpgradeSystemEnabled:A,featureAvailability:_})]}):void 0,b?(0,v.jsx)(Sn,{spaceStore:t}):void 0,g?(0,v.jsx)(Jt,{}):void 0,p?(0,v.jsx)(Vt,{spaceStore:t,headingMessage:$t.aiSettingsMeetingNotesHeader}):void 0,y?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{divider:"full",hasMarginTop:!0,children:(0,v.jsx)(M().sA,{...$t.customAgentCreationHeader})}),(0,v.jsx)(tn,{spaceStore:t}),(0,v.jsx)(ft().A,{size:16})]}):void 0]})}function yn(e){const{featureAvailability:t,isUpgradeSystemEnabled:n}=e,{isLoading:i}=(0,q().ts)(void 0,!0),s=(0,c().K8)((()=>(0,Ae().kB)()),[]),o=(0,c().K8)((()=>i?[]:(0,Ae().wd)()),[i]),{availableWorkspaceConnectors:a,availablePersonalConnectors:r,inProgressAndConnectedConnectors:l}=(0,c().K8)((()=>{const e=[],t=[],n=[];for(const i of s){const s=(0,$().HF)(i);if("action_required"===s.type)n.push(i);else if("in_progress"===s.type)n.push(i);else if("disconnecting"===s.type)n.push(i);else if((0,m().q1)(i)){const e=(0,U().uV)(i);o.includes(e)?t.push(i):o.includes(i)?n.push(i):t.push(i)}else o.includes(i)?n.push(i):e.push(i)}return{availableWorkspaceConnectors:e,availablePersonalConnectors:t,inProgressAndConnectedConnectors:n}}),[s,o]);return(0,v.jsxs)(v.Fragment,{children:[l.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(yt().A,{isSmall:!0,style:{marginBottom:6},children:(0,v.jsx)(M().sA,{...$t.connectedAppsLabel})}),(0,v.jsx)(hn,{connectedConnectors:l}),(0,v.jsx)(ft().A,{size:16})]}):void 0,r.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{style:{marginBottom:6},children:(0,v.jsx)(d().Y1,{direction:"horizontal",align:"center-left",gap:3,children:(0,v.jsx)(M().sA,{...$t.personalAiConnectorsHeader})})}),(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",children:(0,v.jsx)(M().sA,{...$t.personalAiConnectorsDescription})}),(0,v.jsx)(ft().A,{size:2}),(0,v.jsx)(ln,{availableConnectors:r}),(0,v.jsx)(ft().A,{size:16})]}):void 0,a.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{style:{marginBottom:6},children:(0,v.jsx)(d().Y1,{direction:"horizontal",align:"center-left",gap:3,children:(0,v.jsxs)(d().Y1,{direction:"horizontal",align:"center-left",gap:3,children:[(0,v.jsx)(M().sA,{...$t.workspaceAiConnectorsHeader}),n?(0,v.jsx)(Le().W,{tooltipTitle:(0,v.jsx)(M().sA,{...$t.learnMore}),buttonProps:{href:(0,we().x)("guides.aiConnectors"),external:!0}}):void 0]})})}),n&&null!=t&&t.upsell?(0,v.jsxs)(d().Y1,{direction:"horizontal",align:"center-left",children:[(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",children:(0,v.jsx)(M().sA,{...$t.workspaceAiConnectorsDescription})}),(0,v.jsx)(ze().R,{source:"business_trial_ai_connectors_upsell",upsell:null==t?void 0:t.upsell,display:"text"})]}):(0,v.jsx)(g().D,{styleKey:"Body-sm/Regular",colorVariant:"secondary",children:(0,v.jsx)(M().sA,{...$t.workspaceAiConnectorsDescriptionWithLearnMore,values:{learnmore:e=>(0,v.jsx)(xt().A,{href:(0,we().x)("guides.aiConnectors"),external:!0,onClick:e=>e.stopPropagation(),children:e})}})}),(0,v.jsx)(ft().A,{size:2}),(0,v.jsx)(ln,{availableConnectors:a}),(0,v.jsx)(ft().A,{size:16})]}):void 0]})}function xn({spaceStore:e,isZeroRetentionEnabled:t}){const n=(0,r().v3)(),s=(0,Q().J)(),o=(0,c().K8)((()=>Boolean(e.getSetting("force_ask_for_confirmation_on_web_open_requests"))),[e]),a=!s||t,l=(0,i.useCallback)((()=>{s&&!t&&E().createAndCommit({userAction:"AiSettings.toggleWebSearch",environment:n,canUndo:!1,perform:t=>{F().zv({store:e.getSettingsStore(),transaction:t,data:{force_ask_for_confirmation_on_web_open_requests:!o}})}})}),[s,n,e,o,t]),d=t?(0,v.jsx)(M().sA,{...$t.aiWebSearchZeroRetentionTooltip}):void 0;return(0,v.jsx)(bt().A,{type:"toggle",isOn:o,onToggle:l,disabled:a,isLocked:t,lockedTooltip:d,title:(0,v.jsx)(M().sA,{defaultMessage:"Require confirmation for web requests",id:"aiSettings.aiForceConfirmationOnWebOpenRequestsToggleLabel"}),caption:(0,v.jsx)(M().sA,{defaultMessage:"Agent might try to load external web pages to get information not available though web search. Require AI to request user confirmation to view any web page.",id:"aiSettings.aiForceConfirmationOnWebOpenRequestsToggleCaption"})})}function Sn({spaceStore:e}){const t=(0,r().v3)(),n=(0,Q().J)(),s=(0,c().K8)((()=>(0,ke().A)(e)),[e]),o=(0,c().K8)((()=>Boolean(e.getSetting("disable_ai_web_search"))),[e]),a=!!s||o,l=!n||s,d=s?(0,v.jsx)(M().sA,{...$t.aiWebSearchZeroRetentionTooltip}):void 0,u=(0,i.useCallback)((()=>{n&&!s&&E().createAndCommit({userAction:"AiSettings.toggleWebSearch",environment:t,canUndo:!1,perform:t=>{F().zv({store:e.getSettingsStore(),transaction:t,data:{disable_ai_web_search:!o}})}})}),[t,e,o,n,s]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(St().A,{divider:"full",hasMarginTop:!0,children:(0,v.jsx)(M().sA,{...$t.aiWebSearchSettingsHeader})}),(0,v.jsx)(bt().A,{type:"toggle",isOn:!a,onToggle:u,disabled:l,isLocked:s,lockedTooltip:d,title:(0,v.jsx)(M().sA,{...$t.aiWebSearchGlobalToggleLabel}),caption:(0,v.jsx)(M().sA,{...$t.aiWebSearchGlobalToggleCaption})}),(0,v.jsx)(ft().A,{size:16}),(0,v.jsx)(xn,{spaceStore:e,isZeroRetentionEnabled:s}),(0,v.jsx)(ft().A,{size:16})]})}},874480:(e,t,n)=>{n.d(t,{Df:()=>v,G:()=>x,R:()=>g,Rr:()=>h,Zh:()=>A,bS:()=>f,ol:()=>m,vq:()=>S,zn:()=>b,zr:()=>y});var i=()=>n(564884),s=()=>n(836095),o=()=>n(206267),a=()=>n(576590),r=()=>n(972435),c=()=>n(479350),l=()=>n(559506),d=()=>n(383466),u=()=>n(471995),p=()=>n(569670);async function g(e){const{environment:t,spaceId:n,jiraApiToken:i,jiraSiteUrl:s}=e,o=await l().callApi({eventName:"authenticateJiraAiConnector",environment:t,data:{spaceId:n,jiraApiToken:i,jiraSiteUrl:s}});return"success"!==o.type?{status:"failed"}:"success"===o.type&&"failed"===o.data.connectionStatus?{status:"failed",errorCode:o.data.errorCode}:{status:"success"}}async function m(e){const{environment:t,spaceId:n,analyticsProperties:o}=e,{analyticsFrom:a,buttonName:r,sessionId:c}=o;(0,i().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:r,integration_type:"jira",setup_session_id:c,from:a}}});const u=await l().callApi({eventName:"getJiraUserAuthUrl",environment:t,data:{spaceId:n,isDesktop:t.device.isElectron,sessionId:c}});"success"===u.type&&(t.device.isElectron?(0,s().P)(u.data.url):d().P(t,{width:800,height:600,url:u.data.url,titleMessage:p().D.jiraAIConnectorOauthPopupTitle}))}async function h(e){const{environment:t,spaceId:n}=e;"failed"!==(await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:"jira"}})).type?(u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Started disconnecting Jira. This can take up to 3 hours.",id:"jira.v2.disconnect.started"}),position:"bottom"}),c().E.setState({...c().E.state,jiraSyncState:"disconnecting",isDisconnecting:!0})):u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.v2.disconnect.failed"})})}function f(e){const{spaceId:t,environment:n,analyticsProperties:s}=e;t&&((0,i().u)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_jira_resume_pending_connection",integration_type:"jira",setup_session_id:s.sessionId,from:s.analyticsFrom}}}),(0,a().navigateToAIConnectorOnboarding)({connector:"jira",analyticsFrom:s.analyticsFrom,sessionId:s.sessionId}))}async function v(e){const{environment:t,spaceId:n}=e,i=await l().callApi({eventName:"getJiraSelection",environment:t,data:{spaceId:n}});if("success"===i.type)return c().E.setState({...c().E.state,syncControl:i.data}),i.data}function y(){c().E.setState({...c().E.state,currentScreen:"connection_complete_screen"})}function x(e){const{analyticsFrom:t,screenToShow:n}=e,i=e.sessionId??o().JW();c().E.setState({...c().E.state,analyticsFrom:t,currentScreen:n,sessionId:i})}async function S(e){const{environment:t,spaceId:n,projectSelection:i}=e,s=await l().callApi({eventName:"setJiraSelection",environment:t,data:{spaceId:n,...i}});var o;return"failed"!==s.type||("NO_CHANGES"===(null===(o=s.error)||void 0===o||null===(o=o.data)||void 0===o||null===(o=o.responseBody)||void 0===o?void 0:o.debugMessage)?(u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"No changes to the selection",id:"jira.v2.project.selection.no_changes"}),position:"bottom"}),!1):(u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.v2.project.selection.failed"}),position:"bottom"}),!1))}async function b(e){const{environment:t,spaceId:n}=e;"failed"!==(await l().callApi({eventName:"startJiraAIV2Editflow",environment:t,data:{spaceId:n}})).type?(u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Editing Jira connection. This can take up to 36 hours.",id:"jira.v2.editflow.started"}),position:"bottom"}),c().E.setState({...c().E.state,jiraSyncState:"editing",jiraSyncProgress:0})):u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.v2.editflow.failed"}),position:"bottom"})}async function A(e){const{environment:t,spaceId:n,analyticsProperties:i}=e,s=await l().callApi({eventName:"startIngestion",environment:t,data:{connector:"jira",spaceId:n,setupSessionId:i.sessionId}});"failed"===s.type||"success"===s.type&&!s.data.success?u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.v2.sync.failed"}),position:"bottom"}):(u().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.v2.sync.started"}),position:"bottom"}),c().E.setState({...c().E.state,jiraSyncState:"in_progress"}))}},917791:(e,t,n)=>{n.d(t,{t:()=>u});var i=()=>n(564884),s=()=>n(836095),o=()=>n(534177),a=()=>n(634877),r=()=>n(993474),c=()=>n(559506),l=()=>n(383466),d=()=>n(569670);async function u(e){const{environment:t,spaceId:n,onAuthSuccess:u,analyticsProperties:p,connector:g}=e,{buttonName:m}=p,h=a().NT[g].state;if((0,i().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:m,integration_type:g,setup_session_id:h.sessionId,from:p.analyticsFrom??h.analyticsFrom}}}),"github"===g){const e=await c().callApi({eventName:"getGithubUserAuthUrl",environment:t,data:{spaceId:n,isDesktop:t.device.isElectron,sessionId:h.sessionId}});"success"===e.type&&(t.device.isElectron?(0,s().P)(e.data.url):(l().P(t,{width:800,height:600,url:e.data.url,titleMessage:d().D.githubAIConnectorOauthPopupTitle}),null==u||u()))}else if("slack"===g){const e=await c().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:t,data:{spaceId:n,isAdminAuth:!1,isDesktopApp:t.device.isElectron,isUserMapping:!0}});"success"===e.type&&(t.device.isElectron?(0,s().P)(e.data.url):await l().P(t,{width:800,height:600,url:e.data.url,titleMessage:d().D.userOverwritePopupTitle}))}else if("linear"===g||"discord"===g||"salesforce"===g){const e=await c().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:t,data:{connector:g,authorizationType:"user",spaceId:n,sessionId:h.sessionId,client:t.device.isElectron?"desktop":"web"}});"success"===e.type&&(t.device.isElectron?(0,s().P)(e.data.authorizationUrl):(l().P(t,{width:800,height:600,url:e.data.authorizationUrl,titleMessage:d().D[`${g}AIConnectorOauthPopupTitle`]}),null==u||u()))}else if("asana"===g){const e=(0,r().K)("asana");await e.authenticate({environment:t,spaceId:n,onAuthSuccess:u})}else(0,o().HB)(g)}},980933:(e,t,n)=>{n.d(t,{n:()=>M});n(944114),n(898992),n(354520),n(672577),n(581454),n(737550);var i=n(296540),s=()=>n(564884),o=()=>n(484714),a=()=>n(56366),r=()=>n(401497),c=()=>n(729108),l=()=>n(98126),d=()=>n(406094),u=()=>n(160432),p=()=>n(187174),g=()=>n(471095),m=()=>n(69708),h=()=>n(284371),f=()=>n(471995),v=()=>n(576590),y=()=>n(802790),x=()=>n(297872),S=()=>n(623580),b=()=>n(676007),A=()=>n(859428),j=()=>n(21140),_=()=>n(152197),C=()=>n(963702),w=()=>n(51218),k=n(474848);function M(){const[e,t]=(0,i.useState)(!0),[n,M]=(0,i.useState)(!1),[T,P]=i.useState(!0),[N,D]=(0,i.useState)(0),[B,L]=(0,i.useState)(""),[O,z]=(0,i.useState)([]),[F,W]=(0,i.useState)(!1),R=(0,r().IS)((e=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:530},footer:{width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",paddingTop:16,paddingInlineEnd:20,paddingBottom:16,paddingInlineStart:20,gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:h().Wy.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:18,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px",flexGrow:1},selection:{width:"100%"},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px",display:"flex",flexDirection:"row",gap:4},divider:{marginTop:5,marginBottom:5},futureChannelsCheckboxWrapper:{gap:4,visibility:"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:e.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:170},channelItemWrapper:{marginTop:12},privateConversationIcon:{width:16,height:16}})),[]),E=(0,o().v3)(),U=(0,m().tz)(),V=(0,_().r)(),K=(0,a().K8)((()=>C().F.state.currentScreen),[]),q=(0,a().K8)((()=>C().F.state.sessionId),[]),H=(0,a().K8)((()=>C().F.state.analyticsFrom),[]),Y=(0,a().K8)((()=>C().F.state.connectionStatus),[]);(0,p().Yb)((async()=>{var e;if(!V||"settings"!==K)return;if(!Y)return t(!1),void(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q});if(["in_progress","disconnecting","editing"].includes(Y))return t(!1),void(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q});t(!0);if(!(await(0,v().getMicrosoftTeamsAIConnectorStatusAction)({environment:E,spaceId:V})))return;const n=null===(e=await(0,v().getMicrosoftTeamsSyncControlsAction)({environment:E,spaceId:V}))||void 0===e?void 0:e.configuredSyncControls;if(!n)return;W(n.syncFutureTeams),z([]);const i=[];let s;do{const e=await(0,v().getMicrosoftTeamsTeamsAction)({environment:E,spaceId:V,cursor:s});if(!e)return;s=e.cursor,e.totalTeamCount&&D(e.totalTeamCount);for(const s of e.teams){const{id:e,name:t}=s;n.syncFutureTeams?i.push({id:e,name:t,checked:!n.teamsToExcludeFromSync.includes(e)}):i.push({id:e,name:t,checked:n.teamsToSync.includes(e)})}const t=i.find((e=>e.checked)),o=i.find((e=>!e.checked));let a=!1;t&&o?a="partial":t&&(a=!0),P(a),z([...i])}while(s);t(!1)}),[V,K,Y,E,H,q]);const G=(0,i.useCallback)((e=>{const t=O.find((t=>t.id===e));return Boolean(null==t?void 0:t.checked)}),[O]),J=(0,i.useCallback)((e=>{const t=O.map((t=>t.id===e?{...t,checked:!t.checked}:t));z(t);const n=t.find((e=>e.checked)),i=t.find((e=>!e.checked));let s=!1;n&&i?s="partial":n&&(s=!0),P(s)}),[O]),$=(0,i.useCallback)((()=>{const e=!T;P(e),z((t=>t.map((t=>({...t,checked:e})))))}),[T]),Q=(0,i.useCallback)((()=>O.some((e=>e.checked))),[O]),Z=(0,i.useCallback)((()=>{(0,s().u)({environment:E,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_close",integration_type:"microsoft-teams",setup_session_id:q,from:H}}}),t(!0),M(!1),P(!0),D(0),L(""),z([]),W(!1),(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q})}),[H,q,E]),X=(0,i.useCallback)((async()=>{if(!V)return;(0,s().u)({environment:E,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_save_button",integration_type:"microsoft-teams",setup_session_id:q,from:H}}}),M(!0);const e=await(0,v().getMicrosoftTeamsAIConnectorStatusAction)({environment:E,spaceId:V});if(!e)return f().D6({label:U.formatMessage(I.retryActionRequest),position:"bottom"}),void M(!1);if("completed"!==e.connectionStatus&&"pending_selection"!==e.connectionStatus)return f().D6({label:U.formatMessage(I.alreadySyncing),position:"bottom"}),M(!1),void(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q});let t;if(F){const e={syncFutureTeams:!0,teamsToSync:[],teamsToExcludeFromSync:O.filter((e=>!e.checked)).map((e=>e.id))};t=await(0,v().setMicrosoftTeamsSyncControlsAction)({environment:E,spaceId:V,syncControls:e})}else{const e={syncFutureTeams:!1,teamsToSync:O.filter((e=>e.checked)).map((e=>e.id)),teamsToExcludeFromSync:[]};t=await(0,v().setMicrosoftTeamsSyncControlsAction)({environment:E,spaceId:V,syncControls:e})}return t?t.syncControlsUpdated?"pending_selection"===e.connectionStatus?(M(!1),f().D6({label:U.formatMessage(I.syncingWithNewSyncControl),position:"bottom"}),void(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q})):(M(!1),f().D6({label:U.formatMessage(I.syncingWithNewSyncControl),position:"bottom"}),void(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"post_edit_screen",analyticsFrom:H,sessionId:q})):(f().D6({label:U.formatMessage(I.syncControlNotUpdated),position:"bottom"}),void M(!1)):(f().D6({label:U.formatMessage(I.retryActionRequest),position:"bottom"}),void M(!1))}),[V,E,F,H,q,U,O]),ee=(0,i.useCallback)((()=>{V&&"not_started"!==Y?((0,s().u)({environment:E,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_disconnect_button",integration_type:"microsoft-teams",setup_session_id:q,from:H}}}),"in_progress"===Y?(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"error_screen",analyticsFrom:H,sessionId:q}):(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"disconnect_screen",analyticsFrom:H,sessionId:q})):(0,v().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:H,sessionId:q})}),[V,Y,H,q,E]),te=(0,i.useCallback)((()=>(0,k.jsxs)(j().wt,{children:[(0,k.jsx)(A().A,{render:t=>(0,k.jsxs)(j().Ye,{style:R.channelItem,children:[(0,k.jsx)("div",{...t,children:(0,k.jsx)(c().S,{disabled:n||e,checked:T,size:14,onClick:()=>{$()}})}),(0,k.jsx)("div",{style:R.channelsText,children:(0,k.jsx)(m().sA,{id:"universalSearch.microsoftTeams.settings.allTeamsToggle",defaultMessage:"All teams"})})]}),renderTooltip:()=>(0,k.jsx)("div",{style:{width:280},children:(0,k.jsx)(m().sA,{...I.disabledTooltip})}),disableTooltip:!(n||e)}),(0,k.jsx)(y().A,{style:R.divider,size:4}),(0,k.jsx)(k.Fragment,{children:e?(0,k.jsxs)(j().Ye,{style:R.loadingChannelsWrapper,children:[(0,k.jsx)("div",{children:(0,k.jsx)(l().k,{})}),(0,k.jsxs)(j().wt,{children:[(0,k.jsx)("div",{children:(0,k.jsx)(m().sA,{id:"universalSearch.microsoftTeams.settings.loadedXTeams",defaultMessage:"{teamsFetched} of {totalTeams} teams loaded",values:{teamsFetched:O.length,totalTeams:N}})}),(0,k.jsx)("div",{children:(0,k.jsx)(m().sA,{id:"universalSearch.microsoftTeams.settings.loading1000PerMinute",defaultMessage:"This can take one minute per every 1,000 teams."})})]})]}):(0,k.jsx)(j().wt,{style:R.selectionWrapper,children:(B?O.filter((e=>e.name.toLowerCase().includes(B.toLowerCase()))):O).map((e=>(0,k.jsxs)(j().Ye,{gap:8,style:R.channelItemWrapper,children:[(0,k.jsx)("div",{children:(0,k.jsx)(c().S,{disabled:n,checked:G(e.id),onClick:()=>{J(e.id)},size:14},`${e.id}-checkbox`)}),(0,k.jsx)("div",{style:R.channelsText,children:` ${e.name}`},`${e.id}-label`)]},e.id)))})})]})),[R,n,e,O,N,B,T,$,G,J]);return(0,k.jsx)(b().a,{open:"settings"===K,showCloseIcon:!0,onDismiss:Z,render:()=>(0,k.jsxs)("div",{style:R.wrapper,children:[(0,k.jsx)(w().b,{connectorType:"microsoft-teams",title:(0,k.jsx)(m().sA,{id:"universalSearch.microsoftTeams.settings.title",defaultMessage:"Connection Settings"})}),(0,k.jsx)(x().A,{capture:!0,allowEsc:!0,render:()=>(0,k.jsx)(A().A,{textWrap:!0,placement:"top",render:t=>(0,k.jsx)("div",{...t,children:(0,k.jsx)(j().Ye,{style:R.searchBarWrapper,children:(0,k.jsx)(S().A,{id:"microsoftTeamsUniversalQnASearchBar",style:R.searchBar,placeholder:U.formatMessage(I.searchBoxPlaceholder),value:B,onChange:e=>{L(e.target.value)},disabled:e},"microsoftTeamsUniversalQnASearchBar")})}),renderTooltip:()=>(0,k.jsx)(m().sA,{...I.disabledTooltip}),disableTooltip:!e})}),(0,k.jsx)(j().Ye,{style:R.selectionContainer,children:(0,k.jsx)(j().wt,{style:R.selection,children:te()})}),(0,k.jsxs)(j().wt,{style:R.footer,children:[(0,k.jsx)(A().A,{textWrap:!0,placement:"top",render:t=>(0,k.jsxs)(j().Ye,{style:R.futureChannelsCheckboxWrapper,children:[(0,k.jsx)("div",{...t,children:(0,k.jsx)(c().S,{disabled:n||e,checked:F,size:14,onClick:()=>{W(!F)}})}),(0,k.jsx)("div",{style:R.channelsText,children:(0,k.jsx)(m().sA,{...I.syncFutureTeamsCheckboxLabel})})]}),renderTooltip:()=>(0,k.jsx)(m().sA,{...I.disabledTooltip}),disableTooltip:!e}),(0,k.jsxs)(j().Ye,{style:R.futureChannelsCheckboxWrapper,children:[(0,k.jsx)("div",{children:(0,g().i)(R.privateConversationIcon)}),(0,k.jsx)("div",{style:R.channelsText,children:(0,k.jsx)(m().sA,{...I.syncPrivateConversationLabel})})]}),(0,k.jsx)(u().A,{colorPalette:"blue",style:R.connectButton,onClick:X,disabled:n||e||!Q()&&!F,children:(0,k.jsx)(m().sA,{...I.saveButton})}),(0,k.jsx)(d().A,{colorPalette:"red",style:R.connectButton,disabled:n||e||"in_progress"===Y,onClick:ee,children:(0,k.jsx)(m().sA,{...I.disconnectButton})})]})]}),ariaLabel:U.formatMessage(I.modalAriaLabel)})}const I=(0,m().YK)({disabledTooltip:{id:"universalSearch.microsoftTeams.settings.disabledTooltip",defaultMessage:"You can only interact after all teams are loaded"},saveButton:{id:"universalSearch.microsoftTeams.settings.settingsModal.saveChangesButtonText",defaultMessage:"Save Changes"},disconnectButton:{id:"universalSearch.microsoftTeams.settings.settingsModal.disconnectButtonText",defaultMessage:"Disconnect"},modalAriaLabel:{id:"universalSearch.microsoftTeams.settings.modalAriaLabel",defaultMessage:"Microsoft Teams error modal"},searchBoxPlaceholder:{id:"universalSearch.microsoftTeams.settings.searchBoxPlaceholder",defaultMessage:"Search for a Team"},alreadySyncing:{defaultMessage:"Microsoft Teams is already syncing. This can take up to 72 hours.",id:"universalSearch.microsoftTeams.settings.alreadySyncing"},retryActionRequest:{defaultMessage:"Action failed. Please try again.",id:"universalSearch.microsoftTeams.settings.retryActionRequest"},syncFutureTeamsCheckboxLabel:{id:"universalSearch.microsoftTeams.settings.syncFutureTeamsCheckboxLabel",defaultMessage:"Include teams created in the future"},syncPrivateConversationLabel:{id:"universalSearch.microsoftTeams.settings.syncPrivateConversationLabel",defaultMessage:"Content in private conversations will only be shown to members who have access to them. Permissions are strictly respected."},syncControlNotUpdated:{id:"universalSearch.microsoftTeams.settings.syncControlNotUpdated",defaultMessage:"No change made to Microsoft Teams Connection."},syncingWithNewSyncControl:{id:"universalSearch.microsoftTeams.settings.syncingWithNewSyncControl",defaultMessage:"Started syncing from Microsoft Teams. This can take up to 72 hours."}})}}]);