"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[89379],{89116:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,openAiIcon:()=>s});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"1 0.99 18 18.01",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("g",{clipPath:"url(#clip0_3048_4614)",children:(0,i.jsx)("path",{fill:"#000",d:"M17.71 8.367a4.48 4.48 0 0 0-.386-3.683 4.535 4.535 0 0 0-4.884-2.176A4.5 4.5 0 0 0 9.057 1a4.54 4.54 0 0 0-4.326 3.14 4.5 4.5 0 0 0-2.999 2.175 4.54 4.54 0 0 0 .558 5.318 4.48 4.48 0 0 0 .386 3.683 4.535 4.535 0 0 0 4.885 2.176 4.48 4.48 0 0 0 3.382 1.507 4.54 4.54 0 0 0 4.328-3.142 4.5 4.5 0 0 0 2.998-2.175 4.54 4.54 0 0 0-.559-5.316zm-6.766 9.456a3.36 3.36 0 0 1-2.16-.78l.107-.06 3.584-2.07a.58.58 0 0 0 .295-.51V9.348l1.515.875a.05.05 0 0 1 .029.041v4.185a3.377 3.377 0 0 1-3.37 3.373m-7.247-3.095a3.36 3.36 0 0 1-.402-2.26l.106.063 3.584 2.07a.58.58 0 0 0 .589 0l4.376-2.527v1.75a.06.06 0 0 1-.022.046l-3.623 2.093a3.377 3.377 0 0 1-4.608-1.235m-.944-7.824A3.36 3.36 0 0 1 4.51 5.425l-.002.124v4.14a.58.58 0 0 0 .294.51l4.376 2.526-1.515.875a.05.05 0 0 1-.05.005L3.987 11.51a3.377 3.377 0 0 1-1.235-4.606zM15.2 9.8l-4.375-2.526 1.514-.875a.05.05 0 0 1 .052-.004l3.623 2.092a3.374 3.374 0 0 1-.52 6.087V10.31a.58.58 0 0 0-.293-.51m1.508-2.269-.107-.063-3.584-2.07a.58.58 0 0 0-.589 0L8.052 7.924V6.175a.06.06 0 0 1 .021-.047l3.623-2.09a3.373 3.373 0 0 1 5.01 3.493M7.228 10.65l-1.515-.875a.05.05 0 0 1-.03-.041V5.548a3.374 3.374 0 0 1 5.533-2.59l-.107.06-3.584 2.07a.58.58 0 0 0-.295.51zm.823-1.774 1.95-1.126 1.948 1.125v2.251L10 12.25l-1.949-1.125z"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_3048_4614",children:(0,i.jsx)("path",{fill:"#fff",d:"M1 1h18v18H1z"})})})]})},s=(0,n(340498).wt)("openAi",o)},452745:(e,t,n)=>{n.r(t),n.d(t,{checkmarkShieldFillSmallIcon:()=>o,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"2.85 2.2 10.29 11.6",svg:(0,n(474848).jsx)("path",{d:"M7.755 2.26a.55.55 0 0 1 .49 0l.962.482a7.3 7.3 0 0 0 3.277.774h.11c.302 0 .547.244.547.547v4.333a4.92 4.92 0 0 1-2.983 4.524l-1.943.833a.55.55 0 0 1-.43 0l-1.943-.833A4.92 4.92 0 0 1 2.86 8.396V4.062c0-.302.245-.546.547-.546h.11c1.138 0 2.26-.265 3.277-.774zm2.567 4.123a.55.55 0 0 0-.944-.566L7.371 9.163 6.268 7.875a.55.55 0 1 0-.836.716l1.6 1.867a.55.55 0 0 0 .89-.075z"})},o=(0,n(340498).wt)("checkmarkShieldFillSmall",i)},523163:(e,t,n)=>{n.d(t,{KM:()=>Je,Ay:()=>Xe,de:()=>Ye});n(944114),n(898992),n(354520),n(430670),n(581454),n(737550);var i=n(296540),o=()=>n(662303),s=()=>n(484714),a=()=>n(56366),r=()=>n(401497),l=()=>n(252291),c=()=>n(98126),d=()=>n(869190),g=()=>n(617871),u=()=>n(452745),p=()=>n(693954),m=()=>n(388693),h=()=>n(45331),f=()=>n(824862),S=()=>n(332393),v=()=>n(606219),b=()=>n(534177);var x=()=>n(322769),y=()=>n(20498),A=()=>n(695608),j=()=>n(69708),I=()=>n(512062),C=()=>n(284371),M=()=>n(665381),w=()=>n(765957),k=()=>n(258836),B=()=>n(870092),_=(n(672577),n(908872),()=>n(726637)),P=()=>n(757695),N=()=>n(406094),T=()=>n(160432),D=()=>n(799288),L=()=>n(798880),O=()=>n(100622),W=()=>n(778078),z=()=>n(559926),U=()=>n(908928),K=()=>n(27579),E=()=>n(471995),R=()=>n(231297),q=()=>n(457812),F=()=>n(722872),V=()=>n(232930),G=()=>n(463830),H=()=>n(561585),$=()=>n(878710),Y=()=>n(911706),X=()=>n(187174),J=()=>n(723786),Q=()=>n(542585);function Z({shouldCollectData:e,environment:t,sidebarSpaceStore:n,sidebarSpaceViewStore:i,botStore:o}){const[s,r]=(0,X().Yb)((async()=>e&&n&&o?await U().GO({environment:t,spaceStore:n,botIds:[o.id]}):{bots:{},integrationManagementPermissions:{}}),[e,t,n,o]),l=(0,a().K8)((()=>e?(null==i?void 0:i.getSharedPageIds())??[]:[]),[e,i]),c=(0,a().K8)((()=>o?o.getIntegrationManagementPermissions():(0,Q().R)()),[o]),d=(0,J().g)({pageIdsSharedWithUser:e?l:[],spaceViewStore:i,spaceStore:n}),g=(0,a().K8)((()=>{var t;return e?(null===(t=s.value)||void 0===t||null===(t=t.bots)||void 0===t||null===(t=t[(null==o?void 0:o.id)||""])||void 0===t?void 0:t.pageIds)??[]:[]}),[e,s.value,null==o?void 0:o.id]);if(e)return{userSharedPageIds:l,pageSelectionData:d,pageIdsAlreadySharedWithBot:g,integrationManagementPermissions:c,refetchBotSharedPages:r}}var ee=()=>n(433847),te=()=>n(583690),ne=()=>n(678553),ie=n(474848);function oe(e){const{capabilities:t}=e,n=(0,j().tz)(),{device:i}=(0,s().v3)(),o=(0,ee().MD)(t),a=(0,ee().kL)(t),r=(0,ee().KI)(e.capabilities),l=[...(0,te().I2)(o),...(0,te().YC)(a),...(0,te().AC)(r)];return(0,ie.jsx)(ne().Ay,{...e,title:n.formatMessage((0,ee().sK)(o,void 0).label),shouldWrapCaption:!0,style:i.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,ie.jsx)("div",{children:l})})}var se=()=>n(760217),ae=()=>n(406699),re=()=>n(419357),le=()=>n(404277),ce=()=>n(939740),de=()=>n(676007),ge=()=>n(417392),ue=()=>n(89924),pe=()=>n(125565),me=()=>n(994006);const he=(0,j().YK)({userSearchPlaceholder:{id:"integrationInstallerFilter.userSearch.placeholder",defaultMessage:"Filter by user"},revokeUserAccess:{id:"spaceIntegrationSettings.actionMenu.revokeUserAccess.label",defaultMessage:"Disconnect user"},visitDeveloperWebsite:{id:"spaceIntegrationSettings.actionMenu.visitDeveloperWebsite.label",defaultMessage:"Visit developer website"},contactDeveloperSupport:{id:"spaceIntegrationSettings.actionMenu.contactDeveloperSupport.label",defaultMessage:"Contact support"},disconnectAllUsers:{id:"spaceIntegrationSettings.actionMenu.disconnectAll.label",defaultMessage:"Disconnect all users"},removeFromApprovedList:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.label",defaultMessage:"Remove from approved list"},selectPageAccess:{id:"spaceIntegrationSettings.actionMenu.selectPageAccess.label",defaultMessage:"Select page access"},cancelButton:{id:"spaceIntegrationSettings.admin.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"},disconnectButton:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.disconnect",defaultMessage:"Disconnect"},removeButton:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.remove",defaultMessage:"Remove"},disapproveModalTitle:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.title",defaultMessage:"Remove {integrationName} from approved integrations"},disapproveModalCaption:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.caption",defaultMessage:"Prevent members from installing {integrationName}."},disapproveAndDisconnectCaption:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApprovalAndDisconnectAll.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace and prevent members from installing {integrationName}."},disconnectAllModalTitle:{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.label",defaultMessage:"Disconnect {integrationName} for all users in workspace"},disconnectAllModalCaption:{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace."},disconnectUserModalTitle:{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.label",defaultMessage:"Disconnect {integrationName}?"},disconnectUserModalCaption:{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.caption",defaultMessage:"Revoke access for {integrationName} for {userName}"},complianceManage:{id:"complianceIntegrationSettings.actionMenu.manage",defaultMessage:"Manage"},complianceLearnMore:{id:"complianceIntegrationSettings.actionMenu.learnMore",defaultMessage:"Learn more"},complianceDisconnect:{id:"complianceIntegrationSettings.actionMenu.disconnect",defaultMessage:"Disconnect"},complianceDisconnectModalTitle:{id:"complianceIntegrationSettings.disconnectModal.title",defaultMessage:"Disconnect {integrationName}?"},complianceDisconnectModalSubtitle:{id:"complianceIntegrationSettings.disconnectModal.subtitle",defaultMessage:"Revoke {integrationName}’s access to this workspace. Workspace events will no longer be sent to {integrationName}."},complianceDisconnectSnackbar:{id:"complianceIntegrationSettings.snackbar.title",defaultMessage:"Disconnected {integrationName} from your workspace"}});function fe(e){const{integrationId:t,integrationTable:n,isLegacy:o,disableDisconnectUser:r,disableDisconnectAll:l,disableDisallow:c,botIds:d}=e,u=(0,a().O$)(w().AppStoreSidebarSpaceStore),p=(0,a().O$)(w().AppStoreSidebarSpaceViewStore),h=(0,s().v3)(),v=(0,j().tz)(),y=Te(),[A,I]=(0,i.useState)(void 0),[C,M]=(0,i.useState)(!1),[N,T]=(0,i.useState)(!1),[D,O]=(0,i.useState)(!1),[z,U]=(0,i.useState)(void 0),[K,E]=(0,i.useState)(!1),G=(0,a().K8)((()=>!o&&n===S().Li&&!(0,g().CX)({integrationId:t})),[o,n,t]),H=(0,a().K8)((()=>u&&n?(0,$().v3)(u,{table:n,id:t}):void 0),[u,t,n]),X=(0,a().K8)((()=>{if(o){const e=m().Gw.find((e=>e.id===t));return{name:null==e?void 0:e.name,url:(0,V().x)("guides.connectedApps")}}if(u&&n){const o=u.getRecordModel({table:n,id:t});if(n===S().Li&&!(0,g().CX)({integrationId:t})){var e,i;const t=o;return{name:null==o?void 0:o.name,url:null==t||null===(e=t.getInfo())||void 0===e?void 0:e.website_url,email:null==t||null===(i=t.getInfo())||void 0===i?void 0:i.email}}return{name:null==o?void 0:o.name}}}),[u,t,n,o]),J=(0,a().K8)((()=>d&&!r?d.map((e=>u&&H?k().v.createChildStore(H,{table:f().GP,id:e,spaceId:u.id}):void 0)):[]),[u,d,H,r]).filter(b().O9),Q=(0,a().K8)((()=>J.filter((e=>e.getAlive()))),[J]),ee=(0,a().K8)((()=>G&&Q.length>0?Q[0]:void 0),[G,Q]),te=(0,a().uB)(void 0,P().Store.createClass({},{name:"AdminIntegrationSettingsActionMenu.selectedBlockIds"})),ne=G&&Boolean(ee),oe=Z({shouldCollectData:ne,environment:h,sidebarSpaceStore:u,sidebarSpaceViewStore:p,botStore:ee}),se=ne&&oe&&u&&ee,ge=(0,a().K8)((()=>{if(u&&Q&&!r){return Q.map((e=>e.getCreatedById())).filter(b().O9).map((e=>B().L.createChildStore(u,{table:L().oo,id:e}))).filter((e=>e.isDefined()))}return[]}),[Q,u,r]),pe=(0,a().K8)((()=>null==u?void 0:u.getBotSettingsStore().getValue()),[u]),me=(0,a().K8)((()=>null==Q?void 0:Q.reduce(((e,t)=>{const n=ge.find((e=>e.id===t.getCreatedById()));return e[t.id]={userStore:n,botCapabilities:t.getCapabilities()},e}),{})),[Q,ge]),fe=(0,a().K8)((()=>A?(0,W().Ay)(A,Object.entries(me),(([,{userStore:e}])=>e.getSearchName(v))):Object.entries(me)),[me,A,v]),be=!r&&(null==d?void 0:d.length)&&(0,ie.jsx)(ue().A,{isInput:!0,style:{padding:8},children:(0,ie.jsx)(re().Ay,{textWrapperStyle:{margin:0},focus:!_().A.isMobile||void 0,focusAfterAnimation:!0,value:A||"",onChange:e=>I(e.target.value),placeholder:v.formatMessage(he.userSearchPlaceholder)})}),Ne=fe.length?[{key:"disconnect user section",render:e=>(0,ie.jsx)(ue().A,{...e}),items:ve({users:fe,disableDisconnectUser:r,showDisplayModal:()=>T(!0),setSelectedUser:U,intl:v})}]:[],De=(null==X?void 0:X.url)||(null==X?void 0:X.email),Le=Boolean(null==d?void 0:d.length)||(0,x().az)(pe)&&!c,Oe=(0,ie.jsxs)(ie.Fragment,{children:[ne?(0,ie.jsx)(ue().A,{topBorder:Boolean(fe.length),children:(0,ie.jsx)(Ie,{onShowModal:()=>E(!0)})},"page-access"):void 0,De?(0,ie.jsxs)(ue().A,{topBorder:Boolean(fe.length||ne),children:[null!=X&&X.url?(0,ie.jsx)(xe,{environment:h,developerWebsite:X.url}):void 0,null!=X&&X.email?(0,ie.jsx)(ye,{environment:h,developerEmail:X.email}):void 0]},"app-links"):void 0,Le?(0,ie.jsxs)(ue().A,{topBorder:Boolean(fe.length||De||ne),children:[Boolean(null==d?void 0:d.length)?(0,ie.jsx)(Ae,{showDisplayModal:()=>O(!0)}):void 0,(0,x().az)(pe)&&!c?(0,ie.jsx)(je,{showDisplayModal:()=>M(!0)}):void 0]}):void 0]});return(De||Le||ne)&&X?(0,ie.jsx)(ae().A,{popupType:_().A.isMobile?ae().z.BottomSheet:ae().z.Popup,renderOrigin:e=>(0,ie.jsx)(Y().A,{...e,isMobile:Boolean(_().A.isMobile),style:{marginInlineStart:8,marginInlineEnd:8}}),render:()=>(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(le().A,{menuType:_().A.isMobile?F().gu.ActionSheet:F().gu.Popup,header:!r&&be,footer:Oe,width:230,children:(0,ie.jsx)(ce().Ay,{type:ce().Oh.Vertical,sections:Ne,initialFocus:void 0})}),(0,ie.jsx)(de().a,{open:!r&&N,onDismiss:()=>{T(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:y.innerModal,render:()=>(0,ie.jsx)(Ce,{title:(0,ie.jsx)(_e,{integrationName:X.name}),caption:(0,ie.jsx)(Pe,{integrationName:X.name,userName:null==z?void 0:z.userName}),type:"disconnect",handleCancel:()=>{T(!1),U(void 0)},handleConfirmation:async()=>{z&&(await Se({botIds:[z.botId],environment:h}),U(void 0)),T(!1)}})}),(0,ie.jsx)(de().a,{open:!l&&D,onDismiss:()=>{O(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:y.innerModal,render:()=>(0,ie.jsx)(Ce,{title:(0,ie.jsx)(ke,{integrationName:X.name}),caption:(0,ie.jsx)(Be,{integrationName:X.name}),type:"disconnect",handleCancel:()=>O(!1),handleConfirmation:async()=>{await Se({botIds:d,environment:h}),O(!1)}})}),(0,ie.jsx)(de().a,{open:!c&&C,onDismiss:()=>{M(!1)},transitionAppearance:"none",showCloseIcon:!0,innerStyle:y.innerModal,render:()=>(0,ie.jsx)(Ce,{title:(0,ie.jsx)(Me,{integrationName:X.name}),caption:(0,ie.jsx)(we,{integrationName:X.name,disableDisconnectAll:l}),type:"disapprove",handleCancel:()=>M(!1),handleConfirmation:async()=>{!function(e){const{sidebarSpaceStore:t,environment:n,integrationId:i}=e;t&&R().createAndCommit({userAction:"AdminIntegrationSettingsActionMenu.handleDisapproveIntegration",environment:n,canUndo:!0,perform:e=>{R().applyOperation({store:t,operation:{pointer:t.pointer,path:["bot_settings","integration_approval_statuses"],command:"update",args:{[i]:null}},transaction:e})}})}({sidebarSpaceStore:u,environment:h,integrationId:t}),l||await Se({botIds:d,environment:h}),M(!1)}})}),se?(0,ie.jsx)(q().r,{isOpen:K,onClose:()=>E(!1),pageIdsAlreadySharedWithBot:oe.pageIdsAlreadySharedWithBot,teamPagesByTeam:oe.pageSelectionData.teamPagesByTeam,allTeams:oe.pageSelectionData.allTeams,privatePages:oe.pageSelectionData.allPrivatePages,pagesSharedWithUser:oe.pageSelectionData.allSharedPages,workspacePages:oe.pageSelectionData.allWorkspacePages,spaceId:u.id,botStore:ee,spaceStore:u,refetchBotSharedPages:oe.refetchBotSharedPages,selectedBlockIdsStore:te,pagePickerLocation:"public_integration_page_picker",integrationManagementPermissions:oe.integrationManagementPermissions}):void 0]})}):null}async function Se({botIds:e,environment:t}){e&&await Promise.all(e.map((e=>U().KA({environment:t,botId:e,onSuccess:()=>{z().hs(t,{type:"public"})}}))))}function ve(e){const{intl:t,disableDisconnectUser:n,users:i,showDisplayModal:o,setSelectedUser:s}=e;return n?[]:i.map((([e,{userStore:n,botCapabilities:i}])=>({key:n.id,render:a=>(0,ie.jsx)(be,{buttonMenuProps:a,userStore:n,botCapabilities:i,selectAction:()=>{o(),s({botId:e,userName:n.getDisplayName(t)})}}),action:()=>{o(),s({botId:e,userName:n.getDisplayName(t)})}})))}function be(e){const{buttonMenuProps:t,userStore:n,botCapabilities:o,selectAction:s}=e,[a,r]=(0,i.useState)(!1);return(0,ie.jsx)(ge().Ay,{popupType:_().A.isMobile?ae().z.BottomSheet:ae().z.Popup,placementToOrigin:"right",open:a,onDismiss:()=>r(!1),origin:(0,ie.jsx)(se().A,{...t,title:(0,ie.jsx)("div",{style:{display:"flex",alignContent:"center",justifyContent:"space-between"},children:(0,ie.jsx)(me().A,{userStore:n,avatarSize:18,inline:!0,avatarShouldShowShadow:!0,style:{flexShrink:1}})}),textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12},focused:!1,onClick:()=>r(!0)}),render:()=>(0,ie.jsx)(le().A,{width:240,menuType:_().A.isMobile?F().gu.ActionSheet:F().gu.Popup,header:(0,ie.jsx)("div",{style:{padding:2,marginTop:4,marginBottom:4},children:(0,ie.jsx)(oe,{capabilities:o})}),children:(0,ie.jsx)(ce().Ay,{type:ce().Oh.Vertical,sections:[{key:"integration capabilities",render:e=>(0,ie.jsx)(ue().A,{...e,topBorder:!0}),items:[{key:"remove",render:e=>(0,ie.jsx)(se().A,{...e,focused:!1,title:(0,ie.jsx)("div",{style:{color:O().Tj.red},children:(0,ie.jsx)(j().sA,{...he.revokeUserAccess})})}),action:s}]}],initialFocus:void 0})})})}function xe({environment:e,developerWebsite:t}){return(0,ie.jsx)(se().A,{onClick:()=>{(0,K().L)({environment:e,url:t}),z().Vk(e,{href:t,from:"integration-settings"})},title:(0,ie.jsx)(j().sA,{...he.visitDeveloperWebsite}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12}})}function ye({environment:e,developerEmail:t}){return(0,ie.jsx)(se().A,{onClick:()=>{(0,K().L)({environment:e,url:`mailto:${t}`}),z().z$(e,{from:"integration-settings"})},title:(0,ie.jsx)(j().sA,{...he.contactDeveloperSupport}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12}})}function Ae({showDisplayModal:e}){return(0,ie.jsx)(se().A,{onClick:e,title:(0,ie.jsx)(j().sA,{...he.disconnectAllUsers}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12,color:O().Tj.red}})}function je({showDisplayModal:e}){return(0,ie.jsx)(se().A,{onClick:e,title:(0,ie.jsx)(j().sA,{...he.removeFromApprovedList}),focused:!1,textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12,color:O().Tj.red}})}function Ie({onShowModal:e}){return(0,ie.jsx)(se().A,{onClick:e,title:(0,ie.jsx)(j().sA,{...he.selectPageAccess}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginInlineStart:12,marginInlineEnd:12}})}function Ce({title:e,caption:t,handleConfirmation:n,handleCancel:o,type:s}){const[a,r]=(0,i.useState)(!1);return(0,ie.jsxs)("div",{style:{padding:20,width:333},children:[(0,ie.jsx)(pe().A,{isMultiline:!0,style:{marginBottom:8,fontWeight:C().Wy.semibold,paddingInlineEnd:30},children:e}),(0,ie.jsx)(pe().A,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8},children:t}),(0,ie.jsxs)("div",{style:{display:"flex",marginTop:12},children:[(0,ie.jsx)(N().A,{style:{width:140,marginInlineEnd:9},size:"lg",onClick:o,disabled:a,children:(0,ie.jsx)(pe().A,{children:(0,ie.jsx)(j().sA,{...he.cancelButton})})}),(0,ie.jsx)(T().A,{style:{width:140},size:"lg",onClick:async()=>await n(r),colorPalette:"red",disabled:a,children:(0,ie.jsxs)(ie.Fragment,{children:["disconnect"===s&&!0===a?(0,ie.jsx)(c().A,{onDarkBackground:!0}):void 0,"disconnect"===s&&!1===a?(0,ie.jsx)(j().sA,{...he.disconnectButton}):void 0,"disapprove"===s?(0,ie.jsx)(j().sA,{...he.removeButton}):void 0]})})]})]})}function Me({integrationName:e}){return(0,ie.jsx)(j().sA,{...he.disapproveModalTitle,values:{integrationName:e}})}function we({integrationName:e,disableDisconnectAll:t}){return t?(0,ie.jsx)(j().sA,{...he.disapproveModalCaption,values:{integrationName:e}}):(0,ie.jsx)(j().sA,{...he.disapproveAndDisconnectCaption,values:{integrationName:e}})}function ke({integrationName:e}){return(0,ie.jsx)(j().sA,{...he.disconnectAllModalTitle,values:{integrationName:e}})}function Be({integrationName:e}){return(0,ie.jsx)(j().sA,{...he.disconnectAllModalCaption,values:{integrationName:e}})}function _e({integrationName:e}){return(0,ie.jsx)(j().sA,{...he.disconnectUserModalTitle,values:{integrationName:e}})}function Pe({integrationName:e,userName:t}){return(0,ie.jsx)(j().sA,{...he.disconnectUserModalCaption,values:{integrationName:e,userName:t}})}function Ne(e){const{adminIntegrationConfig:t,botId:n,maybeWebhookSubscriptionId:o}=e,r=(0,s().v3)(),[l,c]=(0,i.useState)(!1),d=Te(),g=(0,a().O$)(w().AppStoreSidebarSpaceStore),u=(0,a().K8)((()=>{const e=null==g?void 0:g.getRecordModel({table:f().GP,id:n});return null==e?void 0:e.getCapabilities()}),[g,n]),p=t.developer_name;if(!p)return null;const m=new(G().A),h={key:"manage",action:()=>{H().A.setState({open:!0,integrationId:t.id,webhookSubscriptionId:o}),m.setState({open:!1})},render:e=>(0,ie.jsx)(se().A,{...e,title:(0,ie.jsx)(j().sA,{...he.complianceManage})})},S={key:"learn more",action:()=>{(0,K().L)({environment:r,url:t.integrationGalleryUrl})},render:e=>(0,ie.jsx)(se().A,{...e,title:(0,ie.jsx)(j().sA,{...he.complianceLearnMore})})},v={key:"disconnect",action:()=>{m.setState({open:!1}),c(!0)},render:e=>(0,ie.jsx)(se().A,{...e,title:(0,ie.jsx)("span",{style:d.disconnect,children:(0,ie.jsx)(j().sA,{...he.complianceDisconnect})})})},b=[...t.oauth||(0,D().qs)(u)||(0,y().jl)(t.id)?[]:[h],...t.oauth||(0,D().qs)(u)?[S]:[],v];return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(ae().A,{popupType:_().A.isMobile?ae().z.BottomSheet:ae().z.Popup,renderOrigin:e=>(0,ie.jsx)(Y().A,{...e,isMobile:Boolean(_().A.isMobile),style:{marginInlineStart:8,marginInlineEnd:8}}),buttonPopupStore:m,render:()=>(0,ie.jsx)(le().A,{menuType:_().A.isMobile?F().gu.ActionSheet:F().gu.Popup,width:230,children:(0,ie.jsx)(ce().Ay,{type:ce().Oh.Vertical,sections:[{key:"options",render:e=>(0,ie.jsx)(ue().A,{...e}),items:b}],initialFocus:void 0})})}),(0,ie.jsx)(de().a,{open:l,onDismiss:()=>c(!1),transitionAppearance:"none",showCloseIcon:!0,innerStyle:d.innerModal,render:()=>(0,ie.jsx)(Ce,{title:(0,ie.jsx)(j().sA,{...he.complianceDisconnectModalTitle,values:{integrationName:p}}),caption:(0,ie.jsx)(j().sA,{...he.complianceDisconnectModalSubtitle,values:{integrationName:p}}),type:"disconnect",handleCancel:()=>c(!1),handleConfirmation:async()=>{await U().KA({environment:r,botId:n,onSuccess:()=>{}}),z().kV(r,{integration_id:t.id}),E().D6({label:(0,ie.jsx)(j().sA,{...he.complianceDisconnectSnackbar,values:{integrationName:p}})})}})})]})}function Te(){return(0,r().IS)((()=>({disconnect:{color:O().Tj.red},innerModal:{borderRadius:10}})),[])}var De=()=>n(824160),Le=()=>n(187820),Oe=()=>n(566468),We=()=>n(859428),ze=()=>n(453697),Ue=()=>n(312788),Ke=()=>n(427704),Ee=()=>n(498212),Re=()=>n(884107);const qe=(0,j().YK)({manageIntegrationLabel:{id:"spaceIntegrationSettings.actionMenu.manageIntegration.label",defaultMessage:"Manage in developer portal"},deleteIntegrationButtonLabel:{id:"spaceIntegrationSettings.actionMenu.deleteIntegrationButton.label",defaultMessage:"Delete {integrationName}"},managePageAccess:{id:"spaceIntegrationSettings.actionMenu.managePageAccess.label",defaultMessage:"Manage page access"},removeIntegrationModalTitle:{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.title",defaultMessage:"Delete {integrationName} in workspace"},removeIntegrationModalCaption:{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.caption",defaultMessage:"Revoke access for {integrationName} in workspace"},removeIntegrationCancelButton:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"},deleteIntegrationModalButton:{id:"spaceIntegrationSettings.actionMenu.deleteIntegration.modal.button.delete",defaultMessage:"Delete"},copyInternalIntegrationTokenButtonLabel:{id:"spaceIntegrationSettings.actionMenu.copyInternalIntegrationTokenButton.label",defaultMessage:"Copy internal integration token"}});function Fe(e){const{navigate:t}=(0,i.useContext)(Ue().E),{botId:n}=e,[,,o]=(0,a().$y)(void 0,G().A),r=(0,s().Y0)(),l=(0,s().v3)(),c=(0,a().O$)(w().AppStoreSidebarSpaceStore),d=(0,a().O$)(w().AppStoreSidebarSpaceViewStore),[g,u]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),h=(0,a().K8)((()=>c?k().v.createChildStore(c,{table:f().GP,id:n,spaceId:c.id}):void 0),[n,c]),S=(0,a().K8)((()=>(0,D().Hg)(null==h?void 0:h.getModel())),[h]),v=(0,a().uB)(void 0,P().Store.createClass({},{name:"InternalIntegrationActionMenu.selectedBlockIds"})),b=Z({shouldCollectData:Boolean(h),environment:l,sidebarSpaceStore:c,sidebarSpaceViewStore:d,botStore:h}),[{value:x}]=(0,X().Yb)((async()=>{if(h){return await U().dA({environment:l,botId:null==h?void 0:h.id})}}),[l,h]);return h?(0,ie.jsx)(ae().A,{popupType:r.isMobile?ae().z.SlideUp:ae().z.Popup,buttonPopupStore:o,renderOrigin:e=>(0,ie.jsx)(Y().A,{isMobile:r.isMobile,...e,style:{marginInlineStart:8,marginInlineEnd:8}}),render:()=>(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(le().A,{menuType:r.isMobile?F().gu.ActionSheet:F().gu.Popup,children:(0,ie.jsx)(ce().Ay,{type:ce().Oh.Vertical,sections:[{key:"integration options",render:e=>(0,ie.jsx)(ue().A,{...e}),items:[...x?[Ve({environment:l,botToken:x})]:[],...b?[Ge({onShowModal:()=>m(!0)})]:[],{key:"manage",action:()=>t({environment:l,url:`${Ke().JZ.creatorProfileIntegrations}/internal/${Ee().Xw(n)}`,openInNew:"tab"}),render:e=>(0,ie.jsx)(se().A,{title:(0,ie.jsx)(j().sA,{...qe.manageIntegrationLabel}),...e})},{key:"delete",action:()=>u(!0),render:e=>(0,ie.jsx)(se().A,{title:(0,ie.jsx)(j().sA,{...qe.deleteIntegrationButtonLabel,values:{integrationName:S}}),style:{color:O().Tj.red},...e})}]}],initialFocus:void 0})}),(0,ie.jsx)(de().a,{open:g,onDismiss:()=>{u(!1)},transitionAppearance:"none",render:()=>(0,ie.jsxs)("div",{style:{padding:20,width:333},children:[(0,ie.jsx)(pe().A,{isMultiline:!0,style:{marginBottom:8,fontWeight:C().Wy.semibold},children:(0,ie.jsx)(j().sA,{...qe.removeIntegrationModalTitle,values:{integrationName:S}})}),(0,ie.jsx)(pe().A,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8},children:(0,ie.jsx)(j().sA,{...qe.removeIntegrationModalCaption,values:{integrationName:S}})}),(0,ie.jsxs)("div",{style:{display:"flex",marginTop:12},children:[(0,ie.jsx)(N().A,{style:{width:140,marginInlineEnd:9},size:"lg",onClick:()=>u(!1),children:(0,ie.jsx)(pe().A,{children:(0,ie.jsx)(j().sA,{...qe.removeIntegrationCancelButton})})}),(0,ie.jsx)(T().A,{style:{width:140},size:"lg",colorPalette:"red",onClick:async()=>{u(!1),await U().KA({environment:l,botId:h.id,onSuccess:()=>{z().hs(l,{type:"internal"})}})},children:(0,ie.jsx)(j().sA,{...qe.deleteIntegrationModalButton})})]})]})}),He({pageAccessModalOpen:p,onClose:()=>m(!1),pageAccessData:b,sidebarSpaceStore:c,botStore:h,selectedBlockIdsStore:v})]})}):null}function Ve(e){const{botToken:t,environment:n}=e;return{key:"copy bot token",action:async()=>{const e=await Re().R.clipboardActions.load();e.copyString({environment:n,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),z().Er(n,{from:"integration-settings",table:f().GP})},render:e=>(0,ie.jsx)(se().A,{title:(0,ie.jsx)(j().sA,{...qe.copyInternalIntegrationTokenButtonLabel}),...e})}}function Ge(e){const{onShowModal:t}=e;return{key:"page-access",action:t,render:e=>(0,ie.jsx)(se().A,{title:(0,ie.jsx)(j().sA,{...qe.managePageAccess}),...e})}}function He(e){const{pageAccessModalOpen:t,onClose:n,pageAccessData:i,sidebarSpaceStore:o,botStore:s,selectedBlockIdsStore:a}=e;if(i&&o&&s)return(0,ie.jsx)(q().r,{isOpen:t,onClose:n,pageIdsAlreadySharedWithBot:i.pageIdsAlreadySharedWithBot,teamPagesByTeam:i.pageSelectionData.teamPagesByTeam,allTeams:i.pageSelectionData.allTeams,privatePages:i.pageSelectionData.allPrivatePages,pagesSharedWithUser:i.pageSelectionData.allSharedPages,workspacePages:i.pageSelectionData.allWorkspacePages,spaceId:o.id,botStore:s,spaceStore:o,refetchBotSharedPages:i.refetchBotSharedPages,selectedBlockIdsStore:a,pagePickerLocation:"internal_integration_page_picker",integrationManagementPermissions:i.integrationManagementPermissions})}var $e=()=>n(317182);const Ye={automation_action:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.automation_action",defaultMessage:"Automation Action"}),internal:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.internal",defaultMessage:"Internal"}),databaseSync:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.sync",defaultMessage:"Sync"}),linkPreview:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.preview",defaultMessage:"Link Preview"}),importer:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.importer",defaultMessage:"Importer"}),dlp:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.dlp",defaultMessage:"DLP"}),siem:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.siem",defaultMessage:"SIEM"}),ediscovery:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.ediscovery",defaultMessage:"eDiscovery"}),aiConnector:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.pillLabel.aiConnector",defaultMessage:"AI connector"})};function Xe(e){const{integrationIdToBotIds:t,internalIntegrationIds:n,integrationIdToUsers:i}=e,o=(0,a().O$)(w().AppStoreSidebarSpaceStore),s=(0,r().DP)(),l=(0,a().K8)((()=>null==o?void 0:o.getBotSettingsStore().getValue()),[o]),c=(0,a().K8)((()=>"approved_or_built_by_notion"===(null==l?void 0:l.integration_restrictions)),[l]),d=(0,a().K8)((()=>Boolean(null==l?void 0:l.integration_restrictions)),[l]),u=(0,a().K8)((()=>null!=l&&l.integration_approval_statuses?Object.keys(l.integration_approval_statuses):[]),[l]),p=u.filter((e=>!Object.keys(t).includes(e)&&!m().Ei.includes(e)&&e!==h().A)),v=p.some((e=>e===g().Hd)),b=(0,a().K8)((()=>null==o?void 0:o.id),[o]),y=t?Object.entries(t).map((([e,t])=>Qe({integrationPointer:{table:S().Li,id:e},userStores:i[e],botIds:t,autoApproveBuiltByNotion:c}))):[],A=b?n.map((e=>Qe({integrationPointer:{table:f().GP,id:e,spaceId:b},userStores:i[e],botIds:[e]}))):[],I=d?p.map((e=>Qe({integrationPointer:{table:S().Li,id:e},userStores:[],botIds:[],autoApproveBuiltByNotion:c}))):[],C=(0,a().K8)((()=>{const e=!Object.keys(t).includes(h().A),n=u.includes(h().A),i=!(null!=l&&l.integration_restrictions),s=null==o?void 0:o.getRecordModel({table:S().Li,id:h().A});return e&&(c||n||i)&&s}),[o,t,c,u,null==l?void 0:l.integration_restrictions])?[Ze({autoApproveBuiltByNotion:c,userStores:i[h().A]})]:[],M=m().Gw.filter((e=>!(0,x().az)(l)||u.includes(e.id)&&(e.id!==m().IQ||!v))).map((e=>function(e){const{legacyIntegration:t}=e,{id:n,name:i,info:o}=t;return{key:n,columns:[(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:300},children:[(0,ie.jsx)("img",{src:o.icon,style:{height:28}}),(0,ie.jsxs)("div",{style:{minWidth:0,marginInlineStart:15},children:[(0,ie.jsx)("div",{style:{display:"flex"},children:(0,ie.jsx)(pe().A,{children:i})}),(0,ie.jsx)(pe().A,{isSmall:!0,style:{display:"flex"},children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.legacy",defaultMessage:"Notion Connected App"})})]})]},0),(0,ie.jsx)(at,{renderedUsers:void 0,displayUsers:!1},1),(0,ie.jsx)("div",{children:(0,ie.jsx)(fe,{integrationId:n,isLegacy:!0,disableDisconnectAll:!0,disableDisconnectUser:!0})},2)]}}({botSettings:l,legacyIntegration:e}))),k=y.length+A.length+I.length+C.length+M.length;return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)($e().A,{columns:[{key:"integration",header:(0,ie.jsx)(j().sA,{id:"spaceConnectionsSettings.connectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"added_by",header:(0,ie.jsx)(j().sA,{id:"spaceConnectionsSettings.connectionsTable.creationInfoColumn.title",defaultMessage:"Users and access"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:[...y,...A,...I,...C,...M]}),0===k?(0,ie.jsx)("div",{style:{height:120,width:"100%",fontSize:12,color:s.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${s.lightDividerColor}`},children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})}):void 0]})}function Je(e){const{botIdToWebhookSubscriptionId:t,complianceIntegrationsIdToBotIds:n}=e,i=(0,r().IS)((e=>({emptyTable:{height:120,width:"100%",fontSize:12,color:e.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`}})),[]),o=(0,a().O$)(w().AppStoreSidebarSpaceStore),s=(0,a().K8)((()=>{if(!o)return[];return Object.entries(n).flatMap((([e,n])=>n.map((n=>{const i=k().v.createChildStore(o,{table:f().GP,id:n,spaceId:o.id});return{integrationPointer:{table:S().Li,id:e},botId:n,lastEditedAt:Number(i.getLastEditedAt()),lastEditedByPointer:i.getLastEditedByPointer(),webhookSubscriptionId:t[n]}})))).filter(b().O9)}),[t,o,n]).map((e=>function(e){const{integrationPointer:t,lastEditedAt:n,lastEditedByPointer:i,botId:o,webhookSubscriptionId:s}=e,a=t.id,r=(0,y().Q2)(a);if(!r)return;const l=y().lW[r];if(!l)return;return{key:`${a}:${o}`,columns:[(0,ie.jsx)(et,{integrationTable:S().Li,integrationId:a,maybeWebhookSubscriptionId:s},"integration-title"),(0,ie.jsx)(ot,{editedByPointer:i},"integration-edited-by"),(0,ie.jsx)(st,{lastEditedOn:n},"integration-last-edited-on"),(0,ie.jsx)(Ne,{adminIntegrationConfig:l,maybeWebhookSubscriptionId:s,botId:o},"integration-menu")]}}(e))).filter(b().O9);return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)($e().A,{columns:[{key:"integration",header:(0,ie.jsx)(j().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"30%"}},{key:"integration-edited-by",header:(0,ie.jsx)(j().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationEditorColumn.title",defaultMessage:"Edited by"}),style:{width:"30%"}},{key:"integration-edited-on",header:(0,ie.jsx)(j().sA,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationDateLastEdited.title",defaultMessage:"Edited on"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:s,tableStyle:{borderTop:"none"}}),0===s.length?(0,ie.jsx)("div",{style:i.emptyTable,children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})}):void 0]})}function Qe(e){const{integrationPointer:t,userStores:n,botIds:i,autoApproveBuiltByNotion:o}=e;if(t.table===S().Li){const e=t.id,s=(0,g().CX)({integrationId:e})&&!(0,h().Y)(e);return{key:e,columns:[(0,ie.jsx)(et,{integrationTable:S().Li,integrationId:e},"integration-title"),(0,ie.jsx)(at,{renderedUsers:n,displayUsers:!s},"integration-installer-info"),(0,ie.jsx)(fe,{integrationId:e,integrationTable:S().Li,botIds:i,disableDisconnectUser:s||void 0,disableDisallow:s&&o},"admin-integration-settings-menu")]}}if(t.table===f().GP)return{key:t.id,columns:[(0,ie.jsx)(et,{integrationTable:f().GP,integrationId:t.id},"integration-title"),(0,ie.jsx)(at,{renderedUsers:n,displayUsers:!1},"integration-installer-info"),(0,ie.jsx)(Fe,{botId:t.id},"integration-settings-menu")]};(0,b().HB)(t)}function Ze(e){const{autoApproveBuiltByNotion:t,userStores:n}=e;return{key:h().A,columns:[(0,ie.jsx)(et,{integrationTable:S().Li,integrationId:h().A},"integration-title"),(0,ie.jsx)(at,{renderedUsers:n,displayUsers:!0},"integration-installer-info"),(0,ie.jsx)(fe,{integrationId:h().A,integrationTable:S().Li,botIds:[],disableDisconnectUser:void 0,disableDisallow:t},"admin-integration-settings-menu")]}}function et(e){const{integrationId:t,integrationTable:n,maybeWebhookSubscriptionId:i}=e,o=(0,a().O$)(w().AppStoreSidebarSpaceStore),s=(0,r().DP)(),l=(0,a().K8)((()=>{if(o)return o.getRecordModel({table:n,id:t})}),[o,t,n]),d=(0,a().K8)((()=>{var e;if(o&&i)return null===(e=o.getRecordModel({table:v().TF,id:i,spaceId:o.id}))||void 0===e?void 0:e.getHealth()}),[o,i]),[u,h,x,A,C]=(0,a().K8)((()=>{if(!l)return[];let e,i=!1;const o=[];let s;if(n===f().GP){const i=l;i.icon&&(e={pointer:{table:n,id:t},icon:i.icon}),o.push("internal"),s=(0,ie.jsx)(tt,{botId:i.id})}else if(n===S().Li){const a=l,r=a.getInfo();r.icon&&(e={pointer:{table:n,id:t},icon:r.icon}),(0,m().Hy)(a)&&(o.push("linkPreview"),(0,m().Z1)(a)&&o.push("databaseSync")),(0,g().MF)(a)&&(i=!0),s=(0,y().NV)(a.id)?null:(0,ie.jsx)(nt,{integrationId:a.id})}else(0,b().HB)(n);return[null==l?void 0:l.name,i,e,o,s]}),[n,t,l]);if(!l||!A)return(0,ie.jsx)(c().k,{});let M=null;var k;return k=d,(0,b().O9)(k)&&"active"!==k.status&&(M=(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:3},children:[(0,p().Q)({width:12,color:I().M.light.red[500]}),(0,ie.jsx)(pe().A,{isSmall:!0,style:{color:I().M.light.red[500]},children:(0,ie.jsx)(j().sA,{id:"workspaceIntegrationSettings.integrationTable.titleColumn.webhookError",defaultMessage:"Webhook error"})})]})),(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:300},children:[(0,ie.jsx)(Le().B6,{disabled:!0,icon:x,iconRecordCategory:"workspace",title:u,isEmptyPage:!1,size:28,isLarge:!0,useInvertedColors:!0}),(0,ie.jsxs)("div",{style:{minWidth:0,marginInlineStart:15},children:[(0,ie.jsxs)("div",{style:{display:"flex",marginInlineEnd:16,overflow:"hidden"},children:[(0,ie.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,ie.jsx)(pe().A,{children:u}),M]}),h?(0,ie.jsx)(De().A,{desktopStyle:{marginInlineStart:4},innerStyle:{color:s.blue.text.accentPrimary},children:(0,ie.jsx)(j().sA,{id:"betaBadgeComponentInAdminSettings.label",defaultMessage:"Beta"})}):void 0,A.map((e=>e&&(0,ie.jsx)(De().A,{desktopStyle:{marginInlineStart:4},children:Ye[e]},e)))]}),C]})]})}function tt({botId:e}){const t=(0,a().O$)(w().AppStoreSidebarSpaceStore),n=(0,j().tz)(),i=(0,a().K8)((()=>null==t?void 0:t.getRecordModel({table:f().GP,id:e})),[t,e]),o=(0,a().K8)((()=>{if(t&&i){const e=t.getRecordModel({table:i.created_by_table,id:i.created_by_id});return(0,A().c6)(n,e)}}),[t,i,n]);return o?(0,ie.jsx)(pe().A,{className:"notranslate",isSmall:!0,children:o}):(0,ie.jsx)(it,{})}function nt({integrationId:e}){const t=(0,a().O$)(w().AppStoreSidebarSpaceStore),n=(0,a().K8)((()=>{const n=null==t?void 0:t.getRecordModel({table:S().Li,id:e});if("internal"!==(null==n?void 0:n.type))return null==n?void 0:n.getInfo().developer_name}),[t,e]);return(0,g().CX)({integrationId:e})?(0,ie.jsx)(pe().A,{isSmall:!0,style:{display:"flex",alignItems:"center"},children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.notion",defaultMessage:"Notion {icon}",values:{icon:(0,ie.jsx)(We().A,{renderTooltip:()=>(0,ie.jsx)("div",{children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfo.notion.tooltip",defaultMessage:"Developed by Notion"})}),placement:"right",render:e=>(0,ie.jsx)("div",{...e,children:(0,ie.jsx)(l().I,{icon:u().checkmarkShieldFillSmallIcon,size:"sm",colorPalette:"green",colorVariant:"accentPrimary"})})})}})}):n?(0,ie.jsx)(pe().A,{className:"notranslate",isSmall:!0,children:n}):(0,ie.jsx)(it,{})}function it(){return(0,ie.jsx)(pe().A,{isSmall:!0,children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.label.unverifiedDeveloper",defaultMessage:"Unverified developer"})})}function ot(e){const{editedByPointer:t}=e,n=(0,j().tz)(),i=(0,a().K8)((()=>{const e=w().default.state.sidebarSpaceStore;if(e)return e&&t?B().L.createChildStore(e,t):void 0}),[t]),o=(0,a().K8)((()=>null==i?void 0:i.getDisplayName(n)),[i,n]);return i&&o?(0,ie.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},children:[(0,ie.jsx)(ze().A,{userStore:i,size:18}),(0,ie.jsx)(pe().A,{children:o})]}):null}function st(e){const{lastEditedOn:t}=e;return void 0===t?null:(0,ie.jsx)(Oe().s7,{useThinTitle:!0,title:(0,d().W_)(t,"long",o().locale)})}function at(e){const{renderedUsers:t,displayUsers:n}=e,o=(0,a().O$)(w().AppStoreSidebarSpaceStore),r=(0,j().tz)(),l=(0,s().v3)(),c=(0,a().K8)((()=>{if(o)return(0,M().G)(l,o)}),[l,o]),d=(0,i.useMemo)((()=>t&&t.length),[t]),g=(0,a().K8)((()=>t&&t.length>0?t[0]:void 0),[t]),u=(0,a().K8)((()=>g?g.getDisplayName(r):void 0),[g,r]);return n&&void 0!==d?g?(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ie.jsx)(ze().A,{userStore:g,avatarShouldShowShadow:!0,style:{marginInlineEnd:8},size:28}),(0,ie.jsx)(pe().A,{children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.listOfUsers",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} +{remainingCount}} other {{firstUser} +{remainingCount}}}",values:{firstUser:u,remainingCount:d-1}})})]}):(0,ie.jsx)(pe().A,{isSecondaryColor:!0,style:{display:"flex",alignItems:"center"},children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.noUsers",defaultMessage:"No users"})}):(0,ie.jsx)(pe().A,{style:{display:"flex",alignItems:"center"},children:(0,ie.jsx)(j().sA,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.anyone",defaultMessage:"Anyone in {spaceName}",values:{spaceName:(0,ie.jsx)(pe().A,{style:{fontWeight:C().Wy.medium},children:c})}})})}},534842:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,sparklesFillSmallIcon:()=>o});n(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"1.25 1.61 13.5 12.78",svg:(0,n(474848).jsx)("path",{d:"M5.201 2.236a.625.625 0 1 0-1.25 0c0 .389-.249.914-.705 1.37s-.981.705-1.37.705a.625.625 0 0 0 0 1.25c.389 0 .914.25 1.37.706s.705.98.705 1.37a.625.625 0 0 0 1.25 0c0-.39.25-.915.706-1.37s.981-.706 1.37-.706a.625.625 0 1 0 0-1.25c-.389 0-.914-.249-1.37-.705S5.2 2.625 5.2 2.236m5.495 3.42a.625.625 0 0 0-1.25 0c0 .854-.403 1.715-1.058 2.37-.656.656-1.517 1.059-2.37 1.059a.625.625 0 1 0 0 1.25c.853 0 1.714.402 2.37 1.058.655.656 1.058 1.517 1.058 2.37a.625.625 0 0 0 1.25 0c0-.853.402-1.714 1.058-2.37s1.517-1.058 2.37-1.058a.625.625 0 0 0 0-1.25c-.853 0-1.714-.403-2.37-1.058-.656-.656-1.058-1.517-1.058-2.37"})},o=(0,n(340498).wt)("sparklesFillSmall",i)},561585:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const o=new i},738508:(e,t,n)=>{n.r(t),n.d(t,{cursorIcon:()=>s,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_12684_63)",children:[(0,i.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,i.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,i.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,i.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.86 13.61c-.052.093-.192.055-.192-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,i.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_12684_63",children:(0,i.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})},s=(0,n(340498).wt)("cursor",o)},802140:(e,t,n)=>{n.r(t),n.d(t,{claudeIcon:()=>s,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"-0.03 0 20.06 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("g",{clipPath:"url(#clip0_10371_5594)",children:(0,i.jsx)("path",{fill:"#D97757",d:"m3.908 13.296 3.945-2.206.066-.192-.066-.106H7.66l-.66-.04-2.254-.061-1.954-.081-1.894-.101-.477-.102-.447-.587.046-.293.4-.268.574.05 1.27.086 1.903.132 1.381.08 2.046.213h.325l.045-.131-.111-.081-.087-.081-1.97-1.33-2.13-1.407-1.117-.81-.604-.41-.305-.384-.132-.84.548-.602.737.05.187.051.747.572 1.594 1.23L7.4 7.173l.305.253.122-.086.015-.06-.137-.228-1.132-2.04L5.365 2.94l-.538-.86-.142-.517a2.5 2.5 0 0 1-.086-.607l.624-.845L5.568 0l.833.111.35.304.518 1.179.837 1.857 1.3 2.524.38.749.204.693.076.213h.132v-.122l.107-1.421.197-1.746.193-2.246.066-.633.315-.759.624-.41.488.233.4.572-.055.37-.239 1.542-.467 2.419-.304 1.619h.178l.203-.203.822-1.087 1.38-1.72.61-.684.71-.753.457-.36h.863l.635.941-.284.972-.889 1.123-.736.951-1.056 1.417-.66 1.133.061.091.158-.015 2.386-.506 1.289-.233 1.538-.263.696.324.076.329-.274.673-1.645.405-1.93.384-2.872.678-.036.025.04.051 1.295.121.553.03h1.356l2.523.188.66.435.396.531-.066.405-1.015.516-1.371-.324-3.198-.759-1.097-.273h-.152v.091l.914.89 1.675 1.508 2.097 1.943.106.48-.269.38-.284-.04-1.843-1.381-.71-.623-1.61-1.35h-.106v.141l.37.541 1.96 2.935.101.9-.142.294-.508.177-.558-.101-1.147-1.604-1.183-1.806-.954-1.62-.117.067-.564 6.046-.264.308-.609.233-.507-.384-.27-.623.27-1.23.324-1.603.264-1.275.239-1.584.142-.526-.01-.035-.117.015-1.198 1.64-1.822 2.453-1.442 1.538-.345.137-.6-.309.057-.551.335-.491 1.995-2.53L8 13.074l.777-.906-.006-.132h-.045l-5.3 3.43-.944.122-.406-.38.05-.622.193-.202 1.594-1.093z"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_10371_5594",children:(0,i.jsx)("rect",{width:"20",height:"20",fill:"#fff",rx:"10"})})})]})},s=(0,n(340498).wt)("claude",o)},870897:(e,t,n)=>{n.d(t,{Ay:()=>Fe,s_:()=>Ye,mX:()=>Xe});n(944114),n(898992),n(354520),n(581454),n(908872);var i=n(296540),o=()=>n(564884),s=()=>n(59226),a=()=>n(484714),r=()=>n(56366),l=()=>n(401497),c=()=>n(718827),d=()=>n(252291),g=()=>n(160432),u=()=>n(148307),p=()=>n(529099),m=()=>n(218275),h=()=>n(452745),f=()=>n(617668),S=()=>n(388693),v=()=>n(558687),b=()=>n(824862),x=()=>n(798880),y=()=>n(322769),A=()=>n(762433),j=()=>n(979340),I=()=>n(20498),C=()=>n(69708),M=()=>n(496603),w=()=>n(534177),k=()=>n(284371),B=()=>n(209660),_=()=>n(384944),P=()=>n(27579),N=()=>n(231297),T=()=>n(805768);const D=n.p+"ce499dd1f3aabcfa.png";var L=()=>n(604018),O=()=>n(310001),W=()=>n(709062),z=()=>n(232930),U=()=>n(644914),K=()=>n(765957),E=()=>n(992237),R=()=>n(561585),q=()=>n(955054),F=()=>n(53137),V=()=>n(258836),G=()=>n(870092),H=()=>n(404141),$=()=>n(779795),Y=()=>n(991249),X=()=>n(324561),J=()=>n(10984),Q=()=>n(981046),Z=()=>n(303470),ee=()=>n(30537),te=()=>n(631524),ne=()=>n(689094),ie=()=>n(100622),oe=()=>n(972435),se=(n(737550),()=>n(929219)),ae=()=>n(617871),re=()=>n(332393),le=()=>n(498212),ce=()=>n(559506),de=()=>n(722872),ge=()=>n(361330),ue=()=>n(249185),pe=()=>n(251126),me=()=>n(760217),he=()=>n(404277),fe=()=>n(678553),Se=()=>n(939740),ve=()=>n(824160),be=()=>n(187820),xe=()=>n(89924),ye=()=>n(125565),Ae=()=>n(320865),je=n(474848);function Ie(e){const{query:t}=e,n=(0,a().v3)(),o=(0,r().O$)(K().AppStoreSidebarSpaceStore),s=(0,r().K8)((()=>null==o?void 0:o.getBotSettingsStore().getValue()),[o]),l="approved_or_built_by_notion"===(null==s?void 0:s.integration_restrictions),c=(0,r().K8)((()=>null!=s&&s.integration_approval_statuses?Object.keys(s.integration_approval_statuses):[]),[s]),d=(0,r().K8)((()=>Object.keys(ae().Nu).map((e=>{const t=null==o?void 0:o.getRecordModel({id:e,table:re().Li});if((0,w().O9)(t)){var n;if("published"===t.status)return{id:e,name:t.name,status:"published"};if(null!=o&&o.id&&"external"===t.type&&null!==(n=t.getInfo())&&void 0!==n&&null!==(n=n.extra_testing_space_ids)&&void 0!==n&&n.includes(o.id))return{id:e,name:t.name,status:"test"}}})).filter(w().O9)),[o]),g=(0,i.useMemo)((()=>d.some((e=>e.id===ae().Hd))),[d]),u=(0,r().K8)((()=>d.filter((e=>!c.includes(e.id))).filter((e=>"published"===e.status)).map((e=>e.id)).slice(0,5)),[c,d]);return(0,je.jsx)(he().A,{menuType:de().gu.Popup,width:255,header:we({query:t,hasDefaultResults:!l&&u.length>0}),children:(0,je.jsx)(pe().A,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:n,environment:i,spaceId:o,approvedIntegrationIds:s,popularIntegrationIds:a,autoApproveBuiltByNotion:r}=e;if(!se().A.state.online||!o)return[];if((0,le().uj)(t)||(0,le().c_)(t))return[t];if(""===t&&!r)return a;const l=await ce().callApi({eventName:"searchIntegrations",environment:i,data:{query:t,type:n,spaceId:o}});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!s.includes(e)));if(!r){return e.sort(((e,t)=>(0,ae().CX)({integrationId:e})===(0,ae().CX)({integrationId:t})?0:(0,ae().CX)({integrationId:e})?-1:1)).slice(0,5)}return e.filter((e=>!(0,ae().CX)({integrationId:e}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,w().HB)(l)}({query:e,environment:n,spaceId:null==o?void 0:o.id,approvedIntegrationIds:c,popularIntegrationIds:u,autoApproveBuiltByNotion:l}),debounce:ge().tu,render:(i,a,r)=>{if(!a||!r)return(0,je.jsx)(xe().A,{children:(0,je.jsx)(Ae().A,{})});const l=S().Gw.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!c.includes(e.id)&&(e.id!==S().IQ||!g))),u=d.filter((e=>"test"===e.status)).filter((e=>{const n=e.name.toLowerCase(),i=t.toLowerCase(),o=!c.includes(e.id);return n.includes(i)&&o})).map((e=>e.id)),p=[];if(0===a.length&&0===l.length&&0===u.length)p.push({key:"no_results",render:()=>(0,je.jsx)(ye().A,{isSmall:!0,style:{marginInlineStart:8},children:(0,je.jsx)(C().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=[...u,...a].map((t=>{const i={table:re().Li,id:t};if(!o)return;const a=ue().C.createChildStore(o,i);if("internal"===a.getType())return;const r=a.getInfo(),l=null==r?void 0:r.icon;return{key:`${t}`,render:e=>(0,je.jsx)(me().A,{...e,title:(0,je.jsx)(ye().A,{style:{fontWeight:k().Wy.semibold},children:a.getName()}),icon:l&&(0,je.jsx)(be().B6,{disabled:!0,icon:{pointer:i,icon:l},isEmptyPage:!1,size:20}),style:l?{paddingBottom:12}:{paddingInlineStart:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,je.jsx)(ke,{tagline:null==r?void 0:r.tagline,isNotionIntegration:(0,ae().CX)({integrationId:a.id})}),className:"notranslate"}),action:()=>{e.closeDropdown(),Me({environment:n,currentSpaceStore:o,botSettings:s,integrationId:t})}}})).filter(w().O9),i=l.map((t=>{const i=t.info;return{key:`${t.id}`,render:e=>(0,je.jsx)(me().A,{...e,title:(0,je.jsx)(ye().A,{style:{fontWeight:k().Wy.semibold},children:t.name}),icon:(0,je.jsx)("img",{src:i.icon,style:{height:20}}),caption:i.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"}),action:()=>{e.closeDropdown(),Me({environment:n,currentSpaceStore:o,botSettings:s,integrationId:t.id})}}})).filter(w().O9);p.push(...t,...i)}return(0,je.jsx)(Se().Ay,{type:Se().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,je.jsx)(xe().A,{...e}),items:p}]})}})})}function Ce(e){const{query:t}=e,n=(0,a().v3)(),i=(0,r().O$)(K().AppStoreSidebarSpaceStore);return i?(0,je.jsx)(he().A,{menuType:de().gu.Popup,width:255,header:we({query:t,hasDefaultResults:!1}),children:(0,je.jsx)(pe().A,{request:t,performRequest:e=>async function(e){const{query:t,environment:n,spaceId:i}=e;if(!se().A.state.online||!i)return[];if((0,le().uj)(t)||(0,le().c_)(t))return[t];const o=await ce().callApi({eventName:"searchIntegrations",environment:n,data:{query:t,type:"compliance",spaceId:i}});if("success"===o.type)return o.data.integrationIds;if("failed"===o.type)throw o.error;return(0,w().HB)(o)}({query:e,environment:n,spaceId:null==i?void 0:i.id}),debounce:ge().tu,render:(t,n,o)=>{if(!n||!o)return(0,je.jsx)(xe().A,{children:(0,je.jsx)(Ae().A,{})});const s=[];if(0===n.length)s.push({key:"no_results",render:()=>(0,je.jsx)(ye().A,{isSmall:!0,style:{marginInlineStart:8},children:(0,je.jsx)(C().sA,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=E().A.state.loaded&&F().A.state.loaded?E().A.state.webhookSubscriptions.map((e=>{var t;return null===(t=F().A.getBotsAsRecordMap().getValue({table:b().GP,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],o=n.map((n=>{var o;const s=ue().C.createChildStore(i,{id:n,table:re().Li});if(t.includes(n))return;const a={table:re().Li,id:n},r=ue().C.createChildStore(i,a),l=null===(o=r.getInfo())||void 0===o?void 0:o.icon,c=(0,I().Hr)(r.id);return{key:`${n}`,render:e=>(0,je.jsx)(me().A,{...e,title:(0,je.jsxs)("div",{style:{display:"flex",float:"inline-start",alignItems:"center"},children:[(0,je.jsx)(ye().A,{style:{fontWeight:k().Wy.semibold},children:r.getName()}),null!=c&&c.type?(0,je.jsx)("div",{style:{marginInlineStart:4},children:(0,je.jsx)(ve().A,{children:c.type})}):void 0]}),icon:l&&(0,je.jsx)(be().B6,{disabled:!0,icon:{pointer:a,icon:l},isEmptyPage:!1,size:20}),style:null!=c&&c.icon?{paddingBottom:12}:{paddingInlineStart:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,je.jsx)(ke,{tagline:null!=c&&c.tagline?oe().A.formatMessage(null==c?void 0:c.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})}),action:()=>{var t;e.closeDropdown();s.getModel()&&(null!=c&&null!==(t=c.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==c?void 0:c.type))?q().A.setState({open:!0,integrationId:r.id}):R().A.setState({open:!0,integrationId:r.id})}}})).filter(w().O9);s.push(...o)}return(0,je.jsx)(Se().Ay,{type:Se().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,je.jsx)(xe().A,{...e}),items:s}]})}})}):null}function Me(e){const{environment:t,currentSpaceStore:n,botSettings:i,integrationId:o}=e;if(n&&!(0,I().NV)(o)){const e={...null==i?void 0:i.integration_approval_statuses,[o]:{type:"integration",status:"approved"}};N().createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,canUndo:!0,perform:t=>{_().zv({store:n,data:{bot_settings:{...i,integration_approval_statuses:e}},transaction:t})}})}}function we({query:e,hasDefaultResults:t}){return!e&&t&&(0,je.jsx)(fe().Ay,{title:(0,je.jsx)(ye().A,{isSmall:!0,style:{marginTop:4,fontWeight:k().Wy.medium},children:(0,je.jsx)(C().sA,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"})})})}function ke(e){const{tagline:t,isNotionIntegration:n}=e,i=n?{}:{maxHeight:52,overflow:"auto"};return t?(0,je.jsxs)("div",{style:i,children:[t,n?(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8,gap:2},children:[(0,je.jsx)(C().sA,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,je.jsx)(d().I,{icon:h().checkmarkShieldFillSmallIcon,size:"sm",colorPalette:"green",colorVariant:"accentPrimary"})]}):void 0]}):null}var Be=()=>n(623580),_e=()=>n(417392);const Pe=(0,C().YK)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"},complianceIntegrationSearchInputPlaceholder:{id:"adminConnectionsSettings.search.input.complianceIntegrationPlaceholder",defaultMessage:"Add by name"}});function Ne(){const e=(0,a().WS)(),t=(0,l().DP)(),[n,o]=(0,i.useState)(!0),[s,r]=(0,i.useState)(!1),[d,g]=(0,i.useState)(""),u=(0,i.useRef)(null);return n?(0,je.jsx)(c().Ay,{style:{display:"flex",alignItems:"center",height:28,fontWeight:k().Wy.medium,fontSize:k().J.UIRegular.desktop,color:ie().Tj.blue,padding:"0px 6px"},onClick:()=>{o(!1)},children:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon} Add approved connection",values:{plusIcon:(0,ne().W)({fill:ie().Tj.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,je.jsx)(_e().Ay,{alignmentToOrigin:"start",keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),o(!0),r(!1)},origin:(0,je.jsx)(Be().A,{type:"text",style:{width:255},left:(0,ne().W)({fill:t.icon.tertiary,width:14,height:14,marginInlineEnd:8,flexGrow:0,flexShrink:0}),ref:u,value:d,onFocus:()=>{r(!0)},placeholder:oe().A.formatMessage(Pe.searchInputPlaceholder),onChange:e=>g(e.target.value)}),open:s,popupType:ee().n.Popup,style:{width:255},render:()=>(0,je.jsx)(Ie,{query:d,closeDropdown:()=>r(!1)})})}function Te(){const e=(0,a().WS)(),t=(0,l().DP)(),[n,o]=(0,i.useState)(!0),[s,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),g=(0,i.useRef)(null);return n?(0,je.jsx)(te().p,{colorPalette:"blue",style:{display:"flex",alignItems:"center",height:28,fontWeight:k().Wy.medium,fontSize:k().J.UIRegular.desktop,color:ie().Tj.blue,padding:"0px 6px"},onClick:()=>{var e;o(!1),null===(e=g.current)||void 0===e||e.focus()},children:(0,je.jsx)(C().sA,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon} Add connection",values:{plusIcon:(0,ne().W)({fill:ie().Tj.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,je.jsx)(_e().Ay,{alignmentToOrigin:"start",keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;g.current&&t===g.current&&g.current.blur(),o(!0),r(!1)},origin:(0,je.jsx)(Be().A,{type:"text",style:{width:255},left:(0,ne().W)({fill:t.icon.tertiary,width:14,height:14,marginInlineEnd:8,flexGrow:0,flexShrink:0}),focus:!0,ref:g,value:c,onFocus:()=>{r(!0)},placeholder:oe().A.formatMessage(Pe.complianceIntegrationSearchInputPlaceholder),onChange:e=>d(e.target.value)}),open:s,popupType:ee().n.Popup,style:{width:255},render:()=>(0,je.jsx)(Ce,{query:c,closeDropdown:()=>{o(!0),r(!1)}})})}var De=()=>n(523163),Le=()=>n(974679),Oe=()=>n(949734),We=()=>n(802790),ze=()=>n(515918),Ue=()=>n(719147),Ke=()=>n(702723),Ee=()=>n(987017);const Re=["member_connections","workspace_connections"],qe=(0,C().YK)({aiSettingsCardName:{id:"AdminConnectionsSettings.aiSettingsCardName",defaultMessage:"Notion AI Connectors"},aiSettingsCardCaption:{id:"AdminConnectionsSettings.aiSettingsCardCaption",defaultMessage:"Get search results, AI answers, summaries and more without leaving Notion."},mcpSettingsCardName:{id:"AdminConnectionsSettings.mcpSettingsCardName",defaultMessage:"Notion MCP"},mcpSettingsCardCaption:{id:"AdminConnectionsSettings.mcpSettingsCardCaption",defaultMessage:"Connect Notion to your AI tools to summarize, search, and move faster."}});function Fe(e){const t=(0,a().v3)(),{isMobile:n}=t.device,{guestBotIds:o,organizationOverrides:u}=e,p=(0,r().O$)(K().AppStoreSidebarSpaceStore),h=(0,r().K8)((()=>null==p?void 0:p.id),[p]),f=(0,r().K8)((()=>E().A.webhookSubscriptions.state.reduce(((e,t)=>{const n=t.getBotId();return n&&(e[n]=t.id),e}),{})),[]),v=(0,s().X)("webhooks_beta"),y=(0,C().tz)(),B=(0,r().K8)((()=>(0,L().kB)()),[]),_=(0,r().K8)((()=>Ye({intl:y,environment:t,from:"workspace_connections_settings",enabledConnectors:B})),[B,t,y]),N=(0,r().K8)((()=>p?(0,M().sb)([...o,...F().A.bots.state.map((e=>e.id))]).map((e=>{const t=V().v.createChildStore(p,{table:b().GP,id:e,spaceId:p.id});return t.getAlive()?t:void 0})).filter(w().O9):[]),[p,o]),T=(0,r().K8)((()=>(0,O().Mo)(N)),[N]),D=(0,r().K8)((()=>function(e){return e.filter((e=>e.isInternalBot())).map((e=>e.id))}(N)),[N]),W=(0,r().K8)((()=>function(e,t){if(!t)return{};return e.reduce(((e,n)=>{const i=G().L.createChildStore(t,{table:x().oo,id:n.getCreatedById()}),o=n.getIntegrationId();return o?e[o]=o in e?[...e[o],i]:[i]:e[n.id]=[i],e}),{})}(N,p)),[N,p]),z=(0,r().K8)((()=>null==p?void 0:p.getBotSettingsStore().getValue()),[p]),U=(0,r().K8)((()=>Object.keys(T.nonCompliance).length+D.length),[T.nonCompliance,D]),J=(0,r().K8)((()=>Object.values(T.compliance).flat().length),[T.compliance]),ee=(0,r().K8)((()=>null!=z&&z.integration_approval_statuses?Object.keys(z.integration_approval_statuses).length+D.length:D.length),[z,D]),te={member_connections:(0,je.jsx)(C().sA,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==U&&(0,je.jsx)(ye().A,{isSecondaryColor:!0,style:{marginInlineStart:6},children:U+S().Ei.length})}}),workspace_connections:(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(C().sA,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==J&&(0,je.jsx)(ye().A,{isSecondaryColor:!0,style:{marginInlineStart:6},children:J})}}),(0,je.jsx)(ze().A,{})]})},ne=Re.map((e=>te[e])),ie=(0,r().K8)((()=>"integrations"===H().A.state.currentTab?H().A.state.defaultSubtab:void 0),[]),oe=(0,r().K8)((()=>E().A.integrations.state),[]),[se,ae]=(0,i.useState)(ie||"member_connections"),re=(0,X().lh)({spaceId:h}),le="enterprise"===(0,A().AI)(re),ce=le?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},de=(0,s().X)("upgrade_system_settings"),ge=ce&&de,ue=Boolean(u.integration_restrictions),pe=Boolean(u.disallow_webhook_automation_action),me=(0,l().IS)((e=>({connectedSection:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},connectedSectionDescription:{fontSize:14,marginInlineEnd:8,color:e.text.tertiary,fontWeight:400,marginBottom:12},addMenu:{position:"absolute",insetInlineEnd:0,top:0},discoverSectionUpsell:{backgroundColor:e.palette.uiBlue[100],padding:16,paddingBottom:8,borderRadius:6},discoverSectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},discoverSectionTitle:{fontSize:16,fontWeight:510},discoverSectionButtons:{display:"flex"},learnMoreButton:{padding:"0px 8px",borderRadius:4,display:"flex",alignItems:"center",gap:6,color:e.blue.text.accentPrimary},upgradeButton:{marginInlineStart:12,padding:"0px 14px"}})),[]),he={member_connections:()=>(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(Ve,{isIntegrationRestrictionsControlledByOrganization:ue}),null!=z&&z.integration_restrictions?(0,je.jsx)("div",{style:{marginTop:"19px"},children:(0,je.jsx)(Ge,{isIntegrationRestrictionsControlledByOrganization:ue})}):void 0,(0,je.jsx)("div",{style:{marginTop:"19px"},children:(0,je.jsx)(He,{isDisallowWebhookAutomationsControlledByOrganization:pe})}),(0,je.jsx)(We().A,{size:n?32:18,isHidden:!n}),Boolean(null==z?void 0:z.integration_restrictions)?(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19},children:[(0,je.jsx)(ye().A,{style:{fontWeight:k().Wy.medium,display:"flex",alignItems:"center",height:28},children:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==ee&&(0,je.jsx)(ye().A,{isSecondaryColor:!0,style:{marginInlineStart:6},children:ee})}})}),(0,je.jsx)(Ne,{})]}):(0,je.jsx)(ye().A,{style:{fontWeight:k().Wy.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"},children:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==U&&(0,je.jsx)(ye().A,{isSecondaryColor:!0,style:{marginInlineStart:6},children:U+S().Ei.length})}})}),(0,je.jsx)(De().Ay,{integrationIdToBotIds:T.nonCompliance,internalIntegrationIds:D,integrationIdToUsers:W}),(0,je.jsx)("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4},children:(0,je.jsx)(Oe().W,{})})]}),workspace_connections:()=>{const e=Object.keys(T.compliance),n=e.length>0,i=function(e){const{allIntegrations:t,connectedIntegrationIds:n,isEnterprise:i}=e,o=[];for(const s of t)if(!n.includes(s.id)){const e=(0,I().Hr)(s.id);if(!e)continue;if("internal"===s.type)continue;o.push({id:s.id,appName:s.name,account:void 0,caption:s.getInfo().tagline,logo:s.getInfo().icon,shouldHideInDiscover:!1,shouldShowNewBadge:!1,shouldHideConnectAccount:!0,shouldShowUpsell:!i,integrationTypes:[e.type],capabilities:void 0,canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)||"ediscovery"===(null==e?void 0:e.type)?q().A.setState({open:!0,integrationId:s.id}):R().A.setState({open:!0,integrationId:s.id})},onDisconnect:()=>{}})}return o}({allIntegrations:oe,connectedIntegrationIds:e,isEnterprise:le});le&&i.unshift(..._);const o=i.length>0||_.length>0;return v?(0,je.jsxs)(je.Fragment,{children:[n?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)("span",{style:me.connectedSectionDescription,children:(0,je.jsx)(C().sA,{id:"admin.connections.tab.workspace_connections.description",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them"})}),(0,je.jsxs)("div",{style:me.connectedSection,children:[(0,je.jsx)("div",{style:me.addMenu,children:(0,je.jsx)(Te,{})}),(0,je.jsx)(De().KM,{botIdToWebhookSubscriptionId:f,complianceIntegrationsIdToBotIds:T.compliance})]})]}):void 0,o?(0,je.jsx)("div",{children:ge?(0,je.jsx)(Z().w,{upsell:ce,source:"workspace_connections",title:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Customize Notion with advanced integrations"}),description:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.discoverNewConnectionsSection.description",defaultMessage:"Get the {planName} plan to keep information flowing in and out of Notion",values:{planName:(0,j().u2)({product:ce.product,intl:y})}}),onClickLearnMore:()=>{(0,P().L)({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},icons:Ze}):(0,je.jsx)("div",{style:{...le?{}:me.discoverSectionUpsell,marginTop:n?32:void 0},children:(0,je.jsx)(Le().A,{apps:i,numberOfConnectedApps:e.length,numberOfDisplayRows:2,title:(0,je.jsxs)("div",{style:me.discoverSectionHeader,children:[(0,je.jsx)("div",{style:me.discoverSectionTitle,children:le?(0,je.jsx)(C().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"}):(0,je.jsx)(C().sA,{id:"connectionsSettings.discoverNewConnectionsSection.titleUpsell",defaultMessage:"Upgrade to Enterprise to use these connections"})}),ce?(0,je.jsxs)("div",{style:me.discoverSectionButtons,children:[(0,je.jsxs)(c().Ay,{onClick:()=>{(0,P().L)({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},style:me.learnMoreButton,children:[(0,je.jsx)(C().sA,{defaultMessage:"Learn more",id:"connectionsSettings.discoverNewConnectionsSection.learnMore"}),(0,je.jsx)(d().I,{icon:m().arrowUpRightSquareSmallIcon,size:"sm"})]}),(0,je.jsx)(g().A,{colorPalette:"blue",style:me.upgradeButton,onClick:async()=>{p&&($().$W({environment:t,spaceId:p.id}),await Q().A.waitUntilReady()),Y().K(t,{from:"workspace_connections",upsell:ce,dontOpenPlansOnCancel:!0})},children:(0,je.jsx)(C().sA,{defaultMessage:"Upgrade",id:"connectionsSettings.discoverNewConnectionsSection.upgrade"})})]}):void 0]})})})}):void 0]}):null}},fe=e=>he[e];return v?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(Ee().Ay,{tabs:ne,selectedIndex:Re.findIndex((e=>e===se)),onChange:e=>(e=>{ae(Re[e])})(e),style:{paddingInlineStart:0,paddingInlineEnd:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),fe(se)()]}):fe("member_connections")()}function Ve({isIntegrationRestrictionsControlledByOrganization:e}){const t=(0,a().v3)(),n=(0,r().O$)(K().AppStoreSidebarSpaceStore),{isMobile:i}=t.device,o=(0,r().K8)((()=>(0,J().OX)()),[]),s=(0,r().K8)((()=>null==n?void 0:n.getBotSettingsStore().getValue()),[n]),l=o?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"};return(0,je.jsx)(Ke().A,{isMobile:i,isLocked:e,lockedTooltip:(0,W().C_)(),title:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,y().az)(s)?(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:l?{upsell:l,analyticsName:"integration_settings",customMessages:Je}:void 0,type:"dropdown",currentOption:(0,y().az)(s)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:(0,je.jsx)(C().sA,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:(0,je.jsx)(C().sA,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:i=>{e||function(e){const{environment:t,currentSpaceStore:n,botSettings:i,setting:o}=e;if(n){if("allow_list"===o&&(0,y().az)(i))return;const e="allow_list"===o?"approved_only":void 0;N().createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,canUndo:!0,perform:t=>{_().zv({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:t,currentSpaceStore:n,botSettings:s,setting:i})},info:[{key:"learn_more",label:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})}function Ge(e){const{isIntegrationRestrictionsControlledByOrganization:t}=e,n=(0,a().v3)(),i=(0,r().O$)(K().AppStoreSidebarSpaceStore),{isMobile:o}=n.device,s=(0,r().K8)((()=>(0,J().OX)()),[]),c=(0,r().K8)((()=>null==i?void 0:i.getBotSettingsStore().getValue()),[i]),g=(0,l().IS)((e=>({builtbynotion:{color:e.green.text.accentPrimary,marginInlineEnd:2,marginInlineStart:2,gap:2,display:"flex",alignItems:"center"}})),[]),u=s?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"};return(0,je.jsx)(Ke().A,{isMobile:o,title:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>(0,je.jsxs)("span",{style:g.builtbynotion,children:[(0,je.jsx)(d().I,{icon:h().checkmarkShieldFillSmallIcon,size:"sm"}),e]})}}),caption:(0,je.jsx)(C().sA,{defaultMessage:"Toggle this on to approve all workspace members to install connections <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>(0,je.jsx)(Ue().A,{href:(0,z().x)("guides.enterpriseIntegrationSettings"),children:e})}}),upsellOptions:u?{upsell:u,analyticsName:"integration_settings"}:void 0,type:"toggle",isOn:"approved_or_built_by_notion"===(null==c?void 0:c.integration_restrictions),onToggle:()=>{t||function(e){const{environment:t,currentSpaceStore:n,botSettings:i}=e;if(n){const e="approved_or_built_by_notion"===(null==i?void 0:i.integration_restrictions)?"approved_only":"approved_or_built_by_notion";N().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:t=>{_().zv({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:n,currentSpaceStore:i,botSettings:c})},isLocked:t,lockedTooltip:(0,W().C_)()})}function He({isDisallowWebhookAutomationsControlledByOrganization:e}){const t=(0,a().v3)(),{isMobile:n}=t.device,o=(0,r().O$)(K().AppStoreSidebarSpaceStore),s=(0,r().K8)((()=>(0,J().OX)()),[])?void 0:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},l=(0,r().K8)((()=>Boolean(null==o?void 0:o.getSettingsStore().getKeyStore("disallow_webhook_automation_action").getValue())),[o]),c=!l,d=(0,i.useCallback)((()=>{o&&!e&&N().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:e=>{_().zv({store:o.getSettingsStore(),data:{disallow_webhook_automation_action:!l},transaction:e})}})}),[o,l,t,e]);return(0,je.jsx)(Ke().A,{isMobile:n,isLocked:e,lockedTooltip:(0,W().C_)(),title:(0,je.jsx)(C().sA,{id:"adminConnectionsSettings.allowWebRequestsInAutomations.title",defaultMessage:"Allow webhooks in automations"}),caption:(0,je.jsx)(C().sA,{defaultMessage:"Allow webhooks to third-party tools in database automations and buttons.",id:"adminConnectionsSettings.allowWebRequestsInAutomations.caption"}),upsellOptions:s?{upsell:s,analyticsName:"integration_settings",customMessages:Qe}:void 0,type:"toggle",isOn:c,onToggle:d})}function $e(e){const{mainIcon:t,connectors:n}=e;return(0,je.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center",paddingTop:8,paddingBottom:12},children:[(0,je.jsx)(d().I,{icon:t}),(0,je.jsx)(d().I,{icon:f().plusIcon,size:"xxs",colorVariant:"secondary"}),(0,je.jsx)(T().hC,{connectors:n,maxBubbles:6,iconSize:14})]})}function Ye(e){const{intl:t,environment:n,from:i,enabledConnectors:s}=e;return[{id:"ai_settings_link",appName:t.formatMessage(qe.aiSettingsCardName),caption:t.formatMessage(qe.aiSettingsCardCaption),account:void 0,shouldShowNewBadge:!0,canSelectPageAccess:!1,onConnect(){B().Ow({currentTab:"ai"}),(0,o().u)({environment:n,event:{eventName:"open_settings",eventProperties:{tab:"ai",from:i,...(0,U().hX)({environment:n})}}})},onDisconnect(){},logo:s.length>0?$e({mainIcon:p().aiFaceIcon,connectors:s}):D,width:"auto",capabilities:(0,je.jsx)("div",{style:{display:"none"}}),showExploreButton:!0}]}function Xe(e){const{intl:t,setPage:n}=e;return[{id:"mcp_settings_link",appName:t.formatMessage(qe.mcpSettingsCardName),caption:t.formatMessage(qe.mcpSettingsCardCaption),account:void 0,canSelectPageAccess:!1,onConnect(){n("mcp_settings")},onDisconnect(){},logo:$e({mainIcon:v().notionIcon,connectors:["cursor","claude","chatgpt"]}),width:"auto",capabilities:(0,je.jsx)("div",{style:{display:"none"}}),showExploreButton:!0}]}const Je=(0,C().YK)({eligible_for_upgrade:{id:"adminConnectionsSettings.connectionUpgradeMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to control what workspace members can install"},eligible_for_trial:{id:"adminConnectionsSettings.connectionUpgradeMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to control what workspace members can install"},sales_eligible:{id:"adminConnectionsSettings.connectionUpgradeMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to control what workspace members can install"},sales_assisted:{id:"adminConnectionsSettings.connectionUpgradeMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to control what workspace members can install"},eligible_to_request:{id:"adminConnectionsSettings.connectionUpgradeMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to control what workspace members can install"},not_eligible:{id:"adminConnectionsSettings.connectionUpgradeMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to control what workspace members can install"},request_pending:{id:"adminConnectionsSettings.connectionUpgradeMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to control what workspace members can install"}}),Qe=(0,C().YK)({eligible_for_upgrade:{id:"adminConnectionsSettings.webhookUpgradeMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to disable webhooks to third-party tools in database automations and buttons"},eligible_for_trial:{id:"adminConnectionsSettings.webhookUpgradeMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to disable webhooks to third-party tools in database automations and buttons"},sales_eligible:{id:"adminConnectionsSettings.webhookUpgradeMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to disable webhooks to third-party tools in database automations and buttons"},sales_assisted:{id:"adminConnectionsSettings.webhookUpgradeMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to disable webhooks to third-party tools in database automations and buttons"},eligible_to_request:{id:"adminConnectionsSettings.webhookUpgradeMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to disable webhooks to third-party tools in database automations and buttons"},not_eligible:{id:"adminConnectionsSettings.webhookUpgradeMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to disable webhooks to third-party tools in database automations and buttons"},request_pending:{id:"adminConnectionsSettings.webhookUpgradeMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to disable webhooks to third-party tools in database automations and buttons"}}),Ze=[{src:u().A.images.externalIntegrations.pantherLogoPng,isSquare:!0,width:20,height:20},{src:u().A.images.externalIntegrations.nightfallLogoSvg},{src:u().A.images.externalIntegrations.datadogLogoPng,isSquare:!0,width:28,height:28},{src:u().A.images.externalIntegrations.sumoLogicLogoJpeg},{src:u().A.images.externalIntegrations.splunkLogoJpeg},{src:u().A.images.externalIntegrations.polymerLogoJpeg}]},939938:(e,t,n)=>{n.d(t,{et:()=>He,sm:()=>Xe});n(944114),n(898992),n(354520),n(672577),n(581454),n(737550);var i=n(296540),o=()=>n(242422),s=()=>n(484714),a=()=>n(56366),r=()=>n(611648),l=()=>n(98126),c=()=>n(148307),d=()=>n(799288),g=()=>n(617871),u=()=>n(187174),p=()=>n(388693),m=()=>n(45331),h=()=>n(824862),f=()=>n(96689),S=()=>n(322769),v=()=>n(20498),b=()=>n(69708),x=()=>n(496603),y=()=>n(534177),A=()=>n(559926),j=()=>n(559506),I=()=>n(726637),C=()=>n(651784),M=()=>n(939768),w=()=>n(901389),k=()=>n(725951);const B=new(n(463830).A);var _=()=>n(496414),P=()=>n(383466);const N=(0,b().YK)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",defaultMessage:"Authenticating with Asana…"},titleMessage:{defaultMessage:"Asana login",id:"asanaActions.loginWithAsanaPopupModal.title"}});var T=()=>n(908928),D=()=>n(566254),L=()=>n(415559),O=()=>n(324009),W=()=>n(510683),z=()=>n(192591),U=()=>n(949237),K=()=>n(604018);var E=()=>n(310001),R=()=>n(272509),q=()=>n(765957),F=()=>n(53137),V=()=>n(258836),G=()=>n(40851),H=()=>n(749240),$=()=>n(870897),Y=()=>n(251126),X=()=>n(974679),J=()=>n(949734),Q=()=>n(2143),Z=()=>n(8178),ee=()=>n(564884),te=()=>n(401497),ne=()=>n(699143),ie=()=>n(252291),oe=()=>n(493552),se=()=>n(879765),ae=()=>n(116089),re=()=>n(802140),le=()=>n(738508),ce=()=>n(89116),de=()=>n(284371),ge=()=>n(27579),ue=()=>n(968021),pe=()=>n(232930),me=()=>n(285790),he=()=>n(719147);const fe={currentPage:"home",setPage:()=>{}},Se=(0,i.createContext)(fe);Se.displayName="UserConnectionsSettingsPageContext";var ve=n(474848);const be=(0,b().YK)({mcpSettingsTitle:{id:"userConnectionsSettings.mcpSettingsTitle",defaultMessage:"Notion MCP"},connectMcpTitle:{id:"userConnectionsSettings.connectMcpTitle",defaultMessage:"Explore popular AI tools"},connectMcpDescription:{id:"userConnectionsSettings.connectMcpDescription",defaultMessage:"Connect Notion to your favorite AI tools to search, write, and keep everything up to date. <learnmore>Learn more</learnmore>"},chatGptProCardName:{id:"userConnectionsSettings.chatGptProCardName",defaultMessage:"ChatGPT"},chatGptProCardCaption:{id:"userConnectionsSettings.chatGptProCardCaption",defaultMessage:"Get context from Notion in your Deep Research queries in ChatGPT"},claudeCardName:{id:"userConnectionsSettings.claudeCardName",defaultMessage:"Claude"},claudeCardCaption:{id:"userConnectionsSettings.claudeCardCaption",defaultMessage:"Turn Claude into your Notion collaborator"},cursorCardName:{id:"userConnectionsSettings.cursorCardName",defaultMessage:"Cursor"},cursorCardCaption:{id:"userConnectionsSettings.cursorCardCaption",defaultMessage:"Search and reference Notion tasks and docs while you code"},otherCardName:{id:"userConnectionsSettings.otherCardName",defaultMessage:"Other AI tools"},otherCardCaption:{id:"userConnectionsSettings.otherCardCaption",defaultMessage:"Search and update Notion via AI tools using authenticated MCP"}});function xe(e,t){(0,ee().u)({environment:e,event:{eventName:"mcp_connection_settings_app_clicked",eventProperties:{mcp_client:t}}})}function ye(e){const{icon:t,title:n}=e;return(0,ve.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[(0,ve.jsx)(ie().I,{icon:t}),(0,ve.jsx)("div",{style:{fontSize:ue().Mi,fontWeight:de().Wy.medium},children:n})]})}function Ae(){const{setPage:e}=(0,i.useContext)(Se),t=(0,s().v3)(),n=(0,b().tz)(),o=function(e,t){return[{id:"mcp_chatgpt",caption:t.formatMessage(be.chatGptProCardCaption),account:void 0,canSelectPageAccess:!1,onConnect(){xe(e,"chatgpt"),(0,ge().L)({environment:e,url:"https://chatgpt.com/#settings/Connectors?connector=connector_37316be7febe4224b3d31465bae4dbd7"})},onDisconnect(){},logo:(0,ve.jsx)(ye,{icon:ce().openAiIcon,title:t.formatMessage(be.chatGptProCardName)}),width:"auto",capabilities:(0,ve.jsx)("div",{style:{display:"none"}})},{id:"mcp_claude",caption:t.formatMessage(be.claudeCardCaption),account:void 0,canSelectPageAccess:!1,onConnect(){xe(e,"claude"),(0,ge().L)({environment:e,url:"https://claude.ai/directory/69f3a300-cc60-48c4-b237-dfac56530dbf"})},onDisconnect(){},logo:(0,ve.jsx)(ye,{icon:re().claudeIcon,title:t.formatMessage(be.claudeCardName)}),width:"auto",capabilities:(0,ve.jsx)("div",{style:{display:"none"}})},{id:"mcp_cursor",caption:t.formatMessage(be.cursorCardCaption),account:void 0,canSelectPageAccess:!1,onConnect(){xe(e,"cursor"),(0,ge().L)({environment:e,url:"cursor://anysphere.cursor-deeplink/mcp/install?name=Notion&config=eyJ1cmwiOiJodHRwczovL21jcC5ub3Rpb24uY29tL21jcCJ9"})},onDisconnect(){},logo:(0,ve.jsx)(ye,{icon:le().cursorIcon,title:t.formatMessage(be.cursorCardName)}),width:"auto",capabilities:(0,ve.jsx)("div",{style:{display:"none"}})},{id:"mcp_other",caption:t.formatMessage(be.otherCardCaption),account:void 0,canSelectPageAccess:!1,onConnect(){xe(e,"other"),(0,ge().L)({environment:e,url:(0,pe().x)("guides.mcpConnect")})},onDisconnect(){},logo:(0,ve.jsx)(ye,{icon:ae().x,title:t.formatMessage(be.otherCardName)}),width:"auto",showExploreButton:!0,capabilities:(0,ve.jsx)("div",{style:{display:"none"}})}]}(t,n),a=(0,te().IS)((e=>({pageHeader:{marginBottom:24},backButton:{marginInlineEnd:6},connectionsSectionTitle:{marginBottom:6},connectionsSectionSubtitle:{marginBottom:24,color:e.text.secondary,fontSize:13}})),[]);return(0,ve.jsxs)(ne().Y1,{height:"fill",direction:"vertical",padding:"36px 60px",children:[(0,ve.jsxs)(Z().A,{large:!I().A.isMobile,divider:"full",fontSize:16,fontWeight:de().Wy.medium,style:a.pageHeader,children:[(0,ve.jsx)(me().A,{ariaLabel:n.formatMessage({id:"userConnectionsSettingsPageHeader.back",defaultMessage:"Back"}),icon:se().$,style:a.backButton,onClick:()=>e("home")}),n.formatMessage(be.mcpSettingsTitle)]}),(0,ve.jsx)(X().A,{apps:o,numberOfConnectedApps:o.length,numberOfDisplayRows:2,title:(0,ve.jsx)(Z().A,{style:a.connectionsSectionTitle,children:(0,ve.jsx)(b().sA,{...be.connectMcpTitle})}),subtitle:(0,ve.jsx)(oe().D,{style:a.connectionsSectionSubtitle,children:(0,ve.jsx)(b().sA,{...be.connectMcpDescription,values:{learnmore:e=>(0,ve.jsx)(he().A,{href:(0,pe().x)("guides.mcpHelp"),external:!0,onClick:e=>e.stopPropagation(),children:e})}})})})]})}n(803949);var je=()=>n(187820),Ie=()=>n(125565),Ce=()=>n(317182),Me=()=>n(757695),we=()=>n(100622),ke=()=>n(457812),Be=()=>n(723786),_e=()=>n(722872),Pe=()=>n(923455),Ne=()=>n(542585),Te=()=>n(911706),De=()=>n(760217),Le=()=>n(406699),Oe=()=>n(404277),We=()=>n(939740),ze=()=>n(89924);function Ue(e){const{botId:t,canSelectPageAccess:n,onConnect:o,onDisconnect:r,botSharedPagesStore:l}=e,[c]=(0,i.useState)(Me().Store.createValue({})),d=(0,a().O$)(q().AppStoreSidebarSpaceStore),g=(0,s().v3)(),[u,p]=(0,i.useState)(!1),m=(0,Pe().Rx)(),{allSharedPagesStores:f=[]}=m??{},S=(0,a().O$)(q().AppStoreSidebarSpaceViewStore),v=(0,a().K8)((()=>{var e;const n={};return((null===(e=l.state.result)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.pageIds)??[]).forEach((e=>{n[e]=!0})),n}),[l,t]);(0,i.useEffect)((()=>{n&&d&&c.setState(v)}),[n,d,v,c]);const{teamPagesByTeam:x,allTeams:y,allPrivatePages:A,allWorkspacePages:j}=(0,Be().g)({spaceViewStore:S,spaceStore:d,pageIdsSharedWithUser:f.map((e=>e.id))}),C=d?V().v.createChildStore(d,{table:h().GP,id:t}):null,M=(0,a().K8)((()=>C?C.getIntegrationManagementPermissions():(0,Ne().R)()),[C]),w=[];n&&d&&M.userCanModifyPageAccess&&w.push({key:"actions for user guest connections",render:e=>(0,ve.jsx)(ze().A,{...e}),items:[{key:"update selected pages",render:(e,t)=>(0,ve.jsx)(De().A,{...e,title:(0,ve.jsx)("div",{children:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.actionMenu.selectPagesNewPagePicker.label",defaultMessage:"Select page access"})})}),action:()=>{p(!0)}}]});const k=[];o&&k.push({key:"connect account",render:e=>(0,ve.jsx)(De().A,{...e,title:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.actionMenu.connectAccount.label",defaultMessage:"Connect another account"}),onClick:o}),action:o}),k.push({key:"disconnect account",render:e=>(0,ve.jsx)(De().A,{...e,title:(0,ve.jsx)("div",{style:{color:we().Tj.red},children:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.actionMenu.disconnectAccount.label",defaultMessage:"Disconnect account"})}),onClick:()=>{r()}}),action:()=>r()}),w.push({key:"actions for all user connections",render:e=>(0,ve.jsx)(ze().A,{...e}),items:k});const B=i.useCallback((async()=>{if(!d)return;const e=await T().GO({environment:g,spaceStore:d,botIds:[t]});return null!=e&&e.bots&&l.update((t=>({...t,result:{...t.result??{},...e.bots}}))),e}),[g,d,t,l]);return d&&C?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Le().A,{popupType:I().A.isMobile?Le().z.BottomSheet:Le().z.Popup,renderOrigin:e=>(0,ve.jsx)(Te().A,{...e,isMobile:I().A.isMobile??!1}),render:e=>(0,ve.jsx)(Oe().A,{menuType:I().A.isMobile?_e().gu.Modal:_e().gu.Popup,children:(0,ve.jsx)(We().Ay,{type:We().Oh.Vertical,sections:w,initialFocus:void 0,onAccept:()=>e.close()})})}),(0,ve.jsx)(ke().r,{isOpen:u,teamPagesByTeam:x,pageIdsAlreadySharedWithBot:Object.keys(v),spaceId:d.id,onClose:()=>p(!1),allTeams:y,privatePages:A,workspacePages:j,pagesSharedWithUser:f,botStore:C,spaceStore:d,refetchBotSharedPages:B,selectedBlockIdsStore:c,pagePickerLocation:"public_integration_page_picker",integrationManagementPermissions:M})]}):null}const Ke=28;function Ee(e){const{userConnections:t,botSharedPagesStore:n}=e;return(0,ve.jsx)(Ce().A,{columns:[{key:"connection",header:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"access",header:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.title",defaultMessage:"Access"}),style:{width:"40%"}},{key:"more",header:void 0,style:{width:"5%"}}],rows:Re(t,n)})}function Re(e,t){const n=[];return e.forEach((e=>{const{account:i,onDisconnect:o}=e;if(Array.isArray(i)){const s=i.map((n=>qe({connection:{...e,onDisconnect:()=>{o(n)}},account:n,botSharedPagesStore:t})));n.push(...s)}else n.push(qe({connection:e,account:i,botSharedPagesStore:t}))})),n}function qe(e){const{account:t,connection:{id:n,appName:i,canSelectPageAccess:o,capabilities:s,logo:a,onConnect:r,onDisconnect:l},botSharedPagesStore:c}=e,d=void 0!==t&&"string"!=typeof t,g=d?t.accountName:t,u=d?t.accountId:n;return{key:`${u}-${g}`,columns:[(0,ve.jsx)(Fe,{accountName:g,connectionLogo:a,connectionName:i??""},"connection-title"),s,(0,ve.jsx)(Ue,{botId:u,canSelectPageAccess:o,connectionName:i??"",onConnect:r,onDisconnect:l,botSharedPagesStore:c},"connection-action-menu")]}}function Fe(e){const{accountName:t,connectionLogo:n,connectionName:i}=e;return(0,ve.jsxs)("div",{style:{display:"flex",alignItems:"center",marginInlineEnd:12},children:["string"==typeof n?(0,ve.jsx)("img",{src:n,style:{height:Ke,maxWidth:Ke}}):n&&"object"==typeof n&&"icon"in n?(0,ve.jsx)(je().B6,{disabled:!0,icon:n,title:i,isEmptyPage:!1,size:Ke,isLarge:!0,useInvertedColors:!0}):null,(0,ve.jsxs)("div",{style:{marginInlineStart:15},children:[(0,ve.jsx)(Ie().A,{children:i}),t?(0,ve.jsx)(Ie().A,{isSmall:!0,children:t}):void 0]})]})}const Ve={height:"100%",padding:"36px 60px"},Ge={alignItems:"center",display:"flex",flexDirection:"column",flex:1,height:"100%",justifyContent:"center"};function He({location:e,spaceStore:t}){const[n,o]=(0,i.useState)("home");return(0,ve.jsx)(Se.Provider,{value:{currentPage:n,setPage:o},children:(0,ve.jsx)($e,{location:e,spaceStore:t})})}function $e({location:e,spaceStore:t}){const{currentPage:n}=(0,i.useContext)(Se);switch(n){case"home":return(0,ve.jsx)(Ye,{location:e,spaceStore:t});case"mcp_settings":return(0,ve.jsx)(Ae,{})}}function Ye({location:e,spaceStore:t}){const n=(0,s().v3)(),i=(0,a().uB)(void 0,G().A);return(0,ve.jsx)(Y().A,{request:n,performRequest:()=>async function(e){const{sidebarSpaceStore:t}=q().default.state;return{guestBotIds:await et(e),connectionStatus:await D()._s(e,null==t?void 0:t.id)}}(n),requestStore:i,render:(n,o)=>null!=o&&o.connectionStatus?(0,ve.jsx)(nt,{location:e,requestStore:i,spaceStore:t,guestBotIds:o.guestBotIds}):(0,ve.jsx)("div",{style:Ge,children:(0,ve.jsx)(l().k,{})})})}function Xe(e){const t=[];return null!=e&&e.read_content&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.readContent",defaultMessage:"view"})),null!=e&&e.insert_content&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.insertContent",defaultMessage:"insert"})),null!=e&&e.update_content&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.updateContent",defaultMessage:"update"})),t}function Je(e){return{display:"flex",flexDirection:"column",height:"100%",width:"sidebar-modal"===e?"100%":"auto"}}function Qe(e,t){const{sidebarSpaceStore:n}=q().default.state;if(!n||(0,R().I)(n))return[];return e.map((e=>{const i=V().v.createChildStore(n,{table:h().GP,id:e}),o=i.getName();if(!i.getAlive()||!o||i.isInternalBot())return;const s=i.getIntegrationPointer(),a=i.getIcon(),r=a&&s?{pointer:s,icon:a}:void 0,l=i.getIntegrationId(),c=!(l&&(0,m().Y)(l));return{id:i.id,appName:o,caption:void 0,account:void 0,logo:r,capabilities:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.userGuest",defaultMessage:"Can {capabilities} content",values:{capabilities:(0,ve.jsx)(b().dT,{value:Xe(i.getCapabilities()),type:"conjunction"})}}),canSelectPageAccess:c,onDisconnect:async()=>{const{accept:e}=await w().Gh({message:(0,ve.jsx)("span",{children:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",defaultMessage:"Revoke access for this account?"})}),acceptLabel:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.deleteExternalAuthorization.confirmDelete.label",defaultMessage:"Yes"})});e&&await T().KA({environment:t,botId:i.id,onSuccess:()=>{}})}}})).filter(y().O9)}function Ze(e){const{sidebarSpaceStore:t}=q().default.state;if(!t||!t.canEdit())return[];const n=t.getBotSettingsStore().getValue(),i=t.id,{integrations:{state:s},bots:{state:a},externalAuthentications:{state:r}}=F().A,l=t.canAdmin(),c=[];o().default.checkGate({gateName:"sfdc_unified_auth_modal"})&&c.push(g().mn);const u=(0,E().Yn)(l);s.sort(((e,t)=>(u[e.id]??1/0)-(u[t.id]??1/0)));const m=[g().ob,g().F6,g().mn];return s.map((o=>{var s;if(!o.info.icon)return;if(!l&&m.includes(o.id))return;if((0,v().Hr)(o.id))return;const u=a.filter((e=>e.integration_id===o.id)),f=x().oE(u.map((e=>{const t=r.find((t=>t.parent_id===e.id));if(t)return{accountId:e.id,accountName:t.account_name}}))),y=(0,S().nH)({spaceBotSettings:n,integrationId:o.id}),j=f.length>0;if(!y&&!j)return;if(!j&&o.id===g().io)return;const I=!y,C=function(e){const t=[];return(0,p().v_)(e)&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.previewLinks",defaultMessage:"preview links"},"previewLinks")),function(e){return!!e.info.original_url_patterns&&e.info.original_url_patterns.some((e=>{var t;return null===(t=e.additional_types)||void 0===t?void 0:t.collection}))}(e)&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.syncDatabases",defaultMessage:"sync databases"},"syncedDatabase")),(0,p().mt)(e)&&t.push((0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.botAccess.automationAction",defaultMessage:"run automations"},"automationAction")),t}(o),M=!x().Im(C)&&(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.external",defaultMessage:"Can {capabilities}",values:{capabilities:(0,ve.jsx)(b().dT,{value:C,type:"conjunction"})}}),k=(0,d().qs)(o.capabilities),B=null===(s=o.capabilities)||void 0===s?void 0:s.inherit_creator_permissions,_=k&&!B,P=[];return(0,p().Hy)(o)&&P.push("linkPreview"),(0,p().Z1)(o)&&P.push("databaseSync"),(0,p().mt)(o)&&P.push("automation_action"),{id:o.id,appName:o.name,caption:o.info.tagline,logo:o.info.icon,account:f,shouldHideConnectAccount:I,shouldHideInDiscover:c.includes(o.id),shouldShowNewBadge:!o.info.hide_new_badge,shouldShowBetaBadge:(0,g().MF)(o),integrationTypes:P,capabilities:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{children:M}),k?(0,ve.jsx)("div",{children:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.externalWithCapabilities",defaultMessage:"Can {capabilities} content",values:{capabilities:(0,ve.jsx)(b().dT,{value:Xe(o.capabilities),type:"conjunction"})}})}):null]}),canSelectPageAccess:_,onConnect:async()=>{await W().Jq({environment:e,integration:o,spaceId:i,from:"connected_apps_settings"}),U().oX({environment:e})},onDisconnect:async n=>{const i=a.find((e=>e.id===(null==n?void 0:n.accountId)));if(i){const s=V().v.createChildStore(t,{table:h().GP,id:i.id,spaceId:i.space_id}),a=null!=n&&n.accountName?(0,ve.jsx)(b().sA,{id:"connectedAppSettings.deleteExternalAuthorization.withAccountName.confirmationMessage",defaultMessage:"Revoke access for “{accountName}”?",values:{accountName:n.accountName}}):(0,ve.jsx)(b().sA,{id:"connectedAppSettings.deleteExternalAuthorization.withoutAccountName.confirmationMessage",defaultMessage:"Revoke access for this account?"}),{accept:r}=await w().Gh({message:(0,ve.jsx)("span",{children:a}),acceptLabel:(0,ve.jsx)(b().sA,{id:"connectedAppSettings.deleteExternalAuthorization.confirmDelete.label",defaultMessage:"Yes"})});r&&(await T().KA({environment:e,botId:s.id,onSuccess:()=>{}}),A().hy(e,{integrationId:o.id}))}}}})).filter(y().O9)}async function et(e){const{sidebarSpaceStore:t,currentUserStore:n}=q().default.state;if(!t||!n||!H().subscriptionDataStoreInstance.state)return[];return(await T().Ju({environment:e,table:f().NX,id:t.id,type:"guest"})).botIds.filter((e=>V().v.createChildStore(t,{table:h().GP,id:e}).getCreatedById()===n.id))}function tt(e,t,n){var i;const o=n;let s=!1;const{sidebarSpaceStore:a}=q().default.state,r=null===(i=o.state.result)||void 0===i?void 0:i.connectionStatus,l=(null==r?void 0:r.drive)&&(null==r?void 0:r.drive.length)>0,d=function(){const{integrations:{state:e}}=F().A;return!e.some((e=>e.id===g().Hd))}();if(d){const e=null==a?void 0:a.getBotSettingsStore().getValue();s=!(0,S().az)(e)||Boolean((null==e?void 0:e.integration_approval_statuses)&&e.integration_approval_statuses[p().IQ])}const u=(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.legacyImporter",defaultMessage:"Can only add pages"});return[...d&&(s||l)?[{id:"drive",appName:"Google Drive",caption:t.formatMessage({id:"connectedAppsSettings.googleDrive.caption",defaultMessage:"Find and embed your files."}),shouldHideConnectAccount:!s,shouldHideInDiscover:!d,logo:c().A.images.import.googleDrivePng,account:null==r?void 0:r.drive,capabilities:(0,ve.jsx)(b().sA,{id:"userConnectionsSettings.connectionsTable.accessColumn.googleDrive",defaultMessage:"Can embed content"}),canSelectPageAccess:!1,onConnect:()=>async function(e,t){A().iT(e,{integration_name:"google",from:"connected_apps"}),await L().W3(e),await D()._s(e),await t.refresh()}(e,n),onDisconnect:i=>{i&&function(e,t,n,i){w().ui({message:n.formatMessage({id:"connectedAppsSettings.disconnectGoogleDriveModal.message",defaultMessage:"Disconnecting disables file preview on Google Drive files embedded in all of your workspaces. It would not delete your embeds from Notion, so you can re-connect at anytime."}),showCancel:!0,keepFocus:!0,items:[{label:n.formatMessage({id:"connectedAppsSettings.disconnectGoogleDriveModal.disconnectButton.label",defaultMessage:"Disconnect"}),color:"red",onAccept:async()=>{await j().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}}),await D()._s(t),await i.refresh()}}]})}(i,e,t,n)}}]:[],{id:"evernote",appName:"Evernote",caption:t.formatMessage({id:"connectedAppsSettings.evernote.caption",defaultMessage:"Import notebooks."}),logo:c().A.images.import.evernotePng,account:null==r?void 0:r.evernote,capabilities:u,shouldHideInDiscover:!0,canSelectPageAccess:!1,integrationTypes:["importer"],onConnect:()=>O().J({environment:e,requestStore:o}),onDisconnect:()=>D().rA(e,o)},{id:"trello",appName:"Trello",caption:t.formatMessage({id:"connectedAppsSettings.trello.caption",defaultMessage:"Import your boards."}),logo:c().A.images.import.trelloPng,shouldHideInDiscover:!0,account:null==r?void 0:r.trello,capabilities:u,integrationTypes:["importer"],canSelectPageAccess:!1,onConnect:()=>z().P({environment:e,requestStore:o}),onDisconnect:()=>D().x_(e,o)},{id:"asana",appName:"Asana",caption:t.formatMessage({id:"connectedAppsSettings.asana.caption",defaultMessage:"Import tasks from boards and lists."}),logo:c().A.images.import.asanaPng,shouldHideInDiscover:!0,integrationTypes:["importer"],account:null==r?void 0:r.asana,capabilities:u,canSelectPageAccess:!1,onConnect:()=>async function(e){const{environment:t,requestStore:n}=e,i=(0,k().LX)(t);let o=(0,C().Rq)(I().A.domainBaseUrl,{authType:i,userId:t.currentUser.id});o=i.redirectToAuth?o:await(0,k().YN)(t,o);const s=await P().P(t,{width:580,height:800,url:o,titleMessage:N.titleMessage});if(!s)return;const a=M().qg(s);if(!a.query.code||!a.query.state)return;_().m({message:N.authenticatingWithAsana});const r=await j().callApi({eventName:"authWithAsana",environment:t,data:{code:a.query.code,encryptedState:a.query.state}});"failed"===r.type?(console.error(r.error),w().Qg(r),_().V()):(A().mu(t,{integration_name:"asana"}),await n.refresh(),B.setState({open:!0}),_().V())}({environment:e,requestStore:o}),onDisconnect:()=>D().HC(e,o)},...null!=a&&a.id?[{id:"confluence",appName:"Confluence",caption:t.formatMessage({id:"connectedAppsSettings.confluence.caption",defaultMessage:"Import Spaces from Confluence."}),logo:c().A.images.import.confluencePng,shouldHideInDiscover:!0,account:null==r?void 0:r.confluence,capabilities:u,integrationTypes:["importer"],canSelectPageAccess:!1,onDisconnect:()=>D().Pz(e,o,a.id)}]:[]]}function nt({guestBotIds:e,location:t,requestStore:n,spaceStore:l}){const c=(0,s().v3)(),d=(0,b().tz)(),g=(0,a().K8)((()=>(0,K().kB)()),[]),{setPage:p}=(0,i.useContext)(Se),{connected:m,discover:h}=(0,a().K8)((()=>function(e,t,n,i,s,a){let r;r=o().default.checkGate({gateName:"notion_ai_workspace_settings"})?(0,$().s_)({intl:n,environment:t,from:"my_connections_settings",enabledConnectors:s}):[];const l=(0,$().mX)({intl:n,setPage:a}),c=x().$z([...r,...l,...Ze(t),...tt(t,n,i)],(e=>e.account&&e.account.length>0?"connected":"discover"));return{connected:[...Qe(e,t),...c.connected||[]],discover:c.discover||[]}}(e,c,d,n,g,p)),[e,c,d,n,g,p]),f=(0,a().uB)(void 0,G().A);(0,u().Yb)((async()=>{f.update((e=>({...e,loading:!0,ready:!1,result:void 0})));const e=m.filter((e=>e.canSelectPageAccess)).map((e=>e.id)),t=l.canRead()?await T().GO({environment:c,spaceStore:l,botIds:e}):void 0;f.update((e=>({...e,loading:!1,ready:!0,result:null==t?void 0:t.bots})))}),[c,l,m,f]);const S=m.length>0;return(0,ve.jsx)("div",{style:Je(t),children:(0,ve.jsxs)(Q().H,{style:Ve,type:r().A.Y,children:[S?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Z().A,{large:!0,divider:"full",style:{borderBottom:"none",marginBottom:0},children:(0,ve.jsx)(b().sA,{id:"connectionsSettings.connectionsSection.title",defaultMessage:"My connections"})}),(0,ve.jsx)(Ee,{userConnections:m,botSharedPagesStore:f})]}):void 0,(0,ve.jsx)("div",{style:{marginTop:S?32:void 0},children:(0,ve.jsx)(X().A,{apps:h,numberOfConnectedApps:m.length,title:(0,ve.jsx)("div",{style:{display:"flex",justifyContent:"space-between",minHeight:28,fontSize:16,fontWeight:510},children:(0,ve.jsx)(b().sA,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,ve.jsx)("div",{style:{marginTop:20},children:(0,ve.jsx)(J().W,{})})]})})}},949734:(e,t,n)=>{n.d(t,{W:()=>f});n(296540);var i=()=>n(59226),o=()=>n(484714),s=()=>n(699143),a=()=>n(97294),r=()=>n(631524),l=()=>n(663247),c=()=>n(721479),d=()=>n(534842),g=()=>n(427704),u=()=>n(69708),p=()=>n(559926),m=()=>n(232930),h=n(474848);function f(){const e=(0,o().v3)(),t=(0,i().X)("notion_ai_workspace_settings");return(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,h.jsx)(a().N,{style:{display:"flex",marginInlineStart:-6},className:"notion-print-ignore",href:`${g().JZ.integrations}/all`,external:!0,onClick:()=>{p().j5(e,{from:"integration-settings",href:`${g().JZ.integrations}/all`})},children:(0,h.jsx)(r().p,{iconLeading:l().arrowDiagonalUpRightFillIcon,size:"sm",colorPalette:"gray",colorVariant:"tertiary",children:(0,h.jsx)(u().sA,{id:"connectionsSettingsLinks.connectionsGallery",defaultMessage:"Browse connections in Gallery"})})}),(0,h.jsx)(a().N,{style:{display:"flex",marginInlineStart:-6},className:"notion-print-ignore",href:g().JZ.creatorProfileIntegrations,external:!0,onClick:()=>{p().yQ(e,{from:"integration-settings",href:g().JZ.creatorProfileIntegrations})},children:(0,h.jsx)(r().p,{iconLeading:l().arrowDiagonalUpRightFillIcon,size:"sm",colorPalette:"gray",colorVariant:"tertiary",children:(0,h.jsx)(s().Y1,{direction:"horizontal",width:"hug",children:(0,h.jsx)(u().sA,{id:"connectionsSettingsLinks.manageConnections",defaultMessage:"Develop or manage integrations"})})})}),(0,h.jsx)(a().N,{style:{display:"flex",marginInlineStart:-6},className:"notion-print-ignore",href:(0,m().x)("guides.publicAPI"),external:!0,children:(0,h.jsx)(r().p,{iconLeading:c().questionMarkCircleSmallIcon,size:"sm",colorPalette:"gray",colorVariant:"tertiary",children:(0,h.jsx)(u().sA,{id:"connectionsSettingsLinks.helpCenter",defaultMessage:"Learn more about connections"})})}),t?void 0:(0,h.jsx)(a().N,{style:{display:"flex",marginInlineStart:-6},className:"notion-print-ignore",href:(0,m().x)("guides.aiConnectors"),external:!0,children:(0,h.jsx)(r().p,{iconLeading:d().sparklesFillSmallIcon,size:"sm",colorPalette:"gray",colorVariant:"tertiary",children:(0,h.jsx)(u().sA,{id:"connectionsSettingsLinks.aiConnectorsHelpCenter",defaultMessage:"Notion AI connectors"})})})]})}},955054:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const o=new i},974679:(e,t,n)=>{n.d(t,{A:()=>I});n(898992),n(354520),n(581454);var i=n(296540),o=()=>n(484714),s=()=>n(401497),a=()=>n(718827),r=()=>n(631524),l=()=>n(373009),c=()=>n(449552),d=()=>n(69708),g=()=>n(534177),u=()=>n(284371),p=()=>n(559926),m=()=>n(523163),h=()=>n(13898),f=()=>n(824160),S=()=>n(187820),v=()=>n(8178),b=n(474848);const x=2,y=1,A=3,j=36;function I(e){const{apps:t,numberOfConnectedApps:n,title:s,subtitle:a,numberOfDisplayRows:l}=e,c=(0,o().v3)(),[u,m]=(0,i.useState)(!1),h=(l||y)*A,f=t.filter((e=>!e.shouldHideInDiscover)),S=f.length>h&&!u,j=u?f:f.slice(0,h);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(v().A,{large:!0,divider:"none",children:[s,a]}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16,overflow:"hidden"},children:j.map((e=>{var t;return e.onConnect&&(0,b.jsx)(C,{appName:e.appName,caption:e.caption,shouldShowNewBadge:e.shouldShowNewBadge,shouldShowBetaBadge:e.shouldShowBetaBadge,shouldShowUpsell:e.shouldShowUpsell,logo:e.logo,width:e.width,integrationTypes:null===(t=e.integrationTypes)||void 0===t?void 0:t.slice(0,x),showExploreButton:e.showExploreButton,onConnect:e.onConnect},e.id)})).filter((e=>(0,g().O9)(e)))}),S?(0,b.jsx)(r().p,{style:{marginTop:10,gap:10,marginInlineStart:-8},colorPalette:"gray",onClick:()=>{u||(m(!0),p().PR(c,{numberOfConnectedApps:n}))},children:(0,b.jsx)(d().sA,{id:"connectedAppsSettings.discoverNewAppSection.seeAll.label",defaultMessage:"See all"})}):void 0]})}function C(e){const{appName:t,caption:n,logo:o,shouldShowUpsell:r,shouldShowBetaBadge:g,integrationTypes:p,onConnect:v,width:x,showExploreButton:y}=e,A=(0,s().IS)((e=>({card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:8,border:`1px solid ${e.tableDividerColor}`,padding:12,height:"100%",overflow:"hidden",minWidth:120,gap:12,maxWidth:256},upsellCard:{backgroundColor:e.whiteButtonBackground},connectedAppIcon:{width:x||j,height:j,padding:4,borderRadius:6},titleAndNewBadgeContainer:{alignItems:"center",display:"flex",marginInlineStart:2,marginBottom:4},title:{fontWeight:u().Wy.medium,fontSize:14,lineHeight:1.3},caption:{marginInlineStart:2,marginInlineEnd:2,fontWeight:u().Wy.regular,color:e.text.secondary,fontSize:12,maxHeight:72,overflow:"hidden",lineHeight:1.3},pillContainer:{marginTop:8,marginBottom:6,fontSize:12,color:e.text.tertiary,display:"flex",gap:4,fontWeight:500},lockedIcon:{color:e.icon.secondary,width:16,height:16,marginInlineStart:6},logoTitleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8}})),[x]),I=(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:A.logoTitleContainer,children:["string"==typeof o?(0,b.jsx)("img",{src:o,style:A.connectedAppIcon}):i.isValidElement(o)?o:o&&"object"==typeof o&&"icon"in o?(0,b.jsx)(S().B6,{disabled:!0,icon:o,title:t,isEmptyPage:!1,size:j,isLarge:!0,useInvertedColors:!0,style:A.connectedAppIcon}):null,t?(0,b.jsxs)("div",{style:A.titleAndNewBadgeContainer,children:[(0,b.jsx)("div",{style:A.title,children:t}),g?(0,b.jsx)(h().A,{}):void 0,r?(0,c().g)(A.lockedIcon):void 0]}):void 0]}),(0,b.jsx)("div",{style:A.caption,children:n}),(0,b.jsx)("div",{style:A.pillContainer,children:null==p?void 0:p.map((e=>e&&(0,b.jsx)(f().A,{children:m().de[e]},e)))})]});return r?(0,b.jsx)("div",{style:{...A.card,...A.upsellCard},children:I}):(0,b.jsxs)(a().Ay,{onClick:v,style:A.card,children:[I,(0,b.jsx)(l().E,{colorPalette:"blue",onClick:v,children:y?(0,b.jsx)(d().sA,{id:"adminConnectionsSettings.aiSettingsCard.actionButtonLabel",defaultMessage:"Explore"}):(0,b.jsx)(d().sA,{id:"connectedAppSettingsDiscoverItem.connectButton.label",defaultMessage:"Connect"})})]})}}}]);