"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46817],{33862:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(645873);const r={ScrollableBlockLimitBanner:new(n().O2)("ScrollableBlockLimitBanner",(async()=>Promise.all([o.e(87584),o.e(27942)]).then(o.bind(o,787584))))},i=(0,n()._h)(r.ScrollableBlockLimitBanner,(e=>e.default))},39341:(e,t,o)=>{o.d(t,{p:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{banners:[],height:void 0}}setHeight(e){this.setState({height:e,banners:this.state.banners})}}const r=new n},122001:(e,t,o)=>{o.d(t,{f:()=>s});var n=()=>o(611648),r=()=>o(712505),i=()=>o(747100),a=()=>o(953418);function s(e){const{environment:t,store:o}=e;return o.isCollectionView()?(0,a().z4)(t)?n().A.All:n().A.Y:!i().cq(o)&&r().default.isSidePeekOpen()?n().A.All:n().A.Y}},232280:(e,t,o)=>{o.d(t,{a:()=>r,h:()=>n});const n=.5,r=.3},339702:(e,t,o)=>{o.d(t,{j:()=>r});var n=()=>o(314529);function r(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"offline_access_failure",t)}},373728:(e,t,o)=>{o.d(t,{Kh:()=>ft,Ay:()=>yt,gj:()=>It});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(737550);var n=o(296540),r=()=>o(59226),i=()=>o(726637),a=()=>o(484714),s=()=>o(56366),l=()=>o(401497),d=()=>o(75435),c=()=>o(911988),u=()=>o(222917),p=()=>o(620689),b=()=>o(662453),h=()=>o(2143),g=()=>o(564884),v=()=>o(242422),S=()=>o(187174),f=()=>o(578872),m=()=>o(195613),x=()=>o(815377),y=o(474848);function w({store:e}){const t=(0,a().Y0)(),[r,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)(!1),p=(0,n.useRef)(0),[b,h]=(0,n.useState)(null),{shouldRenderPublicPageTopbar:w}=(0,x().Im)({store:e}),j=(0,s().K8)((()=>!f().yr(e)),[e]),P=(0,s().K8)((()=>!f().Zk(e)),[e]),[{value:A}]=(0,S().Yb)((async()=>f().wT(e,j,P)),[e,j,P]),k=(0,s().K8)((()=>{var t;return null===(t=(0,f().GN)(e))||void 0===t||null===(t=t.getSiteStore())||void 0===t?void 0:t.id}),[e]),C=(0,a().v3)();(0,n.useEffect)((()=>{A&&k&&((0,g().u)({environment:C,event:{eventName:"public_site_mobile_bottom_bar_displayed",eventProperties:{site_id:k}}}),P&&((0,g().u)({environment:C,event:{eventName:"like_button_displayed_on_public_site",eventProperties:{site_id:k,button_location:"bottombar"}}}),v().default.logEvent("like_button_displayed_on_public_site",void 0,{site_id:k,page_block_id:e.id,button_location:"bottombar"})))}),[A,k,P,C,e.id]);const T=(0,s().K8)((()=>m().A.state.elementRef??{current:void 0}),[]),M=(0,o(141333).yE)(T);(0,n.useEffect)((()=>{const e=()=>{u(!0),document.removeEventListener("touchstart",e)};return c||document.addEventListener("touchstart",e),()=>{document.removeEventListener("touchstart",e)}}),[c]),(0,n.useEffect)((()=>{if(!c||void 0===M)return;const e=M-p.current;p.current=M,0!==M?Math.abs(e)>=5&&(e>0&&M>50?d(!1):e<0&&d(!0)):d(!0)}),[M,c]);const B=(0,n.useCallback)(((e,t)=>{h(e)}),[]),I=(0,n.useCallback)((()=>{h(null)}),[]),E=(0,l().IS)((e=>({likeButtonWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:"none",overflow:"hidden",width:"100%",backgroundColor:"like"===b?e.background.secondary:"transparent",transition:"background-color 20ms ease-in"},shareButtonWrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:"none",overflow:"hidden",width:"100%",backgroundColor:"share"===b?e.background.secondary:"transparent",transition:"background-color 20ms ease-in"},bottomBar:{position:"fixed",height:50,bottom:0,insetInlineStart:0,insetInlineEnd:0,width:"100%",backgroundColor:e.background.primary,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",zIndex:1e3,transform:r?"translateY(0)":"translateY(100%)",transition:"transform 0.3s ease-in-out"}})),[r,b]);return A&&i().A.isMobile&&!t.isMobileNative&&w?(0,y.jsxs)("div",{style:E.bottomBar,children:[(0,y.jsx)("button",{style:E.likeButtonWrapper,onTouchStart:e=>B("like",e),onTouchEnd:I,onTouchCancel:I,children:(0,y.jsx)(o(630722).f,{store:e,button_location:"bottombar"})}),(0,y.jsx)("button",{style:E.shareButtonWrapper,onTouchStart:e=>B("share",e),onTouchEnd:I,onTouchCancel:I,children:(0,y.jsx)(o(100042).L,{store:e,buttonPopupStore:o(795179).A,button_location:"bottombar"})})]}):null}var j=()=>o(929219),P=()=>o(160432),A=()=>o(553034),k=()=>o(765974),C=()=>o(175947),T=()=>o(69708),M=()=>o(100622),B=()=>o(284371),I=()=>o(339702);function E(){const e=(0,a().v3)(),t=(0,s().O$)(j().e);let o;return(0,n.useEffect)((()=>{t||(0,I().j)(e,{type:"page_error_indicator"})}),[t,e]),o=t?(0,y.jsx)(T().sA,{defaultMessage:"Oops, there was an error loading this page. Refresh to load it again.",id:"pageErrorIndicator.loadingError.message"}):e.defaultRecordCache.persistedRecordCache?(0,y.jsx)(T().sA,{defaultMessage:"Please go online to load this page, then youâ€™ll be able to access it while offline.",id:"pageOfflineIndicator.hasLocalData.message"}):(0,y.jsx)(T().sA,{defaultMessage:"Oops, you seem to be offline. Please go online to view this page.",id:"pageOfflineIndicator.noLocalData.message"}),(0,y.jsxs)("div",{style:O(e),children:[(0,y.jsx)("div",{style:K(e),children:o}),(0,y.jsx)(P().A,{colorPalette:"blue",size:"lg",onClick:()=>window.location.reload(),children:(0,y.jsx)(T().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}function R({isOfflineAndUnavailable:e}){const t=(0,a().v3)(),o=(0,s().O$)(j().e);(0,n.useEffect)((()=>{o||(0,I().j)(t,{type:"page_error_indicator"})}),[o,t]);const r=(0,l().IS)((e=>({container:{height:"100%",minHeight:`calc(100vh - ${2*C().ek(t.device.isElectronMac)}px)`,paddingInlineStart:i().A.isMobile?16:32,paddingInlineEnd:i().A.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{width:29,height:24,fill:e.text.secondary,marginBottom:8},title:{fontWeight:B().Wy.medium,color:e.text.secondary,textAlign:"center"},description:{color:e.text.secondary,textAlign:"center"},button:{marginTop:8}})),[t.device]);let d,c;return e?(d=(0,y.jsx)(T().sA,{defaultMessage:"This page is not available while offline.",id:"pageOfflineIndicator.unavailableError.title"}),c=(0,y.jsx)(T().sA,{defaultMessage:"Please return online to access this content{hasLocalData, select, true { or sync the page} other {}}.",id:"pageOfflineIndicator.unavailableError.description",values:{hasLocalData:Boolean(t.defaultRecordCache.persistedRecordCache)}})):(d=(0,y.jsx)(T().sA,{defaultMessage:"Oops, there was an error loading this page.",id:"pageErrorIndicator.loadingError.title"}),c=(0,y.jsx)(T().sA,{defaultMessage:"Refresh to load it again.",id:"pageErrorIndicator.loadingError.description"})),(0,y.jsxs)("div",{style:r.container,children:[o?(0,k().exclamationMarkTriangleFillIcon)(r.icon):(0,A().C)(r.icon),(0,y.jsx)("div",{style:r.title,children:d}),(0,y.jsx)("div",{style:r.description,children:c}),o?(0,y.jsx)(P().A,{colorPalette:"blue",style:r.button,size:"lg",onClick:()=>window.location.reload(),children:(0,y.jsx)(T().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})}):void 0]})}const _=function({isOfflineAndUnavailable:e}){return(0,r().X)("download_for_offline")?(0,y.jsx)(R,{isOfflineAndUnavailable:e}):(0,y.jsx)(E,{})};function K(e){return{fontSize:i().A.isMobile?18:32,marginBottom:8,textAlign:"center",color:M().Tj.uiBlack,maxWidth:640,lineHeight:1.3}}function O(e){return{height:"100%",minHeight:`calc(100vh - ${2*C().ek(e.device.isElectronMac)}px)`,paddingInlineStart:i().A.isMobile?16:32,paddingInlineEnd:i().A.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var L=()=>o(299772),D=()=>o(13679),H=()=>o(411813),N=()=>o(402014),V=()=>o(112995),z=()=>o(138156),F=()=>o(614949),W=()=>o(38337),$=()=>o(645873);const U=new($().O2)("MeetTopbar",(()=>o.e(19514).then(o.bind(o,669061)))),X=(0,$()._h)(U,(e=>e.MeetTopbar)),G=new($().O2)("PersonalHomeTopbar",(()=>Promise.all([o.e(22181),o.e(35210)]).then(o.bind(o,304961)))),Y=(0,$()._h)(G,(e=>e.PersonalHomeTopbar));var q=()=>o(441199);const Z=new($().O2)("PublicSharingTopbar",(()=>o.e(68224).then(o.bind(o,441712)))),J=(0,$()._h)(Z,(e=>e.PublicSharingTopbar));var Q=()=>o(644914),ee=()=>o(749687),te=()=>o(792415),oe=()=>o(765957);const ne=new($().O2)("TeamHomeTopbar",(()=>o.e(6025).then(o.bind(o,977068)))),re=(0,$()._h)(ne,(e=>e.TeamHomeTopbar)),ie={LoggedOutAppBanner:new($().O2)("LoggedOutAppBanner",(()=>o.e(30214).then(o.bind(o,990716)))),PublicSiteBanner:new($().O2)("PublicSiteBanner",(()=>o.e(46743).then(o.bind(o,129165)))),ClientPreviewBanner:new($().O2)("ClientPreviewBanner",(()=>o.e(60280).then(o.bind(o,67252))))},ae=(0,$()._h)(ie.LoggedOutAppBanner,(e=>e.LoggedOutAppBanner)),se=(0,$()._h)(ie.PublicSiteBanner,(e=>e.PublicSiteBanner)),le=(0,$()._h)(ie.ClientPreviewBanner,(e=>e.ClientPreviewBanner)),de=new($().O2)("TemplateGalleryPublicPageTopbar",(()=>Promise.all([o.e(4460),o.e(63111)]).then(o.bind(o,588920)))),ce=(0,$()._h)(de,(e=>e.TemplateGalleryPublicPageTopbar));var ue=()=>o(248140),pe=()=>o(396896),be=()=>o(205127),he=()=>o(725655),ge=()=>o(200562),ve=()=>o(329443),Se=()=>o(470928),fe=()=>o(877051),me=()=>o(326589),xe=()=>o(208993),ye=()=>o(187820),we=()=>o(16006),je=()=>o(132389),Pe=()=>o(581369),Ae=()=>o(389657),ke=()=>o(527580),Ce=()=>o(318088);const Te=new($().O2)("topbarActionButtons",(()=>Promise.all([o.e(71003),o.e(65741),o.e(39438),o.e(54928)]).then(o.bind(o,947682)))),Me=(0,$()._h)(Te,(e=>e.TopbarActionButtons));var Be=()=>o(533788),Ie=()=>o(976582),Ee=()=>o(573792),Re=()=>o(863059),_e=()=>o(551780);function Ke(e){const{store:t,isInvalidPage:o,showSidebarButton:l,hideActionButtons:d,shouldRenderTemplateGalleryTopbar:c,handleClickTopbar:u,handleMouseDown:p}=e,b=(0,a().v3)(),h=n.useMemo((()=>(0,he().d)(t.id)),[t.id]),g=(0,s().K8)((()=>t.isFormBlock()),[t]),v=(0,s().K8)((()=>(0,ve().qb)(b,t)&&!(0,me().g)()),[b,t]),S=(0,fe().V)(),f=(0,s().K8)((()=>t.canEditCollection()),[t]),m=(0,s().K8)((()=>(0,Se().Es)({blockStore:t})),[t]),w=(0,s().K8)((()=>t.isDraft()),[t]),j=(0,Re().Kh)({shouldRenderTemplateGalleryTopbar:c}),P=(0,s().K8)((()=>t.getIcon()),[t]),A=(0,Ie().m)({location:"DefaultTopbar"}),k=(0,r().X)("content_reskin_v2"),C=(0,r().X)("content_reskin_v2_toggle"),M=i().A.isMobile?24:20;return(0,y.jsx)(D().A,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>(0,y.jsxs)("div",{style:j,onClick:u,onMouseDown:p,onDoubleClick:x().mz,children:[l?(0,y.jsx)(ge().z,{}):void 0,(0,y.jsx)(Ce()._,{topbarFeatureController:A}),(0,y.jsxs)(V().K,{from:"DefaultTopbar.Left",fallback:({error:e,errorId:t})=>(0,y.jsx)(z().W,{error:e,errorId:t,iconSize:20}),children:[o||g?void 0:(0,y.jsx)(be().oK,{route:h,style:Ee().lx(),maxAncestorCount:2,ancestorMaxWidth:160,currentPageMaxWidth:240,showCurrentPageControls:!0,isMobile:!1}),C?(0,y.jsxs)(pe().fI,{gap:4,children:[(0,y.jsx)(Pe().A,{on:k,onClick:()=>{ue().A.updateLocalOverrideGate("content_reskin_v2",!k)}}),(0,y.jsx)(xe().W,{tooltipWidth:300,tooltipTitle:(0,y.jsx)(T().sA,{id:"content_reskin_v2_tooltip_title",defaultMessage:"Enable new block spacings"}),tooltipDescription:(0,y.jsx)(T().sA,{id:"content_reskin_v2_tooltip_description",defaultMessage:"This toggles new spacing between blocks."})})]}):void 0,g?(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",minWidth:0},children:[(0,y.jsx)(je().A,{size:6}),Boolean(P)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ye().B6,{disabled:!0,icon:P,iconRecordCategory:(0,ye().Te)(t),isEmptyPage:!1,size:M,emojiSize:M,largeIcon:!0}),(0,y.jsx)(je().A,{size:6})]}):void 0,(0,y.jsx)(we().A,{store:t,removeIfEmpty:!0,style:{fontSize:14,paddingInlineStart:0,overflow:"hidden",textOverflow:"ellipsis"}}),(0,y.jsx)(je().A,{size:8})]}):void 0,f?(0,y.jsx)(Ae().A,{store:t},t.id):void 0,m?(0,y.jsx)(ke().YC,{blockStore:t}):void 0,o?void 0:(0,y.jsx)(Be().A,{}),(0,y.jsx)(_e().DA,{blockStore:t})]}),(0,y.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,y.jsxs)(V().K,{from:"DefaultTopbar.Right",fallback:({error:e,errorId:t})=>(0,y.jsx)(z().W,{error:e,errorId:t,iconSize:20}),children:[S||i().A.isMobile||v||d?void 0:(0,y.jsx)(Me,{store:t,isInvalidPage:o}),w?(0,y.jsx)(_e().F4,{store:t}):void 0]})]})})}const Oe=new($().O2)("PublicTopbar",(()=>o.e(4460).then(o.bind(o,964704)))),Le=(0,$()._h)(Oe,(e=>e.PublicTopbar));var De=()=>o(474370);const He=n.forwardRef((function(e,t){const n=(0,a().v3)(),{device:r}=n,{store:i}=e,l=(0,o(997752).t)({store:i}),c=(0,s().K8)((()=>o(39341).p.state.banners.some((e=>"LoggedOutAppBanner"===e.id))),[]),u=(0,s().K8)((()=>o(673912).W.state.banners.some((e=>"PublicSiteBanner"===e.id))),[]),p=(0,s().K8)((()=>o(224011).A.state.isFullScreen),[]),b=(0,s().K8)((()=>(0,Q().KB)(n)),[n]),h=(0,s().K8)((()=>(0,F().X)(n).shouldShowSidebar),[n]),g=(0,s().O$)(ee().sidebarElectronMousePeekStore),v=(0,s().O$)(d().b),S=(0,s().K8)((()=>q().default.isVisible()),[]),f=g&&v&&h&&!b&&!S,m=r.isElectron&&!v&&!p?`${W().N_7} ${W().sbV}`:W().N_7,w=(0,Re().U)({store:i,shouldRenderTemplateGalleryTopbar:l,isBrowserFullScreen:p}),j=(0,x().ky)();return(0,y.jsxs)("header",{style:w.header,ref:t,children:[c?(0,y.jsx)(ae,{}):void 0,u?(0,y.jsx)(se,{}):void 0,j?(0,y.jsx)(le,{}):void 0,(0,y.jsx)("div",{style:w.container,className:m,onFocus:x().lE,onBlur:x().c8,children:(0,y.jsx)(V().K,{from:"Topbar",fallback:({error:e,errorId:t})=>(0,y.jsx)("div",{className:W().N_7,style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",height:(0,C().ek)(r.isElectronMac),maxWidth:"100vw",paddingInlineEnd:8},children:(0,y.jsx)(z().W,{error:e,errorId:t,iconSize:20})}),children:(0,y.jsx)(Ve,{...e,shouldRenderTemplateGalleryTopbar:l})})}),f?(0,y.jsx)(o(540545).k,{style:w.electronTopbarSidebarMousePeekArea}):void 0]})}));function Ne({store:e,isInvalidPage:t}){const o=(0,Re().Kh)({shouldRenderTemplateGalleryTopbar:!1}),n=(0,Ie().m)({location:"TrustedDomainPage"});return(0,y.jsxs)("div",{style:o,onDoubleClick:x().mz,children:[(0,y.jsx)(Ce()._,{topbarFeatureController:n}),(0,y.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,y.jsx)(De().b,{store:e,isInvalidPage:t})]})}function Ve({shouldRenderTemplateGalleryTopbar:e,store:t,routerState:r,isInvalidPage:i,isElectron:l,showSidebarButton:d,hideActionButtons:c}){const u=(0,a().v3)(),p=(0,n.useRef)(0),b=(0,n.useRef)(0),h=(0,n.useCallback)((()=>{p.current=window.screenX,b.current=window.screenY}),[]),g=(0,n.useCallback)((e=>{const t=window.screenX,n=window.screenY;p.current===t&&b.current===n&&(e.target===e.currentTarget&&(0,o(749804).I)({environment:u}),(0,N().SQ)({event:e,context:N().y$.Click,callback:()=>{o(661920).Cx(u)}}))}),[u]),{shouldRenderPublicPageTopbar:v,shouldRenderPublicShareLinkTopbar:f,shouldRenderLoggedOutSidebarButton:m}=(0,x().Im)({store:t}),{isPersonalHome:w,isTeamHome:j,isMeet:P,isLibraryPage:A,teamStore:k,shouldRenderTrustDomainPageTopbar:C}=(0,s().K8)((()=>{const e=oe().default.state.sidebarSpaceStore;if(!t){const t="team"===r.route.name&&e&&o(95758).h.createChildStore(e,{table:"team",id:r.route.teamId,spaceId:e.id});return{isTeamHome:"team"===r.route.name,isMeet:"meet"===r.route.name,isPersonalHome:!1,teamStore:t,shouldRenderPublicPageTopbar:!1,shouldRenderTrustDomainPageTopbar:!1}}const{publicPageData:n}=te().A.state;return{isPersonalHome:t.isPersonalHomePage(),isLibraryPage:(0,o(742943).T0)(u),isTeamHome:!1,isMeet:!1,teamStore:void 0,shouldRenderTrustDomainPageTopbar:null==n?void 0:n.isDLSViewer}}),[r.route,t,u]),T=(0,s().K8)((()=>x().i_({store:t,environment:u})),[t,u]),[{status:M}]=(0,S().Yb)((async()=>await te().A.waitUntilLoaded()),[]),B=(0,s().K8)((()=>u.currentUser.isLoggedIn()),[u.currentUser]);return!T||t&&"pending"===M||A?null:t&&f?(0,y.jsx)(J,{showSidebarButton:d&&(B||!B&&m),store:t,isInvalidPage:i,isElectron:l}):v&&t?e?(0,y.jsx)(ce,{blockStore:t,isInvalidPage:i}):(0,y.jsx)(Le,{store:t,isInvalidPage:i}):C&&t?(0,y.jsx)(Ne,{store:t,isInvalidPage:i}):w&&t?(0,y.jsx)(Y,{store:t,isInvalidPage:i,onClickTopbar:g,onMouseDown:h}):j&&k?(0,y.jsx)(re,{teamStore:k,showSidebarButton:d}):P?(0,y.jsx)(X,{showSidebarButton:d}):t?(0,y.jsx)(Ke,{store:t,isInvalidPage:i,showSidebarButton:d,hideActionButtons:c,shouldRenderTemplateGalleryTopbar:e,handleClickTopbar:g,handleMouseDown:h}):null}var ze=()=>o(824622),Fe=()=>o(600871);const We=new($().O2)("mobileActionBar",(async()=>{const[{default:e},{MobileActionBar:t},{NativeMobileActionBar:n}]=await Promise.all([Promise.all([o.e(75134),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(71143),o.e(87249),o.e(71621),o.e(88924),o.e(92845),o.e(56369),o.e(5834),o.e(48486),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(74562),o.e(47160),o.e(37384),o.e(91598),o.e(48046),o.e(3259),o.e(42056),o.e(76677),o.e(43223),o.e(15517),o.e(94995),o.e(98339),o.e(55639),o.e(1966),o.e(55776),o.e(51444),o.e(40914),o.e(94300),o.e(72122),o.e(49175),o.e(36359),o.e(22181),o.e(27991),o.e(39438),o.e(28656),o.e(37079),o.e(63053),o.e(28305),o.e(74566),o.e(49222)]).then(o.bind(o,643747)),Promise.all([o.e(75134),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(71143),o.e(87249),o.e(71621),o.e(88924),o.e(92845),o.e(56369),o.e(5834),o.e(48486),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(74562),o.e(47160),o.e(37384),o.e(91598),o.e(48046),o.e(3259),o.e(42056),o.e(76677),o.e(43223),o.e(15517),o.e(94995),o.e(98339),o.e(55639),o.e(1966),o.e(55776),o.e(51444),o.e(40914),o.e(94300),o.e(72122),o.e(49175),o.e(36359),o.e(22181),o.e(27991),o.e(39438),o.e(28656),o.e(37079),o.e(63053),o.e(28305),o.e(74566),o.e(49222)]).then(o.bind(o,664137)),Promise.all([o.e(75134),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(71143),o.e(87249),o.e(71621),o.e(88924),o.e(92845),o.e(56369),o.e(5834),o.e(48486),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(74562),o.e(47160),o.e(37384),o.e(91598),o.e(48046),o.e(3259),o.e(42056),o.e(76677),o.e(43223),o.e(15517),o.e(94995),o.e(98339),o.e(55639),o.e(1966),o.e(55776),o.e(51444),o.e(40914),o.e(94300),o.e(72122),o.e(49175),o.e(36359),o.e(22181),o.e(27991),o.e(39438),o.e(28656),o.e(37079),o.e(63053),o.e(28305),o.e(74566),o.e(49222)]).then(o.bind(o,147612))]);return{MobileActionBarWrapper:e,MobileActionBar:t,NativeMobileActionBar:n}}),{waitForInitialPageRender:!0}),$e=(0,$()._h)(We,(e=>e.MobileActionBar)),Ue=(0,$()._h)(We,(e=>e.MobileActionBarWrapper)),Xe=(0,$()._h)(We,(e=>e.NativeMobileActionBar));function Ge({store:e,shouldShowMoveTo:t}){var o;const r=(0,a().v3)(),i=(0,s().K8)((()=>{var e;return null===(e=r.mobileNative)||void 0===e?void 0:e.api.renderMobileActionBar}),[null===(o=r.mobileNative)||void 0===o?void 0:o.api.renderMobileActionBar]),l=(0,n.useCallback)((t=>{const{isMobileNative:o}=r.device;return(0,y.jsx)($e,{stores:t,position:o?Fe().nh.Bottom:Fe().nh.Floating,currentBlockStore:e})}),[r.device,e]);return r.device.isMobileNative?(0,y.jsx)(Ue,{currentBlockStore:e,isNativeMobileActionBar:!0,makeActionBarComponent:o=>(0,y.jsx)(Xe,{renderApi:i,stores:o,currentBlockStore:e,shouldShowMoveTo:t,fallbackRenderer:l})}):(0,y.jsx)(Ue,{currentBlockStore:e,isNativeMobileActionBar:!1,makeActionBarComponent:l})}var Ye=()=>o(68465),qe=()=>o(953418);const Ze={MeetingsPageContainer:new($().O2)("MeetingsPageContainer",(()=>Promise.all([o.e(75134),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(25151),o.e(87249),o.e(71621),o.e(88924),o.e(92845),o.e(56369),o.e(5834),o.e(48486),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(47160),o.e(32254),o.e(2681),o.e(4902),o.e(61533),o.e(34727),o.e(43024)]).then(o.bind(o,203939))))},Je=(0,$()._h)(Ze.MeetingsPageContainer,(e=>e.MeetingsPageContainer));const Qe=new($().O2)("SavePageToOPFS",(()=>o.e(82094).then(o.bind(o,402245)))),et=(0,$()._h)(Qe,(e=>e.SavePageToOPFS));var tt=()=>o(732430),ot=()=>o(178624),nt=()=>o(553737);const rt=new(ot().R)({key:"getting-started-page-redirects",namespace:nt().Bq,important:!1,trackingType:"necessary"});function it(e){const t=at();if(t[e]){const o={...t};delete o[e],rt.setState(Object.keys(o).length>0?o:void 0)}}function at(){const e=rt.getState();if(!e)return{};const t=Date.now()-36e5,o={};let n=!1;for(const[r,i]of Object.entries(e))i.timestamp>t?o[r]=i:n=!0;return n&&rt.setState(Object.keys(o).length>0?o:void 0),o}function st(){try{const e=(0,o(786702).w)(window.location.href),t=at();if(e&&t[e]){const o=t[e].fallbackUrl;return it(e),window.location.replace(o),!0}return!1}catch(e){return o(165358).log({level:"error",from:"checkAndHandleGettingStartedPageRedirect",type:"error",data:{miscDataToConvertToString:{error:e}}}),!1}}function lt(){const e=(0,a().v3)(),t=(0,s().O$)(oe().AppStoreSidebarSpaceViewStore),r=(0,s().K8)((()=>{var e;return null===(e=oe().AppStoreMainEditorCurrentBlockStore.state)||void 0===e?void 0:e.id}),[]),i=(0,T().tz)(),l=(0,s().K8)((()=>{const e=(0,o(402390).H)(i);return(0,o(928870).q)(e)}),[i]),d=(0,s().K8)((()=>{const t=(0,o(266615).J)({environment:e}),n=v().default.checkGate({gateName:"private_pages_logged_in_no_workspace"});return t&&n&&r===l}),[e,l,r]),c=(0,s().K8)((()=>e.RouterStore.state.route.name),[e]),u=(0,s().K8)((()=>{const e=null==t?void 0:t.getSharedPageStores(),n=null==t?void 0:t.getPublicShareLinkPageStores(),r=(null==e?void 0:e[0])??(null==n?void 0:n[0]);return r?(0,o(492414).Ay)({store:r,pageVisitSource:o(584262).y8.ExternalPagesSidebar}):void 0}),[t]);(0,n.useEffect)((()=>{if("page"!==c||!r||!u||!d)return;r===l?function(e,t){const o={...at(),[e]:{fallbackUrl:t,timestamp:Date.now()}};rt.setState(o)}(r,u):it(r)}),[e,r,c,u,d,l])}var dt=()=>o(150193),ct=()=>o(375447),ut=()=>o(712505),pt=()=>o(411671),bt=()=>o(543491),ht=()=>o(471995);const gt=new(ot().R)({key:"publicShareLinkEditDisclosureBannerPreference",namespace:nt().Bq,important:!0,trackingType:"necessary"});function vt(){const e=(0,a().v3)(),[t,r]=(0,n.useState)(!1),i=(0,o(811789).X)(gt),l=(0,T().tz)(),d=(0,s().K8)((()=>{if(!(oe().default.state.sidebarSpaceViewStore&&oe().default.state.currentUserRootStore&&oe().default.state.sidebarSpaceStore&&oe().default.state.currentUserSettingsStore))return!1;if(i)return!1;if(!(0,me().g)())return!1;if(!e.currentUser.isLoggedIn())return!1;const t=oe().default.state.mainEditorCurrentBlockStore,n=null==t?void 0:t.getRole();if(!n)return!1;const r=(0,o(68263).ok)(n);return!!t&&(0,ve().qb)(e,t)&&r}),[e,i]),c=()=>{ht().N2(),gt.setState({dismissedExpiresAt:(0,o(597777).g7)(90)})},u=(0,s().K8)((()=>{var e;return null===(e=te().A.getState().publicPageData)||void 0===e?void 0:e.publicAccessRole}),[]);(0,n.useEffect)((()=>{if(d){r(!0);const e="comment_only"===u?"commenting":"editing";ht().D6({durationMs:"keep",label:l.formatMessage({defaultMessage:"When you start {permission}, your name, email and photo may become visible to anyone who can view the page.",id:"publicShareLinkEditDisclosureBanner.banner"},{permission:e}),right:(0,y.jsx)(o(285790).A,{ariaLabel:l.formatMessage({defaultMessage:"Close",id:"publicShareLinkEditDisclosureBanner.closeButton"}),colorPalette:"gray",colorVariant:"inversePrimary",icon:o(995847).xMarkSmallIcon,onClick:c})})}else!d&&t&&(ht().N2(),r(!1))}),[d,l,u,t])}var St=()=>o(766081);const ft="1.375em",mt=new Set(["posts","meet"]);function xt(e){return(0,o(651784).Jx)(e.route)}const yt=n.memo((function(e){const{store:t,routerState:p}=e,b=(0,a().v3)(),{RouterStore:h}=b,g=(0,a().Y0)(),{topbarHeight:v,topbarRef:S}=(0,o(406632).B)();lt();const f=(0,n.useCallback)((e=>{bt().A.state&&("scroll"===e?bt().A.state.hadScroll||(bt().A.setState({...bt().A.state,hadScroll:!0}),u().pF(b,{interactionType:e})):"click"===e?bt().A.state.hadClick||(bt().A.setState({...bt().A.state,hadClick:!0}),u().pF(b,{interactionType:e})):"copy"===e?bt().A.state.hadCopy||(bt().A.setState({...bt().A.state,hadCopy:!0}),u().pF(b,{interactionType:e})):(0,o(534177).HB)(e))}),[b]);(0,n.useEffect)((()=>{if(f){const e=()=>{f("copy")};return window.addEventListener("copy",e),()=>window.removeEventListener("copy",e)}}),[f]),(0,n.useEffect)((()=>()=>t&&o(773582).O({rootStore:t})),[t]),(0,n.useEffect)((()=>{st()}),[]);const m=(0,s().r6)((()=>t?pt().A.getMode(b,t):pt().s.disabled),[b,t]),j=(0,s().r6)((()=>(0,Ye().ZE)(m.state)),[m]),P=(0,s().K8)((()=>{if(!t)return;const{presenceStore:e,pageVisitStore:n}=oe().default.state,r=t.getSpaceStore();return{isPeekRenderer:!1,pageStore:t,spaceStore:r,spaceViewStore:r?(0,o(111379).k)(r.id):void 0,presenceStore:e,pageVisitStore:n,publicEditModeStore:m,arePublicEditCompletionsEnabledStore:j}}),[j,m,t]),A=(0,s().K8)((()=>b.currentUser.isLoggedIn()),[b]),{isInvalidPage:k,isAppInitializationScreen:C,appContainerStore:T,isHome:M,isPersonProfile:B,shouldShowAddTo:I}=(0,s().K8)((()=>{if(!t)return{isInvalidPage:!0,isAppInitializationScreen:!1,appContainerStore:void 0,isHome:!1,isPersonProfile:!1,shouldShowAddTo:!1};const e=b.currentUser.id===t.getCreatedById()&&t.getCreatedByTable()===o(798880).oo,n=(0,o(242028).s)(t);return{isInvalidPage:Boolean(!t.isDefined()||!t.canRead()),isAppInitializationScreen:n,appContainerStore:n?t:void 0,isHome:"personal_home_page"===t.getType(),isPersonProfile:t.isPersonProfile(),shouldShowAddTo:Boolean(p.route.showMoveTo&&t.canEdit()&&A&&e)}}),[t,p.route,A,b.currentUser]),E=(0,s().O$)(oe().AppStoreMainEditorCurrentBlockStore),R=(0,s().K8)((()=>(0,F().X)(b)),[b]),_=(0,l().DP)(),K=(0,s().K8)((()=>null==E?void 0:E.isPersonalHomePage()),[E]),O=(0,s().K8)((()=>{var e;return Boolean(null===(e=d().A.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),L=(0,s().K8)((()=>g.isTablet?{paddingBottom:b.WindowSizeStore.getSafePaddingBottomPx(0)}:{}),[g.isTablet,b.WindowSizeStore]),{banners:D}=(0,s().O$)(dt().A),H=(0,s().K8)((()=>{const e="team"===p.route.name,t={flexGrow:0,flexShrink:1,display:"flex",flexDirection:"column",background:K||e?O?`rgba(255, 255, 255, ${o(232280).a})`:(0,o(665579).Lu)({theme:_,isPhone:g.isPhone}):_.background.primary,zIndex:1,height:(()=>{switch(!0){case K:return"100%";case i().A.isMobile:return"100vh";default:return`calc(100vh - ${v}px)`}})(),maxHeight:"100%",position:K&&0===D.length?"absolute":"relative",paddingBottom:K&&0===D.length?L.paddingBottom:0};if(!(0,Q().tv)(b)){const e=ee().sidebarOpenStore.state;(0,Q().o1)(b)||(t.boxShadow=_.shadowMD),t.pointerEvents=e?"none":"auto",t.transform="translateX(0)"}return!R&&g.isMobileNative&&(t.pointerEvents="auto",t.transform="translateX(0px)"),t}),[p.route.name,K,O,_,g.isPhone,g.isMobileNative,v,b,R,L,D]),N=(0,s().K8)((()=>"nativeTab"===h.state.route.name),[h]),[U,X]=(0,s().K8)((()=>{const e=(0,Q().Uh)(b);return[e,e+(0,Q().Ql)(b)]}),[b]),G=(0,s().K8)((()=>o(900652).Z8()),[]),Y=(0,s().K8)((()=>q().default.isTogglingToPanelModeState()),[]),Z=(0,s().K8)((()=>ee().sidebarResizingStore.state.isResizing),[]),J=(0,s().O$)(d().b),te=(0,s().K8)((()=>!J&&!(0,Q().KB)(b)&&!q().default.isPanelPinnedState()),[b,J]),ne=(0,s().K8)((()=>(0,Q().KB)(b)),[b]),re=(0,s().O$)(o(716050).q),ie=(0,s().K8)((()=>b.WindowSizeStore.state.paddingTop),[b.WindowSizeStore]),ae=(0,l().IS)((()=>({frameContainer:{order:o(72307).A.appCursorListener.editor,display:"flex",flexDirection:"column",width:g.isTablet?"unset":"100%",overflow:g.isTablet?"unset":"hidden",isolation:"auto",background:re.attached?"black":"transparent",position:"relative",...L},sheetInset:re.attached?{borderRadius:12*re.proportion+"px",transform:`scale(${1-.08*re.proportion}, ${1-.035*re.proportion}) translateY(${.8*ie*re.proportion}px) translateZ(0)`,willChange:"transform border-radius",transition:re.animating?"transform 0.5s cubic-bezier(0.32, 0.72, 0, 1), border-radius 0.5s cubic-bezier(0.32, 0.72, 0, 1)":void 0,overflow:"hidden"}:{}})),[g.isTablet,re,ie,L]),se=(0,s().O$)(o(865241).P),le=(0,s().K8)((()=>null==t?void 0:t.canEdit()),[t]),de=(0,r().X)("feed_sidebar_item"),{value:ce}=(0,$().fJ)(tt().xB,{disabled:!de}),ue=(0,s().O$)(oe().AppStoreSidebarSpaceViewStore),pe=(0,s().O$)(oe().AppStoreSidebarSpaceStore),be=(0,s().K8)((()=>!i().A.isMobile&&!o(726562).eX.state),[]);(0,n.useEffect)((()=>{o(729380).u.resetHeights()}),[null==E?void 0:E.id]);const he=g.isTablet||g.isPhone&&!mt.has(e.routerState.route.name),ge=(0,s().K8)((()=>he&&(0,x().pF)({device:b.device,route:p.route})),[b.device,p.route,he]),ve=!i().A.isMobile&&!C&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(He,{...e,ref:S,showSidebarButton:te,isElectron:g.isElectron,isInvalidPage:k}),g.isElectronWindows&&!J?(0,y.jsx)(o(584535).K,{}):void 0]}),Se=(0,y.jsxs)(o(145214).A,{tag:"main",id:"main",animate:{width:K?X:U,...re.attached?{}:{translateX:G}},skip:J&&Z||Y||i().A.isMobile||se,style:{...H,...ae.sheetInset},className:W().GtI,children:[he?(0,y.jsx)(V().K,{from:"TopbarMobile",fallback:({error:e,errorId:t})=>(0,y.jsx)("div",{className:W().byw,style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",height:c().s1,maxWidth:"100vw",paddingInlineEnd:8},children:(0,y.jsx)(z().W,{error:e,errorId:t,iconSize:26})}),children:(0,y.jsx)(Bt,{route:p.route,children:(0,y.jsx)(ze().JY,{...e,isInvalidPage:k,shouldShowAddTo:I,isSidebarExpanded:ne,spaceStore:pe,spaceViewStore:ue})})}):void 0,D.length>0&&!ge?(0,y.jsx)(o(885962).x,{banners:D,isMobile:Boolean(i().A.isMobile)}):void 0,T?(0,y.jsx)(jt,{appContainerStore:T}):"team"===p.route.name?(0,y.jsx)(o(3243).zF,{teamId:p.route.teamId}):"posts"===p.route.name?g.isMobileNative&&g.isPhone?(0,y.jsx)(tt().Lb,{}):de&&ce?(0,y.jsx)(ce.FeedPage,{}):void 0:M&&t?(0,y.jsx)(Pt,{store:t}):"meet"===p.route.name?(0,y.jsx)(Je,{}):B&&t?(0,y.jsx)(o(562984).i,{personProfileStore:t}):t?(0,y.jsx)(At,{store:t,routerState:p,maybeLogSearchInteractionEvent:f,shouldShowAddTo:I}):null,A&&i().A.isMobile&&t?(0,y.jsx)(Ge,{store:t,shouldShowMoveTo:Boolean((p.route.showMoveTo||g.isTablet)&&le)}):void 0,i().A.isMobile&&!g.isMobileNative&&t?(0,y.jsx)(w,{store:t}):void 0]}),fe=be&&E&&(0,y.jsx)(o(753397).Sx,{currentBlockStore:E,isElectronMac:b.device.isElectronMac}),me=!i().A.isMobile&&(0,y.jsx)(o(75600).t,{});return(0,y.jsx)(wt,{pageContext:P,children:(0,y.jsxs)("div",{className:N?"hidden":"",style:ae.frameContainer,children:[ve,Se,fe,me]})})}));function wt({pageContext:e,children:t}){return e?(0,y.jsx)(o(452446).q,{value:e,children:t}):(0,y.jsx)(y.Fragment,{children:t})}function jt({appContainerStore:e}){return(0,y.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100%"},children:(0,y.jsx)(o(601734).EU,{collectionViewBlockStore:e})})}const Pt=n.memo((function({store:e}){return(0,y.jsx)(D().A,{disable:!0,store:e,isDefaultContainer:!0,render:()=>(0,y.jsx)(o(117296).VJ,{})})}));function At({store:e,routerState:t,maybeLogSearchInteractionEvent:i,shouldShowAddTo:l=!1}){const d=(0,a().v3)(),{RouterStore:c}=d,{historyState:u}=t,{currentLoadingContainerStore:p,pageVisitStore:b}=(0,s().K8)((()=>{const{currentLoadingContainerStore:e,pageVisitStore:t}=oe().default.state;return{currentLoadingContainerStore:e,pageVisitStore:t}}),[]),h=(0,s().K8)((()=>u&&o(496603).Et(u.scrollTop)?u.scrollTop:void 0),[u]),g=(0,s().K8)((()=>Boolean((0,ve().qb)(d,e))),[d,e]),v=(0,s().K8)((()=>Boolean(ut().default.isCenterPeekOpen()||o(714818).A.state.open)),[]),S=(0,r().X)("capture_page_load_record_stats")?o(445e3).t.forRootStore("Frame",e):void 0;return(0,y.jsx)(D().A,{store:e,isDefaultContainer:!0,droppable:!0,isRootContainer:!0,disableRectangularSelection:g,disable:v,render:({selectableEvents:r,selectableHoverMenuOverlay:a})=>{const s=o(255460).Cf(c),u={pageStore:e,pageVisitStore:b,scrollToBlockIds:s,scrollToDiscussionId:s.length?void 0:t.route.discussionId,scrollToPosition:h,observer:S,onReady:()=>{o(424444).$(d,{animateScrollToBlocks:!1}),o(700149).f.setIsFrameReady(!0)},onDone:()=>{e.isCollectionView()||"rendered"===oe().default.state.renderPhase||oe().default.setPageRendered()},render:({scrollerRef:t,error:o,ready:n,initialRequestCompleted:s,endOfResultsReached:d,isCollectionInPage:c})=>(0,y.jsx)(kt,{scrollerRef:t,store:e,error:o,ready:n,initialRequestCompleted:s,endOfResultsReached:d,isCollectionInPage:c,selectableEvents:r,selectableHoverMenuOverlay:a,maybeLogSearchInteractionEvent:i,shouldShowAddTo:l,observer:S})};return(0,y.jsx)(n.Suspense,{fallback:(0,y.jsx)(St().A,{isVisible:!0,store:e}),children:(0,y.jsx)(o(629537).V,{...u,store:p,observer:S})})}},e.id)}const kt=n.memo((function({store:e,error:t,ready:r,initialRequestCompleted:d,endOfResultsReached:c,isCollectionInPage:u,selectableEvents:g,selectableHoverMenuOverlay:v,maybeLogSearchInteractionEvent:S,scrollerRef:f,shouldShowAddTo:x,observer:w}){const j=(0,a().v3)(),P=(0,a().Y0)(),{publicEditModeStore:A}=(0,o(792485).S)()??{},k=(0,s().K8)((()=>(0,Ye().ZE)(null==A?void 0:A.state)),[A]),C=(0,fe().V)(),T=(0,n.useCallback)((e=>{if(o(779315).A.PageScroller=e,e){const t=e.getNode();t instanceof HTMLElement&&(f.current=t)}}),[f]),M=(0,n.useCallback)((()=>{S("scroll")}),[S]),B=(0,n.useCallback)((e=>{g.onClick(e),S("click")}),[S,g]),I=(0,n.useCallback)((e=>{if(!j.device.isWindows)return;e.preventDefault&&e.preventDefault();const t=f.current;if(t){const e=t.clientHeight;(0,qe().HN)({element:t,environment:j,options:{top:.9*-e,left:0,behavior:"smooth"}})}}),[j,f]),E=(0,n.useCallback)((e=>{if(!j.device.isWindows)return;e.preventDefault&&e.preventDefault();const t=f.current;if(t){const e=t.clientHeight;(0,qe().HN)({element:t,environment:j,options:{top:.9*e,left:0,behavior:"smooth"}})}}),[j,f]),R=(0,s().K8)((()=>e.isCollectionView()),[e]),_=(0,s().K8)((()=>function(e){const t=(0,L().Wj)(e.device);return"number"==typeof t?`${t}px`:t}(j)),[j]),K=(0,l().IS)((()=>({spinner:{zIndex:1,opacity:.5,marginTop:`calc(-${ft} / 2 - ${_} / 2)`,marginBottom:24,marginInlineStart:"auto",marginInlineEnd:"auto"},scroller:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,position:"relative",...r?{}:{opacity:0,pointerEvents:"none",height:0},...R?{}:{alignItems:"center"}}})),[_,R,r]),O=(0,s().K8)((()=>dt().A.state.banners.some((e=>"over_free_block_limit"===e.contentKey))),[]),D=(0,s().K8)((()=>(0,o(807778).Qe)(j)),[j]),H=(0,s().K8)((()=>ut().default.isSidePeekOpen()?void 0:r?p().u5(j):o(611648).A.All),[j,r]),N=(0,s().K8)((()=>(0,o(122001).f)({environment:j,store:e})),[j,e]),V=o(865085).OPFSBootupRegistry.isEnabled;return(0,y.jsx)(o(998531).N,{capture:!0,debugName:"FrameKeyboardArea",onPageUp:I,onPageDown:E,children:(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)(h().H,{ref:T,onScroll:M,preventType:H,type:N,style:K.scroller,store:m().A,...g,onClick:B,children:[v,C||P.isPhone||!k?void 0:(0,y.jsx)(b().H7,{scrollerStore:m().A}),C?void 0:(0,y.jsx)(o(549500).EO,{scrollerStore:m().A}),!C&&D&&O?(0,y.jsx)(o(33862).i,{}):void 0,C?void 0:(0,y.jsx)(o(998765).hD,{blockStore:e}),C||i().A.isMobile?void 0:(0,y.jsx)(o(12314).rD,{}),d?(0,y.jsx)(Ct,{store:e,error:t,shouldShowAddTo:x,observer:w}):void 0,!r||c||d&&t?void 0:(0,y.jsx)(o(98126).A,{legacySize:ft,style:K.spinner})]}),!C&&P.isPhone&&k?(0,y.jsx)(b().H7,{scrollerStore:m().A}):void 0,C||P.isPhone||!k?void 0:(0,y.jsx)(b().X9,{scrollerKey:"Page"}),(0,y.jsx)(St().A,{isVisible:!r,store:e}),V?(0,y.jsx)(et,{pageId:e.id}):void 0]})})})),Ct=n.memo((function({store:e,error:t,shouldShowAddTo:r,observer:i}){const{pageVisitStore:d,presenceStore:c,currentLoadingContainerStore:u}=(0,s().K8)((()=>{const{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:o}=oe().default.state;return{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:o}}),[]),p=(0,a().v3)(),{WindowSizeStore:b}=p,h=(0,s().K8)((()=>b.state.height),[b]),[g,v]=(0,s().K8)((()=>{const t=(0,Q().Uh)(p),n=Math.max(o(478726).x6,t),r=t+(0,Q().Ql)(p);return[(0,o(747100).RX)(e)&&!e.isFullWidth()?n:r,It(p,h)]}),[h,p,e]),S=(0,s().K8)((()=>ut().default.isSidePeekOpen()||ut().default.isSidePeekClosingStore.state),[]),f=(0,o(539412).x9)(),m=(0,l().IS)((()=>({pageViewBlockStyle:S?{width:g,position:"absolute",overflowX:"hidden",insetInlineStart:0}:Mt})),[S,g]),w=(0,o(135055).y6)(),j=(0,s().K8)((()=>!!w&&(!e.isReady()&&(0,o(968913).Wi)(p,e.id))),[p,e,w]),P=(0,s().K8)((()=>{if(!p.currentUser.isLoggedIn())return!1;const o=u&&!u.state.endOfResultsReached,n=e.isDefined()&&!e.canRead();return o&&t||n}),[p.currentUser,u,e,t]),A=(0,s().K8)((()=>!1===(null==u?void 0:u.state.endOfResultsReached)),[u]),k=(0,s().K8)((()=>e.canRead()&&e.isDefined()),[e]),C=(0,s().O$)(p.RouterStore),T=(0,s().K8)((()=>H().b.state.topbar),[]),M=(0,s().K8)((()=>!r&&(0,x().pF)({device:p.device,route:C.route})&&Boolean(T)),[p.device,C.route,r,T]);vt();const B=(0,s().K8)((()=>dt().A.state.banners.length>0),[]),I=(0,s().K8)((()=>{const t=e.getCover();return Boolean(t)&&!B}),[e,B]);return(0,n.useEffect)((()=>{if(P){const n=t||new Error("Page loading error");o(449412).O8(n,{from:"Frame.PageContainerContent",type:"pageLoadingError",data:{pageId:e.id,miscDataToConvertToString:{isLoading:A,canRead:k}}})}}),[P,A,k,t,e.id]),P||j?(0,y.jsx)(_,{isOfflineAndUnavailable:j}):(0,y.jsxs)(Tt,{observer:null==i?void 0:i.observer,children:[f?(0,y.jsx)(o(679192).w,{}):null,(0,y.jsx)(o(745803).t,{}),M&&xt(C)?(0,y.jsx)(Bt,{route:C.route,overridePosition:"relative",shouldOverlayOnCover:I,children:(0,y.jsx)(ze().S8,{isInvalidPage:!1,store:e,routerState:C})}):void 0,(0,y.jsx)(L().Ay,{context:o(548821).Rr.Frame,style:m.pageViewBlockStyle,store:e,paddingBottom:v,disabled:!1}),(0,y.jsx)(o(688149).A,{fetch:()=>Promise.all([o.e(64534),o.e(84258)]).then(o.bind(o,767905)),render:({PresenceContainer:e})=>(0,y.jsx)(e,{pageVisitStore:d,presenceStore:c,isPeekView:!1})})]})}));function Tt(e){return e.observer?(0,y.jsx)(o(892235).S,{observer:e.observer,children:e.children}):(0,o(558842).Du)(e.children)}const Mt={};function Bt(e){const{children:t,route:o,overridePosition:n,shouldOverlayOnCover:r=!1}=e,i=(0,a().v3)(),d=(0,s().K8)((()=>(0,x().pF)({device:i.device,route:o})),[i.device,o]),u=(0,s().K8)((()=>i.WindowSizeStore.state.paddingTop),[i.WindowSizeStore]),p=(0,s().K8)((()=>{var e;return null===(e=H().b.state.topbar)||void 0===e?void 0:e.position}),[]),b=d?c().uF:c().s1,g=(0,l().IS)((()=>{const e=r?0:b+u;return{mobileTopbarPlaceholder:{minHeight:b+u,display:"flex",flexShrink:0,zIndex:h().Z+1,width:"100%"},mobileTopbarRedesigned:{position:n??p??"relative",pointerEvents:"none",minHeight:e,backgroundColor:"transparent",display:"flex",flexShrink:0,insetInlineStart:0,insetInlineEnd:0,zIndex:h().Z+1,width:"100%"}}}),[u,n,p,b,r]);return(0,y.jsx)("div",{style:d?g.mobileTopbarRedesigned:g.mobileTopbarPlaceholder,children:t})}function It(e,t){const o=i().A.isMobile&&ct().Ay.state.open?t:0;return(0,L().Wj)(e.device,p().C6(e)+o)}},406632:(e,t,o)=>{o.d(t,{N:()=>c,B:()=>d});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(175947);class s extends(()=>o(757695))().Store{getInitialState(){return-1}getHeight(e){return-1===this.state?(0,a().ek)(e.isElectronMac):this.state}overrideHeight(e){this.setState(e)}reset(){this.setState(-1)}}const l=new s("topbarHeight");function d(){const e=(0,r().Y0)(),t=(0,n.useRef)(null),[o,i]=(0,n.useState)((()=>a().ek(e.isElectronMac)));return(0,n.useLayoutEffect)((()=>{if(!t.current)return;const e=t.current.getBoundingClientRect().height;i(e);const o=new ResizeObserver((e=>{for(const t of e)i(t.contentRect.height)}));return o.observe(t.current),()=>o.disconnect()}),[]),(0,n.useEffect)((()=>{l.overrideHeight(o)}),[o]),(0,n.useEffect)((()=>()=>{l.reset()}),[]),{topbarHeight:o,topbarRef:t}}function c(){const e=(0,r().Y0)();return(0,i().K8)((()=>l.getHeight(e)),[e])}},474370:(e,t,o)=>{o.d(t,{b:()=>j});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(631524),l=()=>o(340498),d=()=>o(182183),c=()=>o(427704),u=()=>o(69708),p=()=>o(329458),b=()=>o(729283),h=()=>o(1130),g=()=>o(578872),v=()=>o(792415),S=()=>o(765957),f=()=>o(795179),m=()=>o(746084),x=()=>o(573792),y=o(474848);const w={width:l().Ev.default,height:l().Ev.default,marginInlineEnd:6};function j(e){const t=(0,a().DP)(),o=(0,r().v3)(),{device:n}=o,{store:i,isInvalidPage:s}=e;return n.isMobile||s?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m().A,{store:i,buttonPopupStore:f().A}),(0,y.jsx)("div",{style:x().R1(t)}),(0,y.jsx)(P,{store:i})]})}function P(e){const{store:t}=e,o=(0,r().v3)(),a=Boolean(o.currentUser.isLoggedIn()||o.publicDomainUserId),l=(0,i().K8)((()=>{const{publicPageData:e}=v().A.state;return null==e?void 0:e.isDLSViewer}),[]),f=(0,i().K8)((()=>g().hn(t)),[t]),m=(0,n.useCallback)((async()=>{(0,p().L)(o,{variant:"open_notion"});const{currentUserRootStore:e}=S().default.state,t=null==e?void 0:e.getSpaceViewStores();if(l&&(!t||0===t.length))return void(await(0,h().startOnboarding)(o,{type:"create-or-join",source:"topbar"}));const n=l?c().JZ.home:c().JZ.root;await b().VE(o,{utmContent:"topbar_cta",nextRoute:n})}),[o,l]),x=(0,n.useCallback)((async()=>{(0,p().L)(o,{variant:"try_notion"}),await b().VE(o,{utmContent:"topbar_cta",nextRoute:c().JZ.signup})}),[o]);return f?null:a?(0,y.jsxs)(s().p,{onClick:m,children:[(0,d().notionTintableIcon)(w),(0,y.jsx)(u().sA,{defaultMessage:"Open Notion",id:"topbar.publicPage.cta.label.open"})]}):(0,y.jsxs)(s().p,{onClick:x,children:[(0,d().notionTintableIcon)(w),(0,y.jsx)(u().sA,{defaultMessage:"Try Notion",id:"topbar.publicPage.cta.label.try"})]})}},540545:(e,t,o)=>{o.d(t,{k:()=>l});o(296540);var n=()=>o(402014),r=()=>o(209199),i=()=>o(869562),a=()=>o(749687),s=o(474848);function l({children:e,style:t}){const o=e=>{(0,n().SQ)({event:e,context:n().y$.SidebarMouseMove,callback:()=>{const t=e.currentTarget.getBoundingClientRect(),o=(0,r().A1)()?t.left:t.right;a().sidebarMousePeekXStore.setState(o),i().open({fromElectron:!1})}})};return(0,s.jsx)("div",{onMouseEnter:o,onMouseMove:o,style:t,children:e})}},673912:(e,t,o)=>{o.d(t,{P:()=>i,W:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{banners:[],height:void 0}}setHeight(e){this.setState({...this.state,height:e})}}const r=new n,i=new(o(178624).R)({key:"publicSiteBannerDismissed",namespace:"notion",important:!1,trackingType:"necessary"})},700149:(e,t,o)=>{o.d(t,{f:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{isFrameReady:!1,tabStates:void 0}}setTabStates(e){this.setState({...this.state,tabStates:e})}setIsFrameReady(e){this.setState({...this.state,isFrameReady:e})}getStateForProvider(e){if(this.state.tabStates&&this.state.tabStates[e])return this.state.tabStates[e]}consumeState(e){var t;null!==(t=this.state)&&void 0!==t&&t.tabStates&&this.state.tabStates[e]&&this.update((t=>{if(null==t||!t.tabStates)return t;const o={...t.tabStates};return delete o[e],0===Object.keys(o).length?{tabStates:void 0,isFrameReady:t.isFrameReady}:{tabStates:o,isFrameReady:t.isFrameReady}}))}}const r=new n},726562:(e,t,o)=>{o.d(t,{Ay:()=>v,eX:()=>S,Zl:()=>m,tA:()=>f});o(296540);var n=()=>o(56366),r=()=>o(496506),i=()=>o(645873);const a=new(i().O2)("PageLayoutEditor",(async()=>Promise.all([o.e(75134),o.e(99223),o.e(9304),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(67539),o.e(42838),o.e(22900),o.e(27634),o.e(85128),o.e(49889),o.e(20108),o.e(95555),o.e(87249),o.e(71621),o.e(92845),o.e(56369),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(58636),o.e(78405),o.e(33675),o.e(74562),o.e(47160),o.e(37384),o.e(91598),o.e(48046),o.e(3259),o.e(13955),o.e(42056),o.e(3165),o.e(76677),o.e(31842),o.e(43223),o.e(45147),o.e(15517),o.e(94995),o.e(98339),o.e(55639),o.e(1966),o.e(35738),o.e(6642),o.e(55776),o.e(51444),o.e(40914),o.e(58209),o.e(13297),o.e(4802),o.e(65197),o.e(81768),o.e(94300),o.e(62032),o.e(72122),o.e(32487),o.e(28058),o.e(90638),o.e(75422),o.e(97859),o.e(50856),o.e(65014),o.e(49175),o.e(36359),o.e(2752),o.e(11571),o.e(92924),o.e(42525),o.e(25204),o.e(52273),o.e(52986),o.e(45732),o.e(46817),o.e(70442),o.e(28656),o.e(37160),o.e(30443),o.e(9426),o.e(76690),o.e(63248),o.e(39457),o.e(21912),o.e(80668),o.e(12507),o.e(6626),o.e(26497),o.e(61016),o.e(91629),o.e(61858),o.e(63053),o.e(34399),o.e(89379),o.e(34974),o.e(75332),o.e(95103),o.e(75681)]).then(o.bind(o,197632)))),s=(0,i()._h)(a,(e=>e.PageLayoutEditor)),l=new(i().O2)("SiteSettingsLayoutEditor",(async()=>await Promise.all([o.e(75134),o.e(9773),o.e(36556),o.e(40537),o.e(55373),o.e(36192),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(90825),o.e(16471),o.e(37353),o.e(29151),o.e(87248),o.e(87249),o.e(71621),o.e(88924),o.e(92845),o.e(56369),o.e(5834),o.e(48486),o.e(2411),o.e(89296),o.e(46414),o.e(9294),o.e(11676),o.e(91256),o.e(40563),o.e(67494),o.e(44584),o.e(53141),o.e(4422),o.e(4330),o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(22001),o.e(71386),o.e(4351),o.e(6331),o.e(69144),o.e(42660),o.e(55997),o.e(40828),o.e(12341),o.e(96402),o.e(84166),o.e(70359),o.e(29595),o.e(16448),o.e(10442),o.e(16434),o.e(45769),o.e(46080),o.e(75902),o.e(99809),o.e(31842),o.e(77729),o.e(6626),o.e(46204)]).then(o.bind(o,47578)))),d=(0,i()._h)(l,(e=>e.SiteSettingsLayoutEditor));var c=()=>o(263711);const u={presentationMode:new(i().O2)("PresentationMode",(async()=>await Promise.all([o.e(44711),o.e(53321),o.e(81330)]).then(o.bind(o,888866))))},p=(0,i()._h)(u.presentationMode,(e=>e.PresentationMode));var b=()=>o(765957),h=()=>o(373728),g=o(474848);function v(e){const{mainEditorCurrentBlockStore:t,currentCollectionViewStore:o}=(0,n().K8)((()=>({mainEditorCurrentBlockStore:b().default.state.mainEditorCurrentBlockStore,currentCollectionViewStore:b().default.state.currentCollectionViewStore})),[]),r=(0,n().K8)((()=>{const n=e.routerState,r=n.route;if("team"===r.name)return{store:void 0,collectionViewStore:void 0,routerState:n};if("posts"===r.name)return{store:void 0,collectionViewStore:void 0,routerState:n};if("meet"===r.name)return{store:void 0,collectionViewStore:void 0,routerState:n};return t?{store:t,collectionViewStore:o,routerState:n}:void 0}),[o,t,e.routerState]),i=(0,n().K8)((()=>S.getState()),[]),a=(0,n().K8)((()=>f.getState()),[]),l=(0,n().K8)((()=>m.getState()),[]);return i?(0,g.jsx)(s,{}):l?(0,g.jsx)(p,{}):r?a?(0,g.jsx)(d,{}):(0,g.jsx)(h().Ay,{...r}):null}const S=new(r().ComputedStore)((()=>{const e=c().g.getState();return e.isOpen&&"layout-editor"===e.mode}),{debugName:"isPageLayoutEditorOpenStore"}),f=new(r().ComputedStore)((()=>{const e=c().g.getState();return e.isOpen&&"site-settings-editor"===e.mode}),{debugName:"isSiteSettingsLayoutEditorOpenStore"}),m=new(r().ComputedStore)((()=>{const e=c().g.getState();return e.isOpen&&"presentation"===e.mode}),{debugName:"isPresentationModeOpenStore"})},811789:(e,t,o)=>{o.d(t,{X:()=>r});var n=()=>o(56366);function r(e){return(0,n().K8)((()=>{var t;const o=null===(t=e.getState())||void 0===t?void 0:t.dismissedExpiresAt,n=Date.now();return!!(o&&o>n)}),[e])}},997752:(e,t,o)=>{o.d(t,{t:()=>d});var n=()=>o(726637),r=()=>o(484714),i=()=>o(56366),a=()=>o(466088),s=()=>o(792415),l=()=>o(815377);function d(e){const{store:t}=e,o=(0,r().v3)();return(0,i().K8)((()=>{if(!t)return!1;if(n().A.isMobile||!(0,a().w)(o))return!1;if(!(0,l().K6)(t,o))return!1;const{publicPageData:e}=s().A.state;return!(null==e||!e.template)}),[o,t])}},998765:(e,t,o)=>{o.d(t,{hD:()=>i,lK:()=>s});var n=()=>o(645873);const r=new(n().O2)("MaybeMarketplaceReviewNudge",(()=>o.e(54215).then(o.bind(o,348069)))),i=(0,n()._h)(r,(e=>e.MaybeMarketplaceReviewNudge)),a=new(n().O2)("MarketplaceReviewNudge",(()=>Promise.all([o.e(39782),o.e(2501)]).then(o.bind(o,11385)))),s=(0,n()._h)(a,(e=>e.MarketplaceReviewNudge))}}]);