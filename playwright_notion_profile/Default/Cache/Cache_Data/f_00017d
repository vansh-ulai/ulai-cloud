"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42525],{14321:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>n,personKeyFillSmallIcon:()=>i});s(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.82 1.77 12.31 13.96",svg:(0,s(474848).jsx)("path",{d:"M8 1.775c-.947 0-1.717.392-2.237 1.04-.508.633-.747 1.47-.747 2.338s.239 1.704.747 2.337c.52.648 1.29 1.04 2.237 1.04s1.717-.392 2.237-1.04c.508-.633.748-1.47.748-2.337 0-.869-.24-1.705-.748-2.338-.52-.648-1.29-1.04-2.237-1.04m0 7.403c-2.197 0-4.166 1.07-5.007 2.713a1.48 1.48 0 0 0 .2 1.676c.356.414.91.658 1.487.658h6.053v-1.44a3.42 3.42 0 0 1-1.115-3.407A6.6 6.6 0 0 0 8 9.178m7.125.997c0 .854-.492 1.593-1.208 1.949v1.072l-.725.846.725.845-.967.846-.967-.846v-2.763a2.175 2.175 0 1 1 3.142-1.949m-1.617-.483a.558.558 0 1 0-1.116 0 .558.558 0 0 0 1.116 0"})},i=(0,s(340498).wt)("personKeyFillSmall",n)},26440:(e,t,s)=>{s.d(t,{w:()=>o});s(296540);var n=s(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 17.51 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,n.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},o=(0,s(340498).wt)("clockArrowBack",i)},30580:(e,t,s)=>{s.d(t,{Y:()=>n,b:()=>i});s(581454);class n extends(()=>s(757695))().Store{getInitialState(){return{step:"backupCodesUninitialized"}}}class i extends(()=>s(658921))()._{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:n,onLoadingComplete:i}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:a}=o;if("already-exists"===a.status)n();else{const e=function(e){const t=s(972435).A.getIntl(),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),a=`${n}\n${i}\n\n${e.map(s(219505).H).join("\n")}\n\n${o}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:a.backupCodes,mfaSettingId:a.mfaSettingId,backupCodesFile:e}),i()}}}},42648:(e,t,s)=>{s.d(t,{sK:()=>i().s,mt:()=>o().m,gs:()=>a().g,jJ:()=>r().j});var n=()=>s(340498);(0,n().xh)("abstract",{default:{loader:()=>s.e(40471).then(s.bind(s,324692))},darkMode:{loader:()=>s.e(40471).then(s.bind(s,90816))},tintable:{loader:()=>s.e(40471).then(s.bind(s,695122))}}),(0,n().xh)("adobeXd",{default:{loader:()=>s.e(56873).then(s.bind(s,735385))},darkMode:{loader:()=>s.e(56873).then(s.bind(s,214991))}}),(0,n().xh)("airtable",{default:{loader:()=>s.e(73865).then(s.bind(s,201350))},darkMode:{loader:()=>s.e(73865).then(s.bind(s,816142))}}),(0,n().xh)("amplitude",{default:{loader:()=>s.e(36448).then(s.bind(s,683631))},darkMode:{loader:()=>s.e(36448).then(s.bind(s,130049))},tintable:{loader:()=>s.e(36448).then(s.bind(s,360727))}}),(0,n().xh)("android",{default:{loader:()=>s.e(81154).then(s.bind(s,994437))},darkMode:{loader:()=>s.e(81154).then(s.bind(s,6843))},tintable:{loader:()=>s.e(81154).then(s.bind(s,578685))}});(0,n().xh)("basecamp",{default:{loader:()=>s.e(67601).then(s.bind(s,229574))},darkMode:{loader:()=>s.e(67601).then(s.bind(s,976782))}}),(0,n().xh)("bitwarden",{default:{loader:()=>s.e(60245).then(s.bind(s,146232))},darkMode:{loader:()=>s.e(60245).then(s.bind(s,695796))}});(0,n().xh)("clickUp",{default:{loader:()=>s.e(52084).then(s.bind(s,676243))},darkMode:{loader:()=>s.e(52084).then(s.bind(s,215138))}}),(0,n().xh)("coda",{default:{loader:()=>s.e(59430).then(s.bind(s,216703))},darkMode:{loader:()=>s.e(59430).then(s.bind(s,266129))}}),(0,n().xh)("codegen",{default:{loader:()=>s.e(19388).then(s.bind(s,88975))},darkMode:{loader:()=>s.e(19388).then(s.bind(s,457185))}}),(0,n().xh)("codepen",{default:{loader:()=>s.e(32179).then(s.bind(s,732198))},darkMode:{loader:()=>s.e(32179).then(s.bind(s,77870))},tintable:{loader:()=>s.e(32179).then(s.bind(s,709828))}}),(0,n().xh)("confluence",{default:{loader:()=>s.e(16999).then(s.bind(s,658212))},darkMode:{loader:()=>s.e(16999).then(s.bind(s,7952))}});(0,n().xh)("dashlane",{default:{loader:()=>s.e(34251).then(s.bind(s,603556))},darkMode:{loader:()=>s.e(34251).then(s.bind(s,754064))}}),(0,n().xh)("deepnote",{default:{loader:()=>s.e(2147).then(s.bind(s,46192))},darkMode:{loader:()=>s.e(2147).then(s.bind(s,849404))}});(0,n().xh)("dropbox",{default:{loader:()=>s.e(30737).then(s.bind(s,374436))},darkMode:{loader:()=>s.e(30737).then(s.bind(s,983440))}}),(0,n().xh)("evernote",{default:{loader:()=>s.e(89253).then(s.bind(s,943322))},darkMode:{loader:()=>s.e(89253).then(s.bind(s,103954))}}),(0,n().xh)("excalidraw",{default:{loader:()=>s.e(23873).then(s.bind(s,651374))},darkMode:{loader:()=>s.e(23873).then(s.bind(s,742758))},tintable:{loader:()=>s.e(23873).then(s.bind(s,183964))}}),(0,n().xh)("facebook",{default:{loader:()=>s.e(5209).then(s.bind(s,79834))},darkMode:{loader:()=>s.e(5209).then(s.bind(s,233426))},tintable:{loader:()=>s.e(5209).then(s.bind(s,124904))}}),(0,n().xh)("figma",{default:{loader:()=>s.e(44539).then(s.bind(s,158894))},darkMode:{loader:()=>s.e(44539).then(s.bind(s,56358))},tintable:{loader:()=>s.e(44539).then(s.bind(s,497564))}}),(0,n().xh)("framer",{default:{loader:()=>s.e(87102).then(s.bind(s,214039))},darkMode:{loader:()=>s.e(87102).then(s.bind(s,447577))},tintable:{loader:()=>s.e(87102).then(s.bind(s,451247))}}),(0,n().xh)("giphy",{default:{loader:()=>s.e(15026).then(s.bind(s,596893))},darkMode:{loader:()=>s.e(15026).then(s.bind(s,927139))},tintable:{loader:()=>s.e(15026).then(s.bind(s,423173))}});(0,n().xh)("gitLab",{default:{loader:()=>s.e(70916).then(s.bind(s,178469))},darkMode:{loader:()=>s.e(70916).then(s.bind(s,985627))}});(0,n().xh)("googleDocs",{default:{loader:()=>s.e(49373).then(s.bind(s,481082))},darkMode:{loader:()=>s.e(49373).then(s.bind(s,217138))}});var i=()=>s(627437),o=()=>s(187859);(0,n().xh)("grid",{default:{loader:()=>s.e(21697).then(s.bind(s,866894))},darkMode:{loader:()=>s.e(21697).then(s.bind(s,155142))}}),(0,n().xh)("hex",{default:{loader:()=>s.e(20512).then(s.bind(s,599927))},darkMode:{loader:()=>s.e(20512).then(s.bind(s,216953))},tintable:{loader:()=>s.e(20512).then(s.bind(s,753295))}}),(0,n().xh)("hubSpot",{default:{loader:()=>s.e(21914).then(s.bind(s,757381))},darkMode:{loader:()=>s.e(21914).then(s.bind(s,533499))}}),(0,n().xh)("instagram",{default:{loader:()=>s.e(77355).then(s.bind(s,749910))},darkMode:{loader:()=>s.e(77355).then(s.bind(s,117470))},tintable:{loader:()=>s.e(77355).then(s.bind(s,88340))}}),(0,n().xh)("inVision",{default:{loader:()=>s.e(35364).then(s.bind(s,515285))},darkMode:{loader:()=>s.e(35364).then(s.bind(s,482763))}});(0,n().xh)("linkedin",{default:{loader:()=>s.e(58319).then(s.bind(s,960860))},darkMode:{loader:()=>s.e(58319).then(s.bind(s,202680))},tintable:{loader:()=>s.e(58319).then(s.bind(s,872906))}}),(0,n().xh)("loom",{default:{loader:()=>s.e(68642).then(s.bind(s,464083))},darkMode:{loader:()=>s.e(68642).then(s.bind(s,910005))},tintable:{loader:()=>s.e(68642).then(s.bind(s,385739))}}),(0,n().xh)("lucidchart",{default:{loader:()=>s.e(30512).then(s.bind(s,355893))},darkMode:{loader:()=>s.e(30512).then(s.bind(s,705835))}}),(0,n().xh)("lucidspark",{default:{loader:()=>s.e(7391).then(s.bind(s,243208))},darkMode:{loader:()=>s.e(7391).then(s.bind(s,653636))}}),(0,n().xh)("make",{default:{loader:()=>s.e(14079).then(s.bind(s,560996))},darkMode:{loader:()=>s.e(14079).then(s.bind(s,924816))}}),(0,n().xh)("maps",{default:{loader:()=>s.e(78724).then(s.bind(s,799017))},darkMode:{loader:()=>s.e(78724).then(s.bind(s,191967))}});(0,n().xh)("microsoftOneNote",{default:{loader:()=>s.e(96773).then(s.bind(s,186186))},darkMode:{loader:()=>s.e(96773).then(s.bind(s,657474))}});var a=()=>s(350527);(0,n().xh)("microsoftWord",{default:{loader:()=>s.e(67199).then(s.bind(s,704562))},darkMode:{loader:()=>s.e(67199).then(s.bind(s,876762))}}),(0,n().xh)("miro",{default:{loader:()=>s.e(6122).then(s.bind(s,620507))},darkMode:{loader:()=>s.e(6122).then(s.bind(s,296173))},tintable:{loader:()=>s.e(6122).then(s.bind(s,66659))}}),(0,n().xh)("mixpanel",{default:{loader:()=>s.e(41837).then(s.bind(s,191726))},darkMode:{loader:()=>s.e(41837).then(s.bind(s,282662))},tintable:{loader:()=>s.e(41837).then(s.bind(s,772572))}}),(0,n().xh)("monday",{default:{loader:()=>s.e(98713).then(s.bind(s,357926))},darkMode:{loader:()=>s.e(98713).then(s.bind(s,947758))}});(0,n().xh)("notionFlat",{default:{loader:()=>s.e(84379).then(s.bind(s,847048))},darkMode:{loader:()=>s.e(84379).then(s.bind(s,426500))},tintable:{loader:()=>s.e(84379).then(s.bind(s,109158))}});(0,n().xh)("notionTemplate",{default:{loader:()=>s.e(1392).then(s.bind(s,826693))},darkMode:{loader:()=>s.e(1392).then(s.bind(s,180283))},tintable:{loader:()=>s.e(1392).then(s.bind(s,235773))}});(0,n().xh)("oneDrive",{default:{loader:()=>s.e(77957).then(s.bind(s,582162))},darkMode:{loader:()=>s.e(77957).then(s.bind(s,952634))}}),(0,n().xh)("onePassword",{default:{loader:()=>s.e(71768).then(s.bind(s,507291))},darkMode:{loader:()=>s.e(71768).then(s.bind(s,463725))}});(0,n().xh)("pagerDuty",{default:{loader:()=>s.e(19314).then(s.bind(s,173737))},darkMode:{loader:()=>s.e(19314).then(s.bind(s,71455))}}),(0,n().xh)("pitch",{default:{loader:()=>s.e(39689).then(s.bind(s,574892))},darkMode:{loader:()=>s.e(39689).then(s.bind(s,61e3))}}),(0,n().xh)("polymer",{default:{loader:()=>s.e(38949).then(s.bind(s,907596))},darkMode:{loader:()=>s.e(38949).then(s.bind(s,370728))}}),(0,n().xh)("protonPass",{default:{loader:()=>s.e(99998).then(s.bind(s,401823))},darkMode:{loader:()=>s.e(99998).then(s.bind(s,423857))}}),(0,n().xh)("quip",{default:{loader:()=>s.e(61492).then(s.bind(s,592353))},darkMode:{loader:()=>s.e(61492).then(s.bind(s,266183))}}),(0,n().xh)("replit",{default:{loader:()=>s.e(49229).then(s.bind(s,394666))},darkMode:{loader:()=>s.e(49229).then(s.bind(s,800098))},tintable:{loader:()=>s.e(49229).then(s.bind(s,341656))}});(0,n().xh)("sketch",{default:{loader:()=>s.e(64557).then(s.bind(s,118038))},darkMode:{loader:()=>s.e(64557).then(s.bind(s,461086))},tintable:{loader:()=>s.e(64557).then(s.bind(s,431956))}});var r=()=>s(703888);(0,n().xh)("smartSheet",{default:{loader:()=>s.e(87153).then(s.bind(s,800230))},darkMode:{loader:()=>s.e(87153).then(s.bind(s,198574))}}),(0,n().xh)("stripe",{default:{loader:()=>s.e(72218).then(s.bind(s,71879))},darkMode:{loader:()=>s.e(72218).then(s.bind(s,304374))}}),(0,n().xh)("tex",{default:{loader:()=>s.e(92108).then(s.bind(s,905387))},darkMode:{loader:()=>s.e(92108).then(s.bind(s,659773))},tintable:{loader:()=>s.e(92108).then(s.bind(s,133075))}}),(0,n().xh)("tiktok",{default:{loader:()=>s.e(80931).then(s.bind(s,605820))},darkMode:{loader:()=>s.e(80931).then(s.bind(s,832728))},tintable:{loader:()=>s.e(80931).then(s.bind(s,431402))}}),(0,n().xh)("trello",{default:{loader:()=>s.e(9555).then(s.bind(s,590852))},darkMode:{loader:()=>s.e(9555).then(s.bind(s,259056))}}),(0,n().xh)("twitter",{default:{loader:()=>s.e(53974).then(s.bind(s,361881))},darkMode:{loader:()=>s.e(53974).then(s.bind(s,572175))},tintable:{loader:()=>s.e(53974).then(s.bind(s,587441))}}),(0,n().xh)("typeform",{default:{loader:()=>s.e(61487).then(s.bind(s,528312))},darkMode:{loader:()=>s.e(61487).then(s.bind(s,780404))},tintable:{loader:()=>s.e(61487).then(s.bind(s,74806))}}),(0,n().xh)("unsplash",{default:{loader:()=>s.e(37189).then(s.bind(s,541846))},darkMode:{loader:()=>s.e(37189).then(s.bind(s,312350))},tintable:{loader:()=>s.e(37189).then(s.bind(s,283220))}}),(0,n().xh)("whatsApp",{default:{loader:()=>s.e(67035).then(s.bind(s,524348))},darkMode:{loader:()=>s.e(67035).then(s.bind(s,832792))},tintable:{loader:()=>s.e(67035).then(s.bind(s,431466))}}),(0,n().xh)("whimsical",{default:{loader:()=>s.e(43862).then(s.bind(s,164241))},darkMode:{loader:()=>s.e(43862).then(s.bind(s,902308))}}),(0,n().xh)("workflowy",{default:{loader:()=>s.e(15135).then(s.bind(s,948458))},darkMode:{loader:()=>s.e(15135).then(s.bind(s,565090))}}),(0,n().xh)("youTube",{default:{loader:()=>s.e(55724).then(s.bind(s,720931))},darkMode:{loader:()=>s.e(55724).then(s.bind(s,901509))},tintable:{loader:()=>s.e(55724).then(s.bind(s,345083))}}),(0,n().xh)("zapier",{default:{loader:()=>s.e(70074).then(s.bind(s,255811))},darkMode:{loader:()=>s.e(70074).then(s.bind(s,376037))}}),(0,n().xh)("zendesk",{default:{loader:()=>s.e(11235).then(s.bind(s,295434))},darkMode:{loader:()=>s.e(11235).then(s.bind(s,373826))}}),(0,n().xh)("zoom",{default:{loader:()=>s.e(9832).then(s.bind(s,444901))},darkMode:{loader:()=>s.e(9832).then(s.bind(s,360923))}}),(0,n().xh)("zoomMeetings",{default:{loader:()=>s.e(46314).then(s.bind(s,380563))},darkMode:{loader:()=>s.e(46314).then(s.bind(s,483573))},tintable:{loader:()=>s.e(46314).then(s.bind(s,475659))}})},43016:(e,t,s)=>{s.d(t,{z:()=>n});const n=(0,s(340498).xh)("microsoft",{default:{loader:()=>s.e(72423).then(s.bind(s,12678))},darkMode:{loader:()=>s.e(72423).then(s.bind(s,946702))}})},74464:(e,t,s)=>{s.d(t,{i:()=>o});s(296540);var n=()=>s(719147),i=s(474848);function o(e,t){return(0,i.jsx)(n().A,{href:e,children:t})}},84161:(e,t,s)=>{s.d(t,{S:()=>c});s(944114),s(296540);var n=()=>s(529099),i=()=>s(26440),o=()=>s(133043),a=()=>s(920495),r=()=>s(69708),d=()=>s(37433),l=s(474848);function c(){const e=[];return(0,d().$H)()&&e.push({key:"personal_home",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),icon:o().P}),e.push({key:"last_visited_page",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),icon:i().w},{key:"first_page",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),icon:a().n},{key:"notion_ai",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.notionAi.label",defaultMessage:"Notion AI"}),icon:n().aiFaceIcon}),e}},109113:(e,t,s)=>{s.d(t,{H:()=>i});var n=()=>s(367049);function i(){return(0,n().V)()}},112799:(e,t,s)=>{s.d(t,{a:()=>d,E:()=>r});s(16280);var n=s(296540),i=()=>s(484714),o=(s(898992),s(672577),()=>s(427704));o().GJ.downloadMac,o().GJ.downloadMacUniversal,o().GJ.downloadMacIntel,o().GJ.downloadMacAppleSilicon,o().GJ.downloadWindows,o().GJ.downloadWindowsArm;const a=[{route:o().GJ.downloadMac,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:o().GJ.downloadMacIntel,architecture:"x86",operatingSystem:"mac",target:"mac"},{route:o().GJ.downloadMacUniversal,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:o().GJ.downloadMacAppleSilicon,architecture:"arm",operatingSystem:"mac",target:"macArm64"},{route:o().GJ.downloadWindows,architecture:"x86",operatingSystem:"windows",target:"windows"},{route:o().GJ.downloadWindowsArm,architecture:"arm",operatingSystem:"windows",target:"windowsArm64"}];function r(){const e=(0,n.useRef)(null),t=(0,i().Y0)();return(0,n.useEffect)((()=>{d(t).then((t=>{e.current=t??null})).catch((e=>{throw new Error(e)}))}),[t]),e}async function d(e){var t;if(!("userAgentData"in navigator))return e.isMac?o().GJ.downloadMacUniversal:o().GJ.downloadWindows;const s=navigator.userAgentData,n=await(null==s||null===(t=s.getHighEntropyValues)||void 0===t?void 0:t.call(s,["architecture"])),i=function(e,t){const s=function(e=""){const t=e.toLowerCase();return t.startsWith("arm")?"arm":t.startsWith("x86")||"intel"===t?"x86":null}(e);if(!s||"mac"!==t&&"windows"!==t)return null;const n=a.find((e=>e.architecture===s&&e.operatingSystem===t));return(null==n?void 0:n.route)||null}(null==n?void 0:n.architecture,e.os);return i||null}},125035:(e,t,s)=>{s.d(t,{A:()=>R});s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454);var n=s(296540),i=()=>s(312788),o=()=>s(484714),a=()=>s(56366),r=()=>s(401497),d=()=>s(584262),l=()=>s(179034),c=()=>s(69708),u=()=>s(100622),p=()=>s(492414),g=()=>s(972435),m=()=>s(722872),h=()=>s(37433),f=()=>s(435761),S=()=>s(632709),y=()=>s(765957),b=()=>s(148832),x=()=>s(848237),v=()=>s(898808),A=()=>s(452558),w=()=>s(760217),M=()=>s(406699),j=()=>s(419357),k=()=>s(404277),C=()=>s(939740),I=()=>s(305390),_=()=>s(89924),T=()=>s(125565),P=s(474848);const D=(0,c().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function B(e){const{navigate:t}=(0,n.useContext)(i().E),{teamGuest:s}=e,r=(0,o().v3)(),g=(0,a().O$)(y().AppStoreSidebarSpaceStore);if(!g)return null;if(0===s.guestPageIds.length)return null;const h=[{key:"pages",render:e=>(0,P.jsx)(_().A,{...e}),items:s.guestPageIds.map((e=>{const s=b().B.createChildStore(g,{table:l().ev,id:e}),n={key:e,render:e=>(0,P.jsx)(I().A,{...e,store:s,placeholder:(0,P.jsx)(c().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=b().B.createChildStore(g,{table:l().ev,id:e}),n=(0,p().Ay)({store:s,fullyQualified:!1,pageVisitSource:d().y8.LinkInPage});t({environment:r,url:n,openInNew:"tab"})}};return n}))}],f={menuType:m().gu.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:s.guestPageIds.length>0&&(0,P.jsx)(T().A,{isSmall:!0,style:{color:u().Tj.regularTextColor,marginInlineStart:15,marginInlineEnd:15,paddingTop:6},children:(0,P.jsx)(c().sA,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,P.jsx)(k().A,{...f,children:(0,P.jsx)(C().Ay,{type:C().Oh.Vertical,initialFocus:void 0,sections:h})})}function N(e){const t=(0,o().v3)(),[s,i]=(0,n.useState)(""),d=(0,n.useCallback)((e=>x().F2({environment:t,teamId:e,tab:S().p.Members,from:"teams_dropdown_for_team_guest"})),[t]),l=(0,r().IS)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),u=(0,a().K8)((()=>[{key:"teams for team guest",render:e=>(0,P.jsx)(_().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,P.jsx)(w().A,{icon:(0,P.jsx)(v().x,{disabled:!0,store:e}),title:(0,P.jsx)(T().A,{style:l.teamMenuItem,children:e.getName()}),caption:(0,P.jsx)(c().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,h().PF)({teamStore:e}))||void 0===s?void 0:s.totalMembersAndGuestsCount)??0}}),inline:!0,...t})},action:()=>{d(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,l.teamMenuItem,d]),p=(0,P.jsx)(_().A,{isInput:!0,children:(0,P.jsx)(j().Ay,{value:s,onChange:(0,n.useCallback)((e=>{i(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:g().A.formatMessage(D.filterTeams)})}),f={menuType:m().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?p:void 0};return(0,P.jsx)(k().A,{...f,children:(0,P.jsx)(A().A,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:u})})}const R=function(e){const{teamGuest:t}=e,n=(0,a().O$)(y().AppStoreSidebarSpaceStore),i=(0,f().xJ)({spaceStore:n}),o=(0,f().gc)({spaceStore:n,teams:i.teams}).map((e=>e.store)),d=(0,a().K8)((()=>o.filter((e=>e.isMemberOrGuest(t.userId,new Set)))),[o,t]),l=(0,r().IS)((e=>({button:{marginInlineEnd:8},noTeams:{marginInlineEnd:8,color:e.text.tertiary},chevron:{width:10,marginInlineStart:4,fill:e.icon.tertiary}})),[]),u=d.length??0;return(0,P.jsx)(M().A,{popupType:M().z.Popup,renderOrigin:e=>(0,P.jsx)(s(631524).p,{disabled:0===u,style:0===u?l.noTeams:l.button,...e,children:0===u?(0,P.jsx)(c().sA,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(c().sA,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:u}}),(0,s(668725).b)(l.chevron)]})}),render:()=>(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(N,{teamGuest:t,teamStores:d}),(0,P.jsx)(s(802790).A,{size:"100%"}),(0,P.jsx)(B,{teamGuest:t})]})})}},149397:(e,t,s)=>{s.d(t,{k:()=>r});var n=s(296540),i=()=>s(484714),o=()=>s(559506),a=s(474848);function r(e){return function(t){const s=(0,i().v3)(),[r,d]=(0,n.useState)({isDomainVerified:!1,settings:{}});(0,n.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&d(e.data)}))}),[s]);const l={...t,userEmailDomainSettings:r};return(0,a.jsx)(e,{...l})}}},175320:(e,t,s)=>{s.d(t,{lv:()=>f,C5:()=>m,u7:()=>g,uh:()=>h});var n=()=>s(560198),i=()=>s(100622);const o="theme";var a=()=>s(534177),r=()=>s(20822),d=()=>s(661179),l=()=>s(44551);const c=15;function u(e,t){const{ThemeStore:s}=e,{mode:a,usingSystemTheme:r}=t;if(n()._u)return;const d={mode:a};var c,u;s.setState(d),e.mobileNative&&e.mobileNative.setTheme(a,r),c=function(e,t){const s=(0,i().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:i().Tj.white,blue:i().Tj.blue},borderRadius:4,textColor:s.text.primary,popoverBackgroundColor:s.popoverBackground,popoverBoxShadow:s.shadowMD,inputBoxShadow:s.inputBoxShadow,inputBackgroundColor:s.inputBackground,dividerColor:s.darkDividerColor,shadowOpacity:s.shadowOpacity}}(a,r),null===l().electronApi||void 0===l().electronApi||null===(u=l().electronApi.setTheme)||void 0===u||u.call(l().electronApi,c),localStorage.setItem(o,JSON.stringify(d)),g(a),"dark"===a?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const p={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function g(e){if(0===d().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${c}px;\n\t\t\tscrollbar-color: ${p.scrollbarThumb[e]}  ${p.scrollbarTrack[e]};\n\t\t}\n\t`)}function m(e){r().A.setState(e)}function h(e){const t=f(e);switch(t){case"dark":case"light":u(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let s="light";s=t&&t.api.getTheme?await t.api.getTheme():(0,n().VD)(e),u(e,{mode:s,usingSystemTheme:!0})}(e);break;default:(0,a().HB)(t)}}function f(e){const t=r().A.state||"system";return"dark"===(s=t)||"light"===s||"system"===s?s:"system";var s}},182183:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>n,notionTintableIcon:()=>i});s(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1.76 1.39 16.47 17.17",svg:(0,s(474848).jsx)("path",{d:"M12.32 1.437c1.17-.1 1.47-.032 2.205.501l3.039 2.136c.5.367.668.467.668.867v11.715c0 .734-.267 1.168-1.202 1.234l-11.055.667c-.702.034-1.036-.066-1.404-.533L2.333 15.12c-.4-.534-.567-.934-.567-1.401V3.306c0-.6.267-1.101 1.035-1.168zm4.241 3.871-10.854.634c-.4.034-.534.235-.534.668v9.945c0 .535.267.735.868.702l10.388-.601c.6-.033.668-.401.668-.835V5.942c0-.433-.167-.667-.536-.634m-1.134 1.836c.066.3 0 .601-.301.635l-.501.1v7.342c-.434.233-.835.367-1.169.367-.534 0-.668-.168-1.068-.668L9.113 9.78v4.973l1.036.233c0 .008-.005.6-.836.6l-2.303.135c-.067-.134 0-.468.233-.535l.602-.167V8.446L7.01 8.38c-.067-.3.1-.734.567-.768l2.472-.166 3.407 5.206V8.046l-.868-.1c-.067-.367.2-.635.534-.668zm-2.705-4.772-9.153.668c-.333.033-.4.2-.267.333l1.303 1.035c.534.433.735.4 1.737.333l9.452-.567c.2 0 .034-.2-.033-.233l-1.57-1.136c-.301-.233-.702-.5-1.47-.433"})},i=(0,s(340498).wt)("notionTintable",n)},187859:(e,t,s)=>{s.d(t,{m:()=>n});const n=(0,s(340498).xh)("google",{default:{loader:()=>s.e(78472).then(s.bind(s,293901))},darkMode:{loader:()=>s.e(78472).then(s.bind(s,259539))}})},205224:(e,t,s)=>{s.d(t,{D:()=>y,P:()=>S});s(16280),s(581454),s(296540);var n=()=>s(848538),i=()=>s(69708),o=()=>s(680074),a=()=>s(224701),r=()=>s(475355),d=()=>s(134696),l=()=>s(966505),c=()=>s(559506),u=()=>s(496414),p=()=>s(579627),g=()=>s(471995),m=()=>s(231297),h=s(474848);const f=(0,i().YK)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function S(e){const{environment:t,store:s,membershipType:c,guestUserStore:S}=e,y=S.id,b=S.getEmail();try{if(u().m({message:f.convertingGuest}),!s.isTeamsEnabled()){if(!(await r().oH({environment:t,flowId:"",trackCreateTeamComplete:!1})))return}const i=[{type:"user",userId:y,membershipType:c,inviteId:void 0}],{serverCommitResult:a}=m().createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,canUndo:!0,perform:e=>{p().yG({environment:t,spaceStore:s,actors:i,transaction:e})}});await a,l().gc(t,{member_user_id:y,convert_to:"owner"===c?"admin":"member",origin:e.origin}),d().Jg(t,{role:(0,n().ps)(c),is_space:!0,invite_targets:[{type:"existingUser",value:{id:y,version:0,email:""},membershipType:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i.map((e=>p().zV(e))),invite_message_length:0,domainType:(0,o().FX)()})}catch(x){g().D6({label:(0,h.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:b}})})}finally{await a().nO({environment:t,spaceStore:s}),u().V()}}async function y(e){const{environment:t,store:s,guestUserStore:n}=e,o=n.id,r=n.getEmail();try{u().m({message:f.removingGuest});if("success"!==(await c().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1}})).type)throw new Error("Failed to remove guest");l().wX(t)}catch(d){g().D6({label:(0,h.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:r}})})}finally{await a().nO({environment:t,spaceStore:s}),u().V(),l().xO(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},213962:(e,t,s)=>{s.d(t,{s:()=>i});s(296540);var n=s(474848);const i=(0,s(340498).wt)("circleCross",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M15 28.354c7.305 0 13.354-6.049 13.354-13.354 0-7.292-6.062-13.354-13.367-13.354C7.695 1.646 1.646 7.708 1.646 15c0 7.305 6.062 13.354 13.354 13.354zm0-2.226A11.075 11.075 0 013.885 15c0-6.166 4.922-11.128 11.102-11.128 6.18 0 11.128 4.962 11.141 11.128A11.078 11.078 0 0115 26.128zm-4.477-5.577a.99.99 0 00.746-.327l3.718-3.731 3.731 3.73c.197.197.445.328.747.328.576 0 1.047-.484 1.047-1.06a.979.979 0 00-.314-.747l-3.718-3.718 3.73-3.744c.223-.223.315-.445.315-.733 0-.59-.471-1.048-1.047-1.048-.275 0-.498.092-.72.315l-3.771 3.744-3.744-3.731c-.184-.21-.432-.301-.72-.301-.577 0-1.048.445-1.048 1.034a.97.97 0 00.314.733l3.719 3.731-3.719 3.732a.951.951 0 00-.314.733c0 .576.471 1.06 1.048 1.06z"})})},231127:(e,t,s)=>{s.d(t,{V:()=>a});s(296540);var n=()=>s(69708),i=s(474848);const o=(0,n().YK)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),a={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,i.jsx)(n().sA,{id:"survey.options.otherFieldLabel",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,i.jsx)(n().sA,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,i.jsx)(n().sA,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,i.jsx)(n().sA,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},234695:(e,t,s)=>{s.d(t,{K:()=>y});s(944114);var n=s(296540),i=()=>s(726637),o=()=>s(484714),a=()=>s(56366),r=()=>s(401497),d=()=>s(427704),l=()=>s(564766),c=()=>s(69708),u=()=>s(109113),p=()=>s(329304),g=()=>s(824011),m=()=>s(249117),h=()=>s(125565),f=()=>s(8178),S=s(474848);function y({spaceStore:e,showDomain:t}){const s=(0,o().v3)(),y=(0,c().tz)(),b=(0,a().K8)((()=>e.id),[e]),x=(0,a().K8)((()=>e.getPublicContentDomain()),[e]),v=(0,r().IS)((()=>({header:{marginTop:36}})),[]),A=(0,p().P9)({name:"saml",spaceId:e.id,userId:s.currentUser.id}),w=(0,p().P9)({name:"scim",spaceId:e.id,userId:s.currentUser.id}),M=[];return(0,u().H)()||M.push({label:(0,S.jsx)(c().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"}),content:(0,S.jsx)(g().x,{text:b,tooltip:y.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})}),A&&M.push({label:(0,S.jsx)(c().sA,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"}),content:(0,S.jsx)(g().x,{text:(0,l().Hw)(i().A.domainBaseUrl),tooltip:y.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})}),w&&M.push({label:(0,S.jsx)(c().sA,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"}),content:(0,S.jsx)(g().x,{text:i().A.domainBaseUrl+d().JZ.scimApiBasePath,tooltip:y.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})}),t&&void 0!==x&&M.push({label:(0,S.jsx)(c().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"}),content:(0,S.jsx)(g().x,{text:x,tooltip:y.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})}),M.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f().A,{large:!0,divider:"full",style:v.header,children:(0,S.jsx)(c().sA,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,S.jsx)(m().xA,{gap:8,children:M.map(((e,t)=>(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(m().LX,{row:t+1,col:1,children:(0,S.jsx)(h().A,{isSmall:!0,isMultiline:!0,children:e.label})}),(0,S.jsx)(m().LX,{row:t+1,col:2,children:(0,S.jsx)(h().A,{isSmall:!0,isMultiline:!0,children:e.content})})]},t)))})]}):null}},252953:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(340498).xh)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(50710).then(s.bind(s,223331))},small:{loader:()=>s.e(50710).then(s.bind(s,577829))},fill:{loader:()=>s.e(50710).then(s.bind(s,565711))},fillSmall:{loader:()=>s.e(50710).then(s.bind(s,429926))}},["person","alert","exclamation","warning","user"])},280161:(e,t,s)=>{s.d(t,{r:()=>Fe});s(898992),s(354520),s(581454);var n=s(296540),i=()=>s(59226),o=()=>s(56366),a=()=>s(401497),r=()=>s(835607),d=()=>s(69708),l=()=>s(778078),c=()=>s(284371),u=()=>s(698449),p=()=>s(37433),g=()=>s(605402),m=()=>s(823541),h=()=>s(641300),f=()=>s(125565),S=(s(737550),()=>s(484714)),y=()=>s(631524),b=()=>s(972435),x=()=>s(722872),v=()=>s(435761),A=()=>s(632709),w=()=>s(463830),M=()=>s(848237),j=()=>s(898808),k=()=>s(452558),C=()=>s(760217),I=()=>s(406699),_=()=>s(419357),T=()=>s(404277),P=()=>s(89924),D=s(474848);const B=(0,d().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function N(e){const t=(0,S().v3)(),s=(0,a().IS)((()=>({teamMenuItem:{fontWeight:400}})),[]),[i,r]=(0,n.useState)(""),l=(0,n.useCallback)((e=>M().F2({environment:t,teamId:e,tab:A().p.Members,from:"teams_dropdown_for_group"})),[t]),c=(0,o().K8)((()=>[{key:"teams for group",render:e=>(0,D.jsx)(P().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var n;return(0,D.jsx)(C().A,{icon:(0,D.jsx)(j().x,{disabled:!0,store:e}),title:(0,D.jsx)(f().A,{style:s.teamMenuItem,children:e.getName()}),right:(0,D.jsx)(d().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(n=(0,p().PF)({teamStore:e}))||void 0===n?void 0:n.totalMembersAndGuestsCount)??0}}),...t})},action:()=>{l(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,l]),u=i,g=(0,D.jsx)(k().A,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},sections:c,initialFocus:0}),m=(0,D.jsx)(P().A,{isInput:!0,children:(0,D.jsx)(_().Ay,{value:u,onChange:(0,n.useCallback)((e=>{r(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:b().A.formatMessage(B.filterTeams)})}),h={menuType:x().gu.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?m:void 0};return(0,D.jsx)(T().A,{...h,children:g})}const R=function(e){const t=(0,o().uB)(void 0,w().A),i=(0,a().IS)((e=>({button:{marginInlineEnd:8},noTeams:{marginInlineEnd:8,color:e.text.tertiary},chevron:{width:10,marginInlineStart:4,fill:e.icon.tertiary}})),[]),r=(0,v().xJ)(),l=(0,v().gc)({teams:r.teams}).map((e=>e.store)),c=(0,o().K8)((()=>l.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group,l]);return(0,D.jsx)(I().A,{popupType:I().z.Popup,renderOrigin:e=>(0,D.jsxs)(y().p,{disabled:0===c.length,style:0===c.length?i.noTeams:i.button,...e,children:[0===c.length?(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:c.length}}),c.length>0?(0,s(668725).b)(i.chevron):void 0]}),buttonPopupStore:t,placementToOrigin:"bottom",render:e=>(0,D.jsx)(N,{parent:e,teamStores:c}),onClose:(0,n.useCallback)((()=>{t.reset()}),[t])})};var E=()=>s(30626),O=()=>s(496603),V=()=>s(701763),U=()=>s(901389),F=()=>s(601866),L=()=>s(231297),q=()=>s(510473),G=()=>s(456663),z=()=>s(575143),K=()=>s(285790),W=()=>s(939740),H=()=>s(417392);function $(e){const{group:t,spaceStore:s,settingsStore:n}=e,i=(0,o().uB)(void 0,w().A);return(0,D.jsx)(I().A,{popupType:H().nl.Popup,render:()=>(0,D.jsx)(Y,{group:t,spaceStore:s,popupStore:i,settingsStore:n}),buttonPopupStore:i,renderOrigin:e=>(0,D.jsx)(K().A,{icon:E()._,...e})})}function Y(e){const{group:t,spaceStore:s,popupStore:i,settingsStore:r}=e,l=(0,o().K8)((()=>s.canAdmin()),[s]),c=(0,S().v3)(),u=(0,o().K8)((()=>(0,p().sx)({environment:c,spaceStore:s})),[s,c]),g=(0,a().IS)((e=>({deleteButton:{color:e.red.text.accentPrimary}})),[]),m=(0,n.useCallback)((async()=>{i.setState({open:!1});const{accept:e}=await U().Gh({message:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,q().E)({spaceStore:s,groupId:t.group_id});await L().createAndCommitAsync({environment:c,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await F().c$({environment:c,groupStore:e,transaction:t})}}),V().$N(c)}}),[t,c,s,i]),h=(0,n.useCallback)((()=>{r.setState({...r.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),i.setState({open:!1}),V().yg(c)}),[t,c,i,r]),f=(0,n.useCallback)((()=>{G().A.setState({...G().A.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),M().vn("group_settings")}),[t]),y={key:"action_menu",render:e=>(0,D.jsx)(P().A,{...e}),items:O().oE([{key:"rename",render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:h},u?{key:"create_team_from_group",render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:f}:void 0,l&&{key:"delete",render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)("div",{style:g.deleteButton,children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:m}])};return(0,D.jsx)(T().A,{menuType:x().gu.Popup,children:(0,D.jsx)(W().Ay,{type:W().Oh.Vertical,initialFocus:0,sections:[y],onAccept:()=>{i.setState({open:!1})}})})}var Q=()=>s(187174),J=()=>s(848538),Z=()=>s(798880),X=()=>s(100622),ee=()=>s(559506);var te=()=>s(646736),se=()=>s(765957),ne=()=>s(870092);class ie extends(()=>s(757695))().Store{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const oe=ie;var ae=()=>s(901791),re=()=>s(994006),de=()=>s(160432),le=()=>s(764880),ce=()=>s(842599),ue=()=>s(863330),pe=()=>s(542056),ge=()=>s(106628),me=()=>s(251126),he=()=>s(64e3),fe=()=>s(448693),Se=()=>s(856952),ye=()=>s(457688);function be(e){const{group:t,spaceStore:s,groupStore:n,userIds:i,onAddUsers:r}=e,l=(0,o().uB)(void 0,w().A),c=(0,a().IS)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,D.jsx)(I().A,{popupType:H().nl.Popup,render:()=>(0,D.jsx)(xe,{spaceStore:s,group:t,userIds:i,popupStore:l,groupStore:n,onAddUsers:r}),buttonPopupStore:l,onClose:()=>n.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:c.popup,renderOrigin:e=>(0,D.jsx)("div",{children:(0,D.jsx)(y().p,{colorPalette:"gray",iconLeading:{icon:ue().plusSmallIcon,size:"sm"},style:c.button,...e,children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function xe(e){const t=(0,S().v3)(),s=(0,d().tz)(),{group:i,userIds:a,spaceStore:r,popupStore:l,groupStore:c,onAddUsers:u}=e,p=(0,o().K8)((()=>c.state.temporaryUserIds.map((e=>{const t=r.getRecordValue({table:Z().oo,id:e});return(0,D.jsx)(fe().t_,{userValue:t,format:fe().t_.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=c.state.temporaryUserIds.filter((t=>t!==e));c.setState({...c.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1,hasPersonHoverCard:!1},e)}))),[r,c]),m=(0,o().K8)((()=>()=>{const{temporaryUserIds:e}=c.state;L().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const s of e){const e=(0,q().A)({spaceStore:r,groupId:i.group_id,userId:s});F().cJ({groupMemberStore:e,spaceId:r.id,groupId:i.group_id,userId:s,transaction:t})}u(e),g().A.setState({...g().A.state,permissionGroupsAndMemberCounts:g().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===i.group_id?{group:i,memberCount:t.memberCount+e.length}:t))})}}),c.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),l.setState({open:!1}),V().s$(t,{add_member_count:e.length})}),[c,t,l,r,i,u]),h=(0,n.useCallback)((()=>{const{temporaryUserIds:e}=c.state,t=e.slice(0,e.length-1);c.setState({...c.state,temporaryUserIds:t})}),[c]),f=(0,n.useCallback)((async e=>{const s=e.target.value,{extractedEmails:n,newInputValue:i}=(0,ce().Ct)(s),o=(await pe().Ah(t,n)).filter((e=>e.value.id&&!c.state.temporaryUserIds.includes(e.value.id)));c.setState({...c.state,temporaryUserIds:[...c.state.temporaryUserIds,...O().oE(o.map((e=>e.value.id)))],userInputValue:i})}),[t,c]),y=(0,o().K8)((()=>c.state.userInputValue),[c]),b=(0,o().K8)((()=>c.state.temporaryUserIds),[c]);return(0,D.jsx)(T().A,{menuType:x().gu.Popup,tokenInputHeader:!0,header:(0,D.jsx)(Se().Ay,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:Se().le.Group,tokens:p,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:h,value:y,onChange:f,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,D.jsx)(de().A,{colorPalette:"blue",size:"lg",onClick:m,children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,D.jsx)(me().A,{request:{query:y,temporaryUserIds:b},performRequest:async({query:e,temporaryUserIds:s})=>{const n=await ge().T.searchActions.load();return(await n.searchSpaceUsers({environment:t,query:e,membersOnly:!0,limit:20+s.length+a.length,shouldUseEdgeCacheRollout:!0})).filter((e=>a.indexOf(e.id)<0&&s.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,D.jsx)(ve,{results:t,spaceStore:r,groupStore:c})})})}function ve(e){const{spaceStore:t,groupStore:s}=e,[n,i]=(0,o().$y)(s,oe),a=(e.results||[]).map((({id:e})=>e)),r=(0,o().K8)((()=>a.map((e=>{const s=ne().L.createChildStore(t,{table:Z().oo,id:e}).getValue(),o={key:e,render:e=>(0,D.jsx)(ye().A,{...e,actor:(0,le().MR)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...n.temporaryUserIds,e];i({...n,temporaryUserIds:t,userInputValue:""})}};return o}))),[t,i,n,a]);if(0===a.length)return(0,D.jsx)(P().A,{children:(0,D.jsx)(he().A,{title:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,D.jsx)(P().A,{...e}),items:r};return(0,D.jsx)(W().Ay,{type:W().Oh.Vertical,initialFocus:0,sections:[e]})}}const Ae=10;function we(e){const{group:t,canEdit:s,spaceStore:i,settingsStore:a}=e,r=(0,d().tz)(),l=(0,S().v3)(),c=(0,o().O$)(se().AppStoreSidebarSpaceStore),p=(0,o().uB)(void 0,oe),g=(0,o().K8)((()=>p.state.limitUsers&&!a.state.groupsFilter?Ae:void 0),[p,a]),[{value:m}]=(0,Q().Yb)((async()=>{const e=await ee().callApi({eventName:"getSpacePermissionGroupMembers",environment:l,data:{groupIds:[t.group_id],spaceId:i.id}});if("success"===e.type){var s;const n=(null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds).map((e=>ne().L.createChildStore(i,{table:Z().oo,id:e})));return{allUserStores:(0,u().cp)({userStores:n,spaceStore:c,intl:r})}}}),[c,l,t,r,i]),[h,f]=(0,n.useState)([]);(0,n.useEffect)((()=>{null!=m&&m.allUserStores&&f(m.allUserStores)}),[null==m?void 0:m.allUserStores]);const[b,x]=(0,n.useState)([]);return(0,n.useEffect)((()=>{x(g?h.slice(0,g):h)}),[h,g]),(0,D.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[b.map((t=>(0,D.jsx)(Me,{userStore:t,...e,onRemoveUser:e=>{f(h.filter((t=>t.id!==e))),x(b.filter((t=>t.id!==e)))}},t.id))),g&&h.length>g?(0,D.jsx)(y().p,{colorPalette:"gray",style:{marginTop:4},onClick:()=>{p.setState({...p.state,limitUsers:!1})},children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:h.length-b.length}})}):void 0,s&&c?(0,D.jsx)(be,{group:t,spaceStore:i,groupStore:p,userIds:h.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>ne().L.createChildStore(i,{table:Z().oo,id:e})));f([...h,...t])}}):b.length<1&&(0,D.jsx)(y().p,{disabled:!0,colorPalette:"gray",children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function Me(e){const{spaceStore:t,userStore:s,group:n,canEdit:i,onRemoveUser:a}=e,r=(0,S().v3)(),l=(0,o().K8)((()=>(0,te().dp)(t,s.id).getMembershipType()),[t,s]);return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,D.jsxs)("div",{style:{display:"flex"},children:[(0,D.jsx)(re().A,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingInlineEnd:6,minHeight:34,width:"100%"},avatarSize:22}),(0,J().LF)(l)?(0,D.jsx)(ae().l,{role:l}):void 0]}),i?(0,D.jsx)(y().p,{colorPalette:"gray",hoveredStyle:{color:X().Tj.red},onClick:async()=>{const{accept:e}=await U().Gh({message:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(L().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:r,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;L().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,q().A)({spaceStore:t,groupId:n.group_id,userId:s.id})}),a(s.id),g().A.setState({...g().A.state,permissionGroupsAndMemberCounts:g().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===n.group_id?{group:n,memberCount:e.memberCount>=1?e.memberCount-1:0}:e))})}}),V().G8(r))},children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})}):void 0]},s.id)}var je=()=>s(662303),ke=()=>s(252291),Ce=()=>s(998531),Ie=()=>s(709837),_e=()=>s(621837),Te=()=>s(945778),Pe=()=>s(268845),De=()=>s(437607),Be=()=>s(403409),Ne=()=>s(173783),Re=()=>s(623580),Ee=()=>s(187820),Oe=()=>s(859428),Ve=()=>s(606273);function Ue(e){const{row:t,canEdit:s,open:i,toggleOpenState:r,spaceStore:l,settingsStore:p}=e,m=t.group,h=(0,d().tz)(),y=(0,a().DP)(),b=(0,S().v3)(),x=u().Pf({intl:h,groupName:m.name}),v=(0,a().IS)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginInlineEnd:2},name:{fontFamily:c().vc(je().locale).sans,fontSize:14,lineHeight:"17px",marginInlineEnd:4},input:{fontWeight:c().Wy.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginInlineEnd:9}})),[]),A=(0,n.useCallback)((e=>{const t=Date.now();L().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:b,canUndo:!0,perform:s=>{F().O1({spacePermissionGroupStore:(0,q().E)({spaceStore:l,groupId:m.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,De().gK)({spacePermissionGroupId:m.group_id,spaceId:l.id}),icon:e,name:m.name,group_id:m.group_id,space_id:m.space_id,version:m.getVersion(),created_by_id:m.created_by_id,created_by_table:m.created_by_table,created_at:m.created_at,last_edited_by_id:m.last_edited_by_id,last_edited_at:t,last_edited_by_table:m.last_edited_by_table};g().A.setState({...g().A.state,permissionGroupsAndMemberCounts:g().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===m.group_id?{group:Pe().B.fromValue(De().n,s),memberCount:e.memberCount}:e))}),V().Nn(b,{is_emoji:(0,Te().A)(e)})}),[m,l,b]),w=(0,n.useCallback)((()=>{p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[p]),M=(0,n.useCallback)((e=>{p.setState({...p.state,groupNameInputValue:e.target.value})}),[p]),j=(0,n.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=p.state,s=t.trim(),n=Date.now();if(e===m.group_id){if(s!==m.name){const e=(0,q().E)({spaceStore:l,groupId:m.group_id});L().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:b,canUndo:!0,perform:t=>{F().O1({spacePermissionGroupStore:e,value:{name:s,last_edited_at:n},transaction:t})}})}const e={id:(0,De().gK)({spacePermissionGroupId:m.group_id,spaceId:l.id}),icon:m.icon,name:s,group_id:m.group_id,space_id:m.space_id,version:m.getVersion(),created_by_id:m.created_by_id,created_by_table:m.created_by_table,created_at:m.created_at,last_edited_by_id:m.last_edited_by_id,last_edited_at:n,last_edited_by_table:m.last_edited_by_table};g().A.setState({...g().A.state,permissionGroupsAndMemberCounts:g().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===m.group_id?{group:Pe().B.fromValue(De().n,e),memberCount:t.memberCount}:t))}),p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[m,b,l,p]),k=(0,o().K8)((()=>p.state.editingNameGroupId===m.group_id),[m,p]),C=(0,o().K8)((()=>p.state.groupNameInputValue),[p]);return(0,D.jsxs)("div",{style:v.container,children:[(0,D.jsx)(Ve().f,{isSidebar:!1,fill:!0,icon:"chevron",open:i,color:y.icon.secondary,onClick:()=>r(m.group_id),style:v.toggle}),(0,D.jsx)(Ne().A,{size:28,style:v.icon}),k?(0,D.jsx)(Ce().N,{debugName:"GroupNameToggle",capture:!0,onEsc:w,children:(0,D.jsx)(Re().A,{disabled:!s,type:Be().e.Inline,style:v.input,placeholder:h.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:M,onBlur:j,onSubmit:j})}):(0,D.jsx)(f().A,{style:v.name,showTooltipWhenTruncated:!0,children:x}),(I=t.isRowHovered,m.icon?s?(0,D.jsx)(Ee().B6,{disabled:!1,bucket:"public",icon:m.icon?{pointer:l.pointer,icon:m.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:A,style:v.icon}):(0,D.jsx)(Ee().B6,{disabled:!0,bucket:"public",icon:m.icon?{pointer:l.pointer,icon:m.icon}:void 0,size:18,isEmptyPage:!1,title:x,style:v.icon}):I&&s?(0,D.jsx)(Oe().A,{renderTooltip:()=>(0,D.jsx)(d().sA,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,D.jsx)(Ee().B6,{disabled:!1,bucket:"public",icon:m.icon?{pointer:l.pointer,icon:m.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:A,style:{...v.icon,width:30},defaultIcon:(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,D.jsx)(ke().I,{icon:Ie().emojiFaceSmallIcon,colorVariant:"secondary",size:"xs"}),(0,D.jsx)(ke().I,{icon:_e().plusFillSmallIcon,colorVariant:"secondary",size:"xxs"})]}),...e})}):void 0)]});var I}function Fe({canEdit:e,spaceStore:t,permissionsSettingsStore:s,containerMarginTop:u,upsell:S}){const[y,b]=(0,n.useState)([]),x=(0,a().DP)(),v=(0,o().K8)((()=>g().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),A=(0,o().K8)((()=>0!==(0,p().zI)()),[]),w=(0,i().X)("upgrade_system_settings"),M=(0,o().K8)((()=>(0,l().Ay)(s.state.groupsFilter,v,(e=>e.name||""))),[s,v]),j=(0,n.useCallback)((e=>{b((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[b]),k=(0,n.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(M)),[M]),C=(0,n.useMemo)((()=>function({openRowIds:e,toggleOpenRowId:t,canEdit:s,showTeamsColumn:n,spaceStore:i,settingsStore:o}){const a={id:"title",headerTitle:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:n=>(0,D.jsx)(Ue,{row:n,open:e.includes(n.id),toggleOpenState:t,canEdit:s,spaceStore:i,settingsStore:o}),widthData:{width:120},hasClickableContents:!1,sortable:!1},r={id:"teams",headerTitle:(0,D.jsx)("div",{style:{paddingInlineStart:8},children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,D.jsx)("div",{style:c().RC,children:(0,D.jsx)(R,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},l={id:"members",headerTitle:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,D.jsx)(Le,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"menu",headerTitle:null,renderCell:e=>(0,D.jsx)($,{group:e.group,spaceStore:i,settingsStore:o}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[a,...n?[r]:[],l,...s?[u]:[]]}({openRowIds:y,toggleOpenRowId:j,canEdit:e,showTeamsColumn:A,spaceStore:t,settingsStore:s})),[y,j,e,A,t,s]),I=(0,h().rC)({columnRenderInfo:C,theme:x,containerMarginTop:u}),_=(0,a().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.border.primary}`},emptyStateContainer:{position:"absolute",top:"50%",insetInlineStart:"50%",transform:"translate(calc(var(--direction, 1) * -50%), -50%)"}})),[]);return(0,D.jsx)(h().WE,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:C,rows:k,styles:I,renderNoRowsComponent:()=>S&&w?(0,D.jsx)("div",{style:_.emptyStateContainer,children:(0,D.jsx)(m().V,{icon:r().F,title:(0,D.jsx)(d().sA,{defaultMessage:"Set up groups",id:"spaceGroupsUpsell.upgradeEmptyState.title"}),description:(0,D.jsx)(d().sA,{defaultMessage:"Get the Plus plan to create groups inside one workspace and grant them different levels of access",id:"spaceGroupsUpsell.upgradeEmptyState.description"}),source:"permission_groups",upsell:S})}):(0,D.jsx)(f().A,{isSmall:!0,style:_.noRowContainer,children:v.length>0?(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:n=>y.includes(n.id)?(0,D.jsx)(we,{group:n.group,canEdit:e,spaceStore:t,settingsStore:s}):void 0})}function Le(e){const{row:t}=e,s=(0,o().K8)((()=>(0,u().xQ)({groupId:t.group.group_id})),[t.group]);return(0,D.jsx)("div",{style:c().RC,children:(0,D.jsx)(d().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},289251:(e,t,s)=>{s.d(t,{A:()=>S});var n=s(296540),i=()=>s(662303),o=()=>s(484714),a=()=>s(56366),r=()=>s(869190),d=()=>s(736501),l=()=>s(842599),c=()=>s(69708),u=()=>s(559506),p=()=>s(765957),g=()=>s(378765),m=()=>s(859428),h=()=>s(702723),f=s(474848);const S=function({emailDomainSettings:e}){const t=(0,o().v3)(),i=(0,a().uB)(void 0,s(40851).A),r=(0,n.useCallback)(((t,s,n)=>(0,f.jsx)(w,{emailDomainSettings:e,requestStore:i,error:t,result:s,ready:n})),[e,i]),l=(0,s(124749).$)();return l?(0,f.jsx)(s(251126).A,{requestStore:i,request:{userId:l.id,expiryTime:Date.now()+d().f},performRequest:e=>async function(e,t){const s=await u().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,t),render:r}):null};function y(e){return Boolean(e.prevent_granting_support_access)}function b(e){const t=(0,o().v3)(),{accessGranted:s,onClick:n,expiryTime:a,emailDomainSettings:d}=e,{device:l}=t;return(0,f.jsx)(h().A,{disabled:y(d),isMobile:l.isMobile,title:(0,f.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&a?(0,f.jsx)(c().sA,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r().W_)(a,"medium_with_time",i().locale)}}):(0,f.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:n})}function x(e){const{accessGranted:t,onClick:s,expiryTime:n,emailDomainSettings:i}=e,o=(0,a().K8)((()=>{var e;const t=null===(e=p().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,l().zN)(t):void 0}),[]);return(0,f.jsx)(m().A,{disableTooltip:!y(i),renderTooltip:()=>(0,f.jsx)(c().sA,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:"bottom",alignment:"center",render:e=>(0,f.jsx)("div",{...e,children:(0,f.jsx)(b,{emailDomainSettings:i,accessGranted:t,onClick:s,expiryTime:n})})})}async function v(e,t,s){const n=await u().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===n.type&&n.data){const e=s.state;s.setState({...e,result:n.data})}}function A({emailDomainSettings:e,requestStore:t}){const s=(0,o().v3)(),i=(0,n.useCallback)((()=>async function(e,t,s){y(t)||await v({expiryTime:Date.now()+d().f},e,s)}(s,e,t)),[s,e,t]),r=(0,n.useCallback)((()=>async function(e,t,s){y(t)||await v({},e,s)}(s,e,t)),[s,e,t]),l=(0,a().K8)((()=>{var e;return null===(e=t.state.result)||void 0===e?void 0:e.expiryTime}),[t]),c=Boolean(l&&Number(l)>Date.now()),u=c?r:i;return(0,f.jsx)(x,{emailDomainSettings:e,accessGranted:c,onClick:u,expiryTime:l})}function w({error:e,result:t,ready:s,emailDomainSettings:n,requestStore:i}){const o=(0,c().tz)();return(0,f.jsx)(g().A,{loaded:s,spinnerSize:"sm",showSpinnerTimeout:600,children:e||!t?(0,f.jsx)("div",{children:o.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,f.jsx)(A,{emailDomainSettings:n,requestStore:i})})}},304231:(e,t,s)=>{s.d(t,{x:()=>i});var n=()=>s(534177);function i({spaceUserMembershipType:e}){switch(e){case void 0:case"none":case"page_guest":case"restricted_member":return!1;case"member":case"membership_admin":case"owner":return!0;default:(0,n().HB)(e)}}},317025:(e,t,s)=>{s.d(t,{$D:()=>c,c3:()=>u,qU:()=>l});s(296540);var n=()=>s(69708),i=()=>s(134696),o=()=>s(701763),a=()=>s(496414),r=()=>s(471995),d=s(474848);function l(e){o().CW(e,{type:"request"}),i().vX(e,{type:"request",from:"settings_modal"})}function c(){const e=(0,n().YK)({invitingMembers:{id:"sidebarFooter.inviteMember.loadingMessage",defaultMessage:"Updating…"}});a().m({message:e.invitingMembers})}function u(e,t){a().V();const s=e?(0,d.jsx)(n().sA,{id:"sidebarFooter.inviteMember.successToastMessage",defaultMessage:"Successfully sent"}):(0,d.jsx)(n().sA,{id:"sidebarFooter.inviteMember.failureToastMessage",defaultMessage:"Failed to send invites"});r().D6({label:s})}},318575:(e,t,s)=>{s.d(t,{U:()=>l,r:()=>d});s(898992),s(354520),s(672577);var n=()=>s(821062),i=()=>s(534177),o=()=>s(398194),a=()=>s(478525);const r={settingsVerifyWithPassword:a().xc.incorrectPassword,settingsVerifyWithSMS:a().xc.smsIncorrectCode,settingsVerifyWithTOTP:a().xc.totpIncorrectCode,settingsVerifyWithBackupCode:a().xc.backupCodeIncorrectCode};class d extends(()=>s(757695))().Store{getInitialState(){return{step:"settingsUninitialized"}}}class l extends(()=>s(658921))()._{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,i().HB)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e,t={fromNudge:!1}){const{fromNudge:s}=t;(s||this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]))&&this.doCreatePasskeySetting(e,{fromNudge:s}).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,n=t.status;switch(n){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,i().HB)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,i().HB)(n)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:n}=t;switch(s.status){case"ok":this.store.setState({...n,isForgotPasswordLoading:!1,alert:a().By.passwordResentLinkSent(e)});break;case"error":this.store.setState({...n,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});break;default:return(0,i().HB)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:n}=t;await this.handleVerifyIdentityResponse({status:s.status,state:n})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:n}=t;await this.handleVerifyIdentityResponse({status:s.status,state:n})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:n}=t;await this.handleVerifyIdentityResponse({status:s.status,state:n})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:n}=t;switch(s.status){case"ok":this.store.setState({...n,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...n,resentStatus:"not-resent",error:a().xc.unexpectedError});break;default:return(0,i().HB)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:n}=t;await this.handleVerifyIdentityResponse({status:s.status,state:n})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,i().HB)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:r[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a().xc.unexpectedError});break;default:return(0,i().HB)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a().xc.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,n=s.step;switch(n){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,i().HB)(n)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:n,state:o}=s;switch(n.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,i().HB)(n.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const i=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!i)return;const{result:o,state:r}=i;"saved"===o.status?o.settings.length>0&&!(0,n().A)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a().xc.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a().xc.totpBadFriendlyName:a().xc.totpEmptyFriendlyName})}async doLoadPasskeySettings({nameNewSetting:e=!1}){const t=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.loadPasskeySettings()));if(!t)return;const{result:s,state:n}=t;this.store.setState({...n,step:e?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:s.settings})}async doCreatePasskeySetting(e,t={fromNudge:!1}){const{fromNudge:s}=t,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.createPasskeySetting(e)));if(!n)return;const{result:i,state:o}=n;!0===i.created?s||await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...o,error:a().xc.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,i=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!i)return;const{result:o,state:a}=i;o.settings.length>0&&!(0,n().A)(o.settings,a.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...a,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:i}=t;s.settings.length>=0&&!(0,n().A)(s.settings,i.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...i,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,i().HB)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},328716:(e,t,s)=>{s.d(t,{n:()=>n});const n=(0,s(340498).xh)("office365",{default:{loader:()=>s.e(59287).then(s.bind(s,849050))},darkMode:{loader:()=>s.e(59287).then(s.bind(s,450770))}})},332381:(e,t,s)=>{s.d(t,{L:()=>M});var n=s(296540),i=()=>s(20022),o=()=>s(484714),a=()=>s(56366),r=()=>s(406094),d=()=>s(842599),l=()=>s(748902),c=()=>s(69708),u=()=>s(534177),p=()=>s(848259),g=()=>s(559506),m=()=>s(384944),h=()=>s(27579),f=()=>s(72234),S=()=>s(231297),y=()=>s(144114),b=()=>s(765957),x=()=>s(347306),v=()=>s(963550),A=()=>s(702723),w=s(474848);function M({target:e}){const t=(0,o().v3)(),{desktopAppId:s}=(0,o().Y0)(),M=(0,a().O$)(b().AppStoreSidebarSpaceViewStore),j=(0,a().K8)((()=>{var t,s,n,i;switch(e){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==M||null===(t=M.getKeyStore(e))||void 0===t?void 0:t.getValue())||!1;case"notify_email_digest":return(null==M||null===(s=M.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(e))||void 0===s?void 0:s.getValue())||!1;case"disable_ai_meeting_notes_audio_process_detection_notification":return(null==M?void 0:M.isAiMeetingNotesAudioProcessDetectionNotificationEnabled())??!0;case"notify_home_digest_email":return(null==M||null===(n=M.getSettingsStore())||void 0===n||null===(n=n.getKeyStore(e))||void 0===n?void 0:n.getValue())??(null==M||null===(i=M.getSettingsStore())||void 0===i||null===(i=i.getKeyStore("notify_email_digest"))||void 0===i?void 0:i.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":case"notify_discord_enabled":case"notify_discord":case"allow_discord_ai_usage":return!1;default:(0,u().HB)(e)}}),[M,e]),k=(0,n.useCallback)((()=>{if(M){const s=!j;"notify_email_digest"===e?f().T$({environment:t,newValue:s}):"notify_home_digest_email"===e?f().gI(t,s):"disable_ai_meeting_notes_audio_process_detection_notification"===e?f().AC(t,!s,"settings"):S().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:t=>{m().zv({store:M,data:{[e]:s},transaction:t})}}),"notify_slack"!==e&&"marketing_emails"!==e&&"desktop_badge"!==e&&"disable_ai_meeting_notes_audio_process_detection_notification"!==e&&"notify_discord_enabled"!==e&&"allow_discord_ai_usage"!==e&&"notify_discord"!==e&&p().DN(t,{is_on:s,target:e})}}),[M,j,e,t]),C=async()=>{const e=await g().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:t,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return p().iE(t),(0,h().L)({environment:t,url:e.data.preferenceCenterLink});{const e=await(0,y().k_)(t),s=(0,d().j5)(e);return p().iE(t),(0,h().L)({environment:t,url:s})}},I=()=>{null!==i().Ht&&void 0!==i().Ht&&i().Ht.openExternalUrl&&i().Ht.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${s}`)};return"marketing_emails"===e?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:e}),caption:(0,w.jsx)(x().A,{target:e}),customButton:(0,w.jsx)(r().A,{size:"lg",onClick:C,iconLeading:{icon:l().arrowDiagonalUpRightFillSmallIcon,size:"xs"},children:(0,w.jsx)(c().sA,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===e?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:e}),caption:(0,w.jsx)(x().A,{target:e}),customButton:(0,w.jsx)(r().A,{size:"lg",onClick:I,iconLeading:{icon:l().arrowDiagonalUpRightFillSmallIcon,size:"xs"},children:(0,w.jsx)(c().sA,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(A().A,{isMobile:!0,title:(0,w.jsx)(v().A,{target:e}),caption:(0,w.jsx)(x().A,{target:e}),type:"toggle",isOn:j,onToggle:k})}},334711:(e,t,s)=>{s.d(t,{$:()=>n,U:()=>i});s(944114);class n extends(()=>s(757695))().Store{getInitialState(){return{step:"totpUninitialized"}}}class i extends(()=>s(658921))()._{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:n}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:n}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:n}=e,i=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!i||!o)return;const{result:a,state:r}=i,{result:d}=o;if("saved"===a.status&&"match"===d.status)this.store.setState({step:"totpBackupCodesLoading"}),n();else{const e=[];switch(a.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(d.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...r,step:"totpVerifyCode",errorKeys:e})}}}},347306:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var n=()=>s(69708),i=()=>s(534177),o=s(474848);function a({target:e}){switch(e){case"notify_mobile":return(0,o.jsx)(n().sA,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(n().sA,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on desktop"});case"notify_email":return(0,o.jsx)(n().sA,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(n().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you’re active on the app"});case"notify_slack":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you’re mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you’re mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(n().sA,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(n().sA,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what’s happening in your workspace"});case"marketing_emails":return(0,o.jsx)(n().sA,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(n().sA,{id:"notificationSettings.desktopBadge.description",defaultMessage:"Show/hide the notification badge using the “Badge application icon” switch in System Settings"});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(n().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.description",defaultMessage:"Receive push notifications to start meeting notes when you join a meeting on desktop"});case"notify_discord":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordNotificationsSettings.default.description",defaultMessage:"Receive notifications in Discord when you’re mentioned in a page, database property, or comment"});case"notify_discord_enabled":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordNotificationEnabledSettings.description",defaultMessage:"Receive notifications in Discord when you get comments or mentions."});case"allow_discord_ai_usage":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordAiUsageSettings.description",defaultMessage:"Allow Notion AI to be used from within Discord for answering questions and automations"});default:(0,i().HB)(e)}}},364671:(e,t,s)=>{s.d(t,{A:()=>W});var n=s(296540),i=()=>s(56366),o=()=>s(534177),a=()=>s(676007),r=()=>s(98126),d=()=>s(69708),l=()=>s(284371),c=()=>s(274602),u=s(474848);function p({errorMessage:e,isLoading:t,onDisplayBackupCodes:s,onCancel:n,onDismiss:i}){const o=(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),a=(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won’t work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),p={text:t?(0,u.jsx)(r().k,{}):(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:s,view:"outline",disabled:t,isRed:!0},g=[{text:(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,view:"outline",type:"button"}];return(0,u.jsx)(c().A,{title:o,header:a,errorMessage:e,primaryAction:p,secondaryActions:g,onDismiss:i})}var g=()=>s(252291),m=()=>s(533642),h=()=>s(414446);function f({backupCodes:e,backupCodeDownload:t,backupCodeFileName:s,errorMessage:n,onNoted:i,onDownload:o}){const a=(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),r=(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),p={text:(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I’ve saved them"}),onClick:i},f=[{text:(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${t}`,saveAs:s,view:"outline",type:"link",onClick:o}];return(0,u.jsx)(c().A,{title:a,header:r,icon:(0,u.jsx)(g().I,{icon:m().c,size:"xl",colorVariant:"secondary"}),errorMessage:n,primaryAction:p,secondaryActions:f,children:(0,u.jsx)(h().A,{type:"unencryptedCodes",backupCodes:e})})}function S(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:n}=e,a=(0,i().K8)((()=>t.getCurrentStep()),[t]),r=()=>t.backupCodesRegenerateCodes();switch(a.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:a.isLoading,errorMessage:a.error,onDisplayBackupCodes:r,onDismiss:n,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(f,{errorMessage:a.error,backupCodes:a.backupCodes,backupCodeDownload:a.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,o().HB)(a)}}var y=()=>s(653027),b=()=>s(401497),x=()=>s(22394);function v({type:e,errorMessage:t,onDismiss:s,onAddMethod:n}){const i=(0,b().IS)(A,[]),a=(0,u.jsx)(d().sA,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),r=[{text:(0,u.jsx)(d().sA,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:n,type:"button",view:"outline"}];return(0,u.jsx)(c().A,{title:"totp"===e?(0,u.jsx)(d().sA,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===e?(0,u.jsx)(d().sA,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,o().HB)(e),header:a,errorMessage:t,icon:(0,x().o)(i.confirmationIcon),secondaryActions:r,onDismiss:s})}function A(e){return(0,b().$4)({confirmationIcon:{width:30,fill:"green"}})}s(581454);var w=()=>s(85128),M=()=>s(406094),j=()=>s(100622),k=()=>s(778078),C=()=>s(722872),I=()=>s(920949),_=()=>s(232930),T=()=>s(463830),P=()=>s(760217),D=()=>s(406699),B=()=>s(623580),N=()=>s(419357),R=()=>s(404277),E=()=>s(939740),O=()=>s(89924),V=()=>s(125565);const U={name:"United States",countryCode:"1",regionCode:"US"};function F({isLoading:e,phoneNumber:t,country:s,errorMessage:o,onDismiss:a,onBack:l,onContinue:p}){const g=(0,b().IS)(L,[]),m=(0,d().tz)(),[h,f]=(0,n.useState)(t??""),[S,y]=(0,n.useState)([]),[x,v]=(0,n.useState)(""),[A,j]=(0,n.useState)(s??U),F=(0,i().uB)(void 0,T().A),q=(0,n.useMemo)((()=>(0,w().cE)(A.regionCode)),[A.regionCode]),G=(0,n.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");f(q.reset(t))}),[q]);(0,n.useEffect)((()=>{f(s!==A?q.reset(h??""):q.reset(t??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),n=(0,w().LU)();let i=-1;const o=n.map(((t,s)=>{const n=(0,w().qY)(t).toString(),o=e.of(t);return t===A.regionCode&&(i=s),{name:o??t,countryCode:n,regionCode:t}}));-1!==i&&o.unshift(o.splice(i,1)[0]),y(o)}),[A]);const z=(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),K=(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),W={text:e?(0,u.jsx)(r().k,{}):(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>p(A,h.trim()),disabled:e||""===h},H=[{text:(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,_().x)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],$=m.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),Y=m.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),Q=e=>(0,u.jsxs)("div",{style:g.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(V().A,{isSmall:!0,children:`+${e.countryCode}`})]}),J=(0,u.jsx)(D().A,{popupType:D().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",buttonPopupStore:F,renderOrigin:e=>(0,u.jsx)(M().A,{size:"lg",...e,children:`+${A.countryCode}`}),render:e=>(0,u.jsx)(R().A,{menuType:C().gu.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(O().A,{isInput:!0,children:(0,u.jsx)(N().Ay,{value:x,onChange:e=>v(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:Y})}),children:(0,u.jsx)(E().Ay,{type:E().Oh.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(O().A,{...e}),items:(0,k().Ay)(x,S,(e=>/\d/.test(x)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(P().A,{...e,title:Q(t),isChecked:t.name===A.name}),action:()=>{v(""),j(t),e.close()}})))}]})})});return(0,u.jsx)(c().A,{onDismiss:a,onBack:l,title:z,header:K,errorMessage:o,primaryAction:W,secondaryActions:H,children:(0,u.jsxs)("div",{style:g.container,children:[(0,u.jsx)("div",{style:g.countryCodeDropdownMenu,children:J}),(0,u.jsx)(B().A,{autoFocus:!0,value:h,placeholder:$,spellCheck:!1,style:g.phoneNumberInput,onChange:G,disabled:e,customElementAttributes:I().SY})]})})}function L(e){return(0,b().$4)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginInlineEnd:5},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?j().Tj.transparent:e.inputBackground}})}var q=()=>s(852310);function G(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:n,onStartBackupCodes:a}=e,r=(0,i().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(F,{phoneNumber:r.phoneNumber,country:r.country,isLoading:"smsSendingSMS"===r.step,errorMessage:r.error,onDismiss:n,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(q().Ay,{isLoading:"smsVerifying"===r.step||"smsBackupCodesLoading"===r.step,errorMessage:r.error,phoneNumber:`+${r.country.countryCode} ${r.phoneNumber}`,onDismiss:n,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:a}),resentStatus:"smsResendSMS"===r.step?"resending":"resentAt"in r&&void 0!==r.resentAt?"resent":"not-resent",resentAt:"resentAt"in r&&r.resentAt?r.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(v,{type:"sms",errorMessage:r.error,onAddMethod:s,onDismiss:n});default:return(0,o().HB)(r)}}var z=()=>s(936457);function K(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:n,onDismiss:a}=e,r=(0,i().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(z().Ay,{isLoading:"totpBackupCodesLoading"===r.step||"totpLoadingQRCode"===r.step,qrCode:"totpVerifyCode"===r.step?r.qrCode:void 0,textCode:"totpVerifyCode"===r.step?r.rawString:void 0,friendlyName:"totpVerifyCode"===r.step?r.friendlyName:void 0,errorMessage:r.error,errorKeys:"totpVerifyCode"===r.step?r.errorKeys:void 0,onDismiss:a,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:n})}});case"totpComplete":return(0,u.jsx)(v,{type:"totp",errorMessage:r.error,onDismiss:a,onAddMethod:s});default:return(0,o().HB)(r)}}function W(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:r,smsStateMachine:d,backupCodesStateMachine:l,onReloadSettings:c}=e,p=(0,i().K8)((()=>t.getCurrentStep()),[t]),[{showSettings:g,onRootExit:m}]=(0,n.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),r.exit(),d.exit(),l.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),h=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),f=()=>t.rootStartTOTP((()=>r.totpStart())),b=()=>t.rootStartSMS((()=>d.smsStart())),x=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{r.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{d.exit(),s.settingsShow({refresh:!0})}})},A=()=>{l.exit(),t.rootEndBackupCodes({completeTotp:()=>{r.totpComplete()},completeSMS:()=>{d.smsComplete()},showSettings:g})},w=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{r.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{r.totpBackupCodesComplete(),r.totpComplete(),A()}})},M=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{d.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{d.smsBackupCodesComplete(),d.smsComplete(),A()}})},j=()=>{t.rootStartBackupCodesFromSettings((()=>l.backupCodesShowCreate()))},k=(0,i().K8)((()=>s.getCurrentStep().step),[s]),C=(0,i().K8)((()=>r.getCurrentStep().step),[r]),I=(0,i().K8)((()=>d.getCurrentStep().step),[d]),_=(0,i().K8)((()=>l.getCurrentStep().step),[l]);let T;switch(p.step){case"rootUninitialized":break;case"rootSettings":T={open:"settingsUninitialized"!==k,onDismiss:m,render:()=>(0,u.jsx)(y().A,{settingsStateMachine:s,onDismiss:h,onStartTOTP:f,onStartSMS:b,onStartBackupCodes:j})};break;case"rootTOTP":T={open:"totpUninitialized"!==C,onDismiss:m,render:()=>(0,u.jsx)(K,{totpStateMachine:r,onGoToSettings:x,onStartBackupCodes:w,onDismiss:m})};break;case"rootSMS":T={open:"smsUninitialized"!==I,onDismiss:m,render:()=>(0,u.jsx)(G,{smsStateMachine:d,onGoToSettings:v,onStartBackupCodes:M,onDismiss:m})};break;case"rootBackupCodes":T={open:"backupCodesUninitialized"!==_,onDismiss:"backupCodesRegenerateCodes"===_?m:void 0,render:()=>(0,u.jsx)(S,{backupCodesStateMachine:l,onGoToSettings:A,onDismiss:m})};break;default:throw(0,o().HB)(p)}return T?(0,u.jsx)(a().a,{...T,preventHideChildrenWhileOpening:!0}):null}},367049:(e,t,s)=>{s.d(t,{V:()=>o});var n=()=>s(56366),i=()=>s(765957);function o(){return(0,n().K8)((()=>{const{sidebarSpaceViewStore:e,sidebarSpaceStore:t}=i().default.state;if(!t||!e)return!1;const s=t.getMemberCountFromPublicSpaceData(),n=e.getWorkspacePages()??[];return 1===s&&0===n.length&&"personal"===t.getPlanType()}),[])}},368401:(e,t,s)=>{s.d(t,{M:()=>k});s(898992),s(581454),s(908872);var n=()=>s(690825),i=s(296540),o=()=>s(56366),a=()=>s(401497),r=()=>s(729108),d=()=>s(98126),l=()=>s(631524),c=()=>s(378815),u=()=>s(284371),p=()=>s(324561),g=()=>s(807778),m=()=>s(493552),h=()=>s(373009),f=()=>s(617668),S=()=>s(69708),y=()=>s(347930),b=()=>s(406999),x=()=>s(134217),v=()=>s(749240),A=()=>s(792223),w=s(474848);function M({spaceStore:e}){const t=(0,a().IS)((e=>({row:{display:"flex",alignItems:"stretch",boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,height:42}})),[]),s=(0,o().K8)((()=>{const e=v().subscriptionDataStoreInstance.state;return Boolean(e&&x().Fq(e))}),[]),n=(0,A().k4)({spaceStore:e}),r=(0,i.useMemo)((()=>(0,b().nc)()),[]),d=(0,w.jsx)("div",{style:t.row,children:(0,w.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:(0,w.jsxs)(l().p,{style:{height:"100%",display:"flex",flexDirection:"row",flex:1,gap:10,paddingInlineStart:12,borderRadius:0},children:[(0,w.jsx)(h().E,{shape:"pill",iconLeading:f().plusIcon,colorPalette:"blue"}),(0,w.jsx)(m().D,{styleKey:"Body/Regular",children:(0,w.jsx)(S().sA,{defaultMessage:"Invite teammate",id:"peopleSectionMembersTab.addMember"})})]})})});return(0,w.jsx)(y().H,{targetStore:e,spaceStore:e,permissionsInviteStore:r,disabled:!n,isSubscribed:s,upgradeButtonName:"space_permission_settings_invite_teammate_button",shouldGrow:!1,origin:d,analyticsFrom:"space_permission_settings_invite_teammate_button",membersOnly:!1})}const j=32;function k(e){const{columns:t,listSource:s,transformRow:n,estimatedRowHeight:l,renderEmpty:c,sort:u,onSortChange:p,allowHorizontalScroll:g=!1,multiselect:m,memberCount:h,spaceStore:f}=e,S=(0,o().K8)((()=>e.rows??(null==s?void 0:s.rowsStore.state.rows)),[e.rows,s]),y=(0,i.useMemo)((()=>{const e=h??(null==S?void 0:S.length);return e?`${l*e+j}px`:"100vh"}),[l,h,S]),b=(0,a().IS)((e=>({container:{height:y,minHeight:"84px",maxHeight:"450px",width:"100%",display:"flex",flexDirection:"column",minWidth:B(t)},headerRow:{display:"flex",position:"relative",boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:8},horizontalScrollContainer:{position:"relative",width:"100%",height:"100%",overflowX:"auto"},multiselectCheckbox:{alignSelf:"center",color:e.selectLightGray[300],opacity:null!=m&&m.header.isDisabled?.5:1,marginInlineStart:P/2}})),[t,null==m?void 0:m.header.isDisabled,y]),x=(0,i.useCallback)((e=>{const t=e.id===(null==u?void 0:u.by)&&!u.asc;p&&p({by:e.id,asc:t})}),[u,p]),v=(0,w.jsxs)("div",{style:b.container,children:[(0,w.jsxs)("div",{style:b.headerRow,children:[m?(0,w.jsx)(r().S,{style:b.multiselectCheckbox,disabled:m.header.isDisabled,checked:m.header.isSelected,onClick:()=>m.header.onClick(),size:D,tapArea:{size:30}}):void 0,t.map((e=>(0,w.jsx)(C,{column:e,sort:u,onSortableColumnClick:x},`header_${e.id}`)))]}),void 0===S?(0,w.jsx)("div",{style:b.loadingContainer,children:(0,w.jsx)(d().k,{})}):0===S.length&&c?c():(0,w.jsx)(I,{columns:t,rows:S,listSource:s,estimatedRowHeight:l,transformRow:n,multiselect:m,memberCount:h,spaceStore:f})]});return g?(0,w.jsx)("div",{style:b.horizontalScrollContainer,children:v}):v}function C({column:e,sort:t,onSortableColumnClick:s}){const n=(0,a().IS)((t=>({cellContainer:{...R(e.widthData),display:"flex",alignItems:"center",height:j,...e.border&&{boxShadow:`inset calc(var(--direction, 1) * -1px) 0 0 ${t.tableDividerColor}`}},cell:{display:"flex",alignItems:"center",padding:e.headerCellPadding},text:{fontSize:u().J.UISmall.desktop,fontWeight:u().Wy.regular,color:t.text.secondary},sortButton:{paddingInlineStart:6,paddingInlineEnd:6,marginInlineStart:-6,marginInlineEnd:-6},sortIcon:{color:t.text.secondary,width:12,height:12,marginInlineStart:4,fill:"currentColor"}})),[e.widthData,e.headerCellPadding,e.border]),i=(0,w.jsx)("div",{style:n.text,children:e.headerTitle});return(0,w.jsx)("div",{style:n.cellContainer,children:(0,w.jsx)("div",{style:n.cell,children:e.sortable?(0,w.jsxs)(l().p,{size:"xs",style:n.sortButton,onClick:()=>s(e),children:[i,(null==t?void 0:t.by)===e.id?(0,c().arrowStraightDownFillIcon)({...n.sortIcon,...t.asc&&{transform:"rotate(180deg)"}}):void 0]}):i})})}function I(e){const{columns:t,rows:s,listSource:a,estimatedRowHeight:r,transformRow:d,multiselect:l,memberCount:c,spaceStore:u}=e,m=i.useRef(null),h=(0,n().Te)({count:s.length,getScrollElement:()=>m.current,estimateSize:()=>r,overscan:10}),f=h.getVirtualItems();(0,i.useEffect)((()=>{!async function(){const e=f[f.length-1];null!=a&&a.rowsStore.state.hasMore&&(null==e?void 0:e.index)>=s.length-1&&await a.loadMore()}()}),[a,s.length,f]);const S=(0,p()._3)({spaceId:null==u?void 0:u.id}),y=(0,o().K8)((()=>(0,g().vj)(S)),[S]),b=c&&c<4&&y;return(0,w.jsxs)("div",{ref:m,style:{flex:"1 1 0",overflowY:"auto",overflowX:"hidden",position:"relative"},children:[(0,w.jsx)("div",{style:{height:h.getTotalSize(),width:"100%",position:"relative"},children:f.map((e=>(0,w.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",transform:`translateY(${e.start}px)`},"data-index":e.index,ref:h.measureElement,children:(0,w.jsx)(_,{columns:t,row:s[e.index],transformRow:d,multiselect:l})},String(e.key))))}),b&&u?(0,w.jsx)(w.Fragment,{children:Array.from({length:4-(c??0)}).map(((e,t)=>(0,w.jsx)(M,{spaceStore:u},t)))}):null]})}function _({row:e,columns:t,transformRow:s,multiselect:n}){const i=(0,a().IS)((e=>({container:{display:"flex",height:"100%",alignItems:"stretch",boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`},multiselectCheckbox:{alignSelf:"center",color:e.selectLightGray[300],opacity:null!=n&&n.header.isDisabled?.5:1,marginInlineStart:P/2}})),[null==n?void 0:n.header.isDisabled]),d=(0,o().K8)((()=>s(e)),[s,e]);return void 0===d?null:(0,w.jsxs)("div",{style:i.container,children:[n?(0,w.jsx)(r().S,{style:i.multiselectCheckbox,disabled:n.row.getDisabledState(d),checked:n.row.getSelectedState(d),onClick:()=>n.row.onClick(d),size:D,tapArea:{size:30}}):void 0,t.map((e=>(0,w.jsx)(T,{row:d,column:e},`cell_${d.id}_${e.id}`)))]})}function T({row:e,column:t}){const s=(0,a().IS)((e=>({cellContainer:{...R(t.widthData),display:"flex",alignItems:"center",...t.border&&{boxShadow:`inset calc(var(--direction, 1) * -1px) 0 0 ${e.tableDividerColor}`}},cell:{minWidth:N(t.widthData),maxWidth:t.widthData.maxWidth,padding:t.cellPadding}})),[t.widthData,t.border,t.cellPadding]);return(0,w.jsx)("div",{style:s.cellContainer,children:(0,w.jsx)("div",{style:s.cell,children:t.renderCell(e)})})}const P=24,D=14;function B(e){return e.reduce(((e,t)=>e+N(t.widthData)+P),0)}function N(e){return"minWidth"in e?e.minWidth:e.width}function R(e){let t;return t="width"in e?{width:e.width,maxWidth:null==e?void 0:e.maxWidth}:{width:`${e.widthPercent}%`,minWidth:e.minWidth,maxWidth:null==e?void 0:e.maxWidth},{...t,paddingInlineStart:P/2,paddingInlineEnd:P/2}}},388450:(e,t,s)=>{s.d(t,{R:()=>U});s(898992),s(672577);var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(402904),d=()=>s(69708),l=()=>s(534177),c=()=>s(284371),u=()=>s(848259),p=()=>s(384944),g=()=>s(231297),m=()=>s(881707),h=()=>s(878079),f=()=>s(765957),S=()=>s(53137),y=()=>s(878710),b=()=>s(347306),x=()=>s(963550),v=(s(581454),()=>s(718827)),A=()=>s(617871),w=()=>s(668725),M=()=>s(689094),j=()=>s(973647),k=()=>s(898563),C=()=>s(510683),I=()=>s(722872),_=()=>s(760217),T=()=>s(406699),P=()=>s(404277),D=()=>s(939740),B=()=>s(89924),N=s(474848);function R(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:r,spaceViewStore:l}=e,c=(0,i().v3)(),u=(0,i().Y0)(),h=(0,o().K8)((()=>S().A.integrations.state.find((e=>e.id===A().zG))),[]),f=(0,a().IS)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginInlineStart:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginInlineStart:8,width:12,height:12,color:e.text.tertiary}})),[]);let y;y=u.isPhone?{menuType:I().gu.ActionSheet}:{menuType:I().gu.Popup,width:280,maxHeight:"50vh"};const b=n.useCallback((e=>Object.entries((0,m().Os)(s)).map((([s,n],i)=>({key:s,items:n.map((({externalAuthentication:s,workspaceName:n})=>({key:s.id,action:()=>{e.close(),E({environment:c,spaceViewStore:l,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:s.parent_id})},render:e=>(0,N.jsx)(_().A,{...e,title:n,isChecked:s.id===(null==t?void 0:t.id)})}))),render:e=>(0,N.jsx)(B().A,{...e,title:s,topBorder:0!==i})})))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,l]),x=n.useCallback((e=>h?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;g().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),k().YT(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:l})},render:e=>(0,N.jsx)(_().A,{...e,title:(0,N.jsx)(d().sA,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),isChecked:void 0===t})}],render:e=>(0,N.jsx)(B().A,{...e,topBorder:b.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,N.jsx)(_().A,{...e,icon:(0,M().W)({width:12,height:12}),title:(0,N.jsx)(d().sA,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await C().Jq({environment:c,integration:h,spaceId:r,from:"notifications_and_settings"});if(j().Q.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&E({environment:c,spaceViewStore:l,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,N.jsx)(B().A,{...e,topBorder:!0})}]:[]),[t,c,b.length,r,l,h]);return(0,N.jsx)("div",{style:f.popupContainer,children:(0,N.jsx)(T().A,{popupType:T().z.Popup,alignmentToOrigin:"end",render:e=>(0,N.jsx)(P().A,{...y,children:(0,N.jsx)(D().Ay,{type:D().Oh.Vertical,initialFocus:0,sections:[...b(e),...x(e)]})}),renderOrigin:t=>(0,N.jsxs)(v().Ay,{...t,style:f.dropdownButtonContainer,children:[(0,N.jsx)("div",{style:f.currentValueLabel,children:(0,N.jsx)(O,{...e})}),(0,w().b)(f.icon)]})})})}function E(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:n,currentExternalBotId:i}=e,o=s.getSettingsStore(),a=o.getKeyStore("notify_slack").getValue();if(i!==n){const e=(0,h().Z5)();let s=!1;e&&(s=!i||Boolean(null==a?void 0:a.notify_slack_all_activity)),g().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:o,data:{notify_slack:{external_bot_id:n,notify_slack_all_activity:s,notify_slack_mention:!i||(null==a?void 0:a.notify_slack_all_activity)}},transaction:e})}}),void 0===i?k().lL(t,{type:"personal",source:"notifications_and_settings"}):k().Eu(t,{type:"personal",source:"notifications_and_settings"})}}function O(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,N.jsx)(d().sA,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,m().qO)(t).organizationName;return(0,N.jsx)(N.Fragment,{children:s})}var V=()=>s(702723);function U(e){const t=(0,i().v3)(),{target:s}=e,{isMobile:v}=(0,i().Y0)(),A=(0,o().O$)(f().AppStoreSidebarSpaceViewStore),w=(0,o().O$)(f().AppStoreSidebarSpaceStore),M=(0,o().O$)(S().A.completeSlackAuthentications),j=(0,o().K8)((()=>(0,h().Z5)()),[]),k=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=M.find((e=>e.parent_id===t));if(s)return s;if(!A)return;return(0,y().v3)(A,{id:t,table:r().As}).getValue()}),[A,M]),C=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return k&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,l().HB)(s)}}),[A,s,k]),I=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[A]),_=(0,n.useCallback)((()=>{if(A){const e=!C,n=A.getSettingsStore();let i=n.getKeyStore("notify_slack").getValue();if(!i)return;"notify_slack_mention"===s?(i[s]=e,e||i.notify_slack_all_activity||(i=void 0),g().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:n,data:{notify_slack:i},transaction:e})}})):"notify_slack_all_activity"===s&&(i[s]=e,g().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:n,data:{notify_slack:i},transaction:e})}})),"notify_slack"!==s&&u().DN(t,{is_on:e,target:s})}}),[t,A,C,s]),T=(0,a().IS)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c().Wy.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginInlineStart:6}})),[]);return A&&w?"notify_slack"===s?(0,N.jsx)(V().A,{type:"custom",isMobile:v,title:(0,N.jsx)(x().A,{target:s}),caption:(0,N.jsx)(N.Fragment,{children:k?(0,N.jsx)(d().sA,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,N.jsx)("span",{style:T.notifySlackSelectedWorkspaceName,children:(0,m().qO)(k).organizationName}),slackNotificationSettingMessage:j?"":" when you're mentioned in a page, database property, or comment"}}):(0,N.jsx)(b().A,{target:s})}),customButton:(0,N.jsx)(R,{currentExternalAuthentication:k,externalAuthentications:M,spaceId:w.id,spaceViewStore:A})}):"notify_slack_mention"===s?k?(0,N.jsx)(V().A,{isMobile:!0,title:(0,N.jsx)(x().A,{target:s}),caption:(0,N.jsx)(b().A,{target:s}),type:"toggle",isOn:C,onToggle:_,disabled:Boolean(I)}):(0,N.jsx)(N.Fragment,{}):k?(0,N.jsx)(V().A,{isMobile:!0,title:(0,N.jsx)(x().A,{target:s}),caption:(0,N.jsx)(b().A,{target:s}),type:"toggle",isOn:C,onToggle:_}):(0,N.jsx)(N.Fragment,{}):null}},420844:(e,t,s)=>{s.d(t,{xF:()=>ae,OC:()=>le,jo:()=>de});s(898992),s(354520);var n=s(296540),i=()=>s(20022),o=()=>s(242422),a=()=>s(484714),r=()=>s(56366),d=()=>s(75435),l=()=>s(98126),c=()=>s(762433),u=()=>s(69708),p=()=>s(534177),g=()=>s(175320),m=()=>s(863569),h=()=>s(959098),f=()=>s(156113),S=()=>s(234695),y=()=>s(719147),b=()=>s(862961),x=()=>s(939583),v=()=>s(702723),A=()=>s(782649),w=()=>s(289251),M=()=>s(232930),j=()=>s(141966),k=()=>s(645873),C=()=>s(448835),I=()=>s(155959),_=()=>s(765957),T=()=>s(410555),P=()=>s(726637),D=()=>s(312788),B=()=>s(401497),N=()=>s(97294),R=()=>s(406094),E=()=>s(711059),O=()=>s(502492),V=()=>s(579631),U=()=>s(526713),F=()=>s(767877),L=()=>s(125565),q=()=>s(597755),G=()=>s(112799),z=()=>s(927080),K=()=>s(404141),W=s(474848);function H(){const{isMac:e,isDesktop:t}=(0,a().Y0)(),s=t&&e,n=(0,a().v3)().device.desktopAppVersion;if(n){const e=(0,E().parseVersion)(n);if(e&&(0,U().o)(e))return!1}return s}function $(e){const t=e.environment.device,{isElectron:s,isMac:n,isWindows:i,isDesktop:o}=t,a=(0,r().K8)((()=>{var e;return void 0!==(null===(e=d().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled)}),[]);return[o&&(n||i||!1)&&!a?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,W.jsx)(te,{})}:void 0,H()?{key:"open-in-browser",renderSettingsItem:()=>(0,W.jsx)(Q,{})}:void 0,s&&n?{key:"close-browser-tabs",renderSettingsItem:()=>(0,W.jsx)(se,{})}:void 0].filter(p().O9)}function Y(){return(0,W.jsx)(v().A,{isMobile:!1,caption:(0,W.jsx)(u().sA,{id:"openInBrowserSetting.caption.browser",defaultMessage:"If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable “Open Notion links in browser” in your app."}),type:"custom",customButton:(0,W.jsx)(R().A,{size:"lg",onClick:()=>{window.open(O().$J({httpUrl:(0,q().A)(window.location.href),protocol:P().A.protocol}))},children:(0,W.jsx)(u().sA,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function Q(){const e=(0,a().Y0)(),{isElectron:t,isMac:s}=e,o=H(),l=(0,r().K8)((()=>{var e;return null===(e=d().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),c=(0,n.useCallback)((()=>{const e=!l;i().Zq.setPreference("isUniversalLinksEnabled",e)}),[l]);if(!t&&o)return(0,W.jsx)(Y,{});if(!t||!s||void 0===l)return null;const p=(0,W.jsx)(u().sA,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),g=(0,W.jsx)(u().sA,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v().A,{isMobile:!1,title:p,caption:g,type:"toggle",isOn:!l,onToggle:c}),(0,W.jsx)(J,{show:!1===l})]})}function J({show:e}={show:!1}){const t=(0,B().IS)((e=>({titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:e.text.primary,height:18},divTitleStyle:{color:e.text.secondary,display:"flex",background:e.gray.background.secondaryTranslucent,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:e.gray.background.secondaryTranslucent},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,W.jsx)("div",{style:t.divStyle,children:(0,W.jsxs)("div",{style:t.divTitleStyle,children:[(0,W.jsx)(L().A,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,W.jsx)(u().sA,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:"Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting “Open links in desktop app” is turned off in your browser."})}),(0,W.jsx)("div",{children:(0,W.jsx)("div",{style:{display:"flex"},children:(0,W.jsx)("div",{style:t.titleStyle,children:(0,W.jsx)(Z,{})})})})]})}):null}function Z(){const e=(0,a().v3)();return(0,W.jsx)(N().N,{href:(0,q().A)(window.location.href),external:!0,onClick:()=>{V().mu(e)},children:(0,W.jsx)(R().A,{size:"lg",children:(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function X(){return(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function ee(){const e=void 0!==(0,r().K8)((()=>{var e;return null===(e=d().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]);let t=(0,W.jsx)(X,{}),s=(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return e&&(t=(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),s=(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,W.jsx)(v().A,{isMobile:!1,title:t,caption:s,type:"custom",customButton:(0,W.jsx)(Z,{})})}function te(){const{navigate:e}=(0,n.useContext)(D().E),t=(0,a().v3)(),{isElectron:s,isMac:i}=(0,a().Y0)(),o=(0,r().O$)(z().A),d=(0,W.jsx)(X,{}),l=(0,r().K8)((()=>K().A.state.highlightedSetting===K().r.OpenInDesktopApp),[]),c=(0,G().E)();if(s)return(0,W.jsx)(ee,{});const p=i?"macOS":"Windows";return(0,W.jsx)(v().A,{isMobile:!1,title:d,caption:(0,W.jsx)(u().sA,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:(...s)=>(0,W.jsx)(y().A,{external:!0,onClick:s=>{c.current&&(e({environment:t,url:c.current,openInNew:"tab"}),s.stopPropagation())},children:s}),platform:p}}),type:"toggle",isOn:"always"===o,onToggle:()=>{const e="always"===o?"never":"always";z().A.setState(e),"always"===e&&(0,F().e)({url:(0,q().P)(window.location.href),environment:t}),V().kF(t,{toggled_to:"always"===e?"on":"off"})},shouldHighlight:l})}function se(){const{isElectron:e,isMac:t}=(0,a().Y0)(),s=(0,r().K8)((()=>{var e;return null===(e=d().A.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),o=(0,n.useCallback)((()=>{const e=!s;i().Zq.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,W.jsx)(u().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),c=(0,W.jsx)(u().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:"When opening links in the desktop app, close “Redirecting to your Notion app...” browser tabs."});return(0,W.jsx)(v().A,{isMobile:!1,title:l,caption:c,type:"toggle",isOn:s,onToggle:o})}var ne=()=>s(563253),ie=()=>s(993342);const oe=(0,k()._h)(new(k().O2)("experimentSettings",(()=>Promise.all([s.e(23930),s.e(7717)]).then(s.bind(s,45135)))),(e=>e.ExperimentSettingsSection));function ae({isPhone:e,isMobileNative:t,isAndroid:s,showOfflineSettings:n,passwordRequestStore:i,userEmailDomainSettings:a,billingData:r,accountSettings:d}){const l=t&&(0,c().et)(r),u=(0,j().l5)(),g=!(e&&(0,I().T)("supportsNativeHome")),S=t;return[{key:"password",renderSettingsItem:()=>(0,W.jsx)(ce,{passwordRequestStore:i,billingData:r})},o().default.checkGate({gateName:"hide_passkey_setting_for_old_android"})?void 0:{key:"passkeys",renderSettingsItem:()=>(0,W.jsx)(b().A,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})},{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ue,{isMobile:!0})},S?{key:"open-external-links",renderSettingsItem:()=>(0,W.jsx)(pe,{})}:void 0,g?{key:"page-on-app-start",renderSettingsItem:()=>(0,W.jsx)(ie().A,{isMobile:!0})}:void 0,l?{key:"subscription",renderSettingsItem:()=>(0,W.jsx)(A().L,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,W.jsx)(w().A,{emailDomainSettings:a.settings})},{key:"calendar",renderSettingsItem:()=>(0,W.jsx)(m().A,{})},(0,j().JW)(t,s)?{key:"android-language",renderSettingsItem:()=>(0,W.jsx)(f().J,{})}:void 0,u?{key:"experiments",renderSettingsItem:()=>(0,W.jsx)(oe,{})}:void 0,n&&t?{key:"offline",renderSettingsItem:()=>(0,W.jsx)(C().ym,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,W.jsx)(h().A,{userEmailDomainSettings:a})},{key:"spaceInfo",renderSettingsItem:()=>(0,W.jsx)(re,{})}].filter(p().O9)}function re(){const e=(0,r().O$)(_().AppStoreSidebarSpaceStore);return e?(0,W.jsx)(S().K,{spaceStore:e,showDomain:!0}):null}function de(){return[{key:"appearance",renderSettingsItem:()=>(0,W.jsx)(ue,{isMobile:!1})}]}function le(e){var t,s;const{environment:n}=e,{isElectron:i,isMac:o}=n.device,a=(0,r().O$)(d().A),l=a.isQuickSearchSupported,c=Boolean(null===(t=a.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),u=a.isMenuBarIconSupported,g=a.isNewTabSearchSupported,m=void 0!==(null===(s=a.preferences)||void 0===s?void 0:s.isZenModeEnabled),h=i&&l,f=i&&m,S=i&&l&&c,y=i&&o&&u&&c;return[i&&g?{key:"page-on-tab-start",renderSettingsItem:()=>(0,W.jsx)(ge,{})}:void 0,...$(e),h?{key:"quick-search-enabled",renderSettingsItem:()=>(0,W.jsx)(me,{})}:void 0,S?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,W.jsx)(fe,{})}:void 0,S?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,W.jsx)(Se,{})}:void 0,y?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,W.jsx)(ye,{})}:void 0,f?{key:"zen-mode-enabled",renderSettingsItem:()=>(0,W.jsx)(he,{})}:void 0].filter(p().O9)}function ce({billingData:e,passwordRequestStore:t}){const s=(0,c().eh)(e,"student"),n=(0,r().K8)((()=>{var e;return(null===(e=_().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:i,canConfigurePassword:o,isSamlEnforced:a,mfaStatus:d,error:u,ready:p}=(0,r().K8)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return u?(0,W.jsx)(x().A,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:n,onReloadSettings:()=>t.refresh(),isError:!0}):p?(0,W.jsx)(x().A,{hasPassword:i,hasPasswordActions:o,samlEnforced:a,mfaStatus:d,isEducationPlan:s,email:n,onReloadSettings:()=>t.refresh(),isError:!1}):(0,W.jsx)(l().k,{})}function ue({isMobile:e}){const t=(0,a().v3)(),s=(0,r().K8)((()=>g().lv(t)),[t]);return(0,W.jsx)(v().A,{isMobile:e,title:(0,W.jsx)(u().sA,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,W.jsx)(u().sA,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:s,options:[{key:"system",label:(0,W.jsx)(u().sA,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,W.jsx)(u().sA,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,W.jsx)(u().sA,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{g().C5(e)}})}function pe(){const e=(0,r().K8)((()=>T().A.state??"external"),[]);return(0,W.jsx)(v().A,{isMobile:!0,title:(0,W.jsx)(u().sA,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,W.jsx)(u().sA,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,W.jsx)(u().sA,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,W.jsx)(u().sA,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{T().A.setState(e)}})}function ge(){const e=(0,r().K8)((()=>{var e;const t=d().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}),[]),t=(0,n.useCallback)((()=>{const t=!e;i().Zq.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,W.jsx)(u().sA,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),o=(0,W.jsx)(u().sA,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:"Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your “Default page” settings. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,W.jsx)(y().A,{external:!0,href:(0,M().x)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:o,isOn:e,onToggle:t})}function me(){const e=(0,r().K8)((()=>{var e;const t=d().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}),[]),t=(0,n.useCallback)((()=>{const t=!e;i().Zq.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,W.jsx)(u().sA,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),o=(0,W.jsx)(u().sA,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn’t active."});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:o,isOn:e,onToggle:t})}function he(){const e=(0,r().K8)((()=>{var e;const t=d().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isZenModeEnabled)}),[]),t=(0,n.useCallback)((()=>{const t=!e;i().Zq.setPreference("isZenModeEnabled",t)}),[e]),s=(0,W.jsx)(u().sA,{id:"desktopZenMode.toggle.title",defaultMessage:"Auto-hide tab bar"}),o=(0,W.jsx)(u().sA,{id:"desktopZenMode.toggle.caption",defaultMessage:"Hide the tab bar when typing in the editor for a clean, focused writing experience."});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:o,isOn:e,onToggle:t})}function fe(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,r().K8)((()=>{const e=d().A.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,a().Y0)(),o=(0,n.useCallback)((e=>{i().Zq.setPreference("quickSearchShortcut",e)}),[]),l=(0,W.jsx)(u().sA,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),c=(0,W.jsx)(u().sA,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,W.jsx)(v().A,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ne().np,{shortcut:e,onChange:o,conflictingShortcuts:[t].filter(p().O9),isMac:s})})})}function Se(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,r().K8)((()=>{const e=d().A.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,n.useCallback)((e=>{i().Zq.setPreference("notionAiShortcut",e)}),[]),{isMac:o}=(0,a().Y0)(),l=(0,W.jsx)(u().sA,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),c=(0,W.jsx)(u().sA,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,W.jsx)(v().A,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,W.jsx)("div",{children:(0,W.jsx)(ne().np,{shortcut:e,onChange:s,conflictingShortcuts:[t].filter(p().O9),isMac:o})})})}function ye(){const e=(0,r().K8)((()=>{var e;const t=d().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}),[]),t=(0,n.useCallback)((()=>{i().Zq.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,W.jsx)(u().sA,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),o=(0,W.jsx)(u().sA,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,W.jsx)(v().A,{isMobile:!1,type:"toggle",title:s,caption:o,isOn:e,onToggle:t})}},442672:(e,t,s)=>{s.d(t,{u:()=>r});s(581454);var n=()=>s(690825),i=s(296540),o=()=>s(56366),a=s(474848);function r(e){const t=i.useRef(null),{rows:s=[],hasMore:r}=(0,o().O$)(e.listSource.rowsStore),d=(0,n().Te)({count:s.length,getScrollElement:()=>t.current,estimateSize:t=>e.estimateSize(s[t],t),overscan:10}),l=d.getVirtualItems();return(0,i.useEffect)((()=>{!async function(){const t=l[l.length-1];r&&(null==t?void 0:t.index)>=s.length-1&&await e.listSource.loadMore()}()}),[e.listSource,l,s.length,r]),(0,a.jsx)("div",{ref:t,style:{overflow:"auto",...e.style},children:(0,a.jsx)("div",{style:{height:`${d.getTotalSize()}px`,width:"100%",position:"relative"},children:l.map((t=>(0,a.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:e.renderRow(s[t.index],t.index)},t.key.toString())))})})}},448835:(e,t,s)=>{s.d(t,{Pz:()=>d,bG:()=>o,lI:()=>a,of:()=>i,ym:()=>r});var n=()=>s(645873);const i=new(n().O2)("offlineSettings",(()=>Promise.all([s.e(4422),s.e(4330),s.e(3551)]).then(s.bind(s,991165)))),o=(0,n()._h)(i,(e=>e.OfflineSettings)),a=(0,n()._h)(i,(e=>e.OfflineSettingsMobile)),r=(0,n()._h)(i,(e=>e.MobileOfflineSettingsSection)),d=(0,n()._h)(i,(e=>e.OfflineModeDebugSettings))},455215:(e,t,s)=>{s.d(t,{A:()=>j});s(581454);var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(631524),d=()=>s(75756),l=()=>s(839816),c=()=>s(69708),u=()=>s(204077),p=()=>s(38337),g=()=>s(722872),m=()=>s(438754),h=()=>s(760217),f=()=>s(406699),S=()=>s(404277),y=()=>s(939740),b=()=>s(89924),x=()=>s(581369),v=()=>s(125565),A=s(474848);function w({hasDismissButton:e,onDismiss:t}){const s=(0,i().v3)(),o=(0,a().DP)(),h=(0,c().tz)(),[f,x]=(0,n.useState)(!1);(0,n.useEffect)((()=>()=>{e||f&&u().wB()}),[h,f,e]);const w=[{key:"trackingTypes",render:e=>(0,A.jsx)(b().A,{...e,topBorder:0!==e.index}),items:l().dc.map((e=>({key:e,render:t=>(0,A.jsx)(M,{menuListItemProps:t,trackingType:e,setShowReloadOnMenuClose:x,isNativeiOSApp:s.device.isMobileNative&&s.device.isIOS}),action:()=>u().Ef(s,e)})))}];return(0,A.jsxs)(S().A,{className:p().Qm5,menuType:g().gu.Popup,width:260,children:[(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",paddingTop:e?4:0},children:e?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",paddingInlineStart:14},children:(0,A.jsx)("b",{children:(0,A.jsx)(c().sA,{...d().LS.customizeCookiesHeader})})}),(0,A.jsx)(r().p,{style:{float:"inline-end",marginInlineStart:-8,paddingInlineStart:8,paddingInlineEnd:8,color:o.blue.text.accentPrimary},onClick:()=>{u().gz(s,m().A.getPermission()),t&&t()},children:(0,A.jsx)(c().sA,{...d().LS.cookieDismissButtonLabel})})]}):void 0}),(0,A.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,sections:w})]})}function M(e){const{menuListItemProps:t,trackingType:s,setShowReloadOnMenuClose:n,isNativeiOSApp:r}=e,{title:l,caption:p,subtitle:g}=(0,d().ID)(s,r),[{permission:f}]=(0,o().$y)(m().A),S=(0,a().DP)(),y=(0,i().v3)();return(0,A.jsx)(h().A,{...t,title:(0,A.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,A.jsx)("div",{style:{marginInlineEnd:0},children:(0,A.jsx)(c().sA,{...l})})}),caption:(0,A.jsxs)("div",{children:[g?(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:{color:S.errorText},children:(0,A.jsx)(c().sA,{...g})})}):void 0,(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:{color:S.text.secondary},children:(0,A.jsx)(c().sA,{...p})})})]}),shouldWrapCaption:!0,right:(0,A.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"},children:(0,A.jsx)(x().A,{on:f[s],disabled:"necessary"===s,onClick:()=>{n(!0),u().Ef(y,s)}})})})}const j=function({renderOrigin:e,hasDismissButton:t,onDismiss:s}){return(0,A.jsx)(f().A,{popupType:f().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",renderOrigin:e,render:()=>(0,A.jsx)(w,{hasDismissButton:t,onDismiss:s})})}},461857:(e,t,s)=>{s.d(t,{q:()=>o});s(898992),s(672577);var n=()=>s(559506),i=()=>s(775191);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(720665).m1?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await n().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await n().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,i=s.split("-").join(""),o=await n().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:i}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,i=await n().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===i.type)return{status:"match"};if("incorrect_password"===(null===(t=i.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw i}async disableMFA(){const e=await n().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:i}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:i}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,i;const{mfaSettingId:o,friendlyName:a}=e,r=await n().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:a}});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(i=r.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await n().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await n().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:i}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,i,o,a;const r=await n().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(i=r.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:i}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await n().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await n().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await n().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await n().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,a=await i().Go({options:s});return a?await i().d6({environment:e,attemptId:o,attestation:a}):{created:!1}}async renamePasskeySetting(e){const t=await n().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await n().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},469968:(e,t,s)=>{s.d(t,{w:()=>g,x:()=>p});s(296540);var n=()=>s(484714),i=()=>s(56366),o=()=>s(401497),a=()=>s(701763),r=()=>s(646736),d=()=>s(765957),l=()=>s(946144),c=()=>s(201651),u=s(474848);const p=160;function g({userId:e,membershipType:t,spaceStore:s}){const g=(0,o().IS)((e=>({button:{maxWidth:p}})),[]),m=(0,i().O$)(d().AppStoreCurrentUserSettingsStore),h=(0,r().I_)(),f=(0,i().K8)((()=>null==h?void 0:h.getModel()),[h]),S=(0,n().v3)();return f&&m?(0,u.jsx)("div",{children:(0,u.jsx)(c().VI,{currentSpaceUser:f,targetUserId:e,currentType:t,isInvite:!1,buttonStyle:g.button,isMenuItem:!1,from:"spaceSettings",upgradeFrom:"space_permission_item",onClick:()=>{a().jR(S,{from:"member",button_name:"open_role"})},onChange:async n=>{"none"===n&&e!==f.getUserId()?await(0,l().Vr)({userId:e,currentMembershipType:t,spaceStore:s,environment:S,userSettingStore:m}):await l().JZ({environment:S,userId:e,newMembershipType:n,currentUserSettingsStore:m,spaceStore:s})}})}):null}},480822:(e,t,s)=>{s.d(t,{x:()=>m});s(296540);var n=()=>s(401497),i=()=>s(699143),o=()=>s(97294),a=()=>s(631524),r=()=>s(493552),d=()=>s(246760),l=()=>s(69708),c=()=>s(460292),u=()=>s(859428),p=()=>s(21140),g=s(474848);function m({quantityOfPaidSeats:e,quantityOfSpaceMembers:t,nextBillingDate:s}){const i=(0,n().IS)((e=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${e.border.secondary}`,borderRadius:6}})),[]),o=e-t,a=o<0?(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you’ll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(o),seats:e}}):o>0?(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you’ve already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:o}}):(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,g.jsxs)("div",{style:i.container,children:[(0,g.jsx)(h,{title:(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:e}),(0,g.jsx)(h,{title:(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:a,body:(0,g.jsxs)(p().Ye,{alignItems:"center",gap:4,children:[(0,g.jsx)("span",{children:t}),o<0?(0,g.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):o>0?(0,g.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,g.jsx)(h,{customStyles:{borderInlineEnd:"none"},title:(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,g.jsx)(l().sA,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:s})]})}function h({title:e,titleTooltipContent:t,body:s,customStyles:p}){const m=(0,n().IS)((e=>({container:{padding:16,borderInlineEnd:`1px solid ${e.border.secondary}`,...p},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[p]);return(0,g.jsxs)("div",{style:m.container,children:[(0,g.jsxs)(i().Y1,{direction:"horizontal",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,g.jsx)(r().D,{styleKey:"Body/Regular",colorVariant:"secondary",children:e}),(0,g.jsx)(u().A,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,g.jsxs)(i().Y1,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[t,(0,g.jsx)(o().N,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,g.jsx)(r().D,{colorVariant:"inverseSecondary",children:(0,g.jsx)(l().sA,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,g.jsx)(a().p,{...e,style:m.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,g.jsx)(c().Q,{iconGroup:d().G,variantName:"small",colorVariant:"tertiary"})})})]}),(0,g.jsx)(r().D,{styleKey:"Title-sm/Medium",children:s})]})}},508490:(e,t,s)=>{s.d(t,{c:()=>c});s(296540);var n=()=>s(484714),i=()=>s(401497),o=()=>s(69708),a=()=>s(966505),r=()=>s(404141),d=()=>s(179030),l=s(474848);function c(e){const{icon:t,title:s,deeplinkTab:c}=e,u=(0,n().v3)(),p=(0,i().IS)((()=>({cardContainer:{marginTop:20,marginBottom:20}})),[]);return(0,l.jsx)("div",{style:p.cardContainer,children:(0,l.jsx)(d().l,{display:"inline-compact",tint:"gray",staticIcon:t,label:s,actions:[{label:(0,l.jsx)(o().sA,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"}),onClick:()=>function(e,t){a().Gq(t,{source_tab:r().A.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),r().A.setState({...r().A.state,...e})}(c,u)}]})})}},526713:(e,t,s)=>{s.d(t,{o:()=>i});var n=()=>s(711059);function i(e){const t=[4,9,0];return(0,n().isLessThanVersion)(e,t)}},537296:(e,t,s)=>{s.d(t,{U:()=>c});s(581454);var n=s(296540),i=()=>s(484714),o=()=>s(681873),a=()=>s(722872),r=()=>s(141966),d=()=>s(802790),l=s(474848);function c(e){const{items:t}=e,{isMobile:s}=(0,i().Y0)(),c=(0,a().Tf)(),u=(0,r().Hu)(s,c);return(0,l.jsx)(l.Fragment,{children:(0,o().G)(t.map((({key:e,renderSettingsItem:t})=>(0,l.jsx)(n.Fragment,{children:t()},e))),(e=>(0,l.jsx)(d().A,{size:u,isHidden:!s},e)))})}},538669:(e,t,s)=>{s.d(t,{G:()=>a,N:()=>o});var n=()=>s(534177),i=()=>s(478525);class o extends(()=>s(757695))().Store{getInitialState(){return{step:"smsUninitialized"}}}class a extends(()=>s(658921))()._{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,n=this.checkStep("smsVerifyCode");n&&(this.store.setState({...n,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:i().xc.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:i().xc.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:i().xc.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:i().xc.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,n().HB)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:a,state:r}=o;switch(a.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:r.country,phoneNumber:r.phoneNumber}),s();break;case"error":this.store.setState({...r,step:"smsVerifyCode",error:i().xc.unexpectedError});break;case"incorrect":this.store.setState({...r,step:"smsVerifyCode",error:i().xc.smsIncorrectCode});break;default:return(0,n().HB)(a.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:i().xc.unexpectedError});break;default:return(0,n().HB)(t.status)}}}},549200:(e,t,s)=>{s.d(t,{b:()=>l});var n=()=>s(617871),i=()=>s(165358),o=()=>s(229833),a=()=>s(763824),r=()=>s(534177),d=()=>s(559506);async function l(e){const{bots:t,spaceId:s,environment:l}=e;await(0,a().lX)(t,10,(async e=>{const{botId:t,importContactType:a}=e,c=function(e){switch(e){case"google":return n().E8;case"microsoft":return n().LF;case"slack":return n().zG;default:(0,r().HB)(e)}}(a);await d().callApi({eventName:"loadContacts",environment:l,data:{botId:t,spaceId:s,integrationId:c,importContactType:a}}).catch((e=>{i().log({level:"error",from:"loadContactsForBots",type:"loadContacts",error:(0,o().convertErrorToLog)(e)})}))}))}},560686:(e,t,s)=>{s.d(t,{ZK:()=>i,aC:()=>o,lO:()=>a});var n=()=>s(496603);function i(e){if(n().sb(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=o(e),s=a(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function o(e){return e.match(/[a-z]/i)}function a(e){return e.match(/\d/)}},570918:(e,t,s)=>{s.d(t,{w7:()=>cs,Qw:()=>Wt});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(672577),s(581454);var n=s(296540),i=()=>s(242422),o=()=>s(484714),a=()=>s(56366),r=()=>s(401497),d=()=>s(718827),l=()=>s(252291),c=()=>s(396896),u=()=>s(98126),p=()=>s(406094),g=()=>s(631524),m=()=>s(160432),h=()=>s(187174),f=()=>s(911259),S=()=>s(126617),y=()=>s(35588),b=()=>s(344417),x=()=>s(888867),v=()=>s(922189),A=()=>s(252953),w=()=>s(340498),M=()=>s(792071),j=()=>s(386164),k=()=>s(437607),C=()=>s(848538),I=()=>s(798880),_=()=>s(322769),T=()=>s(762433),P=()=>s(985529),D=()=>s(69708),B=()=>s(100622),N=()=>s(778078),R=()=>s(496603),E=()=>s(534177),O=()=>s(284371),V=()=>s(701763),U=()=>s(559506),F=()=>s(901389),L=()=>s(370872),q=()=>s(496414),G=()=>s(205224),z=()=>s(601866),K=()=>s(231297),W=()=>s(760217),H=()=>s(406699),$=()=>s(802790),Y=()=>s(285790),Q=()=>s(623580),J=()=>s(404277),Z=()=>s(939740),X=()=>s(179030),ee=()=>s(89924),te=()=>s(859428),se=()=>s(125565),ne=()=>s(668250),ie=()=>s(698449),oe=()=>s(605402),ae=()=>s(265665),re=()=>s(187820),de=()=>s(75491),le=s(474848);function ce({spaceStore:e,groupIds:t,onGroupClick:s}){const n=(0,D().tz)(),i=(0,r().IS)((e=>({title:{color:0===t.length?e.text.tertiary:void 0},untitled:{color:e.text.tertiary}})),[t]),o=(0,a().K8)((()=>t.map((t=>({key:t,render:s=>{const o=oe().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===t));if(!o)return null;const a=ie().Pf({intl:n,groupName:o.group.name});return(0,le.jsx)(W().A,{icon:(0,le.jsx)(re().B6,{disabled:!0,icon:o.group.icon&&e?{pointer:e.pointer,icon:o.group.icon}:void 0,size:18,isEmptyPage:!1,title:a,defaultIcon:(0,le.jsx)(l().I,{icon:ne().R,size:"sm",colorVariant:"secondary"})}),title:(0,le.jsx)(se().A,{style:o.group.name?void 0:i.untitled,children:(0,le.jsx)(ae().j,{style:{maxWidth:200},children:a})}),caption:(0,le.jsx)(D().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:o.memberCount}}),inline:!0,...s})},action:s})))),[t,n,s,e,i.untitled]);return(0,le.jsx)(de().ED,{title:(0,le.jsx)(se().A,{style:i.title,children:t&&0!==t.length?(0,le.jsx)(D().sA,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:t.length}}):(0,le.jsx)(D().sA,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:o,disabled:!t||0===t.length})}var ue=()=>s(592791),pe=()=>s(719147),ge=()=>s(368401),me=()=>s(699143),he=()=>s(733816),fe=()=>s(718191),Se=()=>s(765957),ye=()=>s(132813),be=()=>s(8178),xe=()=>s(638743),ve=()=>s(508490),Ae=()=>s(709438),we=()=>s(317182),Me=()=>s(794198),je=()=>s(869190),ke=()=>s(604995),Ce=()=>s(842599),Ie=()=>s(416504),_e=()=>s(644484),Te=()=>s(854705),Pe=()=>s(158115),De=()=>s(746970),Be=()=>s(471995),Ne=()=>s(870092),Re=()=>s(994006),Ee=()=>s(453697),Oe=()=>s(312788),Ve=()=>s(584262),Ue=()=>s(433847),Fe=()=>s(179034),Le=()=>s(492414),qe=()=>s(148832),Ge=()=>s(296798),ze=()=>s(16006);function Ke(e){const{navigate:t}=(0,n.useContext)(Oe().E),{pageAndRole:s,environment:i,intl:o}=e,d=(0,r().IS)((e=>({title:{marginInlineStart:2},role:{marginInlineStart:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,a().K8)((()=>new(qe().B)(i,{table:Fe().ev,id:s.id})),[i,s.id]),c=(0,a().K8)((()=>{var e;return null===(e=l.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:l.getRecordModel})}),[l]),u=(0,a().K8)((()=>(0,re().Te)(l)),[l]),p=(0,a().K8)((()=>(0,Le().Ay)({store:l,pageVisitSource:Ve().y8.LinkInPage})),[l]);return(0,le.jsxs)(Ge().A,{style:d.linkContainer,onClick:()=>{t({environment:i,url:p,openInNew:"tab"})},children:[(0,le.jsx)(re().B6,{icon:c,iconRecordCategory:u,size:16,isEmptyPage:!1,disabled:!0}),(0,le.jsx)("b",{children:(0,le.jsx)(ze().A,{style:d.title,store:l})}),(0,le.jsx)(se().A,{style:d.role,isSecondaryColor:!0,children:`(${o.formatMessage((0,Ue().an)(s.role,Fe().ev)).toLocaleLowerCase()})`})]})}function We(e){const{store:t,request:s}=e,{forActor:i,accessRequest:d,createdByActorsWithReason:l}=s,c=(0,o().v3)(),u=(0,r().IS)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginInlineStart:10,marginInlineEnd:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.text.inverseSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginInlineStart:38,marginTop:8}})),[]),m=(0,D().tz)(),h=(0,a().K8)((()=>i.__IM_SORRY__getValue()),[i]),f=(0,a().K8)((()=>(0,R().hS)(l.map((({actor:e})=>e)),(e=>e.id))),[l]),S=(0,a().K8)((()=>d.getType()),[d]),y=(0,a().K8)((()=>s.createdByActorsWithReason.filter((({reason:e})=>Boolean(e))).map((e=>`${e.actor.getDisplayName(m)} · ${e.reason}`))),[s,m]),b=(0,a().K8)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),x=(0,a().K8)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,Ce().qh)(i.email),s=e&&(0,Ce().zN)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,i,t]),v=(0,a().K8)((()=>d.created_time),[d]),A=(0,n.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await De().aV({environment:c,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?Be().D6({label:(0,le.jsx)(D().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:i.email}})}):Be().D6({label:(0,le.jsx)(D().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:i.email}})})}else if(d.isSpaceMembershipRequest()){(await De().p4({environment:c,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?Be().D6({label:(0,le.jsx)(D().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:i.email}})}):Be().D6({label:(0,le.jsx)(D().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:i.email}})})}}),[d,c,i,t]),w=(0,n.useCallback)((()=>{d.isGuestInviteRequest()?De().aV({environment:c,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&De().p4({environment:c,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,c,t]);if(!(s&&i&&h&&l.length))return null;const M=ke().KQ(v,(0,Ie().P)()),j=(0,je().ZF)({value:M,date_format:"relative",userTimeZone:(0,Ie().P)(),intl:m,allowRelativeDates:!0}),k=y.length>0||(0,E().O9)(b);return(0,le.jsxs)("div",{style:{width:"100%"},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,le.jsx)(Qe,{forActor:h,type:S}),(0,le.jsxs)("div",{style:u.requestMetadata,children:[(0,le.jsx)(Ye,{type:S,forActor:h}),(0,le.jsxs)(se().A,{isSmall:!0,children:[(0,le.jsx)(te().A,{renderTooltip:()=>(0,le.jsxs)("div",{style:u.tooltip,children:[(0,le.jsx)(se().A,{style:u.tooltipHeader,children:(0,le.jsx)(D().sA,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),f.map((e=>(0,le.jsx)(Ze,{actor:e},e.id)))]}),render:e=>(0,le.jsx)("span",{...e,children:(0,le.jsx)(Je,{request:s,createdByActors:f})})})," · ",j]})]})]}),(0,le.jsxs)("div",{style:u.actionButtons,children:[(0,le.jsx)(g().p,{colorPalette:"gray",onClick:w,children:(0,le.jsx)(D().sA,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,le.jsx)(te().A,{render:e=>(0,le.jsx)(p().A,{size:"lg",colorPalette:"blue",onClick:A,...e,children:(0,le.jsx)(D().sA,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,le.jsx)("div",{style:{width:300},children:(0,le.jsx)(D().sA,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:x}})}),disableTooltip:!x,textWrap:!0,placement:"bottom"})]})]}),k?(0,le.jsxs)("div",{style:u.requestBody,children:[b?(0,le.jsx)(Ke,{pageAndRole:b,environment:c,intl:m}):void 0,y.length>0?(0,le.jsx)($e,{reasonMessages:y}):void 0]}):void 0]})}function He(e){return(0,le.jsx)("b",{children:e})}function $e(e){const{reasonMessages:t}=e,[s,i]=(0,n.useState)(!1),o=(0,r().IS)((e=>({viewReasonsToggle:{paddingInlineStart:2,paddingInlineEnd:2,borderRadius:2,display:"inline-flex",alignItems:"center",gap:2},reasonMessageBody:{marginTop:2}})),[]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(d().Ay,{style:o.viewReasonsToggle,onClick:()=>i(!s),children:[(0,le.jsx)(se().A,{isSmall:!0,children:(0,le.jsx)(D().sA,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,le.jsx)(Me().I,{icon:Te().arrowChevronSingleDownFillSmallIcon,size:"xs",colorVariant:"tertiary"}):(0,le.jsx)(Me().I,{icon:Pe().arrowChevronSingleRightFillSmallIcon,size:"xs",colorVariant:"tertiary"})]}),s?(0,le.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,le.jsx)("div",{children:e},t)))}):void 0]})}function Ye(e){const{forActor:t,type:s}=e,n=(0,r().IS)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:O().Wy.semibold}})),[]),i="guest_invite_request"===s?(0,le.jsx)(D().sA,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,le.jsx)("span",{style:n.semibold,children:t.email})}}):(0,le.jsx)(D().sA,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,le.jsx)("span",{style:n.semibold,children:t.email})}});return(0,le.jsx)("div",{style:n.title,children:(0,le.jsx)(se().A,{className:"notranslate",children:i})})}function Qe(e){const{type:t,forActor:s}=e,n=(0,r().IS)((e=>({avatarWrapper:{borderRadius:"100%",background:e.palette.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.palette.gray[500]}})),[]);return"guest_invite_request"===t?(0,le.jsx)("div",{style:n.avatarWrapper,children:(0,_e().g)(n.addPersonIcon)}):(0,le.jsx)(Ee().A,{userValue:s,size:28,borderStyle:"dashed"})}function Je(e){const{createdByActors:t,request:s}=e,n=(0,D().tz)(),i=(0,a().K8)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),o=(0,a().K8)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),r=(0,a().K8)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),d=(0,a().K8)((()=>{var e;return null===(e=i[0])||void 0===e?void 0:e.getDisplayName(n)}),[i,n]),l=i.length!==t.length;return 1===t.length?l?(0,le.jsx)(D().sA,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,le.jsx)(D().sA,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:o,b:He}}):l?(0,le.jsx)(D().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:d,numberOfOtherActors:i.length,b:He}}):(0,le.jsx)(D().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:o,secondActorName:r,numberOfOtherActors:t.length-1}})}function Ze({actor:e}){const t=(0,o().v3)(),s=(0,r().IS)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginInlineStart:5}})),[]),n=(0,a().K8)((()=>e.email),[e]),i=new(Ne().L)(t,e.pointer);return(0,le.jsxs)("div",{style:s.component,children:[(0,le.jsx)(Re().A,{avatarSize:18,userStore:i}),(0,le.jsx)("div",{style:s.email,children:n})]},e.id)}function Xe(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:n}=e,i=(0,a().K8)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),o=(0,r().IS)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:6,padding:40,color:e.text.secondary,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4}})),[]),d={key:"request",header:void 0,style:o.requestColumn};return 0===i.length?(0,le.jsxs)("div",{style:o.zeroStateContainer,children:[(0,le.jsx)(l().I,{icon:he().o,colorPalette:"gray",colorVariant:"secondary"}),(0,le.jsx)(D().sA,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,le.jsx)(we().A,{hideHeader:!0,columns:[d],rows:i.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,le.jsx)(et,{request:e,lastOpenedRequestCenterTime:n,spaceStore:t},e.accessRequest.id)]})))})}function et({request:e,lastOpenedRequestCenterTime:t,spaceStore:s}){const n=(0,a().K8)((()=>t<e.accessRequest.created_time),[t,e.accessRequest]);return(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n?(0,le.jsx)("div",{style:{marginInlineStart:-18,marginInlineEnd:10},children:(0,le.jsx)(Ae().m,{size:8})}):void 0,(0,le.jsx)(We,{store:s,request:e})]},e.accessRequest.id)}function tt(e){const{spaceStore:t,accessRequestRenderValues:s}=e,i=(0,o().v3)(),[d,l]=(0,n.useState)(Date.now()),c=(0,a().uB)(void 0,ye().A),{organizationOverrides:u}=(0,xe().n)({spaceId:t.id}),p=(0,a().K8)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),g=(0,a().K8)((()=>t.canAdmin()),[t]),m=(0,r().IS)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.text.secondary},settingHeader:{fontSize:16,fontWeight:O().Wy.medium},requestCount:{color:e.text.tertiary}})),[]);(0,n.useEffect)((()=>{const{sidebarSpaceViewStore:e}=Se().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&l(t),K().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:i,canUndo:!0,perform:t=>{K().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const h=(0,n.useCallback)((()=>g||!c?null:(0,le.jsx)(me().Y1,{gap:12,style:{marginBottom:12},children:(0,le.jsx)(fe().B,{readOnly:!0,spaceStore:t,securitySettingsStore:c,organizationOverrides:u})})),[g,c,t,u]);return s?(0,le.jsxs)(le.Fragment,{children:[g?(0,le.jsx)(ve().c,{icon:he().o,title:(0,le.jsx)(D().sA,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,le.jsx)("span",{style:{fontWeight:O().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):null,h(),(0,le.jsxs)(be().A,{divider:"none",large:!0,style:m.settingHeader,children:[(0,le.jsx)(D().sA,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,le.jsx)("span",{children:" "}),(0,le.jsx)("span",{style:m.requestCount,children:p>0?p:void 0})]}),(0,le.jsx)(Xe,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:d})]}):(0,le.jsx)("div",{style:m.errorContainer,children:(0,le.jsx)(st,{})})}function st(){return(0,le.jsx)(D().sA,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}var nt=()=>s(140828),it=()=>s(821879),ot=()=>s(792361),at=()=>s(280161),rt=()=>s(201651),dt=()=>s(777967),lt=()=>s(786251),ct=()=>s(480822),ut=()=>s(762286),pt=()=>s(675291),gt=()=>s(125035),mt=()=>s(37625),ht=()=>s(606273),ft=()=>s(347930),St=()=>s(785606),yt=()=>s(47373),bt=()=>s(722872),xt=()=>s(329443),vt=()=>s(232930),At=()=>s(37433),wt=()=>s(637573),Mt=()=>s(240865),jt=()=>s(646736),kt=()=>s(118789),Ct=()=>s(562866),It=()=>s(317025),_t=()=>s(623742),Tt=()=>s(687111),Pt=()=>s(406999),Dt=()=>s(973189),Bt=()=>s(404141),Nt=()=>s(19575),Rt=()=>s(946144),Et=()=>s(970209),Ot=()=>s(324561),Vt=()=>s(329304),Ut=()=>s(134217),Ft=()=>s(803025),Lt=()=>s(334992),qt=()=>s(749240);const Gt={maxWidth:275,borderRadius:30},zt={marginTop:8},Kt={maxWidth:s(469968).x};function Wt(e){const{store:t,currentTab:s,inviteLinkCode:i,guests:o,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,accessRequestRenderValues:d}=e;return(0,n.useEffect)((()=>()=>{ut().A.setState({...ut().A.state,searchQuery:void 0})}),[]),s===Dt().d.Members?(0,le.jsx)(hs,{store:t,inviteLinkCode:i,spacePermissionsSettingsStore:a}):s===Dt().d.Guests?(0,le.jsx)(fs,{store:t,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,guests:o}):s===Dt().d.Groups?(0,le.jsx)(ls,{store:t,spacePermissionsSettingsStore:a}):s===Dt().d.Reprovisioning?(0,le.jsx)(Ht,{store:t}):s===Dt().d.Requests?(0,le.jsx)(tt,{spaceStore:t,accessRequestRenderValues:d}):s===Dt().d.Contacts?(0,le.jsx)(dt().x,{spaceStore:t}):void(0,E().HB)(s)}function Ht({store:e}){const t=(0,r().IS)((()=>({label:{width:"80%"}})),[]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(se().A,{isMultiline:!0,style:t.label,children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,le.jsx)(se().A,{isMultiline:!0,style:t.label,children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,le.jsx)($().A,{size:24,isHidden:!0}),(0,le.jsx)($t,{store:e})]})}function $t({store:e}){const t=(0,o().v3)(),[s,i]=(0,n.useState)([]),[{value:a,status:r}]=(0,h().Yb)((async()=>{const s=await U().callApi({eventName:"getRecoverableSpaceUserContent",environment:t,data:{spaceId:e.id}});if("failed"===s.type)throw F().Qg(s),s;return s.data}),[t,e.id]),d=(null==a?void 0:a.recentSpaceRecoverPages)??[],l=(0,n.useCallback)((async(n,o)=>{const{accept:a}=await F().Gh({message:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!a)return;i([...s,n]);const r=await U().callApi({eventName:"transferSpaceUserContent",environment:t,data:{spaceId:e.id,fromUserId:n,toUserId:o}});"failed"===r.type&&F().Qg(r),i(s.filter((e=>e!==n)))}),[t,e.id,s]),c=(0,n.useCallback)((t=>{const n=[];for(const{userId:i,privatePagesCount:o}of t){if(o<1)continue;const t=Ne().L.createChildStore(e,{table:I().oo,id:i});n.push({key:i,columns:[(0,le.jsx)(Jt,{userStore:t},"Member"),o,s.includes(i)?(0,le.jsx)(Qt,{}):(0,le.jsx)("div",{style:{marginInlineStart:-4},children:(0,le.jsx)(nt().A,{mode:it().C.Button,focused:!1,title:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:e,userIds:s,onChange:([e])=>{l(i,e)}})})]})}return n}),[e,s,l]);return"pending"===r?(0,le.jsx)(Qt,{}):null!=a&&a.recentSpaceRecoverPages?(0,le.jsx)(we().A,{columns:[{key:"user",header:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:c(d)}):null}function Yt(){const e=qt().subscriptionDataStoreInstance.state;return Boolean(e&&Ut().Fq(e))}function Qt(){return(0,le.jsx)(u().A,{style:{marginTop:"calc(50%",marginInlineEnd:"-",marginBottom:"1em)",marginInlineStart:"auto"}})}function Jt({userStore:e,restorationStatus:t}){return(0,le.jsx)(_t().A,{actorStore:e,restorationStatus:t})}function Zt({user:e,userPermissionGroupIds:t}){return(0,C().MN)(e.membershipType)?(0,le.jsx)(mt().Ay,{memberId:e.userId,userPermissionGroupIds:t}):null}function Xt({store:e}){return(0,a().K8)((()=>z().CU(e)),[e])?(0,le.jsx)(se().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,le.jsx)(D().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,le.jsxs)("div",{children:[(0,le.jsx)(se().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,le.jsx)(D().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,le.jsx)(pe().A,{onClick:()=>{Bt().A.setState({...Bt().A.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,le.jsx)(se().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,le.jsx)(D().sA,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,le.jsx)(pe().A,{href:(0,vt().x)("guides.billing"),children:e})}})})]})}function es(e){return Ut().vl(e)&&Yt()}function ts({group:e,user:t,userStore:s,store:n}){const i=(0,D().tz)(),a=(0,o().v3)();return(0,le.jsx)(H().A,{popupType:H().z.Popup,renderOrigin:e=>(0,le.jsx)(Y().A,{...e,icon:S().ellipsisSmallIcon,iconStyle:{height:w().Ev.sm,width:w().Ev.sm},ariaLabel:i.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:i=>{const o=[{key:"convertToMember",render:t=>(0,le.jsx)(W().A,{...t,icon:(0,le.jsx)(l().I,{icon:f().arrowInCircleUpIcon}),title:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===e&&(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:n,parent:i}=e,o=Yt()?"member":"owner";F().ui({message:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{F().zw(),i.close()},items:[{label:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{i.close(),await G().P({environment:s,guestUserStore:n,membershipType:o,store:t,origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:t,userStore:s,parent:i},n,a)},{key:"removeFromWorkspace",render:e=>(0,le.jsx)(W().A,{...e,icon:(0,le.jsx)(l().I,{icon:y()._,colorPalette:"red",colorVariant:"accentPrimary"}),title:(0,le.jsx)("span",{style:{color:B().Tj.red},children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:n,parent:i}=e;F().ui({message:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{F().zw(),i.close()},items:[{label:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{i.close(),await G().D({environment:s,guestUserStore:n,store:t})}}]})}({user:t,userStore:s,parent:i},n,a)}],r=[{key:"team section",render:e=>(0,le.jsx)(ee().A,{...e}),items:o}];return(0,le.jsx)(J().A,{menuType:bt().gu.Popup,children:(0,le.jsx)(Z().Ay,{type:Z().Oh.Vertical,sections:r,initialFocus:void 0,style:{minWidth:265}})})}})}function ss(e){return{width:w().Ev.sm,height:w().Ev.sm,marginInlineEnd:6,flexGrow:0,flexShrink:0,fill:e.icon.secondary}}const ns=(0,D().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function is(){q().m({message:ns.updatingPermissions})}function os(){q().V()}function as({buttonStyle:e,spaceStore:t}){const s=(0,o().v3)(),i=(0,a().K8)((()=>t.canEditMembership()),[t]),r=(0,a().K8)((()=>!i&&!t.getDisableMembershipRequests()&&(0,yt().x3)()),[i,t]),d=(0,n.useMemo)((()=>(0,Pt().nc)()),[]),l=(0,a().K8)((()=>Yt()),[]),c=(0,n.useCallback)((()=>{(0,It().qU)(s)}),[s]);return r?(0,le.jsx)(Ct().cx,{spaceStore:t,analyticsFrom:"space_settings_add_members",origin:(0,le.jsx)(m().A,{colorPalette:"blue",size:"lg",onClick:c,children:(0,le.jsx)(D().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,le.jsx)(ft().H,{disabled:!i,targetStore:t,spaceStore:t,permissionsInviteStore:d,onInviteClick:is,onInviteComplete:os,isSubscribed:l,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e,analyticsFrom:"space_settings_add_members"})}function rs({member:e,store:t}){const s=(0,a().O$)(Se().AppStoreCurrentUserSettingsStore),n=(0,jt().I_)(),i=(0,a().K8)((()=>null==n?void 0:n.getModel()),[n]),r=(0,o().v3)();return i&&s?(0,le.jsx)(rt().VI,{currentSpaceUser:i,targetUserId:e.userId,currentType:e.membershipType,isInvite:!1,isMenuItem:!1,buttonStyle:Kt,from:"spaceSettings",upgradeFrom:"space_permission_item",onClick:()=>{V().jR(r,{from:"member",button_name:"open_role"})},onChange:async n=>{"none"===n&&e.userId!==i.getUserId()?await Rt().Vr({userId:e.userId,currentMembershipType:e.membershipType,spaceStore:t,environment:r,userSettingStore:s}):await Rt().JZ({environment:r,userId:e.userId,newMembershipType:n,currentUserSettingsStore:s,spaceStore:t})}}):null}function ds(e,t,s){const n=s.state.sorts[e];let i;i=!(!n||n.by!==t)&&n.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))}function ls({store:e,spacePermissionsSettingsStore:t}){const s=(0,D().tz)(),i=(0,r().DP)(),d=(0,o().v3)(),l=(0,n.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,t)),[t]),c=(0,n.useCallback)((()=>function(e,t,s){K().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const n=z().np({spaceStore:t,transaction:e});if(n){s.setState({...s.state,editingNameGroupId:n.getGroupId(),groupNameInputValue:""});const e=M().Bj6.fromValue(k().n,n.getValue()),t=[...oe().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],i=(0,N().Ay)(s.state.groupsFilter,t,(e=>e.group.name||""));oe().A.setState({...oe().A.state,permissionGroupsAndMemberCounts:i})}}}),V().UY(e)}(d,e,t)),[d,e,t]),u=(0,a().K8)((()=>t.state.groupsFilter),[t]),p=(0,a().K8)((()=>es(d)),[d]),g=(0,a().K8)((()=>e.canEditMembership()),[e]),h=(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),f=(0,a().K8)((()=>e.isDefined()),[e]),S=(0,a().K8)((()=>0!==(0,xt().Qo)()),[]),y=(0,a().K8)((()=>(0,At().zI)()>0),[]),v=(0,a().K8)((()=>function(e,t){return es(t)&&e.canEditMembership()}(e,d)),[d,e]);return f?(0,le.jsxs)("div",{style:{overflow:"auto"},children:[p?(0,le.jsx)(se().A,{isMultiline:!0,style:{width:"80%"},children:y?(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,le.jsx)(Et().A,{subscriptionTier:"plus",from:"permission_groups",icon:x().s,title:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,le.jsx)($().A,{size:24,isHidden:!0}),(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[p?(0,le.jsx)(te().A,{renderTooltip:()=>!g&&h,render:e=>(0,le.jsx)(m().A,{colorPalette:"blue",size:"lg",onClick:c,disabled:!g,...g?void 0:e,children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):void 0,S?(0,le.jsx)(Q().A,{placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,b().u)(ss(i)),showClearButton:!0,format:Q().C.Small,value:u,style:{...Gt,marginInlineEnd:0},onChange:l,onClick:()=>{V().Z9(d,{current_tab:Dt().d.Groups})}}):void 0]}),S?(0,le.jsx)(at().r,{spaceStore:e,permissionsSettingsStore:t,canEdit:v}):void 0]}):null}function cs({groupIds:e,store:t,spacePermissionsSettingsStore:s}){return(0,le.jsx)(ce,{spaceStore:t,groupIds:e,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(Dt().d.Groups,s)}})}function us({group:e,user:t,userStore:s,store:n}){const i=(0,a().K8)((()=>(0,yt().Qd)()),[]),o=(0,a().K8)((()=>Yt()),[]);return(0,_().QE)(t)?i&&"team_guests"===e?(0,le.jsx)(gt().A,{teamGuest:t}):(0,le.jsx)(ue().V,{store:n,guestPageIds:t.guestPageIds,guestStore:s,isSubscribed:o,hideActionButtons:i}):(0,le.jsx)(rs,{store:n,member:t})}function ps({group:e,spaceMembers:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:r}){const l=(0,o().v3)(),c=(0,a().K8)((()=>i.state.sorts[e]),[e,i]),u={key:"user",header:(0,le.jsxs)(d().Ay,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ds(e,"name",i)},style:{display:"flex",alignItems:"center"},children:[(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),c&&"name"===c.by?(0,le.jsx)(ot().X,{up:c.asc}):void 0]}),style:{width:"45%"}},p={key:"groups",header:(0,le.jsx)(d().Ay,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingInlineStart:8},children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",paddingInlineStart:8},children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},m={key:"access_level",header:(0,le.jsxs)(d().Ay,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ds(e,"role",i)},style:{display:"flex",alignItems:"center",paddingInlineStart:8},children:[(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),c&&"role"===c.by?(0,le.jsx)(ot().X,{up:c.asc}):void 0]}),style:{width:"20%",textAlign:"center"}},f={key:"pages",header:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",paddingInlineStart:8},children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},S={key:"three_dot",header:(0,le.jsx)(d().Ay,{disabled:!0,ignoreLocalHoverState:!0})},y=(0,a().K8)((()=>es(l)&&"team_guests"!==e&&"guests"!==e),[l,e]),b=(0,a().K8)((()=>("team_guests"===e||"guests"===e)&&(0,yt().Qd)()&&s.canEditMembership()),[e,s]),x=(0,a().K8)((()=>(0,At().zI)()>0),[]);let v="members"===e&&x?[u,g,m]:b?[u,f,S]:[u,f];y&&(v=[...v.slice(0,1),p,...v.slice(1)]);const A=(0,a().O$)(r),w=(0,a().K8)((()=>t.map((e=>({member:e,store:Ne().L.createChildStore(s,{table:I().oo,id:e.userId})}))).filter((e=>e.store.isDefined()))),[t,s]),M=(0,a().O$)(Se().AppStoreSidebarSpaceStore),[{value:k}]=(0,h().Yb)((async()=>{if(!M)return;const e=await U().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:l,data:{userIds:w.map((e=>e.member.userId)),spaceId:M.id},headers:(0,j().WS)({cellId:void 0,spaceId:M.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[M,l,w]);return(0,le.jsx)(we().A,{columns:v,rows:w.map((t=>{var o;const{member:a,store:r}=t,d=k&&k[a.userId],l=Array.isArray(A)?null===(o=A.find((e=>e.userId===a.userId)))||void 0===o?void 0:o.restorationStatus:void 0,c=[(0,le.jsx)(n.Fragment,{children:(0,le.jsx)(_t().A,{actorStore:r,restorationStatus:l,spaceRole:a.membershipType,hideRolePill:!0})},"member")];return y&&c.push((0,le.jsx)(n.Fragment,{children:(0,le.jsx)(cs,{store:s,spacePermissionsSettingsStore:i,groupIds:d||[]})},"groups")),"members"===e&&x&&c.push((0,le.jsx)(n.Fragment,{children:(0,le.jsx)(Zt,{user:a,userPermissionGroupIds:new Set(d??[])})},"teams")),c.push((0,le.jsx)(n.Fragment,{children:(0,le.jsx)(us,{store:s,group:e,user:a,userStore:r})},"user-permission")),b&&c.push((0,le.jsx)(n.Fragment,{children:(0,le.jsx)(ts,{group:e,user:a,userStore:r,store:s})},"three-dot")),{key:a.userId,columns:c}}))})}function gs({guests:e,store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i}){const o=(0,D().tz)(),d=(0,r().DP)(),l=(0,n.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(s)),[s]),{teamGuestsFilter:c,limitTeamGuests:u}=(0,a().K8)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=s.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[s]),p=e.filter((e=>e.isTeamGuest)),m=(0,a().K8)((()=>function(e,t,s,n){return t&&t.length>0?(0,N().Ay)(t,e,(e=>{const t=Ne().L.createChildStore(s,{table:I().oo,id:e.userId});return t.isDefined()?t.getSearchName(n):""})):e}(p,c,t,o)),[p,c,t,o]),h=(0,a().K8)((()=>function(e,t,s,n,i){const o=i.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(C().Yr[t.membershipType]-C().Yr[e.membershipType])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:Ne().L.createChildStore(s,{table:I().oo,id:e.userId})}))).sort(((e,t)=>{const s=n.formatMessage(M().Fvx.messages.anonymousPlaceholder),i=e.store.getFullName(n)||s,a=t.store.getFullName(n)||s;return i.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}("team_guests",m,t,o,s)),[m,t,o,s]),f=u?h.slice(0,5):h;return(0,le.jsx)("div",{style:{marginBottom:5},children:(0,le.jsxs)("div",{children:[(0,le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,le.jsx)(Q().A,{placeholder:o.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,b().u)(ss(d)),showClearButton:!0,format:Q().C.Small,value:c,style:Gt,onChange:e=>{s.setState({...s.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,le.jsx)(ps,{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i,group:"team_guests",spaceMembers:f}),h.length>5&&u?(0,le.jsx)(g().p,{colorPalette:"gray",size:"xs",style:zt,onClick:l,children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:h.length-5}})}):void 0]})})}function ms({guests:e,store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i}){const[o,r]=(0,n.useState)(!0),[d,l]=(0,n.useState)(!0),c=(0,Ot()._3)({spaceId:t.id}),{shouldRenderTeamGuests:u,isGuestsWithPrivatePagesDisabled:p}=(0,a().K8)((()=>{const e=t.getSettingsStore(),s=!Boolean(e.getKeyStore("disable_team_guests").getValue()),n=e.getKeyStore("disable_guest_can_create_private_pages").getValue(),i=(0,Tt().H)();return{shouldRenderTeamGuests:s,isGuestsWithPrivatePagesDisabled:n||!i||(0,T().N8)(c)||"free"===t.getSubscriptionTier()}}),[t,c]);return(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,height:"100%"},children:[u?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)("div",{style:{display:"flex"},children:[(0,le.jsx)(ht().f,{open:o,onClick:()=>r(!o),isSidebar:!1,fill:!0,style:{marginInlineStart:-27}}),(0,le.jsxs)("div",{style:{marginInlineStart:3},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,le.jsx)(se().A,{style:{fontSize:15},children:(0,le.jsx)(D().sA,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,le.jsx)("span",{children:" "}),(0,le.jsx)(se().A,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isTeamGuest)).length})]}),(0,le.jsx)(se().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,le.jsx)(D().sA,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they’ve been invited to."})})]})]}),o?(0,le.jsx)(gs,{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i,guests:e}):void 0]}):void 0,(0,le.jsxs)("div",{style:{display:"flex"},children:[(0,le.jsx)(ht().f,{open:d,onClick:()=>l(!d),isSidebar:!1,fill:!0,style:{marginInlineStart:-27}}),(0,le.jsxs)("div",{style:{marginInlineStart:3},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,le.jsx)(se().A,{style:{fontSize:15},children:(0,le.jsx)(D().sA,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,le.jsx)("span",{children:" "}),(0,le.jsx)(se().A,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),p?(0,le.jsx)(se().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,le.jsx)(D().sA,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free and can only access pages they’ve been invited to."})}):(0,le.jsx)(se().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,le.jsx)(D().sA,{id:"spacePermissionSettings.pageGuests.subtitleWithPrivatePages",defaultMessage:"Page guests are free. They can access shared pages and create private pages if they request member access."})})]})]}),d?(0,le.jsx)(ys,{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i}):void 0]})}function hs({store:e,inviteLinkCode:t,spacePermissionsSettingsStore:s}){var n;const i=(0,o().v3)(),d=(0,D().tz)(),l=(0,r().DP)(),c=(0,a().K8)((()=>ut().A.state.searchQuery??""),[]),u=(0,Ot()._3)({spaceId:e.id}),p=(0,Lt().A)(e),g=(0,Mt().V)()??1,m=p&&(null==u?void 0:u.subscription)&&g>0,h=(0,Ot().Q7)(e.id,u,g);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(lt().K,{spaceStore:e,inviteLinkCode:t,spacePermissionsSettingsStore:s}),(0,le.jsxs)("div",{style:{height:"100%",paddingBottom:48},children:[(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,le.jsx)(as,{spaceStore:e}),(0,le.jsx)(Q().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,b().u)(ss(l)),showClearButton:!0,format:Q().C.Small,value:c,style:Gt,onChange:e=>{s.setState({...s.state,limitMembers:!0}),ut().A.setState({...ut().A.state,searchQuery:e.target.value})},onClick:()=>{V().Z9(i,{current_tab:Dt().d.Members})}})]}),(0,le.jsx)("div",{style:{marginInlineEnd:8,flexGrow:1},children:(0,le.jsx)(be().A,{smallMarginBottom:!0,children:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,le.jsx)(Xt,{store:e}),m?(0,le.jsx)("div",{style:{margin:"24px 0px"},children:(0,le.jsx)(ct().x,{quantityOfSpaceMembers:g,quantityOfPaidSeats:h,nextBillingDate:(null==u||null===(n=u.subscription)||void 0===n?void 0:n.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):(0,le.jsx)("div",{style:{margin:"12px 0px"}}),(0,le.jsx)(pt().Hw,{spaceStore:e,spacePermissionsSettingsStore:s})]})]})}function fs({guests:e,store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n}){const i=(0,o().v3)(),r=(0,a().K8)((()=>t.canAdmin()),[t]),d=i.currentUser.id,l=t.id,c=(0,Vt()._X)({name:"internal_guests",spaceId:l,userId:d,amount:0}),u=(0,Ft().q)(),p=(0,wt().r)(),g=(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,le.jsx)("span",{style:{fontWeight:O().Wy.semibold},children:e})}}),m=c&&(0,P().N9)(c,{available:()=>r?(0,le.jsx)(ve().c,{icon:v().personCircleFillIcon,title:g,deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):null,unavailable:({limit:e,upsell:t})=>r?"sales_assisted"===u?(0,le.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,le.jsx)(St().I,{children:(0,le.jsx)(X().l,{iconGroup:A().A,display:"inline",tint:"yellow",label:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:e.total}}),description:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):"product"===t.type||"none"===t.type?(0,le.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,le.jsx)(St().I,{children:(0,le.jsx)(X().l,{iconGroup:A().A,display:"inline",tint:"yellow",label:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:e.total}}),description:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,le.jsx)(pe().A,{onClick:()=>(0,Nt().lK)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):(0,E().HB)(t):null}),h=(0,a().K8)((()=>(0,yt().Qd)()),[]);return(!p||0===p)&&r?(0,le.jsx)(ve().c,{icon:v().personCircleFillIcon,title:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,le.jsx)("span",{style:{fontWeight:O().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):(0,le.jsxs)(le.Fragment,{children:[m,h?(0,le.jsx)(ms,{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n,guests:e}):(0,le.jsx)(ys,{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n})]})}const Ss={pageIds:[]};function ys({store:e,spacePermissionsSettingsStore:t,recentlyRemovedMembersStore:s}){const d=(0,D().tz)(),l=(0,o().v3)(),u=(0,r().DP)(),g=(0,r().IS)((e=>({emptyMessage:{color:e.text.secondary,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"},searchContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},container:{height:"100%"}})),[]),{guestsFilter:m,sort:f}=(0,a().K8)((()=>({guestsFilter:t.state.guestsFilter,sort:t.state.sorts.guests})),[t]),S=(0,n.useCallback)((()=>{ds("guests","name",t)}),[t]),y=(0,n.useMemo)((()=>f?{field:"name"===f.by?"name_normalized":"type",direction:f.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[f]),x=(0,kt().n)({query:m,sort:y,filter:C().nc,limit:30}),v=(0,a().K8)((()=>null==x?void 0:x.rowsStore.state.rows),[x]),A=(0,a().O$)(s),w=(0,a().K8)((()=>e.canEditMembership()),[e]),[M,k]=(0,n.useState)({});(0,h().Yb)((async()=>{if(!v)return;if(!w)return;const t=v.map((e=>e.id)),s=await U().callApi({eventName:"getGuestPagesForUserIds",environment:l,data:{spaceId:e.id,guestUserIds:t,includeRecordMap:!0},headers:(0,j().WS)({cellId:void 0,spaceId:e.id})});"success"===s.type&&k((e=>{const n={...e,...s.data.guestIdToPages};for(const s of t)void 0===n[s]&&(n[s]=Ss);return n}))}),[e,l,v,w]);const _=(0,a().K8)((()=>{const e=qt().subscriptionDataStoreInstance.state;return Boolean(e&&Ut().Fq(e))}),[]),T=(0,a().K8)((()=>{const e=qt().subscriptionDataStoreInstance.state;return Boolean(e&&"subscribed_admin"===e.type&&i().default.checkGate({gateName:"enable_guest_export"}))}),[]),P=(0,n.useCallback)((t=>{var s,n;if("page_guest"===((0,jt().dp)(e,t.id).getMembershipType()??t.membership_type))return{id:t.id,userStore:Ne().L.createChildStore(e,{id:t.id,table:I().oo}),spaceStore:e,restorationStatus:null==A||null===(s=A.find((e=>e.userId===t.id)))||void 0===s?void 0:s.restorationStatus,guestPageIds:null===(n=M[t.id])||void 0===n?void 0:n.pageIds,subscribed:_}}),[e,A,M,_]),B=(0,n.useMemo)((()=>R().oE([bs,w?xs:void 0])),[w]);return(0,le.jsxs)("div",{style:g.container,children:[(0,le.jsxs)("div",{style:g.searchContainer,children:[(0,le.jsx)(Q().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,b().u)(ss(u)),showClearButton:!0,format:Q().C.Small,value:m,style:Gt,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{V().Z9(l,{current_tab:Dt().d.Guests})}}),T?(0,le.jsx)(p().A,{size:"lg",disabled:!1,colorPalette:"blue",onClick:()=>L().li({spaceStore:e,intl:d,environment:l}),disabledFeedback:!0,children:(0,le.jsx)(D().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):void 0]}),(0,le.jsx)(c().fI,{paddingBottom:36,children:(0,le.jsx)(ge().M,{columns:B,listSource:x,transformRow:P,onSortChange:S,sort:f,estimatedRowHeight:52,allowHorizontalScroll:!0,renderEmpty:()=>(0,le.jsx)(se().A,{isSmall:!0,style:g.emptyMessage,children:(0,le.jsx)(D().sA,{id:"membersTab.emptySearch",defaultMessage:"No search results"})})})})]})}const bs={id:"name",headerTitle:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),cellPadding:"8px 0",widthData:{widthPercent:80,minWidth:200},renderCell:e=>(0,le.jsx)(_t().A,{actorStore:e.userStore,restorationStatus:e.restorationStatus,spaceRole:"page_guest",hideRolePill:!0}),sortable:!0},xs={id:"pages",headerTitle:(0,le.jsx)(D().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:20,minWidth:100},renderCell:e=>void 0!==e.guestPageIds?(0,le.jsx)(ue().V,{store:e.spaceStore,guestPageIds:e.guestPageIds,guestStore:e.userStore,isSubscribed:e.subscribed,hideActionButtons:!1}):(0,le.jsx)(s(710149).A,{style:{width:60,height:12,borderRadius:4,marginInlineStart:8}}),sortable:!1}},579631:(e,t,s)=>{s.d(t,{SS:()=>l,_g:()=>r,co:()=>d,e1:()=>a,kF:()=>i,mu:()=>o});var n=()=>s(314529);function i(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"toggle_open_in_desktop_app",t)}function o(e){(0,n().DO_NOT_USE_trackLegacy)(e,"configure_open_in_desktop_app")}function a(e){(0,n().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_dismiss")}function r(e){(0,n().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_display")}function d(e){(0,n().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_download")}function l(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_open_in_app",t)}},592791:(e,t,s)=>{s.d(t,{V:()=>U});s(944114),s(898992),s(803949),s(581454);var n=s(296540),i=()=>s(726637),o=()=>s(312788),a=()=>s(484714),r=()=>s(56366),d=()=>s(401497),l=()=>s(252291),c=()=>s(30537),u=()=>s(631524),p=()=>s(584262),g=()=>s(911259),m=()=>s(668725),h=()=>s(599813),f=()=>s(179034),S=()=>s(69708),y=()=>s(901389),b=()=>s(205224),x=()=>s(492414),v=()=>s(722872),A=()=>s(397103),w=()=>s(463830),M=()=>s(148832),j=()=>s(134217),k=()=>s(749240),C=()=>s(760217),I=()=>s(406699),_=()=>s(802790),T=()=>s(404277),P=()=>s(678553),D=()=>s(939740),B=()=>s(64e3),N=()=>s(305390),R=()=>s(89924),E=()=>s(859428),O=()=>s(597703),V=s(474848);function U({store:e,guestStore:t,isSubscribed:s,guestPageIds:o,hideActionButtons:a,renderOrigin:l,menuWidth:p}){const g=(0,r().uB)(void 0,w().A),h=(0,n.useCallback)((()=>(0,V.jsx)(F,{store:e,guestStore:t,isSubscribed:s,guestPageIds:o,hideActionButtons:a,buttonPopupStore:g,menuWidth:p})),[e,t,s,o,a,g,p]),y=i().A.isMobile;(0,r().K8)((()=>o.map((t=>{M().B.createChildStore(e,{table:f().ev,id:t}).load()}))),[e,o]);const b=(0,d().IS)((e=>({chevronIcon:{width:10,marginInlineStart:4,fill:e.icon.tertiary}})),[]);return 0===o.length?(0,V.jsx)(u().p,{disabled:!0,children:(0,V.jsx)(S().sA,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,V.jsx)(I().A,{popupType:y?c().n.BottomSheet:c().n.Popup,renderOrigin:e=>l?l(e):(0,V.jsxs)(u().p,{...e,children:[(0,V.jsx)(S().sA,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:o.length}}),(0,m().b)(b.chevronIcon)]}),buttonPopupStore:g,render:h})}function F({store:e,guestStore:t,isSubscribed:s,guestPageIds:c,hideActionButtons:u,buttonPopupStore:m,menuWidth:w}){const{navigate:I}=(0,n.useContext)(o().E),U=(0,a().v3)(),F=(0,n.useCallback)((()=>function(e,t,s,n){y().ui({showCancel:!0,keepFocus:!1,message:(0,V.jsx)(S().sA,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,V.jsx)(S().sA,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{n.setState({...n.state,open:!1}),await b().D({environment:e,guestUserStore:s,store:t})}}]})}(U,e,t,m)),[U,e,t,m]),L=(0,n.useCallback)((()=>async function(e,t,s,n,i){i.setState({...i.state,open:!1});const o=n?"member":"owner";await b().P({environment:e,guestUserStore:s,membershipType:o,store:t,origin:"guest_pages_popup"})}(U,e,t,s,m)),[U,e,t,s,m]),q=i().A.isMobile,G=(0,r().K8)((()=>e.canEditMembership()),[e]),z=(0,d().IS)((e=>({messageMenuItem:{color:e.text.secondary,paddingInline:12,paddingTop:8,paddingBottom:8},settingsMenuItem:{color:e.text.secondary,padding:8},divider:{minHeight:0},upgradeToMember:{paddingBottom:4,paddingInline:8},removeGuest:{paddingInline:8,paddingBottom:4,color:e.red.text.accentPrimary},inlineButton:{width:"auto"},actionButtons:{padding:4}})),[]),{noAccessGuestPageStores:K,navigableGuestPageStores:W}=function(e){const{spaceStore:t,guestPageIds:s}=e;return(0,r().K8)((()=>{const e=[],n=[];return s.forEach((s=>{const i=M().B.createChildStore(t,{table:f().ev,id:s});i.canRead()?n.push(i):e.push(i)})),{noAccessGuestPageStores:e,navigableGuestPageStores:n}}),[t,s])}({spaceStore:e,guestPageIds:c}),H=W.map((e=>({key:e.id,render:t=>(0,V.jsx)(N().A,{...t,store:e,placeholder:(0,V.jsx)(S().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=(0,x().Ay)({store:e,fullyQualified:!1,pageVisitSource:p().y8.LinkInPage});I({environment:U,url:t,openInNew:"tab"})}})));if(K.length>0){const e={key:"guest-pages-popup-no-access-summary",render:e=>(0,V.jsx)(O().H,{...e,noAccessPageCount:K.length}),action:()=>{}};H.push(e)}let $;$=q?{menuType:v().gu.ActionSheet}:{menuType:v().gu.Popup,width:w??300};const Y=(0,A().h)(),Q=(0,r().K8)((()=>function(){const e=k().subscriptionDataStoreInstance.state;return Boolean(e&&(0,j().Fq)(e))}()),[]);let J,Z;Y&&(J=(0,V.jsx)(E().A,{renderTooltip:()=>Q?(0,V.jsx)(S().sA,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,V.jsx)(S().sA,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,V.jsx)(C().A,{focused:!1,icon:(0,V.jsx)(l().I,{icon:g().arrowInCircleUpIcon}),title:Q?(0,V.jsx)(S().sA,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,V.jsx)(S().sA,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}),style:z.upgradeToMember,buttonStyle:z.inlineButton,onClick:L,...e})}),Z=(0,V.jsx)(E().A,{renderTooltip:()=>(0,V.jsx)(S().sA,{id:"guestPagesPopup.removeGuestSettingsButton.tooltip",defaultMessage:"This guest will be removed from the workspace"}),render:e=>(0,V.jsx)(C().A,{focused:!1,icon:(0,V.jsx)(l().I,{icon:h().xMarkIcon}),title:(0,V.jsx)(S().sA,{id:"guestPagesPopup.removeGuestPermissionButton.label",defaultMessage:"Remove guest"}),style:z.removeGuest,buttonStyle:z.inlineButton,onClick:F,...e})}));const X=!u&&G;return(0,V.jsxs)(T().A,{...$,children:[X?(0,V.jsx)(B().A,{style:z.messageMenuItem,title:1===H.length?(0,V.jsx)(S().sA,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"Guest page"}):(0,V.jsx)(S().sA,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"Guest pages"})}):void 0,(0,V.jsx)(D().Ay,{type:D().Oh.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,V.jsx)(R().A,{...e}),items:H}]}),X?(0,V.jsxs)("div",{style:z.actionButtons,children:[(0,V.jsx)(P().Ay,{title:(0,V.jsx)(_().A,{size:1}),style:z.divider}),(0,V.jsx)(B().A,{style:z.settingsMenuItem,title:(0,V.jsx)(S().sA,{id:"guestPagesPopup.Settings",defaultMessage:"Settings"})}),Y?J:null,Z]}):void 0]})}},597703:(e,t,s)=>{s.d(t,{H:()=>l});s(296540);var n=()=>s(401497),i=()=>s(252291),o=()=>s(345016),a=()=>s(69708),r=()=>s(64e3),d=s(474848);function l(e){const{noAccessPageCount:t,...s}=e,l=(0,n().IS)((e=>({noAccessSummary:{display:"flex",alignItems:"center",gap:8,color:e.text.secondary},noAccessRight:{color:e.text.secondary,fontSize:12}})),[]);return(0,d.jsx)(r().A,{...s,title:(0,d.jsxs)("div",{style:l.noAccessSummary,children:[(0,d.jsx)(i().I,{icon:o().C}),(0,d.jsx)(a().sA,{id:"guestPagesPopup.noAccessSummary",defaultMessage:"{count, plural, one {# shared or private page} other {# shared or private pages}}",values:{count:t}})]}),right:(0,d.jsx)("div",{style:l.noAccessRight,children:(0,d.jsx)(a().sA,{id:"guestPagesPopup.noAccessSummaryTag",defaultMessage:"No access"})})})}},611308:(e,t,s)=>{s.d(t,{A:()=>i});class n extends(()=>s(757695))().Store{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(206267).JW();return new Promise((s=>{const n=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...n,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const i=new n},636020:(e,t,s)=>{s.d(t,{A:()=>y});var n=s(296540),i=()=>s(56366),o=()=>s(401497),a=()=>s(493552),r=()=>s(868146),d=()=>s(798880),l=()=>s(69708),c=()=>s(284371),u=()=>s(870092),p=()=>s(460292),g=()=>s(859428),m=()=>s(453697),h=()=>s(881753),f=()=>s(266324),S=s(474848);function y({userId:e,spaceStore:t,restorationStatus:s,isInternalGuest:y,isForSuggestionsTable:b}){const x=(0,l().tz)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:v,email:A,userStore:w,styles:M}=function({userId:e,spaceStore:t,isForSuggestionsTable:s}){const n=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:c().J.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:s?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",insetInlineStart:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:c().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...c().RC},userEmail:{height:17,alignSelf:"stretch",fontSize:c().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...c().RC},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[s]),a=(0,l().tz)(),r=u().L.createChildStore(t,{table:d().oo,id:e}),{name:p,email:g}=(0,i().K8)((()=>({name:r.getDisplayName(a),email:r.getEmail()})),[r,a]);return{name:p,email:g,styles:n,userStore:r}}({userId:e,spaceStore:t,isForSuggestionsTable:b}),[j,k]=(0,n.useState)(!1);return(0,S.jsxs)("div",{style:M.container,children:[(0,S.jsxs)("div",{style:M.nameContainer,children:[(0,S.jsxs)("div",{style:M.userAvatarWrapper,children:[(0,S.jsx)(m().A,{userStore:w,size:28}),y?(0,S.jsx)(g().A,{style:{width:250},textWrap:!0,placement:"right",alignment:"start",render:e=>(0,S.jsx)("div",{...e,style:M.userAvatarIcon,children:(0,S.jsx)(p().Q,{iconGroup:r().u,colorVariant:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,S.jsxs)("div",{children:[(0,S.jsx)(a().D,{styleKey:"Caption/Medium",colorVariant:"inversePrimary",children:(0,S.jsx)(l().sA,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,S.jsx)(a().D,{styleKey:"Caption/Medium",colorVariant:"inverseSecondary",children:(0,S.jsx)(l().sA,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You’ll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})}):void 0]}),(0,S.jsxs)("div",{style:M.titleContainer,children:[(0,S.jsx)("div",{style:M.userName,title:b?A:v,children:b?A:v}),(0,S.jsx)("div",{style:M.userEmail,title:b?x:A,children:b?x:A}),s?(0,S.jsx)(h().A,{spaceStore:t,restorationStatus:s,didAttemptRecovery:j}):void 0]})]}),j||"canBeRestored"!==(null==s?void 0:s.status)?void 0:(0,S.jsx)(f().A,{spaceId:t.id,userStore:w,onSubmit:()=>k(!0)})]})}},638743:(e,t,s)=>{s.d(t,{n:()=>d});var n=()=>s(484714),i=()=>s(187174),o=()=>s(534177),a=()=>s(559506);const r={};function d({spaceId:e}){const t=(0,n().v3)(),[{status:s,error:d,value:l}]=(0,i().Yb)((async()=>{if(!e)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const s=await a().callApi({eventName:"getOrganizationSettingsOverrides",environment:t,data:{spaceId:e}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,o().HB)(s)}),[t,e]);return{organizationOverrides:(null==l?void 0:l.overrides)??r,organizationInfo:null==l?void 0:l.organizationInfo,isOrganizationOwner:null==l?void 0:l.isOrganizationOwner,loading:"pending"===s||"idle"===s,error:d}}},644484:(e,t,s)=>{s.d(t,{g:()=>i});s(296540);var n=s(474848);const i=(0,s(340498).wt)("addPerson",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},653027:(e,t,s)=>{s.d(t,{A:()=>Oe});var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(534177),r=()=>s(775191),d=()=>s(381678),l=()=>s(401497),c=()=>s(252291),u=()=>s(533642),p=()=>s(69708),g=()=>s(284371),m=()=>s(508382),h=()=>s(274602),f=s(474848);function S(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:i,onDismiss:o}=e,a=(0,l().IS)(y,[]),r=(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),d=(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it’s you when you use a password with a verification code"}),g=(0,n.useMemo)((()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().A,{type:"totp",title:(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,f.jsx)(m().A,{type:"sms",title:(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,f.jsx)(p().sA,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:i,style:a.button})]})),[a,i,s]);return(0,f.jsx)(h().A,{title:r,header:d,children:g,icon:(0,f.jsx)(c().I,{icon:u().c,size:"xl",colorVariant:"secondary"}),errorMessage:t,onDismiss:o})}function y(e){return(0,l().$4)({button:{marginBottom:5},settingsTitle:{color:e.text.secondary,fontWeight:g().Wy.medium,marginBottom:8}})}var b=()=>s(98126),x=()=>s(236262);function v(e){const{isLoading:t,mfaSetting:s,errorMessage:n,onDismiss:i,onCancel:o,onDeleteMethod:r}=e,d=(0,l().IS)(A,[]),c={text:t?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},u=[{text:(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,f.jsx)(h().A,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a().HB)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,f.jsx)("span",{style:d.boldText,children:e})}});case"totp":return(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:d.boldText,children:e})}});default:return(0,a().HB)(e)}})(),icon:(0,x().trashIcon)(d.crossIcon),primaryAction:c,secondaryActions:u,errorMessage:n,onDismiss:i})}function A(e){return(0,l().$4)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:g().Wy.semibold}})}s(581454);var w=()=>s(920949),M=()=>s(232930);const j=(0,s(340498).wt)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,f.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var k=()=>s(453697);function C(e){const{userStore:t}=e,s=(0,l().IS)(I,[]);return(0,f.jsxs)("div",{style:s.iconContainer,children:[(0,f.jsx)(k().A,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,f.jsx)("span",{children:j(s.lockIcon)})]})}function I(){return(0,l().$4)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,insetInlineEnd:0,insetInlineStart:26,top:21}})}function _(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:i,userStore:o,errorMessage:r,onClick:d,onDismiss:c}=e,u=(0,l().IS)(T,[]),g=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,M().x)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,n.useMemo)((()=>(0,w().WS)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,f.jsx)(m().A,{type:t,title:e.friendlyName,caption:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,disabled:s});case"sms":return(0,f.jsx)(m().A,{type:t,title:e.phoneNumber,caption:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,isLoading:s&&i===e.mfaSettingId,disabled:s&&i!==e.mfaSettingId});case"backup_code":return(0,f.jsx)(m().A,{type:t,title:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,disabled:s});default:return(0,a().HB)(t)}}))),[t,d,s,i,u.actionButton]);return(0,f.jsx)(h().A,{title:g,header:S,errorMessage:r,icon:(0,f.jsx)(C,{userStore:o}),secondaryActions:y,onDismiss:c,children:b})}function T(e){return(0,l().$4)({resendLink:{fontWeight:g().Wy.medium,color:e.blue.text.accentPrimary},actionButton:{marginBottom:5}})}var P=()=>s(22394);function D(e){const t=(0,l().IS)(B,[]),{errorMessage:s,onDismiss:n}=e,i=(0,f.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,f.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),a=[{text:(0,f.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:n,type:"button",view:"outline"}];return(0,f.jsx)(h().A,{title:i,header:o,errorMessage:s,icon:(0,P().o)(t.confirmationIcon),secondaryActions:a,onDismiss:n})}function B(e){return(0,l().$4)({confirmationIcon:{width:30,fill:"green"}})}var N=()=>s(213962);function R(e){const{isLoading:t,lastMFASetting:s,errorMessage:n,onDismiss:i,onTurnOffMFA:o,onCancel:a}=e,r=(0,l().IS)(E,[]),d=(0,f.jsx)(p().sA,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),c={text:t?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},u=[{text:(0,f.jsx)(p().sA,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,f.jsx)(h().A,{title:d,header:s?(0,f.jsx)(p().sA,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:{fontWeight:g().Wy.semibold},children:e})}}):(0,f.jsx)(p().sA,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,N().s)(r.crossIcon),primaryAction:c,secondaryActions:u,errorMessage:n,onDismiss:i})}function E(e){return(0,l().$4)({crossIcon:{width:30,fill:"red"}})}s(898992),s(354520);var O=()=>s(662303),V=()=>s(869190),U=()=>s(802790),F=()=>s(125565),L=()=>s(718827),q=()=>s(177976),G=()=>s(126617),z=()=>s(530093),K=()=>s(105819),W=()=>s(760217),H=()=>s(406699),$=()=>s(623580);function Y(e){const{setting:t,setIsEditing:s,isEditing:i,onUpdateMethod:o}=e,a=(0,l().IS)(Q,[]),[r,d]=(0,n.useState)(""),c=t.friendlyName,u=""===r?c:r,p=(0,n.useCallback)((e=>""!==e&&e!==c),[c]),g=(0,n.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),d(r)):d(c),s(!i)}),[u,i,s,o,r,c,p,t.mfaMethod,t.mfaSettingId]),m=(0,n.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||g()}),[g]),h=(0,n.useCallback)((e=>{p(e.target.value)&&d(e.target.value)}),[p]);return i?(0,f.jsx)($().A,{value:u,maxlength:30,onChange:h,onKeyDown:m,onBlur:g,focus:i,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(F().A,{children:u})}function Q(){return(0,l().$4)({inputField:{width:"auto",marginInlineEnd:5,marginBottom:1},input:{fontSize:14,...g().RC}})}var J=()=>s(722872),Z=()=>s(404277),X=()=>s(939740),ee=()=>s(89924);function te(e){const{activeMenuActions:t}=e;return(0,f.jsx)(Z().A,{menuType:J().gu.Popup,children:(0,f.jsx)(X().Ay,{type:X().Oh.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,f.jsx)(ee().A,{...e}),items:t}],initialFocus:void 0})})}function se(e){const{type:t,title:s,caption:i,setting:o,onDeleteMethod:r,onUpdateMethod:d}=e,u=(0,l().IS)(ne,[]),g={totp:(0,q().K)(u.icon),sms:(0,z().Z)(u.icon)},[m,h]=(0,n.useState)(!1),S=e=>({key:"deleteMFAMethod",render:e=>(0,f.jsx)(W().A,{...e,title:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,x().trashIcon)(u.menuItemIcon)}),action:()=>{r(o),e.close()}}),y=e=>({key:"editMFAMethod",render:e=>(0,f.jsx)(W().A,{...e,title:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,f.jsx)(c().I,{icon:K().pencilLineIcon})}),action:()=>{h(!0),e.close()}});return(0,f.jsxs)("div",{style:u.activeMethodContainer,children:[(0,f.jsxs)("div",{style:u.activeMethodLeftContainer,children:[(0,f.jsx)("div",{style:u.icon,children:g[t]}),(0,f.jsxs)("div",{style:u.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,f.jsx)(F().A,{children:s});case"totp":return(0,f.jsx)(Y,{setting:o,setIsEditing:h,isEditing:m,onUpdateMethod:d});default:return(0,a().HB)(t)}})(),(0,f.jsx)("span",{style:u.activeMethodCaption,children:i})]})]}),(0,f.jsx)(H().A,{render:e=>{switch(t){case"sms":return(0,f.jsx)(te,{activeMenuActions:[S(e)]});case"totp":return(0,f.jsx)(te,{activeMenuActions:[y(e),S(e)]});default:(0,a().HB)(t)}},alignmentToOrigin:"start",renderOrigin:e=>(0,f.jsx)(L().Ay,{style:u.menuButton,disabled:m,...e,children:(0,f.jsx)(c().I,{icon:G().ellipsisSmallIcon,size:"sm"})}),popupType:H().z.Popup})]})}function ne(e){return(0,l().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.border.primary}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:g().J.UISmall.desktop,lineHeight:g().K_.UISmall.desktop,color:e.text.secondary,whiteSpace:"normal"},icon:{width:20,height:20,marginInlineEnd:10,fill:e.blue.icon.accentPrimary},menuIcon:{fill:e.icon.tertiary,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginInlineEnd:5,marginBottom:1},input:{fontSize:14}})}function ie(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:i,onStartSMS:o,onTurnOffMFA:r,onStartBackupCodes:d,onDismiss:g,onDeleteMethod:S,onUpdateMethod:y}=e,b=(0,l().IS)(oe,[]),x=(0,f.jsx)(p().sA,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),v=(0,f.jsx)(p().sA,{id:"mfa.settingModal.message",defaultMessage:"Confirm it’s you after using a password by providing a verification code."}),A=(0,n.useMemo)((()=>(0,w().WS)(t).map((e=>{const{mfaMethod:t}=e,s=(0,V().v9)(e.createdAt,O().locale);switch(t){case"totp":return(0,f.jsx)(se,{type:t,title:e.friendlyName,caption:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:S,onUpdateMethod:y});case"sms":return(0,f.jsx)(se,{type:t,title:`${e.phoneNumber}`,caption:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:S,onUpdateMethod:y});case"backup_code":return;default:(0,a().HB)(t)}}))),[t,S,y]),M=t.filter((e=>"totp"===e.mfaMethod)).length,j=t.filter((e=>"sms"===e.mfaMethod)).length,k=(0,n.useMemo)((()=>[{type:"totp",title:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:M>=2?(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:M}}),onClick:i,style:b.button,disabled:M>=2},{type:"sms",title:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:j>=2?(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:j}}),onClick:o,style:b.button,disabled:j>=2},{type:"backup_code",title:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don’t work"}),onClick:d,style:b.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[i,o,d,M,j,b]),C=(0,n.useMemo)((()=>k.map(((e,t)=>(0,n.createElement)(m().A,{...e,key:t})))),[k]),I=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(F().A,{style:b.settingsTitle,isSmall:!0,children:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),A,(0,f.jsx)(U().A,{size:15,isHidden:!0}),(0,f.jsx)(F().A,{style:b.settingsTitle,isSmall:!0,children:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),C]}),_=[{text:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,f.jsx)(h().A,{title:x,header:v,errorMessage:s,icon:(0,f.jsx)(c().I,{icon:u().c,size:"xl",colorVariant:"secondary"}),onDismiss:g,secondaryActions:_,children:I})}function oe(e){return(0,l().$4)({button:{marginBottom:5},settingsTitle:{color:e.text.secondary,fontWeight:g().Wy.medium,marginBottom:8}})}var ae=()=>s(219505),re=()=>s(100622);function de(e){const{isLoading:t,userStore:s,errorMessage:i,onDismiss:o,onVerifyBackupCode:a,onTryAnotherMethod:r}=e,d=(0,l().IS)(le,[]),[c,u]=(0,n.useState)(""),g=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),m=(0,f.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},y=[{text:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,f.jsx)(h().A,{title:g,header:m,icon:(0,f.jsx)(C,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:i,onDismiss:o,children:(0,f.jsx)($().A,{type:"text",value:c,onChange:e=>{u((0,ae().H)(e.target.value))},placeholder:"0000-0000",style:d.backupCodeInput,disabled:t,autoFocus:!0})})}function le(e){return(0,l().$4)({backupCodeInput:{width:"100%",background:"light"===e.mode?re().Tj.transparent:e.inputBackground}})}function ce(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:i,errorMessage:a,alertMessage:r,onDismiss:d,onVerifyPassword:c,onForgotPassword:u}=e,g=(0,l().IS)(ue,[]),[m,S]=(0,n.useState)(""),y=(0,o().K8)((()=>null==i?void 0:i.getEmail()),[i]),x=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(m),disabled:t||""===m},A=[{text:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>u(y)}];return(0,f.jsx)(h().A,{title:x,header:y,icon:(0,f.jsx)(C,{userStore:i}),primaryAction:v,secondaryActions:A,errorMessage:a,alertMessage:r,onDismiss:d,children:(0,f.jsx)($().A,{type:"password",value:m,onChange:e=>S(e.target.value),placeholder:"Your password",style:g.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function ue(){return(0,l().$4)({passwordInput:{width:"100%"}})}var pe=()=>s(496603),ge=()=>s(217448),me=()=>s(342963);function he(e){const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:o,resentStatus:a,resentAt:r,onDismiss:d,onVerifySMS:l,onResendLink:c,onTryAnotherMethod:u}=e,[g,m]=(0,n.useState)([]),S=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,f.jsx)(ge().n,{resentAt:r,resentStatus:a,onResendLink:c})]}),x={text:s?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>l(t.mfaSettingId,g.join("")),disabled:s||"resending"===a||6!==(0,pe().oE)(g).length},v=[{text:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>u(),disabled:s}];return(0,f.jsx)(h().A,{title:S,header:y,icon:(0,f.jsx)(C,{userStore:i}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:d,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().d2,{numInputs:6,value:g,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:me().Vx})})})}function fe(e){const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:o,onDismiss:a,onVerifyTOTP:r,onTryAnotherMethod:d}=e,c=(0,l().IS)(Se,[]),[u,g]=(0,n.useState)([]),m=(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:c.boldText,children:e})}}),y={text:s?(0,f.jsx)(b().k,{}):(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:u.join("")}),disabled:s||6!==(0,pe().oE)(u).length},x=[{text:(0,f.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>d(),disabled:s}];return(0,f.jsx)(h().A,{title:m,header:S,icon:(0,f.jsx)(C,{userStore:i}),primaryAction:y,secondaryActions:x,errorMessage:o,onDismiss:a,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().d2,{numInputs:6,value:u,format:"settings",disabled:!1,onChange:g,autoFocus:!0,isValidKey:me().Vx})})})}function Se(e){return(0,l().$4)({boldText:{fontWeight:g().Wy.semibold}})}s(672577);function ye(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onCancel:n,onDeleteMethod:i,onDismiss:o}=e,a=(0,l().IS)(be,[]),r=t.find((e=>e.id===s));if(!r)return null;const d=(0,f.jsx)(p().sA,{id:"passkey.deleteSetting.title",defaultMessage:"Are you sure you want to{newline}delete this passkey?",values:{newline:(0,f.jsx)("br",{})}}),c=(0,f.jsx)(p().sA,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}",values:{friendlyName:r.authenticatorName}}),u={text:(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>i(),isRed:!0},g=[{text:(0,f.jsx)(p().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,type:"button",view:"outline"}];return(0,f.jsx)(h().A,{title:d,header:c,icon:(0,x().trashIcon)(a.crossIcon),primaryAction:u,secondaryActions:g,onDismiss:o,containerStyles:a.container,headerBottomMargin:10,headerStyleKey:"Title-sm/Regular"})}function be(e){return(0,l().$4)({container:{maxWidth:360},crossIcon:{width:30,fill:"red"},boldText:{fontWeight:g().Wy.semibold}})}s(803949);var xe=()=>s(406094),ve=()=>s(493552),Ae=()=>s(14321),we=()=>s(863330),Me=()=>s(984925),je=()=>s(695714),ke=()=>s(765140),Ce=()=>s(187859),Ie=()=>s(43016),_e=()=>s(460292);function Te(e){const{setting:t,setIsEditing:s,isEditing:i,onUpdateMethod:o}=e,a=(0,l().IS)(Pe,[]),[r,d]=(0,n.useState)(""),c=t.authenticatorName,u=""===r?c:r,p=(0,n.useCallback)((e=>""!==e&&e!==c),[c]),g=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),d(u)):d(c),s(!i)},m=(0,n.useCallback)((e=>{p(e.target.value)&&d(e.target.value)}),[p]);return i?(0,f.jsx)($().A,{value:u,maxlength:30,onChange:m,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||g()},onBlur:g,focus:i,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(F().A,{children:u})}function Pe(){return(0,l().$4)({inputField:{width:"auto",marginInlineEnd:5,marginBottom:1},input:{fontSize:14,...g().RC}})}const De={"fbfc3007-154e-4ecc-8c0b-6e020557d7bd":ke().n,"dd4ec289-e01d-41c9-bb89-70fa845d4bf2":ke().n,"ea9b8d66-4d01-1d21-3ce4-b6b48cb575d4":Ce().m,"adce0002-35bc-c60a-648b-0b25f1f05503":Ce().m,"08987058-cadc-4b81-b6e1-30de50dcbe96":Ie().z,"9ddd1817-af5a-4672-a2b9-3e3dd95000a9":Ie().z,"6028b017-b1d4-4c02-b4b3-afcdafc96bb2":Ie().z};function Be(e){const{caption:t,setting:s,onDeleteMethod:i,onUpdateMethod:o,isEditing:a}=e,r=(0,l().IS)(Ne,[]),d=(0,l().eP)(),[u,g]=(0,n.useState)(a),m=De[s.aaguid]?(0,f.jsx)(_e().Q,{iconGroup:De[s.aaguid],variantName:"dark"===d?"darkMode":"default"}):(0,f.jsx)(c().I,{icon:je().personKeyFillIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),h=e=>({key:"deletePasskeyMethod",render:e=>(0,f.jsx)(W().A,{...e,title:(0,f.jsx)(p().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,f.jsx)(c().I,{icon:x().trashIcon})}),action:()=>{i({passkeyAuthenticatorId:s.id}),e.close()}}),S=e=>({key:"editPasskeyMethod",render:e=>(0,f.jsx)(W().A,{...e,title:(0,f.jsx)(p().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,f.jsx)(c().I,{icon:K().pencilLineIcon})}),action:()=>{g(!0),e.close()}});return(0,f.jsxs)("div",{style:r.activeMethodContainer,children:[(0,f.jsxs)("div",{style:r.activeMethodLeftContainer,children:[m,(0,f.jsxs)("div",{style:r.activeMethodText,children:[(0,f.jsx)(Te,{setting:s,setIsEditing:g,isEditing:u,onUpdateMethod:o}),(0,f.jsx)("span",{style:r.activeMethodCaption,children:t})]})]}),(0,f.jsx)(H().A,{render:e=>(0,f.jsx)(te,{activeMenuActions:[S(e),h(e)]}),alignmentToOrigin:"end",renderOrigin:e=>(0,f.jsx)(L().Ay,{style:r.menuButton,disabled:u,...e,children:(0,f.jsx)(c().I,{icon:G().ellipsisSmallIcon,size:"sm",colorVariant:"tertiary"})}),popupType:H().z.Popup})]})}function Ne(e){return(0,l().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"center",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0,alignItems:"center",gap:10},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:g().J.UISmall.desktop,lineHeight:g().K_.UISmall.desktop,color:e.text.secondary,whiteSpace:"normal"},menuButton:{borderRadius:4,padding:3}})}function Re(e){const{passkeySettings:t,errorMessage:s,onDismiss:n,onAddMethod:i,onDeleteMethod:o,onUpdateMethod:a,shouldNameNewSetting:r}=e,d=(0,p().tz)(),g=(0,l().IS)(Ee,[]);let m;null==t||t.forEach((e=>{var t;(!m||e.createdAt>(null===(t=m)||void 0===t?void 0:t.createdAt))&&(m=e)}));const S=0===t.length?Ae().personKeyFillSmallIcon:we().plusSmallIcon;return(0,f.jsxs)(h().A,{title:d.formatMessage({id:"mfa.updateSettings.passkeyTitle",defaultMessage:"Manage Passkeys"}),header:d.formatMessage({id:"mfa.updateSettings.passkeyHeader",defaultMessage:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords."}),errorMessage:s,icon:(0,f.jsx)(c().I,{icon:u().c,size:"xl",colorVariant:"secondary"}),onDismiss:n,children:[t.length>0?(0,f.jsxs)("div",{style:g.activePasskeyContainer,children:[(0,f.jsx)("div",{style:{marginBottom:"10px"},children:(0,f.jsx)(ve().D,{styleKey:"Caption/Medium",color:"textSecondary",children:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.passkeyTitle",defaultMessage:"Active passkey"})})}),t.map(((e,t)=>{var s;const n=(0,V().v9)(e.createdAt,O().locale);return(0,f.jsx)(Be,{caption:(0,f.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:n}}),setting:e,onDeleteMethod:o,onUpdateMethod:a,isEditing:r&&e.id===(null===(s=m)||void 0===s?void 0:s.id)},e.id)}))]}):void 0,(0,f.jsxs)("div",{style:g.actionButtonContainer,children:[t.length<5?(0,f.jsx)(Me().e,{title:d.formatMessage({id:"mfa.updateSettings.addNewPasskeyButton.label",defaultMessage:"Add new passkey"}),onClick:i,icon:S}):void 0,(0,f.jsx)(xe().A,{onClick:n,style:g.cancelButton,children:(0,f.jsx)(ve().D,{styleKey:"Body/Medium",color:"textLight",children:(0,f.jsx)(p().sA,{id:"passkey.updateSettings.cancel",defaultMessage:"Cancel"})})})]})]})}function Ee(e){return(0,l().$4)({cancelButton:{marginTop:10,width:"100%",padding:10,textAlign:"center"},activePasskeyContainer:{marginTop:"24px"},actionButtonContainer:{marginTop:"24px"}})}function Oe(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:n,onStartSMS:l,onStartBackupCodes:c}=e,u=(0,i().v3)(),p=(0,i().Y0)(),g=(0,o().K8)((()=>(0,d()._)(u)),[u]),m=(0,o().K8)((()=>t.getCurrentStep()),[t]);switch(m.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,f.jsx)(ce,{isLoading:m.isLoading,isForgotPasswordLoading:m.isForgotPasswordLoading,userStore:g,errorMessage:m.error,alertMessage:m.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,f.jsx)(_,{isSMSLoading:m.isSMSLoading,chosenMfaSettingId:m.chosenMfaSettingId,mfaSettings:m.mfaSettings,userStore:g,errorMessage:m.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,f.jsx)(fe,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:g,errorMessage:m.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,f.jsx)(he,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:g,errorMessage:m.error,resentAt:m.resentAt,resentStatus:m.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(m.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,f.jsx)(de,{isLoading:m.isLoading,userStore:g,errorMessage:m.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,f.jsx)(S,{errorMessage:m.error,onStartTOTP:n,onStartSMS:l,onDismiss:s});case"settingsShowSettings":const e=m.mfaSettings;return(0,f.jsx)(ie,{mfaSettings:e,errorMessage:m.error,onStartTOTP:n,onStartSMS:l,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,f.jsx)(Re,{passkeySettings:m.passkeys,errorMessage:m.error,onDismiss:s,onAddMethod:()=>p.isElectron?r().Yw(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===m.step});case"settingsDeletePasskeySetting":return(0,f.jsx)(ye,{passkeys:m.passkeys,passkeyAuthenticatorIdToDelete:m.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,f.jsx)(v,{isLoading:m.isLoading,mfaSetting:m.mfaSettingToDelete,errorMessage:m.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const i="settingsConfirmIdentity"===m.step&&"disableMFA"===m.source;return"settingsDisableMFA"===m.step||i?(0,f.jsx)(R,{isLoading:i,lastMFASetting:m.lastMFASetting,errorMessage:m.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===m.source?(0,f.jsx)(D,{errorMessage:m.error,onDismiss:s}):null;default:return(0,a().HB)(m)}}},667734:(e,t,s)=>{s.d(t,{g:()=>a});s(296540);var n=()=>s(69708),i=()=>s(125565),o=s(474848);function a(e){const{isSmall:t,isSecondaryColor:s}=e;return(0,o.jsx)(i().A,{isSmall:t,isSecondaryColor:s,style:{textAlign:"center"},children:(0,o.jsx)(n().sA,{id:"spaceSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})})}},671885:(e,t,s)=>{s.d(t,{A:()=>ge});s(898992),s(354520),s(581454);var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(98126),d=()=>s(406094),l=()=>s(160432),c=()=>s(848538),u=()=>s(798880),p=()=>s(322769),g=()=>s(69708),m=()=>s(534177),h=()=>s(701763),f=()=>s(278768),S=()=>s(492666),y=()=>s(559506),b=()=>s(884107),x=()=>s(901389),v=()=>s(496414),A=()=>s(601866),w=()=>s(231297),M=()=>s(802790),j=()=>s(623580),k=()=>s(89924),C=()=>s(581369),I=()=>s(125565),_=()=>s(592791),T=()=>s(719147),P=()=>s(442672),D=()=>s(8178),B=()=>s(201651),N=()=>s(304231),R=()=>s(792223),E=()=>s(709438),O=()=>s(125035),V=()=>s(347930),U=()=>s(47373),F=()=>s(551732),L=()=>s(249847),q=()=>s(637573),G=()=>s(240865),z=()=>s(646736),K=()=>s(118789),W=()=>s(562866),H=()=>s(317025),$=()=>s(623742),Y=()=>s(765957),Q=()=>s(605402),J=()=>s(406999),Z=()=>s(870092),X=()=>s(973189),ee=()=>s(404141),te=()=>s(309049),se=()=>s(946144),ne=()=>s(224701),ie=()=>s(329304),oe=()=>s(134217),ae=()=>s(910609),re=()=>s(749240),de=s(474848);const le={maxWidth:s(469968).x};function ce(e){const{store:t,isMobile:d,unreadAccessRequests:l,disableAddMembers:c}=e,f=(0,i().v3)(),S=(0,o().uB)(void 0,X().A),b=(0,o().uB)(void 0,Ne),v=(0,ae().o)({spaceId:t.id});(0,s(852507).l)((()=>{!function(e){ee().A.state.open&&"members"===ee().A.state.currentTab&&ee().A.state.defaultSubtab&&(e.setState({...e.state,currentTab:ee().A.state.defaultSubtab}),ee().A.setState({...ee().A.state,defaultSubtab:void 0}))}(S),async function(e,t,s){if(!t.canAdmin())return;const n=await y().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:t.id}});if("failed"===n.type)throw x().Qg(n),n;s.setState(n.data.recentlyRemovedMembers)}(f,t,b)}));const[{value:A}]=(0,s(187174).Yb)((async()=>{const e=await y().callApi({eventName:"getAccessRequests",environment:f,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const n=e.data.accessRequestIds;return await s(746970).si(f,t,n)}),[f,t],{throttle:1e3}),w=(0,o().O$)(re().subscriptionDataStoreInstance),M=(0,o().K8)((()=>w?oe().Be(w):[]),[w]),j=(0,o().K8)((()=>!!w&&s(496603).Si(M.map((e=>Z().L.createChildStore(t,{table:u().oo,id:e.userId}).isReady())))),[t,w,M]),k=(0,o().K8)((()=>M.filter(p().QE)),[M]),C=(0,o().K8)((()=>(0,U().Qd)()),[]),{tabs:_,selectedTabIndex:T,currentTab:P}=(0,o().K8)((()=>{const e=be(f,t),s=e.map((e=>(0,de.jsx)(pe,{tab:e,unreadAccessRequests:l,accessRequestRenderValues:A},e))),n=S.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(n),currentTab:n}}),[f,t,S,l,A]),D=(0,s(359941).V)({spaceStore:t}),B=(0,n.useCallback)((e=>{!function(e,t,s,n){const i=be(t,s)[e];switch(i){case X().d.Members:h().K4(t,{tab:"members"});break;case X().d.Groups:h().K4(t,{tab:"groups"});break;case X().d.Guests:h().K4(t,{tab:"guests"});break;case X().d.Reprovisioning:h().K4(t,{tab:"reprovisioning"});break;case X().d.Requests:h().K4(t,{tab:"requests"});break;case X().d.Contacts:h().K4(t,{tab:"contacts"});break;default:(0,m().HB)(i)}n.state.currentTab===X().d.Requests&&i!==X().d.Requests&&te().A.reset();!function(e,t){t.setState({...t.state,currentTab:e})}(i,n)}(e,f,t,S)}),[f,t,S]),N=(0,a().IS)((e=>({tabBarMenuItem:{paddingInlineStart:0,paddingInlineEnd:0,marginTop:-6,marginBottom:14,overflowY:void 0,overflowX:void 0},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:s(284371).Wy.medium,fontSize:17},peopleSubtitle:{fontSize:15},peopleDirectoryLinkContainer:{marginBottom:20,display:"flex",justifyContent:"flex-end"}})),[]);if(!w||!j||void 0===A)return(0,de.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,de.jsx)(r().k,{})});if(d)return(0,de.jsx)(ue,{store:t,spacePermissionsSettingsStore:S,disableAddMembers:c});const R=(0,de.jsxs)(de.Fragment,{children:[D?(0,de.jsx)("div",{style:N.peopleDirectoryLinkContainer,children:(0,de.jsx)(s(301863).$,{})}):void 0,(0,de.jsx)(s(987017).Ay,{tabs:_,selectedIndex:T,onChange:B,style:N.tabBarMenuItem,tabTitleStyle:N.tabTitle}),C?(0,de.jsxs)("div",{style:N.labelContainer,children:[(0,de.jsxs)("div",{style:N.peopleTabTitleContainer,children:[(0,de.jsx)(I().A,{style:N.peopleTabTitle,children:(0,de.jsx)(g().sA,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,de.jsx)(s(690197).A,{href:(0,s(232930).x)("guides.members"),analyticsFrom:"members_settings"})]}),(0,de.jsx)(I().A,{isSecondaryColor:!0,style:N.peopleSubtitle,children:(0,de.jsx)(g().sA,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}):void 0,(0,de.jsx)(s(570918).Qw,{store:t,currentTab:P,inviteLinkCode:v,guests:k,spacePermissionsSettingsStore:S,recentlyRemovedMembersStore:b,accessRequestRenderValues:A})]});return(0,de.jsx)(s(843878).Ay,{children:R})}function ue(e){const{store:t,spacePermissionsSettingsStore:s,disableAddMembers:n}=e,i=(0,o().K8)((()=>t.canEditMembership()&&!n),[t,n]),a=Ae();return(0,de.jsxs)("div",{style:{height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:[i?(0,de.jsxs)(k().A,{shouldShowBottomDivider:!0,children:[(0,de.jsx)(Ie,{store:t}),(0,de.jsx)("div",{style:a,children:(0,de.jsx)(_e,{store:t,isMobile:!0,spacePermissionsSettingsStore:s})})]}):void 0,(0,de.jsx)(De,{store:t})]})}function pe({tab:e,accessRequestRenderValues:t,unreadAccessRequests:s}){const n=(0,i().v3)(),r=(0,L().T)(),d=(0,o().O$)(Y().AppStoreSidebarSpaceStore),l=(0,z().V_)({spaceStore:d,userId:r}),c=(0,N().x)({spaceUserMembershipType:l}),u=(0,o().K8)((()=>function(e){return oe().vl(e)&&me()}(n)),[n]),p=(0,o().K8)((()=>Q().A.state.permissionGroupsAndMemberCounts.length),[]),h=(0,o().K8)((()=>(0,U().Qd)()),[]),f=(0,q().r)()??0,S=(0,G().V)()??1,y=(0,a().IS)((e=>({lightTextColor:{color:e.text.tertiary}})),[]);switch(e){case X().d.Members:return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),c?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)("span",{children:" "}),(0,de.jsx)("span",{style:y.lightTextColor,children:S})]}):void 0]});case X().d.Groups:return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(g().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),u&&c&&(0,m().O9)(p)?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)("span",{children:" "}),(0,de.jsx)("span",{style:y.lightTextColor,children:p})]}):void 0]});case X().d.Guests:return(0,de.jsxs)(de.Fragment,{children:[h?(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),c?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)("span",{children:" "}),(0,de.jsx)("span",{style:y.lightTextColor,children:f})]}):void 0]});case X().d.Reprovisioning:return(0,de.jsx)(g().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case X().d.Requests:return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(g().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),c?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)("span",{children:" "}),(0,de.jsx)("span",{style:y.lightTextColor,children:(0,de.jsx)(Te,{accessRequestRenderValues:t})}),(0,de.jsx)(we,{unreadAccessRequests:s})]}):void 0]});case X().d.Contacts:return(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.contactsTab.title",defaultMessage:"Contacts"});default:(0,m().HB)(e)}}const ge=n.memo(ce);function me(){const e=re().subscriptionDataStoreInstance.state;return Boolean(e&&oe().Fq(e))}function he({userStore:e,restorationStatus:t}){return(0,de.jsx)($().A,{actorStore:e,restorationStatus:t})}function fe(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Se(e,t){var s;return t.canAdmin()&&(0,ie().zD)(e,{name:"content_reprovisioning",spaceId:t.id,userId:null===(s=e.currentUser)||void 0===s?void 0:s.id})}function ye(e){return e.canEditMembership()&&(0,U().x3)()}function be(e,t){return[X().d.Members,X().d.Groups,X().d.Guests,...Se(e,t)?[X().d.Reprovisioning]:[],...ye(t)?[X().d.Requests]:[]]}function xe({store:e}){const t=(0,i().v3)();return(0,o().K8)((()=>e.isDefined()),[e])?(0,de.jsx)(g().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:s=>(0,de.jsx)(T().A,{onClick:()=>{x().ui({message:(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:x().zw,items:[{label:(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await y().callApi({eventName:"refreshInviteLink",environment:t,data:{spaceId:e.id}}),ne().x(t)}}]})},children:s})}}):null}function ve({inviteLinkUrl:e,isMobile:t}){const s=(0,i().v3)(),{mobileNative:n}=s,o=(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),a=async()=>{const t=await b().R.clipboardActions.load();t.copyString({environment:s,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),(0,S().b)(s)},r=()=>{n&&n.share(e),(0,S().b)(s)};return t?(0,de.jsxs)("div",{children:[(0,de.jsx)(j().A,{type:"text",format:j().C.Default,value:e,disabled:!0}),n?(0,de.jsx)(d().A,{size:"lg",onClick:r,style:{marginTop:10,width:"100%"},children:(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,de.jsx)(d().A,{size:"lg",onClick:a,style:{marginTop:10,width:"100%"},children:o})]}):(0,de.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,de.jsx)(j().A,{type:"text",format:j().C.Default,value:e,disabled:!0,style:{borderStartEndRadius:0,borderEndEndRadius:0,width:"calc(100% - 90px)",height:32}}),(0,de.jsx)(l().A,{colorPalette:"blue",onClick:a,style:{borderStartStartRadius:0,borderEndStartRadius:0},size:"lg",children:o})]})}function Ae(){const{WindowSizeStore:e}=(0,i().v3)(),t=(0,o().K8)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,a().IS)((e=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingInlineStart:14,paddingInlineEnd:t,background:e.background.elevated}})),[t]).mobileMenuItem}function we({unreadAccessRequests:e}){const t=(0,a().DP)();return e&&e>0?(0,de.jsx)(E().m,{color:t.red.icon.accentPrimary,style:{marginInlineStart:6}}):null}function Me(){const e=(0,g().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});v().m({message:e.updatingPermissions})}function je(){v().V()}function ke({buttonStyle:e,spaceStore:t}){const s=(0,i().v3)(),a=(0,o().K8)((()=>t.canEditMembership()),[t]),r=(0,o().K8)((()=>!a&&!t.getDisableMembershipRequests()&&(0,U().x3)()),[a,t]),d=(0,n.useMemo)((()=>(0,J().nc)()),[]),c=(0,o().K8)((()=>me()),[]),u=(0,n.useCallback)((()=>{(0,H().qU)(s)}),[s]);return r?(0,de.jsx)(W().cx,{spaceStore:t,analyticsFrom:"space_settings_add_members",origin:(0,de.jsx)(l().A,{colorPalette:"blue",size:"lg",onClick:u,children:(0,de.jsx)(g().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,de.jsx)(V().H,{disabled:!a,targetStore:t,spaceStore:t,permissionsInviteStore:d,onInviteClick:Me,onInviteComplete:je,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e,analyticsFrom:"space_settings_add_members"})}function Ce({member:e,store:t}){const s=(0,i().v3)(),n=(0,z().I_)(),a=(0,o().K8)((()=>null==n?void 0:n.getModel()),[n]),r=(0,o().O$)(Y().AppStoreCurrentUserSettingsStore);return r&&a?(0,de.jsx)(B().VI,{currentSpaceUser:a,targetUserId:e.userId,currentType:e.membershipType,isInvite:!1,isMenuItem:!1,buttonStyle:le,from:"spaceSettings",upgradeFrom:"space_permission_item",onClick:()=>{h().jR(s,{from:"member",button_name:"open_role"})},onChange:async n=>{"none"===n&&e.userId!==a.getUserId()?await se().Vr({userId:e.userId,currentMembershipType:e.membershipType,spaceStore:t,environment:s,userSettingStore:r}):await se().JZ({environment:s,userId:e.userId,newMembershipType:n,currentUserSettingsStore:r,spaceStore:t})}}):null}function Ie({store:e}){const t=(0,a().DP)(),s=Ae();return(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)("div",{style:s,children:(0,de.jsx)(ke,{spaceStore:e,buttonStyle:{flex:1}})}),(0,de.jsx)("div",{style:{borderBottom:`1px solid ${t.regularDividerColor}`}})]})}function _e({store:e,isMobile:t,spacePermissionsSettingsStore:s}){const n=(0,i().v3)(),a=(0,R().Gg)({spaceStore:e}),r=(0,ae().o)({spaceId:e.id}),d=(0,o().K8)((()=>function(e,t,s){if(void 0===s)return;const n=e.id;return s?(0,F().X)(t,n,s):void 0}(e,n,r)),[n,e,r]),l=(0,o().K8)((()=>fe(e)),[e]);return a&&d?(0,de.jsxs)("div",{children:[(0,de.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,de.jsxs)("div",{style:{marginInlineEnd:8,flexGrow:1},children:[(0,de.jsx)(D().A,{children:(0,de.jsx)(g().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,de.jsxs)(I().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,de.jsx)(g().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",t?void 0:(0,de.jsx)(xe,{store:e})]})]}),(0,de.jsx)("div",{style:{marginTop:5},children:(0,de.jsx)(C().A,{on:l,onClick:()=>function(e,t){const s=!fe(e);f().OE(t,{enabled:s}),w().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{A().Xk({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(e,n)})})]}),s&&l&&d?(0,de.jsx)("div",{style:t?{marginTop:5}:void 0,children:(0,de.jsx)(ve,{isMobile:t,inviteLinkUrl:d})}):void 0,(0,de.jsx)(M().A,{size:40})]}):null}function Te({accessRequestRenderValues:e}){const t=(0,o().K8)((()=>e?e.filter((e=>"pending"===e.accessRequest.status)).length:0),[e]);return e?(0,de.jsx)("span",{children:t}):(0,de.jsx)("span",{})}function Pe({group:e,user:t,userStore:s,store:n}){const i=(0,o().K8)((()=>(0,U().Qd)()),[]),a=(0,o().K8)((()=>me()),[]);return(0,p().QE)(t)?i&&"team_guests"===e?(0,de.jsx)(O().A,{teamGuest:t}):(0,de.jsx)(_().V,{store:n,guestPageIds:t.guestPageIds,guestStore:s,isSubscribed:a,hideActionButtons:i}):(0,de.jsx)(Ce,{store:n,member:t})}function De({store:e}){const t=(0,a().IS)((e=>({container:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:`0 -1px 0 ${e.regularDividerColor}`},loadingContainer:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),s=(0,K().n)({sort:{field:"type",direction:"desc"},query:"",filter:c().v1,limit:30}),n=(0,o().K8)((()=>!(null!=s&&s.rowsStore.state.rows)),[s]);return!s||n?(0,de.jsx)("div",{style:t.loadingContainer,children:(0,de.jsx)(r().k,{})}):(0,de.jsx)("div",{style:t.container,children:(0,de.jsx)(P().u,{listSource:s,renderRow:t=>(0,de.jsx)(Be,{member:t,spaceStore:e}),estimateSize:()=>57})})}function Be({member:e,spaceStore:t}){const s=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingInlineEnd:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.background.elevated},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginInlineStart:"auto",flexShrink:0}})),[]),n=(0,o().K8)((()=>Z().L.createChildStore(t,{table:u().oo,id:e.id})),[e,t]);return void 0!==e.membership_type&&(0,c().MN)(e.membership_type)?(0,de.jsxs)("div",{style:s.container,children:[(0,de.jsx)("div",{style:s.memberContainer,children:(0,de.jsx)(he,{userStore:n})}),(0,de.jsx)("div",{style:s.permissionContainer,children:(0,de.jsx)(Pe,{store:t,group:"members",user:{userId:e.id,membershipType:e.membership_type},userStore:n})})]},e.id):null}class Ne extends(()=>s(757695))().Store{getInitialState(){}}},675291:(e,t,s)=>{s.d(t,{Hw:()=>V});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(672577),s(581454);var n=s(296540),i=()=>s(59226),o=()=>s(484714),a=()=>s(56366),r=()=>s(401497),d=()=>s(396896),l=()=>s(591779),c=()=>s(187174),u=()=>s(386164),p=()=>s(848538),g=()=>s(798880),m=()=>s(69708),h=()=>s(778078),f=()=>s(559506),S=()=>s(314529);var y=()=>s(240865),b=()=>s(646736),x=()=>s(118789),v=()=>s(870092),A=()=>s(134217),w=()=>s(749240),M=()=>s(710149),j=()=>s(125565),k=()=>s(368401),C=()=>s(792223),I=()=>s(762286),_=s(474848);const T="user",P={by:T,asc:!0};function D({users:e,spaceStore:t,memberCount:s,listSource:r,searchQuery:d}){const c=(0,i().X)("should_track_workspace_settings_members_render"),u=(0,n.useRef)(void 0),p=(0,l().ZC)(d,""),g=(0,n.useRef)(!1),m=(0,a().K8)((()=>null==r?void 0:r.rowsStore.state.hasMore),[r]),h=(0,o().v3)();(0,n.useEffect)((()=>{if(!c)return;if(((null==p?void 0:p.length)??0)>0&&0===d.length&&(g.current=!0),void 0===e)return;if(d.length>0)return;const n=e.length,i=u.current,o=0===n&&!1===m,a=n>0&&(void 0===i||n>i);if(o&&g.current)return void(g.current=!1);(o&&0!==i||a)&&(!function(e){const{environment:t,eventName:s,eventProperties:n,opts:i}=e;(0,S().DO_NOT_USE_trackLegacy)(t,s,n,{...i,sampling:(null==i?void 0:i.sampling)||{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}})}({environment:h,eventName:"workspace_member_settings_render_impression",eventProperties:{workspace_id:t.id,rendered_member_count:n,total_member_count:s}}),u.current=n)}),[e,h,t.id,s,m,d,p,c])}function B(){const e=(0,r().IS)((e=>({emptyMessage:{color:e.text.secondary,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"}})),[]);return(0,_.jsx)(j().A,{isSmall:!0,style:e.emptyMessage,children:(0,_.jsx)(m().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"})})}const N={id:T,headerTitle:(0,_.jsx)("div",{style:{fontSize:14},children:(0,_.jsx)(m().sA,{id:"peopleSectionMembersTable.userTable.user",defaultMessage:"User"})}),renderCell:e=>(0,_.jsx)(s(636020).A,{userId:e.id,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{widthPercent:35,minWidth:250},sortable:!0},R={id:"teams",headerTitle:(0,_.jsx)("div",{style:{fontSize:14},children:(0,_.jsx)(m().sA,{id:"peopleSectionMembersTable.userTable.teamspaces",defaultMessage:"Teamspaces"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>e.isSpaceUserStoreLoaded&&void 0!==e.spacePermissionGroupIds?(0,_.jsx)(s(967554).o,{userId:e.id,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}):(0,_.jsx)(M().A,{style:{width:100,height:12,borderRadius:4,marginInlineStart:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},E={id:"groups",headerTitle:(0,_.jsx)("div",{style:{fontSize:14},children:(0,_.jsx)(m().sA,{id:"peopleSectionMembersTable.userTable.groups",defaultMessage:"Groups"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>void 0!==e.spacePermissionGroupIds?(0,_.jsx)(s(570918).w7,{groupIds:e.spacePermissionGroupIds,store:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore}):(0,_.jsx)(M().A,{style:{width:60,height:12,borderRadius:4,marginInlineStart:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},O={id:"role",headerTitle:(0,_.jsx)("div",{style:{fontSize:14},children:(0,_.jsx)(m().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>(0,_.jsx)(s(469968).w,{userId:e.id,membershipType:e.membershipType,spaceStore:e.spaceStore}),widthData:{widthPercent:25,minWidth:155},sortable:!0};function V(e){const{spaceStore:t,spacePermissionsSettingsStore:s}=e,r=(0,n.useMemo)((()=>[N,R,E,O]),[]),l=(0,y().V)(),{recentlyRemovedMembers:m}=function(e){const t=(0,a().K8)((()=>{const e=w().subscriptionDataStoreInstance.state;return e?(0,A().Ye)(e):[]}),[]);return{recentlyRemovedMembers:(0,C().BV)({spaceStore:e,members:t})}}(t),{listSource:S,users:M,sort:j,setSort:V,searchQuery:U}=function(){const e=(0,a().K8)((()=>I().A.state.searchQuery??""),[]),[t,s]=(0,n.useState)(void 0),o=(0,n.useRef)(""),r=(0,i().X)("use_string_similarity_people_table_search"),d=r&&e&&e.length>0;(0,n.useEffect)((()=>{if(!r)return;const n=o.current,i=e;0===n.length&&i.length>0&&t?s(void 0):e&&0!==e.length||t||s(P),o.current=i}),[e,t,r]);const l=(0,n.useMemo)((()=>{if(!d||t)return t?{field:t.by===T?"name_normalized":"type",direction:t.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}}),[t,d]),c=(0,x().n)({query:e,sort:l,filter:p().v1,limit:30}),u=(0,a().K8)((()=>{const s=null==c?void 0:c.rowsStore.state.rows;return d&&s&&!t?(0,h().Ay)(e,s,(e=>{const t=[e.name,e.email];return e.aliases&&e.aliases.length>0&&t.push(...e.aliases),t.filter(Boolean).join(" ")}),{getSortScore:e=>-e.score}):s}),[c,e,t,d]);return{listSource:c,users:u,sort:t??(d?void 0:P),setSort:s,searchQuery:e}}(),F=function({spaceStore:e,spacePermissionsSettingsStore:t,recentlyRemovedMembers:s,users:i}){const r=(0,o().v3)(),[d,l]=(0,n.useState)({});(0,c().Yb)((async()=>{if(!i)return;const t=i.map((e=>e.id)),s=await f().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:r,data:{spaceId:e.id,userIds:t},headers:(0,u().WS)({cellId:void 0,spaceId:e.id})});"success"===s.type&&l((e=>{const n={...e,...s.data.userToGroupMap};for(const s of t)void 0===n[s]&&(n[s]=[]);return n}))}),[r,e.id,i],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3});const m=(0,C().k4)({spaceStore:e}),h=(0,a().K8)((()=>e.canAdmin()),[e]);return(0,n.useCallback)((n=>{var i;const o=(0,b().dp)(e,n.id),a=o.getMembershipType()??n.membership_type;if(void 0===a||!(0,p().MN)(a))return;const r=(0,p().C4)(a);return{id:n.id,role:r,membershipType:a,firstJoinedSpaceTime:n.first_joined_space_time,spaceStore:e,spaceUserStore:o,isSpaceUserStoreLoaded:o.isReady(),restorationStatus:null==s||null===(i=s.find((e=>e.userId===n.id)))||void 0===i?void 0:i.restorationStatus,spacePermissionsSettingsStore:t,spacePermissionGroupIds:d[n.id],shouldDisableAction:!h&&m&&("editor"===r||"membership_admin"===r),userStore:v().L.createChildStore(e,{id:n.id,table:g().oo})}}),[s,t,e,d,h,m])}({spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembers:m,users:M});return D({users:M,spaceStore:t,memberCount:l,listSource:S,searchQuery:U}),(0,_.jsx)(d().fI,{paddingBottom:36,children:(0,_.jsx)(k().M,{columns:r,listSource:S,transformRow:F,sort:j,onSortChange:V,estimatedRowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,_.jsx)(B,{}),memberCount:l,spaceStore:t})})}},678894:(e,t,s)=>{s.d(t,{A:()=>o});var n=()=>s(604995);class i extends(()=>s(757695))().Store{getInitialState(){return{uploadingProfilePhoto:!1,name:"",startDayOfWeek:(0,n().Lm)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const i=e.getFullName(s),o=e.getProfilePhoto(),a=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:i||"",startDayOfWeek:void 0===(null==a?void 0:a.start_day_of_week)?(0,n().Lm)():null==a?void 0:a.start_day_of_week}}}}const o=i},704444:(e,t,s)=>{s.d(t,{S:()=>h,y:()=>m});s(296540);var n=()=>s(484714),i=()=>s(401497),o=()=>s(631524),a=()=>s(75756),r=()=>s(668725),d=()=>s(69708),l=()=>s(529543),c=()=>s(455215),u=()=>s(74464),p=()=>s(702723),g=s(474848);function m(e){return(0,l().canSetCookie)(e)&&(0,l().canShowCookieUi)(e)}function h({isMobile:e}){return m((0,n().v3)())?(0,g.jsx)(p().A,{isMobile:e,title:(0,g.jsx)(d().sA,{...a().LS.cookieSettingsLabel}),caption:(0,a().Qq)(u().i,"settings"),type:"custom",customButton:(0,g.jsx)(f,{})}):null}function f(){const e=(0,i().DP)();return(0,g.jsx)(c().A,{hasDismissButton:!1,renderOrigin:t=>(0,g.jsxs)(o().p,{style:{paddingInlineStart:8,paddingInlineEnd:8,height:32},...t,children:[(0,g.jsx)(d().sA,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,r().b)({width:10,marginInlineStart:4,fill:e.icon.tertiary})]})})}},710857:(e,t,s)=>{s.d(t,{x:()=>i});const n={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1,suggested:!0,trending:!0,shortcuts:!0};function i(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...n,...t}}},718191:(e,t,s)=>{s.d(t,{B:()=>m});s(296540);var n=()=>s(726637),i=()=>s(484714),o=()=>s(56366),a=()=>s(762433),r=()=>s(979340),d=()=>s(69708),l=()=>s(702723),c=()=>s(709062),u=()=>s(324561),p=()=>s(783192),g=s(474848);function m({spaceStore:e,securitySettingsStore:t,organizationOverrides:s,readOnly:m}){const y=(0,i().v3)(),b=(0,o().K8)((()=>e.getSpaceId()),[e]),x=(0,u().lh)({spaceId:b}),v=(0,a().AI)(x),A=(0,r().jR)(v),w=A,M=A?void 0:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"},j=(0,o().K8)((()=>t.getValueForSpace(e)),[t,e]);if(!j)return null;const k=A&&!Boolean(j.disableMembershipRequests),C=A&&!Boolean(j.disableExternalMembershipRequests),I=A&&!Boolean(j.disableGuestMembershipRequests);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l().A,{type:"toggle",isMobile:Boolean(n().A.isMobile),disabled:m,isOn:k,isLocked:Boolean(s.disable_membership_requests),lockedTooltip:(0,c().C_)(),onToggle:()=>{(0,p().v)({name:"disableMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:y})},upsellOptions:M?{upsell:M,analyticsName:"disable_membership_requests",customMessages:h}:void 0,title:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),caption:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})}),(0,g.jsx)(l().A,{type:"toggle",isMobile:Boolean(n().A.isMobile),disabled:m,isOn:C,isLocked:Boolean(s.disable_external_membership_requests),lockedTooltip:(0,c().C_)(),onToggle:()=>{(0,p().v)({name:"disableExternalMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:y})},upsellOptions:M?{upsell:M,analyticsName:"disable_external_membership_requests",customMessages:f}:void 0,title:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),caption:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})}),w?(0,g.jsx)(l().A,{type:"toggle",isMobile:Boolean(n().A.isMobile),disabled:m,isOn:I,isLocked:Boolean(s.disable_guest_membership_requests),lockedTooltip:(0,c().C_)(),onToggle:()=>{(0,p().v)({name:"disableGuestMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:y})},upsellOptions:M?{upsell:M,analyticsName:"disable_guest_membership_requests",customMessages:S}:void 0,title:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),caption:(0,g.jsx)(d().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})}):null]})}const h=(0,d().YK)({eligible_for_upgrade:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to let members submit requests to admins to add more members"},eligible_for_trial:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let members submit requests to admins to add more members"},sales_eligible:{id:"securitySettings.disableMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let members submit requests to admins to add more members"},sales_assisted:{id:"securitySettings.disableMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let members submit requests to admins to add more members"},eligible_to_request:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let members submit requests to admins to add more members"},not_eligible:{id:"securitySettings.disableMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let members submit requests to admins to add more members"},request_pending:{id:"securitySettings.disableMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let members submit requests to admins to add more members"}}),f=(0,d().YK)({eligible_for_upgrade:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},eligible_for_trial:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},sales_eligible:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},sales_assisted:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},eligible_to_request:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},not_eligible:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},request_pending:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let users with teamspace invite links submit requests to admins to be added as members"}}),S=(0,d().YK)({eligible_for_upgrade:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleForUpgrade",defaultMessage:"<highlight>Upgrade</highlight> to let guests of the workspace submit requests to admins to be added as members"},eligible_for_trial:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let guests of the workspace submit requests to admins to be added as members"},sales_eligible:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let guests of the workspace submit requests to admins to be added as members"},sales_assisted:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let guests of the workspace submit requests to admins to be added as members"},eligible_to_request:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let guests of the workspace submit requests to admins to be added as members"},not_eligible:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let guests of the workspace submit requests to admins to be added as members"},request_pending:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let guests of the workspace submit requests to admins to be added as members"}})},739793:(e,t,s)=>{s.d(t,{A:()=>y});s(898992),s(354520);var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(69708),r=()=>s(534177),d=()=>s(878079),l=()=>s(420844),c=()=>s(765957),u=()=>s(704444),p=()=>s(802790),g=()=>s(332381),m=()=>s(8178),h=()=>s(537296),f=()=>s(388450),S=s(474848);const y=(0,s(149397).k)((function({isMobile:e,isMobileNative:t,passwordRequestStore:y,userEmailDomainSettings:b,billingData:x}){const{isElectron:v,isPhone:A,isAndroid:w}=(0,i().Y0)(),M=(0,i().v3)(),j=(0,o().O$)(s(929219).e),k=(0,o().K8)((()=>{var t,s;const n=(null===(t=c().default.state.sidebarSpaceViewStore)||void 0===t?void 0:t.getNotifyEmail())||!1,i=Boolean(null===(s=c().default.state.sidebarSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),o=(0,d().fb)(),a=(0,d().Z5)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:n,slackSettingsAndGates:i}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:n}=e;return s?n?[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_mention"})}:void 0].filter(r().O9):[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})}]:[]}(i);return[t?{key:"notify_mobile",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_mobile"})}:void 0,!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_desktop"})}:void 0,!t&&s?{key:"disable_ai_meeting_notes_audio_process_detection_notification",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"disable_ai_meeting_notes_audio_process_detection_notification"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email"})},n?{key:"notify_email_always",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"marketing_emails"})}].filter(r().O9)}({isMobile:e,isElectron:v,showNotifyEmailAlwaysSetting:n,slackSettingsAndGates:{isSlackNotificationSettingEnabled:i,showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:a}})}),[e,v]),C=(0,l().OC)({environment:M}),I=(0,o().uB)(void 0,s(678894).A);(0,s(852507).l)((()=>{s(804411).Q(M,I)}));const _=(0,o().K8)((()=>I.state.accountSettings),[I]),T=(0,s(135055).y6)(),P=(0,o().K8)((()=>e?(0,l().xF)({isPhone:A,isMobileNative:t,isAndroid:w,showOfflineSettings:T,passwordRequestStore:y,userEmailDomainSettings:b,billingData:x,accountSettings:_}):C),[C,e,A,t,w,T,y,b,x,_]),D=(0,o().K8)((()=>[(0,u().y)(M)?{key:"cookies",renderSettingsItem:()=>(0,S.jsx)(u().S,{isMobile:e})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,S.jsx)(s(991627).L,{isMobile:e})}].filter(r().O9)),[M,e]),B=(0,o().K8)((()=>M.WindowSizeStore.state.paddingBottomCSS),[M]);return(0,n.useEffect)((()=>{(0,s(749804).I)({environment:M})}),[M]),j?(0,S.jsxs)(s(843878).Ay,{disableScroller:e,children:[(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.notificationSection.title.v2",defaultMessage:"Notifications"})}),(0,S.jsx)(h().U,{items:k}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.settingsSection.title.v2",defaultMessage:"Preferences"})}),(0,S.jsx)(h().U,{items:P}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,S.jsx)(h().U,{items:D}),(0,S.jsx)(p().A,{size:48,isHidden:!1}),(0,S.jsx)("div",{style:{marginTop:4,marginBottom:e?B:void 0},children:(0,S.jsx)(s(690197).A,{title:(0,S.jsx)(a().sA,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(232930).x)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,S.jsx)(s(667734).g,{})}))},748902:(e,t,s)=>{s.r(t),s.d(t,{arrowDiagonalUpRightFillSmallIcon:()=>i,iconDefinition:()=>n});s(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.52 3.53 8.94 8.94",directional:!0,svg:(0,s(474848).jsx)("path",{d:"M12.462 4.288a.75.75 0 0 0-.75-.75H5.603a.75.75 0 1 0 0 1.5h4.299l-6.177 6.177c-.275.274-.26.735.032 1.027.293.293.754.308 1.028.033l6.177-6.177v4.299a.75.75 0 0 0 1.5 0z"})},i=(0,s(340498).wt)("arrowDiagonalUpRightFillSmall",n)},765140:(e,t,s)=>{s.d(t,{n:()=>n});const n=(0,s(340498).xh)("apple",{default:{loader:()=>s.e(5815).then(s.bind(s,834258))},darkMode:{loader:()=>s.e(5815).then(s.bind(s,425722))},tintable:{loader:()=>s.e(5815).then(s.bind(s,888976))}})},775471:(e,t,s)=>{s.d(t,{B:()=>m});s(581454),s(296540);var n=()=>s(56366),i=()=>s(401497),o=()=>s(699143),a=()=>s(69708),r=()=>s(534177),d=()=>s(493552),l=()=>s(115562),c=s(474848);function u(e){const{isChecked:t,label:s,onClickToggle:n}=e,o=(0,i().IS)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:o.row,children:[(0,c.jsx)(l().W,{checked:t,onChange:n}),(0,c.jsx)(d().D,{styleKey:"Body/Regular",children:s})]})}var p=()=>s(623580);function g(e){const{inputText:t,isChecked:s,label:n,onClickToggle:i,placeholderText:a,setInputText:r}=e;return(0,c.jsxs)(o().Y1,{gap:8,children:[(0,c.jsx)(u,{label:n,isChecked:s,onClickToggle:i}),s?(0,c.jsx)(p().A,{autoFocus:!0,value:t,placeholder:a,onChange:e=>r(e.target.value)}):null]})}function m(e){const{store:t}=e,s=(0,i().IS)((e=>({container:{border:`1px solid ${e.border.secondary}`,borderRadius:6}})),[]),d=(0,n().K8)((()=>t.state.options),[t]),{selectedIndexes:l,customTextByIndex:p}=(0,n().K8)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),m=(0,a().tz)();return(0,c.jsx)(o().Y1,{padding:"16px 16px",style:s.container,gap:12,children:d.map(((e,s)=>{const{type:n}=e,i=l.has(s);switch(n){case"checkbox":return(0,c.jsx)(u,{isChecked:i,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?m.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(g,{inputText:p[s]??"",isChecked:i,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,r().HB)(n)}}))})}},777967:(e,t,s)=>{s.d(t,{x:()=>U});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var n=s(296540),i=()=>s(564884),o=()=>s(484714),a=()=>s(56366),r=()=>s(401497),d=()=>s(617871),l=()=>s(165358),c=()=>s(591779),u=()=>s(798880),p=()=>s(69708),g=()=>s(496603),m=()=>s(229833),h=()=>s(763824),f=()=>s(534177),S=()=>s(559506),y=()=>s(477293),b=()=>s(646736),x=()=>s(549200),v=()=>s(53137),A=()=>s(957599),w=()=>s(870092),M=()=>s(486130),j=()=>s(641300),k=()=>s(710149),C=()=>s(125565),I=()=>s(719147),_=()=>s(42648),T=()=>s(762286),P=s(474848);const D=25;var B=function(e){return e.Contact="contact",e.Loading="loading",e}(B||{});const N={id:"user",widthData:{width:30},headerTitle:(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.name",defaultMessage:"User"}),sortable:!0,renderCell:e=>{if(e.type===B.Loading)return(0,P.jsx)(s(236527).a,{});const t=e.email.length>30,n=()=>(0,P.jsx)(s(453697).A,{size:32,type:"avatar-name-email",...e.userStore?{userStore:e.userStore}:{avatar:{name:e.name,email:e.email,avatarUrl:e.profilePhoto}}});return t?(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8},children:(0,P.jsx)(s(859428).A,{renderTooltip:()=>(0,P.jsx)("div",{children:e.email}),placement:"right",alignment:"center",render:t=>(0,P.jsx)("div",{"aria-label":e.email,...t,children:n()})})}):n()}},R={id:"teamspaces",widthData:{width:20},headerTitle:(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.teamspaces",defaultMessage:"Teamspaces"}),sortable:!1,renderCell:e=>{if(e.type===B.Loading)return(0,P.jsx)(k().A,{});const t=e.userId,n=e.spacePermissionGroupIds;return t&&n?(0,P.jsx)(s(967554).o,{userId:t,userPermissionGroupIds:n}):(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.teamspaces.none",defaultMessage:"None"})}};const E={id:"source",widthData:{width:10},headerTitle:(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.source",defaultMessage:"Source"}),sortable:!1,renderCell:e=>{if(e.type===B.Loading)return(0,P.jsx)(k().A,{});const{sourceDisplay:t,iconGroup:n}=function(e){switch(e){case"slack":return{sourceDisplay:"Slack",iconGroup:_().jJ};case"google":return{sourceDisplay:"Google",iconGroup:_().mt};case"microsoft":return{sourceDisplay:"Microsoft",iconGroup:_().gs};case"guest":return{sourceDisplay:"Guest",iconGroup:void 0};default:return{sourceDisplay:e,iconGroup:void 0}}}(e.source);return(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[n?(0,P.jsx)(s(460292).Q,{style:{width:16,height:16},iconGroup:n,variantName:"default"}):void 0,t]})}},O={id:"role",widthData:{width:40,minWidth:100},headerTitle:(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.role",defaultMessage:"Role"}),sortable:!1,renderCell:e=>{if(e.type===B.Loading)return(0,P.jsx)(k().A,{});if(e.spaceMembershipType){var t;if("page_guest"===e.spaceMembershipType&&null!==(t=e.userStore)&&void 0!==t&&t.getOnboardingCompleted())return(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.role.guest",defaultMessage:"Guest"});if("none"!==e.spaceMembershipType){const{label:t}=(0,s(201651).BL)({membershipType:e.spaceMembershipType,isRemovable:!1,isCurrentUser:!1});return(0,P.jsx)(p().sA,{...t})}}return e.isInvited?(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.role.invited",defaultMessage:"Invited"}):(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.role.not_invited",defaultMessage:"Not invited"})}},V=[...Array(10)].map(((e,t)=>({type:B.Loading,id:`loading-${t}`,isClickable:!1})));function U(e){const t=(0,o().v3)(),{spaceStore:s}=e,[k,_]=(0,n.useState)(!1),[U,F]=(0,n.useState)({column:N,sortAscending:!0}),[L,q]=(0,n.useState)([]),[G,z]=(0,n.useState)({contacts:[],invites:[]}),[K,W]=(0,n.useState)(!0),{googleContactsAuthentications:H,slackAuthentications:$,microsoftContactsAuthentications:Y}=(0,a().K8)((()=>({googleContactsAuthentications:v().A.externalAuthentications.state.filter((e=>e.integration_id===d().E8)),slackAuthentications:v().A.completeSlackAuthentications.state,microsoftContactsAuthentications:v().A.externalAuthentications.state.filter((e=>e.integration_id===d().LF))})),[]),Q=(0,a().K8)((()=>T().A.getState().searchQuery),[]),[J,Z]=(0,n.useState)(0),X=(0,c().lW)(Q,250,((e,t)=>e===t));(0,n.useEffect)((()=>{Z(0),q([])}),[X]),(0,n.useEffect)((()=>{!async function(){if(!s)return;const e=[...H.map((e=>({botId:e.id,importContactType:"google"}))),...$.map((e=>({botId:e.id,importContactType:"slack"}))),...Y.map((e=>({botId:e.id,importContactType:"microsoft"})))];e.length>0&&await(0,x().b)({bots:e,spaceId:s.id,environment:t}),_(!0)}()}),[t,s,H,$,Y]),(0,n.useEffect)((()=>{!async function(){var e;if(W(!0),!s||!k)return k&&W(!1),{contacts:[],invites:[]};const n=[],i=[],o=await S().callApi({eventName:"searchContacts",environment:t,data:{spaceId:s.id,importContactType:"all",includeUserId:!0,includeNonNotionUsers:!0,query:X}}).catch((e=>{l().log({level:"error",from:"PeopleSectionContactsTab",type:"searchContacts",error:(0,m().convertErrorToLog)(e)})}));if("success"===(null==o?void 0:o.type)&&null!==(e=o.data)&&void 0!==e&&e.contacts){const{column:e,sortAscending:t}=U,s=(0,g().Ul)(o.data.contacts,(s=>"source"===e.id?t?s.type:`z${s.type}`:"user"===e.id?t?s.name:`z${s.name}`:""));n.push(...s)}if(n.length>0){var a;const e=await S().callApi({eventName:"getInvitesForInvitees",environment:t,data:{spaceId:s.id,inviteeIds:n.map((e=>e.user_id)).filter(f().O9)}}).catch((e=>{l().log({level:"error",from:"PeopleSectionContactsTab",type:"getInvitesForInvitees",error:(0,m().convertErrorToLog)(e)})}));"success"===(null==e?void 0:e.type)&&null!==(a=e.data)&&void 0!==a&&a.invites&&i.push(...e.data.invites)}const r={contacts:n,invites:i};z(r),0===r.contacts.length&&0===r.invites.length&&W(!1)}()}),[t,s,k,U,$,X,H]),(0,n.useEffect)((()=>{if(!G.contacts.length)return;(async()=>{W(!0);const e=G.contacts.slice(J*D,(J+1)*D),n=await(0,h().lX)(e,D,(async(e,n)=>{let i,o,a,r,d=!1,l=new Set;var c,p,g;e.user_id&&(i=new(w().L)(t,{table:u().oo,id:e.user_id}),o=(0,b().dp)(s,e.user_id),a=null===(c=o)||void 0===c?void 0:c.getMembershipTypeAsRoleOrNone(),r=null===(p=o)||void 0===p?void 0:p.getMembershipType(),d=G.invites.some((t=>t.invitee_id===e.user_id)),l=M()._.getSpacePermissionGroupIds({userId:e.user_id,spaceId:s.id}));i&&await(null===(g=i)||void 0===g?void 0:g.waitUntil((()=>{var e,t;return(null===(e=i)||void 0===e?void 0:e.isDefined())&&(null===(t=i)||void 0===t?void 0:t.isReady())})));return{id:`${e.type}-${e.email}`,email:e.email,name:e.name||e.email,source:e.type,userId:e.user_id,profilePhoto:e.profile_photo,isClickable:!1,spaceStore:s,type:B.Contact,userStore:i,spaceRole:a,spaceMembershipType:r,isInvited:d,spacePermissionGroupIds:l}}));q((e=>{if(0===J)return n;const t=new Set(e.map((e=>e.id))),s=n.filter((e=>!t.has(e.id)));return[...e,...s]})),W(!1)})()}),[G,J,s,t]);const ee=(0,n.useCallback)((e=>{F(e),q((t=>{const{column:s,sortAscending:n}=e;return(0,g().Ul)(t,(e=>"source"===s.id?n?e.source:`z${e.source}`:"user"===s.id?n?e.name:`z${e.name}`:""))}))}),[]),te=(0,a().K8)((()=>s.isTeamsEnabled()),[s]),se=(0,n.useMemo)((()=>te?[N,R,O,E]:[N,O,E]),[te]),ne=(0,r().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.border.primary}`,color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"},connectLink:{textDecoration:"underline"}})),[]),ie="control"!==(0,y().r)("microsoft_contacts_import"),oe=(0,n.useCallback)((()=>{Z((e=>e+1))}),[]),ae=(J+1)*D<G.contacts.length,re=(0,n.useMemo)((()=>K&&0===L.length?V:L),[K,L]),de=(0,r().IS)((e=>(0,j().rC)({columnRenderInfo:se,theme:e,containerMarginTop:0})),[se]);return(0,P.jsx)("div",{children:(0,P.jsx)(j().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:se,rows:re,styles:de,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:U,onSortStateChanged:ee,renderNoRowsComponent:()=>(0,P.jsx)(C().A,{isSmall:!0,style:ne.emptyMessage,children:ie?(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.empty.microsoftEnabled",defaultMessage:"No contacts found. <connectlink>Connect your accounts</connectlink> to import contacts.",values:{connectlink:e=>(0,P.jsx)(I().A,{style:ne.connectLink,onClick:()=>{(0,i().u)({environment:t,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:"contacts_tab_empty_state"}}}),A().F.openImportDropdown({shouldAddMembers:!1})},children:e})}}):(0,P.jsx)(p().sA,{id:"peopleSectionContactsTab.empty",defaultMessage:"No contacts found. <connectlink>Connect your Google or Slack account</connectlink> to import contacts.",values:{connectlink:e=>(0,P.jsx)(I().A,{style:ne.connectLink,onClick:()=>{(0,i().u)({environment:t,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:"contacts_tab_empty_state"}}}),A().F.openImportDropdown({shouldAddMembers:!1})},children:e})}})}),loadMoreMethod:{type:"button",onLoadMore:oe,hasNextPage:ae}})})}},782649:(e,t,s)=>{s.d(t,{L:()=>m});s(296540);var n=()=>s(484714),i=()=>s(56366),o=()=>s(97294),a=()=>s(406094),r=()=>s(69708),d=()=>s(369955),l=()=>s(155959),c=()=>s(749240),u=()=>s(125565),p=()=>s(8178),g=s(474848);function m(){const e=(0,n().v3)(),t=(0,i().K8)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingInlineStart:t.isMobile?s.state.paddingLeftCSS:0,paddingInlineEnd:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,g.jsxs)("div",{children:[(0,g.jsx)(f,{}),(0,g.jsxs)("div",{style:t,children:[(0,g.jsx)(u().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,g.jsx)(S,{})}),(0,g.jsx)(h,{})]})]})}function h(){const e=(0,d().L)(),{mobileNative:t}=(0,n().v3)(),{isIOS:s}=(0,n().Y0)(),u=(0,i().K8)((()=>{var e;const t=c().subscriptionDataStoreInstance.state;return"subscribed_admin"===(null==t?void 0:t.type)?null===(e=t.customerData)||void 0===e||null===(e=e.revenueCat)||void 0===e?void 0:e.store:void 0}),[]),p={marginTop:12,marginBottom:4},m=(0,g.jsx)(r().sA,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,l().T)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,g.jsx)(a().A,{size:"lg",style:p,onClick:()=>{t.openUpgradeModal({spaceId:e.getSpaceId(),from:"settings",showActivePlan:!0})},children:m});let h;switch(u){case"app_store":h="https://apps.apple.com/account/subscriptions";break;case"play_store":h="https://play.google.com/store/account/subscriptions"}return(0,g.jsx)(o().N,{href:h,children:(0,g.jsx)(a().A,{size:"lg",style:p,children:m})})}function f(){const e=(0,n().v3)(),{device:t}=e;return(0,g.jsx)(p().A,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,g.jsx)(r().sA,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function S(){const e=(0,n().v3)(),{device:t}=e;return t.isMobile?(0,g.jsx)(r().sA,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,g.jsx)(r().sA,{id:"subscriptionSettings.description",defaultMessage:"You’re currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple’s subscription settings."})}},783192:(e,t,s)=>{s.d(t,{g:()=>i,v:()=>o});var n=()=>s(706024);function i(e,t,s,i){n().X(i,{spaceStore:s,securitySettingsStore:t,fields:e})}function o(e){const{name:t,securitySettingsStore:s,spaceStore:n,environment:o}=e;i({[t]:!s.state[t]},s,n,o)}},785606:(e,t,s)=>{s.d(t,{I:()=>a});var n=s(296540),i=()=>s(484714),o=()=>s(134696);function a(e){const{children:t}=e,s=(0,i().v3)();return(0,n.useEffect)((()=>{o().ig(s,{})}),[s]),t}},792361:(e,t,s)=>{s.d(t,{X:()=>i});var n=()=>s(378815);function i(e){const{fill:t,up:s}=e,i={width:10,height:10,marginInlineStart:4,fill:t};return s?(0,n().arrowStraightDownFillIcon)({...i,transform:"rotate(180deg)"}):(0,n().arrowStraightDownFillIcon)(i)}},804411:(e,t,s)=>{s.d(t,{Q:()=>o});var n=()=>s(920949),i=()=>s(559506);async function o(e,t){const s=await i().callApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,n().Su)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},808936:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>n,paperPlaneIcon:()=>i});s(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.07 2.87 15.11 15.1",svg:(0,s(474848).jsx)("path",{d:"M16.994 3.06a.62.62 0 0 1 .136.673l-5.357 13.843a.625.625 0 0 1-1.131.074l-2.913-5.33L2.4 9.41a.625.625 0 0 1 .074-1.132L16.317 2.92a.63.63 0 0 1 .677.14M8.08 11.087l5.936-5.936L4.18 8.957zm.884.884 2.13 3.898L14.9 6.035z"})},i=(0,s(340498).wt)("paperPlane",n)},841101:(e,t,s)=>{s.d(t,{M:()=>i,a:()=>n});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949);class n extends(()=>s(757695))().Store{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,n=[],i=[],o={};return s.forEach((s=>{const a=t[s];n.push(a.optionName),i.push(s),"checkboxAndInput"===a.type&&e[s]&&(o[a.optionName]=e[s])})),{reasons:n,reasonIndexes:i,customTextByReason:o}}}const i=new n},862961:(e,t,s)=>{s.d(t,{A:()=>b});var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(406094),r=()=>s(69708),d=()=>s(404141),l=()=>s(147294),c=()=>s(702723),u=()=>s(30580),p=()=>s(461857),g=()=>s(364671),m=()=>s(955302),h=()=>s(318575),f=()=>s(538669),S=()=>s(334711),y=s(474848);function b({samlEnforced:e,hasPasskeys:t}){const s=(0,i().v3)(),b=s.device.isMobile,[{rootStateMachine:x,settingsStateMachine:v,totpStateMachine:A,smsStateMachine:w,backupCodesStateMachine:M}]=(0,n.useState)((()=>{const e=new(p().q)(s),t={totpStore:new(S().$),settingsStore:new(h().r),smsStore:new(f().N),backupCodesStore:new(u().Y),rootStore:new(m().y)};return{mfaService:e,rootStateMachine:new(m().J)(t.rootStore),settingsStateMachine:new(h().U)(t.settingsStore,e),totpStateMachine:new(S().U)(t.totpStore,e),smsStateMachine:new(f().G)(t.smsStore,e),backupCodesStateMachine:new(u().b)(t.backupCodesStore,e)}}));const j=(0,y.jsx)(a().A,{size:"lg",onClick:()=>function({rootStateMachine:e,settingsStateMachine:t}){e.rootShowSettings({refresh:!1,startConfirmIdentity:()=>t.passkeySettingsShow()})}({rootStateMachine:x,settingsStateMachine:v}),disabled:e,children:t?(0,y.jsx)(r().sA,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,y.jsx)(r().sA,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})}),k=(0,o().K8)((()=>d().A.state.highlightedSetting===d().r.Passkey),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c().A,{type:"custom",isMobile:b,title:(0,y.jsx)(r().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,y.jsx)(r().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,y.jsx)(l().Ee,{newBadgeKey:"passkey_setting",didUserEngage:!1,keyType:"date"}),shouldHighlight:k,disabled:e,tooltipLabel:(0,y.jsx)(r().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!e,customButton:j}),(0,y.jsx)(g().A,{rootStateMachine:x,settingsStateMachine:v,totpStateMachine:A,smsStateMachine:w,backupCodesStateMachine:M})]})}},863569:(e,t,s)=>{s.d(t,{A:()=>r});s(296540);var n=()=>s(69708),i=()=>s(755199),o=()=>s(765957),a=s(474848);const r=function(){const e=(0,s(484714).v3)(),{device:t}=e,o=(0,s(56366).K8)((()=>d()),[]);return(0,a.jsx)(s(702723).A,{isMobile:t.isMobile,title:(0,a.jsx)(n().sA,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,a.jsx)(n().sA,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===o,onToggle:()=>function(e){const t=d();1===t?i().OQ(e):i().Wq(e)}(e)})};function d(){const{currentUserSettingsStore:e}=o().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},868146:(e,t,s)=>{s.d(t,{u:()=>n});const n=(0,s(340498).xh)("checkmarkShieldFill",{default:{loader:()=>s.e(93213).then(s.bind(s,193213))},small:{loader:()=>s.e(50335).then(s.bind(s,850335))},mini:{loader:()=>s.e(43249).then(s.bind(s,243249))},large:{loader:()=>s.e(56823).then(s.bind(s,956823))}})},881707:(e,t,s)=>{s.d(t,{Dy:()=>r,Os:()=>l,l$:()=>d,qO:()=>a});s(944114),s(898992),s(354520);var n=()=>s(617871),i=()=>s(792071),o=()=>s(402904);function a(e){if(e.integration_id!==n().zG)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,i]=t;return{organizationName:s,accountName:i}}function r(e){return i().Bj6.fromValue(o().As,e).getSlackWorkspaceId()}function d(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function l(e,t=""){const s={};for(const n of e){const{accountName:e,organizationName:i}=a(n);c({query:t,accountName:e,organizationName:i})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:n,workspaceName:i}))}return s}function c(e){const{accountName:t,organizationName:s,query:n}=e;if(0===n.length)return!0;const i=t.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0;return i||o}},881738:(e,t,s)=>{s.d(t,{b:()=>h,l:()=>f});var n=()=>s(314529),i=()=>s(243020),o=()=>s(661461),a=()=>s(972435),r=()=>s(181405),d=()=>s(765957),l=()=>s(589994),c=()=>s(559506),u=()=>s(901389),p=()=>s(496414),g=()=>s(384944);const m=(0,s(69708).YK)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function h(e){const{userStore:t,data:s,transaction:n}=e,i={};"name"in s&&s.name&&(i.name=s.name),"profilePhoto"in s&&(i.profile_photo=s.profilePhoto),0!==Object.keys(i).length&&g().zv({store:t,data:i,transaction:n})}async function f(e){p().m({message:m.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:g}=d().default.state;if(!s||!g||!t)return p().V(),void u().f1(a().A.formatMessage(m.noUserError));(0,n().DO_NOT_USE_trackLegacy)(e,"delete_user");const h=await c().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===h.type)await l().transactionQueue.clearForUser(t),r().Yq({environment:e,userId:t,logoutOrigin:i().d.DeleteAccount});else{const e=a().A.getIntl();u().f1((0,o().H)(e,h))}p().V()}},910609:(e,t,s)=>{s.d(t,{o:()=>r});var n=()=>s(484714),i=()=>s(56366);const o=new(s(848776).U)(((e,{spaceId:t})=>`${e.currentUser.id}:${t}`),(async(e,{spaceId:t})=>{const n=await Promise.resolve().then(s.bind(s,559506)),i=await n.callApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:t},headers:(0,s(386164).WS)({cellId:void 0,spaceId:t})});if("success"===i.type&&i.data.inviteLinkCode)return i.data.inviteLinkCode}));s(852832).exposeDebugValue("InviteLinkCodeStore",o);const a=o;function r({spaceId:e}){const t=(0,n().v3)();return(0,i().K8)((()=>{if(e)return a.getData(t,{spaceId:e})}),[t,e])}},939583:(e,t,s)=>{s.d(t,{A:()=>R});var n=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(252291),r=()=>s(406094),d=()=>s(94701),l=()=>s(808936),c=s(474848);const u={viewBox:"0 0 20 20",fittedViewBox:"0 0 20 20",svg:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("g",{clipPath:"url(#clip0_14275_138)",children:[(0,c.jsx)("path",{d:"M15.241 7.125H3.015a.625.625 0 0 0-.625.625v4.5c0 .345.28.624.625.625h13.97c.345 0 .624-.28.624-.625V9.622l1.25-1.25v3.878c0 1.035-.84 1.875-1.875 1.875H3.014A1.875 1.875 0 0 1 1.14 12.25v-4.5c0-1.036.84-1.875 1.875-1.875h13.48z"}),(0,c.jsx)("path",{d:"M5.063 9.2a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m3.251 0a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m3.251 0a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m7.391-4.224a.617.617 0 0 1 .868 0 .617.617 0 0 1 0 .868v.011l-4.52 4.52a.7.7 0 0 1-.31.187l-.735.228c-.145.05-.29-.094-.248-.25l.227-.733a.9.9 0 0 1 .187-.31z"})]}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_14275_138",children:(0,c.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},p=(0,s(340498).wt)("passwordField",u);var g=()=>s(560686),m=()=>s(69708),h=()=>s(100622),f=()=>s(496603),S=()=>s(284371),y=()=>s(278768),b=()=>s(559506),x=()=>s(38337),v=()=>s(661461),A=()=>s(916596),w=()=>s(398194),M=()=>s(802790),j=()=>s(297872),k=()=>s(623580),C=()=>s(676007),I=()=>s(125565),_=()=>s(274602),T=()=>s(461857),P=()=>s(653027),D=()=>s(318575),B=()=>s(101919),N=()=>s(702723);function R({mfaStatus:e,isError:t,samlEnforced:s,isEducationPlan:o,hasPassword:a,onReloadSettings:d,email:l}){const u=(0,i().v3)(),p=(0,m().tz)(),g=(0,n.useRef)();(0,n.useEffect)((()=>{if("on"===e&&void 0===g.current){const e=new(T().q)(u),t=new(D().r);g.current=new(D().U)(t,e)}}),[u,e]);const h=(0,n.useCallback)((()=>function(e,t,s){"on"===t?w().A.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(y().d7(e),w().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(u,e,g)),[u,e,g]),{device:f}=u;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(N().A,{type:"custom",isMobile:f.isMobile,title:(0,c.jsx)(m().sA,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,c.jsx)(U,{hasPassword:a,isError:t,samlEnforced:s,isEducationPlan:o}),customButton:(0,c.jsx)(r().A,{size:"lg",style:{marginTop:12,marginBottom:4},disabled:s,onClick:h,children:a?(0,c.jsx)(m().sA,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}):(0,c.jsx)(m().sA,{id:"passwordSetting.setPasswordButton.label",defaultMessage:"Add password"})}),disabled:s}),(0,c.jsx)(se,{hasPassword:a,intl:p,onReloadSettings:d,isEducationPlan:o,email:l,mfaStatus:e,settingsStateMachineRef:g})]})}function E(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:h().Tj.red,fontSize:S().J.UISmall.desktop}}function O(){return(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you’ll be able to log in using your password."})}function V(e,t){return!e&&t}function U({isError:e,samlEnforced:t,isEducationPlan:s,hasPassword:n}){return e?(0,c.jsx)(m().sA,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):t?(0,c.jsx)(m().sA,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):s?(0,c.jsx)(O,{}):n?(0,c.jsx)(m().sA,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,c.jsx)(m().sA,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function F(e){(w().A.isSetNewPasswordModal()||w().A.isRemovePasswordModal())&&w().A.setState({...w().A.state,oldPassword:e.target.value,alert:void 0})}function L(){(w().A.isSetNewPasswordModal()||w().A.isRemovePasswordModal())&&w().A.setState({...w().A.state,oldPassword:"",alert:void 0})}function q(e){w().A.isSetNewPasswordModal()&&w().A.setState({...w().A.state,password:e.target.value,alert:void 0})}function G(){const{onCancel:e}=w().A.state;w().A.reset(),e&&e()}function z(){w().A.isSetNewPasswordModal()&&w().A.setState({...w().A.state,password:"",repeatPassword:"",alert:void 0})}function K(e){w().A.isSetNewPasswordModal()&&w().A.setState({...w().A.state,repeatPassword:e.target.value,alert:void 0})}function W(){w().A.isSetNewPasswordModal()&&w().A.setState({...w().A.state,repeatPassword:"",alert:void 0})}function H(){w().A.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function $(e){if(w().A.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=w().A.state;t&&s&&t!==s&&w().A.setState({...w().A.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function Y(e,t,s){if(!w().A.isRemovePasswordModal())return;const{oldPassword:n}=w().A.state;if(y().T8(s),!n)return void w().A.setState({...w().A.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const i=await b().callApi({eventName:"setPassword",environment:s,data:{oldPassword:n,clearPassword:!0}});if("success"===i.type)t(),w().A.isRemovePasswordModal()&&w().A.setState({...w().A.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,v().H)(e,i);w().A.setState({...w().A.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function Q({isEducationPlan:e}){const t=(0,o().K8)((()=>w().A.isPasswordSetModal()),[]),s=(0,o().O$)(w().A);if(!t)return null;const{oldPassword:n}=s,i=void 0===n?(0,c.jsx)(m().sA,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,c.jsx)(m().sA,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),r=e?(0,c.jsx)(m().sA,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You’ll be able to log in, even if you lose access to your school email address."}):(0,c.jsx)(m().sA,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We’ll ask for this password when you log in to your account."});return(0,c.jsx)(_().A,{title:i,header:r,icon:(0,c.jsx)(a().I,{icon:d().checkmarkFillIcon,size:"xl",colorVariant:"primary"}),onDismiss:G})}function J({isEducationPlan:e,mfaStatus:t,onReloadSettings:s}){const n=(0,m().tz)(),r=(0,i().v3)(),d=(0,o().K8)((()=>w().A.isRemovePasswordModal()),[]),u=(0,o().O$)(w().A);if(!d)return null;const{oldPassword:p,alert:g}=u,h=(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),f=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You’ll receive a link and login code via email when you try to login."}),e?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you’ll be unable to log back into Notion."})]}):void 0,"on"===t?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,c.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})]}):void 0]}),y={text:(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>Y(n,s,r),isRed:!0},b=[{text:(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:G,type:"button",view:"plain"}];return(0,c.jsxs)(_().A,{title:h,header:f,icon:(0,c.jsx)(a().I,{icon:l().paperPlaneIcon,size:"xl",colorVariant:"primary"}),onDismiss:G,primaryAction:y,secondaryActions:b,containerStyles:{width:350,padding:24},children:[(0,c.jsx)(B().A,{hasMarginTop:!0,children:(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,c.jsx)(k().A,{type:"password",value:p,onChange:F,showClearButton:!0,onClearButtonClick:L,placeholder:n.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,c.jsx)(I().A,{isMultiline:!0,style:E(g),children:g})]})}function Z(){if(!(0,o().K8)((()=>w().A.isRemovePasswordSuccessModal()),[]))return null;const e=(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),t=(0,c.jsx)(m().sA,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,c.jsx)(_().A,{title:e,header:t,icon:(0,c.jsx)(a().I,{icon:d().checkmarkFillIcon,size:"xl",colorVariant:"primary"}),onDismiss:G})}async function X(e,t,s,n){if(!w().A.isSetNewPasswordModal())return;const{oldPassword:i,password:o,repeatPassword:a}=w().A.state;let r;if(t&&!i)r=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,g().ZK)(o);e.success?a?o!==a&&(r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=function(e,t){const s=A().K[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else r=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void w().A.setState({...w().A.state,alert:r});const d=await b().callApi({eventName:"setPassword",environment:e,data:{oldPassword:i,newPassword:o}});if("success"===d.type)n(),w().A.setState({...w().A.state,isSet:!0});else{const e=(0,v().H)(s,d);w().A.setState({...w().A.state,alert:e})}}function ee({hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:r,email:d}){const l=(0,i().v3)(),[u,g]=n.useState(!1),h=(0,n.useCallback)((async()=>{if(!u){g(!0);try{await X(l,e,t,s)}finally{g(!1)}}}),[l,e,t,s,u]),f=(0,o().K8)((()=>w().A.isSetNewPasswordModal()?w().A.state:null),[]);if(null===f)return null;const{password:S,repeatPassword:y,oldPassword:b,alert:x}=f,v=e?(0,c.jsx)(m().sA,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,c.jsx)(m().sA,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),A=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),r?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(O,{})]}):void 0]}),j=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(B().A,{children:(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,c.jsx)(k().A,{type:"password",value:S,onChange:q,showClearButton:!0,onClearButtonClick:z,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!e,onBlur:()=>$(t),autoComplete:"new-password"}),(0,c.jsx)(M().A,{size:10,isHidden:!0}),(0,c.jsx)(B().A,{children:(0,c.jsx)(m().sA,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,c.jsx)(k().A,{type:"password",value:y,onChange:K,showClearButton:!0,onClearButtonClick:W,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>$(t),autoComplete:"new-password"})]}),C=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(k().A,{style:{display:"none"},type:"text",value:d,autoComplete:"username",disabled:!0}),(0,c.jsx)(B().A,{children:(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,c.jsx)(k().A,{type:"password",value:b,onChange:F,showClearButton:!0,onClearButtonClick:L,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,c.jsx)(M().A,{size:10,isHidden:!0}),j]}),T={text:e?(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:h},P=[{text:(0,c.jsx)(m().sA,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:H,type:"button",view:"plain"}];return(0,c.jsxs)(_().A,{title:v,header:A,icon:(0,c.jsx)(a().I,{icon:p,size:"xl",colorVariant:"primary"}),onDismiss:G,primaryAction:T,secondaryActions:V(r,e)?P:void 0,containerStyles:{width:350,padding:24},children:[e?C:j,(0,c.jsx)(I().A,{isMultiline:!0,style:E(x),children:x})]})}function te({settingsStateMachineRef:e}){const t=(0,o().K8)((()=>w().A.isVerifyIdentityWithMfaModal()),[]);return(0,n.useEffect)((()=>{t&&void 0!==e.current&&e.current.settingsConfirmIdentityForPasswordSetting()})),t&&void 0!==e.current?(0,c.jsx)(P().A,{settingsStateMachine:e.current,onDismiss:G,onStartSMS:f().lQ,onStartTOTP:f().lQ,onStartBackupCodes:f().lQ}):null}function se({hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:i,email:a,mfaStatus:r,settingsStateMachineRef:d}){const l=(0,o().K8)((()=>w().A.state.open),[]);return(0,c.jsx)(C().a,{open:l,onDismiss:G,className:x().l0W,preventHideChildrenWhileOpening:!0,render:()=>(0,c.jsx)(j().A,{capture:!0,allowEsc:!0,render:()=>(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(ee,{hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:i,email:a}),(0,c.jsx)(Q,{isEducationPlan:i}),(0,c.jsx)(J,{isEducationPlan:i,mfaStatus:r,onReloadSettings:s}),(0,c.jsx)(te,{settingsStateMachineRef:d}),(0,c.jsx)(Z,{})]})})})}},946144:(e,t,s)=>{s.d(t,{JZ:()=>ae,Vr:()=>oe});var n=()=>s(206267),i=()=>s(848538),o=()=>s(69708),a=()=>s(966505),r=()=>s(559506),d=()=>s(496414),l=()=>s(579627),c=()=>s(665859),u=()=>s(231297),p=()=>s(755199),g=()=>s(680074),m=()=>s(765957),h=()=>s(404141),f=()=>s(224701),S=(s(944114),s(581454),s(296540),()=>s(662303)),y=()=>s(56366),b=()=>s(401497),x=()=>s(699143),v=()=>s(493552),A=()=>s(869190),w=()=>s(165358),M=()=>s(575287),j=()=>s(951105),k=()=>s(340498),C=()=>s(182183),I=()=>s(798880),_=()=>s(762433),T=()=>s(252105),P=()=>s(347063),D=()=>s(107683),B=()=>s(453697),N=()=>s(719147),R=()=>s(232930),E=()=>s(477293),O=()=>s(870092),V=()=>s(324561),U=()=>s(329304),F=()=>s(334992),L=()=>s(611308),q=s(474848);function G(e){const{onFinished:t,userId:s,userContractionMessages:n,isCustomGettingStartedOwner:i}=e,a=(0,b().IS)((e=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,insetInlineEnd:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,insetInlineStart:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:e.background.secondary,padding:"16px 12px"},warningBox:{borderRadius:6,textAlign:"center",background:e.red.background.primary,padding:"16px 12px"}})),[]),r=(0,o().tz)(),d=(0,y().O$)(m().AppStoreSidebarSpaceStore),l=(0,y().K8)((()=>{if(!d)return;const e=O().L.createChildStore(d,{id:s,table:I().oo});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),c=(0,U().P9)({name:"admin_transfer_private_content",spaceId:null==d?void 0:d.id,userId:s}),{name:u,spaceName:p}=(0,y().K8)((()=>({name:null==l?void 0:l.getDisplayName(r),spaceName:null==d?void 0:d.getName()})),[l,r,d]),g=(0,V().lh)({spaceId:null==d?void 0:d.id}),h=(0,V().a9)(g),f="on"===(0,E().r)("adoption_custom_workspace_getting_started_page");return(0,q.jsx)(D().s,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,q.jsx)(P().tf,{header:(0,q.jsx)(P().YA,{iconAndTitle:(0,q.jsxs)(x().Y1,{align:"center",gap:8,direction:"vertical",children:[(0,q.jsx)(B().A,{userStore:l,size:48,style:a.customIcon,borderStyle:"solid"}),(0,q.jsx)(v().D,{styleKey:"Title-sm/Semibold",style:{textAlign:"center"},children:$(p,u)})]})}),footer:(0,q.jsx)(P().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:H(u),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,q.jsx)(o().sA,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,q.jsxs)(x().Y1,{direction:"vertical",gap:12,children:[(0,q.jsxs)(x().Y1,{style:a.descriptionBox,gap:12,children:[(0,q.jsx)(v().D,{styleKey:"Body/Medium",children:(0,q.jsx)(o().sA,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:c}})}),d&&h?(0,q.jsx)(W,{spaceStore:d,billingData:h,userContractionMessages:n}):void 0]}),f&&i?(0,q.jsxs)(x().Y1,{style:a.warningBox,gap:12,children:[(0,q.jsx)(v().D,{styleKey:"Body/Medium",children:(0,q.jsx)(o().sA,{id:"contractionConfirmation.subtitle.customGettingStartedOwner",defaultMessage:"The custom Getting Started page for this workspace is in their private pages."})}),(0,q.jsx)(v().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:{padding:"0px 12px"},children:(0,q.jsx)(o().sA,{id:"contractionConfirmation.description.customGettingStartedOwner",defaultMessage:"Removing them may result in the loss of the custom Getting Started page. New workspace members will have Notion’s default Getting Started page installed until a new custom page is set."})})]}):void 0]})})})}function z(){return null}function K(e){return e>2e3?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,q.jsx)(o().sA,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function W({spaceStore:e,billingData:t,userContractionMessages:s}){const n=(0,y().K8)((()=>e.getMemberCountFromPublicSpaceData()),[e]),i=(0,V().Q7)(e.id,t,n??0),a=(0,_().yB)({logFunction:w().log.bind(w()),spaceId:e.id,billingData:t})??i,r=(0,F().A)(e),d=i-1<a;if(t.subscription&&r&&d){const e=(0,A().W_)(t.subscription.currentPeriodEnd.toMillis(),"month_day_long",S().locale);return(0,q.jsx)(v().D,{styleKey:"Caption/Regular",colorVariant:"secondary",style:{padding:"0px 12px"},children:(0,q.jsx)(o().sA,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:i,nextBillingDate:e,learnmorelink:e=>(0,q.jsx)(N().A,{href:(0,R().x)("guides.billing"),external:!0,children:e})}})})}return(0,q.jsxs)("div",{style:{paddingTop:12,paddingInlineEnd:0,paddingBottom:0,paddingInlineStart:12},children:[(0,q.jsx)(z,{}),(0,q.jsx)(x().Y1,{gap:16,children:s.map((({icon:e,message:t},s)=>(0,q.jsxs)(x().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,q.jsx)(e,{width:k().Ev.sm}),(0,q.jsx)(v().D,{styleKey:"Body/Regular",colorVariant:"primary",children:t})]},s)))})]})}function H(e){return e&&e.length<16?(0,q.jsx)(o().sA,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,q.jsx)(o().sA,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function $(e,t){return t?(0,q.jsx)(o().sA,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,q.jsx)(o().sA,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function Y(e,t,s){let n=[],i={};if(s){const a=await r().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===a.type&&(i=a.data,n=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:j().k,message:(0,q.jsx)(o().sA,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:K(s)}})});const n=Number(e.num_comments);n>1&&t.push({icon:M()._,message:(0,q.jsx)(o().sA,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:K(n)}})});const i=Number(e.l28_active);return i>1&&t.push({icon:C().notionTintableIcon,message:(0,q.jsx)(o().sA,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:K(i)}})}),t}(i))}return T().u4(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:i}}),await L().A.showModal((s=>{const o=t=>{t?T().u4(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:i}}):T().u4(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:i}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,q.jsx)(G,{onFinished:o,userId:t,userContractionMessages:n,isCustomGettingStartedOwner:i.owns_custom_getting_started_page??!1})}}))}var Q=()=>s(604995);var J=()=>s(687681),Z=()=>s(496603),X=()=>s(231127),ee=()=>s(49210),te=()=>s(775471),se=()=>s(841101);async function ne(e){const{environment:t,contractionSurveyId:s}=e;T().u4(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const n=await async function(e){const{iconGroup:t,options:s,title:n,description:i}=e;return await ee().T.showAsyncModal((e=>{const a=new(se().a);return a.setOptions(s),(0,q.jsx)(D().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,q.jsx)(P().tf,{header:(0,q.jsx)(P().YA,{iconAndTitle:(0,q.jsx)("div",{style:{padding:"0 24px"},children:(0,q.jsx)(P().ZQ,{iconGroup:t,title:n})}),description:i}),footer:(0,q.jsx)(P().aO,{layout:"vertical",primaryButtons:[{label:(0,q.jsx)(o().sA,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(a.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,q.jsx)(te().B,{store:a})})})}))}({iconGroup:J().u,title:(0,q.jsx)(o().sA,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,q.jsx)(o().sA,{id:"contractionSurvey.description",defaultMessage:"We’d love your input to make Notion better"}),options:ie()});return n?T().u4(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:n.reasons,reason_indexes:n.reasonIndexes,reason_other:n.customTextByReason.other}}):T().u4(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),n}function ie(){return[...(0,Z().k4)([X().V.noLongerNeedAccess,X().V.noLongerWorkTogether,X().V.notUsingEnough,X().V.switching,X().V.switchingToAnotherWorkspace,X().V.tooExpensive]),X().V.other]}async function oe({environment:e,userId:t,currentMembershipType:s,spaceStore:o,userSettingStore:r}){let d,l;if(function(){const e=m().default.state.currentUserSettingsStore;if(null==e||!e.isDefined())return!1;const t=e.getSettings();return null==t||!t.seen_contraction_survey_at||Date.now()>(0,Q().K1)({date:null==t?void 0:t.seen_contraction_survey_at,daysToAdd:1})}()&&(l=n().JW(),d=await ne({environment:e,contractionSurveyId:l}),!d))return;await(async()=>await Y(e,t,o.id))()&&(await(async n=>{await ae({userId:t,newMembershipType:"none",currentUserSettingsStore:r,spaceStore:o,environment:e});const d=(0,i().DR)(s);a().ej(e,{member_user_id:t,member_role:d,contraction_survey_id:n,is_space:!0,domainType:(0,g().FX)(),new_workspace_member_count:-1})})(l),d&&function(e){const t=m().default.state.currentUserSettingsStore;t&&u().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{p().mJ({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}(e))}async function ae({userId:e,newMembershipType:t,currentUserSettingsStore:s,spaceStore:n,environment:i}){const p=i.currentUser.id;if(e!==p||"none"!==t)!function(){const e=(0,o().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});d().m({message:e.updatingPermissions})}(),"none"===t?(await r().callApi({eventName:"removeUsersFromSpace",environment:i,data:{userIds:[e],spaceId:n.id,removePagePermissions:!0,revokeUserTokens:!1}}),await f().nO({environment:i,spaceStore:n})):u().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:i,canUndo:!0,perform:s=>l().yG({environment:i,spaceStore:n,actors:[{type:"user",membershipType:t,userId:e,inviteId:void 0}],transaction:s})}),d().V();else{await c().ev({environment:i,spaceId:n.id,userSettingsStore:s})&&(a().KX(i,{invite_origin:"workspace_remove_member",domainType:(0,g().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[p]}),h().A.setState({...h().A.state,open:!1}))}}},955302:(e,t,s)=>{s.d(t,{J:()=>i,y:()=>n});class n extends(()=>s(757695))().Store{getInitialState(){return{step:"rootUninitialized"}}}class i extends(()=>s(658921))()._{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(534177).HB)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},957599:(e,t,s)=>{s.d(t,{F:()=>i});class n extends(()=>s(757695))().Store{getInitialState(){return{forceImportDropdownOpen:!1,shouldAddMembers:!0}}closeImportDropdown(){this.setState({forceImportDropdownOpen:!1,shouldAddMembers:!0})}openImportDropdown(e){this.setState({forceImportDropdownOpen:!0,shouldAddMembers:e.shouldAddMembers})}}const i=new n},959098:(e,t,s)=>{s.d(t,{A:()=>u});s(898992),s(354520),s(581454),s(908872),s(737550),s(296540);var n=()=>s(726637),i=()=>s(69708),o=()=>s(496603),a=()=>s(278768),r=()=>s(665381),d=()=>s(455997),l=()=>s(125565),c=s(474848);const u=function(e){var t;const u=(0,s(484714).v3)(),p=(0,i().tz)(),g=(0,s(401497).IS)((e=>({spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.border.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),m=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:h,organizationsInfo:f}=(0,s(926938).q)(),S=null==f?void 0:f.some((e=>e.isUserLastOwner)),y=e.disabled||m||S,b=m?(0,c.jsx)(i().sA,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):S?(0,c.jsx)(i().sA,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):h?(0,c.jsx)(i().sA,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,x=async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(765957).default.state;if(!e||!t)return;if(!e.isDefined())return;const m=o().oE(t.getSpaceViewStores().map((e=>e.getSpaceStore())));if(!s(749240).subscriptionDataStoreInstance.state)return;const h=m.filter((e=>{const t=e.canAdmin()&&1===e.getOwnerCountFromPublicSpaceData();return!(0,s(322769).zL)({space:e.getModel(),spaceRole:e.getRole(),otherAdminWithAccess:!t})})),f=o().oE(h.map((e=>{if(e)return{key:e.id,render:()=>(0,c.jsxs)("div",{style:g.spaceItem,children:[(0,c.jsx)(s(187820).B6,{disabled:!0,icon:(0,s(625247).c)(u,e),iconRecordCategory:"workspace",isEmptyPage:!1,title:(0,r().G)(u,e),size:32,isLarge:!0}),(0,c.jsxs)("div",{style:{minWidth:0},children:[(0,c.jsx)(l().A,{className:"notranslate",isMobile:n().A.isMobile,children:(0,d().rK)(u,e)}),(0,c.jsx)(l().A,{isSmall:!0,isMobile:n().A.isMobile,children:(0,d().rY)(u,p,e).subtitle})]})]})}}))),S=o().oE(h.map((e=>({id:e.id,name:(0,r().G)(u,e)}))));a().X0(u);const y=h.reduce(((e,t)=>e+(t.getMemberCountFromPublicSpaceData()??0)-1),0),b=h.filter((e=>(e.getMemberCountFromPublicSpaceData()??0)>1)).length;await s(920093).h({title:(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:S.length>0?(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.additionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces. Additionally, the following {count, plural, one {workspace} other {workspaces}} you own will be permanently deleted, removing any other members and their access:",values:{count:S.length}}):(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.noAdditionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces."}),content:(0,c.jsxs)(c.Fragment,{children:[f&&f.length>0?(0,c.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,c.jsx)("ul",{style:g.spaceNameList,children:f.map((({key:e,render:t})=>(0,c.jsx)("div",{children:t()},e)))})}):null,(0,c.jsx)(s(493552).D,{styleKey:"Body/Regular",colorVariant:"primary",children:(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===S.length?(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):n().A.isMobile?(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:S.length}}):(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:S.length}}),requiredInputValue:e.getEmail(),secondStageModal:y>0?{title:(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.title",defaultMessage:"Are you sure?"}),message:b>0?(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.additionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your account is the only admin of {countSpacesToBeDeletedWithOtherMembers} {countSpacesToBeDeletedWithOtherMembers, plural, one {workspace} other {workspaces}} that {countSpacesToBeDeletedWithOtherMembers, plural, one {contains} other {contain}} {affectedMemberCount, plural, one {another member} other {other members}}. Deleting your account will permanently remove all members from and delete {numberOfWorkspaces} {count, plural, one {workspace} other {workspaces}}.",values:{countSpacesToBeDeletedWithOtherMembers:b,count:S.length,affectedMemberCount:y,numberOfWorkspaces:S.length}}):(0,c.jsx)(i().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.noAdditionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces."})}:void 0})&&(a().FZ(u),s(404141).A.reset(),s(881738).l(u))};return(0,c.jsx)(s(702723).A,{type:"custom",useFlexboxStyle:!n().A.isMobile,isMobile:Boolean(n().A.isMobile),title:(0,c.jsx)(i().sA,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,c.jsx)(i().sA,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:n().A.isMobile?(0,c.jsx)("div",{style:{marginTop:12},children:(0,c.jsx)(s(406094).A,{size:"lg",colorPalette:"red",onClick:x,disabled:y,disabledFeedback:y,children:(0,c.jsx)(i().sA,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,c.jsx)(s(718827).Ay,{style:{borderRadius:"0.25em"},onClick:x,disabled:y,disabledFeedback:y,children:(0,c.jsx)(s(252291).I,{icon:s(944924).arrowChevronSingleRightFillIcon,colorVariant:"tertiary"})}),disabled:y,tooltipLabel:b})}},963550:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var n=()=>s(69708),i=()=>s(534177),o=s(474848);function a({target:e}){switch(e){case"notify_mobile":return(0,o.jsx)(n().sA,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(n().sA,{id:"notificationSettings.commentsAndMentions.title",defaultMessage:"Desktop comments and mentions notifications"});case"notify_email":return(0,o.jsx)(n().sA,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(n().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(n().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(n().sA,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(n().sA,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(n().sA,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(n().sA,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(n().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.title",defaultMessage:"Desktop meeting detection notifications"});case"notify_discord":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordNotificationSettings.title",defaultMessage:"Discord notifications"});case"notify_discord_enabled":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordNotificationEnabledSettings.title",defaultMessage:"Activity in your workspace"});case"allow_discord_ai_usage":return(0,o.jsx)(n().sA,{id:"notificationSettings.discordAiUsageSettings.title",defaultMessage:"Use Notion AI in Discord"});default:(0,i().HB)(e)}}},967554:(e,t,s)=>{s.d(t,{o:()=>r});s(898992),s(354520),s(581454),s(296540);var n=()=>s(56366),i=()=>s(435761),o=()=>s(37625),a=s(474848);function r({userId:e,userPermissionGroupIds:t}){const{userTeamStores:s}=function({userId:e,userPermissionGroupIds:t}){const s=(0,i().xJ)(),o=(0,i().gc)({teams:s.teams}).map((e=>e.store)),a=(0,n().K8)((()=>o.filter((s=>s.isMemberOrGuest(e,t)))),[e,t,o]);return{userTeamStores:a}}({userId:e,userPermissionGroupIds:t});return(0,a.jsx)(o().RR,{teamsForMember:s})}},970209:(e,t,s)=>{s.d(t,{A:()=>m});s(296540);var n=()=>s(484714),i=()=>s(401497),o=()=>s(406094),a=()=>s(160432),r=()=>s(69708),d=()=>s(284371),l=()=>s(148024),c=()=>s(27579),u=()=>s(232930),p=()=>s(991249),g=s(474848);const m=function({style:e,icon:t,title:s,caption:i,upgradeMessage:o,from:a,subscriptionTier:r,onUpgradeClick:d,learnMoreRoute:l}){const c=(0,n().v3)();return(0,g.jsxs)("section",{style:f(c,e),children:[(0,g.jsx)(y,{icon:t}),(0,g.jsx)(h,{title:s}),(0,g.jsx)(b,{caption:i}),(0,g.jsx)(A,{upgradeMessage:o,from:a,subscriptionTier:r,onUpgradeClick:d,learnMoreRoute:l})]})};function h({title:e}){return(0,g.jsx)("header",{style:{fontWeight:d().Wy.semibold},children:e})}function f(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.text.secondary,marginTop:4,marginBottom:16}}function y({icon:e}){const t=(0,i().DP)();return e?e(function(e){return{width:32,height:"auto",fill:e.icon.secondary,marginBottom:8}}(t)):null}function b({caption:e}){const t=(0,i().DP)();return(0,g.jsx)("p",{style:S(t),children:e})}function x({upgradeMessage:e,from:t,subscriptionTier:s,onUpgradeClick:i}){const o=(0,n().v3)();return(0,g.jsx)(a().A,{colorPalette:"blue",onClick:e=>function(e,t,s,n,i){p().K(n,{from:t,upsell:{type:"product",product:s,limit:{type:"none"},trialability:"none"}}),i&&i(e)}(e,t,s,o,i),size:"lg",children:e||(0,g.jsx)(r().sA,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v({from:e,learnMoreRoute:t}){const s=(0,n().v3)();return(0,g.jsx)(o().A,{size:"lg",onClick:()=>function(e,t,s){(0,c().L)({environment:s,url:(0,u().x)(t)}),l().FH(s,{from:e})}(e,t,s),children:(0,g.jsx)(r().sA,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function A({upgradeMessage:e,from:t,subscriptionTier:s,onUpgradeClick:n,learnMoreRoute:i}){return(0,g.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,g.jsx)(x,{upgradeMessage:e,from:t,subscriptionTier:s,onUpgradeClick:n}),(0,g.jsx)(v,{from:t,learnMoreRoute:i})]})}},980151:(e,t,s)=>{s.d(t,{WO:()=>u,_V:()=>p,hK:()=>g});var n=()=>s(869558),i=()=>s(854150),o=()=>s(231297),a=()=>s(3167),r=()=>s(100875),d=()=>s(162674),l=()=>s(710857),c=()=>s(765957);function u(e){const{environment:t,currentSpaceViewStore:s,...n}=e;if(!s.getModel())return;const i=!(0,l().x)(s)[e.feature];o().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{o().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:i}},transaction:t})}}),(0,d().f_)({environment:t,show:i,...n})}function p({environment:e,option:t,from:s,userAction:n}){const i=c().default.state.sidebarSpaceViewStore;if(!i)return!1;const a=i.getOnAppStartStore().getValue();return o().createAndCommit({userAction:n,environment:e,canUndo:!0,perform:e=>{o().applyOperation({store:i,operation:{pointer:i.pointer,path:["settings","on_app_start"],command:"set",args:t},transaction:e})}}),(0,r().cq)({spaceView:i.getModel(),preference:t}),(0,d().lr)({environment:e,oldValue:a,newValue:t,from:s}),!0}function g(e){const{environment:t,selectedStore:s,currentSpaceViewStore:r,collectionContextStore:l}=e,c=l.collectionViewStore(),u=l.collectionStore(),p=l.collectionViewBlockStore();if(!(u&&c&&p&&r))return;const g=r.getTeamsStores(),m=s.table===i().yK?g.indexOf(s)+1:0,h=s.table===i().yK?s.id:void 0;o().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{o().applyOperation({store:c,operation:{pointer:{id:c.id,table:n().Gy},path:["format","collection_view_source","teamId"],command:"set",args:h},transaction:e}),(0,a().d)({environment:t,collectionViewBlockStore:p,collectionViewStore:c,collectionStore:u,collectionContextStore:l,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})}}),(0,d().AP)({environment:t,teamId:h,index:m})}},984925:(e,t,s)=>{s.d(t,{e:()=>d});s(296540);var n=()=>s(401497),i=()=>s(160432),o=()=>s(493552),a=()=>s(695714),r=s(474848);function d(e){const{title:t,onClick:s,icon:d}=e,l=d||a().personKeyFillIcon,c=(0,n().IS)((e=>({button:{width:"100%",padding:"6px",textAlign:"center"}})),[]);return(0,r.jsx)(i().A,{size:"md",colorPalette:"blue",style:c.button,onClick:s,iconLeading:{icon:l,size:"sm"},children:(0,r.jsx)(o().D,{colorVariant:"inversePrimary",styleKey:"Body/Semibold",children:t})})}},991627:(e,t,s)=>{s.d(t,{L:()=>h});var n=s(296540),i=()=>s(314529),o=()=>s(484714),a=()=>s(56366),r=()=>s(69708),d=()=>s(231297),l=()=>s(755199),c=()=>s(232930),u=()=>s(765957),p=()=>s(719147),g=()=>s(702723),m=s(474848);function h({isMobile:e}){const t=(0,o().v3)(),s=(0,a().O$)(u().AppStoreCurrentUserSettingsStore),h=(0,a().K8)((()=>{var e;return!0===(null==s||null===(e=s.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[s]),f=(0,n.useCallback)((()=>{const e=!("do_not_record"===h);d().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:t,canUndo:!0,perform:t=>{s&&l().mJ({userSettingsStore:s,data:{disable_page_analytics:e},transaction:t})}}),(0,i().DO_NOT_USE_trackLegacy)(t,e?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}),[t,s,h]);return(0,m.jsx)(g().A,{isMobile:e,title:(0,m.jsx)(r().sA,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,m.jsx)(r().sA,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(p().A,{external:!0,href:(0,c().x)("guides.pageAnalytics"),children:e})}}),type:"toggle",isOn:"record"===h,onToggle:f})}},993342:(e,t,s)=>{s.d(t,{A:()=>g});s(296540);var n=()=>s(484714),i=()=>s(56366),o=()=>s(75435),a=()=>s(69708),r=()=>s(980151),d=()=>s(702723),l=()=>s(402411),c=()=>s(765957),u=()=>s(84161),p=s(474848);function g({isMobile:e}){const t=(0,n().v3)(),s=(0,i().K8)((()=>(0,u().S)()),[]),{isElectron:g}=(0,n().Y0)(),m=(0,i().K8)((()=>{var e,s;return(0,l().Y)(t,{spaceView:null===(e=c().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(s=c().default.state.sidebarSpaceStore)||void 0===s?void 0:s.getModel()})}),[t]),h=(0,i().K8)((()=>{var e;return null===(e=o().A.state.preferences)||void 0===e?void 0:e.isTabSpacesEnabled}),[]),f=g?(0,p.jsx)(a().sA,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows,{tabGroupsEnabled, select, true { opening new tab groups,} other {}} switching workspaces, or launching app without restoring tabs.",values:{tabGroupsEnabled:h}}):(0,p.jsx)(a().sA,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),S=g?(0,p.jsx)(a().sA,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,p.jsx)(a().sA,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,p.jsx)(d().A,{isMobile:e,title:S,caption:f,type:"dropdown",currentOption:m,options:s,onSelectOption:e=>{r()._V({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:t,option:e,from:"user_settings"})}})}}}]);