"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14388],{268809:(e,t,o)=>{o.d(t,{U:()=>i});const i=(0,o(69708).YK)({forOneAuthorCurrentUser:{id:"authorPhrase.forOneAuthorCurrentUser.label",defaultMessage:"You"},forTwoAuthorsCurrentUser:{id:"authorPhrase.forTwoAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b> and you"},forThreeAuthorsCurrentUser:{id:"authorPhrase.forThreeAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and you"},forMoreThanThreeAuthorsCurrentUser:{id:"authorPhrase.forMoreThanThreeAuthorsCurrentUser.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} others}}"},forOneAuthor:{id:"authorPhrase.forOneAuthor.label",defaultMessage:"<b>{author}</b>"},forTwoAuthorsCondensed:{id:"authorPhrase.forTwoAuthorsCondensed.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>"},forTwoAuthorsPushNotification:{id:"authorPhrase.forTwoAuthorsPushNotification.label",defaultMessage:"{firstAuthor} and {secondAuthor}"},forTwoAuthors:{id:"authorPhrase.forTwoAuthors.label",defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>"},forMoreThanTwoAuthorsCondensed:{id:"authorPhrase.forMoreThanTwoAuthorsCondensed.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthorsPushNotification:{id:"authorPhrase.forMoreThanTwoAuthorsPushNotification.label",defaultMessage:"{numberOfOtherAuthors, plural, one {{firstAuthor} and {numberOfOtherAuthors} other} other {{firstAuthor}, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthors:{id:"authorPhrase.forMoreThanTwoAuthors.label",defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}"},someone:{id:"authorPhrase.someone.label",defaultMessage:"Someone"}})},814388:(e,t,o)=>{o.d(t,{$I:()=>fe,$L:()=>le,$f:()=>$,Bu:()=>ne,GK:()=>z,IF:()=>ge,Ln:()=>Z,Nn:()=>Q,OM:()=>X,OQ:()=>se,Ui:()=>F,Uo:()=>me,bD:()=>q,ds:()=>W,dy:()=>Y,fk:()=>ae,g8:()=>re,kr:()=>pe,sL:()=>ue,uj:()=>de,xt:()=>te});o(944114),o(898992),o(354520),o(803949),o(581454);var i=()=>o(496603),a=()=>o(534177),r=()=>o(720665),s=()=>o(764880),n=()=>o(278132),u=()=>o(700500),c=()=>o(488715),l=()=>o(799288),d=()=>o(356246),f=()=>o(657970),p=()=>o(187696),m=()=>o(302322),g=()=>o(363170),h=()=>o(898244),b=()=>o(713998),N=()=>o(597777),y=()=>o(869190),M=()=>o(651124),R=()=>o(80979),v=()=>o(236162),k=()=>o(945778),S=()=>o(792071),P=()=>o(268809),A=()=>o(433847),T=()=>o(450648),j=()=>o(296344),V=()=>o(912720),C=()=>o(179034),_=()=>o(824862),w=()=>o(519831),I=()=>o(96689),x=()=>o(437607),U=()=>o(854150),B=()=>o(798880),E=()=>o(914462),L=()=>o(201980),O=()=>o(695608),G=()=>o(53528),D=()=>o(931075);const F=(0,o(69708).YK)({defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} updated {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} updated",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]ðŸ’¬ {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"},upgradeRequestCreated:{defaultMessage:"{userName} requested an upgrade",id:"pushNotifications.upgradeRequestCreated.notificationSubject"},appBuilderWorkflowError:{defaultMessage:"A task has failed",id:"pushNotifications.appBuilderWorkflowError.notificationSubject"},appBuilderWorkflowAction:{defaultMessage:"{workflowName} has sent you a message",id:"pushNotifications.appBuilderWorkflowAction.notificationSubject"},customAppBuilderWorkflowActionTitle:{defaultMessage:"From {workflowName}: {customTitle}",id:"pushNotifications.appBuilderWorkflowAction.customNotificationSubject"},externalIntegrationNotificationDefault:{defaultMessage:"An external integration has sent you a message",id:"pushNotifications.externalIntegrationNotificationDefault.notificationSubject"},externalIntegrationNotificationJiraSyncTokenExpiryError:{defaultMessage:"Your Jira sync stopped for {site} due to expired Jira token. Please re-authenticate to continue.",id:"pushNotifications.externalIntegrationNotificationJiraSyncTokenExpiryError.notificationSubject"},appBuilderNotificationDefault:{defaultMessage:"Agent task has notified you",id:"pushNotifications.appBuilderNotificationDefault.notificationSubject"},appBuilderWorkflowErrorBody:{defaultMessage:"{workflowName} has failed to run",id:"pushNotifications.appBuilderWorkflowError.notificationBody"},trialCreated:{defaultMessage:"{userName} started a {days} day trial of Notion {product}",id:"pushNotifications.trialCreated.notificationSubject"},trialCreatedWithoutUserName:{defaultMessage:"Your space is in a {days} day trial of Notion {product}",id:"pushNotifications.trialCreatedWithoutUserName.notificationSubject"},trialCreatedBody:{defaultMessage:"You now have access to all {product} plan features until {endDate}",id:"pushNotifications.trialCreatedBody.notificationBody"},transcriptDeleted:{defaultMessage:"{userName} deleted a transcript from {pageName}",id:"pushNotifications.transcriptDeleted.notificationSubject"}});function Z(e){const{activity:t,getRecordValue:o}=e,a=t.getEdits();return i().oE((0,r().qt)(i().Bq(a.map((e=>e.authors||[])))).map((e=>{const t=o(e);if(t)return(0,s().D3)({table:e.table,value:t})})))}function q(e,t){const o=e.map((e=>e?(0,s().lR)(t,e):t.formatMessage(F.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(P().U.forTwoAuthorsPushNotification,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const o=t.length-1;return e.formatMessage(P().U.forMoreThanTwoAuthorsPushNotification,{firstAuthor:t[0],numberOfOtherAuthors:o})}return e.formatMessage(P().U.someone)}(t,o)}function W(e){var t;const{recipientUser:o,authors:i}=e,a=i.filter((e=>e.id!==(null==o?void 0:o.id)));if(0===a.length)return;const r=a[0];var s;return r.table===B().oo&&null!==(t=r.asActor)&&void 0!==t&&t.profile_photo?null===(s=r.asActor)||void 0===s?void 0:s.profile_photo:void 0}function Y(e){if(!i().Im(e))return e[0].id}function K(e){const{blockValue:t,getRecordValue:o,userTimeZone:i,intl:a}=e,r=S().Bj6.fromBlock(t),s=S().b4_.fromGetRecordValueFn(o);return r.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:s,userTimeZone:i,intl:a})}function $(e){return function(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:r}=e,s=S().b4_.fromGetRecordValueFn(o),n=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(n){const u=o({table:C().ev,id:n,spaceId:t.space_id});if(u){return{url:(0,c().Q)({model:S().Bj6.fromBlock(u),getRecordModel:s,baseUrl:e.baseURL,pageVisitSource:i}),title:K({intl:r,blockValue:u,getRecordValue:o,userTimeZone:a})}}return{url:e.baseURL||"/",title:r.formatMessage(F.untitledBlockTitle)}}if(t.collection_id)return ee(e);if("user-invited"===t.type){const i=function(e){const{activity:t}=e,o=S().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const i=fe({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:o});if(i)return{icon:i.getIcon(),name:i.getName()}}({activity:t,getRecordValue:o}),a=s({table:I().NX,id:t.space_id});if(a&&i)return{title:pe(r,i),url:(0,c().Q)({model:a,baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return J(e);if("access-requested"===t.type){const o=s({id:t.getAccessRequestId(),table:j().O,spaceId:t.space_id});if(o&&o.isTeamMembershipRequest())return J(e)}}return H(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function Q(e){const{activity:t}=e,o=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return o||(t.collection_id?t.collection_id:void 0)}function J(e){const{activity:t,getRecordValue:o,intl:i}=e,a=S().b4_.fromGetRecordValueFn(o),r=e.baseURL||"/",s=i.formatMessage(F.untitledTeamName);if(!t.team_id)return{url:r,title:s};const n=a({table:U().yK,id:t.team_id}),u=a({table:I().NX,id:t.space_id});return{url:(u&&(0,c().Q)({model:u,baseUrl:e.baseURL}))??r,title:(null==n?void 0:n.getRenderTitleWithEmojiOrPlaceholder({intl:i}))??s}}function z(e){return H(e).title}function H(e){const{activity:t,getRecordValue:o,intl:i}=e,a=o({table:I().NX,id:t.space_id});if(a){const t=S().Bj6.fromSpace(a);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:i}),url:(0,c().Q)({model:t,baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:i.formatMessage(F.untitledSpaceName)}}function X(e){return ee(e).title}function ee(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:r}=e;if(t.collection_id){const s=o({table:w().Vl,id:t.collection_id,spaceId:t.space_id});if(s){const t=S().Bj6.fromCollection(s),o=S().b4_.fromGetRecordValueFn(e.getRecordValue),n=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:o,userTimeZone:a,intl:r});return{url:(0,c().Q)({model:t,getRecordModel:o,baseUrl:e.baseURL,pageVisitSource:i}),title:n}}return{url:e.baseURL||"/",title:r.formatMessage(F.untitledCollectionName)}}return{url:e.baseURL||"/",title:r.formatMessage(F.untitledCollectionName)}}function te(e){const{activity:t,getRecordValue:o,intl:i}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=S().b4_.fromGetRecordValueFn(o),a=e({table:V().yB,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==a?void 0:a.getNameWithDefault(e,i))??(0,n().PK)(i)}}function oe(e){if(e.blockValue.properties)return(0,T().r4)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:S().b4_.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function ie(e,t){const o=(0,A().an)(t,void 0);return e.formatMessage(o)}function ae({userTimeZone:e,activity:t,getRecordValue:o,pageVisitSource:a,intl:r,experimentService:s,collectionFeatureGates:n,spaceIdCreator:u}){const c=t.getEdits();if(c.length){const d=[];c.forEach((e=>{"permission-created"===e.type?d.push(e.permission_data):"permission-deleted"===e.type?d.push({...e.permission_data,role:"none"}):"permission-restriction-created"===e.type||"permission-restriction-deleted"===e.type?(e.permission_data.calculated_changes||[]).forEach((([e,t])=>{d.push(t)})):d.push(e.permission_data.after)}));const f=i().oE(d.sort(A().zK).map((i=>{if("user_permission"===i.type){const e=o({table:B().oo,id:i.user_id}),t=(0,O().c6)(r,e),a=ie(r,i.role);return r.formatMessage(F.userNameWithRole,{userName:t,permissionLevel:a})}if("space_permission"===i.type){const c=z({intl:r,activity:t,getRecordValue:o,userTimeZone:e,pageVisitSource:a,experimentService:s,collectionFeatureGates:n,spaceIdCreator:u}),l=ie(r,i.role);return r.formatMessage(F.spaceNameWithRole,{spaceName:c,permissionLevel:l})}if("public_permission"===i.type){const e=ie(r,i.role);return r.formatMessage(F.publicPermissionRoleLabel,{permissionLevel:e})}if("bot_permission"===i.type){const e=o({table:_().GP,id:i.bot_id}),t=(0,l().Hg)(e),a=ie(r,i.role);return r.formatMessage(F.botNameWithRole,{botName:t,permissionLevel:a})}})));return r.formatList(f,{type:"conjunction",style:"narrow"})}}function re(e){const{intl:t}=e;switch(e.blockValue.type){case u().xd.text:case u().xd.header:case u().xd.subHeader:case u().xd.subSubHeader:case u().xd.factory:case u().xd.equation:case u().xd.code:return oe(e);case u().xd.toggle:return`â–¸ ${oe(e)}`;case u().xd.bulletedList:return`â€¢ ${oe(e)}`;case u().xd.numberedList:return`1. ${oe(e)}`;case u().xd.quote:return`â€œ${oe(e)}â€`;case u().xd.toDo:return(function({blockValue:e}){return(0,f().w)(e.properties&&e.properties.checked)}(e)?"âœ“ ":"â–¢ ")+oe(e);case u().xd.file:case u().xd.bookmark:return`ðŸ”— ${oe(e)}`;case u().xd.embed:case u().xd.framer:case u().xd.whimsical:case u().xd.mixpanel:case u().xd.miro:case u().xd.abstract:case u().xd.sketch:case u().xd.excalidraw:case u().xd.replit:case u().xd.hex:case u().xd.deepnote:case u().xd.tweet:case u().xd.gist:case u().xd.maps:case u().xd.invision:case u().xd.video:case u().xd.audio:case u().xd.image:return t.formatMessage(F.imageInPushNotification,{imageEmoji:"ðŸ–¼"});case u().xd.drive:return function(e){const{blockValue:t}=e,o=(0,M().v)(S().Bj6.fromBlock(t));return o&&o.title?o.title:K(e)}(e);case u().xd.page:case u().xd.collectionView:case u().xd.collectionViewPage:return K(e);case u().xd.tableRow:return function(e){var t;const{blockValue:o,getRecordValue:i,userTimeZone:a,intl:r}=e,s=i({table:o.parent_table,id:o.parent_id,spaceId:o.space_id});if(!s||!o)return;const n=o.properties,u=(null===(t=s.format)||void 0===t?void 0:t.table_block_column_order)||[];return u&&n?u.map((e=>(0,T().r4)({textValue:n[e],getRecordModel:S().b4_.fromGetRecordValueFn(i),userTimeZone:a,intl:r}))).join(", "):void 0}(e)}}function se(e){const{getRecordValue:t,baseURL:o,userTimeZone:i,intl:a,collectionFeatureGates:r,spaceIdCreator:s}=e,n=t({table:C().ev,id:e.blockId});if(n){if("page"===n.type){const u=(0,v().zN)({block:n,getRecordValue:t});if(u){const o=h().Dp(u),i=o[e.property],c=i?i.name:void 0,l=ne({property:e.property,schema:o,block:n,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:a,experimentService:e.experimentService,collectionFeatureGates:r,spaceIdCreator:s})||a.formatMessage(F.emptyPropertyBody);return a.formatMessage(F.propertyNameAndValueNotificationBody,{propertyName:c,propertyValue:l})}return re({intl:a,blockValue:n,getRecordValue:t,baseURL:o,userTimeZone:i})}return re({intl:a,blockValue:n,getRecordValue:t,baseURL:o,userTimeZone:i})}}function ne(e){const{property:t,schema:o,getRecordValue:i,userTimeZone:a,baseURL:n,intl:u,experimentService:c,collectionFeatureGates:l,spaceIdCreator:f}=e,p=o[t],m=S().Bj6.fromBlock(e.block);if(!m.getProperties()||!p)return;const g=m.getProperties()[t];if("formula"===p.type){const e=S().b4_.fromGetRecordValueFn(i),s=(0,R().primitiveFormulaValueFromPropertySchema)({schema:o,property:t,blockModel:m,getRecordModel:e,intl:u,userTimeZone:a,depth:0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:c,collectionFeatureGates:l,spaceIdCreator:f});return N().kC(s)?(0,y().ZF)({allowRelativeDates:!0,intl:u,value:s,userTimeZone:a}):"boolean"==typeof s?s?d().I1:d().oP:(0,r().Et)(s)?s.toString():s}if("person"===p.type)return ce({textValue:g,propertySchema:p,blockCreatorPointer:m.getCreatedByPointer(),getRecordValue:i,intl:u});if("created_by"===p.type){const e=m.getCreatedByPointer();if(!e)return u.formatMessage(F.unknownAuthorInPropertySchemaChange);const t=i(e),o=t&&(0,s().D3)({table:e.table,value:t});return o?(0,s().lR)(u,o):u.formatMessage(F.unknownAuthorInPropertySchemaChange)}return"created_time"===p.type?(0,y().W_)(m.getCreatedTime(),"short",u.locale,a):g?ue({propertySchema:p,textValue:g,getRecordValue:i,userTimeZone:a,baseURL:n,intl:u,experimentService:c,spaceIdCreator:f}):void 0}function ue(e){const{propertySchema:t,textValue:o,getRecordValue:i,userTimeZone:r,baseURL:n,intl:u}=e;if("title"===t.type||"text"===t.type||"place"===t.type)return(0,T().r4)({intl:u,textValue:o,getRecordModel:S().b4_.fromGetRecordValueFn(i),userTimeZone:r});if("select"===t.type){const e=t.options||[];return b().L3(o,e)}if("multi_select"===t.type){const e=t.options||[];return u.formatList(b().o2(o,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return(0,f().w)(o)?d().I1:d().oP;if("date"===t.type){const e=(0,p().b)(o);if(e)return(0,y().ZF)({allowRelativeDates:!0,intl:u,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:r})}else{if("person"===t.type)return ce({textValue:o,propertySchema:t,blockCreatorPointer:void 0,getRecordValue:i,intl:u});if("relation"===t.type){const e=b().bG({relationValue:b().n(o),getRecordModel:S().b4_.fromGetRecordValueFn(i),propertySchema:t,includeNoAccess:!0});return u.formatList(e.map(i).map((e=>e?K({intl:u,blockValue:e,getRecordValue:i,baseURL:n,userTimeZone:r}):u.formatMessage(F.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=m().M(o);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=b().On(o);if(void 0!==e)return e.toString()}else{if("file"===t.type)return u.formatList(b().pJ(o).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,L().k4p)(o);if("created_by"===t.type);else if("created_time"===t.type);else if("formula"===t.type);else if("rollup"===t.type);else if("last_edited_by"===t.type);else if("last_edited_time"===t.type);else if("last_visited_time"===t.type);else if("button"===t.type);else{if("status"===t.type)return b().RZ(o,t);if("location"===t.type);else{if("verification"===t.type){const e=D().U1(o),t=e?D().B2(e):{type:"none"};if("none"===t.type)return u.formatMessage(D().nl.none);const a=i(t.actorPointer),n=(0,s().D3)({table:t.actorPointer.table,value:a}),c=(0,s().lR)(u,n);return"verified"===t.type&&t.isIndefinite?u.formatMessage(D().nl.verifiedIndefinitely,{actor:c}):u.formatMessage(D().nl.verifiedUntil,{actor:c,datetime:G().T2({dateTime:t.dateTimeRange.end,intl:u,userTimeZone:r,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,a().HB)(t)}}}}}function ce(e){const{textValue:t,propertySchema:o,blockCreatorPointer:i,getRecordValue:a,intl:r}=e,n=(0,g().e)({textValue:t,propertySchema:o,blockCreatorPointer:i,convertGroupPointersToBeComposite:!0}).map((e=>function(e){const{actorOrGroupPointer:t,getRecordValue:o,intl:i}=e,a=S().b4_.fromGetRecordValueFn(o)(t);if(!a)return i.formatMessage(S().Fvx.messages.anonymousPlaceholder);if(a.table===x().n)return(0,E().n)({intl:i,permissionGroupModel:a});const r=(0,s().D3)(a);return(0,s().lR)(i,r)}({actorOrGroupPointer:e,getRecordValue:a,intl:r})));return r.formatList(n,{type:"conjunction",style:"narrow"})}function le(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(F.blockFormatEditPageIconName)}function de(e){const{formatProperty:t,block:o,getRecordValue:i,intl:a}=e;if("page_icon"===t){const e=S().Bj6.fromBlock(o).getRenderIcon({getRecordModel:S().b4_.fromGetRecordValueFn(i)});return e?(0,k().A)(e.icon)?e.icon:a.formatMessage(F.pageIconImagePlaceholder):a.formatMessage(F.emptyBlockEditedProperty)}}function fe(e){const t=S().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,permissionGroupId:i}=e;return t({table:x().n,id:(0,x().gK)({spaceId:o,spacePermissionGroupId:i}),spaceId:o})}function pe(e,t){if(t){return[(0,k().A)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(F.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(F.defaultPermissionGroupName)}function me(e){const t=S().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,teamId:i}=e;return t({table:U().yK,id:i,spaceId:o})}function ge(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"grouped-block-property-updated":case"grouped-commented":case"grouped-user-mentioned":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":case"app-builder-notification":return!0;default:return!1}}}}]);