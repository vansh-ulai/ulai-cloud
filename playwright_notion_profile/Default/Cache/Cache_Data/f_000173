"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[80668],{80668:(e,t,r)=>{r.d(t,{S:()=>$});r(517642),r(658004),r(733853),r(845876),r(432475),r(515024),r(731698),r(898992),r(354520),r(672577),r(737550),r(814603),r(147566),r(198721);var n=()=>r(906745),i=()=>r(242422),o=()=>r(726637),a=()=>r(130382),s=()=>r(386164),l=()=>r(762433),c=()=>r(166386),u=()=>r(404802),d=()=>r(61844),m=()=>r(84262),_=()=>r(979340),g=()=>r(720665),p=()=>r(559506),v=()=>r(755199),S=()=>r(576590),b=()=>r(174636),f=()=>r(47373),y=()=>r(680074),P=()=>r(928153);function D(e){const t=(0,r(944203).a)(e);return null!==t&&t<=7}var w=()=>r(438177),h=()=>r(694926),k=()=>r(12314),I=()=>r(749687),E=()=>r(765957),M=()=>r(804006),C=()=>r(209169),T=()=>r(712505),A=()=>r(261505),x=()=>r(116959),N=()=>r(749356),G=()=>r(382302),U=()=>r(783033),F=()=>r(324561),B=()=>r(848701),O=()=>r(807778),R=()=>r(329304),K=()=>r(907917),L=()=>r(134217);var V=()=>r(63636);function W(e){const{currentUserSettingsStore:t,minAccountAgeInDays:r}=e,n=(0,y().iZ)(t);return Number(n)>=r}function q(e){return"unsubscribed_admin"===e.state.type||"unsubscribed_member"===e.state.type}function z(e){const{messageKey:t,nDays:r,currentTime:i=n().c9.now()}=e,{currentUserSettingsStore:o,sidebarSpaceViewStore:s}=E().default.state,l=null==o?void 0:o.getSettings(),c=((null==l?void 0:l.callout_dismissal_timestamps)??[]).find((e=>e.name===t)),u=null==s?void 0:s.getSettings(),d=((null==u?void 0:u.callout_dismissal_timestamps)??[]).find((e=>e.name===t)),m=Math.max((null==c?void 0:c.timestamp)??0,(null==d?void 0:d.timestamp)??0);if(!m)return!0;const _=i.toMillis();return(0,a().Mn)(m,_)>=r}const $={dummy_modal:async e=>Promise.resolve(!1),dummy_modal_2:async e=>Promise.resolve(!1),ai_github_ai_connector_announcement:async e=>Promise.resolve(!1),ai_microsoft_teams_universal_qna_announcement:async e=>Promise.resolve(!1),ai_assistant_announcement:async e=>{const{experimentStore:t,currentUserSettingsStore:r,mainEditorCurrentBlockStore:n,assistantFeatureGateStore:i}=e;if(t.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);const o=r.getSettings();if(!o)return!1;const a=void 0===(null==o?void 0:o.ai_assistant_onboarding_phase);return Promise.resolve(n.canRead()&&W({currentUserSettingsStore:r,minAccountAgeInDays:8})&&a&&i.canSeeAssistantFeaturePromotionalModal())},sidebar_upgrade_nudge:async e=>{const{currentUserSettingsStore:t,billingData:r,sidebarSpaceStore:n}=e,i=t.getSettings(),o=n.getMemberCountFromPublicSpaceData()??1,a=(0,K().x)({billingData:r,memberCount:o});return Promise.resolve(!(null!=i&&i.dismissed_sidebar_upgrade_nudge||"none"!==a||(0,l().Fq)(r)||1!==o||D(n)))},ai_limit_nudge:async e=>{var t,r;const{environment:n,sidebarSpaceStore:i,currentUserSettingsStore:o,assistantFeatureGateStore:a}=e;if(!a.isAiEnabled())return!1;const s=o.getSettings();if(void 0===s)return!1;const l=i.getSpaceId(),c=await(0,R().Bw)(n,{name:"ai_usage",spaceId:l,userId:n.currentUser.id,amount:1}),u=c.limit;if("unlimited"===u.total)return!1;const d=Number(u.current/u.total),m=d>=G().G?Boolean(null===(t=s.addOnLimitNotifications)||void 0===t?void 0:t.disableLimitNotificationInSidebar):Boolean(null===(r=s.addOnLimitNotifications)||void 0===r?void 0:r.disableWarningNotificationInSidebar),_=c.upsell;return"unavailable"!==c.type&&void 0!==_&&!m&&d>=G()._},block_limit_nudge:e=>{const{environment:t,subscriptionDataStore:r,sidebarSpaceStore:n}=e;return Promise.resolve(q(r)&&r.state&&L().z8(t,r.state,n.id))},post_reverse_trial_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,sidebarSpaceStore:i}=e;if(!q(n)||!i.canAdmin())return Promise.resolve(!1);const o=i.getSpaceId(),a=await p().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:o},headers:(0,s().WS)({cellId:void 0,spaceId:o})});if("failed"===a.type)return Promise.resolve(!1);const l=a.data,u=(0,c().e8)(l,"trial"),m=(0,d().tX)(l),_=u&&!m&&(0,r(97065).DH)(u.offer.campaign);return Promise.resolve(_)},business_trial_nudge_d0:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d0",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:0,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d1:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d1",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:1,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d2:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d2",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:2,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d3:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d3",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:3,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d5:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d5",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:5,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d6:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d6",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:6,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d8:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d8",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:8,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d10:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d10",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:10,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d11:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d11",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:11,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d14:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d14",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:14,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d17:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d17",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:17,environment:t,billingData:r,spaceStore:n})},business_trial_nudge_d20:async e=>{const{environment:t,billingData:r,sidebarSpaceStore:n}=e;return!!z({messageKey:"business_trial_nudge_d20",nDays:U().ef,currentTime:(0,l().DS)(r)})&&await(0,A().getTrialNudgeMessageKeyForDayWithOffer)({currentTrialDayElapsed:20,environment:t,billingData:r,spaceStore:n})},business_trial_ending_soon:async e=>{const{environment:t,sidebarSpaceStore:n}=e,i=n.getSpaceId(),o=await(0,F().yk)({environment:t,spaceId:i});if(!o)return Promise.resolve(!1);if(!(0,l().TB)(o))return Promise.resolve(!1);if(!n.canAdmin())return Promise.resolve(!1);const a=(0,l().DS)(o),u=await p().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:i},headers:(0,s().WS)({cellId:void 0,spaceId:i})});if("failed"===u.type)return Promise.resolve(!1);const m=(0,d().Jd)(u.data);if(!m||!(0,c().rM)(m))return Promise.resolve(!1);if(!(0,c().kd)(m))return Promise.resolve(!1);const _=(0,r(30858).s1)(m.offer),g=(0,B().UP)(o,a)??0;return Promise.resolve(g>=0&&g<=(0,B().rE)(_))},resurrection_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:r,sidebarSpaceStore:n}=e,i=(0,O().vv)(),o=n.getSpaceId();if(!(q(r)&&i&&L().qc&&o))return Promise.resolve(!1);const a=await(0,N().Cy)(t,{spaceId:o,offerCampaign:"resurrection_offer"});return a?Promise.resolve((0,c().u6)(a)):Promise.resolve(!1)},plus_ai_to_business_upgrade_offer_sidebar:async e=>{const{environment:t,experimentStore:n,sidebarSpaceStore:i,billingData:o,externalOrgDataStore:a}=e,s=i.getSpaceId(),l=t.currentUser.id,c=o&&"type"in o&&"admin"===o.type?{...o,type:"admin"}:void 0;if(!s||!l)return!1;if(!n.checkGate({gateName:"enable_plus_ai_to_business_upgrade_offer_sidebar"}))return!1;const u=a.getData(t,{userId:t.currentUser.id}),d=await Promise.all([(0,N().Cy)(t,{spaceId:s,offerCampaign:"biz_upgrade_2025_8"}),(0,N().Cy)(t,{spaceId:s,offerCampaign:"biz_upgrade_2025_10"})]).then((e=>e.filter(r(534177).O9))),m=(0,r(946473).q)(u,i,c);return d.length>0&&!m},onboarding_reverse_trial_sidebar:async e=>{const{environment:t,sidebarSpaceStore:r}=e,n=await(0,F().Vv)({environment:t,spaceId:r.getSpaceId()}),i=(0,l().TB)(n),o=(0,l().DS)(n);if(!i||!r.canAdmin())return Promise.resolve(!1);const a=r.getSpaceId(),u=await p().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:a},headers:(0,s().WS)({cellId:void 0,spaceId:a})});if("success"!==u.type)return Promise.resolve(!1);if((0,d().tX)(u.data))return Promise.resolve(!1);const m=(0,c().e8)(u.data,"trial");if(!m)return Promise.resolve(!1);const _=(0,c().ER)(m,o),g=(0,c().b_)(m.offer).as("days"),v=_>Math.round(g/2);return Promise.resolve(v)},import_data_prompt:async e=>{var t;const{experimentStore:r,currentUserSettingsStore:n}=e;if(Boolean(null===(t=n.getSettings())||void 0===t||null===(t=t.adoption_entry_points)||void 0===t?void 0:t.import_sidebar_announcement))return Promise.resolve(!1);const i=r.getEligibleGroup({experimentId:"adoption_import_push",defaultGroup:"control",enableEventTrailLogging:!0});return Promise.resolve("on"===i)},student_org_prompt:async e=>{var t,n;const{environment:i,subscriptionDataStore:o,currentUserSettingsStore:a}=e,s=o.state,l=o.state.subscriptionTier,c=void 0!==l&&["student","personal","personal_free","free"].includes(l),u=new Set(["student_club_monthly","student_club_yearly"]),d=(0,r(756790).p)(),m=L().qc(s)&&(null==s||null===(t=s.customerData)||void 0===t?void 0:t.stripe)&&"plan"in s.customerData.stripe&&u.has(s.customerData.stripe.plan);if(void 0!==(null===(n=a.getSettings())||void 0===n?void 0:n.dismissed_sidebar_student_org_prompt)||!c||m||"multiplayer"===(null==d?void 0:d.collaborativeIntent))return!1;const _=await p().callApi({eventName:"isEmailEducation",environment:i,data:{validationType:"Domain"}});return"failed"!==_.type&&_.data.isEligible},notion_calendar_launch_promo:async e=>{const{environment:t,currentUserSettingsStore:n,mainEditorCurrentBlockStore:i,experimentStore:o,sidebarSpaceStore:a}=e;if(o.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);const s=n.getSettings();if(!s)return!1;const l=s.notion_calendar_launch_modal_phase,c=t.device.isElectron?void 0===l:void 0===l||"connected_notion_calendar"===l,u="msStore"===t.device.desktopTargetPlatform;return Promise.resolve(i.canRead()&&o.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,r(272509).I)(a)&&!(0,r(267652).X)(a)&&!u&&c)},startup_sidebar_footer:async e=>Promise.resolve(!1),asana_post_import_tour:async e=>{var t,r;const{currentUserSettingsStore:n,mainEditorCurrentBlockStore:i}=e,o=i,a=(null==o?void 0:o.isCollectionView())&&(null===(t=o.getFormat())||void 0===t?void 0:t.is_asana_imported_project)&&!(null!==(r=n.getSettings())&&void 0!==r&&r.seen_asana_post_import_tour);return Promise.resolve(a)},desktop_download_sidebar:async e=>{var t,r,o;const{currentUserSettingsStore:a,environment:s}=e;if("web-desktop"!==s.device.deviceType)return!1;if("control"!==i().default.getEligibleGroup({experimentId:"adoption_promote_desktop_app_download_in_onboarding",defaultGroup:"control",disableExposureLogging:!0}))return!1;if(Boolean((null===(t=a.getSettings())||void 0===t?void 0:t.used_mac_app)||(null===(r=a.getSettings())||void 0===r?void 0:r.used_windows_app)))return!1;const l=null===(o=a.getSettings())||void 0===o?void 0:o.signup_time;if(!l)return!1;const c=n().c9.now().toMillis()-l;return!(c>=7*g().nD)&&Promise.resolve(c<Number(g().pT))},ai_meeting_notes_browser_summary_app_download:async e=>{const{environment:t}=e;if(!i().default.checkGate({gateName:"ai_meeting_notes_browser_v2"}))return!1;return!(await(0,r(778450).e)(t))&&Promise.resolve(!0)},open_in_calendar_tooltip:async e=>{const{sidebarSpaceStore:t,currentUserSettingsStore:n}=e,i=n.getSettings(),o=(0,r(686070).d)({spaceStore:t});return Promise.resolve(!(o||null!=i&&i.seen_open_in_calendar_tooltip))},ai_google_drive_qna_notification_tooltip:async e=>{const{environment:t,assistantFeatureGateStore:r,sidebarSpaceStore:n,sidebarSpaceViewStore:o}=e,a=o.getSettings();if(!a||!r.isAiEnabled()||!r.canUseAiConnectorSearchScope("google-drive")||void 0!==a.ai_google_drive_qna_notification_seen_at)return Promise.resolve(!1);const s=n.getSpaceId();if(i().default.checkGate({gateName:"ai_connector_unification_google_drive"})){const e=await(0,S().getConnectorStatus)({environment:t,spaceId:s,connector:"google-drive"});return"failed"===e?Promise.resolve(!1):Promise.resolve(void 0!==e&&e.details.userConnectionDetails.isRecallEnabled)}const l=await p().callApi({eventName:"getGoogleDriveRecallStatusForUser",environment:t,data:{spaceId:s}});return Promise.resolve("success"===l.type&&"enabled"===l.data.status)},ai_slack_qna_notification_tooltip:async e=>{const{environment:t,sidebarSpaceStore:r,sidebarSpaceViewStore:n,assistantFeatureGateStore:i}=e,o=null==n?void 0:n.getSettings(),a=r.getSpaceId();if(!i.isSlackQnaNotificationEnabled()||!i.isAiEnabled()||!o||void 0!==o.ai_slack_qna_notification_seen_at)return Promise.resolve(!1);var s;return"success"===(await(0,S().updateSlackQnAConnectionState)({environment:t,spaceId:a})).status?Promise.resolve((null===(s=b().R.state.connectedApps)||void 0===s?void 0:s.includes("slack-admin"))&&b().R.state.canQuery&&!b().R.state.inProgress&&b().R.state.isSyncCompleted):Promise.resolve(!1)},ai_slack_qna_embed_tooltip:async e=>{var t;const{environment:n,sidebarSpaceStore:i,mainEditorCurrentBlockStore:o,assistantFeatureGateStore:a,currentUserSettingsStore:s,experimentStore:c}=e;if(null!==(t=s.getSettings())&&void 0!==t&&t.seen_slack_embed_ai_connector_tooltip)return!1;const u=i.getSpaceId(),d=await(0,F().yk)({environment:n,spaceId:u}),m=(0,_().rV)((0,l().AI)(d),"plus"),g=((0,r(548648).X)({environment:n,spaceId:u})??1)>1;return!!(o.canRead()&&m&&g)&&(!!W({currentUserSettingsStore:s,minAccountAgeInDays:8})&&(!(!c.checkGate({gateName:"enable_slack_embed_tooltips_actual"})||!a.isAiEnabled())&&Promise.resolve(!0)))},ai_sales_assisted_notification_tooltip:async e=>{const{assistantFeatureGateStore:t,currentUserSettingsStore:n,sidebarSpaceStore:i,environment:o}=e,s=null==n?void 0:n.getSettings(),l=(0,r(656633).vp)(o,i.id),c="tooltip"!==(null==s?void 0:s.ai_assistant_onboarding_phase)||void 0!==(null==s?void 0:s.ai_assistant_onboarding_phase_last_set_at)&&(0,a().Mn)(s.ai_assistant_onboarding_phase_last_set_at)<1,u=await(0,R().Se)(o,{name:"ai_usage",amount:"unknown",spaceId:i.id,userId:o.currentUser.id});return Promise.resolve(t.showAssistantNotionAiCopy()&&t.isAiEnabled()&&l&&void 0===s.ai_sales_assisted_extra_notification_seen_at&&!c&&u)},ai_assistant_origin_element_tooltip:async e=>{const{environment:t,currentUserSettingsStore:n,mainEditorCurrentBlockStore:i,assistantFeatureGateStore:o}=e;return Promise.resolve(!(0,r(180252).$o)(t).state&&i.canRead()&&o.isQnATooltipsVisible(n))},language_switch_prompt:async e=>{const{environment:t,experimentStore:r}=e;if(!r.checkGate({gateName:"language_switch_prompt_v2",disableExposureLogging:!0}))return!1;try{const e=await p().callApi({eventName:"isEligibleForLanguageSwitchPrompt",environment:t,data:{navigatorLanguages:Array.from(navigator.languages)}});if("success"===e.type){const t=e.data;return C().z.setState({status:"fulfilled",...t}),t.isEligible}}catch(n){}return C().z.setState({status:"fulfilled",isEligible:!1,eligibilityReason:void 0,preferredSwitchableLocale:void 0}),!1},forms_share_form_tooltip:async e=>{var t;const{currentUserSettingsStore:r}=e,n=Boolean(null===(t=r.getSettings())||void 0===t?void 0:t.seen_forms_share_form_tooltip);return Promise.resolve(!n)},forms_add_conditional_logic_tooltip:async e=>{var t;const{currentUserSettingsStore:r}=e,n=Boolean(null===(t=r.getSettings())||void 0===t?void 0:t.seen_forms_add_conditional_logic_tooltip);return Promise.resolve(!n)},customize_slug_tooltip:async e=>{const{sidebarSpaceStore:t}=e,r=(0,w().o)(t);return Promise.resolve(r)},collection_add_item_button_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},ai_connector_outlook_sidebar_notification:async e=>{const{assistantFeatureGateStore:t,sidebarSpaceStore:n,mainEditorCurrentBlockStore:i,currentUserSettingsStore:o,environment:a}=e;if((0,r(604018).wd)().includes("outlook"))return!1;const s=n.getSpaceId(),c=await(0,F().yk)({environment:a,spaceId:s}),u=(0,_().rV)((0,l().AI)(c),"enterprise"),d=(n.getMemberCountFromPublicSpaceData()??1)>1;return!!(i.canRead()&&n.canAdmin()&&u&&d)&&(!!W({currentUserSettingsStore:o,minAccountAgeInDays:8})&&!!(t.isOutlookSidebarNotificationEnabled()&&t.isAiConnectorEnabled("outlook")&&t.isAiEnabled()))},workflow_template_installation:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},organization_onboarding_modal:async e=>{const{environment:t,sidebarSpaceStore:r}=e,n=(0,_().bp)(r.getSubscriptionTier()),i=r.isReady()&&r.canAdmin();if(!n||!i)return!1;const o=await p().callApi({eventName:"getOrganizationOnboardingInfo",environment:t,data:{spaceId:r.getSpaceId()}});if("success"===o.type){const e=o.data.result.onboardingStatus;return"ineligible"!==e&&"completed"!==e}return!1},get_notified_onboarding_tooltip:async({currentUserSettingsStore:e,experimentStore:t})=>{const r=W({currentUserSettingsStore:e,minAccountAgeInDays:8});return Promise.resolve(r)},try_notion_for_work_sidebar_callout_revamped:async e=>{const{currentUserSettingsStore:t,sidebarSpaceStore:r}=e,n=W({currentUserSettingsStore:t,minAccountAgeInDays:90}),i=(0,y().FX)(),o="personal"===i,a="education"===i&&!(0,w().o)(r);return Promise.resolve(n&&(o||a)&&"control"!==(0,f().Ey)())},notion_mail_launch_modal:async e=>{const{environment:t,experimentStore:r}=e;if(r.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);const n=await(0,h().$)({environment:t}),i="msStore"===t.device.desktopTargetPlatform;return!n&&!i&&r.checkGate({gateName:"notion_mail_launch_modal"})},notion_mail_launch_modal_2:async e=>{const{environment:t,experimentStore:n,sidebarSpaceStore:i,sidebarSpaceViewStore:o,currentUserSettingsStore:a,billingData:s}=e;if(n.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);let c=!1;if(s&&(0,l().TB)(s)){const e=await(0,x().PT)({environment:t,billingData:s,spaceStore:i});if(e){const t="type"in s&&"admin"===s.type?{...s,type:"admin"}:void 0;c=await(0,x().iO)({billingData:t,businessTrialOffer:e,spaceViewSettings:null==o?void 0:o.getSettings()})}}const u=Boolean(i&&a.id&&(0,r(646736).dp)(i,a.id).isWorkspaceOwner());if(c&&u)return!1;return!(await(0,h().$)({environment:t}))&&n.checkGate({gateName:"notion_mail_launch_modal_2"})},notion_mail_launch_2_callout:async e=>{const{environment:t,experimentStore:r}=e,n=await(0,h().$)({environment:t});return!!I().sidebarExpandedStore.state&&(!n&&r.checkGate({gateName:"notion_mail_launch_modal_2"}))},ai_for_work_announcement_modal:async e=>{const{experimentStore:t,assistantFeatureGateStore:r}=e;if(t.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);const n=t.checkGate({gateName:"ai_for_work_modal",disableExposureLogging:!0}),i="aifw"===new URLSearchParams(window.location.search).get("origin");return Promise.resolve(!i&&r.isAiEnabled()&&n)},passkey_nudge_modal:async e=>{var t,r;const{environment:n,experimentStore:i,spaceProfileSettingsStore:o}=e;if(i.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);const a=i.checkGate({gateName:"passkey_nudges"})&&!o.state.accountSettings.isSamlEnforced&&o.state.accountSettings.hasPassword&&!o.state.accountSettings.hasPasskeys;return(!n.device.isAndroid||"nativeTab"===(null===(t=n.RouterStore.state.route)||void 0===t?void 0:t.name)&&"settings"===(null===(r=n.RouterStore.state.route)||void 0===r?void 0:r.tab))&&a?Promise.resolve(!0):Promise.resolve(!1)},meeting_notes_prelaunch_modal:async e=>Promise.resolve(!1),collaboration_callout:async e=>{var t;const{sidebarSpaceStore:n,sidebarSpaceViewStore:i,currentUserSettingsStore:a,environment:s}=e;if(!n)return!1;const l=1===(n.getMemberCountFromPublicSpaceData()??1)&&0===n.getSpacePages().length&&"personal"===n.getPlanType(),c=((null===(t=i.getPrivatePages(s))||void 0===t?void 0:t.length)??0)>0,{allPagesStores:u}=(0,r(427767).a)({environment:s,spaceViewStore:i,userSettingsStore:a,type:"shared"}).state,d=u.length>0;if(!l||!c||d)return Promise.resolve(!1);if(!(await(0,R().Se)(s,{name:"members",spaceId:n.id,userId:s.currentUser.id,amount:1})))return Promise.resolve(!1);const m=await(0,R().Se)(s,{name:"contacts_imports_invite",spaceId:n.id,userId:s.currentUser.id}),_=n.canEditMembership();return(0,r(787766).vC)({canEditPermission:_,isMobile:Boolean(o().A.isMobile),isEnterprise:m})?Promise.resolve(!0):Promise.resolve(!1)},public_share_link_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return(0,P().C)({store:t}).disabled||t.pathIsDead()||T().default.isSidePeekOpen()||T().default.isCenterPeekOpen()?Promise.resolve(!1):t.canAdmin()?t.getPermissionItems().find((e=>(0,r(68263).vZ)(e)))?Promise.resolve(!1):Promise.resolve(!0):Promise.resolve(!1)},sharing_contacts_import_tooltip:async e=>{const{mainEditorCurrentBlockStore:t,sidebarSpaceStore:n,experimentStore:i}=e;if(!t.canAdmin())return Promise.resolve(!1);const o=n.getBotSettingsStore().getValue();return"approved_only"===(null==o?void 0:o.integration_restrictions)&&null!=o&&o.integration_approval_statuses&&!o.integration_approval_statuses[r(617871).LF]?Promise.resolve(!1):Promise.resolve("control"!==i.getEligibleGroup({experimentId:"microsoft_contacts_import",defaultGroup:"control",disableExposureLogging:!0}))},copy_link_no_permissions_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return(0,P().C)({store:t}).disabled||t.pathIsDead()||T().default.isSidePeekOpen()||T().default.isCenterPeekOpen()?Promise.resolve(!1):Promise.resolve(!0)},search_unified_find_result_tooltip:async e=>{const{environment:t,sidebarSpaceStore:r,assistantFeatureGateStore:n}=e,i=r.id,o=t.currentUser.id;if(!i||!o)return Promise.resolve(!1);if(!n.isDeepFindEnabled())return Promise.resolve(!1);const a=await(0,R().Bw)(t,{name:"ai_usage",spaceId:i,userId:o,amount:1}),s=(0,m().e2)(a);return Promise.resolve(s)},research_mode_chat_history_tooltip:async e=>{const{environment:t,sidebarSpaceStore:r,assistantFeatureGateStore:n}=e,i=r.getSpaceId(),o=t.currentUser.id;if(!i||!o)return Promise.resolve(!1);if(!n.isResearchModeWelcomePageAiEnabled())return Promise.resolve(!1);if(!n.isResearchModeChatHistoryCalloutEnabled())return Promise.resolve(!1);const a=await(0,R().Bw)(t,{name:"ai_research_mode",spaceId:i,userId:o,amount:1}),s=(0,m().e2)(a);return Promise.resolve(s)},anyone_with_the_link_sidebar_callout:async e=>{const{environment:t,currentUserRootStore:n}=e;if(!n)return Promise.resolve(!1);if((0,r(154060).A)())return Promise.resolve(!1);if(!!(0,f().C4)({userRootStore:n}))return Promise.resolve(!1);return(0,r(311337).y)(t)?Promise.resolve(!0):Promise.resolve(!1)},research_mode_discoverability_tooltip:async e=>{var t;const{environment:r,sidebarSpaceStore:n,assistantFeatureGateStore:i,aiUsageEligibilityStore:o}=e,a=n.getSpaceId(),s=r.currentUser.id;if(!a||!s)return Promise.resolve(!1);if(!i.isResearchModeDiscoverabilityTooltipEnabled())return Promise.resolve(!1);if(!i.isResearchModeWelcomePageAiEnabled())return Promise.resolve(!1);if(((null===(t=o.state)||void 0===t?void 0:t.researchModeUsage)??0)>0)return Promise.resolve(!1);const l=await(0,R().Bw)(r,{name:"ai_research_mode",spaceId:a,userId:s,amount:1}),c=(0,m().e2)(l);return Promise.resolve(c)},onboarding_workflow_template_callout:async e=>{var t,n,i,o;const{currentUserSettingsStore:a}=e;if(Boolean(null===(t=a.getSettings())||void 0===t||null===(t=t.adoption_entry_points)||void 0===t?void 0:t.onboarding_workflow_template_sidebar_announcement))return Promise.resolve(!1);const s=null===(n=a.getSettings())||void 0===n?void 0:n.onboarding_workflow_template_blocks,l=s&&Object.keys(s).length>0&&Object.values(s).some((e=>e.length>0)),c=null===(i=E().AppStoreSidebarSpaceStore.state)||void 0===i?void 0:i.id;if(!c)return Promise.resolve(!1);const u=null==s?void 0:s[c];if(!l||!u)return Promise.resolve(!1);const d=null===(o=a.getSettings())||void 0===o?void 0:o.signup_time;if(!d)return Promise.resolve(!1);(0,r(113806).e)({signupTime:d,age:"1_day"});return Promise.resolve(!1)},referral_announcement:async e=>{const{environment:t,subscriptionDataStore:r,sidebarSpaceStore:n,billingData:i}=e;if(o().A.isMobile)return Promise.resolve(!1);if(!n.getSpaceId())return Promise.resolve(!1);if(!L().qc(r.state))return Promise.resolve(!1);const a=n.getMemberCountFromPublicSpaceData()??1;return(0,O().VJ)({memberCount:a,billingData:i,environment:t})?Promise.resolve(!0):Promise.resolve(!1)},expansion_offer_announcement:async e=>{const{environment:t,subscriptionDataStore:n,sidebarSpaceStore:i,billingData:a}=e;if(o().A.isMobile)return Promise.resolve(!1);const s=i.getSpaceId();if(!s)return Promise.resolve(!1);if(!L().qc(n.state))return Promise.resolve(!1);const l=a&&"type"in a&&"admin"===a.type?{...a,type:"admin"}:void 0,c=i.getMemberCountFromPublicSpaceData()??1;return(0,r(272407).d)({memberCount:c,billingData:l,spaceId:s,environment:t})?Promise.resolve(!0):Promise.resolve(!1)},notion_calendar_existing_user_activation_callout:async e=>{const{environment:t,sidebarSpaceStore:n,sidebarSpaceViewStore:o}=e;if(!i().default.checkGate({gateName:"connected_apps_upsell--calendaractivationcallout"}))return!1;if(!I().sidebarExpandedStore.state)return!1;const a=await(0,r(583238).b)();if(!a)return!1;const s=o.getFirstJoinedSpaceTime();if(!s)return!1;return!(Math.abs(a.created_at-s)>3e4)&&(0,r(644914).mM)(t,n)},share_referral_link_notification_tooltip:async e=>{const{environment:t,subscriptionDataStore:r,sidebarSpaceStore:n,billingData:i}=e;if(o().A.isMobile)return Promise.resolve(!1);if(!n.getSpaceId())return Promise.resolve(!1);if(!L().qc(r.state))return Promise.resolve(!1);const a=n.getMemberCountFromPublicSpaceData()??1;return(0,O().VJ)({memberCount:a,billingData:i,environment:t})?Promise.resolve(!0):Promise.resolve(!1)},offline_mode_electron_launch_modal:async e=>{const{environment:t,sidebarSpaceStore:r,experimentStore:n,mainEditorCurrentBlockStore:i}=e;if(n.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);if(!t.device.isElectron)return Promise.resolve(!1);const{isLocationEligibleForOfflineModeModal:o,isEligibleForOfflineModeMessage:a}=await k().sf.load();if(!o())return Promise.resolve(!1);const s=a({spaceStore:r,environment:t,experimentStore:n,mainEditorCurrentBlockStore:i});return Promise.resolve(s)},offline_mode_web_launch_modal:async e=>{const{environment:t,experimentStore:r,sidebarSpaceStore:n,mainEditorCurrentBlockStore:i}=e,{device:o}=t;if(r.checkGate({gateName:"2025_non_mwn_callout_modal_blackout"}))return Promise.resolve(!1);if(!(o.isDesktopBrowser&&!o.isLinux))return Promise.resolve(!1);const{isLocationEligibleForOfflineModeModal:a,isEligibleForOfflineModeMessage:s}=await k().sf.load();if(!a())return Promise.resolve(!1);const l=s({spaceStore:n,environment:t,experimentStore:r,mainEditorCurrentBlockStore:i});return Promise.resolve(l)},offline_mode_education_tooltip:async e=>{const{environment:t,sidebarSpaceStore:r,experimentStore:n,mainEditorCurrentBlockStore:i}=e;if(!t.device.isElectron)return!1;const{isEligibleForOfflineModeMessage:o}=await k().sf.load(),a=o({spaceStore:r,environment:t,experimentStore:n,mainEditorCurrentBlockStore:i});return Promise.resolve(a)},offline_mode_sidebar_callout:async e=>{var t;const{billingData:r,sidebarSpaceStore:n,sidebarSpaceViewStore:i,environment:o,experimentStore:a,mainEditorCurrentBlockStore:s}=e;if(!o.device.isElectron)return!1;const{isEligibleForOfflineModeMessage:c}=await k().sf.load();if(!c({spaceStore:n,environment:o,experimentStore:a,mainEditorCurrentBlockStore:s}))return!1;if((0,l().Gm)(r))return!1;const u=await(0,R().Bw)(o,{name:"offline_manual_sync",spaceId:n.getSpaceId(),userId:o.currentUser.id,amount:1});if("available"!==(null==u?void 0:u.type))return!1;if((null==u||null===(t=u.limit)||void 0===t?void 0:t.current)>0)return!1;const d=null==i?void 0:i.getSettings(),m=null==d?void 0:d.offline_mode_sidebar_callout_last_shown_at;if(m&&Date.now()-m<g().nD)return!1;return!(((null==d?void 0:d.offline_mode_sidebar_callout_shown_count)||0)>=3)},adoption_nux_second_session_database_learning_tooltip:async e=>{const{environment:t,experimentStore:r,currentUserSettingsStore:n}=e;if(!r.checkGate({gateName:"adoption_nux_education_content_delivery"}))return Promise.resolve(!1);if(o().A.isMobile)return Promise.resolve(!1);if(!n||!n.getSettings())return Promise.resolve(!1);const i=v().g5({userSettingsStore:n});if(i&&void 0!==i.last_delivered_at)return Promise.resolve(!1);const a=r.getConfigKey("days_since_signup_education_content_delivery_override","days")??(0,y().iZ)(n);if(null==a)return Promise.resolve(!1);if(a>7)return Promise.resolve(!1);const s=function(e){const{daysSinceSignup:t,experimentStore:r}=e;let n="control";return t<=6&&t>=4&&(n=r.getEligibleGroup({experimentId:"adoption_nux_education_database_date_range",defaultGroup:"control",enableEventTrailLogging:!0})),n}({daysSinceSignup:a,experimentStore:r});return v().AX({environment:t,userSettingsStore:n,metadata:{}}),"control"!==s?Promise.resolve(!0):Promise.resolve(!1)},block_limit_offer_announcement:async e=>{const{environment:t}=e,{sidebarSpaceStore:r}=E().default.state;if(null==r||!r.id)return Promise.resolve(!1);const n=await M().I.awaitData(t,{offerCampaign:"block_limit",spaceId:null==r?void 0:r.id});return Promise.resolve(Boolean(n))},post_business_trial_delayed_offer_announcement:async e=>{const{sidebarSpaceStore:t}=E().default.state,r=i().default.checkGate({gateName:"post_business_trial_delayed_offer"}),n=null==t?void 0:t.id;if(!r||!n)return Promise.resolve(!1);return await M().I.awaitData(e.environment,{offerCampaign:"business_trial_non_conversion_delayed",spaceId:n})?Promise.resolve(!0):Promise.resolve(!1)},sidebar_documentation_link_moved_tooltip:async({currentUserSettingsStore:e})=>Promise.resolve(!0),invite_members_sidebar_callout:async e=>{const{environment:t,sidebarSpaceStore:n}=e,i=r(57605).T.getData(t,{spaceId:n.getSpaceId()});if(!i)return Promise.resolve(!1);const o=n.getMemberCountFromPublicSpaceData()??1;if("invite"!==(0,K().x)({billingData:i,memberCount:o}))return Promise.resolve(!1);if(!(await(0,R().Se)(t,{name:"members",spaceId:n.getSpaceId(),userId:t.currentUser.id,amount:1})))return Promise.resolve(!1);const{canShowInviteMembers:a}=(0,r(478873).Y)(n);return Promise.resolve(a)},mwn_announcement_modal_2025:async({experimentStore:e})=>{if(o().A.isMobile)return Promise.resolve(!1);return e.checkGate({gateName:"mwn_announcement_modal_2025"})?Promise.resolve(!0):Promise.resolve(!1)},trial_ai_info_modal:async e=>{const{environment:t,sidebarSpaceStore:n,billingData:o}=e,a=n.getSpaceId();if(!(0,l().TB)(o))return Promise.resolve(!1);const s=await r(126410).A.awaitData(t,{spaceId:a});if(!s)return Promise.resolve(!1);const u=(0,d().Jd)(s);if(!u||"trial"!==u.offer.type||!(0,c().rM)(u))return Promise.resolve(!1);if(!z({messageKey:"trial_ai_info_modal",nDays:U().ef,currentTime:(0,l().DS)(o)}))return!1;if(!(0,B().tY)(u.entrypoint)&&!(0,B().t3)(u.offer.campaign))return Promise.resolve(!1);const m=i().default.getEligibleGroup({experimentId:"trial_ai_info_modal",parameter:"start_time_string",defaultGroup:"0",disableExposureLogging:!0});if("string"!=typeof m||"0"===m)return Promise.resolve(!1);const _=new Date(m).getTime();if(isNaN(_))return Promise.resolve(!1);return u.startDateMs<_?Promise.resolve(!1):Promise.resolve("on"!==i().default.getEligibleGroup({experimentId:"trial_ai_info_modal",defaultGroup:"control"}))},dummy_toast:async e=>Promise.resolve(!1),business_coupon_eligibility_midpoint_callout:async({environment:e,sidebarSpaceStore:t,experimentStore:n,billingData:i})=>{const o=await(0,N().OC)(e,null==t?void 0:t.id,"post_business_trial_coupon_callout");if(!o)return Promise.resolve(!1);const s=o.campaign,c=n.getConfig({configName:"offers_metadata"});let d=null;if((0,u().$$)(s))d=(0,u().D9)({offerCampaign:s,offerMetadata:c,space:t.getModel(),billingData:i});else if("business_trial_non_conversion_baseline"===s){var m;const e=null===(m=t.getSettings())||void 0===m?void 0:m.biz_offer_aversion_rejected_time;if(e){const t=(0,l().DS)(i),r=(0,a().Mn)(e,t.toMillis());d=c.post_biz_trial_coupon_eligible_days-r}}return d?Promise.resolve((0,r(496603).r4)(d,2,5)):Promise.resolve(!1)},business_coupon_eligibility_final_callout:async({environment:e,sidebarSpaceStore:t,experimentStore:r,billingData:n})=>{const i=await(0,N().OC)(e,null==t?void 0:t.id,"post_business_trial_coupon_callout");if(!i)return Promise.resolve(!1);const o=i.campaign,s=r.getConfig({configName:"offers_metadata"});let c;if((0,u().$$)(o))c=(0,u().D9)({offerCampaign:o,offerMetadata:s,space:t.getModel(),billingData:n});else if("business_trial_non_conversion_baseline"===o){var d;const e=null===(d=t.getSettings())||void 0===d?void 0:d.biz_offer_aversion_rejected_time;if(e){const t=(0,l().DS)(n),r=(0,a().Mn)(e,t.toMillis());c=s.post_biz_trial_coupon_eligible_days-r}}return Promise.resolve(1===c)},database_nudge_on_create_todo:async({environment:e,recentEventsStore:t,userLifecycleProfileStore:r})=>{const n=(0,V().cz)({userLifecycleProfileStore:r,recentEventsStore:t});if(!n)return Promise.resolve(!1);const i={environment:e,analyticsEventCounts:n},o=(0,V().hK)({key:"analytics_events.create_database",operator:"<",value:3},i);return Promise.resolve(o)}}},209169:(e,t,r)=>{r.d(t,{z:()=>n});const n=r(757695).Store.createValue({status:"uninitialized",isEligible:!1,preferredSwitchableLocale:void 0,eligibilityReason:void 0});r(852832).exposeDebugValue("LanguageSwitchEligibilityStore",n)},247450:(e,t,r)=>{r.d(t,{h:()=>i});var n=()=>r(792415);function i({blockId:e,setting:t}){var r;const{publicPageData:i}=n().A.state;if((null==i?void 0:i.pageId)!==e)return;return null===(r=i.securitySettings)||void 0===r?void 0:r[t]}},382302:(e,t,r)=>{r.d(t,{G:()=>i,_:()=>n});const n=.7,i=1},438177:(e,t,r)=>{function n(e){const t=e.getSubscriptionTier();return"plus"===t||"business"===t||"enterprise"===t}r.d(t,{o:()=>n})},478873:(e,t,r)=>{r.d(t,{Y:()=>o});var n=()=>r(47373),i=()=>r(272509);function o(e){if(!e||(0,i().I)(e))return{canShowInviteMembers:!1,canRequestMembers:!1};const t=!e.canEditMembership()&&!e.getDisableMembershipRequests()&&(0,n().x3)();return{canShowInviteMembers:e.canEditMembership()||t,canRequestMembers:t}}},907917:(e,t,r)=>{r.d(t,{w:()=>l,x:()=>s});var n=()=>r(762433),i=()=>r(979340),o=()=>r(240865),a=()=>r(324561);function s(e){const{billingData:t,memberCount:r}=e,o=(0,n().AI)(t),a=(0,i().dL)(o),s=(0,i().sP)(o);return a&&r<5?"invite":a?"upgrade":r<5&&!s?"invite":"none"}function l(e){const t=(0,a().lh)({spaceId:e}),r=(0,o().V)()??1;return t?s({billingData:t,memberCount:r}):"none"}},928153:(e,t,r)=>{r.d(t,{C:()=>s});var n=()=>r(534177),i=()=>r(247450),o=()=>r(765957),a=()=>r(422366);function s({store:e}){const t=(0,i().h)({blockId:e.id,setting:"publicAccess"});if((0,n().O9)(t))return t;const r=o().default.state.sidebarSpaceStore,s=(0,a().U)(e);return s?{disabled:Boolean(s.getDisablePublicAccess()),disabledBy:"team"}:!s&&null!=r&&r.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}}}]);