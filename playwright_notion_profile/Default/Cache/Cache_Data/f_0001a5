"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[77747],{8741:(e,t,r)=>{r.r(t),r.d(t,{arrowDiagonalUpRightSmallIcon:()=>i,iconDefinition:()=>n});r(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.65 3.66 8.68 8.68",directional:!0,svg:(0,r(474848).jsx)("path",{d:"M5.603 3.663a.625.625 0 1 0 0 1.25h4.6l-6.37 6.371a.615.615 0 0 0 .013.87.616.616 0 0 0 .87.014l6.371-6.372v4.601a.625.625 0 1 0 1.25 0v-6.11a.625.625 0 0 0-.625-.624z"})},i=(0,r(340498).wt)("arrowDiagonalUpRightSmall",n)},24126:(e,t,r)=>{r.d(t,{c:()=>i});r(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,r(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},i=(0,r(340498).wt)("beaker",n)},65767:(e,t,r)=>{r.d(t,{l:()=>i});r(296540);var n=r(474848);const i=(0,r(340498).wt)("closeThick",{viewBox:"0 0 8 8",svg:(0,n.jsx)("polygon",{points:"8 1.01818182 6.98181818 0 4 2.98181818 1.01818182 0 0 1.01818182 2.98181818 4 0 6.98181818 1.01818182 8 4 5.01818182 6.98181818 8 8 6.98181818 5.01818182 4"})})},338931:(e,t,r)=>{r.d(t,{Gj:()=>c,RN:()=>g,_X:()=>f,sR:()=>p,vZ:()=>d,xy:()=>y,y6:()=>h});r(944114),r(898992),r(823215),r(354520),r(672577);var n=()=>r(906745),i=()=>r(726637),s=()=>r(761940),o=()=>r(651784),a=()=>r(179034),l=()=>r(148832);function c(e){const t=n().c9.fromMillis(e.startUnixTimestampMS),r=e.endUnixTimestampMS?n().c9.fromMillis(e.endUnixTimestampMS):void 0,i=n().c9.fromMillis(e.startOfWeekUnixTimestampMS),s=n().c9.fromMillis(e.endOfWeekUnixTimestampMS),o=t.startOf("day"),a=n().c9.max(i,o),l=Math.ceil(a.diff(i,"days").get("days"));let c=1;if(r){const e=r.endOf("day"),t=n().c9.min(s,e);c=Math.ceil(t.diff(a,"days").get("days"))}return{start:t,end:r,startOfWeek:i,endOfWeek:s,startColumn:l,columnCount:c}}function d(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const u={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15},m={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:5},p={upcomingMinsThreshold:10,startingMinsThreshold:15,startedMinsThreshold:15};function h(e){const{events:t,accounts:r,thresholds:i=u,filters:o}=e,a=t.filter((e=>{if(!e.conferencing)return!1;const t=r.find((t=>t.id===e.accountId));return!(null==t||!t.email)&&(!!(0,s().Ko)(e,t.email)&&(!function(e){if("declined"===e)return!0;return!1}(e.responseStatus??"declined")&&!e.isAllDay))}));if(0===a.length)return[];const{upcomingMinsThreshold:l,startingMinsThreshold:c,startedMinsThreshold:d}=i,m=[],p=[],h=[],g=[],f=[];for(const s of a){if(s.isAllDay)continue;const e=v(s),t=n().c9.now();if(null!=o&&o.excludeEventsOnDifferentDays){if(n().c9.now().setZone(e.start.zone).toISODate()!==e.start.toISODate())continue}const r=e.start.diff(t,"minutes").minutes;if(r>=0&&r<=l)m.push(s);else if(r<0){const n=-r;n>0&&n<=c?h.push(s):n>c&&n<=d?g.push(s):e.contains(t)&&p.push(s)}else f.push(s)}p.sort(((e,t)=>{const r=n().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone});return n().c9.fromISO(t.start.dateTime,{zone:t.start.timeZone}).diff(r).toMillis()}));return[...m,...h,...g,...null!=o&&o.excludeInProgressEvents?[]:p,...null!=o&&o.excludeUpcomingLaterEvents?[]:f]}function g(e,t){return h({events:e,accounts:t,thresholds:u,filters:void 0})[0]}function f(e,t){return h({events:e,accounts:t,thresholds:m,filters:{excludeUpcomingLaterEvents:!0}})[0]}function v(e){const t=n().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone}),r=n().c9.fromISO(e.end.dateTime,{zone:e.end.timeZone});return n().IX.fromDateTimes(t,r)}function y(e){const{environment:t,spaceStore:r}=e;let n=e.fileUrl;if(!r)return;const s=(0,o().parseRoute)({url:n,isMobile:t.device.isMobile,baseUrl:i().A.domainBaseUrl,publicDomainName:i().A.publicDomainName,protocol:i().A.protocol,currentUrl:window.location.href}),c="page"===s.name?s.blockId:void 0;if(!c)return;const d=l().B.createChildStore(r,{table:a().ev,id:c});return d.load(),d}},427636:(e,t,r)=>{r.d(t,{A:()=>i});r(296540);var n=r(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:s,style:o,inline:a}=e,l=(0,r(69708).tz)(),c=(0,r(484714).Y0)(),d=(0,r(56366).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:m,badgeStyle:p}=(0,r(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...o},avatarWrapStyle:a?{width:"none",minHeight:"none",marginInlineEnd:6}:{marginInlineEnd:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:r(726637).A.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginInlineStart:8,marginTop:1}})),[o,a,c]);return(0,n.jsxs)("div",{style:u,children:[(0,n.jsx)("div",{style:m,children:(0,n.jsx)(r(256863).A,{botStore:t,size:i})}),(0,n.jsx)("div",{style:{...r(284371).RC},children:d}),s?(0,n.jsx)("div",{style:p,children:"Bot"}):void 0]})}},448693:(e,t,r)=>{r.d(t,{Ay:()=>x,t_:()=>b,v7:()=>I});r(296540);var n=()=>r(484714),i=()=>r(56366),s=()=>r(764880),o=()=>r(784892),a=()=>r(534177),l=()=>r(313364),c=()=>r(258836),d=()=>r(842677),u=()=>r(870092),m=()=>r(427636),p=()=>r(256863),h=()=>r(848401),g=()=>r(994006),f=()=>r(453697),v=r(474848);function y(e){const t=(0,n().v3)(),{actor:r,format:s,hasTooltip:y,tooltipHeader:x,hasPersonHoverCard:b}=e,I=(0,i().K8)((()=>{const e=r.asActor;return e&&d().RecordStores.createUniqueRootStore(t,e.pointer)}),[r,t]);return(0,v.jsx)(h().Ay,{...e,renderAvatar:e=>{if(I)return I instanceof c().v?s===o().NY.Inline?(0,v.jsx)(p().A,{botStore:I,size:e,style:S}):(0,v.jsx)(m().A,{botStore:I,avatarSize:e,inline:!0,style:S}):I instanceof u().L?s===o().NY.Inline?(0,v.jsx)(f().A,{userStore:I,size:e,avatarShouldShowShadow:!0,hasTooltip:y??!0,style:S,tooltipHeader:x,hasPersonHoverCard:b}):(0,v.jsx)(g().A,{userStore:I,avatarSize:e,inline:!0,hasTooltip:y,hasPersonHoverCard:b,style:S,tooltipHeader:x}):void(I instanceof l().p||(0,a().HB)(I))}})}const S={minWidth:0};y.Format=o().NY;const x=y;function b(e){const{userValue:t,...r}=e;return(0,v.jsx)(y,{actor:(0,s().MR)(t),...r})}function I(e){const{botValue:t,...r}=e;return(0,v.jsx)(y,{actor:(0,s().oC)(t),...r})}b.Format=h().mI,I.Format=h().mI},604038:(e,t,r)=>{r.d(t,{kf:()=>_e,CU:()=>De,LT:()=>Be,tT:()=>Le});r(944114),r(517642),r(658004),r(733853),r(845876),r(432475),r(515024),r(731698),r(898992),r(823215),r(354520),r(581454);var n=r(296540),i=()=>r(726637),s=()=>r(484714),o=()=>r(56366),a=()=>r(401497),l=()=>r(252291),c=()=>r(396896),d=()=>r(493552),u=()=>r(584262),m=()=>r(40457),p=()=>r(798880),h=()=>r(620333),g=()=>r(245241),f=()=>r(536504),v=()=>r(69708),y=()=>r(284371),S=()=>r(884107),x=()=>r(476524),b=()=>r(751380),I=()=>r(658883),w=()=>r(780865),M=(r(803949),()=>r(242422)),A=()=>r(496603),T=()=>r(534177);class k extends(()=>r(757695))().Store{getInitialState(){return{pageIdToUsers:{},similarUserIdToLastVisitedPageId:{}}}getPageIdToActiveSimilarUsersCount(){const e={};for(const[t,r]of(0,T().WP)(this.state.pageIdToUsers))e[t]=(null==r?void 0:r.length)??0;return e}}const j=new k;var C=()=>r(866515);const E=6e4;function R(e){return Date.now()-e.timestamp>=e.numberOfMinutes*E}var O=()=>r(152197),K=()=>r(765957),N=()=>r(982254),P=()=>r(786601),z=()=>r(250484),B=()=>r(760217),D=()=>r(939740),_=()=>r(187820),F=()=>r(128295),L=()=>r(126126),V=()=>r(887267),q=()=>r(913441),U=()=>r(564884),W=()=>r(929219),H=()=>r(42583),$=()=>r(340498),G=()=>r(321032),Y=()=>r(825972),Q=()=>r(392890),Z=()=>r(130382),X=()=>r(187174),J=()=>r(615234),ee=()=>r(338931),te=()=>r(32254),re=()=>r(677169),ne=()=>r(614016),ie=()=>r(379560);function se(e){const{meetingStartTime:t,intl:r}=e,n=t-Date.now();if(n<=0)return r.formatMessage(ae.now);if(n<J().pT){return`${(0,Z().ap)(t)}m ${r.formatMessage(ae.fromNow)}`}if(n<J().nD){return`${(0,Z().qs)(t)}h ${r.formatMessage(ae.fromNow)}`}return`${(0,Z().AQ)(t)}d ${r.formatMessage(ae.fromNow)}`}function oe(e){const t=e-Date.now();return t<=0?"now":t<J().pT?"less_than_1h":t<8*J().pT?"less_than_8h":t<J().nD?"less_than_24h":"more_than_1d"}const ae=(0,v().YK)({now:{id:"miniSearch.now",defaultMessage:"Now"},fromNow:{id:"miniSearch.fromNow",defaultMessage:"from now"}});var le=()=>r(428343),ce=()=>r(135055),de=()=>r(89924),ue=()=>r(383064),me=r(474848);function pe(e){const{numberOfRecentPagesToShow:t,buildMenuListItem:a,queryId:m}=e,{section:p,pageIdsFromUpcomingMeetings:h}=function(e){const{trackSelectSearchItem:t,closeSearch:r,queryId:a}=e,m=(0,v().tz)(),p=(0,s().v3)(),h=(0,re().m)(),g=function(){const e=(0,s().v3)(),t=(0,v().tz)(),[r,i]=(0,n.useState)(!1),[a,l]=(0,n.useState)([]),c=(0,re().m)(),d=(0,o().K8)((()=>ie().A.getEvents()),[]),u=(0,o().O$)(K().AppStoreSidebarSpaceStore),m=(0,o().O$)(K().AppStoreSidebarSpaceViewStore);(0,X().Yb)((async()=>{if(!c.botId||r)return;const t="two_days",n=(0,ne().B7)(t),s=await(0,te().qq)({environment:e,sidebarSpaceViewStore:m,forceRefetch:!1,reason:{reason:"background_load"},botId:c.botId,timeRange:{key:t,...n}});"success"!==s&&"skipped"!==s||i(!0)}),[c.botId,m,e,r]);const p=(0,n.useCallback)((()=>{const e=Date.now();return d.filter((t=>{var r;if(t.isAllDay||"declined"===t.responseStatus)return!1;const n=new Date(t.end.dateTime),i=(0,Q().A)(n,5);return((null===(r=t.attachments)||void 0===r?void 0:r.length)??0)>0&&i.getTime()>=e}))}),[d]);return(0,C().n)((()=>{const e=p(),t=e.map((e=>e.id)),r=a.map((e=>e.id));(0,A().R9)(t,r).length>0&&l(e)}),12e4,r),(0,o().K8)((()=>{const r=[];for(const i of a){const{attachments:s}=i;if(2===r.length)break;if(i.isAllDay)continue;const o=new Date(i.start.dateTime).getTime(),a=i.summary,l=i.id,c=(0,A().oE)((s??[]).map((t=>{const r=t.fileUrl;return(0,ee().xy)({environment:e,fileUrl:r,spaceStore:u})})).filter((e=>null==e?void 0:e.isReady()))),d=c.length>0?c[0]:void 0;if(d&&!r.some((e=>e.store===d))){var n;const e=se({meetingStartTime:o,intl:t}),s=oe(o);r.push({store:d,displayableTimeUntilEvent:e,timeUntilEventAnalyticsBucket:s,eventName:a,eventId:l,numberOfAttendees:(null===(n=i.attendees)||void 0===n?void 0:n.length)??0})}}return r}),[a,e,u,t])}(),f=(0,o().K8)((()=>g.map((e=>e.store.id))),[g]),y=(0,o().K8)((()=>(0,w().iu)(N().A.state.tabs,N().A.state.currentTab.id)),[],{debugName:"MiniSearch.electronTabs"}),S=(0,o().K8)((()=>(0,I().q)(p)&&p.device.isElectron),[p]),{isNewElectronTab:b,searchSessionId:M}=(0,o().K8)((()=>({isNewElectronTab:P().A.state.isNewElectronTab,searchSessionId:P().A.state.sessionId})),[],{debugName:"MiniSearch.isNewElectronTab"}),T=h.botId,k=(0,n.useMemo)((()=>{if(0===f.length)return;const e=g.map(((e,t)=>Le({blockStore:e.store,idx:t,resultFeatureNames:["UPCOMING_MEETING_ATTACHMENTS"]}))),n=(e,n)=>{const s=g[n],o=s.eventName??m.formatMessage(he.untitledMeeting),h=s.displayableTimeUntilEvent,f=(0,me.jsxs)(c().fI,{gap:4,children:[(0,me.jsx)(l().I,{icon:H().D,size:$().Ev.sm}),(0,me.jsx)(d().D,{colorPalette:"gray",colorVariant:"secondary",styleKey:"Caption/Regular",children:o})]}),v=i().A.isMobile?void 0:(0,me.jsx)(d().D,{colorPalette:"gray",colorVariant:"secondary",styleKey:"Caption/Regular",children:h});return{render:t=>(0,me.jsx)(_e,{...t,currentView:"recents",result:e,queryId:a,rightOverride:v,captionOverride:f}),key:`upcoming-meeting-${e.store.id}`,action:({event:n})=>{x().Bz({event:n,result:e,context:"recent_pages",environment:p,queryId:a,trackSelectSearchItem:t,closeSearch:r,isCommandSearch:S,electronTabs:y,isNewElectronTab:b,source:u().y8.MiniQuickFind}),(0,U().u)({environment:p,event:{eventName:"search_calendar_attachment_click",eventProperties:{search_session_id:M,number_of_attendees:s.numberOfAttendees,time_until_event_bucket:s.timeUntilEventAnalyticsBucket}}}),T&&(0,G().R)(p,{botId:T,payload:{type:"track",payload:{event:"eventAttachmentOpened",provider:"notion",location:"notionSearchNoQueryView"}}})}}};return{items:e.map(((e,t)=>n(e,t))),key:"upcoming-meeting-attachments",render:e=>(0,me.jsx)(de().A,{...e,title:m.formatMessage(he.fromCalendarEvents)})}}),[f.length,g,m,a,p,t,r,S,y,b,M,T]);return{section:k,pageIdsFromUpcomingMeetings:f}}({trackSelectSearchItem:e.trackSelectSearchItem,closeSearch:e.closeSearch,queryId:m}),g=(0,o().K8)((()=>{const e=(0,r(486674).a)();return Y().NK.state.filter((t=>t.pageId!==(null==e?void 0:e.id)&&!h.includes(t.pageId))).slice(0,t-h.length)}),[t,h]),f=(0,o().K8)((()=>{const e=new Map;return g.forEach(((t,r)=>{const n=(0,Y().ht)(t.visitedAt),i=Le({blockStore:t.store,idx:r,resultFeatureNames:["RECENT_ALIVE_PAGES"]}),s=a(i);var o;e.has(n)?null===(o=e.get(n))||void 0===o||o.push(s):e.set(n,[s])})),e}),[a,g],{debugName:"MiniSearch.resultsByBucket"}),y=function(){const e=(0,v().tz)(),t=(0,s().v3)(),r=(0,o().K8)((()=>P().A.state.isNewElectronTab),[],{debugName:"MiniSearch.isNewElectronTab"}),i=(0,o().K8)((()=>(0,w().iu)(N().A.state.tabs,N().A.state.currentTab.id)),[],{debugName:"MiniSearch.electronTabs"}),a=(0,n.useMemo)((()=>{if(r)return(0,V().mD)({environment:t,intl:e,electronTabs:i,isNewElectronTab:r})}),[t,e,r,i]);return a}(),{offlinePageSection:S,isOfflineMode:b}=function(e){const t=(0,v().tz)(),r=(0,ce().y6)(),i=!(0,o().O$)(W().e),s=r&&i,a=(0,le().Q)({filterCategory:"all",availableOffline:!0,searchQuery:"",disable:!s}),l=(0,n.useMemo)((()=>({items:a.map(((e,t)=>Le({idx:t,blockStore:e.pageBlockStore,resultFeatureNames:["OFFLINE_PAGES"]}))).map(e),key:"offline-pages",render:e=>(0,me.jsx)(de().A,{...e,title:t.formatMessage(ue().g.offlinePages)})})),[a,e,t]);return{isOfflineMode:s,offlinePageSection:l}}(a),M=(0,n.useMemo)((()=>{const e=[];return Y().Rj.forEach((t=>{const r=f.get(t);r&&0!==r.length&&e.push({items:r,key:`recent-pages-${t}`,render:e=>(0,me.jsx)(de().A,{...e,title:(0,me.jsx)(V().sg,{bucket:t})})})})),e}),[f]),T=(0,o().K8)((()=>{const e=[];return y&&e.push({items:[y],key:"new-page",render:e=>(0,me.jsx)(de().A,{...e})}),p&&e.push(p),b?e.push(S):e.push(...M),e}),[y,b,p,S,M]);return T}const he=(0,v().YK)({untitledMeeting:{id:"miniSearch.untitledMeeting",defaultMessage:"Untitled meeting"},fromCalendarEvents:{id:"miniSearch.fromCalendarEvents",defaultMessage:"From calendar events"}});var ge=()=>r(381175),fe=()=>r(207207),ve=()=>r(90546),ye=(r(672577),()=>r(631524)),Se=()=>r(715256),xe=()=>r(29037),be=()=>r(722872),Ie=()=>r(404277),we=()=>r(417392);const Me=n.forwardRef((function(e,t){const{allPossibleExperiments:i,pendingOverrides:s,onExperimentChange:o,onCommitOverrides:l,isPopupOpen:c,onClosePopup:d,debugInfo:u,...m}=e,p=(0,v().tz)(),[h,g]=(0,n.useState)(""),f=(0,n.useRef)(null),[S,x]=(0,r(857437).$)(),b=(0,a().IS)((e=>({gearIcon:{width:20,height:20,color:e.text.primary},checkmark:{width:16,height:16,color:e.inputBlueFocusRing},container:{borderRadius:6,paddingInlineStart:4},titleContainer:{display:"flex",alignItems:"center",gap:4,color:e.text.primary,fontWeight:y().Wy.medium,fontSize:14,...y().RC},activeOverrideSection:{borderBottom:`1px solid ${e.darkDividerColor}`,paddingBottom:8}})),[]),I=(0,n.useMemo)((()=>{if(!h.trim())return i;const e=h.toLowerCase();return i.filter((t=>t.experimentId.toLowerCase().includes(e)))}),[i,h]),w=(0,n.useCallback)(((e,t)=>{const r=function(e,t,r){if("control"===r||void 0===r){const{[t]:r,...n}=e;return n}return{...e,[t]:r}}(s,e,t);o(r)}),[s,o]);(0,n.useEffect)((()=>{c&&setTimeout((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}),100)}),[c]);const M=(0,n.useCallback)((()=>{g(""),d(),l(s)}),[d,l,s]),{overriddenExperimentItems:A,remainingExperimentItems:T}=(0,n.useMemo)((()=>{const e=[],t=[];return I.forEach((r=>{const{experimentId:n,groups:i}=r,o=s[n],a=void 0!==o,l=(()=>{if(i.length<=2){const e=i.find((e=>"control"!==e)),t=o===e,s=r.group===e,a=void 0!==o,l=a?o:r.group;return{key:n,action:()=>{w(n,s&&t||t?void 0:e)},render:e=>(0,me.jsx)(B().A,{...e,title:ke(n),caption:l,right:a?(0,xe().checkmarkIcon)(b.checkmark):void 0})}}return{key:n,action:()=>{},render:e=>(0,me.jsx)(Ae,{...e,experimentId:n,groups:i,currentValue:o,experimentDefaultValue:r.group,onValueChange:w})}})();a?e.push(l):t.push(l)})),{overriddenExperimentItems:e,remainingExperimentItems:t}}),[I,s,w,b.checkmark]),k=(0,n.useMemo)((()=>{const e=[];return e.push({key:"search-section",render:e=>(0,me.jsx)(de().A,{...e,title:p.formatMessage(je.searchExperiments)}),items:[{key:"search-input",action:()=>{},render:e=>(0,me.jsx)(r(419357).Ay,{...e,ref:f,value:h,onChange:e=>g(e.target.value),onKeyDown:e=>{if("Escape"===e.key)return e.preventDefault(),void M();"Backspace"===e.key||"Delete"===e.key?0===h.length&&e.preventDefault():"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()},placeholder:p.formatMessage(je.searchPlaceholder),focusInitial:!0,showClearButton:!0,...S})}]}),A.length>0&&e.push({key:"active-overrides",render:e=>(0,me.jsx)(de().A,{...e,title:p.formatMessage(je.activeOverrides),style:b.activeOverrideSection}),items:A}),T.length>0&&e.push({key:"experiments",render:e=>(0,me.jsx)(de().A,{...e,title:p.formatMessage(je.availableExperiments)}),items:T}),e}),[A,T,p,b.activeOverrideSection,h,S,M]),j=Object.keys(s).length>0;return(0,me.jsx)(we().Ay,{open:c,onDismiss:M,popupType:we().nl.Popup,placementToOrigin:"bottom",alignmentToOrigin:"center",trapFocus:!0,ariaLabel:p.formatMessage(je.searchExperimentsModalLabel),origin:(0,me.jsx)(B().A,{...m,ref:t,title:(0,me.jsx)("div",{style:b.titleContainer,children:j?Object.keys(s).map(ke).join(", "):p.formatMessage(je.selectedExperiments)}),icon:(0,r(24126).c)(b.gearIcon),style:b.container,buttonStyle:De,right:u?(0,me.jsx)(Te,{debugInfo:u}):void 0}),render:()=>(0,me.jsx)(Ie().A,{menuType:be().gu.Popup,width:350,minHeight:150,maxHeight:330,children:(0,me.jsx)(D().Ay,{type:D().Oh.Vertical,initialFocus:0,sections:k,comboboxProps:x})})})}));function Ae(e){const{experimentId:t,groups:n,currentValue:i,experimentDefaultValue:s,onValueChange:o,...l}=e,c=void 0!==i?i:s||"control",d=void 0!==i,u=(0,a().IS)((e=>({checkmark:{width:16,height:16,color:e.inputBlueFocusRing},star:{width:16,height:16,color:e.text.secondary}})),[]);return(0,me.jsx)(r(662971).A,{...l,onFocus:()=>{},renderOrigin:(e,r)=>(0,me.jsx)(B().A,{...e,ref:r,title:ke(t),caption:d?`Override: ${c}`:`Default: ${c}`,right:d?(0,xe().checkmarkIcon)(u.checkmark):void 0,showExtensionArrow:!0}),renderExtension:(e,i)=>(0,me.jsx)(Ie().A,{menuType:be().gu.Popup,width:200,children:(0,me.jsx)(D().Ay,{type:D().Oh.Vertical,initialFocus:0,sections:[{key:"values",render:e=>(0,me.jsx)(de().A,{...e,title:ke(t)}),items:n.map((e=>{const n=e;return{key:e,action:()=>{o(t,e===s?void 0:n),i.close()},render:t=>(0,me.jsx)(B().A,{...t,title:e,right:(()=>{const t=c===e;return s===e?(0,r(877788).w)(u.star):t?(0,xe().checkmarkIcon)(u.checkmark):void 0})()})}}))}]})})})}function Te(e){const{debugInfo:t}=e,r=(0,s().v3)(),i=(0,a().IS)((e=>({container:{display:"flex",gap:4,alignItems:"center"},button:{fontSize:12,padding:"2px 6px",borderRadius:4,border:`1px solid ${e.border.primary}`,background:e.background.primary,color:e.text.secondary,cursor:"pointer",userSelect:"none"}})),[]),o=(0,n.useCallback)((async(e,n)=>{e.stopPropagation();const i="request"===n?t.response.rawRequests:t.response.rawResponses;if(i){const e=await S().R.clipboardActions.load();await e.copyString({environment:r,stringValue:JSON.stringify(i,null,2),copiedMessage:"request"===n?Ce.copiedSearchRequest:Ce.copiedSearchResponse})}}),[t,r]),l=Boolean(t.response.rawRequests),c=Boolean(t.response.rawResponses);return(0,me.jsxs)("div",{style:i.container,children:[l?(0,me.jsx)(ye().p,{size:"sm",style:i.button,onClick:e=>o(e,"request"),children:"Request"}):void 0,c?(0,me.jsx)(ye().p,{size:"sm",style:i.button,onClick:e=>o(e,"response"),children:"Response"}):void 0]})}function ke(e){return e.replace(/^search-/,"")}const je=(0,v().YK)({selectedExperiments:{id:"miniSearch.selectedExperiments.title",defaultMessage:"Selected experiments"},searchExperiments:{id:"miniSearch.searchExperiments.sectionTitle",defaultMessage:"Search Experiments"},searchExperimentsModalLabel:{id:"miniSearch.searchExperimentsModal.label",defaultMessage:"Search Experiments Modal"},activeOverrides:{id:"miniSearch.activeOverrides.title",defaultMessage:"Active Overrides"},availableExperiments:{id:"miniSearch.availableExperiments.title",defaultMessage:"Available Experiments"},searchPlaceholder:{id:"miniSearch.searchExperimentsModal.placeholder",defaultMessage:"Search experiments..."}}),Ce=(0,v().YK)({copiedSearchRequest:{id:"miniSearch.debugButtons.copiedSearchRequest",defaultMessage:"Copied search request"},copiedSearchResponse:{id:"miniSearch.debugButtons.copiedSearchResponse",defaultMessage:"Copied search response"}});function Ee(e){const{query:t,filters:i,searchSessionId:a,searchSessionFlowNumber:l,queryTextValueWithoutSearchFilters:c,isResultsLoading:d,onDismiss:u,results:m,currentView:p,buildMenuListItem:f,source:y,debugConfig:S}=e,x=(0,s().v3)(),b=(0,v().tz)(),I=(0,o().K8)((()=>P().A.state.debug.enabled),[]),A=(0,o().K8)((()=>{if(0===t.length)return[];return(0,r(606331).wn)({query:t,environment:x,searchMode:"nav-local-only"})??[]}),[x,t],{debugName:"MiniSearch.matchingActions"}),k=(0,o().K8)((()=>P().A.state.isNewElectronTab),[],{debugName:"MiniSearch.isNewElectronTab"}),j=(0,o().K8)((()=>(0,w().iu)(N().A.state.tabs,N().A.state.currentTab.id)),[],{debugName:"MiniSearch.electronTabs"}),C=(0,n.useMemo)((()=>(0,h().mk)({searchSessionId:a,searchSessionFlowNumber:l})),[a,l]),E=(0,n.useCallback)((e=>(0,r(896278).g)({environment:x,result:e,searchSessionId:a,source:y,action:()=>u({shouldResetQuery:!1,shouldResetMetricsState:!1}),queryId:C,isMiniSearch:!0,desktopProps:{electronTabs:j,isNewElectronTabSearch:Boolean(k)},buttonStyles:{paddingInlineStart:4}})),[j,x,k,u,C,y,a]),R=(0,n.useMemo)((()=>{const e=[];return A.forEach((t=>{const{eventName:r}=t;"full_search"!==r&&"full_search_deep_dive"!==r&&"deep_dive"!==r&&e.push(E(t))})),e}),[E,A]),K=(0,o().K8)((()=>m.map((e=>f(e)))),[f,m],{debugName:"MiniSearch.resultItems"}),z=(0,r(385979).h)({resultsCount:m.length,shouldShow:"results"===p&&d,hideBorders:!0}),B=(0,o().K8)((()=>r(321843).R.isUnifiedFindDown()),[]),D=(0,O().r)(),_=(0,r(329304)._X)({name:"ai_usage",amount:1,spaceId:D,userId:x.currentUser.id}),F=(0,o().K8)((()=>(0,r(985529).e2)(_)),[_]),{actionForFeatureAvailability:L}=(0,r(949305).x)({featureAvailability:_,upgradeRequestAnalyticsEntrypoint:"search_modal",upgradeRequestEntrypoint:"search_modal",upsellFrom:"ai_unified_find_search_modal"}),V=(0,n.useCallback)((e=>{var t;if(!F&&L)return void L();const n=(0,ge().V)(null===(t=e.menuListItemAction)||void 0===t?void 0:t.event);u({shouldResetQuery:!1,shouldResetMetricsState:!1}),(0,r(36951).Iu)({environment:x,query:c,clientStore:r(166442).defaultClientAIChatStore,config:{type:"search",searchSessionId:a,scopeForNextSearch:{type:"everything"},filtersForNextSearch:{ancestorsFilter:null==i?void 0:i.ancestors,createdByFilter:null==i?void 0:i.createdBy,teamspacesFilter:(0,g().fg)(null==i?void 0:i.inTeams),titleOnlyFilter:null==i?void 0:i.navigableBlockContentOnly}},openInNewTab:"tab"===n||k,surface:"search_modal"})}),[F,L,u,x,c,a,null==i?void 0:i.ancestors,null==i?void 0:i.createdBy,null==i?void 0:i.inTeams,null==i?void 0:i.navigableBlockContentOnly,k]),q=(0,o().K8)((()=>function(e){const{onClick:t,intl:r,query:n}=e;return{action:t,key:"deep-find-entry-point",render:e=>(0,me.jsx)(Re,{menuListProps:e,title:r.formatMessage(Oe.deepFindTitle),query:n})}}({onClick:e=>V({menuListItemAction:e}),intl:b,query:t})),[V,b,t]),{variant:U}=(0,r(921738).O)({query:t,searchSessionId:a}),H=(0,n.useRef)(null),$=(0,o().K8)((()=>({key:"auto-streaming-search",action:e=>{if(B||!H.current)return;if(!F&&L)return void L();const t=(0,ge().V)(null==e?void 0:e.event);void 0===t&&u({shouldResetQuery:!1,shouldResetMetricsState:!0});const r=Boolean("tab"===t||k);H.current.navigateToThread({openInNewTab:r})},render:e=>(0,me.jsx)(r(86771).bF,{query:t,searchFilters:i,searchResultsStore:void 0,searchSessionId:a,menuListItemProps:e,ref:H})})),[B,F,L,u,t,a,i,k]),G=function(e){const[t,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)(e.experimentOverrides??{}),a=(0,o().K8)((()=>P().A.state.debug.enabled),[]);(0,n.useEffect)((()=>{a?s(e.experimentOverrides??{}):(s({}),r(!1))}),[a,e.experimentOverrides]);const l=(0,o().K8)((()=>a?(0,T().WP)(Se().hH).map((([e,t])=>{const r=[...t];return{experimentId:e,experimentVersion:1,group:M().default.getEligibleGroup({experimentId:e,defaultGroup:"control"}),groups:r.includes("control")?r:["control",...r]}})):[]),[a]),c=(0,n.useCallback)((()=>r(!0)),[]),d=(0,n.useCallback)((n=>a?(0,me.jsx)(Me,{...n,allPossibleExperiments:l,pendingOverrides:i,onExperimentChange:s,isPopupOpen:t,onClosePopup:()=>r(!1),onCommitOverrides:e.onCommitOverrides,debugInfo:e.debugInfo}):null),[a,l,i,t,e.onCommitOverrides,e.debugInfo]);return(0,n.useMemo)((()=>({key:"experiment-selector",action:()=>{c()},render:d})),[c,d])}({experimentOverrides:null==S?void 0:S.experimentOverrides,debugInfo:null==S?void 0:S.debugInfo,onCommitOverrides:e=>{var t;null==S||null===(t=S.onExperimentOverridesChange)||void 0===t||t.call(S,e)}}),Y=(0,o().O$)(W().e),Q=(0,o().K8)((()=>{const e=[];if(!B&&Y)return I?{items:[G],key:"search",render:e=>(0,me.jsx)(de().A,{...e})}:("auto_streaming"===U?e.push($):e.push(q),{items:e,key:"search",render:e=>(0,me.jsx)(de().A,{...e})})}),[B,Y,I,U,G,$,q]),Z=(0,n.useMemo)((()=>{const e=[...R,...K,...z??[]];if(0!==e.length)return{items:e,key:"results",render:e=>(0,me.jsx)(de().A,{...e,title:b.formatMessage(Oe.quickMatchesSectionTitle)})}}),[b,R,K,z]);return{entrypointsSection:Q,queryBasedResultsSection:Z}}function Re(e){const{menuListProps:t,title:r,query:i}=e,{focused:s}=t,o=(0,a().IS)((e=>({container:{borderRadius:6,paddingInline:0},titleContainer:{display:"flex",alignItems:"center",gap:4,color:e.text.primary,fontWeight:y().Wy.medium,fontSize:14,...y().RC},queryText:{display:"inline",alignItems:"baseline",...y().RC}})),[]),c=(0,n.useMemo)((()=>{if(s)return(0,me.jsx)(l().I,{icon:m().arrowTurnDownLeftSmallIcon,size:"xs",colorVariant:"secondary"})}),[s]);return(0,me.jsx)(B().A,{...t,title:(0,me.jsxs)("div",{style:o.titleContainer,children:[r,(0,me.jsx)(ve().O,{}),(0,me.jsx)(d().D,{styleKey:"Caption/Regular",colorVariant:"tertiary",style:o.queryText,children:` — "${i}"`})]}),icon:(0,me.jsx)(l().I,{icon:fe().J}),style:o.container,right:c,buttonStyle:De})}const Oe=(0,v().YK)({deepFindTitle:{id:"miniSearch.deepFind.title",defaultMessage:"Search all sources with AI"},quickMatchesSectionTitle:{id:"miniSearch.quickMatches.sectionTitle",defaultMessage:"Best matches"}});var Ke=()=>r(305872),Ne=()=>r(793765);function Pe(e){const{data:t}=e,r=(0,o().K8)((()=>Ne().Ay.state.autoExpandDebugInfo),[]),n=(0,a().IS)((e=>({debugPanel:{padding:5,border:`1px solid ${e.border.secondary}`,marginTop:8,borderRadius:4}})),[]);return(0,me.jsx)("div",{style:n.debugPanel,onMouseDown:e=>{e.stopPropagation()},role:"presentation",children:(0,me.jsx)(Ke().H,{data:t,defaultCollapsed:!r,showCopyButton:"small",showModalButton:!1})})}function ze(e){const{result:t,debugHits:r}=e,i=(0,n.useMemo)((()=>{var e;return(null===(e=t.sources)||void 0===e?void 0:e.includes(g().Ni.Local))??!1}),[t.sources]),s=(0,n.useMemo)((()=>{const e={};r&&r.length>0&&(e.debugHits=r);t.rankingSignals&&Object.keys(t.rankingSignals).length>0&&(e.rankingSignals=t.rankingSignals),i&&(e.debugLocal={id:t.id,localSource:t.localSource,score:t.score,localRelevancies:t.localRelevancies,frecencyScore:t.frecencyScore,personalizationBoost:t.personalizationBoost,terms:t.terms});return Array.isArray(t.featureGroups)&&t.featureGroups.length>0&&(e.featureGroups=t.featureGroups),Object.keys(e).length>0?e:null}),[t,r,i]);return s?(0,me.jsx)(Pe,{data:s}):null}const Be=n.forwardRef((function(e,t){const{onDismiss:l,currentView:c,isResultsLoading:d,query:m,searchSessionId:p,searchSessionFlowNumber:g,results:f,filters:v,setCurrentView:y,debugConfig:S}=e,[b,M]=(0,n.useState)(z().ZK),[A,T]=(0,n.useState)(!1),[k,j]=(0,n.useState)(!1),C=(0,s().v3)(),E=(0,O().r)(),R=m.trim().length>0||void 0!==v,K=(0,o().K8)((()=>P().A.state.isNewElectronTab),[],{debugName:"MiniSearch.isNewElectronTab"}),B=(0,o().K8)((()=>(0,w().iu)(N().A.state.tabs,N().A.state.currentTab.id)),[],{debugName:"MiniSearch.electronTabs"}),_=C.device.isElectron,F=(0,o().K8)((()=>(0,I().q)(C)&&_),[C,_]),L=(0,n.useCallback)((e=>{l(e),j(!1),T(!1),M(z().ZK)}),[l]),q=(0,h().mk)({searchSessionId:p,searchSessionFlowNumber:g}),U=(0,n.useCallback)((({result:t,event:r})=>{const n="results"===c?"query_results":"recent_pages";x().Bz({event:r,result:t,context:n,queryId:q,trackSelectSearchItem:e.searchAnalytics.trackSelectSearchItem,closeSearch:L,isCommandSearch:F,environment:C,electronTabs:B,isNewElectronTab:K,source:u().y8.MiniQuickFind})}),[e.searchAnalytics.trackSelectSearchItem,L,c,B,C,F,K,q]),W=(0,n.useCallback)((t=>{const n=null!=S&&S.debugInfo?S.debugInfo.response.resultsDebugMap[t.id]:void 0;return{action:({event:e})=>U({result:t,event:e}),key:(0,r(873049).a)(t),render:r=>(0,me.jsx)(_e,{...r,currentView:c,result:t,queryId:q,endTimeToRenderServerResultsTiming:e.searchAnalytics.endTimeToRenderServerResultsTiming,debugHits:n})}}),[U,c,q,e.searchAnalytics,S]),H=pe({numberOfRecentPagesToShow:b,buildMenuListItem:W,trackSelectSearchItem:e.searchAnalytics.trackSelectSearchItem,closeSearch:L,queryId:q}),{entrypointsSection:$,queryBasedResultsSection:G}=Ee({query:m,filters:v,searchSessionId:p,searchSessionFlowNumber:g,queryTextValueWithoutSearchFilters:e.queryTextValueWithoutSearchFilters,isResultsLoading:d,onDismiss:l,results:f,currentView:c,buildMenuListItem:W,source:"mini_quick_find",debugConfig:S}),Y=(0,n.useMemo)((()=>{const e=[];return $&&e.push($),G&&e.push(G),e}),[$,G]),Q=(0,n.useCallback)((t=>{var r;"results"===c&&!d&&t<200?null===(r=e.fetchAdditionalServerResultsOnChange)||void 0===r||r.call(e,z().ZK):"recents"===c&&E&&(0,V().fQ)({environment:C,offsetFromBottom:t,spaceId:E,setIsLoadingRecents:T,setEndOfRecentsReached:j,numRecents:b,setNumRecents:M,endOfRecentsReached:k,isLoadingRecents:A,incrementBy:z().ZK})}),[e,c,k,C,A,d,b,E]),Z=(0,n.useMemo)((()=>new(r(970585).A)),[]),X=(0,n.useCallback)((()=>{Z.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[Z]),J=(null==$?void 0:$.items.length)??0,ee=(0,n.useCallback)((()=>{const e=0===J?0:1,t=J;Z.setState({focus:{section:e,indexGlobal:t,indexLocal:0,footerFocused:!1}})}),[J,Z]),te=(0,o().K8)((()=>{const e=Z.state.focus;return R&&((null==e?void 0:e.indexGlobal)??0)>J+((null==G?void 0:G.items.length)??0)}),[Z,R,J,null==G?void 0:G.items.length]),re=R&&0===(null==G?void 0:G.items.length)&&"results"===c&&!d,{isNaturalLanguageQueryWithCredits:ne}=(0,r(957046).T)({query:m,searchSessionId:p}),ie=(0,n.useMemo)((()=>{const e=0===(null==G?void 0:G.items.length);return"recents"===c||e?0:J>0?ne?0:J:0}),[null==G?void 0:G.items.length,c,J,ne]);(0,n.useEffect)((()=>{R||"results"!==c?R&&"recents"===c&&(y("results"),ee()):(y("recents"),X()),te?ee():re&&X()}),[X,ee,re,te,c,R,y]);const se=i().A.isMobile,oe=(0,a().IS)((e=>({scroller:{width:"100%",position:"relative",display:"flex",flexDirection:"column"},menuList:{display:"flex",flexDirection:"column",gap:se?10:void 0,paddingInline:4}})),[se]);return(0,me.jsxs)(r(2143).H,{ref:t,type:r(611648).A.Y,style:oe.scroller,children:[(0,me.jsx)(D().Ay,{comboboxProps:e.menuListComboboxProps,type:D().Oh.Vertical,initialFocus:ie,sections:"recents"===c?H:Y,disableKeyboardArrowWrap:!0,store:Z,style:oe.menuList}),re?(0,me.jsx)(We,{}):null,(0,me.jsx)(r(228927).A,{onChange:Q})]})})),De={padding:"4px 8px"},_e=n.memo(n.forwardRef((function(e,t){const{focused:u,currentView:h,result:g,queryId:x,endTimeToRenderServerResultsTiming:b,debugHits:I}=e,{highlight:w,store:M}=g,A=(0,v().tz)(),T=(0,s().v3)();(0,r(852507).w)((()=>{"results"===h&&(0,q().Rp)(g)&&(null==b||b()),M.load(),r(106628).T.customAgentSearchService.load().then((({initializeWorkflowDataCache:e})=>e(T)))}));const k=(0,o().K8)((()=>(0,r(968913).Wi)(T,M.id)),[T,M]),C=(0,a().IS)((e=>({enterIcon:{width:12,height:12,color:e.text.secondary,visibility:u?"visible":"hidden"},divider:{color:e.text.tertiary},pathHighlight:{color:e.text.primary,fontWeight:y().Wy.medium},pathText:{color:e.text.tertiary}})),[u]),E=(0,o().K8)((()=>M.isReady()),[M]),O=(0,o().K8)((()=>!!E&&M.isEmptyPage()),[M,E]),N=(0,o().K8)((()=>void 0!==g.workflowData),[g]),z=(0,o().K8)((()=>g.workflowData),[g]),D=(0,o().K8)((()=>E?(0,_().Te)(M):void 0),[M,E]),L=(0,o().K8)((()=>M.getIcon()),[M]),V=(0,o().K8)((()=>{if(null!=z&&z.icon)return z.icon;const e=(0,f().Oy)({baseUrl:i().A.domainBaseUrl||"",shape:f().WJ,color:f().i});return(0,f().Hy)(e)}),[z]),U=(0,n.useMemo)((()=>N?(0,me.jsx)(_().B6,{disabled:!0,icon:{pointer:M.pointer,icon:V},iconRecordCategory:"workflow",isEmptyPage:!0,size:20}):(0,me.jsx)(_().B6,{disabled:!0,icon:L,iconRecordCategory:D??"pageBlock",isEmptyPage:O,size:20})),[N,M.pointer,V,L,D,O]),W=(0,o().K8)((()=>{if(void 0!==e.captionOverride)return(0,me.jsx)(d().D,{colorPalette:"gray",colorVariant:"secondary",styleKey:"Caption/Regular",children:e.captionOverride});if(N)return(0,me.jsx)(d().D,{colorPalette:"gray",colorVariant:"secondary",styleKey:"Caption/Regular",children:null==w?void 0:w.pathText});return(0,F().a6)(M)?(0,me.jsx)(Ve,{store:M,pathHighlight:null==w?void 0:w.pathText,styles:C}):void 0}),[e.captionOverride,M,null==w?void 0:w.pathText,C,N]),H=(0,o().K8)((()=>M.id),[M]),$=(0,o().O$)(K().AppStoreSidebarSpaceStore),G=(0,o().K8)((()=>j.state.similarUserIdToLastVisitedPageId),[]),Y=(0,n.useCallback)((e=>function(e){return!R({timestamp:e.timestamp,numberOfMinutes:2})}({timestamp:e.visitedAt})&&G[e.userId]===H),[G,H]),Q=(0,o().K8)((()=>j.state.pageIdToUsers[H]??[]),[H]),Z=(0,o().K8)((()=>function(e){const{spaceStore:t,similarUsers:n,isUserPresentOnPage:i}=e,s=4;if(!t)return[];const o=[...n].sort(((e,t)=>{const r=i({userId:e.userId,visitedAt:e.visitedAt});return r!==i({userId:t.userId,visitedAt:t.visitedAt})?r?-1:1:t.visitedAt-e.visitedAt})).slice(0,s);return o.map((e=>{const n=r(870092).L.createChildStore(t,{table:p().oo,id:e.userId});return n.load(),{store:n,visitedAt:e.visitedAt,isPresent:i({userId:e.userId,visitedAt:e.visitedAt})}}))}({spaceStore:$,similarUsers:Q,isUserPresentOnPage:Y})),[Y,Q,$]),X=(0,o().K8)((()=>Z.every((e=>e.store.isReady()))),[Z]),J=(0,n.useMemo)((()=>{if(!X)return null;const e=Z.length;return(0,me.jsx)("div",{style:{display:"flex"},children:Z.map((({store:t,visitedAt:r,isPresent:n},i)=>(0,me.jsx)("span",{style:{zIndex:e-i},children:(0,me.jsx)(Ue,{userStore:t,isPresent:n})},`search-user-presence-${t.id}-${H}-${r}`)))})}),[X,H,Z]),ee=(0,o().K8)((()=>P().A.state.debug.enabled),[]),te=ee&&"results"===h,re=(0,n.useMemo)((()=>void 0!==e.rightOverride?e.rightOverride:(0,me.jsxs)(c().fI,{gap:12,alignItems:"center",children:[J,(0,me.jsx)("div",{"data-search-icon-target":"true",children:te?(0,me.jsx)(q().wS,{result:g}):(0,me.jsx)("span",{style:C.enterIcon,children:(0,me.jsx)(l().I,{icon:m().arrowTurnDownLeftSmallIcon,size:"xs",colorVariant:"secondary"})})})]})),[e.rightOverride,J,te,g,C.enterIcon]),ne="recents"===h,ie=(0,o().K8)((()=>!ne&&(M.isType("link_to_collection")||M.isType("collection_view_page")||M.isType("collection_view"))),[ne,M]),se=(0,o().K8)((()=>{const{isSurrogateCollection:e,collectionId:t}=g??{};return e&&t?r(543665).m.createChildStore(M,{table:r(519831).Vl,id:t}):void 0}),[g,M]),oe=(0,n.useMemo)((()=>{var e;const t=g.badges??[];Boolean(null===(e=g.localSource)||void 0===e?void 0:e.has("topPages7dPageView"))&&t.push({type:"popular_this_week",properties:{},label:"Popular this week"}),ie&&t.push({type:"is_collection",properties:{},label:"Collection"});return g.workflowData&&t.push({type:"agent",properties:{},label:"Agent"}),t}),[ie,g.badges,g.localSource,g.workflowData]),ae=(0,o().K8)((()=>(0,q().yD)({result:g,queryId:x})),[g,x]),le=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),ce=i().A.isMobile,de=ne||!g.highlight,ue=(0,n.useMemo)((()=>(0,me.jsx)(B().A,{disabled:k,disabledFeedback:k,style:{paddingInlineStart:4,paddingBottom:ce?10:void 0,paddingTop:ce?10:void 0,alignItems:ne?"center":void 0},...e,onMouseDown:e.preventClickDefault?e=>e.preventDefault():void 0,ref:t,buttonStyle:"recents"===h?De:{padding:8},title:se?(0,me.jsx)(r(649320).G,{collectionStore:se,hideCollectionViewBlockIcon:!0}):(0,me.jsx)(Fe,{badges:oe,store:M,highlight:w,recordPathCaption:ne&&W?W:void 0,isRecentsView:ne,isAgentResult:N}),caption:ne?void 0:(0,me.jsx)(qe,{store:M,intl:A,pathDisplay:W,styles:C}),body:de?void 0:z?z.description:(0,me.jsxs)(me.Fragment,{children:[ee?(0,me.jsx)(ze,{result:g,debugHits:I}):null,(0,me.jsx)(q().Sh,{result:g})]}),icon:U,right:re,className:"notranslate"})),[k,ce,e,t,h,se,oe,M,w,ne,W,N,A,C,de,z,ee,g,I,U,re]),pe=T.device.isElectron,he=(0,n.useCallback)((async()=>{if(!pe||!ae)return;(await S().R.clipboardActions.load()).copyString({environment:T,stringValue:ae,copiedMessage:He.copiedLinkToClipboard})}),[T,ae,pe]);return ae?(0,me.jsx)(r(998531).N,{capture:e.focused,debugName:"MiniSearchSearchResults",onCopyLinkToCurrentPage:e=>{he()},onCopyLinkToPageInCommandSearch:e=>{he()},children:(0,me.jsx)(r(620896).A,{href:ae,onClick:le,children:ue},ae)}):ue})));function Fe(e){const{badges:t,store:i,highlight:s,recordPathCaption:d,isRecentsView:u,isAgentResult:m}=e,p=(0,v().tz)(),h=(0,a().IS)((e=>({divider:{color:e.text.secondary,fontSize:12},title:{fontWeight:y().Wy.medium,color:u?e.text.primary:e.text.secondary},titleHighlight:{color:e.text.primary}})),[u]);let f=null==s?void 0:s.title;!m&&null!=s&&s.title||(f=null==s?void 0:s.text);const S=(0,b().PO)({words:(0,b().oQ)(f),highlightText:(null==s?void 0:s.title)??(null==s?void 0:s.text),styleOverride:h.titleHighlight}),x=(0,o().K8)((()=>i.isReady()),[i]),I=(0,o().K8)((()=>{if(x)return m?(0,me.jsx)("span",{style:null==S?void 0:S.style,children:null==s?void 0:s.title}):(0,me.jsx)(r(16006).A,{store:i,style:h.title,highlighter:S})}),[i,S,h.title,x,s,m]),w=(0,n.useMemo)((()=>new Set(t.map((e=>e.type)))),[t]);return(0,me.jsxs)(c().fI,{gap:4,alignItems:"center",children:[I,w.has("is_collection")?(0,me.jsx)(q().se,{}):void 0,w.has("verified")?(0,me.jsx)(l().I,{icon:r(417104).badgeCheckFillSmallIcon,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"}):void 0,w.has("is_template")?(0,me.jsx)(q().rx,{label:p.formatMessage(g().Nz.template)}):void 0,w.has("popular_this_week")?(0,me.jsx)(q().oj,{label:p.formatMessage(g().Nz.popularThisWeek)}):void 0,w.has("most_viewed")?(0,me.jsx)(q().iY,{label:p.formatMessage(g().Nz.mostViewed)}):void 0,w.has("agent")?(0,me.jsx)(q().Kg,{label:p.formatMessage(g().Nz.agent)}):void 0,d?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("span",{style:h.divider,children:"—"}),d]}):void 0]})}function Le(e){const{blockStore:t,idx:r,resultFeatureNames:n}=e;return{id:t.id,score:0,spaceId:t.getSpaceId(),sources:[g().Ni.Local],featureGroups:n?[{groupName:"custom",features:n.map((e=>({name:e,value:1})))}]:[],store:t,originalPosition:r,localSource:new Set,serverEventProperties:void 0}}function Ve(e){const{store:t,pathHighlight:r,styles:n}=e,i=(0,b().PO)({words:(0,b().oQ)(r),highlightText:r,styleOverride:n.pathHighlight});return(0,me.jsx)(F().Ay,{store:t,showFullPathInTooltip:!0,highlighter:i})}function qe(e){const{store:t,intl:i,pathDisplay:s,styles:a}=e,l=(0,o().K8)((()=>(0,r(819493).b)(t)),[t]),d=[s,(0,o().K8)((()=>{if(null==l||!l.canAccess)return;const e=(0,r(764880).lR)(i,l.createdBy);return(0,me.jsx)("span",{style:a.pathText,children:e})}),[l,a.pathText,i]),(0,o().K8)((()=>{const e=t.getLastEditedTime();if(e)return(0,me.jsx)("span",{style:a.pathText,children:i.formatMessage(He.lastEdited,{time:(0,r(907514).nl)(e,{useCompactFormat:!0})})})}),[i,t,a.pathText])].filter(Boolean);return(0,me.jsx)(c().fI,{gap:4,children:d.map(((e,t)=>(0,me.jsxs)(n.Fragment,{children:[t>0?(0,me.jsx)("span",{style:a.pathText,children:"•"}):void 0,e]},t)))})}function Ue(e){const{userStore:t,isPresent:n}=e,i=(0,v().tz)(),s=(0,L().XE)((e=>(0,r(100622).Nq)(t.id,e)),n),{name:l,email:c}=(0,o().K8)((()=>({name:(0,r(695608).c6)(i,t.getModel()),email:t.getEmail()})),[i,t]),d=(0,a().IS)((e=>({avatarOuterOutline:{...s.avatarOuterOutline,outlineColor:n?s.avatarOuterOutline.outlineColor:e.palette.gray[100]}})),[n,s.avatarOuterOutline]);return(0,me.jsx)(r(859428).A,{textWrap:!0,renderTooltip:()=>(0,me.jsxs)("div",{children:[(0,me.jsx)("div",{children:l}),(0,me.jsx)("div",{children:c})]}),render:e=>(0,me.jsx)("div",{style:d.avatarOuterOutline,...e,children:(0,me.jsx)("div",{style:s.avatarBorder,children:(0,me.jsx)(r(453697).A,{iconStyle:s.avatarInnerOutline,style:s.uiUserAvatarStyles,size:L().eQ,isOffline:!n,userStore:t,avatarShouldShowShadow:!0,initialOverrideStyle:s.initialColor})})})})}function We(){const e=(0,v().tz)(),t=(0,a().IS)((e=>({wrapper:{display:"grid",alignItems:"center",height:"100%",width:"100%",userSelect:"none",flex:1},container:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:4},heading:{fontSize:14,fontWeight:500,color:e.text.secondary,display:"flex",alignItems:"center",gap:8},returnText:{display:"flex",alignItems:"center",gap:6,fontSize:12,border:`1px solid ${e.border.secondary}`,padding:"2px 4px",borderRadius:4,color:e.text.secondary,fontFamily:"monospace",fontWeight:400}})),[]),r=(0,me.jsxs)("span",{style:t.returnText,children:[(0,me.jsx)(l().I,{icon:m().arrowTurnDownLeftSmallIcon,size:"xs"}),e.formatMessage(He.returnKey)]});return(0,me.jsx)("div",{style:t.wrapper,children:(0,me.jsx)("div",{style:t.container,children:(0,me.jsx)("div",{style:t.heading,children:e.formatMessage(He.searchMoreSources,{returnButton:r})})})})}const He=(0,v().YK)({returnKey:{id:"miniSearch.returnKey",defaultMessage:"Return"},searchMoreSources:{id:"miniSearch.searchMoreSources",defaultMessage:"Press {returnButton} to expand your search"},lastEdited:{id:"miniSearch.lastEdited",defaultMessage:"Edited {time}"},copiedLinkToClipboard:{id:"miniSearch.copiedLinkToClipboard",defaultMessage:"Copied result link to clipboard"}})},627503:(e,t,r)=>{r.d(t,{a:()=>i});r(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,r(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},i=(0,r(340498).wt)("duplicateSmall",n)},677169:(e,t,r)=>{r.d(t,{f:()=>d,m:()=>c});r(898992),r(354520),r(672577),r(737550);var n=r(296540),i=()=>r(242422),s=()=>r(56366),o=()=>r(617871),a=()=>r(765957),l=()=>r(53137);function c(){const e=(0,n.useRef)(void 0);return(0,s().K8)((()=>{if(void 0===e.current){if(!i().default.isStatsigReady())return{loading:!0,botId:void 0,botSpaceId:void 0,botUserId:void 0};e.current=i().default.checkGate({gateName:"calendar_home_tile_caching"})}return e.current?d():function(){var e,t,r;const n=l().A.bots.state.filter((e=>e.integration_id===o().io)),i=null===(e=a().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getSelectedCalendarBotId(),s=!l().A.state.loaded||!(null!==(t=a().default.state.sidebarSpaceViewStore)&&void 0!==t&&t.isReady()),{spaceId:c,userId:d}=l().A.state.loaded?l().A.state:{spaceId:void 0,userId:void 0},u=null===(r=n[0])||void 0===r?void 0:r.id;if(!i)return{loading:s,botId:u,botSpaceId:c,botUserId:d};const m=n.find((e=>e.id===i));return{loading:s,botId:(null==m?void 0:m.id)??u,botSpaceId:c,botUserId:d}}()}),[])}function d(){var e;const{sidebarSpaceViewStore:t}=a().default.state;if(!t||!t.isReady())return{loading:!0,botId:void 0,botSpaceId:void 0,botUserId:void 0};const r=t.getSelectedCalendarBotId();if(r&&!l().A.state.loaded)return{loading:!1,botId:r,botSpaceId:t.getSpaceId(),botUserId:t.getUserId()};const{spaceId:n,userId:i}=l().A.state.loaded?l().A.state:{spaceId:void 0,userId:void 0},s=l().A.bots.state.filter((e=>e.integration_id===o().io)),c=null===(e=s[0])||void 0===e?void 0:e.id,d=r&&s.some((e=>e.id===r))?r:c;return{loading:!l().A.state.loaded||l().A.state.loading,botId:d,botSpaceId:n,botUserId:i}}},706965:(e,t,r)=>{r.d(t,{A:()=>v});r(296540);var n=()=>r(56366),i=()=>r(401497),s=()=>r(764880),o=()=>r(310442),a=()=>r(824862),l=()=>r(798880),c=()=>r(69708),d=()=>r(534177),u=()=>r(284371),m=()=>r(43972),p=()=>r(972435),h=()=>r(907514),g=()=>r(646736),f=r(474848);function v(e){const{store:t}=e,r=(0,i().DP)(),v=(0,n().K8)((()=>t.getCreatedTime()),[t]),y=(0,n().K8)((()=>t.getLastEditedTime()),[t]),S=(0,n().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,s().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),x=(0,n().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,s().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),b=(0,n().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const r=null==S?void 0:S.asActor;if(!r)return!1;const n=r.table;switch(n){case l().oo:return(0,g().dp)(e,r.id).isMember();case a().GP:return(0,g().Ts)(e,r.id).isMember();case o().yj:return!1;default:(0,d().HB)(n)}}),[t,S]),I=v?(0,h().nl)(v,{useCompactFormat:!0,useLowercase:!0}):"",w=y?(0,h().nl)(y,{useLowercase:!0,useCompactFormat:!0}):"";if(!(y?(0,h().nl)(y,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const M={display:"flex",gap:4,color:r.text.inverseSecondary,height:16,fontSize:12},A={size:14,style:{marginInlineEnd:2}},T=p().A.getIntl();return(0,f.jsxs)(f.Fragment,{children:[(e=>{let t;if(null!=x&&x.asActor)t=(0,f.jsx)(c().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,f.jsx)("span",{style:{fontWeight:u().Wy.medium,color:r.text.inversePrimary},children:(0,f.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,m().w)({actor:x,...A}),(0,s().lR)(T,x)]})}),timestamp:w}});else{if(!w)return;n=w,t=(0,f.jsx)(c().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:n}})}var n;return(0,f.jsx)("div",{style:{...M,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=S&&S.asActor&&b)t=(0,f.jsx)(c().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,f.jsx)("span",{style:{fontWeight:u().Wy.medium,color:r.text.inversePrimary},children:(0,f.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,m().w)({actor:S,...A}),(0,s().lR)(T,S)]})}),timestamp:I}});else{if(!I)return;t=(0,f.jsx)(c().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:I}})}return(0,f.jsx)("div",{style:{...M,marginBottom:4},children:t})})(e.compactFormat)]})}},715011:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(296540),i=()=>r(69708),s=()=>r(409268),o=r(474848);function a(e){const t=(0,n.useMemo)((()=>(0,s().s)(e.store)),[e.store]);return(0,o.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},741198:(e,t,r)=>{r.d(t,{Jc:()=>g,Q7:()=>h});var n=r(296540),i=()=>r(908006),s=()=>r(484714),o=()=>r(852507),a=()=>r(56366),l=()=>r(913747),c=()=>r(749804),d=()=>r(190033),u=()=>r(301421),m=()=>r(732770),p=()=>r(693202);function h(e){const{textStore:t,initialFocus:r}=e,i=(0,s().v3)(),l=(0,a().K8)((()=>f(t)),[t]),d=(0,n.useCallback)((()=>{g(t)}),[t]),p=(0,n.useCallback)((()=>{!function(e){const{environment:t,textStore:r}=e;if(!f(r))return;const n=u().n.findNodeFromStore(r);null==n||n.blur(),(0,c().I)({environment:t}),m().A.setKeyboardMode(!1)}({environment:i,textStore:t})}),[i,t]);return(0,o().w)((()=>{r&&d()})),(0,n.useMemo)((()=>({isFocused:l,focus:d,blur:p})),[l,d,p])}function g(e){i().default.afterNextFlush((()=>{(0,l().w)();const t=u().n.findNodeFromStore(e);null==t||t.focus(),(0,d().z)({store:e})}))}function f(e){return"empty"!==p().default.state.mode&&p().default.state.multiSelection.start.store.id===e.id}},819493:(e,t,r)=>{r.d(t,{$:()=>I,b:()=>w});r(898992),r(908872),r(296540);var n=()=>r(59226),i=()=>r(662303),s=()=>r(484714),o=()=>r(56366),a=()=>r(401497),l=()=>r(764880),c=()=>r(869190),d=()=>r(69708),u=()=>r(921855),m=()=>r(972435),p=()=>r(311337),h=()=>r(448291),g=()=>r(706965),f=()=>r(678553),v=()=>r(89924),y=()=>r(859428),S=()=>r(125565),x=()=>r(715011),b=r(474848);function I({isPageMoreButton:e,hideTopBorder:t,store:r,wordCountStores:n,showWordCount:i}){const c=(0,o().K8)((()=>w(r)),[r]),{device:u}=(0,s().v3)(),h=(0,o().K8)((()=>u.isPhone),[u]),I=m().A.getIntl(),A=(0,s().v3)(),T=(0,a().IS)((()=>({menuItem:{paddingTop:h?8:t?0:6,paddingBottom:h?8:16}})),[t,h]);return(0,o().K8)((()=>(0,p().y)(A)),[A])||c&&!c.canAccess?null:(0,b.jsx)(v().A,{topBorder:!e&&!t,style:{paddingTop:e?0:8,paddingBottom:e?0:8},children:(0,b.jsx)(f().Ay,{style:c?void 0:T.menuItem,shouldWrapTitle:!0,title:c?(0,b.jsx)(y().A,{placement:"right",render:e=>(0,b.jsxs)("div",{...e,children:[i?(0,b.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,b.jsx)(d().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,b.jsx)(x().A,{store:r})}})}):void 0,n?(0,b.jsx)(M,{stores:n}):void 0,(0,b.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,b.jsx)(d().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:c.lastEditedBy.asActor?(0,l().lR)(I,c.lastEditedBy):void 0}})}),(0,b.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,style:{marginBottom:i?8:0},children:c.lastEditedTime})]}),renderTooltip:()=>(0,b.jsx)(g().A,{store:r,compactFormat:!0})}):void 0,loading:!c})})}function w(e){const t=e.getCreatedByPointer(),r=e.getCreatedTime(),n=e.getLastEditedByPointer(),s=e.getLastEditedTime(),o=m().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&r&&s&&n){const a=(0,h().vt)({parentStore:e,pointer:t}),l=(0,c().jE)(r,i().locale,o),d=(0,h().vt)({parentStore:e,pointer:n}),u=(0,c().jE)(s,i().locale,o);if(!d)return;return{canAccess:!0,createdBy:a,createdTime:l,lastEditedBy:d,lastEditedTime:u}}}function M(e){const{stores:t}=e,r=(0,n().X)("selectable_word_count"),i=(0,o().K8)((()=>r?A(t):0),[r,t]);return r?(0,b.jsx)(S().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,b.jsx)(d().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:i}})}):null}function A(e){return e.reduce(((e,t)=>{const r=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(r)+A(t.getContentStores())}),0)}},848401:(e,t,r)=>{r.d(t,{Ay:()=>p,mI:()=>u,vb:()=>m});r(296540);var n=()=>r(401497),i=()=>r(718827),s=()=>r(784892),o=()=>r(65767),a=()=>r(69708),l=()=>r(284371),c=r(474848);const d=(0,a().YK)({removeTokenLabel:{defaultMessage:"Remove {title}",id:"uiGenericToken.removeTokenLabel"},removeTokenLabelGeneric:{defaultMessage:"Remove Item",id:"uiGenericToken.removeTokenLabelGeneric"}}),u=s().NY,m={[s().NY.ExtremeSmall]:{height:12,fontSize:10,margin:"0 4px 0 0",marginEditState:"0 6px 0 0",closeIconSize:8,avatarSize:14},[s().NY.ExtraSmall]:{height:14,fontSize:12,margin:"0 6px 0 0",marginEditState:"0 6px 0 0",closeIconSize:8,avatarSize:14},[s().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:16},[s().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:20},[s().NY.Medium]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:8,avatarSize:20},[s().NY.Inline]:{height:20,fontSize:14,closeIconSize:8,avatarSize:20,margin:"0 -5px 0 0",marginEditState:"0 6px 0 0"},[s().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",marginEditState:"0 8px 8px 0",closeIconSize:10,avatarSize:24}};function p({avatarSize:e,format:t,isSingle:r,onClickRemove:s,renderAvatar:u,showRemoveButton:p,shouldShrink:h,style:g,title:f}){const v=(0,a().tz)(),{height:y,fontSize:S,margin:x,marginEditState:b,closeIconSize:I,avatarSize:w}=m[t],M=e??w,A=(0,n().IS)((()=>({root:{display:"flex",alignItems:"center",flexShrink:h?1:0,minWidth:0,height:y,borderRadius:6,fontSize:S,lineHeight:"120%",margin:r?0:p?b:x,...g}})),[S,y,r,x,b,h,p,g]);return(0,c.jsxs)("div",{style:A.root,children:[null==u?void 0:u(M),(0,c.jsx)("div",{className:"notranslate",style:{...l().RC},children:f}),p?(0,c.jsx)(i().Ay,{ariaLabel:void 0!==f?v.formatMessage(d.removeTokenLabel,{title:f}):v.formatMessage(d.removeTokenLabelGeneric),onClick:s,style:{display:"flex",alignItems:"center",justifyContent:"center",width:y,height:y,marginInlineStart:2,marginInlineEnd:2,flexGrow:0,flexShrink:0,borderRadius:6},children:(0,o().l)({width:I,height:I,opacity:.5})}):null]})}}}]);