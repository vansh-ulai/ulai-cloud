"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[31517,34208,96772],{22102:(e,t,o)=>{o.d(t,{k:()=>n});const n=new(o(645873).O2)("isTemplate",(async()=>await o.e(6993).then(o.bind(o,826880))))},29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},a=(0,o(340498).wt)("checkmark",n)},31902:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(69708),a=o(474848);const i=function({collectionViewName:e,collectionViewType:t}){return(0,o(59226).X)("allow_empty_view_name")&&""===e?null:e?(0,a.jsx)(o(288722).A,{children:e}):"page"===t?(0,a.jsx)(n().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,a.jsx)(n().sA,{...o(403905).X[t]})}},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),a=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),th:()=>o.e(17278).then(o.bind(o,796137)),id:()=>o.e(51872).then(o.bind(o,443716)),vi:()=>o.e(51872).then(o.bind(o,443716)),he:()=>o.e(51872).then(o.bind(o,443716)),ar:()=>o.e(51872).then(o.bind(o,443716))};let r=!1,s=!1;async function l(e){for(const[o,a]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...a,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await a().A.waitUntilLoaded(),a().A.update((({emojiByName:t,...o})=>({...o,emojiByName:{...t,...e.emojiByName}})))}async function c(){if(r)return;const[e]=o(662303).locale.split("-");e in i&&(await l(await i[e]()),r=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},75368:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}}const a=new n},83027:(e,t,o)=>{o.r(t),o.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});o(581454);var n=()=>o(242422),a=()=>o(255591),i=()=>o(797573),r=()=>o(577142),s=()=>o(972435),l=()=>o(951340),c=()=>o(174723),d=()=>o(87726);function p(e){const{persona:t,environment:o}=e,a=s().A.getIntl();return(0,l().DC)(n().default,t).map((e=>{const t=(0,i().B)(e,a);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,c().Up)({templateGalleryItem:e.rootId});(0,r().navigate)({environment:o,url:t})})(t)}}}))}function u(e){const t=(0,d().un)(e);return(0,d().Iw)(e).map((e=>{const o=t[e];return{category:e,sectionHeaderMessage:a().bJ[e],templates:o}}))}},87726:(e,t,o)=>{o.d(t,{Hk:()=>m,Iw:()=>f,kc:()=>y,un:()=>v});o(898992),o(354520),o(581454);var n=()=>o(242422),a=()=>o(726637),i=()=>o(979340),r=()=>o(255591),s=()=>o(228271),l=()=>o(797573),c=()=>o(534177),d=()=>o(47373),p=()=>o(972435),u=()=>o(951340);const m=(0,o(69708).YK)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}}),g=(0,c().uv)(r().PY);function f({userPersona:e,subscriptionTier:t}){return[...g].sort(((o,n)=>function(e,t,o,n){const a=(0,i().Pg)(n),r=(0,u().NI)({persona:o,defaultToLife:a});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(r===e||r===t)return r===e?-1:1;if(("life"===e||"life"===t)&&a)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function({persona:e,isPersonalishPlan:t}){const o=t?["other","unfilled","personal","undefined"]:["personal"];return o.includes(e??"undefined")}({persona:o,isPersonalishPlan:a}))return"student"===e?-1:1;return 0}(o,n,e,t)))}function v({subscriptionTier:e,environment:t}){const o=p().A.getIntl(),a=(0,d().WC)({environment:t}),u=a?function(e){return(0,i().Pg)(e)?r().sw:r().ht}(e):r().PY.suggested;return(0,c().s8)(r().PY,((e,t)=>"suggested"===t?u.map((e=>(0,l().B)(e,o))):e.filter((e=>(0,s().vc)(e,n().default))).map((e=>a?(0,s().G2)(e):e)).filter((e=>!u.includes(e))).map((e=>(0,l().B)(e,o)))))}function y(e){return`${a().A.domainBaseUrl}/@${e}`}},97789:(e,t,o)=>{o.d(t,{Dy:()=>s,a6:()=>n,dL:()=>r,w$:()=>i,xc:()=>a});const n="notion://projects_app",a="notion://wiki_app",i="notion://docs_app",r="notion://meetings_app",s=[n,a,i,r]},102586:(e,t,o)=>{o.d(t,{US:()=>l,Uj:()=>r});o(898992),o(354520);var n=()=>o(755199);function a(e,t){return e.prompt===t.prompt&&e.type===t.type}function i(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function r(e,t,o){const r=i(t),s=r.filter((t=>!a(t,e)));r.length!==s.length&&n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:s}})}const s={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function l(e){return s[e]}},147059:(e,t,o)=>{o.r(t),o.d(t,{AppInitializationOverlay:()=>V});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),a=()=>o(662303),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),l=()=>o(718827),c=()=>o(98126),d=()=>o(160432),p=()=>o(97789),u=()=>o(304740),m=()=>o(982615),g=()=>o(179034),f=()=>o(96689),v=()=>o(854150),y=()=>o(69708),h=()=>o(284371),S=()=>o(314529),k=()=>o(242422);var b=()=>o(413677),M=()=>o(231297),_=()=>o(845147),w=()=>o(471041),C=()=>o(413955),x=()=>o(422651);var A=()=>o(200562),I=()=>o(644914),P=()=>o(765957),T=()=>o(548821),H=()=>o(148832),B=()=>o(288722),D=()=>o(594607),E=()=>o(299772),R=o(474848);function V(e){var t;const{collectionViewBlockStore:o}=e,V=(0,i().v3)(),j=(0,i().Y0)(),{isMobile:N}=j,L=(0,r().K8)((()=>({top:V.WindowSizeStore.getSafePaddingTopPx(0),bottom:V.WindowSizeStore.getSafePaddingBottomPx(64)})),[V.WindowSizeStore]),U=(0,s().IS)((e=>({overlay:{position:"absolute",top:0,insetInlineStart:0,overflow:"visible",height:"100vh",width:"100%",zIndex:999,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.background.secondary,borderInlineStart:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginInlineStart:N?void 0:"10%",marginInlineEnd:N?void 0:"10%",padding:N?`${L.top}px 16px ${L.bottom}px 16px`:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.text.primary,fontFamily:h().xf({locale:a().locale}),fontWeight:h().Wy.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.text.secondary,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.background.elevated,boxShadow:e.buttonBlueFocusRing},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",paddingTop:16,paddingInlineEnd:14,paddingBottom:16,paddingInlineStart:16,background:"dark"===e.mode?e.palette.gray[200]:e.background.elevated,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.palette.gray[200]:e.palette.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginInlineEnd:12},presetTitle:{color:e.text.primary,fontWeight:h().Wy.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.text.secondary,fontWeight:h().Wy.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderStartStartRadius:8,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:8,border:e.lightDividerColor,boxShadow:e.shadowMD,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},hamburgerButton:{position:"absolute",zIndex:1e3,margin:5}})),[N,L]),[O,W]=n.useState(!1),F=(0,r().O$)(P().AppStoreSidebarSpaceViewStore),z=(0,r().K8)((()=>{const e=o.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;const t=function(e,t){return e.find((e=>e.uri===t))}((0,C().appConfigs)(),e);return t}),[o]),[K,G]=n.useState(void 0);n.useEffect((()=>{G(o.getFormatStore().getKeyStore("app_template_preset").getValue())}),[o,G]);const Y=(0,r().K8)((()=>{var e;return(null==z||null===(e=z.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==z?void 0:z.presets]),[q,$]=n.useState(K);n.useEffect((()=>{$(K)}),[K,$]),n.useEffect((()=>{z&&function(e,t){(0,S().DO_NOT_USE_trackLegacy)(e,"app_preset_selection_shown",t),k().default.logEvent("app_preset_selection_shown",t.app_uri,t)}(V,{app_uri:z.uri})}),[z,V]);const Z=n.useMemo((()=>null==z?void 0:z.presets.find((e=>e.uri===K))),[z,K]),J=n.useMemo((()=>{if(z&&Z&&z.uri===p().xc)return(0,x().xh)(Z)}),[z,Z]),Q=n.useMemo((()=>{if(!z)return;const t={};return z.presets.forEach((o=>{var n;const a=z.uri===p().xc?(0,x().xh)(o):null===(n=o.previews)||void 0===n?void 0:n.find((e=>"previewRootId"in e));a&&(t[o.uri]=H().B.createChildStore(e.collectionViewBlockStore,{id:a.previewRootId,table:g().ev,spaceId:a.spaceId}))})),t}),[z,e.collectionViewBlockStore]),X=(0,r().K8)((()=>(0,E().Wj)(j)),[j]),ee=(0,r().K8)((()=>{var e;const t=null==Z||null===(e=Z.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,u().L_)(e)));if(t&&"url"in t)return t.url}),[null==Z?void 0:Z.previews]),te=(0,i().WS)(),oe=(0,r().K8)((()=>!!V.device.isMobileBrowser||!V.device.isMobileNative&&!(0,I().KB)(V)),[V]);return n.useEffect((()=>{"rendered"!==P().default.state.renderPhase&&P().default.setPageRendered()}),[]),z?(0,R.jsxs)(D().U,{calloutId:"better_template_initialization",children:[oe?(0,R.jsx)("div",{style:U.hamburgerButton,children:(0,R.jsx)(A().z,{})}):void 0,(0,R.jsxs)("div",{style:U.overlay,children:[(0,R.jsxs)("div",{style:U.welcome,children:[(0,R.jsxs)("div",{style:U.scroller,children:[(0,R.jsx)("div",{style:U.welcomeLogo,children:(0,R.jsx)("img",{src:z.logo,style:{height:"100%",width:"100%"}})}),(0,R.jsx)("div",{style:U.welcomeTitle,children:z.welcomeTitle??(0,R.jsx)(y().sA,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:z.name}})}),(0,R.jsx)("div",{style:U.welcomeSubtitle,children:z.welcomeSubtitle??""}),(0,R.jsx)("div",{style:U.presets,children:Y.map(((e,t)=>{var o;const n=null!==(o=e.icon)&&void 0!==o&&o.startsWith("/")?(0,R.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,R.jsx)(B().A,{children:e.icon??""});return(0,R.jsxs)(l().Ay,{style:{height:"auto",...U.preset,...K===e.uri?U.presetSelected:{}},disabled:O,hoveredStyle:U.presetHovered,onClick:()=>{G(e.uri),function(e,t){(0,S().DO_NOT_USE_trackLegacy)(e,"app_preset_selection",t),k().default.logEvent("app_preset_selection",t.preset_uri,t)}(V,{preset_uri:e.uri})},onMouseEnter:V.device.isMobile?void 0:()=>$(e.uri),onMouseLeave:V.device.isMobile?void 0:()=>$(K),children:[(0,R.jsx)("div",{style:U.presetIcon,children:n}),(0,R.jsxs)("div",{style:U.presetTextContainer,children:[(0,R.jsx)("div",{style:U.presetTitle,children:e.name}),(0,R.jsx)("div",{style:U.presetSubtitle,children:e.description})]}),(0,R.jsx)("div",{children:(0,m().$)({...U.presetSelectedCheckmark,...K===e.uri?U.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,R.jsx)("div",{style:{padding:`0 4px ${V.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,R.jsxs)(d().A,{colorPalette:"blue",style:{alignSelf:"stretch",height:36,width:"100%"},disabled:O,onClick:async()=>{if(K){if(W(!0),J){const{sidebarSpaceStore:t,sidebarSpaceViewStore:o}=P().default.state;t&&o&&await b().loadAndDuplicatePageTemplate({environment:V,item:J,isPrivate:!1,spaceStore:t,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==f().NX&&t.table!==v().yK&&t.table!==g().ev||M().createAndCommit({userAction:"initializeApp",environment:V,canUndo:!0,perform:o=>{if(F){const n=_().initializeApp({environment:V,spaceViewStore:F,appUri:z.uri,presetUri:K,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:o,from:"app_onboarding"});_().markTasksDatabaseTemplateIfNeeded(n),w().createSprintPage({environment:V,spaceViewStore:F,appParentStore:t,transaction:o,blockStores:n,creationEntryPoint:{type:"preset",presetUri:K}})}}})}!function(e,t){(0,S().DO_NOT_USE_trackLegacy)(e,"app_preset_accepted",t),k().default.logEvent("app_preset_accepted",t.preset_uri,t)}(V,{preset_uri:K})}},children:[(0,R.jsx)(y().sA,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),O?(0,R.jsx)(c().A,{style:{marginInlineStart:5},onDarkBackground:!0}):void 0]})})]}),te?void 0:(0,R.jsx)("div",{style:U.previewContainer,children:Q&&q&&Q[q]?(0,R.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:J?0:"10%"},children:[(0,R.jsx)("div",{style:{position:"absolute",insetInlineStart:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,R.jsx)(E().Ay,{store:Q[q],context:T().Rr.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:X,disabled:!0},null===(t=Q[q])||void 0===t?void 0:t.id)]}):(0,R.jsx)("img",{src:ee,style:U.previewImage})})]})]}):null}},174723:(e,t,o)=>{o.d(t,{$Y:()=>p,Px:()=>d,Up:()=>l,dY:()=>c});o(898992),o(354520);var n=()=>o(726637),a=()=>o(662303),i=()=>o(427704),r=()=>o(939768),s=()=>o(758375);function l(e){const t=window.location.href;return r().O$(t,{tg:e.templateGalleryItem})}function c(e){let t;return e instanceof s().s?t=e.getBlockId():"type"in e?(e.type,t=e.template.rootId):t=e.rootId,t}function d(e){const t=a().locale&&"en-us"!==a().locale.toLocaleLowerCase()?`/${a().locale.toLowerCase()}`:"",o=void 0!==e?`${t}${i().JZ.templates}/${encodeURIComponent(e)}`:`${t}${i().JZ.templates}`;return`${n().A.domainBaseUrl}${o}`}function p(e){if(!e)return"";try{const o=JSON.parse(e);if("text"===o.content[0].content[0].nodeType){var t;const e=(null==o||null===(t=o.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(o){return""}}},175213:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(314529),a=()=>o(242422);function i(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"delete_property",t),a().default.logEvent("delete_property")}},175947:(e,t,o)=>{o.d(t,{$C:()=>i,Hi:()=>a,Qy:()=>r,Uu:()=>s,ek:()=>c,jq:()=>d,pz:()=>p});var n=()=>o(418135);const a=52,i=45,r=44,s=44,l=30;function c(e){return e?s:r}function d(e){return 2*c(e)}function p(e,t,o){return(e&&!t?(0,n().n$)(o):12)+l}},177148:(e,t,o)=>{o.d(t,{Y:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 11.75 15.25",svg:(0,o(474848).jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125V8.121c0-.563-.224-1.104-.622-1.502L11.63 2.997a2.13 2.13 0 0 0-1.502-.622zM5.375 4.5c0-.483.392-.875.875-.875h3.7V6.25A2.05 2.05 0 0 0 12 8.3h2.625v7.2a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875zm8.691 2.7H12a.95.95 0 0 1-.95-.95V4.184z"})},a=(0,o(340498).wt)("pageEmpty",n)},200562:(e,t,o)=>{o.d(t,{z:()=>i});var n=()=>o(645873);const a=new(n().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,81292)))),i=(0,n()._h)(a,(e=>e.TopbarSidebarButton))},226916:(e,t,o)=>{o.d(t,{c:()=>S,t:()=>k});o(16280);var n=()=>o(242422),a=()=>o(908006),i=()=>o(165358),r=()=>o(388821),s=()=>o(201980),l=()=>o(970330),c=()=>o(319975),d=()=>o(231297),p=()=>o(62287),u=()=>o(824438),m=()=>o(389658),g=()=>o(972435),f=()=>o(129522),v=()=>o(765957),y=()=>o(75368);const h=(0,o(69708).YK)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function S(e){var t,o;const{environment:s,store:d,viewType:g,transaction:h}=e,S=null===(t=d.getBlockTitleStore())||void 0===t?void 0:t.getValue();n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&y().A.state.open&&y().A.setState({open:!1});const k=d.getSpaceId()??(null===(o=v().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.getSpaceId()),b=k?s.idCreator.getSpaceIdCreatorSync(k):void 0;(0,u().j)({environment:s,sourceBlockId:"root",targetBlockPointer:d.pointer,sourceBlockSubtree:(0,r().partialRecordMapToRecordMap)((0,m().qP)({isInline:!1,viewType:g})),targetRecordCache:d.inMemoryRecordCache,transaction:h,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),p().pd({environment:s,block:d,blockType:"collection_view_page",transaction:h}),S&&c().R9({environment:s,store:d.getBlockTitleStore(),value:S,transaction:h}),a().default.afterNextFlush((()=>{const e=f().K.findCollectionViewBlockFromStore(d);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))}));const M=d.getCollectionStoreIfSingleSource();M?l().vH(s,{from:"template_picker",type:"collection_view_page",creating_block_id:d.id,is_full_screen:!0,view_type:g,collection_id:M.id}):(i().log({level:"info",from:"initializeViewActions",type:"track_create_block_missing_collection_id",data:{miscDataToConvertToString:{creating_block_id:d.id,is_full_screen:!0,view_type:g}}}),l().vH(s,{from:"template_picker",type:"collection_view_page",creating_block_id:d.id,is_full_screen:!0,view_type:g,collection_id:""}))}async function k(e){var t,n,a;const{environment:i,store:c}=e,f=null===(t=c.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:y}=await Promise.resolve().then(o.bind(o,339034)),{formEditorActions:S}=await y.load(),k=c.getSpaceId()??(null===(n=v().default.state.sidebarSpaceStore)||void 0===n?void 0:n.id)??(null===(a=v().default.state.mainEditorCurrentBlockStore)||void 0===a?void 0:a.getSpaceId()),b=k?i.idCreator.getSpaceIdCreatorSync(k):void 0;d().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:i,canUndo:!0,perform:e=>{var t;(0,u().j)({environment:i,sourceBlockId:"root",targetBlockPointer:c.pointer,sourceBlockSubtree:(0,r().partialRecordMapToRecordMap)((0,m().mT)({isInline:!1,name:(0,s().w9s)(f)?(0,s().x9d)(g().A.formatMessage(h.formDatabaseTitle)):f})),targetRecordCache:c.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),p().pd({environment:i,block:c,blockType:"collection_view_page",transaction:e});const o=c.getCollectionStoreIfSingleSource();if(!o)throw new Error("Collection store not found");const n=null==o||null===(t=o.getModel())||void 0===t?void 0:t.getNormalizedSchema();if(!n)throw new Error("Schema not found");const a=c,d=S.createCollectionFormEditorView({environment:i,transaction:e,collectionViewBlockStore:a,collectionId:o.id,schema:n,initializeWithAllDefaultQuestions:!0});S.createResponsesCollectionView({environment:i,transaction:e,collectionViewBlockStore:a,collectionStore:o,schema:n}),l().vH(i,{from:"template_picker",type:"form",creating_block_id:c.pointer.id,form_id:null==d?void 0:d.formId,view_id:a.id})}})}},235773:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,notionTemplateTintableIcon:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},i=(0,o(340498).wt)("notionTemplateTintable",a)},240865:(e,t,o)=>{o.d(t,{V:()=>i});var n=()=>o(56366),a=()=>o(765957);function i(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=a().default.state.sidebarSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},241181:(e,t,o)=>{o.d(t,{p:()=>i});var n=o(296540),a=()=>o(56366);function i({collectionStore:e,layoutModule:t}){const o=(0,a().K8)((()=>Boolean(null==e?void 0:e.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[e]);return(0,n.useMemo)((()=>!(!t||!e)&&("properties"===t.type&&"pinned"!==t.variant&&o)),[e,o,t])}},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),a=()=>o(239381);function i(e){var t;const{actionModels:o,id:i}=e,r=(0,a().y5)(i),s="action"===r.source?o.find((e=>e.id===r.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:r,collectionPointer:l,actionModel:s}}},253448:(e,t,o)=>{o.d(t,{d:()=>V});var n=o(296540),a=()=>o(59226),i=()=>o(726637),r=()=>o(484714),s=()=>o(56366),l=()=>o(929219),c=()=>o(718827),d=()=>o(98126),p=()=>o(69708),u=()=>o(896628),m=()=>o(231297),g=()=>o(608581),f=()=>o(145214),v=()=>o(559273),y=()=>o(401497),h=()=>o(534177),S=o(474848);function k({src:e,placeholderSrc:t,placeholderBehavior:o,imageStyle:a,containerStyle:i,onLoadComplete:r,testId:s}){const[l,c]=(0,n.useState)(!0);let d;switch(o){case"force-show-placeholder":d=!0;break;case"force-show-src":d=!1;break;case"show-placeholder-if-loading-src":d=!!t&&(l||void 0===e);break;default:(0,h().HB)(o)}const p=(0,y().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...i},srcWrapper:{...d&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[i,d]);(0,n.useEffect)((()=>{void 0!==e&&c(!0)}),[e]);const u=(0,n.useCallback)((e=>{c(!1),null==r||r()}),[r]);return(0,S.jsxs)("div",{style:p.container,children:[(0,S.jsx)(v().A,{src:e,onLoad:u,style:a,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:s}),t?(0,S.jsx)(v().A,{src:t,style:a,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper}):void 0]})}var b=()=>o(773382),M=()=>o(360083),_=()=>o(801678),w=()=>o(454305),C=()=>o(600871),x=()=>o(393686),A=()=>o(568365),I=()=>o(77246),P=()=>o(867772),T=()=>o(478726);var H=()=>o(645873);const B=new(H().O2)("AnimatedCoverImageActionBar",(async()=>o.e(40454).then(o.bind(o,166913)))),D=(0,H()._h)(B,(e=>e.AnimatedCoverImageActionBar)),E=280,R={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px",borderInlineEnd:`1px solid ${o(100622).IF.whiteWithAlpha(.2)}`};function V(e){const{store:t,disabled:o,paddingRight:i,paddingLeft:l,height:c,proxyWidth:p}=e,g=(0,a().X)("action_bar_reskin"),f=(0,r().v3)(),y=(0,r().Y0)(),h=(0,s().uB)(void 0,w().A),x=(0,s().K8)((()=>o||"suggest"===I().Uv.getMode(t)||(0,C().aD)(y)),[o,t,y]),T=(0,s().K8)((()=>t.getCover()),[t]),H=(0,s().O$)(A().M),[B,R]=(0,n.useState)(void 0);if(!T)return null;const V=H.loadingMode!==P().pF&&H.loadingMode!==P().Wc;return(0,S.jsx)(_().A,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:a}=e;m().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{u().yY({store:t,coverPosition:n,transaction:e}),a()}})}(e,t,f),renderControl:({handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:r})=>g?x?null:(0,S.jsx)(D,{store:t,mouseStore:h,imageUrl:B,handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,visible:a,isRepositioning:r,paddingLeft:l,paddingRight:i}):(0,S.jsx)(N,{handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:r,lastProxiedUrl:B,store:t,disabled:x,paddingRight:i,paddingLeft:l,mouseStore:h}),source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:c,maxHeight:E,cursor:"default"},preventClickPropagation:!0,render:e=>(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(M().A,{url:T.cover,isAuthenticated:!0,permissionRecord:T.pointer,width:p,onFinishedLoadingProxyUrl:R,render:(t,o)=>{const n={width:"100%",height:c,maxHeight:E,objectFit:"cover",opacity:V?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:c,maxHeight:E};return(0,S.jsx)(k,{src:o,placeholderSrc:V?H.dataURL:void 0,placeholderBehavior:V?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:j,testId:"pageCover"})}},T.pointer.id),V?(0,S.jsxs)("div",{style:v().f,children:[(0,S.jsx)(d().A,{size:"md",style:{marginInlineEnd:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"end"},children:void 0!==H.uploadProgress?(0,S.jsx)(b().A,{percentage:H.uploadProgress}):H.progressText?(0,S.jsx)("span",{children:H.progressText}):null})]}):void 0]})})}function j(){A().M.reset()}function N({isVisible:e,isRepositioning:t,handleCancelClick:o,handleRepositionClick:a,handleSavePositionClick:d,lastProxiedUrl:u,store:m,disabled:v,paddingRight:y,paddingLeft:h,mouseStore:k}){const b=(0,r().v3)(),M=(0,p().tz)(),_=(0,n.useCallback)((e=>function(e,t,o,n,a){a.reset();const i=e.target.getBoundingClientRect();x().W({environment:t,intl:o,store:n,rect:i,from:"cover_actions"})}(e,b,M,m,k)),[b,M,m,k]),w=(0,s().K8)((()=>A().M.state.loadingMode),[]),C=(0,s().K8)((()=>function(e){return e.isFullWidth()?"100%":T().x6}(m)),[m]),I=(0,s().O$)(l().e);return v||w!==P().pF||!I?null:(0,S.jsx)(f().A,{animate:{width:C,opacity:e?1:0},style:{position:"absolute",pointerEvents:e?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(g().A,{isVisible:e,position:"bottom",style:{marginInlineEnd:y,marginInlineStart:h},children:[t?void 0:(0,S.jsx)(c().Ay,{style:{borderInlineEnd:i().A.isMobile?"none":void 0,...R},onClick:_,children:(0,S.jsx)(p().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),t||i().A.isMobile?void 0:(0,S.jsx)(c().Ay,{style:{...R,borderInlineEnd:"none"},onClick:e=>a(e,u),children:(0,S.jsx)(p().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),t&&!i().A.isMobile?(0,S.jsx)(c().Ay,{style:R,onClick:d,children:(0,S.jsx)(p().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}):void 0,t&&!i().A.isMobile?(0,S.jsx)(c().Ay,{style:{...R,borderInlineEnd:"none"},onClick:o,children:(0,S.jsx)(p().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})}):void 0]})})}},255591:(e,t,o)=>{o.d(t,{PY:()=>r,bJ:()=>i,ht:()=>l,sw:()=>s});var n=()=>o(837384),a=()=>o(544008);const i={suggested:a().DZ.suggestedCategory,design:a().DZ.designer,eng:a().DZ.engineering,product:a().DZ.productManagement,marketing:a().DZ.marketing,sales:a().DZ.sales,support:a().DZ.support,hr:a().DZ.hr,life:a().DZ.life,student:a().DZ.student},r={suggested:[n().kx.defaultWiki],product:[n().kx.oneOnOneNotes,n().kx.productWiki,n().kx.productSpec,n().kx.visionAndStrategy,n().kx.presentation,n().kx.investorUpdate,n().kx.userResearch,n().kx.experimentResults,n().kx.brainstorm,n().kx.productLaunchBrief],design:[n().kx.designSprint,n().kx.designSystem,n().kx.designPortfolio,n().kx.userResearch,n().kx.brainstorm],eng:[n().kx.engineeringWiki,n().kx.engineeringTechSpec,n().kx.experimentResults,n().kx.brainstorm],marketing:[n().kx.presentation,n().kx.brandAssets,n().kx.brainstorm,n().kx.contentCalendar,n().kx.blogEditorialCalendar,n().kx.socialMediaCalendar,n().kx.campaignBrief,n().kx.moodBoard,n().kx.mediaList],hr:[n().kx.companyHome,n().kx.newHireOnboarding,n().kx.employeeBenefits,n().kx.interviewGuide,n().kx.recruitingTracker,n().kx.jobBoard,n().kx.applicantTracker,n().kx.peopleDirectory],sales:[n().kx.salesWiki,n().kx.salesCRM,n().kx.salesAssets,n().kx.competitiveAnalysis],support:[n().kx.productFAQs,n().kx.helpCenter],life:[n().kx.readingListV2,n().kx.habitTrackerV2,n().kx.simpleBudgetV2,n().kx.weeklyTodoV2,n().kx.travelPlannerV2,n().kx.journalV2,n().kx.resumeV2,n().kx.personalHomeV3,n().kx.quickNoteV2,n().kx.jobApplicationsV2,n().kx.lifeWikiV2,n().kx.moodBoardV2,n().kx.blogPostV2,n().kx.personalCRMV2],student:[n().kx.studentPlanner,n().kx.classNotesV2,n().kx.courseScheduleV2,n().kx.gradeCalculatorV2,n().kx.cornellNotesSystemV2,n().kx.syllabusV2,n().kx.lessonPlansV2,n().kx.classDirectoryV2,n().kx.classroomHomeV2,n().kx.clubHomepageV2]},s=[n().kx.todoListMobile,n().kx.quickNoteMobile,n().kx.habitTrackerMobile,n().kx.journalMobile,n().kx.weeklyPlanMobile,n().kx.classNotesMobile],l=[n().kx.todoListMobile,n().kx.quickNoteMobile,n().kx.oneOnOneNotesMobile,n().kx.meetingNotesMobile,n().kx.weeklyPlanMobile]},256863:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(56366),a=()=>o(824862),i=o(474848);const r=function(e){const{botValue:t,botStore:r,showActiveDot:s,style:l,size:c}=e,d=(0,o(69708).tz)(),p=(0,n().K8)((()=>{if(r){const e=r.getIcon();if(e)return{pointer:{table:a().GP,id:r.id,spaceId:r.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:a().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[r,t]),u=(0,n().K8)((()=>(null==r?void 0:r.getDisplayName(d))??(0,o(799288).Hg)(t)),[r,t,d]),{activeDotStyle:m}=(0,o(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",insetInlineStart:11,top:11}})),[]);return(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)(o(187820).B6,{icon:p,title:u,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,i.jsx)("div",{style:m}):void 0]})}},264699:(e,t,o)=>{o.d(t,{_:()=>r});var n=()=>o(972435);const a=(0,o(69708).YK)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"}});function i(e){const{environment:t,store:n,viewType:a}=e;o(231297).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,o(226916).c)({environment:t,store:n,viewType:a,transaction:e}),o(857783).uK({environment:t,store:n,pageVisitSource:o(584262).y8.LinkInPage});const i=n.getCollectionViewStores()[0];i&&(0,o(493260).F)(i.id,{viewType:a})}})}const r=[{name:n().A.formatMessage(a.table),type:"table",iconFn:o(421559).T,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"table"})},{name:n().A.formatMessage(a.board),type:"board",iconFn:o(969523).q,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"board"})},{name:n().A.formatMessage(a.list),type:"list",iconFn:o(202017).n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"list"})},{name:n().A.formatMessage(a.timeline),type:"timeline",iconFn:o(397414).u,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"timeline"})},{name:n().A.formatMessage(a.calendar),type:"calendar",iconFn:o(42583).D,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"calendar"})},{name:n().A.formatMessage(a.gallery),type:"gallery",iconFn:o(858141).squareGrid2X2Icon,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>i({environment:e,store:t,viewType:"gallery"})}]},267639:(e,t,o)=>{o.d(t,{T:()=>a});o(944114),o(898992),o(908872);var n=()=>o(415651);function a(e){const{environment:t,collectionStore:o,duplicate:a,droppedStores:i,transaction:r,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=i.reduce(((e,t)=>(a||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:c,duplicate:a,transaction:r,resolveTemplateVariables:!1,duplicateActions:s})]}},271084:(e,t,o)=>{o.d(t,{k:()=>a});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort((([e,t],[o,n])=>n-t)).map((([e,t])=>e))}}const a=new n;(0,o(852832).exposeDebugValue)("UserSimilarityStore",a)},272200:(e,t,o)=>{o.r(t),o.d(t,{trackAIAction:()=>s,trackAIAssistantEngineError:()=>g,trackAICompletionPopupClose:()=>m,trackAICompletionPopupOpen:()=>u,trackAIFavoriteAction:()=>c,trackAiAutofillAction:()=>d,trackAiAutofillSettingsAction:()=>p,trackUserFlow:()=>l});var n=()=>o(314529),a=()=>o(242422),i=()=>o(650829),r=()=>o(430483);function s(e,t){const{user_comment:o,...a}=t;(0,n().DO_NOT_USE_trackLegacy)(e,"ai_action",a)}function l(e,t,o){const a={site:"client",...o};(0,n().DO_NOT_USE_trackLegacy)(e,t,a)}function c(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"ai_favorite_action",t)}function d(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"ai_autofill_action",t),a().default.logEvent("ai_autofill_action",1,{action_type:t.type})}function p(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"ai_autofill_settings_action",t)}function u(e,t){if(r().zD.isXMLAssistantEnabled()){var o;const n=(null===(o=t.sessionContext)||void 0===o?void 0:o.evaluator.getTranscript())??[];i().assistantDependency.load().then((({assistantAnalyticsActions:o})=>{o.trackAssistantOpened(e,{from:t.from,sessionId:t.session_id,isReminder:!1,reminderType:void 0,startTimestamp:Date.now(),transcript:n,hasQuery:!1,searchSessionId:void 0})}))}else(0,n().DO_NOT_USE_trackLegacy)(e,"ai_completion_popup_open",{session_id:t.session_id,prompt_key:t.prompt_key,from:t.from})}function m(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"ai_completion_popup_close",t),a().default.logEvent("ai_completion_popup_close",1,{exit_type:t.exit_type})}function g(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"ai_assistant_error",t)}},274652:(e,t,o)=>{o.d(t,{o:()=>i});var n=o(296540),a=o(474848);const i=n.forwardRef((function({color:e="primary",...t},n){const i=(0,o(401497).IS)((n=>{const a="blue"===e?o(100622).Tj.blue:"secondary"===e?n.text.secondary:n.text.primary;return{title:{color:a,fill:a},buttonMenuItem:{...t.style,...t.disabled?{cursor:"not-allowed"}:{}}}}),[t.disabled,e,t.style]);return(0,a.jsx)(o(760217).A,{ref:n,...t,title:(0,a.jsx)("div",{style:i.title,children:t.title}),icon:(0,a.jsx)(o(252291).I,{icon:o(617668).plusIcon,style:{fill:e}}),style:i.buttonMenuItem})}))},279900:(e,t,o)=>{function n(e){let t,o,n;return async(...a)=>t?(n=a,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...a),t)}o.d(t,{A:()=>n})},301948:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(970236),a=()=>o(69708),i=o(474848);function r(e){return(0,i.jsx)(n().E,{color:"blue",style:e.style,content:(0,i.jsx)(a().sA,{id:"AlphaBadgeComponent.label",defaultMessage:"Alpha"})})}},316091:(e,t,o)=>{o.r(t),o.d(t,{default:()=>N,getIconStyle:()=>U});o(944114),o(898992),o(354520),o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),s=()=>o(252291),l=()=>o(98126),c=()=>o(799954),d=()=>o(40457),p=()=>o(589407),u=()=>o(534842),m=()=>o(201980),g=()=>o(69708),f=()=>o(496603),v=()=>o(160568),y=()=>o(557281),h=()=>o(413677),S=()=>o(33301),k=()=>o(261374),b=()=>o(231297),M=()=>o(926010),_=()=>o(264699),w=()=>o(601734),C=()=>o(921855),x=()=>o(68465),A=()=>o(756790),I=()=>o(645873),P=()=>o(765957),T=()=>o(693202),H=()=>o(50764),B=()=>o(939740),D=()=>o(532731),E=()=>o(286611),R=o(474848);const V=(0,g().YK)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"}});function j({menuListStore:e,sectionTitleStyle:t,handleTemplatePickerEmptyEnter:o,sectionsBeforeMobilePreviewSections:n,renderMobileTemplatePreviewItem:r}){const s=(0,i().K8)((()=>{var e;return null===(e=P().default.state.sidebarSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,i().K8)((()=>(0,A().p)().function),[]),d=(0,a().v3)(),p=(0,I().fJ)(w().Aw),u=(0,i().K8)((()=>{if(!p.value)return[];return p.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:s,environment:d}).map((({category:e,sectionHeaderMessage:o,templates:n})=>({key:e,render:e=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{style:t,children:(0,R.jsx)(g().sA,{...o})}),e.children]},e.key),items:n.map(r)})))}),[p.value,c,s,d,r,t]),m="pending"===p.status?(0,R.jsx)("div",{style:{marginTop:t.marginTop,marginBottom:t.marginBottom,paddingInlineStart:10},children:(0,R.jsx)(l().k,{})}):void 0;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(B().Ay,{type:B().Oh.Vertical,store:e,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:o,sections:[...n,...u]}),m]})}const N=function({store:e,menuListStore:t}){const n=(0,a().v3)(),r=(0,a().Y0)();(0,o(852507).l)((()=>{t.reset()}));const s=(0,i().K8)((()=>o(411671).A.getMode(n,e)),[n,e]),l=(0,i().O$)(o(929219).e),c=(0,i().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(e)),[e]),d=(0,i().K8)((()=>e.getAssociatedCollectionStore()),[e]),p=(0,i().K8)((()=>d?d.getParentBlockStore():void 0),[d]),u=(0,i().K8)((()=>d?d.getTemplatePageStores():void 0),[d]),g=(0,i().K8)((()=>function(e){return e.isTemplate()}(e)),[e]),f=(0,i().K8)((()=>{const t=e.getAssociatedCollectionStore(),n=t&&t.getParentBlockStore();return(0,o(33791).v)({collectionStore:t,collectionViewBlockStore:n,checkNavigableAncestorLocked:!0})}),[e]),v=(0,i().K8)((()=>Boolean(null==p?void 0:p.isNonEditableState())),[p]);return l?(0,R.jsxs)("div",{children:[c||r.isMobile?void 0:(0,R.jsx)(G,{store:e,menuListStore:t,publicEditMode:s}),!c&&r.isTablet?(0,R.jsx)(z,{store:e,menuListStore:t,publicEditMode:s}):void 0,c&&!g&&d&&p&&u&&u.length>0?(0,R.jsx)(o(975318).D,{isOverlay:!1,collectionStore:d,canConfigureCollection:f,onTemplateClick:t=>function(e,t,o){b().createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:o,canUndo:!0,perform:n=>{const a=t.getTitleValue();y().n5({title:""!==m().q4_(a)?{text:a}:"template",environment:o,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:n,from:"template_picker"})}})}(t,e,n),onEmptyEnter:()=>O(n),onEmptyPageClick:()=>function(e,t){b().createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,canUndo:!0,perform:o=>{S().n({environment:t,store:e,transaction:o})}})}(e,n),locked:v}):void 0]}):null};function L(e,t){const{device:o}=e;return{...c().CC,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:o.isMobile?12:13,color:t.text.tertiary,display:"flex",alignItems:"center",fontWeight:500}}function U(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.icon.tertiary,marginInlineStart:2,marginInlineEnd:12}:{width:20,fill:t.icon.tertiary,marginInlineEnd:10}}function O(e){const t=T().default.state;(0,H().E)(e)&&"editing"===t.mode&&(b().createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,canUndo:!0,perform:o=>{k().Ve({environment:e,editorMode:"default",transaction:o,multiSelection:t.multiSelection})}}),v().ki(e,{is_keyboard:!0,from:"template_picker",template_type:"empty_page"}))}function W(e,t,o,n){return!!e.device.isMobile&&((0,x().ZE)(n)&&t.focused&&(0,R.jsx)("span",{style:{marginInlineEnd:6},children:(0,R.jsx)(s().I,{icon:d().arrowTurnDownLeftSmallIcon,size:"xs",colorVariant:"tertiary"})}))}function F(e,t,o,a,i){return{key:e.name,render:({ref:a,...r})=>{var s;return(0,n.createElement)(E().J,{...r,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(s=e.iconFn)||void 0===s?void 0:s.call(e,U(e,o)),locked:!1,right:W(t,r,0,i)})},action:o=>{(0,H().E)(t)&&(v().ki(t,{is_keyboard:"keydown"===o.event.type,from:"template_picker",template_type:e.type}),e.onClick(t,a))}}}function z({store:e,menuListStore:t,publicEditMode:o}){const i=(0,r().DP)(),s=(0,a().v3)(),l=(0,n.useCallback)((t=>F(t,s,i,e,o)),[s,i,e,o]),c=[{key:"Basic",render:e=>(0,R.jsx)("div",{children:e.children},e.key),items:D().dB.map(l)},{key:"Database",render:e=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{style:L(s,i),children:(0,R.jsx)(g().sA,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:_()._.filter((e=>e.shouldShow(s))).map(l)}];return(0,R.jsx)(j,{menuListStore:t,sectionTitleStyle:L(s,i),handleTemplatePickerEmptyEnter:()=>O(s),sectionsBeforeMobilePreviewSections:c,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:({ref:t,...o})=>(0,n.createElement)(E().J,{...o,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1}),action:()=>{h().openWithItem({environment:t,item:e,createNewPage:!1,isPrivate:!1,disablePointerEvents:!1})}}}(e,s)})}function K(e,t,o,a,i,r,l){const c=(0,D().F1)(_()._,["table"]),d=f().FF(_()._,...c),u=!r&&d.length>0?function(e,t,o,a,i){return{key:e,render:({ref:o,...a})=>(0,n.createElement)(E().J,{...a,key:e,format:"page-menu-item",title:(0,R.jsx)(g().sA,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,R.jsx)("span",{style:{marginInlineEnd:10},children:(0,R.jsx)(s().I,{icon:p().ellipsisIcon,colorVariant:"tertiary"})}),locked:!1,right:W(t,a,0,i)}),action:()=>o(!0)}}("moreNew",t,l,0,i):null,m=[D().zD,e?D().Wt:D().vP,...c,...u?[]:d].filter((e=>e.shouldShow(t))).map((e=>F(e,t,o,a,i)));return u?m.concat(u):m}function G({store:e,menuListStore:t,publicEditMode:o}){const l=(0,g().tz)(),c=(0,r().DP)(),d=(0,a().v3)(),[p,m]=(0,n.useState)(!1),f=(0,i().K8)((()=>(0,x().ZE)(o)),[o]),v=(0,i().K8)((()=>0===e.getContentLength()),[e])?[F(D().wL,d,c,e,o)]:[],y=K(f,d,c,e,o,p,m),h=(0,i().K8)((()=>e.getTitleValue()),[e]),k=[];if(f){const t=function(e,t,o,a,i,r){return{key:"ask ai",render:({ref:o,...i})=>{const l=e.replace(/(\r\n|\n|\r)/gm," "),c=l.length>30?`${l.slice(0,30)}…`:l;return(0,n.createElement)(E().J,{...i,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:l?a.formatMessage(V.genericHelpMeWriteNewPage,{filter:c}):a.formatMessage(V.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,R.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginInlineEnd:4},children:(0,R.jsx)(s().I,{icon:u().sparklesFillSmallIcon,size:"sm",colorPalette:"purple",colorVariant:"accentPrimary"})}),locked:!1,right:W(t,i,0,r)})},action:()=>{b().createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:o=>{S().n({environment:t,store:i,transaction:o,preventTextSelection:!1,onTextSelection(){(0,M().openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,C().r4)(h,e).trim(),d,0,l,e,o);k.push(t)}return(0,R.jsx)(B().Ay,{type:B().Oh.Horizontal,store:t,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,initialFocus:void 0,disableKeyboard:!0,onEmptyEnter:()=>O(d),sections:[{key:"Basic",render:e=>(0,R.jsx)("div",{children:e.children},e.key),items:[...v,...k]},{key:"Add new",render:e=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{style:L(d,c),children:(0,R.jsx)(g().sA,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:y}]})}},316189:(e,t,o)=>{o.d(t,{o:()=>y});o(16280);var n=()=>o(242422),a=()=>o(165358),i=()=>o(179034),r=()=>o(665344),s=()=>o(96689),l=()=>o(854150),c=()=>o(94830),d=()=>o(973647),p=()=>o(231297),u=()=>o(345913),m=()=>o(213477),g=()=>o(966152),f=()=>o(148832),v=()=>o(405269);async function y(e){var t,o;const{environment:y,item:h,useRecordCache:S,useMinimalTemplates:k,spaceStore:b,isOnboarding:M,from:_,type:w,initializeStore:C,teamStore:x,onSuccess:A,onError:I,isEmailShared:P}=e,T=S&&!k?h.previewRootId:h.rootId,H={id:T,spaceId:h.spaceId},B=new(f().B)(y,{table:i().ev,id:H.id,spaceId:H.spaceId});let D;M?D="onboarding":null!==(t=h.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?D="mobile_app":"homepage_team"===_&&(D="team_home");const E=await(0,v().oC)(y,T);let R;D&&(R={context:"",source:D,isListedTemplate:Boolean(E),isFirstPartyPaidTemplate:void 0!==E&&(0,c().Z1)(E),isEmailShared:P});let V=!1,j={type:"space",parent:{table:s().NX,id:b.id,spaceId:b.getSpaceId()}};if("inExistingStore"===w&&C){if(j={type:"block",parent:{table:i().ev,id:C.id,spaceId:C.getSpaceId()}},C.isEmptyPage()){const e=C.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(V=!0,j=(0,g().LT)(e))}}else"inTeam"===w&&x&&(j={type:"team",parent:{table:l().yK,id:x.id,spaceId:x.v("space_id")}});const N=n().default.checkGate({gateName:"use_local_duplication_for_onboarding"});R||a().log({level:"warning",from:"createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:h.id,template_block_id:h.rootId,target_space_id:b.id,public_template_name:h.name,isOnboarding:M,from:_,type:w}}});const L=n().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),U=!(0,r().Fe)(null===(o=R)||void 0===o?void 0:o.source)&&L||N&&"onboarding"===D,O="onboarding"===D,W=await(0,m().hh)({environment:y,sourceBlocks:[B],destination:j,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},unlockPage:!0,templateInstallationMetadata:R,shouldAttemptServerBackedLocalDuplication:U,shouldUseSynchronousDuplicationAPI:O,from:_,skipUserFacingMessages:!0});if(!W||d().Q.isFail(W)||0===W.value.createdBlocks.length)return null==I||I(),void a().log({level:"error",from:"createTemplateInstance",type:"duplicateTemplateError",error:null!=W&&W.error?W.error:new Error("No response"),data:{miscDataToConvertToString:{template_id:h.id,template_block_id:h.rootId,target_space_id:b.id,public_template_name:h.name}}});const F=W.value.createdBlocks[0];if(V&&C){const e=C;try{return await e.waitUntil((()=>e.isDefined())),await p().createAndCommit({userAction:"createTemplateInstance.deleteCurrentPageStore",environment:y,canUndo:!0,perform:t=>{u().oD({environment:y,blocks:[e],transaction:t,permanentlyDelete:!0})}}).serverCommitResult,F}catch(z){z instanceof Error&&a().log({level:"error",from:"createTemplateInstance",type:"deleteCurrentPageStoreError",error:z,data:{miscDataToConvertToString:{template_id:h.id,template_block_id:h.rootId,target_space_id:b.id,public_template_name:h.name}}})}}return null==A||A(F),F}},328259:(e,t,o)=>{o.r(t),o.d(t,{applyUntypedFeature:()=>g});var n=()=>o(534177),a=()=>o(896628),i=()=>o(13643),r=()=>o(178492),s=()=>o(148307),l=()=>o(604995),c=()=>o(416504),d=()=>o(972435);const p=(0,o(69708).YK)({aiSummaryName:{id:"feature.ai_summary.name",defaultMessage:"AI summary"},aiSummaryDescription:{id:"feature.ai_summary.description",defaultMessage:"Summarize pages with AI"},aiAutofillName:{id:"feature.ai_autofill.name",defaultMessage:"Custom AI autofill"},aiAutofillDescription:{id:"feature.ai_autofill.description",defaultMessage:"Autofill properties with AI"},aiTranslationName:{id:"feature.ai_translation.name",defaultMessage:"AI translation"},aiTranslationDescription:{id:"feature.ai_translation.description",defaultMessage:"Translate pages with AI"},aiKeywordsName:{id:"feature.ai_keywords.name",defaultMessage:"AI keywords"},aiKeywordsDescription:{id:"feature.ai_keywords.description",defaultMessage:"Extract keywords with AI"}}),u=[{uri:r().Bn.priorityHmlFeature,name:"Priority",dependencies:[{uri:r().Kg.priorityHmlProperty,type:"property",collectionUri:i().iH,name:"Priority",description:"High, medium, or low",icon:s().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:i().iH},{uri:r().Bn.progressBarFeature,collectionUri:i().iH,name:"Progress Bar",description:"Visual representation of progress",icon:s().A.images.appPackages.featureStatusSvg,dependencies:[{uri:r().Kg.progressBarCurrentProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:r().Kg.progressBarTargetProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:r().Kg.progressBarFormulaProperty,type:"property",collectionUri:i().iH,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:r().Kg.progressBarCurrentProperty,collection:{id:i().iH,table:"collection"}}]]],["/"],["‣",[["fpp",{property:r().Kg.progressBarTargetProperty,collection:{id:i().iH,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:r().Bn.ganttChartFeature,collectionUri:i().iH,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:s().A.images.appPackages.featureGanttSvg,dependencies:[{uri:r().Kg.ganttInitiativeProperty,type:"property",collectionUri:i().iH,name:"Initiative",description:"Initiatives associated with a specific project",icon:s().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:r().Kg.ganttDueDateProperty,type:"property",collectionUri:i().iH,name:"Due Date",description:"When a project is due.",icon:s().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:r().Kg.ganttTimelineView,type:"collection_view",collectionUri:i().iH,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:r().Kg.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,l().ln)((0,l().Ec)((0,c().P)()),(0,c().P)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:r().Kg.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:r().Kg.ganttDueDateProperty}},collectionViewBlockUri:i().eh}]}];r().Bn.aiSummaryFeature,i().iH,d().A.formatMessage(p.aiSummaryName),d().A.formatMessage(p.aiSummaryDescription),s().A.images.appPackages.featureAiSummarizeSvg,s().A.images.tooltips.properties.aiAutofillSummaryPng,r().Kg.aiSummaryProperty,i().iH,d().A.formatMessage(p.aiSummaryName),d().A.formatMessage(p.aiSummaryName),r().Bn.aiCustomAutofillFeature,i().iH,d().A.formatMessage(p.aiAutofillName),d().A.formatMessage(p.aiAutofillDescription),s().A.images.tooltips.properties.aiCustomAutofillPng,r().Kg.aiCustomAutofillProperty,i().iH,d().A.formatMessage(p.aiAutofillName),d().A.formatMessage(p.aiAutofillName),r().Bn.aiTranslationFeature,i().iH,d().A.formatMessage(p.aiTranslationName),d().A.formatMessage(p.aiTranslationDescription),s().A.images.tooltips.properties.aiTranslationPng,r().Kg.aiTranslationProperty,i().iH,d().A.formatMessage(p.aiTranslationName),d().A.formatMessage(p.aiTranslationName),r().Bn.aiKeywordsFeature,i().iH,d().A.formatMessage(p.aiKeywordsName),d().A.formatMessage(p.aiKeywordsDescription),s().A.images.tooltips.properties.aiKeywordsPng,r().Kg.aiKeywordsProperty,i().iH,d().A.formatMessage(p.aiKeywordsName),d().A.formatMessage(p.aiKeywordsName);var m=()=>o(383559);function g(e){var t;const{environment:o,collectionStore:i,collectionViewBlockStore:r,feature:s,transaction:l}=e,c=s.dependencies,d=(null===(t=r.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const p of c)if("property"===p.type)(0,m().Io)({environment:o,collectionStore:i,dependency:p,blockUriMap:d,allFeatures:u,transaction:l});else if("collection_view"===p.type){const e=(0,m().ww)({environment:o,collectionStore:i,collectionViewBlockStore:r,dependency:p,blockUriMap:d,transaction:l});a().zA({stores:[r],update:{app_uri_map:e},transaction:l})}else(0,n().HB)(p)}},332751:(e,t,o)=>{o.d(t,{I:()=>i});var n=()=>o(170722),a=()=>o(369241);function i(){n().A.state.isActive&&(a().A.setState({...a().A.state,open:!1}),n().A.setState({...n().A.state,isActive:!1,isAnimatingClosed:!0}))}},344417:(e,t,o)=>{o.d(t,{u:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},a=(0,o(340498).wt)("magnifyingGlassSmall",n)},369241:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>H,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>_,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>M,MAX_RECURRENCE_INTERVAL:()=>y,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>v,adjustedStartDateIfPossible:()=>C,areRecurrenceSchedulesEqual:()=>V,convertFromUnpersistedRecurrenceConfig:()=>R,convertToUnpersistedRecurrenceConfig:()=>B,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>P,getNewEndTimestamp:()=>D,getNextDateUtc:()=>I,getRecurrenceAfter:()=>x,isRunningBetweenMidnightAnd3AM:()=>A,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>k,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>w});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function a(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...a(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var i=()=>o(496603),r=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},v={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},y=99,h=999;function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function k(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function b(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:c,minute:d}=e,p="week"===o&&i?i.map((e=>v[e])):void 0,m={};return(0,r().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().HB)(e.end_condition)),"month"===e.frequency&&(0,r().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=a(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>v[e].nth(t))):(0,r().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,l().eU)(t),interval:n,byweekday:p,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const M=1,_=1;function w(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,a=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>M,r=o.length>=_;return{violatesConstraint:i||r,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:r,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:a}}function C(e){var t;const{recurrence:o,afterDate:a}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=a)return o;let i=n().c9.fromMillis(o.start_date,{zone:"utc"});const r=n().c9.fromMillis(a,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(r.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(r.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(r.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(r.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function x(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(C({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function A(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return b(e).after((0,l().eU)((0,l().Rz)()))||void 0}function P(e){const{recurrence:t,intl:o}=e,a=I(R(t));if(!a)return;const i=A(t),r=n().c9.fromJSDate(a).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:r,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=r.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${r.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,r().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().HB)(e):t.formatMessage(g.noEndCondition)}const H=100;function B(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,r().HB)(e.end_condition):void 0}}function D(e,t,o){return e.plus(o-t)}function E(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function R(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?E(e,e.end_condition):(0,r().HB)(e.end_condition):void 0}}function V(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},393686:(e,t,o)=>{o.d(t,{W:()=>f});var n=()=>o(726637),a=()=>o(901389),i=()=>o(896628),r=()=>o(383594),s=()=>o(675925),l=()=>o(231297),c=()=>o(892632),d=()=>o(972435),p=()=>o(867772),u=()=>o(568365);const m=1500,g=(0,o(69708).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function f({environment:e,intl:t,store:o,rect:n,from:d}){r().W(e,{originGap:8,originRect:n,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:t.formatMessage(g.pageCover),onDelete:()=>{!function({environment:e,store:t}){r().I(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:e,canUndo:!0,perform:e=>{i().PT({store:t,transaction:e})}})}({environment:e,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:({url:t,position:n})=>{(0,s().o)(e,{action:"edit_cover",block_type:"page",from:d},(a=>{y({environment:e,store:o,url:{originUrl:t},position:n,callback:a})}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:t.formatMessage(g.fileTypeCaption,{idealImageWidth:m}),onUpload:n=>{(0,s().o)(e,{action:"edit_cover",block_type:"page",from:d},(i=>{var s;r().I(),c().QM({environment:e,file:n[0],bucket:"secure",record:(null===(s=o.getCoverStore())||void 0===s?void 0:s.pointer)??o.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:h,onProgress:S,onComplete:t=>{var n;n={environment:e,store:o,url:{originUrl:t},callback:i},v({...n,position:.5})},onError:()=>{a().f1(t.formatMessage(g.uploadFailed))}})}))}},{type:"embed",title:t.formatMessage(g.embedTitle),inputPlaceholder:t.formatMessage(g.embedPlaceholder),caption:t.formatMessage(g.embedCaption),buttonText:t.formatMessage(g.embedSubmit),onChange:t=>{(0,s().o)(e,{action:"edit_cover",block_type:"page",from:d},(n=>{var a;a={environment:e,store:o,url:t,callback:n},v({...a,position:.5}),r().I()}))}},{type:"unsplash",onChange:({url:t,position:n})=>{(0,s().o)(e,{action:"edit_cover",block_type:"page",from:d},(a=>{y({environment:e,store:o,url:{originUrl:t},position:n,callback:a})}))}}]})}async function v(e){const{environment:t,store:o,url:n,position:a,callback:r}=e,{serverCommitResult:s}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{i().fg({store:o,url:n,position:a||.5,transaction:e})}});await s,r(),u().M.state.loadingMode===p().vS&&u().M.setState({loadingMode:p().Gi,dataURL:u().M.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:d().A.formatMessage(g.downloading)})}function y(e){v(e),n().A.isMobile&&r().I()}function h(e){const{file:t,name:o,size:n}=e;if(r().I(),u().M.setState({loadingMode:p().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{var t;const o=(null===(t=e.target)||void 0===t?void 0:t.result)??void 0;o&&"string"!=typeof o||u().M.state.loadingMode!==p().Wc||u().M.setState({...u().M.state,loadingMode:p().vS,uploadProgress:0,dataURL:o})},e.readAsDataURL(t)}else u().M.state.loadingMode===p().Wc&&u().M.setState({...u().M.state,loadingMode:p().vS,dataURL:t.dataURL,progressText:d().A.formatMessage(g.preparing)});else u().M.state.loadingMode===p().Wc&&u().M.setState({...u().M.state,loadingMode:p().vS,progressText:d().A.formatMessage(g.preparing)})}function S(e){const{progressPercent:t,progressText:o}=e;u().M.state.loadingMode===p().vS&&u().M.setState({...u().M.state,uploadProgress:t,progressText:o})}},395546:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,infoCircleSmallIcon:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.425a.775.775 0 1 0 0 1.55.775.775 0 0 0 0-1.55M6.95 6.5a.625.625 0 1 0 0 1.25h.425V10H6.95a.625.625 0 1 0 0 1.25h2.1a.625.625 0 1 0 0-1.25h-.425V7.125A.625.625 0 0 0 8 6.5z"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("infoCircleSmall",a)},396896:(e,t,o)=>{o.d(t,{VP:()=>l,fI:()=>s});o(296540);var n=()=>o(401497),a=o(474848);function i(e,t){const o={};if(e.margin)if("number"==typeof e.margin||"auto"===e.margin)o.marginInlineStart=e.margin,o.marginInlineEnd=e.margin,o.marginTop=e.margin,o.marginBottom=e.margin;else{const t=e.margin.split(/\s+/);1===t.length?(o.marginInlineStart=t[0],o.marginInlineEnd=t[0],o.marginTop=t[0],o.marginBottom=t[0]):2===t.length?(o.marginTop=t[0],o.marginBottom=t[0],o.marginInlineStart=t[1],o.marginInlineEnd=t[1]):3===t.length?(o.marginTop=t[0],o.marginInlineStart=t[1],o.marginInlineEnd=t[1],o.marginBottom=t[2]):4===t.length&&(o.marginTop=t[0],o.marginInlineEnd=t[1],o.marginBottom=t[2],o.marginInlineStart=t[3])}if(t.padding)if("number"==typeof t.padding)o.paddingInlineStart=t.padding,o.paddingInlineEnd=t.padding,o.paddingTop=t.padding,o.paddingBottom=t.padding;else{const e=t.padding.split(/\s+/);1===e.length?(o.paddingInlineStart=e[0],o.paddingInlineEnd=e[0],o.paddingTop=e[0],o.paddingBottom=e[0]):2===e.length?(o.paddingTop=e[0],o.paddingBottom=e[0],o.paddingInlineStart=e[1],o.paddingInlineEnd=e[1]):3===e.length?(o.paddingTop=e[0],o.paddingInlineStart=e[1],o.paddingInlineEnd=e[1],o.paddingBottom=e[2]):4===e.length&&(o.paddingTop=e[0],o.paddingInlineEnd=e[1],o.paddingBottom=e[2],o.paddingInlineStart=e[3])}return e.marginInlineStart&&(o.marginInlineStart=e.marginInlineStart),e.marginInlineEnd&&(o.marginInlineEnd=e.marginInlineEnd),e.marginTop&&(o.marginTop=e.marginTop),e.marginBottom&&(o.marginBottom=e.marginBottom),t.paddingInlineStart&&(o.paddingInlineStart=t.paddingInlineStart),t.paddingInlineEnd&&(o.paddingInlineEnd=t.paddingInlineEnd),t.paddingTop&&(o.paddingTop=t.paddingTop),t.paddingBottom&&(o.paddingBottom=t.paddingBottom),o}function r(e){const t=(0,n().IS)((t=>{const o=function(e){const t={};return void 0!==e.margin&&(t.margin=e.margin),void 0!==e.marginTop&&(t.marginTop=e.marginTop),void 0!==e.marginBottom&&(t.marginBottom=e.marginBottom),void 0!==e.marginInlineStart&&(t.marginInlineStart=e.marginInlineStart),void 0!==e.marginInlineEnd&&(t.marginInlineEnd=e.marginInlineEnd),t}({margin:e.margin,marginTop:e.marginTop,marginBottom:e.marginBottom,marginInlineStart:e.marginInlineStart,marginInlineEnd:e.marginInlineEnd}),n=function(e){const t={};return void 0!==e.padding&&(t.padding=e.padding),void 0!==e.paddingTop&&(t.paddingTop=e.paddingTop),void 0!==e.paddingBottom&&(t.paddingBottom=e.paddingBottom),void 0!==e.paddingInlineStart&&(t.paddingInlineStart=e.paddingInlineStart),void 0!==e.paddingInlineEnd&&(t.paddingInlineEnd=e.paddingInlineEnd),t}({padding:e.padding,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingInlineStart:e.paddingInlineStart,paddingInlineEnd:e.paddingInlineEnd});return{root:{display:"flex",flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,alignSelf:e.alignSelf,gap:e.gap??"inherit",flexGrow:e.grow,flexWrap:e.wrap,height:e.height,width:e.width,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:e.minHeight,...i(o,n)}}}),[e.flexDirection,e.alignItems,e.justifyContent,e.alignSelf,e.gap,e.margin,e.padding,e.grow,e.wrap,e.height,e.marginTop,e.marginBottom,e.marginInlineStart,e.marginInlineEnd,e.paddingTop,e.paddingBottom,e.paddingInlineStart,e.paddingInlineEnd,e.width,e.maxWidth,e.maxHeight,e.minWidth,e.minHeight]);return(0,a.jsx)("div",{style:t.root,children:e.children})}function s(e){return(0,a.jsx)(r,{flexDirection:"row",...e})}function l(e){return(0,a.jsx)(r,{flexDirection:"column",...e})}},413677:(e,t,o)=>{o.r(t),o.d(t,{accept:()=>D,close:()=>B,loadAndDuplicatePageTemplate:()=>E,openWithItem:()=>T,previewItem:()=>H,setTemplateVisited:()=>R});o(16280),o(581454);var n=()=>o(564884),a=()=>o(242422),i=()=>o(726637),r=()=>o(584262),s=()=>o(763884),l=()=>o(386164),c=()=>o(388821),d=()=>o(559506),p=()=>o(857783),u=()=>o(59110),m=()=>o(949653),g=()=>o(972435),f=()=>o(422366),v=()=>o(174723),y=()=>o(869562),h=()=>o(765957),S=()=>o(75368),k=()=>o(714818),b=()=>o(316189),M=()=>o(160568),_=()=>o(384944),w=()=>o(666144),C=()=>o(778417),x=()=>o(185544),A=()=>o(231297);const I="LastViewedTemplateId",P=(0,o(69708).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function T(e){const{environment:t,item:o,createNewPage:n,isPrivate:a,disablePointerEvents:i,isCheckout:r=!1}=e;C().IU({environment:t}),k().A.setState({open:!0,item:o,createNewPage:n,isPrivate:a,isLoading:!1,disablePointerEvents:i,isCheckout:r}),s().K.set({userId:t.currentUser.id,key:I,value:o.rootId}),M().Xq(t,{template_id:(0,v().dY)(o),from:n?"sidebar":"newPage"})}function H({templateItem:e,currentUserId:t}){const o=k().A.state.item;k().A.setState({...k().A.state,item:e}),o!==e&&s().K.set({userId:t,key:I,value:e.rootId})}function B(e){k().A.setState({item:k().A.state.item,open:!1}),C().IU({environment:e})}async function D(e){const{acceptFrom:t,item:o,environment:n,spaceStore:s,initializeStore:l,...c}=e;k().A.state.open&&k().A.setState({...k().A.state,isLoading:!0}),a().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&S().A.state.open&&S().A.setState({open:!1});const d=l?{...{...c,item:o,environment:n,spaceStore:s},initializeStore:l,type:"inExistingStore",useMinimalTemplates:!1,from:"page_template_modal"}:{...{...c,item:o,environment:n,spaceStore:s},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1,from:"page_template_modal"};let u=!1;const m=Date.now();let g;try{var v;g=await(0,b().o)(d),u=!0;const e=null===(v=h().default.state.mainEditorCurrentBlockStore)||void 0===v?void 0:v.id;!g||e&&e===g.id||p().uK({environment:n,store:g,pageVisitSource:r().y8.Create,showMoveTo:!0}),B(n),i().A.isMobile&&(y().close(),S().A.setState({open:!1}))}finally{var _;const a=Date.now()-m,i=e.initializeStore?(0,f().U)(e.initializeStore):void 0,r=e.initializeStore?!i:e.isPrivate;M().BX(n,{destination:r?"private":"team",template_block_id:o.rootId,template_duplication_duration_ms:a,team_id:null==i?void 0:i.id,created_page_id:null===(_=g)||void 0===_?void 0:_.id}),M().hB(n,{from:"mobileApp",success:u,context:t,template_block_id:o.rootId,target_space_id:s.id,template_duplication_duration_ms:a,public_template_name:o.name,template_id:o.id})}}async function E(e){const{environment:t,initializeStore:o,item:a,isPrivate:i,useMinimalTemplates:r,spaceStore:s,spaceViewStore:p}=e,f=r?a.rootId:a.previewRootId,v=await d().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:f,spaceId:a.spaceId},shallow:!1},headers:(0,l().WS)({spaceId:a.spaceId})});let y;"success"===v.type&&(y=c().RecordMapWithRole.create(v.data.subtreeRecordMap));const h="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:S}=A().createAndCommit({userAction:h,environment:t,canUndo:!0,perform:e=>{const n=o||x().IT({environment:t,spaceStore:s,spaceViewStore:p,parent:i?"private":"none",loading:!0,transaction:e});w()._O({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:y,debugSource:h});const a=(0,u().loadLocalSubtree)({environment:t,blockId:f,inMemoryRecordCache:n.inMemoryRecordCache,options:{allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}}).recordMap;if(!a)throw new Error(g().A.getIntl().formatMessage(P.clientCopyError));return(0,m().localDuplicate)({environment:t,sourceBlockId:f,targetBlockPointer:n.pointer,sourceBlockSubtree:a,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,from:"load_and_duplicate_page_template",options:{allowRedundancy:!0,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}}),n}}),k=((null==S?void 0:S.getCollectionPointers())??[]).map((e=>e.id));return(0,n().u)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[S.id],template_label:a.name,collection_ids:k}}}),S}function R(e){const{item:t,transaction:o,spaceViewStore:n}=e;if(n){const e=n.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const a=e.concat([t.rootId]);_().zv({store:n,data:{visited_templates:a},transaction:o})}}}},418135:(e,t,o)=>{o.d(t,{n$:()=>s,rx:()=>r,yA:()=>l});var n=()=>o(496603);const a=.5,i=4.9,r=1;function s(e){switch(n().qE(n().LI(e,1),a,i)){case a:return 155;case.6:return 128;case.7:return 108;case.8:return 94;case.9:return 83;default:return 75}}function l(e){const t=n().qE(n().LI(e,1),a,i);switch(t){case a:return 273;case.6:return 228;case.7:return 195;case.8:return 171;case.9:return 151;case 1:return 136;case 1.1:return 123;case 1.2:return 113;case 1.3:return 105;case 1.4:return 97;case 1.5:return 91;case 1.6:return 85;default:return Math.max(85-Math.floor(10*(t-1.6)*5),0)}}},441467:(e,t,o)=>{o.d(t,{DZ:()=>L,Ek:()=>z,hN:()=>O,i5:()=>W,of:()=>U});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949);var n=()=>o(779315),a=()=>o(700500),i=()=>o(179034),r=()=>o(197959),s=()=>o(161479),l=()=>o(798880),c=()=>o(201980),d=()=>o(878523),p=()=>o(182641),u=()=>o(383594),m=()=>o(384944),g=()=>o(332751),f=()=>o(538527),v=()=>o(231297),y=()=>o(892632),h=()=>o(594794),S=()=>o(972435),k=()=>o(962845),b=()=>o(299545),M=()=>o(953418),_=()=>o(906537),w=()=>o(486666),C=()=>o(372154),x=()=>o(261358),A=()=>o(148832),I=()=>o(404783),P=()=>o(555776),T=()=>o(116008),H=()=>o(543225),B=()=>o(59320),D=()=>o(528787),E=()=>o(681634),R=()=>o(583824),V=()=>o(36088),j=()=>o(807060),N=()=>o(405981);const L=(0,o(69708).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function U(e){const{environment:t,blockStore:o,multiSelection:n,rect:a,formulasModule:i}=e;let r=a;if(!r){const e=_().get();if(!e)return;r=_().getRect(e)}if(!r)return;const s=r.width,l=r.height,c=r.right-s;T().A.setState({open:!0,rect:new DOMRect(c,r.top,s,l),type:"inline",content:"reaction",blockStore:o,blockId:o.id,multiSelection:n,emoji:void 0}),u().W(t,{originGap:4,originRect:r,popupWidth:w().jv,popupHeight:w().GF,isSmallWidth:!1,title:S().A.formatMessage(L.emojiPicker),currentTab:"emoji",onCancel:()=>T().A.reset(),tabs:[{type:"emoji",title:S().A.formatMessage(L.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=T().A.state;o.open&&"reaction"===o.content&&(T().A.setState({...o,emoji:e}),W({environment:t,formulasModule:i}),u().I())}}]})}async function O(e){var t;const{environment:o,blockStore:a,multiSelection:i,rect:r,from:l,property_id:c}=e;if(T().A.hasContent())return void(0,N()._y)({environment:o,reason:"starting_new"});let p=r;if(!p){const e=_().get();if(!e)return;p=_().getRect(e)}if(!p)return;const u=p.width,m=p.height,f=p.right-u,v=new(I().A)(o,(0,s().e)(a.pointer.spaceId));T().A.setState({open:!0,rect:new DOMRect(f,p.top,u,m),type:"inline",content:"comment",blockStore:a,lastKnownBlockStore:a,blockId:a.id,multiSelection:i,lastEditables:(0,k().$W)(i),discussionInputStore:v,property_id:c,from:l}),M().VG({element:null===(t=n().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),P().A.setActiveWithSource("text_annotation"),g().I(),await(0,V().M)({discussionInputStore:v,environment:o}),d().z0(o,{from:l})}function W(e){const{environment:t,allowActionsWhileCommenting:o,skipOpeningDiscussion:n,formulasModule:s}=e,u=T().A.state;if(u.open){const e="comment"===u.content?u.property_id:void 0,m=T().A.getBlockStore()??T().A.getLastKnownBlockStore();if(T().A.hasContent()&&(!o||m))if("inline"===u.type)v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{const s=function(e){const{environment:t,multiSelection:o,transaction:n,allowActionsWhileCommenting:s}=e,{id:l}=t.currentUser;if(!l)return;const d=s?T().A.getLastSelectedEditables():(0,k().$W)(o).filter((({store:e})=>e.table===i().ev));if(!d||0===d.length)return;const p=(0,x().zH)(d[0].store),u=(0,h().Z1)({environment:t,table:r().$Y,spaceId:p.pointer.spaceId}),m=[],g=new Set;d.forEach((({store:e,selection:o},i)=>{g.add(e.id);const r=(0,x().zH)(e);if(!(r instanceof A().B))return;const s=r.getType(),l=r.getFormat();if(s&&(0,a().pD)(s,l))return;let d=e.getValue();const p=c().xbM(d,o);f().Mw({environment:t,store:e,selection:p,annotation:[c().Ifu.Discussion,u],transaction:n}),d=e.getValue();const v=c().Ffo(d,p.startIndex,p.endIndex),y=0===i?[]:[c().Ey_("\n")];m.push(...y,...v)}));const v=(0,k().ZS)({multiSelection:o,filterCommonAncestors:!1,focus:void 0});if(v)for(const i of v.stores){if(g.has(i.id))continue;const e=i.getType(),t=i.getFormat();e&&(0,a().pD)(e,t)||(0,H().B)({blockStore:i,discussionId:u,transaction:n})}return{blockStore:p,context:m,discussionId:u}}({environment:t,multiSelection:u.multiSelection,transaction:n,allowActionsWhileCommenting:o});if(!s)return;const{context:l,blockStore:p,discussionId:g}=s;if("comment"===u.content){const a=u.discussionInputStore.state.textStore.getValue()||[],i=u.discussionInputStore.state.files,{discussionStore:r,commentStore:s}=(0,B().G)({createDiscussionArgs:{type:"default",context:l,property_id:e},blockStore:p,environment:t,transaction:n,commentTextValue:a,files:y().JC(i),discussionId:g}),{property_type:c,collection_id:f,collection_view_id:v,view_type:h,collection_view_block_id:S}=(0,j().q)(e,m);d().bJ(t,{discussion_id:r.id,discussion_type:r.getType(),comment_id:s.id,parent_block_id:r.getParentId(),from:T().A.state.open&&"comment"===T().A.state.content?T().A.state.from:void 0,property_id:e,property_type:c,collection_view_id:v,view_type:h,collection_id:f,collection_view_block_id:S}),o&&C().A.addNewDiscussionId(g)}else u.emoji&&F({context:l,blockStore:p,environment:t,transaction:n,icon:u.emoji,discussionId:g})},skipUpdatingEditedMetadata:!0});else if("block"===u.type)if("comment"===u.content){const n=u.discussionInputStore.state.textStore.getValue()||[],a=u.discussionInputStore.state.files;o?m&&v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,R().i)({environment:t,type:"default",blockStore:m,commentTextValue:n||[],files:a,transaction:o,property_id:e,formulasModule:s})},skipUpdatingEditedMetadata:!0}):v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,R().i)({environment:t,type:"default",blockStore:u.blockStore,commentTextValue:n||[],files:a,transaction:o,property_id:e,formulasModule:s})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:o,blockStore:n}=u,a=b().O3(n,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));o&&e&&v().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:i=>{null!=a&&a.isDefined()?D().createReaction({environment:t,transaction:i,store:a,icon:o,currentActorPointer:{table:l().oo,id:e},discussionLocation:"block_menu"}):F({context:void 0,blockStore:n,environment:t,transaction:i,icon:o})},skipUpdatingEditedMetadata:!0})}(0,E().c)(t);const g=o?m&&m.getAssociatedCollectionStore():u.blockStore.getAssociatedCollectionStore();n||e||!g||p().B4({environment:t,blockStore:o?m??u.blockStore:u.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:T().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function F(e){const{context:t,blockStore:o,environment:n,transaction:a,icon:i}=e,c=e.discussionId??(0,h().Z1)({environment:n,table:r().$Y,spaceId:o.pointer.spaceId});if(void 0===n.currentUser.id)return;const d=m().vt({environment:n,table:"discussion",args:{type:"default",id:c,parent:o.pointer,context:t,space_id:(0,s().e)(o.pointer.spaceId)},inMemoryRecordCache:o.inMemoryRecordCache,transaction:a});(0,H().B)({transaction:a,blockStore:o,discussionId:d.id});const p={table:l().oo,id:n.currentUser.id};return D().createReaction({environment:n,transaction:a,store:d,icon:i,currentActorPointer:p,discussionLocation:"block_menu"}),d}function z(e){const{environment:t}=e;if(!t.currentUser.id)return;const o=T().A.getPropertyId();if(o){var n;const e=null===(n=T().A.getBlockStore())||void 0===n?void 0:n.getPropertyStore(o);if(e)return{blockStore:e,context:e.getValue()}}const i=T().A.getLastSelectedEditables();if(!i||0===i.length)return;const r=(0,x().zH)(i[0].store),s=[],l=new Set;return i.forEach((({store:e,selection:t},o)=>{l.add(e.id);const n=(0,x().zH)(e);if(!(n instanceof A().B))return;const i=n.getType(),r=n.getFormat();if(i&&(0,a().pD)(i,r))return;const d=e.getValue(),p=c().xbM(d,t),u=c().Ffo(d,p.startIndex,p.endIndex),m=0===o?[]:[c().Ey_("\n")];s.push(...m,...u)})),{blockStore:r,context:s}}},465364:(e,t,o)=>{o.d(t,{$N:()=>T,D5:()=>H,GB:()=>A,M9:()=>C,Pt:()=>P,eW:()=>I,jo:()=>D,v7:()=>x});o(944114),o(898992),o(803949),o(581454);var n=()=>o(906745),a=()=>o(242422),i=()=>o(587682),r=()=>o(187696),s=()=>o(713998),l=()=>o(597777),c=()=>o(604995),d=()=>o(416504),p=()=>o(519831),u=()=>o(496603),m=()=>o(534177),g=()=>o(299709),f=()=>o(878060),v=()=>o(44729),y=()=>o(384944),h=()=>o(319975),S=()=>o(622811),k=()=>o(267639),b=()=>o(177618),M=()=>o(695625),_=()=>o(148832),w=()=>o(747671);function C(e){var t;const{environment:o,droppedStores:a,duplicate:i,calendarBy:s,transaction:u,collectionContextStore:m,duplicateActions:f}=e,y=n().c9.fromMillis(e.startOfDay);let h=!0;if(null!==(t=m.collectionStore())&&void 0!==t&&t.isExternalSyncedCollection())return;for(const n of a){const t=e.collectionStore?e.collectionStore:(0,b().Dj)({store:n,collectionContextStore:m});if(n.getParentTable()===p().Vl||!t){h=!1;break}v().X$({childStore:n,parentStore:t,transaction:u})||(h=!1)}const M=(0,k().T)({environment:o,droppedStores:a,duplicate:i,transaction:u,collectionStore:e.collectionStore,duplicateActions:f});for(const n of M){const t=e.collectionStore?e.collectionStore:(0,b().Dj)({store:n,collectionContextStore:m});if(!t)continue;const a=t.getMappedProperty(s),i=n.getPropertyStore(a),p=(0,r().b)(i.getValue())||c().Ec((0,d().P)()),f=c().kW(p,(0,d().P)()),v=y.toFormat(c().tr);let k;if("date"===f.type||"datetime"===f.type)k={...f,start_date:v};else{const e=c().AA(f,(0,d().P)());if(!e.end)return;const t={...f,start_date:v},o=c().AA(t,(0,d().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(c().tr);k={...f,start_date:v,end_date:n}}const M=c().kW(k,l().$K(p)||(0,d().P)());(0,S().j)({environment:o,store:n,collectionStore:t,collectionContextStore:m,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:h}),H({environment:o,type:"dateValue",propertyId:a,store:n,transaction:u,dateValue:M}),(0,g().E)({environment:o,collectionContextStore:m,block_id:n.id,property:a,property_type:"date",from:"calendar"})}}function x(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function A(e){const{calendarStore:t,x:o,y:a,calendarBy:s}=e,p=t.state;if(p.isDragging){const e=(0,r().b)(p.targetStore.getPropertyStore(s).getValue());if(!e)return;const m=c().kW(e,(0,d().P)()),g=p.temporaryValue||e,f=c().kW(g,(0,d().P)()),v=[];p.dayStoreMap.forEach(((e,t)=>{v.push({store:e,timestamp:t})}));const y=v.find((({store:e})=>{const t=M().T.getRectFromStore(e);return Boolean(t&&i().ux(t,o,a))}));let h;if(y){const e=n().c9.fromMillis(y.timestamp),t=e.endOf("day"),o=e.toFormat(c().tr);if(m){const a=c().AA(m,(0,d().P)());if(p.direction===w().Q.Left)if(n().IX.fromDateTimes(e,t).contains(a.start))h=m;else{let e;e="datetimerange"===m.type||"daterange"===m.type?{...m,start_date:o,end_date:m.end_date}:"datetime"===m.type?{type:"datetimerange",start_date:o,start_time:m.start_time,end_date:m.start_date,end_time:m.start_time,time_zone:m.time_zone,reminder:m.reminder}:{type:"daterange",start_date:o,end_date:m.start_date,reminder:m.reminder};const t=c().AA(e,(0,d().P)());h=!a.end&&t.start>a.start||a.end&&t.start>a.end?f:e}else if(a.end?n().IX.fromDateTimes(e,t).contains(a.end):n().IX.fromDateTimes(e,t).contains(a.start))h=m;else{let e;e="date"===m.type?{...m,type:"daterange",end_date:o}:"datetime"===m.type?{...m,type:"datetimerange",end_date:o,end_time:"00:00"}:{...m,end_date:o};const t=c().AA(e,(0,d().P)());h=t.end&&t.end<t.start?f:e}}}if(h&&!u().n4(f,h)){const e=c().kW(h,l().$K(g)||(0,d().P)());t.setState({...p,temporaryValue:e})}}}function I(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:a}=e,i=o.state;i.isDragging&&i.temporaryValue&&(H({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:n,store:i.targetStore,transaction:a}),o.setState({...o.state,isDragging:!1}))}function P(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function T(e){const{environment:t,store:o,collectionStore:a,collectionContextStore:i,startDayOfWeek:r,transaction:l}=e,p=i.dateRangeStartStore.state,u=(0,d().P)(),m=i.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const g=(null==a?void 0:a.getMappedProperty(m.calendar_by))??m.calendar_by,f=c().hp(p,r,u),v=f.startOf("month"),h=f.endOf("month"),k=n().c9.now().startOf("day");let b;return b=n().IX.fromDateTimes(v,h).contains(k)?c().p6(k.valueOf(),u):c().p6(c().iB(p,r,u).valueOf(),u),y().zv({store:o.getPropertiesStore(),data:{[g]:s().m5(b)},transaction:l}),(0,S().j)({environment:t,store:o,collectionStore:a,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:l}),o}function H(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let r;"timestamp"===e.type?r=c().p6(e.timestampMs.valueOf(),(0,d().P)()):"dateValue"===e.type?r=e.dateValue:(0,m().HB)(e);const l=o.getPropertyValue(n);if(r&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:i}=e;if(o||!n||void 0!==n.reminder)return!1;if(!a().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=B(t,i);if(void 0===r)return!1;return!0}({propertyId:n,oldDateValue:l,newPersistedDate:r,store:o})){const e=B(n,o);void 0!==e&&(r={...r,reminder:e})}const p=s().m5(r);y().zv({store:o.getPropertiesStore(),data:{[n]:p},transaction:i}),f().O({environment:t,store:o,dateProperty:{id:n,oldValue:l,newValue:p}})}function B(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const a=n[e];return a&&"date"===a.type?a.default_reminder:void 0}function D(e){const{environment:t,collectionStore:o,calendarBy:n,store:a,insertStores:i,collectionContextStore:r,transaction:s}=e,l=a.getPropertyStore(n).getValue();for(const c of i)(0,S().j)({environment:t,store:c,collectionStore:o,collectionContextStore:r,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(n),value:l,transaction:s});return i.map((e=>_().B.createChildStore(o,e.pointer)))}},471041:(e,t,o)=>{o.r(t),o.d(t,{createSprintPage:()=>b});o(898992),o(672577),o(803949);var n=()=>o(66689);var a=()=>o(700500),i=()=>o(416845),r=()=>o(179034),s=()=>o(869558),l=()=>o(96689),c=()=>o(854150),d=()=>o(534177),p=()=>o(722101),u=()=>o(384944),m=()=>o(185544),g=()=>o(955930),f=()=>o(414360),v=()=>o(972435),y=()=>o(778708),h=()=>o(148832),S=()=>o(913530);const k=(0,o(69708).YK)({sprintBoard_0:{id:"appTemplatesSprintBoardActions.sprintBoard_0",defaultMessage:"Sprint board"}});function b(e){const{environment:t,spaceViewStore:o,appParentStore:b,transaction:M,blockStores:_,creationEntryPoint:w}=e;if("preset"===w.type&&w.presetUri!==n().I0)return;if(!_)return;const C=_.find((e=>e.getFormat().app_config_uri===n().d0)),x=_.find((e=>e.getFormat().app_config_uri===n().IE));if(!C||!x)return;y()._R({environment:t,transaction:M,sprintsBlockStore:x,tasksBlockStore:C});return function(e){const{environment:t,spaceViewStore:o,appParentStore:y,transaction:b,tasksBlockStore:M,location:_}=e,w=y.table===l().NX?y.id:y.getSpaceId(),C=y.table===l().NX?y:y.getSpaceStore();if(!w||!C)return;const x=function(e){const{environment:t,appParentStore:o,tasksBlockStore:r,transaction:c,spaceId:d}=e,m=function(e){const{environment:t,appParentStore:o,transaction:n,spaceId:r}=e,s=o.table===l().NX?o:o.getSpaceStore();if(!s)throw new(i().yI)("No space store found");const c=u().Wv({environment:t,type:a().xd.collectionViewPage,spaceId:r,format:{page_icon:"/icons/run_lightgray.svg",special_page_for_pm_launch:"sprint_board"},properties:{title:[[v().A.formatMessage(k.sprintBoard_0)]]},inMemoryRecordCache:o.inMemoryRecordCache,transaction:n});u().zv({store:c,data:{parent_id:o.id,parent_table:o.table,alive:!0},transaction:n});const d=h().B.createChildStore(o,c.pointer);return d}({environment:t,appParentStore:o,transaction:c,spaceId:d});return[n().Lu,n().JS,n().vQ].forEach((e=>{!function(e){var t,o;const{collectionViewBlockStore:a,tasksBlockStore:i,viewUri:r,spaceId:l,transaction:c}=e,d=null===(t=i.getCollectionStores())||void 0===t||null===(t=t.find((e=>{return(null==(t=e.getModel())?void 0:t.getDatabaseType())===n().dC;var t})))||void 0===t?void 0:t.pointer,m=null===(o=i.getFormat())||void 0===o||null===(o=o.app_uri_map)||void 0===o?void 0:o[r];if(!m)return;const g=S().p.createChildStore(a,{table:s().Gy,id:m,spaceId:l});d&&g&&function(e){const{viewStore:t,transaction:o,tasksCollectionPointer:n,viewBlockStore:a}=e,i=t.getName(),r=t.getPageSort(),s=t.getFormat(),l=t.getKeyStore("query2").getValue(),c=t.clone(),d=t.getType();u().zv({store:c,data:{name:i,type:d,page_sort:r,format:{...s,collection_pointer:n},query2:l,alive:!0,parent_id:a.id,parent_table:a.table},transaction:o}),p().BC({parentStore:a.getCollectionViewsStore(),appendStore:c,transaction:o})}({viewStore:g,transaction:c,tasksCollectionPointer:d,viewBlockStore:a});(0,f().T)({collectionViewBlockStore:i,collectionViewStore:g,transaction:c})}({collectionViewBlockStore:m,tasksBlockStore:r,viewUri:e,spaceId:d,transaction:c})})),m}({environment:t,appParentStore:y,tasksBlockStore:M,transaction:b,spaceId:w});return function(e,t,o,n,a,i){if(o.table===r().ev)"prepend"===i.type&&p().Hs({parentStore:o.getContentStore(),prependStore:n,before:i.before,transaction:a});else if(o.table===l().NX){if(t.getSpaceId()!==o.id)return;m().yM({environment:e,spaceStore:o,spaceViewStore:t,pageStore:n,isPrivate:!0,transaction:a,location:i})}else o.table===c().yK?g().sP({teamStore:o,store:n,transaction:a,location:i}):(0,d().HB)(o)}(t,o,y,x,b,_),x}({environment:t,spaceViewStore:o,appParentStore:b,transaction:M,tasksBlockStore:C,location:{type:"prepend",before:x.id}})}},517288:(e,t,o)=>{o.d(t,{O:()=>c});var n=()=>o(383594),a=()=>o(972435),i=()=>o(486666),r=()=>o(129522),s=()=>o(116008),l=()=>o(441467);function c(e){const{environment:t,blockStore:o,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:p}=e,u=c??r().K.getRect(o);if(!u)return;const m=u.width,g=u.height,f=u.right-m;s().A.setState({open:!0,rect:new DOMRect(f,u.top,m,g),type:"block",content:"reaction",blockStore:o,blockId:o.id,emoji:void 0}),n().W(t,{originGap:4,originRect:u,popupWidth:i().jv,popupHeight:i().GF,isSmallWidth:!1,title:a().A.formatMessage(l().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:a().A.formatMessage(l().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=s().A.state;o.open&&"reaction"===o.content&&(s().A.setState({...o,emoji:e}),(0,l().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:p}),n().I())}}]})}},527580:(e,t,o)=>{o.d(t,{TK:()=>s,YC:()=>r,ui:()=>i});var n=()=>o(645873);const a={pageVerification:new(n().O2)("pageVerification",(()=>Promise.all([o.e(55753),o.e(91598),o.e(48046),o.e(61505),o.e(50775),o.e(94891)]).then(o.bind(o,80826)))),pageVerificationBadge:new(n().O2)("pageVerificationBadge",(()=>Promise.all([o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(74562),o.e(47160),o.e(91598),o.e(48046),o.e(42056),o.e(76677),o.e(43223),o.e(15517),o.e(61505),o.e(94300),o.e(50775),o.e(79421),o.e(41412)]).then(o.bind(o,422283)))),pageVerificationMenuRenderer:new(n().O2)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(55162),o.e(71003),o.e(55753),o.e(28866),o.e(74562),o.e(47160),o.e(91598),o.e(48046),o.e(42056),o.e(76677),o.e(43223),o.e(15517),o.e(61505),o.e(94300),o.e(50775),o.e(79421),o.e(26207)]).then(o.bind(o,196770))))},i=(0,n()._h)(a.pageVerification,(e=>e.PageAddVerificationButton)),r=(0,n()._h)(a.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,n()._h)(a.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},528787:(e,t,o)=>{o.r(t),o.d(t,{createReaction:()=>M,toggleReaction:()=>b});o(898992),o(354520),o(672577),o(581454),o(737550);var n=()=>o(785082),a=()=>o(343666),i=()=>o(197959),r=()=>o(204384),s=()=>o(161479),l=()=>o(798880),c=()=>o(534177),d=()=>o(878523),p=()=>o(722101),u=()=>o(384944),m=()=>o(231297),g=()=>o(594794),f=()=>o(285068),v=()=>o(878710),y=()=>o(606846),h=()=>o(741817),S=()=>o(725332),k=()=>o(807060);function b(e){const{discussionLocation:t,environment:o,transaction:a,store:p,icon:u}=e,g=function({store:e,icon:t}){const o=(0,v().G_)(e,e.pointer,"reactions").getValue();if(void 0===o)return;return o.map((t=>{const o=f().L.createChildStore(e,{table:r().ez,id:t,spaceId:(0,s().e)(e.pointer.spaceId)});if(o.isDefined())return o})).filter(c().O9).find((e=>e.getIcon()===t))}({store:p,icon:u});if(void 0===o.currentUser.id)return;const k={table:l().oo,id:o.currentUser.id};return null!=g&&g.isDefined()?function({store:e,actorPointer:t,transaction:o,environment:a,discussionLocation:r}){var s;const l={store:e,actorPointer:t,transaction:o,environment:a,discussionLocation:r},c=e.getParentStore(),p=(null==c?void 0:c.table)===i().$Y?c:null==c?void 0:c.getParentStore(),u=(null===(s=e.getActors())||void 0===s?void 0:s.some((e=>e.id===t.id)))??!1;p&&_(p,c)&&(0,S().U)({transaction:o,discussionStore:p});return u?(function(e){var t,o;const{store:a,actorPointer:r,discussionLocation:s,transaction:l,environment:c}=e;if(!a.isDefined())return;const p=a.getParentStore(),u=(null==p?void 0:p.table)===i().$Y?p:null==p?void 0:p.getParentStore(),g=n().eR.includes(s),v=null==u||null===(t=u.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),S=f().L.getUserVisibleReactions(p),k=1===S.length&&1===a.getActors().length&&a.getActors()[0].id===c.currentUser.id;d().fq({environment:c,reaction_value:a.getIcon(),comment_id:a.getParentId(),discussion_id:null==u?void 0:u.id,discussion_type:null==u?void 0:u.getType(),parent_block_id:null==u?void 0:u.getParentId(),parent_collection_id:null==u||null===(o=u.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:a.getActors().length??0,from:s,...g&&{inbox_session_id:y().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const b=a.getModel();m().applyOperation({transaction:l,store:a,operation:b.ops.removeActor(r)}),k&&p&&p.table===i().$Y&&(0,h().v)({environment:c,discussionStore:p,transaction:l})}(l),"Removed"):(function(e){var t,o;const{store:a,actorPointer:r,discussionLocation:s,transaction:l,environment:c}=e;if(!a.isDefined())return;const p=a.getParentStore(),u=(null==p?void 0:p.table)===i().$Y?p:null==p?void 0:p.getParentStore(),g=n().eR.includes(s),f=null==u||null===(t=u.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();d().MP({environment:c,reaction_value:a.getIcon(),comment_id:a.getParentId(),discussion_id:null==u?void 0:u.id,discussion_type:null==u?void 0:u.getType(),parent_block_id:null==u?void 0:u.getParentId(),parent_collection_id:null==u||null===(o=u.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:a.getActors().length??0,from:s,...g&&{inbox_session_id:y().Ay.state.sessionId,notification_page_id:null==f?void 0:f.id}});const v=a.getModel();m().applyOperation({transaction:l,store:a,operation:v.ops.appendActor(r)})}(l),"Added")}({environment:o,store:g,actorPointer:k,transaction:a,discussionLocation:t}):(M({environment:o,transaction:a,store:p,icon:u,currentActorPointer:k,discussionLocation:t}),"Added")}function M({environment:e,transaction:t,store:o,icon:a,currentActorPointer:l,discussionLocation:c}){var m,f;const h=(0,g().JH)({environment:e,table:r().ez,spaceId:(0,s().e)(o.pointer.spaceId)}),b=o.table===i().$Y?o:o.getParentStore(),M=n().eR.includes(c),w=null==b||null===(m=b.getParentStore())||void 0===m?void 0:m.getNavigableBlockStore(),C=null==b?void 0:b.getPropertyId(),x=null==b?void 0:b.getParentStore(),{property_type:A,collection_id:I,collection_view_id:P,view_type:T,collection_view_block_id:H}=(0,k().q)(C,x);d().MP({environment:e,reaction_value:a,comment_id:o.id,discussion_id:null==b?void 0:b.id,discussion_type:null==b?void 0:b.getType(),parent_block_id:null==b?void 0:b.getParentId(),parent_collection_id:null==b||null===(f=b.getParentStore())||void 0===f?void 0:f.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:c,...M&&{inbox_session_id:y().Ay.state.sessionId,notification_page_id:null==w?void 0:w.id},property_type:A,collection_id:I,collection_view_id:P,view_type:T,collection_view_block_id:H});const B=u().vt({environment:e,table:h.table,args:{id:h.id,spaceId:h.spaceId,commentId:o.id,icon:a,actorPointer:l},inMemoryRecordCache:o.inMemoryRecordCache,transaction:t}),D=(0,v().G_)(o,o.pointer,"reactions");p().BC({parentStore:D,appendStore:B,transaction:t}),b&&_(b,o)&&(0,S().U)({transaction:t,discussionStore:b})}function _(e,t){var o;if(!e||!t||t.table!==a().SN)return!1;const n=null===(o=e.getUserSeenRecordStore())||void 0===o?void 0:o.getLastSeenAt();return!n||n<t.getCreatedTime()}},532731:(e,t,o)=>{o.d(t,{F1:()=>v,KQ:()=>c,Wt:()=>u,dB:()=>f,vP:()=>p,wL:()=>d,zD:()=>m});o(944114),o(898992),o(581454),o(908872);var n=()=>o(69708),a=()=>o(33301),i=()=>o(231297),r=()=>o(972435),s=()=>o(806638),l=()=>o(404141);const c=(0,n().YK)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),d={name:r().A.formatMessage(c.empty),iconFn:o(177148).Y,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{i().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:o=>{a().n({environment:e,store:t,transaction:o})}})}},p={name:r().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(826693).notionTemplateIcon)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},u={name:r().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(235773).notionTemplateTintableIcon)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},m={name:r().A.formatMessage(c.import),type:"import",iconFn:o(820579).arrowLineDownIcon,shouldShow:()=>!0,onClick:(e,t)=>{const n=o(206267).JW();o(522094).A.setState({flowId:n}),o(559926).kY(e,{from:"new_page",flowId:n}),l().A.setState({...l().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,n().YK)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:r().A.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{i().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{a().T({environment:e,store:t,transaction:o})}})}},{name:r().A.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{i().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{a().n({environment:e,store:t,transaction:o})}})}}];function v(e,t){const o=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(o.has(t)&&e.push(o.get(t)),e)),[])}},534842:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,sparklesFillSmallIcon:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.25 1.61 13.5 12.78",svg:(0,o(474848).jsx)("path",{d:"M5.201 2.236a.625.625 0 1 0-1.25 0c0 .389-.249.914-.705 1.37s-.981.705-1.37.705a.625.625 0 0 0 0 1.25c.389 0 .914.25 1.37.706s.705.98.705 1.37a.625.625 0 0 0 1.25 0c0-.39.25-.915.706-1.37s.981-.706 1.37-.706a.625.625 0 1 0 0-1.25c-.389 0-.914-.249-1.37-.705S5.2 2.625 5.2 2.236m5.495 3.42a.625.625 0 0 0-1.25 0c0 .854-.403 1.715-1.058 2.37-.656.656-1.517 1.059-2.37 1.059a.625.625 0 1 0 0 1.25c.853 0 1.714.402 2.37 1.058.655.656 1.058 1.517 1.058 2.37a.625.625 0 0 0 1.25 0c0-.853.402-1.714 1.058-2.37s1.517-1.058 2.37-1.058a.625.625 0 0 0 0-1.25c-.853 0-1.714-.403-2.37-1.058-.656-.656-1.058-1.517-1.058-2.37"})},a=(0,o(340498).wt)("sparklesFillSmall",n)},544008:(e,t,o)=>{o.d(t,{DZ:()=>a});var n=()=>o(69708);const a=(0,n().YK)({notionCalendar:{defaultMessage:"Notion Calendar",id:"templateHelpers.connectedApps.notionCalendar"},gettingStarted:{defaultMessage:"Getting started",id:"templateHelpers.personas.gettingStarted"},life:{defaultMessage:"Life",id:"templateGallery.sidebar.life"},personal:{defaultMessage:"Personal",id:"templateHelpers.personas.personal"},designer:{defaultMessage:"Design",id:"templateHelpers.personas.design"},engineering:{defaultMessage:"Engineering",id:"templateHelpers.personas.engineering"},marketing:{defaultMessage:"Marketing",id:"templateHelpers.personas.marketing"},media:{defaultMessage:"Media",id:"templateHelpers.personas.media"},it:{defaultMessage:"IT",id:"templateHelpers.personas.it"},entrepreneur:{defaultMessage:"Entrepreneur",id:"templateHelpers.personas.entrepreneur"},freelancer:{defaultMessage:"Freelancer",id:"templateHelpers.personas.freelancer"},educator:{defaultMessage:"Educator",id:"templateHelpers.personas.educator"},student:{defaultMessage:"Student",id:"templateHelpers.personas.student"},other:{defaultMessage:"Other",id:"templateHelpers.personas.otherOptionLabel"},hr:{defaultMessage:"Human resources",id:"templateHelpers.personas.humanResources"},truncated_hr:{defaultMessage:"HR",id:"templateHelpers.personas.truncated.humanResources"},productManagement:{defaultMessage:"Product management",id:"templateHelpers.personas.productManagement"},productManagementV2:{defaultMessage:"Product",id:"templateHelpers.personas.productManagementV2"},support:{defaultMessage:"Support",id:"templateHelpers.personas.support"},education:{defaultMessage:"Education",id:"templateHelpers.personas.education"},sales:{defaultMessage:"Sales",id:"templateHelpers.personas.sales"},getStartedPage:{defaultMessage:"Getting started",id:"templateHelpers.templates.getStarted"},getStartedPageEvernote:{defaultMessage:"Getting started from Evernote",id:"templateHelpers.templates.getStartedOnEvernote"},getStartedPageMobile:{defaultMessage:"Getting started on mobile",id:"templateHelpers.templates.getStartedOnMobile"},readingList:{defaultMessage:"Reading List",id:"templateHelpers.templates.readingList"},taskList:{defaultMessage:"Task List",id:"templateHelpers.templates.taskList"},todoList:{defaultMessage:"To-do List",id:"templateHelpers.templates.todo"},journal:{defaultMessage:"Journal",id:"templateHelpers.templates.journal"},travelPlanner:{defaultMessage:"Travel Planner",id:"templateHelpers.templates.travelPlanner"},quickNote:{defaultMessage:"Quick Note",id:"templateHelpers.templates.quickNote"},blogPost:{defaultMessage:"Blog Post",id:"templateHelpers.templates.blogPost"},personalHome:{defaultMessage:"Personal Home",id:"templateHelpers.templates.personalHome"},userResearch:{defaultMessage:"User Research Database",id:"templateHelpers.templates.userResearchDatabase"},userResearchDescription:{defaultMessage:"Use this template to schedule and track the status of your user research.",id:"templateHelpers.templates.userResearchDatabase.description"},designSystem:{defaultMessage:"Design System",id:"templateHelpers.templates.designSystem"},designSystemDescription:{defaultMessage:"A design system is a great way to keep everyone aligned. Use this template to document design patterns, assets, and brand, and make assets downloadable for everyone on your team.",id:"templateHelpers.templates.designSystem.description"},engineeringWiki:{defaultMessage:"Engineering Wiki",id:"templateHelpers.templates.engineeringWiki"},engineeringWikiDescription:{defaultMessage:"Use this template to give engineering teams a single source of truth for processes, documentation, and projects, build good programming habits, and keep everyone aligned.",id:"templateHelpers.templates.engineeringWiki.description"},engineeringMeetingNotes:{defaultMessage:"Meeting Notes",id:"templateHelpers.templates.meetingNotes"},brandAssets:{defaultMessage:"Brand Assets",id:"templateHelpers.templates.brandAssets"},brandAssetsDescription:{defaultMessage:"This template makes it easy to keep track of brand assets like logos, images, and fonts by tagging them so they’re easily sortable by file type or application.",id:"templateHelpers.templates.brandAssets.description"},marketingWiki:{defaultMessage:"Marketing Wiki",id:"templateHelpers.templates.marketingWiki"},mediaList:{defaultMessage:"Media List",id:"templateHelpers.templates.mediaList"},mediaListDescription:{defaultMessage:"Use this template to follow news coverage of your company and the people reporting it. Subpages help you keep track of press details and more.",id:"templateHelpers.templates.mediaList.description"},contentCalendar:{defaultMessage:"Content Calendar",id:"templateHelpers.templates.contentCalendar"},contentCalendarDescription:{defaultMessage:"Use this template to schedule and track all the content you’re putting out, from blog posts to podcasts to tweets.",id:"templateHelpers.templates.contentCalendar.description"},moodBoard:{defaultMessage:"Mood Board",id:"templateHelpers.templates.moodBoard"},moodBoardDescription:{defaultMessage:"Ideal template for assembling mood or inspiration boards for events, products, brand campaigns, and more.",id:"templateHelpers.templates.moodBoard.description"},jobBoard:{defaultMessage:"Job Board",id:"templateHelpers.templates.jobBoard"},jobBoardDescription:{defaultMessage:"Easily list and edit your company’s openings with this jobs templates that lets you make real-time changes to a lightweight, public-facing job site. ",id:"templateHelpers.templates.jobBoard.description"},newHireOnboarding:{defaultMessage:"New Hire Onboarding",id:"templateHelpers.templates.newHireOnboarding"},newHireOnboardingDescription:{defaultMessage:"Onboarding checklists help new hires get settled at your company. You can sort by status, team, and start date, and click into any individual card to review onboarding tasks and notes for that person.",id:"templateHelpers.templates.newHireOnboarding.description"},applicantTracker:{defaultMessage:"Applicant Tracker",id:"templateHelpers.templates.applicantTracker"},applicantTrackerDescription:{defaultMessage:"Manage candidate progress across the hiring cycle with this template that lets you easily view each candidate’s information, notes, documents, offers, next steps, and more.",id:"templateHelpers.templates.applicantTracker.description"},companyHome:{defaultMessage:"Company Home",id:"templateHelpers.templates.companyHome"},companyHomeDescription:{defaultMessage:"Every company needs a place where important info is easy to find. This template gathers everything your company needs in order to run smoothly, from mission and values to the employee directory. ",id:"templateHelpers.templates.companyHome.description"},productWiki:{defaultMessage:"Product Wiki",id:"templateHelpers.templates.productWiki"},productWikiDescription:{defaultMessage:"Organize all your product-related documentation with this template, which unifies guides and processes in one place with easy-to-navigate sections.",id:"templateHelpers.templates.productWiki.description"},salesCRM:{defaultMessage:"Sales CRM",id:"templateHelpers.templates.salesCRM"},salesCRMDescription:{defaultMessage:"Your sales funnel doesn’t have to feel like heavy SaaS software. This template offers you a clean canvas to define only the fields you need to track leads.",id:"templateHelpers.templates.salesCRM.description"},salesWiki:{defaultMessage:"Sales Wiki",id:"templateHelpers.templates.salesWiki"},salesWikiDescription:{defaultMessage:"With this template you can keep all your company’s sales documentation and projects in one place so crucial info is easy for anyone across the team or organization to find at a moment’s notice. ",id:"templateHelpers.templates.salesWiki.description"},competitiveAnalysis:{defaultMessage:"Competitive Analysis",id:"templateHelpers.templates.competitiveAnalysis"},salesAssets:{defaultMessage:"Sales Assets",id:"templateHelpers.templates.salesAssets"},salesAssetsDescription:{defaultMessage:"Use this template to keep your sales assets organized so you always use the proper demo, white paper, video, etc. for every meeting. You can upload any type of file to this page for instant access and version control.",id:"templateHelpers.templates.salesAssets.description"},productFAQs:{defaultMessage:"Product FAQs",id:"templateHelpers.templates.productFAQs"},productFAQsDescription:{defaultMessage:"Keep responses to your customers’ common support questions in one place for everyone to see. Every row of this template is its own Notion page, to which you can add any content you want.",id:"templateHelpers.templates.productFAQs.description"},helpCenter:{defaultMessage:"Help Center",id:"templateHelpers.templates.helpCenter"},helpCenterDescription:{defaultMessage:"This template lets you build your own help center, with columns, headings, and sub-pages. You can easily share this page with users and quickly add new support pages as needed.",id:"templateHelpers.templates.helpCenter.description"},classNotes:{defaultMessage:"Class Notes",id:"templateHelpers.templates.classNotes"},jobApplications:{defaultMessage:"Job Applications",id:"templateHelpers.templates.jobApplications"},gradeCalculator:{defaultMessage:"Grade Calculator",id:"templateHelpers.templates.gradeCalculator"},clubHomepage:{defaultMessage:"Club Homepage",id:"templateHelpers.templates.clubHomepage"},cornellNotesSystem:{defaultMessage:"Cornell Notes System",id:"templateHelpers.templates.cornellNotesSystem"},personalCRM:{defaultMessage:"Personal CRM",id:"templateHelpers.templates.personalCRM"},simpleBudget:{defaultMessage:"Simple Budget",id:"templateHelpers.templates.simpleBudget"},syllabus:{defaultMessage:"Syllabus",id:"templateHelpers.templates.syllabus"},classroomHome:{defaultMessage:"Classroom Home",id:"templateHelpers.templates.classroomHome"},lessonPlans:{defaultMessage:"Lesson Plans",id:"templateHelpers.templates.lessonPlans"},courseSchedule:{defaultMessage:"Course Schedule",id:"templateHelpers.templates.courseSchedule"},groupProjects:{defaultMessage:"Group Projects",id:"templateHelpers.templates.groupProjects"},classDirectory:{defaultMessage:"Class Directory",id:"templateHelpers.templates.classDirectory"},lifeWiki:{defaultMessage:"Life Wiki",id:"templateHelpers.templates.lifeWiki"},habitTracker:{defaultMessage:"Habit Tracker",id:"templateHelpers.templates.habitTracker"},hobbies:{defaultMessage:"Hobbies",id:"templateHelpers.templates.hobbies"},resume:{defaultMessage:"Resume",id:"templateHelpers.templates.resume"},resumeDescription:{defaultMessage:"Build a beautiful, functional resume within your Notion workspace, make it publicly accessible and send over the link with your job applications. You can keep improving the resume even after you send it out.",id:"templateHelpers.templates.resume.description"},teamsGettingStarted:{defaultMessage:"Teams Getting Started",id:"templateHelpers.templates.teamsGettingStarted"},teamsHomepage:{defaultMessage:"Teamspaces Home",id:"templateHelpers.templates.teamsHomepage"},wiki:{defaultMessage:"Team Wiki",id:"templateHelpers.templates.wiki"},notes:{defaultMessage:"Notes & docs",id:"templateHelpers.templates.notes"},projectManagement:{defaultMessage:"Project & tasks",id:"templateHelpers.templates.projectManagement"},suggested:{defaultMessage:"Suggested templates",id:"templateHelpers.personas.suggestedTemplates"},suggestedCategory:{defaultMessage:"Suggested",id:"templateGallery.sidebar.suggested"},teamHome:{defaultMessage:"Team Home",id:"templateHelpers.useCase.teamHome"},teamTasks:{defaultMessage:"Team Tasks",id:"templateHelpers.useCase.teamTasks"},teamMeetingNotes:{defaultMessage:"Meeting Notes",id:"templateHelpers.useCase.teamMeetingNotes"},teamDocs:{defaultMessage:"Docs",id:"templateHelpers.useCase.teamDocs"},peopleDirectory:{defaultMessage:"People Directory",id:"templateHelpers.useCase.peopleDirectory"},peopleDirectoryDescription:{defaultMessage:"Help your team keep track of who’s who with this simple template. Each card can be updated to store an employee’s bio, past achievements, goals, and more. ",id:"templateHelpers.useCase.peopleDirectory.description"},employeeBenefits:{defaultMessage:"Employee Benefits",id:"templateHelpers.useCase.employeeBenefits"},employeeBenefitsDescription:{defaultMessage:"This template is a perfect place to describe your company’s benefits and link out to all necessary info so your employees feel appreciated and informed.",id:"templateHelpers.useCase.employeeBenefits.description"},recruitingTracker:{defaultMessage:"Recruiting Tracker",id:"templateHelpers.useCase.recruitingTracker"},recruitingTrackerDescription:{defaultMessage:"This template makes it easy for your company to keep up with your headcount, including job postings and relevant details like role, status, location, and more.",id:"templateHelpers.useCase.recruitingTracker.description"},investorUpdate:{defaultMessage:"Investor Update",id:"templateHelpers.useCase.investorUpdate"},investorUpdateDescription:{defaultMessage:"Instead of sending the usual disorganized email updates to your investors, use this template to offer them a more comprehensive and digestible look at your company’s progress.",id:"templateHelpers.useCase.investorUpdate.description"},designSprint:{defaultMessage:"Design Sprint",id:"templateHelpers.useCase.designSprint"},designSprintDescription:{defaultMessage:"This template is designed to help design teams continuously track and iterate on their projects, from creative sprints to finished projects based on user feedback.",id:"templateHelpers.useCase.designSprint.description"},visionAndStrategy:{defaultMessage:"Vision and strategy",id:"templateHelpers.useCase.visionAndStrategy"},visionAndStrategyDescription:{defaultMessage:"Use this template to put your organization’s guiding principles in one place so that they stay top of mind and easy for employees to reference.",id:"templateHelpers.useCase.visionAndStrategy.description"},designPortfolio:{defaultMessage:"Design Portfolio",id:"templateHelpers.useCase.designPortfolio"},designPortfolioDescription:{defaultMessage:"Use this template to showcase creative projects you’ve worked on and offer more context on their purpose and the development process you or your team followed.",id:"templateHelpers.useCase.designPortfolio.description"},teamWiki:{defaultMessage:"Team Wiki",id:"templateHelpers.useCase.teamWiki"},defaultWiki:{defaultMessage:"Wiki",id:"templateHelpers.useCase.wiki"},teamWikiDescription:{defaultMessage:"This template lets every team in your company create and manage a personalized homepage where they can organize processes, projects, and knowledge specific to their work.",id:"templateHelpers.useCase.teamWiki.description"},teamGoals:{defaultMessage:"Goals",id:"templateHelpers.useCase.teamGoals"},campaignBrief:{defaultMessage:"Campaign Brief",id:"templateHelpers.useCase.campaignBrief"},campaignBriefDescription:{defaultMessage:"Use this template to brief other team members on any given campaign’s goals, messaging, timeline, and more. You can also easily add any relevant supporting documents so everyone in the company stays well-informed. ",id:"templateHelpers.useCase.campaignBrief.description"},presentation:{defaultMessage:"Presentation",id:"templateHelpers.useCase.presentation"},presentationDescription:{defaultMessage:"Use this template to present new ideas and status updates to your team, organized in a way that’s easily updated and scannable. ",id:"templateHelpers.useCase.presentation.description"},experimentResults:{defaultMessage:"Experiment Results",id:"templateHelpers.useCase.experimentResults"},experimentResultsDescription:{defaultMessage:"Use this template to track your experiments along with their results. Anyone from any team can quickly add an experiment by using the database templates.",id:"templateHelpers.useCase.experimentResults.description"},engineeringTechSpec:{defaultMessage:"Engineering Tech Spec",id:"templateHelpers.useCase.engineeringTechSpec"},engineeringTechSpecDescription:{defaultMessage:"Use this template to organize a project kickoff and deliver the necessary context so team members are all up to speed and well-informed.",id:"templateHelpers.useCase.engineeringTechSpec.description"},productSpec:{defaultMessage:"Product Spec",id:"templateHelpers.useCase.productSpec"},productSpecDescription:{defaultMessage:"A product spec should contain all the info your team needs to build something new. Use this template as a source of truth to give context, set goals, see edge cases, and plan development steps.",id:"templateHelpers.useCase.productSpec.description"},interviewGuide:{defaultMessage:"Interview Guide",id:"templateHelpers.useCase.interviewGuide"},interviewGuideDescription:{defaultMessage:"Use this template to prepare your job candidates for their interviews and offer them helpful resources like videos, links, schedules and more.",id:"templateHelpers.useCase.interviewGuide.description"},brainstorm:{defaultMessage:"Remote Brainstorming",id:"templateHelpers.useCase.brainstorm"},brainstormDescription:{defaultMessage:"Boost your team’s remote collaboration with this remote brainstorming template. Designed to streamline brainstorming sessions and maximize creativity using Notion’s new button and AI blocks. This template helps team members to generate brainstorming questions and effortlessly contribute ideas with just a click of a button. Use this template for seamless idea generation and action planning.",id:"templateHelpers.useCase.brainstorm.description"},oneOnOneNotes:{defaultMessage:"1:1 Notes",id:"templateHelpers.useCase.oneOnOneNotes"},oneOnOneNotesDescription:{defaultMessage:"This template is perfect for keeping all of your 1:1 notes and docs in one place. You can add dates to each meeting and even check off action items as the week progresses.",id:"templateHelpers.useCase.oneOnOneNotes.description"},productLaunchBrief:{defaultMessage:"Product Launch Brief",id:"templateHelpers.useCase.productLaunchBrief"},productLaunchBriefDescription:{defaultMessage:"Use this template to plan and execute every part of your launch with your team, in one, centralized page.",id:"templateHelpers.useCase.productLaunchBrief.description"},blogEditorialCalendar:{defaultMessage:"Blog Editorial Calendar",id:"templateHelpers.useCase.blogEditorialCalendar"},blogEditorialCalendarDescription:{defaultMessage:"Use this template to plan and write all your marketing content with a database that lets you track each project’s status, audience, author, reviewer, publish date, and more. ",id:"templateHelpers.useCase.blogEditorialCalendar.description"},socialMediaCalendar:{defaultMessage:"Social Media Calendar",id:"templateHelpers.useCase.socialMediaCalendar"},socialMediaCalendarDescription:{defaultMessage:"Use this template to draft, plan, and write all of your social posts in one simple database. You can view your own posts in a calendar to get an idea of timelines, or switch to a board view to see platform usage.",id:"templateHelpers.useCase.socialMediaCalendar.description"},simpleBudgetDescription:{defaultMessage:"Track your spending to reach your financial goals. Set a monthly cap for your spending, then enter your expenses in the database below. View your expenses in different ways using different database views.",id:"templateHelpers.useCase.simpleBudget.description"},readingListDescription:{defaultMessage:"The modern day reading list includes more than just books. We’ve created a dashboard to help you track all of the articles, videos, podcasts, blog posts, Twitter threads, and — yes, books.",id:"templateHelpers.useCase.readingList.description"},habitTrackerDescription:{defaultMessage:"Keep yourself accountable by tracking your habits everyday. With Notion’s new button block, you can easily check off completed habits for the day with a single click. Whether you’re trying to drink more water, exercise regularly, or meditate every day, this template will help you build healthy habits with ease.",id:"templateHelpers.useCase.habitTracker.description"},travelPlannerDescription:{defaultMessage:"Travel planning can be a fragmented mess with different documents and information everywhere. With this template, you can pull all the essential details about your plans into one spot.",id:"templateHelpers.useCase.travelPlanner.description"},jobApplicationsDescription:{defaultMessage:"Keep track of the entire job application process all in one page. Easily add customized resumes, cover letters, and portfolio’s while keeping track of companies you’ve reached out to.",id:"templateHelpers.useCase.jobApplication.description"},meetingNotes:{defaultMessage:"Meeting Notes",id:"templateHelpers.useCase.meetingNotes"},weeklyPlan:{defaultMessage:"Weekly Plan",id:"templateHelpers.useCase.weeklyPlan"},weeklyPlanDescription:{defaultMessage:"Use this template to plan and organize all the work you need to accomplish over the next week. Visualize your most important to-do’s with an agenda that helps you prioritize.",id:"templateHelpers.useCase.weeklyPlan.description"},weeklyTodo:{defaultMessage:"Weekly To-do List",id:"templateHelpers.useCase.weeklyTodo"},weeklyTodoDescription:{defaultMessage:"Use this template to plan and organize all the work you need to accomplish over the next week. Visualize your most important to-do’s with an agenda that helps you prioritize.",id:"templateHelpers.useCase.weeklyTodo.description"},journalDescription:{defaultMessage:"Document your life - daily happenings, special occasions, and reflections on your goals. Categorize entries with tags and automatically capture the date.",id:"templateHelpers.useCase.journal.description"},quickNoteDescription:{defaultMessage:"This template gives you a sense of the many different types of content you can add while taking quick notes in any situation. It includes a to-do list, web bookmarks, sub-headings, and more!",id:"templateHelpers.useCase.quickNote.description"},personalHomeDescription:{defaultMessage:"Just like a wiki can help keep all the important information in a company somewhere central, a personal wiki can give you a helpful knowledge base for your life!",id:"templateHelpers.useCase.personalHome.description"},lifeWikiDescription:{defaultMessage:"Plan and keep track of your entire life with this comprehensive dashboard. Take charge of your growth with setting goals, tracking daily habits and maintaining a log of everything you’re reading.",id:"templateHelpers.useCase.lifeWiki.description"},blogPostDescription:{defaultMessage:"Use this template as a format for your blog posts. Format your writing and images in any format you like. Make your page live by enable the ‘Share to web’ feature.",id:"templateHelpers.useCase.blogPost.description"},personalCRMDescription:{defaultMessage:"Keep track of all the people you meet, what you know about them, when to reach out, and whether they’re a professional contact. Be the person who always follows up and knows the exact gift to give.",id:"templateHelpers.useCase.personalCRM.description"},classNotesDescription:{defaultMessage:"Keep all your notes from all your classes in one spot. This template makes it easy to capture all your notes and tag them by class, date, and topic.",id:"templateHelpers.useCase.classNotes.description"},classDirectoryDescription:{defaultMessage:"Put names to faces. Use this directory to track class participation, absences, and take any other notes that will be helpful when it comes time to calculate final grades or give feedback to students.",id:"templateHelpers.useCase.classDirectory.description"},clubHomepageDescription:{defaultMessage:"We know that school probably isn’t just about school for you. Notion is the perfect solution for managing information for clubs, organizations, and group projects.",id:"templateHelpers.useCase.clubHomepage.description"},gradeCalculatorDescription:{defaultMessage:"Strategize your quarter or semester by knowing how much every assignment, exam, and project is worth for your final grade. Use this template to stay on top of your grades and plan accordingly.",id:"templateHelpers.useCase.gradeCalculator.description"},cornellNotesSystemDescription:{defaultMessage:"In the 1940s, Cornell Professor Walter Pauk developed a new note-taking system to give college students a better way to organize, condense, and intake knowledge. Here’s the Notion version!",id:"templateHelpers.useCase.cornellNotesSystem.description"},syllabusDescription:{defaultMessage:"Create a digital syllabus that all your students can easily access on the web. Notion makes building a web page like this as easy as typing a document. Just replace this sample content with your own!",id:"templateHelpers.useCase.syllabus.description"},classroomHomeDescription:{defaultMessage:"Give your students one source of truth for class information, course materials, assignments, announcements, scheduling and more. Editing this web page is as easy as writing any document.",id:"templateHelpers.useCase.classroomHome.description"},lessonPlansDescription:{defaultMessage:"These lesson plans are based on Harvard Business School’s Elements of Effective Class Preparation. This makes it easy to track their status, keep all related notes in one spot, and make progress.",id:"templateHelpers.useCase.lessonPlans.description"},classroomManagement:{defaultMessage:"Classroom Management",id:"templateHelpers.useCase.classroomManagement"},courseScheduleDescription:{defaultMessage:"This course schedule provides a comprehensive list of weekly topics, readings, assignments, and exams. You can create your own categories and topics for whatever you’re teaching.",id:"templateHelpers.useCase.courseSchedule.description"},studentPlanner:{defaultMessage:"Student Planner",id:"templateHelpers.useCase.studentPlanner"},studentPlannerDescription:{id:"templateHelpers.useCase.studentPlanner.description",defaultMessage:"From your courses to your calendar, personal projects to club meetings and event, use this template to stay organized, focused, and inspired to have a successful school year."},scratchpad:{defaultMessage:"Scratchpad",id:"templateHelpers.private.scratchpad"},aiUpgrade:{defaultMessage:"Getting Started with Notion AI",id:"templateHelpers.private.aiUpgrade"},websiteBuilder:{defaultMessage:"Website Builder",id:"templateHelpers.private.websiteBuilder"},research:{defaultMessage:"Research",id:"templateHelpers.private.research"},galaxyStudyNotebook:{defaultMessage:"Galaxy Study Notebook",id:"templateHelpers.samsung.galaxyStudyNotebook"},galaxyLifePlanner:{defaultMessage:"Galaxy Life Planner",id:"templateHelpers.samsung.galaxyLifePlanner"},galaxyCompanyHome:{defaultMessage:"Galaxy Company Home",id:"templateHelpers.samsung.galaxyCompanyHome"}});(0,n().YK)({creative:{id:"teamHelpers.creativeTeam.name",defaultMessage:"Creative"},support:{id:"teamHelpers.supportTeam.name",defaultMessage:"Customer Service"},educator:{id:"teamHelpers.educatorTeam.name",defaultMessage:"Educator"},eng:{id:"teamHelpers.engTeam.name",defaultMessage:"Engineering"},finance:{id:"teamHelpers.financeTeam.name",defaultMessage:"Finance"},founder_or_ceo:{id:"teamHelpers.founderCeoTeam.name",defaultMessage:"Executive"},hr:{id:"teamHelpers.hrTeam.name",defaultMessage:"Human Resources"},internal_communication:{id:"teamHelpers.internalCommunicationTeam.name",defaultMessage:"Internal Communication"},it_admin:{id:"teamHelpers.itAdminTeam.name",defaultMessage:"IT Admin"},knowledge_management:{id:"teamHelpers.knowledgeManagementTeam.name",defaultMessage:"Knowledge Management"},marketing:{id:"teamHelpers.marketingTeam.name",defaultMessage:"Marketing"},operations:{id:"teamHelpers.operationsTeam.name",defaultMessage:"Operations"},product_design:{id:"teamHelpers.productDesignTeam.name",defaultMessage:"Product Design"},product:{id:"teamHelpers.productTeam.name",defaultMessage:"Product Management"},project_or_program_management:{id:"teamHelpers.projectProgramMgmtTeam.name",defaultMessage:"Project / Program Management"},sales:{id:"teamHelpers.salesTeam.name",defaultMessage:"Sales"},student:{id:"teamHelpers.studentTeam.name",defaultMessage:"Student"},other:{id:"teamHelpers.otherTeam.name",defaultMessage:"Your Team"}}),(0,n().YK)({generalTeamLabel:{defaultMessage:"General",id:"teamHelpers.generalTeam.name"},personaTeamDescription:{id:"teamHelpers.personaTeam.description",defaultMessage:"A home for you and your team"},workspaceNameHq:{defaultMessage:"{workspaceName} HQ",id:"templateMessages.workspaceNameHQ"}})},551619:(e,t,o)=>{o.d(t,{Hy:()=>A,NV:()=>C,O9:()=>P,Rg:()=>I,Sm:()=>H,f7:()=>T,n$:()=>B,no:()=>D,sx:()=>x});var n=()=>o(59226),a=()=>o(726637),i=()=>o(402014),r=()=>o(484714),s=()=>o(792485),l=()=>o(56366),c=()=>o(700500),d=()=>o(519831),p=()=>o(620689),u=()=>o(591197),m=()=>o(835066),g=()=>o(964345),f=()=>o(267584),v=()=>o(478726),y=()=>o(747100),h=()=>o(665579),S=()=>o(765957),k=()=>o(375447),b=()=>o(66496),M=()=>o(548821),_=()=>o(712505),w=()=>o(302022);function C(e){(0,i().SQ)({event:e,context:i().y$.EditorMouseDown,callback:()=>{}})}function x(e){(0,i().SQ)({event:e,context:i().y$.Click,callback:()=>{}})}function A(e){return(0,l().K8)((()=>Boolean(w().A.state.pageMap[e.id])||b().A.state.pages.has(e.id)),[e.id])}function I(e,t){const o=(0,r().v3)(),n=(0,s().S)(),a=A(e),i=(0,l().K8)((()=>{var o,n;return t===M().Rr.Frame?Boolean(null===(o=S().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===M().Rr.PeekView&&_().default.state.open?Boolean(null===(n=_().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===M().Rr.CollectionPageView||t===M().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=T(e);return(0,l().K8)((()=>{if(!i)return!1;const t=o.currentUser.isLoggedIn(),r=n&&n.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=r&&r.hasPublicPermission)||"edit"===(null==r?void 0:r.permission))&&!a&&!c)}),[o.currentUser,c,i,n,a,e])}function P(e,t){const o=(0,r().v3)(),i=(0,s().S)(),{isTablet:c}=(0,r().Y0)(),d=(0,n().X)("tablet_refresh_template_pills_gate");return(0,l().K8)((()=>{if(t===M().Rr.SitePreview)return!1;if(a().A.isMobile&&(!c||!d))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=i&&i.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const s=g().gZ.state,l=g().Di.state;if(s&&e.id===l)return!1;return!((0,v().L5)(t)?u().VY.state:u().u3.state)}),[o,i,e,t,c,d])}function T(e){return(0,l().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(c().xd.externalObjectInstancePage)}),[e])}function H(e){return(0,l().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===d().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function B(e){const t=(0,r().v3)(),{device:o,WindowSizeStore:n}=t,i=(0,l().K8)((()=>{const e=n.state.height,o=a().A.isMobile&&k().Ay.state.open?e:0;return p().C6(t)+o}),[t,n]);return(0,l().K8)((()=>"home-phone"===e?h().q3:o.isTablet?380:o.isIOS?Math.max(350,i):a().A.isMobile?400:"side-peek"===e||"center-peek"===e?y().ln:"home"===e?h().wH:"30vh"),[o,i,e])}function D(e){const t=(0,r().v3)(),o=(0,l().K8)((()=>(0,m().dC)(t,e)),[t,e]);return(0,l().K8)((()=>o&&!e.isFullWidth()?(0,m().Zy)(t,(0,y().cq)(e),(0,y().RX)(e)):0),[t,o,e])}},553003:(e,t,o)=>{o.d(t,{B:()=>n});o(898992),o(672577),o(737550);function n(e,t){return e.find((e=>e.presets.some((e=>e.uri===t))))}},568365:(e,t,o)=>{o.d(t,{M:()=>n});const n=new(o(867772).Ay)},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>r});var n=()=>o(496506);class a extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new a,r=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},608581:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520),o(581454),o(941795);var n=o(296540),a=()=>o(726637),i=()=>o(401497),r=()=>o(451306),s=()=>o(284371),l=()=>o(963575),c=o(474848);function d(e){const{button:t,isLast:o}=e,a=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:s().Wy.medium,borderInlineEnd:`1px solid ${e.regularDividerColor}`,color:e.text.secondary,fill:e.text.secondary},buttonLast:{borderInlineEnd:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,a.button,o&&a.buttonLast),hoveredStyle:(0,r().AH)(a.buttonHovered,o&&a.buttonLast).style,pressedStyle:a.buttonPressed})}const p=function({children:e,isVisible:t,position:p,style:u}){const m=(0,i().IS)((e=>({container:{color:e.text.secondary,fill:e.text.secondary,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:a().A.isMobile?"auto":"none",opacity:a().A.isMobile?1:0,fontFamily:s().vc(o(662303).locale).sans,position:"absolute",insetInlineEnd:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),g=n.Children.toArray(e).filter(o(534177).O9),f=g.length;return(0,c.jsx)(o(145214).A,{animate:{opacity:t?1:0},...(0,r().AH)(m.container,u,t&&m.containerHover,"top"===p&&m.containerTop),children:g.map(((e,t)=>{const a=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,c.jsx)(d,{isLast:a,button:n},e.key)}});if(e.type===o(718827).Ay&&n.isValidElement(e))return(0,c.jsx)(d,{isLast:a,button:e},e.key)}}))})}},623186:(e,t,o)=>{o.d(t,{Od:()=>y,U$:()=>h,aN:()=>f,z7:()=>v});o(16280),o(898992),o(354520),o(672577),o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(56366),r=()=>o(69708),s=()=>o(496603),l=()=>o(896628),c=()=>o(231297),d=()=>o(33791),p=()=>o(862292),u=()=>o(645873),m=()=>o(395963),g=()=>o(517223);function f(e){return(0,i().K8)((()=>!!e&&(0,d().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function v({store:e,format:t,schema:o,collectionStore:n,propertyIds:s,propertyGroupId:l}){const c=(0,a().v3)(),d=(0,r().tz)(),{value:m}=(0,u().fJ)(p().T.formulas);return(0,i().K8)((()=>(0,g().e7)({store:e,format:t,schema:o,collectionStore:n,propertyIds:s,propertyGroupId:l,intl:d,environment:c,formulasModule:m})),[e,t,o,n,s,l,d,c,m])}function y({collectionStore:e,format:t}){const o=(0,a().v3)();return(0,n.useCallback)((n=>{const a=t.collection_page_properties||[],i=[...(0,s().oE)(n.map((e=>a.find((t=>t.property===e))))),...a.filter((e=>!n.includes(e.property)))];c().createAndCommit({userAction:"PageProperties.handleReorder",environment:o,canUndo:!0,perform:t=>{l().zA({stores:[e],update:{collection_page_properties:i},transaction:t})}})}),[e,o,t.collection_page_properties])}function h({collectionStore:e,propertyGroupId:t}){const o=(0,a().v3)();return(0,n.useCallback)((n=>{if(!t)throw new Error("cannot reorder properties for property group -- no property group id provided");c().createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:o,canUndo:!0,perform:o=>{(0,m()._h)({collectionStore:e,newPartialPropertyIds:n,groupId:t,transaction:o})}})}),[e,o,t])}},665579:(e,t,o)=>{o.d(t,{$L:()=>l,BZ:()=>p,EC:()=>f,EI:()=>b,E_:()=>A,Ed:()=>m,Fq:()=>h,Lu:()=>_,Mk:()=>g,O0:()=>x,V$:()=>C,VQ:()=>v,Xx:()=>M,Xy:()=>d,YS:()=>y,_g:()=>k,dd:()=>u,pW:()=>c,q3:()=>s,wH:()=>r,xK:()=>I});var n=()=>o(484714),a=()=>o(401497),i=()=>o(496603);const r=160,s=40,l=40,c=20,d=600,p=270,u=405,m=480,g=500,f=void 0,v=16,y=10,h=8,S={backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"},k=4;function b(e){return{icon:e.icon.secondary,text:e.text.secondary}}function M(e){return{width:48,height:48,fill:e.icon.tertiary}}function _({theme:e,isPhone:t}){return t?e.personalHomeBackgroundPhone:e.background.primary}const w=1;function C({isPhone:e,theme:t}){return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:t.home.tile.background,boxShadow:A({isPhone:e,theme:t}),...S}}function x({mode:e}){switch(e){case"dark":default:return 0;case"light":return w}}function A({isPhone:e,theme:t,borderOnly:o}){if("dark"===t.mode)return"unset";t.mode;const n=x({mode:t.mode});return(0,i().oE)([o||e?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${n}px rgba(0, 0, 0, 0.05)`]).join(", ")}function I(e){const{borderOnly:t}=e,o=(0,n().WS)(),i=(0,a().DP)();return{unhoveredBoxShadow:A({isPhone:o,theme:i,borderOnly:t}),hoveredBoxShadow:"light"===i.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):i.homeShadow.card.hovered}}},741817:(e,t,o)=>{o.d(t,{v:()=>r});var n=()=>o(18387),a=()=>o(299545),i=()=>o(588836);function r(e){const{discussionStore:t,transaction:o}=e,r=a().No(t);r&&(0,i().u)({discussionIds:[t.id],transaction:o,blockStore:r});const s=(0,n().Z)();if(s){const e=a().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const n of e){if(r&&n.table===r.table&&n.id===r.id)continue;const e=a().bN(n).getValue();null!=e&&e.includes(t.id)&&(0,i().u)({discussionIds:[t.id],transaction:o,blockStore:n})}}}},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>a});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class a extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748054:(e,t,o)=>{o.d(t,{M:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},a=(0,o(340498).wt)("flag",n)},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756790:(e,t,o)=>{o.d(t,{p:()=>i});var n=()=>o(313127),a=()=>o(765957);function i(){var e,t,o,i,r,s,l,c,d,p,u,m,g,f;const{sidebarSpaceStore:v,sidebarSpaceViewStore:y}=a().default.state,h=null==v?void 0:v.getSpaceSurveyData(),S=null==y?void 0:y.getUserSurveyData();return{function:null!=S&&null!==(e=S.function)&&void 0!==e&&e.value?(0,n().Tj)(null==S||null===(t=S.function)||void 0===t?void 0:t.value):void 0,role:null!=S&&null!==(o=S.role)&&void 0!==o&&o.value?(0,n().t_)(null==S||null===(i=S.role)||void 0===i?void 0:i.value):void 0,educationRole:null==S||null===(r=S.education_role)||void 0===r?void 0:r.value,educationLevel:null==S||null===(s=S.education_level)||void 0===s?void 0:s.value,useCases:null!=h&&null!==(l=h.use_cases)&&void 0!==l&&l.value?(0,n().h0)(null==h||null===(c=h.use_cases)||void 0===c?void 0:c.value):void 0,companySize:null!=h&&null!==(d=h.company_size)&&void 0!==d&&d.value?(0,n().JE)(null==h||null===(p=h.company_size)||void 0===p?void 0:p.value):void 0,intent:null!=h&&null!==(u=h.intent)&&void 0!==u&&u.value?(0,n().j9)(null==h||null===(m=h.intent)||void 0===m?void 0:m.value):void 0,categories:null==S||null===(g=S.categories)||void 0===g?void 0:g.value,collaborativeIntent:null==h||null===(f=h.collaborative_intent)||void 0===f?void 0:f.value}}},777932:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{isDuplicating:!1}}}const a=new n},778708:(e,t,o)=>{o.d(t,{Dl:()=>oe,U2:()=>Z,Zk:()=>ne,_R:()=>G,bE:()=>ae,c:()=>X,cJ:()=>te,eN:()=>ee,e_:()=>q,g4:()=>$,qy:()=>Q});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var n=()=>o(906745),a=()=>o(584262),i=()=>o(66689),r=()=>o(890409),s=()=>o(898244),l=()=>o(597777),c=()=>o(604995),d=()=>o(206267),p=()=>o(273900),u=()=>o(912720),m=()=>o(199378),g=()=>o(179034),f=()=>o(519831),v=()=>o(96689),y=()=>o(854150),h=()=>o(950914),S=()=>o(864779),k=()=>o(201980),b=()=>o(908447),M=()=>o(966759),_=()=>o(559506),w=()=>o(873039),C=()=>o(896628),x=()=>o(384944),A=()=>o(867201),I=()=>o(231297),P=()=>o(345913),T=()=>o(755199),H=()=>o(479788),B=()=>o(374562),D=()=>o(235059),E=()=>o(813297),R=()=>o(465364),V=()=>o(147503),j=()=>o(496592),N=()=>o(654062),L=()=>o(601734),U=()=>o(594794),O=()=>o(972435),W=()=>o(111379),F=()=>o(148832),z=()=>o(543665);const K="week";function G(e){const{environment:t,transaction:o,tasksBlockStore:n,sprintsBlockStore:a}=e,i=a.getCollectionPointerIfSingleSource(),r=n.getCollectionPointerIfSingleSource();if(!i||!r)return;const s=z().m.createChildStore(a,i),l=s.getRole()??"none";if(!(0,p().q_)(l,"editor"))return;s.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||Y({environment:t,transaction:o,sprintCollectionStore:s,taskCollectionStore:z().m.createChildStore(n,r),sprintSettingsConfig:h().AL})}function Y(e){const{environment:t,sprintSettingsConfig:o,transaction:n,sprintCollectionStore:a,taskCollectionStore:i}=e,r=a.getSpaceId(),s=(0,U().Z1)({environment:t,table:u().yB,spaceId:r}),l=(0,U().Z1)({environment:t,table:m().SC,spaceId:r});x().eC({environment:t,table:u().yB,inMemoryRecordCache:a.inMemoryRecordCache,value:{id:s,parent_id:a.id,parent_table:a.table,alive:!0,space_id:r,status:o.autoCompleteSprints?"active":"disabled",trigger:{id:d().JW(),type:"recurrence",recurrence:re(o)},action_ids:[l]},transaction:n}),C().zA({stores:[a],update:{automation_ids:[...a.getFormat().automation_ids??[],s]},transaction:n}),x().vt({environment:t,table:m().SC,inMemoryRecordCache:a.inMemoryRecordCache,transaction:n,args:{id:l,version:1,parent_id:s,parent_table:u().yB,type:"complete_sprint",alive:!0,space_id:r,config:{sprint_collection:a.getSpaceShardedPointer(),task_collection:i.getSpaceShardedPointer(),complete_sprint_action:o.actionConfig.complete_sprint_action}}})}function q(e){const{environment:t,automationStore:o,transaction:n,newDuration:a,currentSprintBlockStore:i}=e;x().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{interval:a},transaction:n}),J({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:i})}function $(e){const{environment:t,automationStore:o,transaction:n,newWeekday:a,currentSprintBlockStore:i}=e;x().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[a]},transaction:n}),J({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:i})}function Z(e){const{environment:t,actionStore:o,automationStore:n,transaction:a,newAutocompleteStatus:i,currentSprintBlockStore:s}=e;x().zv({store:n,data:{status:i?"active":"disabled"},transaction:a}),J({environment:t,transaction:a,automationStore:n,currentSprintBlockStore:s});const l=n.getParentPointer();if(!l||l.table!==f().Vl)return;const c=(0,H().Q)(t),d={automation_id:n.id,automation_actions:[{automation_action_id:o.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:l.id};i?(0,r().Ah)(c,d):(0,r().vN)(c,d)}function J(e){const{automationStore:t,currentSprintBlockStore:o,transaction:a,environment:r}=e;if(!t.isActive())return;const s=t.getRecurrence();if(!s)return;const c=(0,S().Vv)(s);if(!c)return;const d=o.getPropertyValue(i().Hx.Dates);if(!d)return;const p=(0,k().Cok)(d)[0];if(!p||"daterange"!==p.type)return;const u=p.start_date,{start_date:m,end_date:g}=(0,S().Me)({currentSprintStartDate:u,sprintSchedule:c});x().zv({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,l().Rz)(n().c9.fromISO(m).plus({minutes:1}).toJSDate())},transaction:a}),R().D5({store:o,propertyId:i().Hx.Dates,transaction:a,environment:r,type:"dateValue",dateValue:{type:"daterange",start_date:u,end_date:g}})}function Q(e){const{transaction:t,newRemainingTasksBehavior:o,actionStore:n}=e;x().zv({store:n.getConfigStore(),data:{complete_sprint_action:o},transaction:t})}async function X(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:n,appConfigs:r}=await L().Aw.load(),{environment:s,collectionContextStore:l,from:c}=e,d=l.collectionStore(),p=null==d?void 0:d.getParentCollectionViewBlockStore(),u=null==p?void 0:p.getParentStore(),m=null==d||null===(t=d.getFormat())||void 0===t?void 0:t.app_config_uri,f=m&&(0,D().l)(r(),m),h=d?(0,W().k)(d.getSpaceId()):void 0;if(!d||!p||!u||!h||u.table!==v().NX&&u.table!==g().ev&&u.table!==y().yK||!f)return;const S=p.getFormat().app_id,k=S?await _().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:p.getSpaceId(),appId:S}}):void 0,M="success"===(null==k?void 0:k.type)&&k.data.result.length?k.data.result.map((e=>F().B.createChildStore(u,{table:g().ev,id:e.blockId,spaceId:p.getSpaceId()}))):[p];await ie({environment:s,taskCollectionStore:d,executeFn:()=>{const e=I().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:s,canUndo:!0,perform:e=>{const t=(0,B().We)(),a=o.applyTypedFeatures({environment:s,spaceViewStore:h,appParentStore:u,appUri:f.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:M}),r=n.createSprintPage({environment:s,spaceViewStore:h,appParentStore:u,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_settings"}});V().os({collectionSettingsStore:l.settingsStore});const d=c?{feature:{id:i().yx.TaskToSprintRelation,from:c,type:"notion://projects/tasks_with_sprints_feature"}}:{};return(0,b().Z)({environment:s,collectionContextStore:l,from:"view_settings",property:i().yx.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,property_id:i().yx.TaskToSprintRelation,...d}),r}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&A().Y({environment:s,store:t,pageVisitSource:a().y8.Create})}))}})}async function ee(e){const{environment:t,collectionContextStore:o,sprintSettingsContext:n,sprintBoardViewBlockIds:r}=e,{sprintCollectionStore:s,automationContext:l,currentCollectionViewBlockStore:c,sprintCollectionViewBlockStore:d,taskCollectionStore:p,taskCollectionViewBlockStore:u}=n;if(!s||!d||!l)return;const m=u.getSpaceId(),f=[...d.getCollectionPointerIfSingleSource()?[d]:[],...r.map((e=>new(F().B)(t,{id:e,table:g().ev,spaceId:m})))];c.id===u.id?V().os({collectionSettingsStore:o.settingsStore}):A().Y({environment:t,store:u,pageVisitSource:a().y8.LeaveOrRemove});const{automationActions:v}=await E().QV.automations.load(),{automationStore:y}=l;await ie({environment:t,taskCollectionStore:p,executeFn:()=>{I().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{u.id===d.id&&(0,j().removeCollectionFromCollectionViewBlock)({collectionViewBlockStore:u,collectionStore:s,transaction:e}),function(e){const{transaction:t,blocksToDelete:o,environment:n,taskCollectionStore:a,sprintCollectionStore:r}=e;x().zv({store:r,transaction:t,data:{alive:!1}}),(0,w().B)({environment:n,collectionStore:a,schema:a.getSchema(),property:i().yx.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),P().oD({environment:n,blocks:o,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:f,sprintCollectionStore:s,taskCollectionStore:p}),v.disableAutomation({automationStore:y,environment:t,transaction:e}),v.deleteAutomation({automationStore:y,environment:t,transaction:e})}}),(0,M().i)({environment:t,collectionContextStore:o,property_type:"relation",from:"view_settings",property:i().yx.TaskToSprintRelation})}})}function te(e){const{environment:t,userSettingsStore:o}=e;I().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{T().mJ({userSettingsStore:o,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function oe(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function ne(e){const{environment:t,collectionContextStore:o,currentViewBlockStore:n,taskCollectionViewBlockStore:a}=e,r=o.collectionViewStore();if(!r)return;const s=r.getFormat(),l=r.getRawQuery();I().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,N().F)({collectionViewStore:r,transaction:e,update:{name:O().A.formatMessage(B().DZ.tasksCurrentSprintV2ViewName),query2:{...l,filter:void 0},format:{...s,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:B().Wo,app_config_uri:i().Lu,hide_linked_collection_name:!0}}}),n.id===a.id){var t;const o=(null===(t=n.getFormat())||void 0===t?void 0:t.app_uri_map)??{},l=s.app_config_uri;l&&delete o[l],C().zA({stores:[a],update:{app_uri_map:{...o,[i().Lu]:r.id}},transaction:e})}}})}function ae(e){const{environment:t,sprintSettingsContext:o}=e;if(!o)return;const n=o.sprintCollectionStore,a=(null==n?void 0:n.getRole())??"none";n&&(0,p().q_)(a,"editor")&&o.automationContextLoaded&&!o.automationContext&&I().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{Y({environment:t,transaction:e,sprintCollectionStore:n,taskCollectionStore:o.taskCollectionStore,sprintSettingsConfig:h().AL})}})}async function ie(e){const{executeFn:t,environment:o,taskCollectionStore:n}=e;await async function(e){var t;const{environment:o,taskCollectionStore:n}=e,a=n.getFormat().app_uri_map,r=i().yx.TaskToSprintRelation,l=n.getSchema(),c=(null==a?void 0:a[r])??r,d=l[c];if(!d||!(0,s().nC)(d))return;const p=null===(t=(0,s().Nv)(d))||void 0===t?void 0:t.id;if(!p)return;const u=new Set([c]);Object.entries(l).forEach((([e,t])=>{var o;t&&(0,s().nC)(t)&&(null===(o=(0,s().Nv)(t))||void 0===o?void 0:o.id)===p&&u.add(e)}));const{serverCommitResult:m}=I().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:o,canUndo:!0,perform:e=>{for(const t of u)(0,w().B)({environment:o,transaction:e,permanentlyDelete:!0,collectionStore:n,schema:l,property:t});null==a||delete a[r],a&&C().zA({stores:[n],transaction:e,update:{app_uri_map:a}})}});await m}({environment:o,taskCollectionStore:n}),t()}function re(e){return{frequency:K,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,l().Rz)(n().c9.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,c().dB)(),hour:0,minute:0}}},780863:(e,t,o)=>{o.d(t,{p:()=>l});var n=o(296540),a=()=>o(40845),i=()=>o(496603),r=()=>o(778417);const s={isRepositioning:!1};function l(e){const{currentPosition:t,imageUrl:o,onSavePosition:l,onPositionChange:c,rootRef:d,environment:p}=e,[u,m]=(0,n.useState)(s),{isRepositioning:g}=u,f=(0,n.useCallback)((()=>{m(s)}),[]),v=(0,n.useMemo)((()=>void 0!==u.temporaryPosition?u.temporaryPosition:t),[u.temporaryPosition,t]);(0,n.useEffect)((()=>{c&&c(v)}),[v,c]);const y=(0,n.useCallback)((e=>{r().IU({environment:p});const t=new Image;t.onload=()=>{m((e=>({...e,isRepositioning:!0,image:t})))};const n=e||o;n&&(t.src=n)}),[p,o]),h=(0,n.useCallback)((()=>{l(v),f()}),[l,v,f]),S=(0,n.useCallback)((()=>{f()}),[f]);(0,n.useEffect)((()=>{const e=e=>{const t=d.current;t&&e.target instanceof Node&&!t.contains(e.target)&&g&&h()};return g&&window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}}),[g,h,d]);const k=(0,n.useCallback)((e=>{const{image:t}=u;if(!t||!g)return;const o=d.current;if(o&&o instanceof Element){const e=o.getBoundingClientRect().width/t.width*t.height;m((t=>({...t,startDragImageScreenHeight:e,startDragRenderedPosition:v})))}}),[u,g,v,d]),b=(0,n.useCallback)((e=>{if(!g)return;const{startDragImageScreenHeight:t,startDragRenderedPosition:o}=u,n=e.diffY/(t||0)+(o||0);m((e=>({...e,temporaryPosition:(0,i().LI)((0,a().A)(n,0,1),4)})))}),[g,u]),M=(0,n.useCallback)((()=>{m((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),_=(0,n.useMemo)((()=>g?"ns-resize":"inherit"),[g]);return{isRepositioning:g,currentImagePosition:v,handleDragStart:k,handleDragMove:b,handleDragEnd:M,handleStartReposition:y,handleSavePosition:h,handleCancelReposition:S,repositioningCursor:_}}},797573:(e,t,o)=>{o.d(t,{B:()=>i,o:()=>a});o(581454);var n=()=>o(402390);function a(e,t){return e.map((e=>i(e,t)))}function i(e,t){const{nameMessage:o,descriptionMessage:a,...i}=e,{rootId:r,previewRootId:s,spaceId:l}=function(e,t){const o=(0,n().H)(t);return e.sources[o]||e.sources[n().q]}(e,t);return{...i,id:o.id,rootId:r,spaceId:l,previewRootId:s,name:t.formatMessage(o),description:a?t.formatMessage(a):void 0}}},801678:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),a=()=>o(662303),i=()=>o(56366),r=()=>o(69708),s=()=>o(100622),l=()=>o(496603),c=()=>o(284371),d=()=>o(720665),p=()=>o(145214),u=o(474848);const m=function(e){const t=(0,n.useRef)(null),a=(0,o(484714).v3)(),{renderControl:r,onFlushTemporaryPosition:s,style:c,source:p,store:m}=e,f=(0,i().K8)((()=>0===o(502438).default.state.stores.length),[]),[v,y]=(0,n.useState)(!1),h=(0,i().uB)(e.mouseStore,o(454305).A),S=(0,i().K8)((()=>h.state.mouseEntered),[h]),k=(0,i().K8)((()=>function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();if(e){const t=e.getFormat().collection_cover_position;return(0,d().pN)(t)?o:t}}const n=t.getFormat(),a=n.page_cover_position;if((0,l().Et)(a))return a;return o}(p,m)),[p,m]),{isRepositioning:b,currentImagePosition:M,handleDragStart:_,handleDragMove:w,handleDragEnd:C,handleStartReposition:x,handleSavePosition:A,handleCancelReposition:I,repositioningCursor:P}=(0,o(780863).p)({currentPosition:k,onSavePosition:e=>{s({imagePosition:e,reset:()=>{h.reset()}})},rootRef:t,environment:a}),T=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:P},container:{position:"relative",width:"100%",zIndex:1}})),[P]);b&&!f&&I();const H=(0,n.useMemo)((()=>(0,l().nF)((e=>{h.setState({...h.state,mouseEntered:!0})}),100)),[h]),B=(0,n.useMemo)((()=>(0,l().sg)((e=>{h.setState({...h.state,mouseEntered:!1})}),100)),[h]),D=(0,n.useCallback)(((e,t)=>{x(t)}),[x]),E=(0,n.useCallback)((e=>{A()}),[A]),R=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&y(!0)}),[]),V=(0,n.useCallback)((()=>{y(!0)}),[]),j=(0,i().K8)((()=>r({handleRepositionClick:D,handleSavePositionClick:E,handleCancelClick:I,isVisible:S||v||b,isRepositioning:b})),[D,E,I,v,b,S,r]),N=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,u.jsxs)("div",{ref:t,onFocus:R,onBlur:V,onMouseEnter:H,onMouseMove:H,onMouseLeave:B,...N,...(0,o(451306).AH)(T.container,c),children:[(0,u.jsx)(o(603820).A,{onDraggableDragStart:_,onDraggableDragMove:w,onDraggableDragEnd:C,onDraggableDragCancel:C,disabled:!b,render:t=>(0,u.jsx)("div",{style:T.dragContainer,...t,children:e.render({imagePosition:M,isRepositioning:b})})}),(0,u.jsx)(g,{small:e.small,isRepositioning:b}),j]})};function g({small:e,isRepositioning:t}){if(e)return null;const o={background:s().IF.blackWithAlpha(.4),borderRadius:4,color:s().Tj.white,fontSize:12,fontFamily:c().vc(a().locale).sans,width:180,insetInlineStart:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,u.jsx)(p().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,u.jsx)(r().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},806638:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(427704),a=()=>o(577142);function i(e){const{environment:t}=e;(0,a().navigate)({environment:t,url:n().JZ.marketplace,redirect:!1})}},817942:(e,t,o)=>{o.d(t,{A5:()=>u,MR:()=>h,Mx:()=>l,Pb:()=>f,WL:()=>y,hg:()=>c,kZ:()=>v,pv:()=>d,vV:()=>g});o(581454);var n=o.n(o(32485)),a=o(296540),i=()=>o(11048),r=()=>o(455994),s=o(474848);const l=a.forwardRef((function(e,t){const{children:a,type:l,gap:c,withBottomPadding:d,style:p,onMouseDown:u,onClick:m,onDoubleClick:g,onContextMenu:f,suppressMargin:v}=e,y=(0,o(551619).n$)(l),h=(0,o(56366).K8)((()=>r().A.getPanelState("peek").isOpen&&"static_sidebar"===r().A.getPanelState("peek").displayStyle),[]);return(0,s.jsx)(i().A,{name:"PageLayout",children:(0,s.jsx)("div",{className:n()("layout",{"layout-wide":"wide"===l,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===l,"layout-side-peek":"side-peek"===l,"layout-center-peek":"center-peek"===l&&!h,"layout-center-peek-with-layout-panel":"center-peek"===l&&h,"layout-home":"home"===l,"layout-meet":"meet"===l,"layout-home-phone":"home-phone"===l,"layout-home-redesign-desktop":"home-redesign-desktop"===l,"layout-form":"form"===l,"layout-form-viewer":"form-viewer"===l,"layout-form-viewer-embed":"form-viewer-embed"===l,"layout-phone":"phone"===l,"layout-tablet":"tablet"===l,"layout-template-preview":"template-preview"===l,"layout-chat":"chat"===l,"layout-layout-editor":"layout-editor"===l,"layout-layout-editor-wide":"layout-editor-wide"===l,"layout-layout-editor-narrow":"layout-editor-narrow"===l,"layout-marketplace":"marketplace"===l,"layout-marketplace-mobile":"marketplace-mobile"===l,"layout-team-home":"team-home"===l,"layout-team-home-mobile":"team-home-mobile"===l,"layout-create-post":"create-post"===l,"layout-fullscreen-ai":"fullscreen-ai"===l,"layout-narrowscreen-ai":"narrowscreen-ai"===l,"layout-presentation-mode":"presentation-mode"===l,"layout-person-profile":"person-profile"===l,"layout-suppress-margin":v}),style:{paddingBottom:d?y:void 0,gap:c,...p},ref:t,onMouseDown:u,onClick:m,onDoubleClick:g,onContextMenu:f,children:a})})})),c="layout-content",d="layout-full",p="layout-margin-right",u="hide-scrollbar",m="layout-column",g=a.forwardRef((function(e,t){return(0,s.jsx)(i().A,{name:"PageLayoutContent",children:(0,s.jsx)("div",{className:n()(c,e.className),style:e.style,ref:t,children:e.children})})}));function f(e){return(0,s.jsx)(i().A,{name:"PageLayoutFull",children:(0,s.jsx)("div",{className:d,style:e.style,children:e.children})})}function v(e){return(0,s.jsx)(i().A,{name:"PageLayoutMarginRight",children:(0,s.jsx)("div",{className:p,style:{...e.style,pointerEvents:"none"},children:e.children})})}function y(e){return(0,s.jsx)(i().A,{name:"PageLayoutColumn",children:(0,s.jsx)("div",{className:n()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function h(e){return(0,s.jsx)(i().A,{name:"PageLayoutTwoColumn",children:(0,s.jsxs)(y,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},820579:(e,t,o)=>{o.r(t),o.d(t,{arrowLineDownIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,o(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},a=(0,o(340498).wt)("arrowLineDown",n)},826693:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,notionTemplateIcon:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},i=(0,o(340498).wt)("notionTemplate",a)},859384:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 2.99 13.88 13.88",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,n.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},i=(0,o(340498).wt)("compose",a)},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>i,Wc:()=>n,pF:()=>r,vS:()=>a});const n="loadingLocalImage",a="uploading",i="downloading",r="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:r}}}const l=s},879526:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,infoCircleFillIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 0-1.6 0 .8.8 0 0 0 1.6 0"})},a=(0,o(340498).wt)("infoCircleFill",n)},890409:(e,t,o)=>{o.d(t,{Ah:()=>y,Dk:()=>g,Iv:()=>v,SF:()=>f,YO:()=>k,_f:()=>M,c_:()=>u,dW:()=>S,gW:()=>m,sp:()=>_,vN:()=>h});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),a=()=>o(973647),i=()=>o(534177),r=()=>o(842599),s=()=>o(239381),l=()=>o(179034),c=()=>o(798880),d=()=>o(201980),p=()=>o(241319);function u(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function S(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function k(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function b(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:r,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=a().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const a=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(r),spaceId:l,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:r,typecheckContextValues:n}),formula_return_type:a.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:r,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:r,typecheckContextValues:n})}(0,i().HB)(c.type)}}function M(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig();let c,d=[];const p=null==l?void 0:l.collection,u=null==l?void 0:l.properties;if((0,i().O9)(p)&&(0,i().O9)(u)&&u.length>0){const e=r(p),g=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(g)&&(d=u.map((e=>{var t;return(null===(t=g[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==l?void 0:l.values;if(n&&(0,i().O9)(f)){c=[];for(const e of u){var m;const i=null===(m=f[e])||void 0===m?void 0:m.value;if(!i)continue;const l=b({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=b({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,p={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},u=o.getConfig();if(!(0,i().O9)(u))return p;if((0,i().O9)(u.target))if("formula"===u.target.type&&(0,i().O9)(u.target.value)){if(p.targetData={type:"formula",numUserFormulaTargets:(0,d().Fbh)(u.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(u.target.value).length},a){const e=b({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:u.target.value,featureGates:l});e&&(p.formula_stats??=[],p.formula_stats.push(e))}}else if("property"===u.target.type&&(0,i().O9)(u.target.propertyId)&&(0,i().O9)(u.target.collectionPointer)){const e=s(u.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(p.targetData={type:"property",propertyType:null===(m=t[u.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=u.notification_message)||void 0===t?void 0:t.value)&&(p.messageCharacterCount=(0,d().FAw)(u.notification_message.value),a)){const e=b({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:u.notification_message,featureGates:l});e&&(p.formula_stats??=[],p.formula_stats.push(e))}return p}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,a,s,l,p,u;const{automationActionModel:m,formulaAnalyticsModule:g,formulasModule:f,formulaTypecheckContextValues:v,getRecordModel:y,featureGates:h}=e,S=m.getConfig();if(!(0,i().O9)(S))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const k=Object.fromEntries(Object.entries(S||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:M,cc:_,bcc:w}=S,C=[...(null==M||null===(t=M.value)||void 0===t?void 0:t.value)||[],...(null==_||null===(o=_.value)||void 0===o?void 0:o.value)||[],...(null==w||null===(a=w.value)||void 0===a?void 0:a.value)||[]],x=[...(0,d().Fbh)(C).map((e=>y({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,r().C3)((0,d().k4p)(C))],A=n().Tr(x.map((e=>e.split("@")[1]))),I=[null===(s=S.to)||void 0===s?void 0:s.value,null===(l=S.cc)||void 0===l?void 0:l.value,null===(p=S.bcc)||void 0===p?void 0:p.value,null===(u=S.reply_to)||void 0===u?void 0:u.value,S.from_name,S.email_subject,S.email_body].map((e=>{if(f&&(0,i().O9)(e))return b({formulaAnalyticsModule:g,formulasModule:f,getRecordModel:y,formulaTypecheckContextValues:v,spaceId:m.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:k,formula_stats:I,recipient_domains:A,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:c}=e,d=t.getConfig(),u=[],m=[],g=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,s().y5)(d.target.id);if("action"===t.source){const t=(0,p().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(r,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=l(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(u.push(s.type),a&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=b({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:e.value,featureGates:c});o&&g.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:g,property_types:u,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=b({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:l,formulaTypecheckContextValues:u,getRecordModel:m,featureGates:g}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function _(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:c,simpleFormulasModule:d,source:p}=e,u=[],m=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const l of t.getActionPointers()){const e=s(l);(0,i().O9)(e)&&u.push(M({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:c,simpleFormulasModule:d}))}const g=[];let f,v,y;if(t.isEventType()){var h;const e=t.getEventConfiguration(),o=s(t.getParentPointer());f=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(h=n.source)||void 0===h?void 0:h.type)){const e=s(n.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(y=null==e?void 0:e.parent_id),v=null==n?void 0:n.source.pointer.id}const a=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(a)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&g.push({type:"page"}),"any"===o.type)g.push({condition:"any",type:"property"});else if("none"===o.type)g.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const r=null===(o=a[e.property])||void 0===o?void 0:o.type;(0,i().O9)(r)&&(t.push({type:r,operator:e.filter.operator}),n.push(r))})),g.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())g.push({type:"button"});else if(t.isRecurrenceType()){var S;g.push({type:"recurrence",frequency:null===(S=t.getTrigger().recurrence)||void 0===S?void 0:S.frequency})}else(0,i().HB)(t);return{automation_actions:u,automation_id:t.id,automation_triggers:g,collection_id:f,collection_view_id:v,collection_view_block_id:y,builder_type:o,source:p}}},926010:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>P,openHelpMeWriteGenericPopup:()=>H,toggleInitialPrompt:()=>T});var n=()=>o(242422),a=()=>o(908006),i=()=>o(925193),r=()=>o(206267),s=()=>o(534177),l=()=>o(559506),c=()=>o(749804),d=()=>o(901444),p=()=>o(496603),u=()=>o(286088),m=()=>o(102586),g=()=>o(301421),f=()=>o(148832),v=()=>o(502438),y=()=>o(693202),h=()=>o(972435),S=()=>o(969197);function k(e,t=h().A.getIntl()){if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const n=null===(o=e.steps)||void 0===o?void 0:o[0],a="text"===(null==n?void 0:n.type)&&n.prefilledValue;return a?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:a}):""}if(!(0,m().US)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,s().HB)(e.key)}}function b(){const e=y().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,n=o.getRecordStoreUIRoot(),a=g().n.findNodeFromStore(o),i=(0,S().T)(o),r=null==i?void 0:i.getRecordStoreUIParent(),s=(0,u().K3)(n),l=i&&i instanceof f().B&&i!==n?i:void 0,c=l??a;if(!(n&&n instanceof f().B&&c))return;return{type:"cursor",textSelection:t,currentPage:n,currentBlock:l,origin:c,currentParent:r,scrollerStore:s,isPageTitle:n.id===o.id}}var M=()=>o(68465),_=()=>o(481292),w=()=>o(697393),C=()=>o(765957),x=()=>o(295169),A=()=>o(525569),I=()=>o(272200);function P(e,t=!0){t&&function(e,t){if((0,u().Ku)(e),!("assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;a().default.afterNextFlush((()=>(0,d().setMultiSelection)({multiSelection:e})))}}(e,A().default.state),A().default.setState({type:"closed"})}async function T(e){const{environment:t,from:a}=e;let{context:r,prefilledValue:s,sessionId:d}=e;const{assistantDependency:m}=await Promise.resolve().then(o.bind(o,650829)),g=await m.load();if(!(await g.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let h={type:"closed"};if("closed"===A().default.state.type){if(!r&&v().default.state.stores.length>0){const e=y().default.state;r="empty"===e.mode?function(){const{stores:e}=v().default.state,t=e[0],o=p().HV(e),n=t?t.getRecordStoreUIRoot():void 0;if(n&&n instanceof f().B&&o)return{type:"blockSelection",stores:e,currentPage:n,origin:o,scrollerStore:(0,u().K3)(n)}}():(0,_().k)(e.multiSelection)?b():function(){const{stores:e}=v().default.state,t=y().default.state,o="empty"!==t.mode?t.multiSelection:void 0,n="empty"!==t.mode?t.multiSelection.start.store:void 0;let a=n?n.getRecordStoreUIRoot():void 0;if(!(a instanceof f().B)){let e,t=null==n?void 0:n.getRecordStoreUIParent();for(;null!=t;)t instanceof f().B&&(e=t),t=t.getRecordStoreUIParent();e&&(a=e)}if(o&&a&&a instanceof f().B){const t=(0,S().T)(o.end.store),n=null==t?void 0:t.getRecordStoreUIParent(),i=(0,u().K3)(a);if(t&&n)return{type:"textSelection",stores:e,textSelection:o,currentPage:a,origin:t,endBlock:t,endBlockParent:n,scrollerStore:i}}}()}r&&(s||(s=""),d||(d=(0,i().gC)()),h={type:"assistantCompletionPopup",stage:"initialPrompt",context:r,from:a,prefilledValue:s,sessionId:d,loading:!1,hasErrored:!1},C().default.state.sidebarSpaceStore&&l().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:C().default.state.sidebarSpaceStore.id,id:d,metadata:{from:a}}}))}A().default.setState(h),function(e){const{environment:t,promptForAnalytics:o}=e,{state:a}=A().default;if("assistantCompletionPopup"===a.type&&"results"!==a.stage){n().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||(0,c().I)({environment:t});const e=a.sessionId,i=x().default.getSessionContext(e);I().trackAICompletionPopupOpen(t,{session_id:a.sessionId,prompt_key:(null==o?void 0:o.key)??"unknown",from:a.from,sessionContext:i}),(0,w().V)({dismissed:!1,environment:t})}}(e)}function H(e){const{title:t,environment:o,prefilledValue:n,from:a}=e,i=b();if(!i)return;let l;if((0,s().O9)(t)){const e=t?(0,M().gB)({customPrompt:n??t,isPageEmpty:!0}):M().am;l={promptForAnalytics:e,prefilledValue:k(e)}}else l={prefilledValue:n,promptForAnalytics:void 0};T({environment:o,from:a??"page_menu",sessionId:r().JW(),context:i,...l})}},937199:(e,t,o)=>{o.d(t,{LH:()=>i,Op:()=>a,bi:()=>l,sf:()=>s,v$:()=>r});o(16280);var n=o(296540);const a=(0,n.createContext)(null);function i(){const e=(0,n.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function r(){return(0,n.useContext)(a)}a.displayName="BaseLayoutEditorContext";const s=(0,n.createContext)(null);function l(){const e=(0,n.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},951340:(e,t,o)=>{o.d(t,{DC:()=>s,NI:()=>r});o(898992),o(354520),o(581454);var n=()=>o(837384),a=()=>o(255591),i=()=>o(228271);function r({persona:e,defaultToLife:t}){if(!e)return;if(e in a().bJ)return e;const o={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:t?"life":void 0,unfilled:t?"life":void 0,undefined:t?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==o?void 0:o[e])??void 0}function s(e,t){const o=r({persona:t,defaultToLife:!0});return(o?null==l?void 0:l[o]:[]).filter((t=>(0,i().vc)(t,e)))}const l={...a().PY,design:[n().kx.designSprint,n().kx.designPortfolio],product:[n().kx.productSpec,n().kx.productWiki,n().kx.visionAndStrategy],marketing:[n().kx.blogEditorialCalendar,n().kx.socialMediaCalendar,n().kx.presentation],hr:[n().kx.companyHome,n().kx.employeeBenefits,n().kx.peopleDirectory],sales:[n().kx.salesWiki,n().kx.presentation,n().kx.oneOnOneNotes],support:[],life:[]}},966759:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(476492),a=()=>o(175213);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:r,property:s,...l}=e,c=(0,n().sl)(o)||{};(0,a().G)(t,{property:s,property_type:i,from:r,...l,...c})}},975318:(e,t,o)=>{o.d(t,{D:()=>w});o(898992),o(823215),o(354520),o(581454);var n=o(296540),a=()=>o(726637),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),l=()=>o(584262),c=()=>o(69708),d=()=>o(160568),p=()=>o(557281),u=()=>o(231297),m=()=>o(284371),g=o(474848);const f=n.memo((function(e){const{prefix:t,collectionName:o}=e,n=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:m().Wy.medium,color:e.text.secondary,paddingInlineStart:8,paddingInlineEnd:8},databaseTitle:{...m().RC}})),[]);return(0,g.jsxs)("div",{style:n.container,children:[t,(0,g.jsxs)("span",{style:n.databaseTitle,children:[" ",o]})]})}));var v=()=>o(492414),y=()=>o(722872);const h=n.memo((function(e){const t=(0,i().v3)(),a=(0,c().tz)(),r=(0,s().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),l=(0,n.useCallback)((()=>{o(148024).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,g.jsx)(o(97294).N,{href:e.href,external:!0,style:r.link,onClick:l,children:(0,g.jsx)(o(285790).A,{icon:o(406533).questionMarkCircleIcon,style:r.button,iconStyle:r.icon,ariaLabel:a.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var S=()=>o(763996),k=()=>o(419357),b=()=>o(939740),M=()=>o(89924);const _=(0,c().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),w=n.memo((function(e){const{collectionStore:t,isOverlay:i,onEmptyEnter:l,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,locked:m,onTemplateClick:f}=e,[v,h]=(0,n.useState)(""),S=(0,r().uB)(void 0,o(970585).A),k=(0,r().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),b=(0,r().K8)((()=>k.every((e=>e.isReady()))),[k]),_=(0,r().K8)((()=>i&&null!=v&&v.length?(0,o(778078).Ay)(v,k,(e=>String(e.getProperties().title||""))):k),[k,v,i]),w=(0,s().IS)((e=>({container:{fontSize:14,padding:a().A.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...a().A.isMobile&&{background:e.background.primary,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[]);if(!b)return null;if(i){const e=k.length>6,n=a().A.isMobile?{menuType:y().gu.Modal,title:(0,g.jsx)(c().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"})}:{menuType:y().gu.Popup,width:360};return(0,g.jsxs)(o(404277).A,{...n,header:(0,g.jsx)(C,{collectionStore:t}),children:[0===k.length?(0,g.jsx)(M().A,{children:(0,g.jsx)("div",{style:w.container,children:(0,g.jsx)(c().sA,{defaultMessage:"Create a reusable page template for this database.",id:"database.emptyTemplatesList.info"})})}):void 0,e?(0,g.jsx)(x,{templateInputValue:v,setTemplateInputValue:h}):null,(0,g.jsx)(A,{collectionStore:t,onEmptyEnter:l,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:i,locked:m,onTemplateClick:f,menuListStore:S,templateInputValue:v,filteredTemplatePageStores:_,draggable:!(e&&v)})]})}return(0,g.jsx)(A,{collectionStore:t,onEmptyEnter:l,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:i,locked:m,onTemplateClick:f,menuListStore:S,templateInputValue:v,filteredTemplatePageStores:_,draggable:!0})})),C=n.memo((function(e){const{collectionStore:t}=e,n=(0,c().tz)(),i=(0,r().K8)((()=>(0,o(697650).getCollectionNameOrDefault)({collectionStore:t,intl:n})),[t,n]),l=(0,s().IS)((()=>({container:{marginTop:6}})),[]);return a().A.isMobile?null:(0,g.jsx)(o(678553).Ay,{style:l.container,title:(0,g.jsx)(f,{prefix:(0,g.jsx)(c().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:i}),right:(0,g.jsx)(h,{helpButtonContext:"collection_templates_menu",href:(0,o(232930).x)("guides.databaseTemplates")})})})),x=n.memo((function(e){const{templateInputValue:t,setTemplateInputValue:r}=e,{isAndroid:l}=(0,i().Y0)(),d=(0,c().tz)(),p=(0,n.useCallback)((e=>r(e.currentTarget.value)),[r]),u=(0,s().IS)((()=>({container:{margin:a().A.isMobile?0:"10px 0"},input:{...l&&{borderBottom:"none"}}})),[l]);return(0,g.jsx)("div",{style:u.container,children:(0,g.jsx)(k().Ay,{value:t,focusInitial:!a().A.isMobile||void 0,placeholder:d.formatMessage(_.filterPlaceholder),showClearButton:!0,inputLeft:(0,g.jsx)(k().Zf,{icon:o(344417).u}),onChange:p,style:u.input})})})),A=n.memo((function(e){const{filteredTemplatePageStores:t,draggable:s,collectionStore:c,onEmptyEnter:m,onEmptyPageClick:f,onCancelClick:y,canConfigureCollection:h,isOverlay:k,locked:_,onTemplateClick:w,menuListStore:C,templateInputValue:x}=e,A=(0,i().v3)(),P=(0,n.useContext)(o(908201).p2),T=(0,n.useContext)(o(110525).n),H=(0,r().K8)((()=>(0,o(50764).E)(A)),[A]),B=(0,n.useCallback)((e=>{C.unsetFocus(),u().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:A,canUndo:!0,perform:t=>p().lU({collectionStore:c,newTemplateIds:e,transaction:t})})}),[A,c,C]),D=(0,n.useCallback)((()=>{var e;H&&(m(),d().ki(A,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:c.id,collection_view_id:null==P||null===(e=P.collectionViewStore())||void 0===e?void 0:e.id}))}),[A,c,m,P,H]),E=(0,n.useCallback)((e=>{H&&(f(e.event),d().ki(A,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,...P&&(0,o(476492).sl)(P)}))}),[H,P,A,f]),R=(0,n.useCallback)((()=>{var e;if(!H)return;const{performResult:t}=u().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:A,canUndo:!0,perform:e=>p().bI({environment:A,collectionStore:c,transaction:e,title:x})});if(t){const{mainEditorCurrentBlockStore:e}=o(765957).default.state,n=e?(0,v().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:l().y8.Create}):(0,v().Ay)({store:t,fullyQualified:!1,pageVisitSource:l().y8.Create});T?T(n):(0,o(577142).navigate)({environment:A,url:n})}d().er(A,{collection_id:c.id,collection_view_id:null==P||null===(e=P.collectionViewStore())||void 0===e?void 0:e.id}),null==y||y()}),[H,A,c,P,x,y,T]),V=(0,n.useMemo)((()=>({key:"create-template",render:e=>(0,g.jsx)(I,{isOverlay:k,locked:_,menuListItemProps:e}),action:R})),[R,k,_]),j=(0,r().K8)((()=>{var e;return null==P||null===(e=P.defaultPageTemplateStore.state)||void 0===e?void 0:e.id}),[P]),N=(0,r().K8)((()=>({key:"empty",render:e=>0===t.length||""!==x?null:(0,g.jsx)(S().K,{collectionStore:c,canConfigureCollection:h,isOverlay:k,templateStore:void 0,isMobile:Boolean(a().A.isMobile),locked:_||!h,draggable:!0,isDefault:void 0===j,onCancelClick:y,...e}),action:E})),[h,c,j,E,k,_,y,x,t.length]),L=(0,n.useCallback)((e=>{const t=e.getAutomationStore(),i=null!=t&&t.isActive()?t.getRecurrence():void 0,r=t&&!t.canEdit(),l="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),d={key:e.id,render:t=>(0,n.createElement)(S().K,{...t,key:e.id,isOverlay:k,collectionStore:c,canConfigureCollection:h,templateStore:e,isMobile:Boolean(a().A.isMobile),locked:_,onCancelClick:y,draggable:s,isDefault:j===e.id,recurrence:i,recurrenceDisabled:l,recurrenceButtonDisabled:r}),action:t=>{H&&w({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(518736).D8)(c.getSpaceStore())})}};return d}),[h,H,c,j,s,k,_,y,w]),U=(0,r().K8)((()=>{const e=t.map((e=>e.id)),n=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const n=t.children.slice(0,t.children.length-1),i=t.children[t.children.length-1];return(0,g.jsx)(M().A,{...t,disableDesktopPadding:!k,disableMobileBorders:!0,children:(0,g.jsxs)(g.Fragment,{children:[a().A.isMobile||_||!h?n.map(((e,t)=>n[t])):(0,g.jsx)(o(439264).Ay,{direction:"vertical",keys:e,disabled:!s,renderKey:t=>n[e.indexOf(t)],onDrop:B}),i]})})},items:[...t.map(L),N]}:null,h?{key:"create-template",render:e=>(0,g.jsx)(M().A,{topBorder:k,disableDesktopPadding:!k,disableMobileBorders:!0,...e}),items:[V]}:null];return n.filter((e=>null!==e))}),[t,L,N,h,V,k,_,s,B]);return(0,g.jsx)(b().Ay,{type:b().Oh.Vertical,store:C,sections:U,onEmptyEnter:D,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),I=n.forwardRef((function(e,t){const{menuListItemProps:n,isOverlay:a,locked:i}=e,r=(0,g.jsx)(c().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return a?(0,g.jsx)(o(274652).o,{title:r,color:"secondary",...n}):(0,g.jsx)(o(286611).J,{title:r,icon:(0,o(617668).plusIcon)(),type:"new_template",format:a?"collection-overlay":"page-menu-item",locked:i,...n})}))},982615:(e,t,o)=>{o.d(t,{$:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("checkmark",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})}}]);