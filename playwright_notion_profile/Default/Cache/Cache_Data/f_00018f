"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,43795,71204,94495],{43371:u=>{u.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},175213:(u,e,D)=>{D.d(e,{G:()=>n});var t=()=>D(314529),o=()=>D(242422);function n(u,e){(0,t().DO_NOT_USE_trackLegacy)(u,"delete_property",e),o().default.logEvent("delete_property")}},241319:(u,e,D)=>{D.d(e,{y:()=>n});D(898992),D(672577);var t=()=>D(534177),o=()=>D(239381);function n(u){var e;const{actionModels:D,id:n}=u,r=(0,o().y5)(n),a="action"===r.source?D.find((u=>u.id===r.action_id)):void 0,i=(0,t().O9)(a)&&a.isType("create_page")?null===(e=a.getConfig())||void 0===e?void 0:e.collection:void 0;return{automationValueInfo:r,collectionPointer:i,actionModel:a}}},299177:(u,e,D)=>{D.d(e,{A:()=>n});class t extends(()=>D(757695))().Store{getInitialState(){return{}}}const o=new t;D(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",o);const n=o},390527:(u,e,D)=>{D.r(e),D.d(e,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>k,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>g,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>B,MAX_RECURRENCE_INTERVAL:()=>m,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>f,RRULE_WEEKDAYS_MAP:()=>E,adjustedStartDateIfPossible:()=>h,areRecurrenceSchedulesEqual:()=>N,convertFromUnpersistedRecurrenceConfig:()=>I,convertToUnpersistedRecurrenceConfig:()=>O,getFormattedEndCondition:()=>x,getFormattedNextRecurrenceTime:()=>S,getNewEndTimestamp:()=>R,getNextDateUtc:()=>T,getRecurrenceAfter:()=>M,isRunningBetweenMidnightAnd3AM:()=>b,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>v,templateAncestorsViolateRecurrenceNesting:()=>A});D(898992),D(354520),D(581454);var t=()=>D(906745);D(944114);function o(u,...e){if(0===e.length)return u.map((u=>[u]));const D=[];for(const t of u)D.push(...o(e[0],...e.slice(1)).map((u=>[t,...u])));return D}var n=()=>D(496603),r=()=>D(534177),a=()=>D(720665),i=()=>D(597777),l=()=>D(869190),c=()=>D(416504),s=()=>D(402390);class d extends(()=>D(896346))().p3{constructor(u,e){super(u,e)}after(u,e){return super.after(u,e)}}var F=()=>D(912720);const p=(0,D(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),C={day:d.DAILY,week:d.WEEKLY,month:d.MONTHLY,year:d.YEARLY},E={MO:d.MO,TU:d.TU,WE:d.WE,TH:d.TH,FR:d.FR,SA:d.SA,SU:d.SU},m=99,f=999;function y(u){return(0,a().Et)(u)&&Number.isInteger(u)&&u>0&&u<=m}function _(u){return(0,a().Et)(u)&&Number.isInteger(u)&&u>0&&u<=f}function v(u){const{start_date:e,frequency:D,interval:t,weekdays:n,timezone:a,hour:l,minute:c}=u,s="week"===D&&n?n.map((u=>E[u])):void 0,F={};return(0,r().O9)(u.end_condition)&&("date"===u.end_condition.type?F.until=(0,i().eU)(u.end_condition.end_at):"number"===u.end_condition.type?F.count=u.end_condition.number_of_occurrences:(0,r().HB)(u.end_condition)),"month"===u.frequency&&(0,r().O9)(u.monthly_restriction)&&("monthdays"===u.monthly_restriction.type?F.bymonthday=u.monthly_restriction.monthdays:"weekdays_in_month"===u.monthly_restriction.type?F.byweekday=o(u.monthly_restriction.weekdays,u.monthly_restriction.week_numbers).map((([u,e])=>E[u].nth(e))):(0,r().HB)(u.monthly_restriction)),new d({freq:C[D],dtstart:(0,i().eU)(e),interval:t,byweekday:s,tzid:a,byhour:l??0,byminute:c??0,bysecond:0,...F})}const B=1,g=1;function A(u){var e;if(0===u.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const D=u.filter((u=>{var e;return"day"===(null===(e=u.getRecurrence())||void 0===e?void 0:e.frequency)})),t=u.length,o=null===(e=u[0].getRecurrence())||void 0===e?void 0:e.frequency,n=t>B,r=D.length>=g;return{violatesConstraint:n||r,templateNestingExceedsMaxDepth:n,ancestorHasDailyTemplate:r,nestedDepthOfAutomationAncestors:t,immediateAncestorRecurrenceType:o}}function h(u){var e;const{recurrence:D,afterDate:o}=u;if("number"===(null===(e=D.end_condition)||void 0===e?void 0:e.type)||D.start_date>=o)return D;let n=t().c9.fromMillis(D.start_date,{zone:"utc"});const r=t().c9.fromMillis(o,{zone:"utc"});switch(D.frequency){case"year":{const u=Math.floor(r.diff(n,"years").years/D.interval);n=n.plus({years:u*D.interval});break}case"month":{const u=Math.floor(r.diff(n,"months").months/D.interval);n=n.plus({months:u*D.interval});break}case"week":{const u=Math.floor(r.diff(n,"weeks").weeks/D.interval);n=n.plus({weeks:u*D.interval});break}case"day":{const u=Math.floor(r.diff(n,"days").days/D.interval);n=n.plus({days:u*D.interval});break}}return{...D,start_date:(0,i().DH)(n.toMillis())}}function M(u){const{recurrence:e,afterDate:D}=u;if((0,F().wt)(e)){const u=(0,i().l1)(D);return e.start_date>=u?new Date(e.start_date):void 0}{const u=v(h({recurrence:e,afterDate:D})).after((0,i().eU)(D));if(!u)return;return(0,i().h1)(u)}}function b(u){return 0===u.hour||1===u.hour||2===u.hour}function T(u){return v(u).after((0,i().eU)((0,i().Rz)()))||void 0}function S(u){const{recurrence:e,intl:D}=u,o=T(I(e));if(!o)return;const n=b(e),r=t().c9.fromJSDate(o).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,s().H)(D)).setZone(e.timezone),a=(0,l().Yq)({date:r,dateFormat:"relative",allowRelativeDates:!0,intl:D,shortenDate:!0});if(n)return D.formatMessage(p.dateBetweenMidnightAnd3AM,{date:a});{let u=r.toLocaleString(t().c9.TIME_SIMPLE);return e.timezone!==(0,c().P)()&&(u+=` ${r.toFormat("ZZZZ")}`),D.formatMessage(p.dateAtTime,{date:a,time:u})}}function x(u,e){return(0,r().O9)(u)?"number"===u.type?e.formatMessage(p.numberEndConditionDescription,{number:u.number_of_occurrences}):"date"===u.type?(0,l().Yq)({date:t().c9.fromMillis(u.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:e,shortenDate:!0}):void(0,r().HB)(u):e.formatMessage(p.noEndCondition)}const k=100;function O(u){return{...u,start_date:(0,i().l1)(u.start_date),end_condition:u.end_condition?"number"===u.end_condition.type?u.end_condition:"date"===u.end_condition.type?{type:"date",end_at:(0,i().l1)(u.end_condition.end_at)}:(0,r().HB)(u.end_condition):void 0}}function R(u,e,D){return u.plus(D-e)}function w(u,e){const D=t().c9.fromMillis(e.end_at).set({hour:u.hour??0,minute:u.minute??0});return{type:"date",end_at:(0,i().Rz)(D.toJSDate())}}function I(u){return{...u,start_date:(0,i().Rz)(new Date(u.start_date)),end_condition:u.end_condition?"number"===u.end_condition.type?u.end_condition:"date"===u.end_condition.type?w(u,u.end_condition):(0,r().HB)(u.end_condition):void 0}}function N(u,e){const D=n().fN(u,(u=>void 0!==u)),t=n().fN(e,(u=>void 0!==u));return n().n4(D,t)}},422540:(u,e,D)=>{D.d(e,{$0:()=>m,Fx:()=>A,Ge:()=>p,I3:()=>d,Kj:()=>B,PP:()=>h,TK:()=>M,Yy:()=>s,aE:()=>b,cQ:()=>g,kH:()=>C,m7:()=>F,nq:()=>_,nv:()=>f,tj:()=>E});D(898992),D(354520),D(737550);var t=()=>D(496603),o=()=>D(534177),n=()=>D(381283),r=()=>D(898244),a=()=>D(651124),i=()=>D(349835),l=()=>D(390066);const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},s={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(u){return Boolean(c[u.type]&&!(0,r().UU)(u)&&(!(0,r().$M)(u)||void 0===(0,r().om)(u)))}function F(u){const{collectionFormat:e,collectionSchema:D,filter:n,sort:i,sourcePropertyIds:c}=u,s=(c??(0,o().uv)(D)).filter(((e,t,o)=>{const a=D[e];return!(!a||!d(a))&&(("relation"!==a.type||!u.restrictCrossSpace||!(0,r().o2)(u.spaceId,a))&&(!n||n([e,a],t,D)))}));if(0===s.length)return[];if(!e||!1===i)return s;const F=(0,l().L)(e,D,void 0,a().jf.Page).collection_page_properties||[];return t().Ul(s,(u=>F.findIndex((e=>e.property===u))))}function p(u){const{collectionFormat:e,collectionSchema:D,sort:r}=u,i=(0,o().uv)(D).filter(((u,e,t)=>{const o=D[u];return!(!o||!(0,n().J)(o))}));if(0===i.length)return[];if(!e||!1===r)return i;const c=(0,l().L)(e,D,void 0,a().jf.Page).collection_page_properties||[];return t().Ul(i,(u=>c.findIndex((e=>e.property===u))))}function C(u){return u.type===i().M9.InvalidCharacter?{type:u.type,character:u.character}:u.type===i().M9.TokenExpected?{type:u.type,token:u.token}:u.type===i().uW.MissingSchemaPropertyOnThisRow||u.type===i().uW.MissingSchemaPropertyOnCollection?{type:u.type,collectionId:u.collectionId,property:u.property}:u.type===i().uW.ThisRowBlockPropertyMismatchCollection?{type:u.type,thisRowCollection:u.thisRowCollection}:u.type===i().uW.MissingContextVariable?{type:u.type,valueId:u.valueId}:u.type===i().uW.FunctionCallTooFewArguments?{type:u.type,numArguments:u.numArguments}:u.type===i().uW.FunctionCallUnexpectedArgument?{type:u.type,parameterIndex:u.parameterIndex}:u.type===i().uW.FunctionCallArgumentWrongType?{type:u.type,argumentType:u.argumentType,libraryFunctionName:u.libraryFunction.name,parameterIndex:u.parameterIndex}:u.type===i().uW.MissingDataDependencyBlock?{type:u.type,blockPointer:u.blockPointer,node:u.node}:u.type===i().uW.MissingDataDependencyPerson?{type:u.type,personPointer:u.personPointer}:u.type===i().uW.MemberPropertyMismatchCollection?{type:u.type,blockCollection:u.blockCollection}:u.type===i().uW.DownstreamParseFailure?{type:u.type,collectionId:u.collectionId,property:u.property}:u.type===i().uW.ContextVariableWrongType?{type:u.type,valueId:u.valueId,expectedType:u.expectedType,resultType:u.resultType}:u.type===i().uW.DisallowedValueType?{type:u.type,expressionValue:u.expressionValue,allowedValueTypes:u.allowedValueTypes}:u.type===i().uW.LibraryFunctionExecutionError?{type:u.type,error:u.error,libraryFunctionName:u.libraryFunction.name}:{type:u.type}}const E={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function m(u){return Boolean(E[u.type])}function f(u){const{collectionFormat:e,collectionSchema:D,filter:n,sort:i}=u,c=(0,o().uv)(D).filter(((u,e,t)=>{var o;const a=D[u];return!(!a||!E[a.type])&&((!(0,r().$M)(a)||null===(o=(0,r().om)(a))||void 0===o||!o.auto_update_on_edit)&&(!n||n([u,a],e,D)))}));if(0===c.length)return[];if(!e||!1===i)return c;const s=(0,l().L)(e,D,void 0,a().jf.Page).collection_page_properties||[];return t().Ul(c,(u=>s.findIndex((e=>e.property===u))))}const y={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(u){return y[u.type]}const v={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function B(u){return v[u.type]}function g(u){return 0===u}function A(u){return function(u){return"button_block"===u||"button_property"===u}(u)}function h(u){const{property:e,collectionSchema:D}=u;return!!D&&!D[e]}function M(u){const{collectionSchema:e,property:D,type:t}=u,o=null==e?void 0:e[D];return!o||("action"===t?!d(o):!E[o.type])}function b({automationTrigger:u,collectionSchema:e}){if("event"===(null==u?void 0:u.type)){const{pagesAdded:D,pagePropertiesEdited:t,source:n,relativeDate:r}=u.event;if(void 0===n)return!1;const a="some"===t.type&&t.some,i="all"===t.type&&t.all;if((a||i||[]).some((u=>h({collectionSchema:e,property:u.property})||M({collectionSchema:e,property:u.property,type:"trigger"}))))return!1;const l="some"===t.type&&(!(0,o().O9)(t.some)||0===t.some.length),c="all"===t.type&&(!(0,o().O9)(t.all)||0===t.all.length);if(!D&&("none"===t.type||l||c)&&!r)return!1}else{if("recurrence"!==(null==u?void 0:u.type))return!1;if(!u.recurrence)return!1}return!0}},448801:(u,e,D)=>{D.d(e,{i:()=>o});D(944114),D(517642),D(658004),D(733853),D(845876),D(432475),D(515024),D(731698);var t=()=>D(371562);t();function o(u,e){const D=t().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(u,e);if(!D)return{beforeOps:{},removeOps:new Set};let o=[],n=[];for(const t in D)"_t"!==t&&("_"===t[0]?o.push(parseInt(t.slice(1),10)):1===D[t].length&&n.push({index:parseInt(t,10),value:D[t][0]}));const r={},a=new Set,i=[...u];o=o.sort(((u,e)=>u-e));for(let t=o.length-1;t>=0;t--){const u=o[t],e=i.splice(u,1)[0];a.add(e)}n=n.sort(((u,e)=>u.index-e.index));for(let t=0;t<n.length;t++){const u=n[t];r[u.value]=i[u.index],i.splice(u.index,0,u.value)}return{beforeOps:r,removeOps:a}}},478096:(u,e,D)=>{D.r(e);(0,D(852832).exposeDebugValue)("workflowTemplates",{getBuilderPipelineStage:D(338907).M})},482871:(u,e,D)=>{D.d(e,{z:()=>c});D(517642),D(658004),D(733853),D(845876),D(432475),D(515024),D(731698),D(898992),D(430670),D(581454);var t=()=>D(898244),o=()=>D(448801),n=()=>D(179034),r=()=>D(722101),a=()=>D(878710),i=(D(354520),()=>D(496603));function l(u){const{collectionContextStore:e,collectionViewStore:D,transaction:o}=u,l=D.getPageSortStore(),c=l.getValue(),s=e.groupsStore.getAllGroupStates(),d=function(u){const{pageSort:e,currentResults:D}=u;if(!e||e.length<=t().WF)return[];const o=e.filter((u=>!D.has(u)));return i().sb([...o.reverse(),...i().o8(e).reverse()]).slice(0,e.length-t().WF)}({pageSort:c,currentResults:new Set(s.flatMap((u=>u.resultsStore.state.map((u=>u.id)))))});for(const t of d)r().TF({parentStore:l,childToRemoveStore:(0,a().v3)(l,{table:n().ev,id:t}),transaction:o})}function c(u){const{resultIds:e,collectionViewStore:D,collectionContextStore:i,transaction:c}=u,s=D.getPageSortStore(),d=s.getValue()||[],{beforeOps:F}=(0,o().i)(d,e.slice(0,t().WF));for(const[t,o]of Object.entries(F))if(o){const u=(0,a().v3)(D,{table:n().ev,id:o});r().nc({parentStore:s,insertStore:(0,a().v3)(D,{table:n().ev,id:t}),beforeStore:u,transaction:c})}else{const u=e.findIndex((u=>u===t)),o=e[u-1],i=o?(0,a().v3)(D,{table:n().ev,id:o}):void 0;r().WH({parentStore:s,insertStore:(0,a().v3)(D,{table:n().ev,id:t}),afterStore:i,transaction:c})}l({collectionContextStore:i,collectionViewStore:D,transaction:c})}},491848:(u,e,D)=>{D.d(e,{w:()=>o});D(898992),D(672577);var t=()=>D(755199);function o({collectionContextStore:u,transaction:e}){const D="collectionTypedView"===u.contextType,o=u.databaseType,n=u.collectionStoresStore.state,r=n.find((u=>u.canEdit()||u.canEditCollection()||u.canEditContentOnly()))||n[0];!D&&r&&t().ee({transaction:e,databaseType:o,collectionId:r.id})}},546461:(u,e,D)=>{D.d(e,{EC:()=>g,To:()=>B,YC:()=>A,or:()=>v,u:()=>_});D(16280);var t=D(296540),o=()=>D(484714),n=()=>D(792485),r=()=>D(56366),a=()=>D(496506),i=()=>D(322867),l=()=>D(69708),c=()=>D(534177),s=()=>D(813297),d=()=>D(862292),F=()=>D(698331),p=()=>D(645873),C=()=>D(190019),E=()=>D(76190),m=D(474848);const f=new WeakMap,y=(0,t.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});y.displayName="AutomationContext";function _(u){const{automationStore:e,children:D,contextType:t}=u,_=(0,o().v3)(),v=(0,l().tz)(),{value:B}=(0,p().fJ)(d().T.formulas),{value:g}=(0,p().fJ)(s().QV.automationTypecheck),A=(0,E().n)(e),h=(0,n().S)(),M=(0,r().K8)((()=>{if(!B)return{error:new(i().N9)("Missing formulas dependency")};if(!g)return{error:new(i().N9)("Missing automation dependency")};const u=function(u){const{environment:e,automationStore:D,automationTypecheckModule:t,contextType:o,formulasModule:n,intl:r,isSubscribed:i,pageStore:l}=u,s=f.get(D);if(s)return s;{const u=new(a().ComputedStore)((()=>{const u=D.getTriggerType();let a=o;return(0,c().O9)(u)&&(0,F().x2)(u)&&(a=(0,F().H8)(u)),(0,C().Z)({environment:e,automationStore:D,automationTypecheckModule:t,contextType:a,formulasModule:n,intl:r,isSubscribed:i,pageStore:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return f.set(D,u),u}}({environment:_,automationStore:e,automationTypecheckModule:g,contextType:t,formulasModule:B,intl:v,isSubscribed:A,pageStore:"button_block"===t?null==h?void 0:h.pageStore:void 0});return u.state}),[_,e,g,t,B,v,A,null==h?void 0:h.pageStore]);return(0,m.jsx)(y.Provider,{value:{automationStore:e,typecheckResult:M,contextType:t,defined:!0},children:D})}function v(u){const{automationStore:e,children:D}=u,t=(0,r().K8)((()=>{var u;return null===(u=e.getTrigger())||void 0===u?void 0:u.type}),[e]);return(0,m.jsx)(_,{automationStore:e,contextType:(0,F().H8)(t??"event"),children:D})}function B(u){var e;return null===(e=f.get(u))||void 0===e?void 0:e.state}function g(){const u=t.useContext(y);if(!1===u.defined)throw new Error("No automation context found!");return u}function A(){return t.useContext(y)}},698331:(u,e,D)=>{D.d(e,{$X:()=>n,H8:()=>r,x2:()=>o});var t=()=>D(534177);function o(u){return"event"===u||"recurrence"===u}function n(u){const e=u.getTrigger();return(0,t().O9)(e)&&o(e.type)}function r(u){return"event"===u?"event":"recurrence"===u?"recurrence":void(0,t().HB)(u)}},766854:(u,e,D)=>{D.d(e,{H:()=>v,Q:()=>_});D(898992),D(672577);var t=()=>D(242422),o=()=>D(929219),n=()=>D(700500),r=()=>D(179034),a=()=>D(201980),i=()=>D(557281),l=()=>D(384944),c=()=>D(381678),s=()=>D(476492),d=()=>D(646736),F=()=>D(406792),p=()=>D(765957),C=()=>D(148832),E=()=>D(622811),m=()=>D(491848),f=()=>D(482871);function y(u,e,D){const o=(0,c()._)(u),n=null==o?void 0:o.id;if(!n||!D)return;if(!t().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(e.canAdmin())return;const r=e.getSpaceStore();return r&&(0,d().dp)(r,n).isMember()?[{role:"editor",type:"user_permission",user_id:n}]:void 0}function _(u){const{collectionContextStore:e,transaction:D}=u;return(0,m().w)({collectionContextStore:e,transaction:D}),v(u)}function v(u){var e,D,t;const{environment:c,collectionContextStore:d,groupsPointer:m,insertAtIndex:_,shouldCoerce:v,templateStore:B,transaction:g,from:A,tracker:h,inMemoryRecordCache:M,isKeyboard:b,title:T}=u,S=F().default.DO_NOT_USE_markLegacy("collections.add_item_lag");F().default.DO_NOT_USE_measureAfterNextFlushLegacy(S,{environment:c,getData:()=>({...s().kz(d),from:A.createBlock})});const x="collectionTypedView"===d.contextType,k=d.databaseType,O=d.collectionStoresStore.state,R=O.find((u=>u.canEdit()||u.canEditCollection()||u.canEditContentOnly()))||O[0],w=null===(e=p().default.state.sidebarSpaceStore)||void 0===e?void 0:e.id,I=p().default.state.currentUserSettingsStore,N=x&&k&&w&&I&&[...I.getAllPreferredCollections(w),...I.getPreferredCollectionsOfType(w,k)]||[];let V;const U=m[0];if("group_header"===A.createBlock&&"location"===U.value.type){const u=U.value.value;if(u){V=O.find((e=>e.id===u.id&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())))}}else V=function(u,e){for(const D of u){const u=e.find((u=>u.id===D&&(u.canEdit()||u.canEditCollection()||u.canEditContentOnly())));if(u)return u}}(N,O);const P=V??R,G=null==P?void 0:P.getSpaceId(),W=d.collectionViewStore(),H=d.getViewType(),L=l().Wv({environment:c,type:n().xd.page,inMemoryRecordCache:M,transaction:g,spaceId:G,tracker:h,permissions:y(c,P,G),properties:{title:(0,a().x9d)(T)}});if(!P||!W||!H)return{coercionSucceeded:!0,newStore:L};const z=null===(D=d.groupsStore.getGroupState(m))||void 0===D?void 0:D.groupUiParentStore;if(!z)return{coercionSucceeded:!0,newStore:L};const q=C().B.createChildStore(z,{table:r().ev,id:L.id});B&&o().A.state.online&&i().n5({title:"template",environment:c,store:L,templateStore:B,isKeyboard:b??!1,isCreateIn:!1,transaction:g,from:A.initCollection??"collection_group_actions"});const j=(0,E().j)({environment:c,store:L,collectionStore:P,collectionContextStore:d,groupsPointer:m,shouldCoerce:v,transaction:g}),Y=(null===(t=d.groupsStore.getGroupState(m))||void 0===t||null===(t=t.reducerResultStore.state)||void 0===t?void 0:t.blockIds)||[],K=void 0!==_?_:Y.length;if(d.permissionScopesStore.state.canEditContent||x){const u=[...Y.slice(0,K),q.id,...Y.slice(K)];(0,f().z)({resultIds:u,collectionViewStore:W,collectionContextStore:d,transaction:g})}return{coercionSucceeded:j,newStore:q}}},786702:(u,e,D)=>{D.d(e,{w:()=>n});var t=()=>D(726637),o=()=>D(651784);function n(u){const e=(0,o().parseRoute)({url:u,baseUrl:t().A.domainBaseUrl,publicDomainName:t().A.publicDomainName,isMobile:!1,protocol:t().A.protocol,currentUrl:void 0});return"page"===e.name?e.blockId:"team"===e.name?e.peekViewBlockId:void 0}},888325:(u,e,D)=>{function t(u){return`${u.table}:${u.id}`}D.d(e,{_:()=>t})},890409:(u,e,D)=>{D.d(e,{Ah:()=>m,Dk:()=>p,Iv:()=>E,SF:()=>C,YO:()=>_,_f:()=>B,c_:()=>d,dW:()=>y,gW:()=>F,sp:()=>g,vN:()=>f});D(16280),D(944114),D(898992),D(354520),D(803949),D(581454),D(737550);var t=()=>D(496603),o=()=>D(973647),n=()=>D(534177),r=()=>D(842599),a=()=>D(239381),i=()=>D(179034),l=()=>D(798880),c=()=>D(201980),s=()=>D(241319);function d(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:e})}function F(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:e})}function p(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:e})}function C(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:e})}function E(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:e})}function m(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:e})}function f(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:e})}function y(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:e})}function _(u,e){u.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:e})}function v(u){const{formulaAnalyticsModule:e,formulasModule:D,formulaTypecheckContextValues:t,getRecordModel:r,spaceId:i,value:l,featureGates:c}=u;if("formula"===l.type){if(!(0,n().O9)(l.value))return;const u=o().Q.unwrapOr(D.parseFormulaInputToAst(l.value),void 0);if(u){const o=D.addTypesToFormulaAST(u,{handleDataRequest:(0,a().zg)(r),spaceId:i,valueTypes:t,featureGates:c});return{...e.getFormulaAnalytics(u,{getRecordModel:r,typecheckContextValues:t}),formula_return_type:o.node.type,redacted_formula:e.getRedactedFormulaAsStringSync(u,{getRecordModel:r,typecheckContextValues:t})}}}else{if("simple"===l.type){if(!(0,n().O9)(l.value))return;return e.getSimpleFormulaAnalytics(l.value,{getRecordModel:r,typecheckContextValues:t})}(0,n().HB)(l.type)}}function B(u){const{automationActionModel:e,automationActionModels:D,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p,simpleFormulasModule:C}=u;return e.isType("complete_sprint")?{automation_action_id:e.pointer.id,type:"complete_sprint"}:e.isType("create_page")?function(u){const{automationActionModel:e,formulaAnalyticsModule:D,formulasModule:t,formulaTypecheckContextValues:o,getRecordModel:r,featureGates:a}=u,i=e.getConfig();let l,c=[];const s=null==i?void 0:i.collection,d=null==i?void 0:i.properties;if((0,n().O9)(s)&&(0,n().O9)(d)&&d.length>0){const u=r(s),p=null==u?void 0:u.getNormalizedSchema();(0,n().O9)(p)&&(c=d.map((u=>{var e;return(null===(e=p[u])||void 0===e?void 0:e.type)??"unknown"})));const C=null==i?void 0:i.values;if(t&&(0,n().O9)(C)){l=[];for(const u of d){var F;const n=null===(F=C[u])||void 0===F?void 0:F.value;if(!n)continue;const i=v({formulaAnalyticsModule:D,formulasModule:t,getRecordModel:r,formulaTypecheckContextValues:o,spaceId:e.spaceId,value:n,featureGates:a});i&&l.push(i)}}}return{automation_action_id:e.pointer.id,property_formula_stats:l,property_types:c,type:"create_page"}}({automationActionModel:e,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p}):e.isType("duplicate_blocks")?{automation_action_id:e.pointer.id,type:"duplicate_blocks"}:e.isType("modal_confirmation")?function(u){const{automationActionModel:e,formulaAnalyticsModule:D,formulasModule:t,formulaTypecheckContextValues:o,getRecordModel:r,featureGates:a}=u,i=e.getConfig(),l=[];if(t&&(0,n().O9)(i)&&i.text){const u=v({formulasModule:t,formulaAnalyticsModule:D,getRecordModel:r,formulaTypecheckContextValues:o,spaceId:e.spaceId,value:i.text,featureGates:a});u&&l.push(u)}return{automation_action_id:e.pointer.id,formula_stats:l,type:"modal_confirmation"}}({automationActionModel:e,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p}):e.isType("open_page")?{automation_action_id:e.pointer.id,type:"open_page"}:e.isType("query_collection")?{automation_action_id:e.pointer.id,type:"query_collection"}:e.isType("send_in_app_notification")?function(u){var e;const{automationActionModel:D,formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:i,simpleFormulasModule:l}=u,s={automation_action_id:D.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},d=D.getConfig();if(!(0,n().O9)(d))return s;if((0,n().O9)(d.target))if("formula"===d.target.type&&(0,n().O9)(d.target.value)){if(s.targetData={type:"formula",numUserFormulaTargets:(0,c().Fbh)(d.target.value.value).length,numFormulaContextTargets:l.getReferencedContextValueIds(d.target.value).length},o){const u=v({formulasModule:o,formulaAnalyticsModule:t,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:D.spaceId,value:d.target.value,featureGates:i});u&&(s.formula_stats??=[],s.formula_stats.push(u))}}else if("property"===d.target.type&&(0,n().O9)(d.target.propertyId)&&(0,n().O9)(d.target.collectionPointer)){const u=a(d.target.collectionPointer),e=null==u?void 0:u.getSchema();var F;(0,n().O9)(e)&&(s.targetData={type:"property",propertyType:null===(F=e[d.target.propertyId])||void 0===F?void 0:F.type})}if((0,n().O9)(null===(e=d.notification_message)||void 0===e?void 0:e.value)&&(s.messageCharacterCount=(0,c().FAw)(d.notification_message.value),o)){const u=v({formulasModule:o,formulaAnalyticsModule:t,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:D.spaceId,value:d.notification_message,featureGates:i});u&&(s.formula_stats??=[],s.formula_stats.push(u))}return s}({automationActionModel:e,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p,simpleFormulasModule:C}):e.isType("send_gmail_notification")?function(u){var e,D,o,a,i,s,d;const{automationActionModel:F,formulaAnalyticsModule:p,formulasModule:C,formulaTypecheckContextValues:E,getRecordModel:m,featureGates:f}=u,y=F.getConfig();if(!(0,n().O9)(y))return{automation_action_id:F.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const _=Object.fromEntries(Object.entries(y||{}).map((([u,e])=>{var D;return"formula"===(null==e?void 0:e.type)?[u,Boolean(null==e||null===(D=e.value)||void 0===D?void 0:D.value)]:"simple"===(null==e?void 0:e.type)?[u,Boolean(null==e?void 0:e.value)]:[u,Boolean(e)]}))),{to:B,cc:g,bcc:A}=y,h=[...(null==B||null===(e=B.value)||void 0===e?void 0:e.value)||[],...(null==g||null===(D=g.value)||void 0===D?void 0:D.value)||[],...(null==A||null===(o=A.value)||void 0===o?void 0:o.value)||[]],M=[...(0,c().Fbh)(h).map((u=>m({table:l().oo,id:u}))).map((u=>null==u?void 0:u.email)).filter(n().O9),...(0,r().C3)((0,c().k4p)(h))],b=t().Tr(M.map((u=>u.split("@")[1]))),T=[null===(a=y.to)||void 0===a?void 0:a.value,null===(i=y.cc)||void 0===i?void 0:i.value,null===(s=y.bcc)||void 0===s?void 0:s.value,null===(d=y.reply_to)||void 0===d?void 0:d.value,y.from_name,y.email_subject,y.email_body].map((u=>{if(C&&(0,n().O9)(u))return v({formulaAnalyticsModule:p,formulasModule:C,getRecordModel:m,formulaTypecheckContextValues:E,spaceId:F.spaceId,value:u,featureGates:f})})).filter(n().O9);return{automation_action_id:F.pointer.id,fields:_,formula_stats:T,recipient_domains:b,type:"send_gmail_notification"}}({automationActionModel:e,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p}):e.isType("slack_notification")?{automation_action_id:e.pointer.id,type:"slack_notification"}:e.isType("update_pages")?function(u){const{automationActionModel:e,automationActionModels:D,formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:i,featureGates:l}=u,c=e.getConfig(),d=[],F=[],p=[];if((0,n().O9)(c)&&(0,n().O9)(c.target)&&(0,n().O9)(c.properties)&&c.properties.length>0){let u;if("variable"===c.target.type){const e=(0,a().y5)(c.target.id);if("action"===e.source){const e=(0,s().y)({actionModels:D,id:c.target.id}).collectionPointer;if((0,n().O9)(e)){const D=i(e);u=null==D?void 0:D.getNormalizedSchema()}}else{if("global"!==e.source||"button_page"!==e.global)throw new Error("Failed loading property schema");{const e=(0,a().IV)(r,c.target.id);if("block"===(null==e?void 0:e.type.type)&&(0,n().O9)(e.type.collection)){const D=i(e.type.collection);u=null==D?void 0:D.getNormalizedSchema()}}}}else if("collection"===c.target.type){const e=i(c.target.collection);u=null==e?void 0:e.getNormalizedSchema()}(0,n().O9)(u)&&c.properties.forEach((D=>{const a=u[D];if((0,n().O9)(a)&&(d.push(a.type),o&&(0,n().O9)(c.values))){const u=c.values[D];if((0,n().O9)(u)&&(F.push({type:a.type,operator:u.action}),u.value)){const D=v({formulasModule:o,formulaAnalyticsModule:t,getRecordModel:i,formulaTypecheckContextValues:r,spaceId:e.spaceId,value:u.value,featureGates:l});D&&p.push(D)}}}))}return{automation_action_id:e.pointer.id,property_configs:F,property_formula_stats:p,property_types:d,type:"update_pages"}}({automationActionModel:e,automationActionModels:D,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p}):e.isType("define_variables")?function(u){const{automationActionModel:e,formulaAnalyticsModule:D,formulasModule:t,formulaTypecheckContextValues:o,getRecordModel:r,featureGates:a}=u,i=e.getConfig(),l=[];if(t&&(0,n().O9)(i)&&i.values)for(const n of Object.values(i.values))if(n.value){const u=v({formulasModule:t,formulaAnalyticsModule:D,getRecordModel:r,formulaTypecheckContextValues:o,spaceId:e.spaceId,value:n.value,featureGates:a});u&&l.push(u)}return{automation_action_id:e.pointer.id,formula_stats:l,type:"define_variables"}}({automationActionModel:e,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:d,getRecordModel:F,featureGates:p}):e.isType("http_request")?{automation_action_id:e.pointer.id,type:"http_request"}:e.isType("publish_site")?{automation_action_id:e.pointer.id,type:"publish_site"}:void(0,n().HB)(e)}function g(u){const{automationModel:e,builderType:D="sidebar",formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:l,simpleFormulasModule:c,source:s}=u,d=[],F=e.getActionPointers().map((u=>a(u))).filter(n().O9);for(const i of e.getActionPointers()){const u=a(i);(0,n().O9)(u)&&d.push(B({automationActionModel:u,automationActionModels:F,formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:l,simpleFormulasModule:c}))}const p=[];let C,E,m;if(e.isEventType()){var f;const u=e.getEventConfiguration(),D=a(e.getParentPointer());C=e.getParentId();const t=e.getEventConfiguration();if("collection_view"===(null===(f=t.source)||void 0===f?void 0:f.type)){const u=a(t.source.pointer);(null==u?void 0:u.parent_table)===i().ev&&(m=null==u?void 0:u.parent_id),E=null==t?void 0:t.source.pointer.id}const o=null==D?void 0:D.getNormalizedSchema();if((0,n().O9)(o)){const{pagesAdded:e,pagePropertiesEdited:D}=u;if(e&&p.push({type:"page"}),"any"===D.type)p.push({condition:"any",type:"property"});else if("none"===D.type)p.push({condition:"none",type:"property"});else{let u=[];"some"===D.type?u=D.some??[]:"all"===D.type&&(u=D.all??[]);const e=[],t=[];u.forEach((u=>{var D;const r=null===(D=o[u.property])||void 0===D?void 0:D.type;(0,n().O9)(r)&&(e.push({type:r,operator:u.filter.operator}),t.push(r))})),p.push({condition:D.type,property_configs:e,property_types:t,type:"property"})}}}else if(e.isButtonType())p.push({type:"button"});else if(e.isRecurrenceType()){var y;p.push({type:"recurrence",frequency:null===(y=e.getTrigger().recurrence)||void 0===y?void 0:y.frequency})}else(0,n().HB)(e);return{automation_actions:d,automation_id:e.id,automation_triggers:p,collection_id:C,collection_view_id:E,collection_view_block_id:m,builder_type:D,source:s}}},933371:(u,e,D)=>{D.d(e,{X:()=>t});const t=D(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},966759:(u,e,D)=>{D.d(e,{i:()=>n});var t=()=>D(476492),o=()=>D(175213);function n(u){const{environment:e,collectionContextStore:D,property_type:n,from:r,property:a,...i}=u,l=(0,t().sl)(D)||{};(0,o().G)(e,{property:a,property_type:n,from:r,...i,...l})}}}]);