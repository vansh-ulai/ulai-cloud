"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42056],{108414:(e,t,n)=>{n.d(t,{A:()=>i});class a extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const i=new a},159026:(e,t,n)=>{n.d(t,{Ay:()=>o,NJ:()=>a,d5:()=>i});n(898992),n(354520),n(581454),n(737550);let a=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),i=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class r extends(()=>n(757695))().Store{getInitialState(){return{inviteStage:i.closed,selection:a.workspace_member,order:[a.workspace_member,a.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:n(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:i.share_workspace,order:[a.workspace_member,a.page_guest],selection:a.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:i.request_workspace,order:[a.request_workspace_member,a.page_guest],selection:a.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const o=r},316189:(e,t,n)=>{n.d(t,{o:()=>S});n(16280);var a=()=>n(242422),i=()=>n(165358),r=()=>n(179034),o=()=>n(665344),s=()=>n(96689),l=()=>n(854150),c=()=>n(94830),m=()=>n(973647),u=()=>n(231297),d=()=>n(345913),p=()=>n(213477),v=()=>n(966152),g=()=>n(148832),f=()=>n(405269);async function S(e){var t,n;const{environment:S,item:w,useRecordCache:I,useMinimalTemplates:_,spaceStore:b,isOnboarding:y,from:h,type:T,initializeStore:k,teamStore:C,onSuccess:U,onError:x,isEmailShared:M}=e,P=I&&!_?w.previewRootId:w.rootId,E={id:P,spaceId:w.spaceId},R=new(g().B)(S,{table:r().ev,id:E.id,spaceId:E.spaceId});let q;y?q="onboarding":null!==(t=w.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?q="mobile_app":"homepage_team"===h&&(q="team_home");const A=await(0,f().oC)(S,P);let N;q&&(N={context:"",source:q,isListedTemplate:Boolean(A),isFirstPartyPaidTemplate:void 0!==A&&(0,c().Z1)(A),isEmailShared:M});let D=!1,O={type:"space",parent:{table:s().NX,id:b.id,spaceId:b.getSpaceId()}};if("inExistingStore"===T&&k){if(O={type:"block",parent:{table:r().ev,id:k.id,spaceId:k.getSpaceId()}},k.isEmptyPage()){const e=k.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(D=!0,O=(0,v().LT)(e))}}else"inTeam"===T&&C&&(O={type:"team",parent:{table:l().yK,id:C.id,spaceId:C.v("space_id")}});const G=a().default.checkGate({gateName:"use_local_duplication_for_onboarding"});N||i().log({level:"warning",from:"createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:w.id,template_block_id:w.rootId,target_space_id:b.id,public_template_name:w.name,isOnboarding:y,from:h,type:T}}});const L=a().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),V=!(0,o().Fe)(null===(n=N)||void 0===n?void 0:n.source)&&L||G&&"onboarding"===q,F="onboarding"===q,H=await(0,p().hh)({environment:S,sourceBlocks:[R],destination:O,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},unlockPage:!0,templateInstallationMetadata:N,shouldAttemptServerBackedLocalDuplication:V,shouldUseSynchronousDuplicationAPI:F,from:h,skipUserFacingMessages:!0});if(!H||m().Q.isFail(H)||0===H.value.createdBlocks.length)return null==x||x(),void i().log({level:"error",from:"createTemplateInstance",type:"duplicateTemplateError",error:null!=H&&H.error?H.error:new Error("No response"),data:{miscDataToConvertToString:{template_id:w.id,template_block_id:w.rootId,target_space_id:b.id,public_template_name:w.name}}});const B=H.value.createdBlocks[0];if(D&&k){const e=k;try{return await e.waitUntil((()=>e.isDefined())),await u().createAndCommit({userAction:"createTemplateInstance.deleteCurrentPageStore",environment:S,canUndo:!0,perform:t=>{d().oD({environment:S,blocks:[e],transaction:t,permanentlyDelete:!0})}}).serverCommitResult,B}catch(Q){Q instanceof Error&&i().log({level:"error",from:"createTemplateInstance",type:"deleteCurrentPageStoreError",error:Q,data:{miscDataToConvertToString:{template_id:w.id,template_block_id:w.rootId,target_space_id:b.id,public_template_name:w.name}}})}}return null==U||U(B),B}},475355:(e,t,n)=>{n.d(t,{Vs:()=>R,gj:()=>E,hX:()=>N,oH:()=>A,v4:()=>q});n(16280);var a=()=>n(110192),i=()=>n(165358),r=()=>n(416504),o=()=>n(206267),s=()=>n(737188),l=()=>n(179034),c=()=>n(519831),m=()=>n(854150),u=()=>n(468006),d=()=>n(529316),p=()=>n(797573),v=()=>n(201980),g=()=>n(946141),f=()=>n(559506),S=()=>n(231297),w=()=>n(972435),I=()=>n(45359),_=()=>n(37433),b=()=>n(274511),y=()=>n(406792),h=()=>n(632709),T=()=>n(765957),k=()=>n(148832),C=()=>n(543665),U=()=>n(95758),x=()=>n(316189),M=()=>n(108414),P=()=>n(848237);async function E({environment:e,name:t,description:n,icon:a,accessLevel:i,isDefault:r,flowId:o,createTeamHome:u,teamPermissionRole:d,spacePermissionRole:p,members:v,settings:S}){const{sidebarSpaceStore:w,sidebarSpaceViewStore:I}=T().default.getState();if(!w)throw new Error("currentSpaceStore does not exist");if(!I)throw new Error("currentSpaceViewStore does not exist");const _=y().default.mark("client_create_team_latency"),b=w.id,h=await f().callApi({eventName:"createTeam",environment:e,data:{spaceId:b,name:t,description:n,icon:a,isDefault:r,accessLevel:i,teamPermissionRole:d,spacePermissionRole:p,members:v,settings:S}});if("failed"===h.type)return void(0,P().O)(h);const{teamId:x}=h.data,M=U().h.createChildStore(w,{table:m().yK,id:x,spaceId:b});await M.load();const E=M.getSpaceId(),R=M&&E&&{id:M.id,table:c().Vl,spaceId:E},q=M&&R&&C().m.createChildStore(M,R);await(null==q?void 0:q.load());const A=M&&E&&k().B.createChildStore(M,{id:(0,s().t)(M.id),table:l().ev,spaceId:E});return await(null==A?void 0:A.load()),E&&await f().callApi({eventName:"createCollectionViewBlockForPosts",environment:e,data:{teamId:M.id,spaceId:E}}),u&&D({environment:e,teamStore:M,spaceStore:w,spaceViewStore:I}),g()._P(e,{store:M,flowId:o}),y().default.measure(_,{environment:e}),M}function R({environment:e,page:t}){var n;const a=o().JW(),i=(null===(n=t.getParentPointer())||void 0===n?void 0:n.table)!==m().yK?"page_to_team_nested":"page_to_team";g().H8(e,{from:i,flowId:a}),M().A.setState({open:!0,pageStore:t,flowId:a})}async function q({environment:e,page:t,flowId:n,intl:a}){var i;const{accessLevel:o,spacePermissionRole:s,teamPermissionRole:l,members:c}=await(0,_().sy)(t),m=(t.isDefined()?t.getModel().getRenderTitle({intl:a,userTimeZone:(0,r().P)(),getRecordModel:t.getRecordModel}):void 0)??v().q4_(t.getTitleValue()),u=await E({environment:e,name:m,icon:null===(i=t.getIcon())||void 0===i?void 0:i.icon,accessLevel:o,isDefault:!1,description:"",flowId:n,createTeamHome:!1,teamPermissionRole:l,spacePermissionRole:s,members:c});if(!u)return;const{sidebarSpaceViewStore:d}=T().default.state;if(!d)return;const p=await(0,b().U)();S().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:e,canUndo:!0,perform:n=>{p({environment:e,spaceViewStore:d,transaction:n,teamStore:u,blocksToMove:[t],location:{type:"append"}})}}),(0,P().F2)({environment:e,teamId:u.id,tab:h().p.Members,from:"create_team_from_page"}),await new Promise((t=>setTimeout((()=>(0,P().Mh)({teamStore:u,environment:e})),100)))}async function A({environment:e,name:t,description:n,icon:a,flowId:i,trackCreateTeamComplete:r}){const{sidebarSpaceStore:o,sidebarSpaceViewStore:s}=T().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");if(!s)throw new Error("currentSpaceViewStore does not exist");const l=o.id,c=await f().callApi({eventName:"enableTeams",environment:e,data:{spaceId:l,defaultTeamName:t,defaultTeamIcon:a,defaultTeamDescription:n}});if("failed"===c.type)return void(0,P().O)(c);const{teamId:m}=c.data,d=U().h.createChildStore(o,(0,u().uo)(m,l));return await d.load(),D({environment:e,teamStore:d,spaceStore:o,spaceViewStore:s}),g().b0(e,{spaceId:l,store:d,flowId:i}),r&&m&&g()._P(e,{store:d,flowId:i}),d}async function N({environment:e,teamStore:t,from:n,buttonPopupStore:i}){var r;if(!e.currentUser.id)return!1;const s=o().JW(),l=t.isDefault(),c=t.getTeamAccessLevel();if(l)return!1;const m=t.getName(),u=await E({environment:e,name:(0,a().Q)(m||""),description:"",icon:t.getRawIcon(),accessLevel:c,isDefault:l,createTeamHome:!0,teamPermissionRole:null===(r=t.getTeamPermission())||void 0===r?void 0:r.role,spacePermissionRole:t.getSpacePermissionRole(),members:[],settings:t.getSettings(),flowId:s});return!!u&&(g().KK(e,{store:u,from:n}),(0,P().L0)({environment:e,teamStore:u,shouldScroll:!0}),(0,P().F2)({environment:e,teamId:u.id,tab:h().p.General,from:"duplicate_team",buttonPopupStore:i}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,I().jH)(m)})),!0)}async function D(e){const{environment:t,teamStore:n,spaceStore:a,spaceViewStore:r}=e,o=(s=w().A.getIntl(),(0,p().B)(d().w.teamsHomepage,s));var s;return!!(await(0,x().o)({environment:t,item:o,spaceStore:a,spaceViewStore:r,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team",isOnboarding:!1}))||(i().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},495867:(e,t,n)=>{n.d(t,{BY:()=>I,Lg:()=>_,id:()=>T,nE:()=>k,xi:()=>b});n(944114),n(898992),n(430670),n(581454);var a=()=>n(165358),i=()=>n(402390),r=()=>n(68263),o=()=>n(848538),s=()=>n(762433),l=()=>n(559506),c=()=>n(579627),m=()=>n(471995),u=()=>n(972435),d=()=>n(646736),p=()=>n(765957),v=()=>n(57605),g=()=>n(159026),f=()=>n(329304),S=()=>n(47373),w=()=>n(250064);async function I(e){const{environment:t,spaceStore:n,contextualInviteStore:a}=e;!function(e){const{spaceStore:t,contextualInviteStore:n}=e,a=t.getRole();if(!a||!(0,r().NB)(a))return!1;if(!n.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,S().x3)()}({environment:t,spaceStore:n,contextualInviteStore:a})?await async function(e){const{spaceStore:t,contextualInviteStore:n,environment:a}=e,i=t.getRole();if(!i||!(0,r().vp)(i))return!1;if(!n.hasGuests())return!1;return await(0,f().Se)(a,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:n,contextualInviteStore:a})?a.startWorkspaceInvite():a.setState({...a.state,inviteStage:g().d5.closed}):a.startRequestMembership()}async function _(e){const{environment:t,spaceStore:n,contextualInviteStore:i,from:r,intl:o}=e,{selection:s,flowId:l}=i.state;if("page_guest"===s||!i.hasGuests())return i.reset(),!1;const{inviteTargets:u,unknownEmails:d}=await y({environment:t,contextualInviteStore:i,spaceStore:n}),p={...i.state};i.reset();const v=await(0,f().Se)(t,{name:"non_admin_members",spaceId:n.id,userId:n.userId})?"member":"owner";try{await c().cl({environment:t,store:n,inviteTargets:u.map((e=>({...e,membershipType:v}))),isOnboarding:!1,invite:{inviteOrigin:r,inviteFlowId:l,disable_invite_email:!0}})}catch(g){return function(e,t){if(0===t.length)return;m().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:T(t,e),userCount:t.length})})}(o,p.invitedUsers),a().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...p,inviteTargets:u}}}),!1}finally{d.length&&a().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...p,unknownEmails:d}}})}return!0}async function b(e){const{environment:t,spaceStore:n,originId:i,originType:r,reasonMessage:o,contextualInviteStore:s,intl:c}=e,{selection:u}=s.state;if("page_guest"===u||!s.hasGuests())return s.reset(),!1;const{inviteTargets:d,unknownEmails:p}=await y({environment:t,contextualInviteStore:s,spaceStore:n}),v={...s.state};s.reset();const g=[];try{const e=d.map((e=>l().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:n.id,message:o,attributes:{origin_id:i,origin_type:r,origin_table:"share_menu"===r?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>g.push(e)))));await Promise.all(e)}catch(f){return function(e,t){if(0===t.length)return;m().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:T(t,e)})})}(c,v.invitedUsers),a().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...v,inviteTargetsWithErrors:g}}}),!1}finally{p.length&&a().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...v,unknownEmails:p}}})}return!0}async function y(e){const{environment:t,contextualInviteStore:n,spaceStore:a}=e,{invitedEmailToUserIdMap:i}=n.state,r=[],s=[];for(const c of n.state.invitedUsers){if(!c.isGuest)continue;const e=await h(t,c,i);if(e){var l;const t=null===(l=(0,d().dp)(a,e))||void 0===l?void 0:l.getMembershipType();if(t&&(0,o().MN)(t))continue;r.push({type:"existingUser",value:{id:e,email:c.email,version:1}})}else s.push(c.email)}return{inviteTargets:r,unknownEmails:s}}async function h(e,t,n){const a=await async function(e,t,n){let a=t.id;if(a||(a=n[t.email]),!a){const n=await l().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==n.type){const e=n.data;e.value&&(a=e.value.value.id)}}return a}(e,t,n);if(a)return a;const r=(0,i().H)(u().A.getIntl()),o=await l().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:r}});return"failed"!==o.type?o.data.userId:void 0}function T(e,t){return(0,w().l)(e.flatMap((e=>e.email||[])))}function k(e,t){var n;const{state:a}=t,i=null===(n=p().default.state.sidebarSpaceStore)||void 0===n?void 0:n.id,r=i?(0,s().AI)(v().T.getData(e,{spaceId:i})):void 0,o=t.getGuestEmails();return{invite_flow_id:a.flowId,user_count:o.length,user_emails:o,invite_space_role_selection:a.selection,is_bot:!1,subscription_tier:r}}},542056:(e,t,n)=>{n.d(t,{Ah:()=>x,D6:()=>U,KW:()=>h,Oo:()=>y,Pp:()=>M,St:()=>C,hQ:()=>E,iS:()=>k,kW:()=>T,l5:()=>b,lf:()=>P});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var a=()=>n(242422),i=()=>n(842599),r=()=>n(68263),o=()=>n(496603),s=()=>n(763824),l=()=>n(579627),c=()=>n(495867),m=()=>n(329443),u=()=>n(743260),d=()=>n(299545),p=()=>n(62368),v=()=>n(106628),g=()=>n(765957),f=()=>n(159026),S=()=>n(991249),w=()=>n(475355),I=()=>n(134696),_=()=>n(559506);async function b(e){const{environment:t,targetStore:n,sudoModeStore:a,permissionsInviteStore:o,onInviteStart:s,contextualInviteStore:c,inviteOrigin:p}=e,{tokenQuery:v}=o.state;if((0,i().DT)(v.trim())){const e={type:"newUser",value:{email:v.trim()},source:"email"};u().mQ({target:e,permissionsInviteStore:o})||o.setState({...o.state,inviteTargets:[...o.state.inviteTargets,e],tokenQuery:""})}if(0===o.state.inviteTargets.length)return{success:!0,requestedUserCount:0};null==s||s();const g=o.state,{table:f,inviteRole:S,flowId:w,emailMessage:I}=g;o.reset();const _={inviteFlowId:w,inviteMessage:I,inviteOrigin:p};if("team"===f&&(0,d().$R)(n)){const e=(0,m().Nr)(n,g.inviteTargets);return{success:await l().sQ({environment:t,store:n,inviteTargets:e,inviteRole:S,createNewTeamFlowId:w}),requestedUserCount:0}}if("space"===f&&(0,d().Yu)(n)){const e=await(0,m().Mz)(n,g.inviteTargets),a=await l().cl({environment:t,store:n,inviteTargets:e.map((e=>({...e,membershipType:S}))),isOnboarding:!1,invite:_});return{success:a.success,requestedUserCount:a.success?Object.keys(a.requestedUsers).length:0}}if(!(0,d().Yu)(n)&&!(0,d().$R)(n)&&(0,r().PW)(S)){const e=(0,m().Nr)(n,g.inviteTargets),i=await l().eP({environment:t,store:n,sudoModeStore:a,inviteTargets:e,inviteRole:S,isOnboarding:!1,invite:_});return i.success&&(null==c||c.setState({...null==c?void 0:c.state,invitedEmailToUserIdMap:i.invitedUsers})),{success:i.success,requestedUserCount:i.success?Object.keys(i.requestedUsers).length:0}}return{success:!0,requestedUserCount:0}}function y(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function h(e){const{permissionsInviteStore:t,contextualInviteStore:n}=e;if(!n)return;const a=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)a.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"page_guest"===e.membershipType||"none"===e.membershipType};a.push(t)}})),n.setState({...n.state,invitedUsers:a})}async function T(e){const{environment:t,spaceStore:n,targetStore:a,sudoModeStore:i,permissionsInviteStore:r,contextualInviteStore:o,onInviteClick:s,onInviteComplete:l,inviteOrigin:m,intl:u}=e;if(a.getSpaceId()!==n.getSpaceId())return void(null==l||l(!1,0));if((null==o?void 0:o.state.selection)===f().NJ.workspace_member&&(0,p().p)(n)&&!n.isTeamsEnabled()){if(!(await w().oH({environment:t,flowId:r.state.flowId||"",trackCreateTeamComplete:!1})))return;h({permissionsInviteStore:r,contextualInviteStore:o}),await(0,c().Lg)({environment:t,spaceStore:n,contextualInviteStore:o,from:m,intl:u})}else h({permissionsInviteStore:r,contextualInviteStore:o});let d={success:!1,requestedUserCount:0};try{d=await b({environment:t,targetStore:a,sudoModeStore:i,permissionsInviteStore:r,contextualInviteStore:o,onInviteStart:()=>{null==s||s()},inviteOrigin:m})}catch(v){}finally{null==l||l(d.success,d.requestedUserCount)}}async function k(e){const{environment:t,permissionsInviteStore:n,from:a,onClose:i}=e;await u().iQ({environment:t,permissionsInviteStoreState:n.state,from:a})||(n.reset(),null==i||i())}function C(e){const{permissionsInviteStore:t,targetToRemove:n}=e,a=t.state.inviteTargets.filter((e=>e!==n));t.setState({...t.state,inviteTargets:a})}function U(e){const{environment:t,onUpgradeButtonClick:n,upgradeButtonName:a}=e;S().K(t,{from:a,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),null==n||n()}async function x(e,t){const n=new Set(t),a=Array.from(n).map((async t=>{const n=await _().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===n.type){const e=n.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(a)}async function M(e){const{environment:t,permissionsInviteStore:n,event:a}=e,r=a.target.value,{extractedEmails:o,newInputValue:s}=(0,i().Ct)(r),l=(await x(t,o)).filter((e=>!u().mQ({target:e,permissionsInviteStore:n}))),c=[...n.state.inviteTargets,...l];n.setState({...n.state,inviteTargets:c,inputFocus:"invitee",tokenQuery:s})}function P(e){const{environment:t,newRole:n,permissionsInviteStore:a}=e,{state:i}=a;I().Jy(t,{...u().oX(t,i),invite_updated_role:u().Y5(n)}),a.setState({...i,inviteRole:n})}async function E(e){var t;const{query:n,environment:i,sectionLimit:r,intl:l,membersOnly:c,importContactType:m,shouldUseEdgeCacheRollout:u}=e,{sidebarSpaceStore:d}=g().default.state;if(!d)return{inviteUsers:[],inviteGroups:[]};const p=a().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:f,groupLimit:S,importContactLimit:w}=r,I=await v().T.searchActions.load(),[b,y,{user:h,email:T},k]=await Promise.all([f>0?I.searchSpaceUsers({environment:i,query:n,membersOnly:c,limit:f,shouldUseEdgeCacheRollout:u}):[],S>0?I.searchSpaceGroups({query:n,intl:l}):[],I.searchEmailUser(i,n),w>0?(0,s().nQ)(p,_().callApi({eventName:"searchContacts",environment:i,data:{spaceId:d.id,limit:w,query:n,importContactType:m||"all",includeNonNotionUsers:!c,includeUserId:!0}})):void 0]),C=b.slice(0,f).map((e=>({type:"existingUser",value:e}))),U=y.slice(0,S).map((e=>({type:"group",value:e})));h&&C.unshift({type:"existingUser",value:h}),T&&C.unshift({type:"newUser",value:{email:T},source:"email"});let x=0,M=[];var P;"success"===(null==k||null===(t=k.result)||void 0===t?void 0:t.type)&&(M=k.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type}))),x=(null==k||null===(P=k.result)||void 0===P||null===(P=P.data)||void 0===P?void 0:P.totalCount)??0);return{inviteUsers:o().hS(C,(e=>e.value.email)),inviteGroups:U,importedContacts:M,totalContactsCount:x}}}}]);