"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32487],{173215:(e,t,o)=>{o.d(t,{x:()=>s});var r=()=>o(484714),n=()=>o(56366),i=()=>o(401497),a=()=>o(712030),l=()=>o(921855);function s({textStore:e,parentStore:t,spaceId:o,disabled:s=!1}){const d=(0,r().v3)(),c=(0,i().DP)(),u=(0,a().Ol)(),p=(0,n().K8)((()=>d.KatexStore.getKatex()),[d.KatexStore]);return(0,n().K8)((()=>{const r=null==e?void 0:e.getValue();return r&&o&&t?l().S5({environment:d,textValue:{value:r,spaceId:o},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:!0,disabled:s,theme:c,disableLinks:s,emojiType:u,katex:p,formulaValueTypes:[]}):null}),[s,u,d,p,t,o,e,c])}},266405:(e,t,o)=>{o.d(t,{e:()=>i});var r=()=>o(31503),n=()=>o(465741);function i(e,t,o,i){var a;const l=null===(a=t.getModel())||void 0===a?void 0:a.getConfig().propertyId;if(!l)return"generic_error";const s=o[l];if(void 0===s)return"deleted_property";if(!(0,r().Sg)(s))return"invalid_property_type";const d=(0,n().CK)({environment:e,propertyType:s.type,propertySchema:s,isPublicForm:Boolean(i)});return d||void 0}},348241:(e,t,o)=>{o.d(t,{Q1:()=>a,cJ:()=>i,zi:()=>n});o(16280);var r=o(296540);const n=(0,r.createContext)(null);function i(){const e=(0,r.useContext)(n);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,r.useMemo)((()=>e),[e])}function a(){return(0,r.useContext)(n)}n.displayName="FormLayoutEditorContext"},390787:(e,t,o)=>{o.d(t,{P:()=>a});var r=()=>o(898244),n=()=>o(543665),i=()=>o(873039);async function a(e){const{environment:t,collectionStore:o,schema:a,property:l,transaction:s,permanentlyDelete:d}=e,c=a[l];if(c)if("relation"===c.type&&r().zO(c)&&c.property&&r().zO(c)!==o.id){const e=new(n().m)(t,r().Nv(c));await e.load(),(0,i().B)({environment:t,collectionStore:o,schema:a,property:l,transaction:s,targetCollectionStore:e,permanentlyDelete:d})}else(0,i().B)({environment:t,collectionStore:o,schema:a,property:l,transaction:s,permanentlyDelete:d})}},435930:(e,t,o)=>{o.d(t,{s:()=>i});var r=()=>o(69708);const n=(0,r().YK)({PROPERTY_MODULE_MESSAGE:{id:"pageLayoutEditor.property",defaultMessage:"Property"},TITLE_WITH_ICON_MESSAGE:{id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading"},COLLECTION_VIEW_MESSAGE:{id:"pageLayoutEditor.collectionView",defaultMessage:"Database View"}}),i=(0,r().YK)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page discussions"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},recentActivity:{id:"pageLayoutEditor.recentActivity",defaultMessage:"Recent activity"},collaborators:{id:"pageLayoutEditor.collaborators",defaultMessage:"Top collaborators"},teamspaces:{id:"pageLayoutEditor.teamspaces",defaultMessage:"Teamspaces"},row:{id:"pageLayoutEditor.row",defaultMessage:"Row"},view:{id:"pageLayoutEditor.view",defaultMessage:"View"},normalizedTitleWithIcon:n.TITLE_WITH_ICON_MESSAGE,titleWithIcon:n.TITLE_WITH_ICON_MESSAGE,deleted_property:n.PROPERTY_MODULE_MESSAGE,property_number:n.PROPERTY_MODULE_MESSAGE,property_title:n.PROPERTY_MODULE_MESSAGE,property_person:n.PROPERTY_MODULE_MESSAGE,property_file:n.PROPERTY_MODULE_MESSAGE,property_text:n.PROPERTY_MODULE_MESSAGE,property_checkbox:n.PROPERTY_MODULE_MESSAGE,property_url:n.PROPERTY_MODULE_MESSAGE,property_email:n.PROPERTY_MODULE_MESSAGE,property_phone_number:n.PROPERTY_MODULE_MESSAGE,property_created_by:n.PROPERTY_MODULE_MESSAGE,property_last_edited_by:n.PROPERTY_MODULE_MESSAGE,property_button:n.PROPERTY_MODULE_MESSAGE,property_select:n.PROPERTY_MODULE_MESSAGE,property_multi_select:n.PROPERTY_MODULE_MESSAGE,property_status:n.PROPERTY_MODULE_MESSAGE,property_date:n.PROPERTY_MODULE_MESSAGE,property_created_time:n.PROPERTY_MODULE_MESSAGE,property_last_edited_time:n.PROPERTY_MODULE_MESSAGE,property_last_visited_time:n.PROPERTY_MODULE_MESSAGE,property_relation:n.PROPERTY_MODULE_MESSAGE,property_rollup:n.PROPERTY_MODULE_MESSAGE,property_formula:n.PROPERTY_MODULE_MESSAGE,property_auto_increment_id:n.PROPERTY_MODULE_MESSAGE,property_location:n.PROPERTY_MODULE_MESSAGE,property_verification:n.PROPERTY_MODULE_MESSAGE,property_place:n.PROPERTY_MODULE_MESSAGE,property:n.PROPERTY_MODULE_MESSAGE,collectionView:n.COLLECTION_VIEW_MESSAGE,collectionViewV2:n.COLLECTION_VIEW_MESSAGE})},462106:(e,t,o)=>{o.d(t,{Y:()=>i});o(898992),o(672577);var r=()=>o(235059),n=()=>o(652079);function i(e,t){const o=(0,r().l)(e,t);if(o)for(const r of o.allFeatures)if((0,n().l)(r)){const e=r.dependencies.find((e=>"collection"===e.type&&e.uri===t));if(e)return e.value.schema??{}}}},630960:(e,t,o)=>{o.d(t,{Jz:()=>s,in:()=>l,yh:()=>a});o(898992),o(354520),o(581454);var r=()=>o(56366),n=()=>o(31503),i=()=>o(534177);const a=(0,o(69708).YK)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondentâ€™s answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"},editorDropdownPlaceholderSelect:{defaultMessage:"Options below will appear in the dropdown",id:"formEditorQuestion.editorDropdownPlaceholder"}});function l({layoutStore:e,collectionStore:t}){const o=(0,r().K8)((()=>t?e.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:t.getSchema()})??[]:[]),[e,t]),a=(0,r().K8)((()=>o.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(i().O9)),[o]);return(0,r().K8)((()=>{if(!t)return[];const o=t.getSchema();if(!e.getModel())return[];return(0,i().WP)(o).map((([e,t])=>{if(t&&(0,n().Sg)(t)&&!a.includes(e))return e})).filter(i().O9)}),[t,e,a])}const s=[{key:"unlimited",title:"Unlimited",type:"button"},{key:"1",title:"1",type:"button"},{key:"2",title:"2",type:"button"},{key:"3",title:"3",type:"button"},{key:"4",title:"4",type:"button"},{key:"5",title:"5",type:"button"},{key:"10",title:"10",type:"button"}]},634058:(e,t,o)=>{o.d(t,{A:()=>n});class r extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}}const n=new r},671793:(e,t,o)=>{o.d(t,{j:()=>c});var r=()=>o(66689),n=()=>o(687871),i=()=>o(455348),a=()=>o(931075),l=()=>o(41223),s=()=>o(462106);const d=[n().Z.Owner,a()._e.Owner];function c(e,t,o,c){if(!(0,l().I)()&&t===r().pW&&(o===n().Z.Owner||o===a()._e.Owner))return!0;const u=i().u9.derivePropertyUri(o,c.getPropertyMapping());if(!u)return!1;const p=function(e,t){if(t===r().pW)return d;const o=(0,s().Y)(e,t);return o?Object.keys(o):void 0}(e,t);return!!p&&p.includes(u)}},719849:(e,t,o)=>{o.d(t,{f:()=>n,l:()=>i});var r=()=>o(634058);async function n(e){return r().A.state.open?Promise.resolve(void 0):new Promise((t=>{!function(e){r().A.setState({...e,open:!0})}({...e,onConfirm:e=>(i(),t(e)),onDismiss:()=>(i(),t(void 0))})}))}function i(){r().A.reset()}},802975:(e,t,o)=>{o.d(t,{B:()=>m});o(16280),o(898992),o(354520);var r=()=>o(564884),n=()=>o(792071),i=()=>o(37165),a=()=>o(873039),l=()=>o(231297),s=()=>o(147503),d=()=>o(640868),c=()=>o(237775),u=()=>o(465741),p=()=>o(98205);function m({environment:e,module:t,sessionId:o,layoutStore:r,collectionSettingsStore:n,isCollectionEmpty:i,collectionContextStore:a,area:l,transaction:d,updateParentModule:c}){const u=a.collectionStore();if(!u)throw new Error("Could not find collection store");const m=r.getModules().form_conditional_modules??{},f=(0,p().Yg)({currentModule:t,nestedModules:m,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==t.id)),S=a.normalizedSchemaStore.state;for(const s of f)y({environment:e,module:s,sessionId:o,layoutStore:r,isCollectionEmpty:i,collectionContextStore:a,collectionStore:u,area:"form_conditional_modules",transaction:d,schema:S,updateParentModule:!1});y({environment:e,module:t,sessionId:o,layoutStore:r,isCollectionEmpty:i,collectionContextStore:a,collectionStore:u,area:l,transaction:d,schema:S,updateParentModule:c}),s().os({collectionSettingsStore:n})}function y({environment:e,module:t,sessionId:o,layoutStore:s,isCollectionEmpty:p,collectionContextStore:m,collectionStore:y,area:f,transaction:S,updateParentModule:g,schema:E}){let _;if("formQuestion"===t.type){var M;if(_=c().c.createChildStore(s,{table:i().lo,id:t.formQuestionId,spaceId:s.getSpaceId()??""}).getPropertyId(),!_)return;const o=null===(M=E[_])||void 0===M?void 0:M.type;p&&o&&"title"!==o&&(0,a().B)({environment:e,collectionStore:y,schema:E,property:_,transaction:S}),(0,r().u)({environment:e,event:{eventName:"delete_form_question",eventProperties:(0,u().YA)({collectionContextStore:m,propertyId:_,questionId:t.id,parentModuleId:g?t.parentModuleId:void 0,area:f,layoutStore:s})}})}g?(0,d().U)({environment:e,position:{area:f,moduleId:t.id},layoutStore:s,sessionId:o,transaction:S}):l().applyOperation({transaction:S,store:s,operation:n().N4X.deleteModuleInArea({pointer:s.pointer,area:f,moduleId:t.id})})}},832857:(e,t,o)=>{o.d(t,{FG:()=>g,Is:()=>S,Ix:()=>E,jD:()=>_,lF:()=>f});o(944114),o(898992),o(354520),o(672577),o(581454);var r=()=>o(242422),n=()=>o(214388),i=()=>o(792071),a=()=>o(500993),l=()=>o(183558),s=()=>o(534177),d=()=>o(231297),c=()=>o(909470),u=()=>o(978846),p=()=>o(640868),m=()=>o(33218),y=()=>o(802975);function f(e){const{environment:t,layoutStore:o,currentQuestionModule:r,area:n,property:i,filterValue:a,setModuleSelection:s,sessionId:c}=e;d().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const d=(0,l().Ay)(),p=(0,l().Ay)(),y=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(a);(0,m().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:n,moduleId:r.id},updatedModule:{...r,conditionalGroups:[...r.conditionalGroups??[],{id:d,trigger:{property:i,filter:y},children:[]}]}});const f={id:p,type:"placeholder",parentModuleId:r.id,parentConditionalGroupId:d};(0,u().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:d,parentModuleId:r.id},module:f,sessionId:c,isPropertyCreation:!1}),s&&s({type:"existing_module",moduleId:p,isDragging:!1})}})}function S(e){var t;const{environment:o,layoutStore:r,module:n,conditionalGroupId:i,newValue:l}=e,s=(0,a().A)(n.id,r.getModules()),c={...n,conditionalGroups:null===(t=n.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===i?{...e,trigger:{...e.trigger,filter:l}}:e))};d().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,m().UQ)({environment:o,transaction:e,layoutStore:r,position:{area:s.area,moduleId:n.id},updatedModule:c})}})}function g(e){const{environment:t,parentModule:o,groupId:r,layoutStore:n,collectionContextStore:a,isCollectionEmpty:l,sessionId:s}=e,c=n.getModules().form_conditional_modules??{};d().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var u,p;const f=null==n?void 0:n.getModel();if(!n||!f)return;const S=null===(u=o.conditionalGroups)||void 0===u?void 0:u.filter((e=>e.id!==r)),g=null===(p=o.conditionalGroups)||void 0===p?void 0:p.find((e=>e.id===r));if(void 0!==g){for(const o of g.children??[]){const r=c[o];r&&("placeholder"!==r.type?(0,y().B)({environment:t,module:r,sessionId:s,transaction:e,layoutStore:n,collectionContextStore:a,collectionSettingsStore:a.settingsStore,isCollectionEmpty:l,area:"form_conditional_modules",updateParentModule:!1}):d().applyOperation({transaction:e,store:n,operation:i().N4X.deleteModuleInArea({pointer:n.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,m().UQ)({environment:t,transaction:e,layoutStore:n,position:{area:Object.keys(c).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:S}})}}})}function E(e){const{environment:t,layoutStore:o,formQuestionModule:r,sessionId:n}=e;d().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,p().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:r.id}}),(0,u().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...r,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:n,isPropertyCreation:!1})}})}function _(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:a,intl:l,spaceIdCreator:d}=e,u=[],p=o.getModel();if(!p)return[];for(const y of t){u.push(y);const e=y.conditionalGroups;if(e)for(const t of e){var m;const e=t.trigger;if(!(0,n().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:i,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:l,collectionFeatureGates:(0,c().i)()},depth:0})({block:p,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:r().default,formulasModule:void 0,spaceIdCreator:d}))continue;const y=null===(m=t.children)||void 0===m?void 0:m.map((e=>{const t=a[e];if(t&&"formQuestion"===t.type)return t})).filter(s().O9);if(!y||0===y.length)continue;const f=_({questionModulesToVisit:y,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:a,intl:l,spaceIdCreator:d});u.push(...f)}}return u}},846657:(e,t,o)=>{o.d(t,{J:()=>c,Q:()=>d});o(296540);var r=()=>o(242422),n=()=>o(713998),i=()=>o(69708),a=()=>o(852353),l=o(474848);function s(e,t,o){return"1"===e?"relation"===t?o&&!0===o?(0,l.jsx)(i().sA,{defaultMessage:"1 item",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.connectedRelation"}):(0,l.jsx)(i().sA,{defaultMessage:"1 page",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.relation"}):(0,l.jsx)(i().sA,{defaultMessage:"1 {type}",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne",values:{type:a().dC[t]}}):"no_limit"===e?(0,l.jsx)(i().sA,{defaultMessage:"No limit",id:"database.viewSettings.collectionPropertyLimitHelpers.noLimit"}):void 0}function d(e,t,o){return{key:e,type:"button",title:s(e,t,o)}}function c(e){const t=r().default.getConfigKey("collection_size_limits","collection_deleted_schema_max_size");return(0,n().Jb)(e,t)}},854593:(e,t,o)=>{o.d(t,{q:()=>v});o(16280),o(296540);var r=()=>o(898244),n=()=>o(302107),i=()=>o(259476),a=()=>o(69708),l=()=>o(284371),s=()=>o(962910),d=()=>o(16006),c=()=>o(972435),u=()=>o(685889),p=()=>o(41223),m=()=>o(470928),y=()=>o(290966),f=()=>o(204067),S=()=>o(899164),g=()=>o(901389),E=()=>o(719849),_=()=>o(231297),M=o(474848);async function v(e){const{environment:t,collectionContextStore:o,property:d,handleDeleteAccept:v,isPermanentlyDelete:h}=e,b=o.collectionStore();if(!b)return;if(b.isTypedProperty(d)){if(await s().nD({environment:t,property:d,collectionContextStore:o,theme:e.theme,from:e.from}))return}const C=(0,f().R5)({environment:t,collectionStore:b,propertyId:d});if(C.length>0){if((0,y().E_)({environment:t,collectionStore:b,propertyId:d,compoundTemplateInstancesToDelete:C,collectionContextStore:o,from:e.from}))return}else if(((0,m().k$)(d)||(0,m().Do)({collectionStore:b,propertyId:d}))&&(0,m().aF)(b)&&(0,p().I)()){if((0,y().I5)({environment:t,collectionStore:b,propertyId:d,collectionContextStore:o,from:e.from}))return}const I=o.normalizedSchemaStore.state,O=I[d],w=u().pg(o,O);await(null==w?void 0:w.load());const T=await async function({handleDeleteAccept:e,environment:t,collectionContextStore:o,collectionStore:r,targetCollectionStore:n,propertyId:s,propertySchema:d}){const c=n&&u().D5(o,s,n),p=n&&u().uf(n),m=n&&r.id===n.id;if(!c||!r||!p||m)return!1;const y=()=>{_().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{if("relation"===(null==d?void 0:d.type)&&null!=d&&d.property&&n){const o=d.property,i=n.getSchema();S().C4({environment:t,collectionStore:n,propertySchema:i[o],property:o,targetPropertyID:void 0,autoRelate:r.isSyncedCollection()&&!n.isSyncedCollection()?{enabled:!1}:d.autoRelate,transaction:e}),S().C4({environment:t,collectionStore:r,propertySchema:d,property:s,targetPropertyID:void 0,autoRelate:{enabled:!1},transaction:e})}S().t$({environment:t,collectionStore:r,property:s,transaction:e})}})};return await async function({collectionStore:e,targetCollectionStore:t,handleDeleteAccept:o,handleDeleteButKeepRelatedProperty:r}){const n=await E().f({icon:i().trashSmallIcon,radioButtonStyle:"red",confirmTextStyle:"red",title:A(e),confirmText:(0,M.jsx)(a().sA,{defaultMessage:"Delete",id:"deletePropertyDialogActions.warning.confirmText"}),radioOptions:[{key:"delete_source_and_target",title:(0,M.jsx)(a().sA,{id:"deletePropertyDialogActions.warning.deleteSourceAndTarget",defaultMessage:"Also delete related property"}),subtitle:(0,M.jsx)(a().sA,{id:"deletePropertyDialogActions.radioModal.deleteSourceAndTarget",defaultMessage:"The related property on {relationTargetName} will also be deleted",values:{relationTargetName:P(t,l().Wy.medium)}})},{key:"delete_source_only",title:(0,M.jsx)(a().sA,{defaultMessage:"Delete this property only",id:"deletePropertyDialogActions.warning.deleteSourceOnly"}),subtitle:(0,M.jsx)(a().sA,{defaultMessage:"This will end the two-way sync with the related property on {relationTargetName}",id:"deletePropertyDialogActions.warning.subtitleForDeleteSourceOnly",values:{relationTargetName:P(t,l().Wy.medium)}})}]});switch(n){case"delete_source_and_target":o();break;case"delete_source_only":r();break;default:throw new Error(`Unsupported two-way relation deletion type: ${n}`)}}({collectionStore:r,targetCollectionStore:n,handleDeleteAccept:e,handleDeleteButKeepRelatedProperty:y}),!0}({handleDeleteAccept:v,environment:t,collectionContextStore:o,collectionStore:b,targetCollectionStore:w,propertyId:d,propertySchema:O});if(T)return;let D,R,L=[{label:h?(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteProperty.modal.confirmPermanentlyDeleteButton",defaultMessage:"Permanently delete"}):(0,M.jsx)(a().sA,{id:"database.viewSettings.propertyTab.deleteProperty.modal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:v}];if("auto_increment_id"===(null==O?void 0:O.type))D=u().me(I)?(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteUniqueIdWithGithubProperty.modal.prompt",defaultMessage:"You will no longer be able to link new GitHub PRs and status automations will stop working."}):(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteUniqueIdProperty.modal.prompt",defaultMessage:"The ID property will be permanently deleted."});else if("status"===(null==O?void 0:O.type)){const e=u().AX(I);if(e){const t=e.connectedRelation.automation;t&&t[d]&&(D=(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteStatusProperty.modal.prompt",defaultMessage:"Deleting this status property will stop the GitHub Pull Requests status automation."}))}}else if(O&&(0,r().UU)(O)){const e=(0,r().mh)(I,d);if(e.length>0){const o=e.length;D=(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteProperty.modal.rollupWarning",defaultMessage:(0,a().LS)("rollupCount",{one:"This will also delete {rollupCount} dependent property.",other:"This will also delete {rollupCount} dependent properties."}),values:{rollupCount:o}}),L=[{...L[0],onAccept:()=>{_().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{S().I9({environment:t,collectionStore:b,targetCollectionStore:w,property:d,transaction:e,permanentlyDelete:h})}})}}]}}else O&&(0,n().dR)({propertyId:d,propertyType:O.type,permissionItems:b.getPermissionItems()})&&(R=c().A.formatMessage(n().DZ.deletePropertyTypeWarningMessage),D=c().A.formatMessage(n().DZ.deletePropertyTypeWarningDescription));g().ui({message:R||A(b),description:h?(0,M.jsxs)(M.Fragment,{children:[D," ",(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteProperty.modal.permanentlyDeleteDescription",defaultMessage:"This property is too large to be moved to Deleted Properties. It will be permanently deleted."})]}):D,showCancel:!0,keepFocus:!0,items:L,mode:"wide",innerStyle:{textAlign:"center"}})}function P(e,t){return(0,M.jsx)(d().A,{style:{display:"inline",fontWeight:t},shouldWrap:!0,store:e})}function A(e){return(0,M.jsx)(a().sA,{id:"database.tableHeaderCell.deleteProperty.modal.prompt",defaultMessage:"Delete this property from {databaseName}? It will be removed from all views.",values:{databaseName:P(e,l().Wy.bold)}})}}}]);