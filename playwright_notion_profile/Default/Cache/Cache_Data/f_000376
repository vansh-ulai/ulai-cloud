"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476,8881,76983,94495],{346:(e,t,o)=>{o.d(t,{MG:()=>v,T1:()=>m,a1:()=>f,dt:()=>g,kg:()=>h,lC:()=>b,n_:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(187174),s=()=>o(645873),l=()=>o(941463),c=()=>o(441199),d=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const m=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(71386),o.e(45624)]).then(o.bind(o,688201)))),v=(0,s()._h)(m,(e=>e.PerformanceToolbar)),g=(0,s()._h)(m,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,r().v3)();return(0,i().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,r().v3)(),t=S("performanceToolbarStore"),o=S("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function b(){const e=S("performanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function f(){const e=(0,r().v3)(),t=S("createPerformanceToolbarMouseListeners"),o=S("performanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:v,updateSidebarWidth:g}=(0,i().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,v,g)}),[t,e,o,a,s,p,m,v,g])}function S(e){const t=h(),[{value:o}]=(0,a().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},8741:(e,t,o)=>{o.r(t),o.d(t,{arrowDiagonalUpRightSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.65 3.66 8.68 8.68",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M5.603 3.663a.625.625 0 1 0 0 1.25h4.6l-6.37 6.371a.615.615 0 0 0 .013.87.616.616 0 0 0 .87.014l6.371-6.372v4.601a.625.625 0 1 0 1.25 0v-6.11a.625.625 0 0 0-.625-.624z"})},r=(0,o(340498).wt)("arrowDiagonalUpRightSmall",n)},56394:(e,t,o)=>{o.d(t,{A:()=>c});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(718827),a=()=>o(606712),s=()=>o(668725),l=o(474848);function c(e){const{icon:t,title:o,on:c,disabled:d,hasDiff:u,wrapStyle:p,innerStyle:m,hideChevron:v}=e,{isMobile:g}=(0,n().Y0)(),h=(0,r().IS)((e=>({container:{borderRadius:14,marginInlineEnd:6,display:"inline-flex",...u&&{position:"relative"},...p},filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:g?28:24,lineHeight:g?"28px":"24px",padding:"0 8px",color:e.text.secondary,...c&&{color:e.blue.text.accentPrimary,borderColor:e.blue.border.strong,background:e.blue.background.secondary},...d&&{color:e.blue.text.disabled,borderColor:e.blue.border.strong,background:e.blue.background.secondary},...m},hovered:c?{background:(0,a().R)({color:e.blue.background.secondary,mode:e.mode})}:{},pressed:c?{background:(0,a().y)({color:e.blue.background.secondary,mode:e.mode})}:{},chevron:{width:10,marginInlineStart:4,marginTop:1,fill:d?e.blue.icon.disabled:c?e.blue.icon.accentPrimary:e.icon.tertiary},diffDot:{position:"absolute",top:-2,insetInlineEnd:-2,background:e.orange.icon.accentPrimary,border:`1px solid ${e.background.primary}`,width:9,height:9,borderRadius:9}})),[u,p,g,c,d,m]);return(0,l.jsxs)("div",{style:h.container,children:[(0,l.jsxs)(i().Ay,{disabled:d,style:h.filterPill,hoveredStyle:h.hovered,pressedStyle:h.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,o,v?void 0:(0,s().b)(h.chevron)]}),u?(0,l.jsx)("div",{style:h.diffDot}):void 0]})}},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),r=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),th:()=>o.e(17278).then(o.bind(o,796137)),id:()=>o.e(51872).then(o.bind(o,443716)),vi:()=>o.e(51872).then(o.bind(o,443716)),he:()=>o.e(51872).then(o.bind(o,443716)),ar:()=>o.e(51872).then(o.bind(o,443716))};let a=!1,s=!1;async function l(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...r,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await r().A.waitUntilLoaded(),r().A.update((({emojiByName:t,...o})=>({...o,emojiByName:{...t,...e.emojiByName}})))}async function c(){if(a)return;const[e]=o(662303).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},73956:(e,t,o)=>{o.r(t),o.d(t,{checkmarkFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.87 2.88 10.25 10.24",svg:(0,o(474848).jsx)("path",{d:"M12.756 2.987a.75.75 0 0 1 .257 1.029l-5.244 8.74a.75.75 0 0 1-1.213.102L3.06 8.78a.75.75 0 0 1 1.14-.976l2.818 3.289 4.709-7.848a.75.75 0 0 1 1.029-.257"})},r=(0,o(340498).wt)("checkmarkFillSmall",n)},84448:(e,t,o)=>{o.d(t,{c:()=>a});var n=()=>o(165358),r=()=>o(519831),i=()=>o(559506);async function a(e){const{environment:t,collectionStore:o}=e,a={id:o.id,table:r().Vl,spaceId:o.getSpaceId()},s=await i().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;n().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},103448:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(284371),r=o(474848);const i=function({imageURL:e,imageWidth:t,imageHeight:n,caption:i,title:s,imageContainerStyle:l}){if(e){const c=(0,o(478184).L)(e);return(0,r.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:n||100,borderRadius:4,backgroundImage:`url(${c})`,backgroundSize:"cover",marginBottom:6,...l}}),(0,r.jsx)(a,{caption:i,title:s})]})}return(0,r.jsx)(a,{caption:i,title:s,style:{width:t}})};function a({style:e,caption:t,title:o}){return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[o?(0,r.jsx)("header",{style:{fontWeight:n().Wy.bold,marginBottom:4},children:o}):void 0,t]})}},115562:(e,t,o)=>{o.d(t,{W:()=>c});o(296540);var n=()=>o(819121),r=()=>o(401497),i=()=>o(451306),a=()=>o(73956),s=()=>o(340498),l=o(474848);function c(e){const{selectorSize:t="normal",...o}=e,{disabled:c,checked:d}=o,[u,p]=(0,n().A)(),m=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:i}=e;return(0,r().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===i?15:11,height:"large"===i?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===i?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}`,background:o?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.border.strong}`,background:e.background.primary},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===i?18:void 0,height:"large"===i?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.blue.text.inversePrimary,width:"large"===i?s().Ev.xs:s().Ev.xxs,height:"large"===i?s().Ev.xs:s().Ev.xxs,ariaHidden:!0}})),[i,t,o,n])}({checked:d,disabled:c,selectorSize:t,isFocusVisible:p});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{ref:u,type:"checkbox",style:m.input,...o}),(0,l.jsx)("span",{...(0,i().AH)(m.root,c?{}:{pseudoActive:m.active}),children:d?(0,a().checkmarkFillSmallIcon)(m.icon):void 0})]})}},124749:(e,t,o)=>{o.d(t,{$:()=>i});var n=()=>o(56366);const r=new(o(496506).ComputedStore)((()=>o(765957).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function i(){return(0,n().O$)(r)}},132389:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);function r(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},r=(0,o(340498).wt)("arrowInCircleUpFill",n)},135599:(e,t,o)=>{o.d(t,{W:()=>H});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454),o(737550);var n=o(296540),r=()=>o(564884),i=()=>o(242422),a=()=>o(395361),s=()=>o(484714),l=()=>o(56366),c=()=>o(721908),d=()=>o(929219),u=()=>o(474424),p=()=>o(591779),m=()=>o(206267),v=()=>o(207289),g=()=>o(519831),h=()=>o(620333),y=()=>o(245241),b=()=>o(69708),f=()=>o(496603),S=()=>o(973647),x=()=>o(534177),w=()=>o(720665),k=()=>o(559506),C=()=>o(518362),T=()=>o(148777),M=()=>o(825972),A=()=>o(71304),I=()=>o(780865),_=()=>o(470928),B=()=>o(135055),j=()=>o(406792),R=()=>o(106628),P=()=>o(361330),V=()=>o(109054),O=()=>o(765957),E=()=>o(968172),L=()=>o(20199),D=()=>o(558407),q=()=>o(148832),N=()=>o(543665),W=()=>o(645873),z=()=>o(873049),F=()=>o(606331);function H(e){var t;const{options:o,...m}=e,{overrideSearchSessionId:H,overrideSpaceStore:G,usePrefetch_EXPERIMENTAL:Y,disable:Z,debug:J}=o,{type:X,query:ee="",source:te,limit:oe,peopleBlocksToInclude:ne}=m,re=(0,s().v3)(),ie=(0,b().tz)(),ae=(0,p().ZC)(ee),se=(0,p().ZC)(e.filters),le=(0,p().ZC)(e.sort),ce=(0,p().ZC)(e.options.searchExperimentOverrides),de=(0,p().ZC)(J),ue=(0,n.useRef)({number:0,query:""}),pe=(0,n.useCallback)((e=>{const t=ue.current.query.trim(),o=e.trim();""!==o&&t!==o&&(ue.current.number+=1,ue.current.query=o)}),[]),me=(0,a().Y)(pe,P().ab),ve=(0,n.useRef)(!0),ge=(0,l().O$)(d().e),he=!ge,ye=(0,B().y6)(),[be,fe]=(0,n.useState)(K()),Se=(0,l().K8)((()=>H&&H!==be.searchSessionId?(fe((e=>({...e,searchSessionId:H}))),H):be.searchSessionId),[be,H]),xe=(0,n.useRef)(),we=(0,n.useCallback)((()=>{xe.current&&(j().default.measure(xe.current,{environment:re,data:{query_length:ee.length,source:te,search_session_id:Se}}),xe.current=void 0)}),[re,ee.length,te,Se]),{searchLocalResults:ke,searchServerResults:Ce,isResultsLoading:Te,numTotalLocalResults:Me,numTotalServerResults:Ae}=(0,l().K8)((()=>({searchLocalResults:be.localResults,searchServerResults:be.serverResults,isResultsLoading:be.isResultsLoading,numTotalLocalResults:be.numTotalLocalResults,numTotalServerResults:be.numTotalServerResults})),[be]),Ie=(0,l().K8)((()=>G||O().default.state.sidebarSpaceStore),[G]),_e=(0,l().K8)((()=>{if(he||Te&&ve.current)return ke;let e=function(e){const{localResults:t,serverResults:o}=e,n=t.map((e=>e.store.id)),r=new Set(n),i=o.filter((e=>!r.has(e.store.id)));return[...t,...i]}({localResults:ke,serverResults:Ce});return X===y().Vz.CollectionsInSpace&&(e=Q(e)),e}),[he,Te,ke,X,Ce]),Be=(0,l().K8)((()=>"on"===i().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),je=he&&ge&&Boolean(Y),Re=(0,n.useMemo)((()=>e.sort?e.sort:{field:"relevance"}),[e.sort]),Pe=(0,n.useMemo)((()=>{var t;const n=(t=>{switch(e.type){case y().Vz.BlocksInCollection:return e.collectionId;case y().Vz.BlocksInParent:return e.parentId;default:return null===(t=e.filters)||void 0===t?void 0:t.parentId}})(),r={...e.filters,navigableBlockContentOnly:void 0!==(null===(t=e.filters)||void 0===t?void 0:t.navigableBlockContentOnly)?e.filters.navigableBlockContentOnly:!0===o.isTitleOnly,parentId:n};return(0,y().N2)(r)}),[o.isTitleOnly,e]),Ve=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,localCacheMetadata:r,query:i}=t;j().default.measure(e,{environment:re,data:{start_time:e.startTime,success:o,surface:te,num_results:n,search_session_id:Se,local_cache_metadata:r,local_cache_readiness_timings:(0,T().Yp)(),query_length:i.length}})}),[re,te,Se]),Oe=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,query:r}=t;j().default.measure(e,{environment:re,data:{start_time:e.startTime,success:o,surface:te,num_results:n,search_session_id:Se,search_session_flow_number:ue.current.number,query_length:r.length}})}),[re,te,Se]),Ee=(0,n.useMemo)((()=>{if(o.disableLocalSearch)return!1;const t=(0,I().Bh)(ee),n=e.options.searchExperimentOverrides,r="on"===(null==n?void 0:n["search-no-local-blending"]);return"trash"===te||(0,I().Bi)({isLocalBlendingDisabled:r,queryOperations:t,queryText:ee,querySort:Re})}),[o.disableLocalSearch,e.options.searchExperimentOverrides,ee,Re,te]),Le=(0,l().K8)((()=>L().A.state.localSearchableBlocksCache),[]),De=(0,W().fJ)(R().T.searchActions),qe=(0,n.useCallback)((t=>{var o;if(!Ee)return void fe((e=>({...e,localResults:[],numTotalLocalResults:0})));const n=j().default.mark("rum.local_quick_search_query"),{query:r,spaceStore:i}=t,a=ye&&!ge&&(0,x().Xk)(y().Iy,te);if("resolved"!==De.status)return;const s=X===y().Vz.CollectionsInSpace,l=s&&0===r.length?function(e){const{spaceStore:t,environment:o}=e,n=(0,C().F)({currentUserId:o.currentUser.id,spaceId:t.id}).map((e=>{const o=N().m.createChildStore(t,{table:g().Vl,id:e}).getParentBlockStore();if(null==o?void 0:o.pathIsAccessibleAndAlive())return o}));return(0,f().oE)(n)}({environment:re,spaceStore:i}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[y().Ni.Local],featureGroups:[],serverEventProperties:void 0}))):[],c=(0,T().PE)({environment:re,overrideCurrentUserId:re.currentUser.id,overrideSpaceId:i.id,overrideLocalSearchableBlocksCache:Le}),d=(0,I().Er)(re).hasPublicAccessPermission,{filters:u,excludedBlockIds:p}=(0,h().CT)({peopleBlocksToInclude:ne,filters:Pe,excludedBlockIds:void 0,spaceIdCreator:re.idCreator.getSpaceIdCreatorSync(i.id)}),v=(0,F().S6)({environment:re,parentStore:i,spaceStore:i,isOnline:ge,requestInput:{query:{text:r,filters:{...u,blockTypes:$({blockTypes:null===(o=e.filters)||void 0===o?void 0:o.blockTypes,queryType:X}),isOfflineOnly:a},sort:{field:"relevance"}},limit:he?oe:Math.min(oe,5)},localSearchCache:Le,forceLocalCacheUsage:"trash"===te,shouldUseNewRerankerDebugOverrideEnabled:Be,shouldLimitLocalResultsWhenOnline:!he,hasPublicAccessPermission:d}),b=je?U({query:r,serverResults:Xe.current}):[],w=v&&S().Q.unwrapOr(v,void 0),k=(null==w?void 0:w.results)??[],M=(null==w?void 0:w.total)??0;let A=f().hS([...l,...k,...b],(e=>(0,z().a)(e)));A=s?Q(A):A,A=A.filter((e=>!p.includes(e.id)&&!(m.excludedBlockIds??[]).includes(e.id)&&(null==Ie?void 0:Ie.id)===e.spaceId)),fe((e=>e.query!==r?e:(tt.current=A.map((e=>e.id)),Ve(n,{query:r,isSuccess:Boolean(w),totalResultsCount:M,localCacheMetadata:c}),me(r),{...e,localResults:A,isResultsLoading:!he&&e.isResultsLoading,numTotalLocalResults:M})))}),[ye,ge,te,De.status,X,re,Le,Pe,null===(t=e.filters)||void 0===t?void 0:t.blockTypes,he,Ie,oe,Be,je,Ve,me,m.excludedBlockIds,Ee,ne]),Ne="mini_quick_find"===te?40:P().GR,We=(0,a().Y)(qe,Ne),ze=(0,n.useCallback)((t=>{const{result:o,isMetaClick:n,context:i}=t,a=void 0!==o.workflowData;let s=(0,A().Qe)(o.store,ie,re,!1);var l;a&&(s=null===(l=o.workflowData)||void 0===l?void 0:l.name);const c=(0,V().uv)({query:ee,resultText:s??"",isLastQueryTermPartialMatchOK:!0}),d=O().default.state.sidebarSpaceStore,u=Boolean(null==d?void 0:d.getSettings().enable_ai_training);(0,r().u)({environment:re,event:{eventName:"select_search_item",eventProperties:{...o.serverEventProperties&&o.serverEventProperties["server-query"]?{"server-query":o.serverEventProperties["server-query"]}:{},queryText:o.serverEventProperties&&o.serverEventProperties["server-query"]&&o.serverEventProperties["server-query"].query?o.serverEventProperties["server-query"].query:ee,sources:o.sources,localSources:Array.from(o.localSource||new Set),searchSessionId:Se,aiSessionId:void 0,traceId:void 0,searchSessionFlowNumber:ue.current.number,context:i,queryStringLength:ee.length,isTitleMatch:c,queryIfLeap:u?ee:void 0,totalSearchResultCount:Me+Ae,numLocalResults:ke.length,numTotalLocalResults:Me,isMobile:re.device.isMobile,isMetaClick:n,hasFilters:Boolean(e.filters),originalPosition:o.originalPosition,selectedItemIndex:o.originalPosition,selectedSearchResultMetadata:{blockId:o.id,blockType:a?"workflow":o.store.getModel().type},searchSource:te,verificationState:(0,_().i1)(o.store)}}})}),[re,Me,Ae,ke,ee,Se,ue,e.filters,te,ie]),Fe=ae===ee,He=f().n4(se,e.filters),Ke=f().n4(le,e.sort),Ue=f().n4(ce,e.options.searchExperimentOverrides),$e=de===J,Qe=He&&Fe&&Ke&&Ue&&$e,Ge=!Z&&Ie&&!Qe,Ye=Boolean(ae&&!ee)||!He||!Ke||!Ue||!$e,Ze=(0,n.useRef)(!1),Je=(0,n.useRef)([]),Xe=(0,n.useRef)([]),et=(0,n.useRef)([]),tt=(0,n.useRef)([]),ot=(0,l().K8)((()=>{if("mention_menu"!==te)return;return D().A.getMentionedIds(re.currentUser.id)}),[re.currentUser.id,te]),nt=(0,n.useCallback)((async t=>{xe.current=j().default.mark("time_to_render_search_results");const o=j().default.mark("rum.server_quick_search_query"),{query:n,spaceStore:r,size:i}=t,a=r.id;if(he&&!je)return;const s=!ve.current&&He?Je.current:[],l=je?U({query:n,serverResults:Xe.current}):[];if(je&&(n.length<=1||l.length>=5||et.current.some((e=>e===n))))return;et.current.push(n);const c=f().sb([...m.excludedBlockIds??[],...s.map((e=>e.id)),...tt.current||[],...Xe.current.map((e=>e.id))]),{filters:d,excludedBlockIds:p}=(0,h().CT)({peopleBlocksToInclude:ne,filters:Pe,excludedBlockIds:c,spaceIdCreator:re.idCreator.getSpaceIdCreatorSync(a)}),g={...m,excludedBlockIds:p,query:n,sort:Re,filters:d,recentlyMentionedPageIds:ot,spaceId:a,searchSessionFlowNumber:ue.current.number,searchSessionId:Se,limit:i,recentPagesForBoosting:(0,M().cs)(E().A.getWithoutSubscribing(a)),ignoresHighlight:"mini_quick_find"!==te,searchExperimentOverrides:e.options.searchExperimentOverrides,debug:J},y=await k().callApi({eventName:"search",environment:re,data:g});if(!y||"failed"===y.type)return void fe((e=>({...e,isResultsLoading:!1})));const b=y.data.total,S=(0,w().MU)((0,x().WP)(y.data.trackEventProperties).map((([e,t])=>[`server-${e}`,t]))),C=y.data.results.slice(0,i).map(((e,t)=>{const o=q().B.createChildStore(r,{id:e.id,spaceId:e.spaceId,table:"block"}),n=je?function(e){const{result:t,store:o,environment:n}=e;if(t.terms)return t.terms;const r=o.getModel();if(!r)return[];const i=n.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(n.currentUser.id),a=(0,v().KM)((0,u().g)({blockValue:r,getRecordValue:i}).text);if(!a)return[];return(0,V().Nt)(a)}({environment:re,store:o,result:e}):e.terms;return{store:o,originalPosition:t,...e,serverEventProperties:S,terms:n}}));Ze.current=!(b<i);const T=f().hS([...s,...C],(e=>(0,z().a)(e)));Je.current=T,Xe.current=f().hS([...je?C:[],...Xe.current],(e=>(0,z().a)(e))),je||(fe((e=>e.query!==n?e:(Oe(o,{query:n,isSuccess:"success"===y.type,totalResultsCount:b}),{...e,serverResults:T,isResultsLoading:!1,numTotalServerResults:b,debugInfo:y.data.debug}))),me(n))}),[he,je,He,m,e.options.searchExperimentOverrides,Re,Pe,ot,Se,te,re,me,Oe,J,ne]),rt=(0,n.useCallback)((e=>{!Z&&Ie&&Ze.current&&!Te&&ge&&(Ze.current=!1,ve.current=!1,fe((e=>({...e,isResultsLoading:!0}))),nt({query:ee,spaceStore:Ie,size:e??20}))}),[Ie,Z,nt,ge,Te,ee]),it="mini_quick_find"===te?100:P().ab,at=(0,c().d)(rt,it),st=(0,a().Y)(nt,je?0:P().ab),lt=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{!lt.current&&null!=Ie&&Ie.id&&"mini_quick_find"!==te&&(lt.current=!0,k().callApi({eventName:"warmSearchCache",environment:re,data:{spaceId:Ie.id}}))}),[null==Ie?void 0:Ie.id,re,te]),(0,n.useEffect)((()=>{Ye&&(Xe.current=[],et.current=[],Je.current=[],fe((e=>({...K(),searchSessionId:e.searchSessionId})))),Ge&&(ve.current=!0,fe((e=>({...e,isResultsLoading:!0,query:ee}))),We({query:ee,spaceStore:Ie}),st({query:ee,spaceStore:Ie,size:oe}))}),[Ie,We,st,oe,ee,Ge,Ye,te]),{results:_e,isResultsLoading:Te,searchSessionId:Se,fetchAdditionalServerResultsOnChange:!Z&&!he&&Ze.current&&Qe?at:void 0,searchSessionFlowNumber:ue.current.number,hasMoreResults:Ze.current,debugInfo:be.debugInfo,searchAnalytics:{trackSelectSearchItem:ze,endTimeToRenderServerResultsTiming:we}}}function K(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,m().JW)(),isResultsLoading:!1,debugInfo:void 0}}function U(e){const{query:t,serverResults:o}=e;return t?o.filter((e=>(0,V().uv)({query:t,resultText:(e.terms??[]).join(" "),isLastQueryTermPartialMatchOK:!0}))):[]}function $(e){const{blockTypes:t,queryType:o}=e;switch(o){case y().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case y().Vz.BlocksInCollection:return["page","collection_view_page"];case y().Vz.BlocksInSpace:default:return t??[]}}function Q(e){const t=new Set;return e.filter((e=>{const o=e.store,n=(null==o?void 0:o.getCollectionStores())??[];if(n.every((e=>t.has(e.id))))return!1;for(const r of n)t.add(r.id);return!0}))}},149375:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},175320:(e,t,o)=>{o.d(t,{lv:()=>y,C5:()=>g,u7:()=>v,uh:()=>h});var n=()=>o(560198),r=()=>o(267785),i=()=>o(100622);const a="theme";var s=()=>o(534177),l=()=>o(20822),c=()=>o(661179),d=()=>o(44551);const u=15;function p(e,t){const{ThemeStore:o}=e,{mode:s,usingSystemTheme:l}=t;if(n()._u)return;const c={mode:s};var u,p;o.setState(c),e.mobileNative&&e.mobileNative.setTheme(s,l),u=function(e,t){const o=(0,i().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:i().Tj.white,blue:i().Tj.blue},borderRadius:4,textColor:o.text.primary,popoverBackgroundColor:o.popoverBackground,popoverBoxShadow:o.shadowMD,inputBoxShadow:o.inputBoxShadow,inputBackgroundColor:o.inputBackground,dividerColor:o.darkDividerColor,shadowOpacity:o.shadowOpacity}}(s,l),null===d().electronApi||void 0===d().electronApi||null===(p=d().electronApi.setTheme)||void 0===p||p.call(d().electronApi,u);try{localStorage.setItem(a,JSON.stringify(c))}catch(m){(0,r().reportLocalStorageError)(a,JSON.stringify(c),"ThemeActions",m)}v(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function v(e){if(0===c().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function g(e){l().A.setState(e)}function h(e){const t=y(e);switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let o="light";o=t&&t.api.getTheme?await t.api.getTheme():(0,n().VD)(e),p(e,{mode:o,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function y(e){const t=l().A.state||"system";return"dark"===(o=t)||"light"===o||"system"===o?o:"system";var o}},212473:(e,t,o)=>{o.r(t),o.d(t,{arrowUpRightSquareIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,n.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},i=(0,o(340498).wt)("arrowUpRightSquare",r)},265665:(e,t,o)=>{o.d(t,{j:()=>c});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(284371),s=()=>o(859428);var l=o(474848);function c({children:e,style:t,tooltipStyle:o,placement:c="bottom"}){const{isSafari:d}=(0,r().Y0)(),u=(0,n.useRef)(null),p=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((([e])=>{o(e.target.scrollWidth>e.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(u),m=(0,i().IS)((()=>({overflowText:{...a().RC,...t}})),[t]);return(0,l.jsx)(s().A,{delayThreshold:500,placement:c,textWrap:!0,style:o,forceVisibleState:!(d||!p)&&void 0,renderTooltip:()=>p?e:void 0,render:t=>(0,l.jsx)("div",{ref:u,style:m.overflowText,...t,children:e})})}},279900:(e,t,o)=>{function n(e){let t,o,n;return async(...r)=>t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}o.d(t,{A:()=>n})},298697:(e,t,o)=>{o.d(t,{A:()=>s});o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(710149),a=o(474848);function s({paragraphs:e}){const t=(0,r().IS)((e=>({skeletonRect:{borderRadius:4,backgroundColor:e.lightDividerColor}})),[]),o=null==e?void 0:e.map(((e,o)=>{const r={height:e.lineHeight,marginTop:e.lineMargin,marginBottom:e.lineMargin},s={marginTop:e.sectionMargin,marginBottom:e.sectionMargin},l=[...Array(e.repeat||1)].map(((o,n)=>(0,a.jsx)("div",{style:s,children:e.sectionWidths.map(((e,o)=>(0,a.jsx)(i().A,{style:{...t.skeletonRect,...r,width:`${e}%`}},o)))},n)));return(0,a.jsxs)(n.Fragment,{children:[" ",l," "]},o)}));return(0,a.jsxs)(a.Fragment,{children:[" ",o," "]})}},315564:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("locked",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.79395 14.7227H11.1992C12.252 14.7227 12.7783 14.1963 12.7783 13.0479V8.20801C12.7783 7.19629 12.3682 6.66992 11.541 6.56055V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.56055C3.625 6.66992 3.21484 7.19629 3.21484 8.20801V13.0479C3.21484 14.1963 3.73438 14.7227 4.79395 14.7227ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.54004H5.75098V4.83105ZM4.99219 13.5059C4.69141 13.5059 4.54102 13.3623 4.54102 13V8.25586C4.54102 7.89355 4.69141 7.76367 4.99219 7.76367H11.0078C11.3086 7.76367 11.4521 7.89355 11.4521 8.25586V13C11.4521 13.3623 11.3086 13.5059 11.0078 13.5059H4.99219Z"})})},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},426388:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("notionLogo",{viewBox:"0 0 120 126",svg:(0,n.jsx)("path",{d:"M 20.6927 21.9315C 24.5836 25.0924 26.0432 24.8512 33.3492 24.3638L 102.228 20.2279C 103.689 20.2279 102.474 18.7705 101.987 18.5283L 90.5477 10.2586C 88.3558 8.55699 85.4356 6.60818 79.8387 7.09563L 13.1433 11.9602C 10.711 12.2014 10.2251 13.4175 11.1939 14.3924L 20.6927 21.9315ZM 24.8281 37.9835L 24.8281 110.456C 24.8281 114.351 26.7745 115.808 31.1553 115.567L 106.853 111.187C 111.236 110.946 111.724 108.267 111.724 105.103L 111.724 33.1169C 111.724 29.958 110.509 28.2544 107.826 28.4976L 28.721 33.1169C 25.8018 33.3622 24.8281 34.8225 24.8281 37.9835ZM 99.5567 41.8711C 100.042 44.0622 99.5567 46.2512 97.3618 46.4974L 93.7143 47.2241L 93.7143 100.728C 90.5477 102.43 87.6275 103.403 85.1942 103.403C 81.2983 103.403 80.3226 102.186 77.4044 98.54L 53.5471 61.087L 53.5471 97.3239L 61.0964 99.0275C 61.0964 99.0275 61.0964 103.403 55.0057 103.403L 38.2148 104.377C 37.727 103.403 38.2148 100.973 39.9179 100.486L 44.2996 99.2717L 44.2996 51.36L 38.2158 50.8725C 37.728 48.6815 38.9431 45.5225 42.3532 45.2773L 60.3661 44.0631L 85.1942 82.0036L 85.1942 48.4402L 78.864 47.7136C 78.3781 45.0351 80.3226 43.0902 82.7569 42.849L 99.5567 41.8711ZM 7.5434 5.39404L 76.9175 0.285276C 85.4366 -0.445402 87.6285 0.0440428 92.983 3.93368L 115.128 19.4982C 118.782 22.1747 120 22.9034 120 25.8211L 120 111.187C 120 116.537 118.051 119.701 111.237 120.185L 30.6734 125.05C 25.5584 125.294 23.124 124.565 20.4453 121.158L 4.13735 99.9994C 1.21516 96.1048 0 93.191 0 89.7819L 0 13.903C 0 9.5279 1.94945 5.8785 7.5434 5.39404Z"})})},430102:(e,t,o)=>{o.d(t,{I:()=>p});var n=o(296540),r=()=>o(401497),i=()=>o(718827),a=()=>o(606712),s=()=>o(150161),l=()=>o(854705),c=()=>o(100622),d=()=>o(859428),u=o(474848);const p=n.memo(n.forwardRef((function(e,t){const{style:o,color:n,title:i,onClick:a,onDropdownClick:l,mainButtonTooltip:c,dropdownTooltip:d,iconLeading:p,iconStyle:g,mainButtonStyle:h,isLoading:y,className:b,disabled:f,disableDropdown:S,size:x,variant:w="solid"}=e,k=(0,r().IS)((e=>{const t=(0,s().qq)({size:x,isButtonGapEnabled:!1});return{wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:6,overflow:"hidden",height:t.height,...o},border:{position:"absolute",pointerEvents:"none",border:"outline"===w?`1px solid ${e.outlineButtonBorder}`:void 0,borderRadius:t.borderRadius,top:0,insetInlineStart:0,insetInlineEnd:0,bottom:0}}}),[x,w,o]);return(0,u.jsxs)("div",{style:k.wrap,className:b,children:[(0,u.jsx)(m,{ref:t,color:n,disabled:f,iconLeading:p,iconStyle:g,isLoading:y,mainButtonStyle:h,mainButtonTooltip:c,onClick:a,title:i,variant:w}),(0,u.jsx)(v,{ref:t,color:n,disabled:S,dropdownTooltip:d,isLoading:y,onDropdownClick:l,variant:w}),(0,u.jsx)("div",{style:k.border})]})}))),m=n.memo(n.forwardRef((function(e,t){const{mainButtonTooltip:n,onClick:a,disabled:l,isLoading:p,iconLeading:m,title:v,color:y,variant:b,mainButtonStyle:f,iconStyle:S,size:x}=e,w=(0,r().IS)((e=>{const t=(0,s().qq)({size:x,isButtonGapEnabled:!1}),n=h({color:y,variant:b,theme:e});return{mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderStartStartRadius:6,borderEndStartRadius:6,paddingInlineStart:t.paddingInlineStart,paddingInlineEnd:t.paddingInlineEnd,fontSize:t.fontSize,fontWeight:o(284371).Wy.medium,...n.default,...f},icon:{width:12,marginInlineEnd:6,fill:g(y,b,{outline:n.default.color,solid:{blue:c().Tj.white,black:c().Tj.white,orange:e.palette.orange[400]}}),...S},buttonHoveredStyle:n.hovered,buttonPressedStyle:n.pressed}}),[y,S,f,x,b]);return n?(0,u.jsx)(d().A,{renderTooltip:()=>n,render:e=>(0,u.jsxs)(i().Ay,{ref:t,style:w.mainButton,onClick:a,disabled:l,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,...e,children:[m?m(w.icon):null,v]})}):(0,u.jsxs)(i().Ay,{ref:t,style:w.mainButton,onClick:a,disabled:l||p,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,children:[p?(0,u.jsx)(o(98126).A,{style:{marginInlineEnd:4}}):null,m?m(w.icon):null,v]})}))),v=n.memo(n.forwardRef((function(e,t){const{disableDropdown:a,disabled:p,dropdownTooltip:m,onDropdownClick:v,isLoading:y,size:b,color:f,variant:S}=e,{isMobile:x}=(0,o(484714).Y0)(),w=(0,r().IS)((e=>{const t=(0,s().qq)({size:b,isButtonGapEnabled:!1}),n=h({color:f,variant:S,theme:e});return{dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:x?28:24,alignSelf:"stretch",borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius,boxShadow:"outline"===S||"blue"===f||"black"===f?`inset 1px 0 0 ${e.darkDividerColor}`:"orange"===f?`${e.palette.orange["dark"===e.mode?200:100]} 1px 0 0 inset`:(0,o(534177).HB)(f),...n.default},dropdownButtonIcon:{width:o(340498).Ev.sm,marginTop:2,fill:g(f,S,{outline:n.default.color,solid:{blue:c().Tj.white,black:c().Tj.white,orange:e.palette.orange["dark"===e.mode?500:400]}})},buttonHoveredStyle:n.hovered,buttonPressedStyle:n.pressed}}),[f,x,b,S]),k=(0,n.useCallback)((e=>(0,u.jsx)(i().Ay,{ref:t,style:w.dropdownButton,onClick:v,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,...e,children:(0,l().arrowChevronSingleDownFillSmallIcon)(w.dropdownButtonIcon)})),[v,t,w.buttonHoveredStyle,w.buttonPressedStyle,w.dropdownButton,w.dropdownButtonIcon]),C=(0,n.useCallback)((()=>m),[m]);return a||p?null:m?(0,u.jsx)(d().A,{renderTooltip:C,render:k}):(0,u.jsx)(i().Ay,{ref:t,style:w.dropdownButton,onClick:v,disabledFeedback:!0,hoveredStyle:w.buttonHoveredStyle,pressedStyle:w.buttonPressedStyle,disabled:y,children:(0,l().arrowChevronSingleDownFillSmallIcon)(w.dropdownButtonIcon)})})));function g(e,t,o){return"object"!=typeof o[t]?o[t]:o[t][e]}function h(e){const{color:t,variant:o,theme:n}=e;return{default:{background:g(t,o,{outline:void 0,solid:{blue:n.blue.background.accentPrimary,black:n.background.accentPrimary,orange:n.orange.background.secondaryTranslucent}}),color:g(t,o,{outline:{blue:n.blue.text.accentPrimary,black:n.text.primary,orange:n.orange.text.accentPrimary},solid:{blue:n.blue.text.inversePrimary,black:n.text.inversePrimary,orange:n.orange.text.accentPrimary}})},hovered:{background:g(t,o,{outline:{blue:n.blue.background.secondaryTranslucent,black:n.gray.background.secondaryTranslucent,orange:n.orange.background.secondaryTranslucent},solid:{blue:(0,a().R)({color:n.blue.background.accentPrimary,mode:n.mode}),black:(0,a().R)({color:n.background.accentPrimary,mode:"dark"}),orange:(0,a().R)({color:n.orange.background.secondaryTranslucent,mode:n.mode})}})},pressed:{background:g(t,o,{outline:{blue:(0,a().y)({color:n.blue.background.secondaryTranslucent,mode:n.mode}),black:(0,a().y)({color:n.gray.background.secondaryTranslucent,mode:n.mode}),orange:(0,a().y)({color:n.orange.background.secondaryTranslucent,mode:n.mode})},solid:{blue:(0,a().y)({color:n.blue.background.accentPrimary,mode:n.mode}),black:(0,a().y)({color:n.background.accentPrimary,mode:"dark"}),orange:(0,a().y)({color:n.orange.background.secondaryTranslucent,mode:n.mode})}})}}}},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=l.splice(e,1)[0];s.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},471095:(e,t,o)=>{o.d(t,{i:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,o(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},r=(0,o(340498).wt)("lockFill",n)},482871:(e,t,o)=>{o.d(t,{z:()=>d});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(430670),o(581454);var n=()=>o(898244),r=()=>o(448801),i=()=>o(179034),a=()=>o(722101),s=()=>o(878710),l=(o(354520),()=>o(496603));function c(e){const{collectionContextStore:t,collectionViewStore:o,transaction:r}=e,c=o.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:o}=e;if(!t||t.length<=n().WF)return[];const r=t.filter((e=>!o.has(e)));return l().sb([...r.reverse(),...l().o8(t).reverse()]).slice(0,t.length-n().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const n of p)a().TF({parentStore:c,childToRemoveStore:(0,s().v3)(c,{table:i().ev,id:n}),transaction:r})}function d(e){const{resultIds:t,collectionViewStore:o,collectionContextStore:l,transaction:d}=e,u=o.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,r().i)(p,t.slice(0,n().WF));for(const[n,r]of Object.entries(m))if(r){const e=(0,s().v3)(o,{table:i().ev,id:r});a().nc({parentStore:u,insertStore:(0,s().v3)(o,{table:i().ev,id:n}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===n)),r=t[e-1],l=r?(0,s().v3)(o,{table:i().ev,id:r}):void 0;a().WH({parentStore:u,insertStore:(0,s().v3)(o,{table:i().ev,id:n}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:o,transaction:d})}},491848:(e,t,o)=>{o.d(t,{w:()=>r});o(898992),o(672577);var n=()=>o(755199);function r({collectionContextStore:e,transaction:t}){const o="collectionTypedView"===e.contextType,r=e.databaseType,i=e.collectionStoresStore.state,a=i.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||i[0];!o&&a&&n().ee({transaction:t,databaseType:r,collectionId:a.id})}},497222:(e,t,o)=>{o.d(t,{A:()=>m});o(296540);var n=()=>o(804773),r=()=>o(401497),i=()=>o(252291),a=()=>o(906380),s=()=>o(30626),l=()=>o(284371),c=()=>o(760217),d=()=>o(612900),u=()=>o(700251),p=o(474848);function m(e){const{icon:t,iconStyle:o,title:m,caption:v,right:g,rightStyle:h,isRed:y,isGray:b,isOrange:f,onClick:S,onMouseDown:x,onMouseEnter:w,onMouseLeave:k,disabled:C,showChevron:T,chevronStyle:M,rotateChevron:A,showDragHandle:I,focused:_,textWrapperStyle:B,shouldWrapCaption:j,desktopIconStyle:R,buttonStyle:P,desktopTitleStyle:V,source:O,menuListItemProps:E,isPulsing:L}=e,D=(0,u().y$)(),q=(0,r().IS)((e=>({style:{...(e=>b?{color:e.text.secondary,fill:e.icon.secondary}:f?{color:e.orange.icon.accentPrimary,fill:e.orange.icon.accentPrimary}:{color:e.text.primary,fill:e.icon.primary})(e),opacity:C?.4:void 0,...P},leftIconStyle:{width:D,height:D,...t===s()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:C?e.text.primary:e.text.tertiary,fill:C?e.icon.primary:e.icon.tertiary,flexShrink:0,...h},rightChevronStyle:{marginInlineStart:"tableHeaderMenu"===O?0:6,transition:"transform 200ms ease-in-out",...A&&{transform:"rotate(90deg)"},...M}})),[b,f,C,o,t,M,h,P,D,A,O]),{itemRef:N,isTabbable:W,onKeyDown:z,onFocus:F}=(0,n().e)(),H=(0,p.jsx)(c().A,{ref:N,role:"menuitem",icon:null==t?void 0:t(q.leftIconStyle),focused:_||!1,disabled:C,title:m,caption:v,shouldWrapCaption:j,desktopTitleStyle:{flexGrow:1,flexShrink:1,...V},onKeyDown:z,onFocus:F,disallowTabbing:!W,showDragHandle:I,buttonStyle:q.style,rightStyle:q.rightStyle,isRedOnHover:y,ignoreLocalHoverState:!!C||void 0,right:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{...l().RC,display:"flex"},children:g}),!C&&T?(0,p.jsx)(i().I,{icon:a().arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tableHeaderMenu"===O?"secondary":"tertiary",style:q.rightChevronStyle}):null]}),onClick:S,onMouseDown:x,onMouseEnter:w,onMouseLeave:k,textWrapperStyle:B,desktopIconStyle:R,reducedPadding:e.reducedPadding,...E});return L?(0,p.jsx)(d().u,{borderRadius:6,shape:"square",children:H}):H}},505108:(e,t,o)=>{o.d(t,{a:()=>m});var n=o(296540),r=()=>o(401497),i=()=>o(699143),a=()=>o(493552),s=()=>o(534177),l=()=>o(284371),c=()=>o(819121),d=()=>o(451306),u=o(474848);function p(e){const{disabled:t,checked:o,selectorSize:n}=e,[i,a]=(0,c().A)(),s=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:i}=e;return(0,r().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}`,background:o?e.background.tertiaryTranslucent:e.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.border.strong}`,background:e.background.primary},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===i?14:18,height:"small"===i?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,i])}({checked:o,disabled:t,isFocusVisible:a,selectorSize:n});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{ref:i,type:"radio",style:s.input,className:"radio-button",...e}),(0,u.jsx)("span",{...(0,d().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}const m=n.forwardRef((function({additionalContent:e,description:t,isDisabled:o,isSelected:a,label:s,name:c,onChange:d,width:p="fill",selectorSize:m="normal",selectAlignXAxis:h="left",selectAlignYAxis:y="center",selectType:b="checkbox",style:f,supportText:S,value:x,colorVariant:w,alignAdditionalContent:k,...C},T){const M=(0,n.useId)(),A=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:i}=e;return(0,r().IS)((e=>{const r=t&&!o?e.blue.border.accentPrimary:e.border.primary;return{container:{display:"flex",alignItems:i??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${r}`,...!o&&{cursor:"pointer"}},title:{fontWeight:l().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,i])}({isSelected:a,isDisabled:o,selectAlignYAxis:y,alignAdditionalContent:k}),I=(0,u.jsxs)(i().Y1,{direction:"horizontal",align:"top"===y?"top-left":"center-left",gap:12,width:p,children:[(0,u.jsx)("div",{style:A.selectorWrapper,children:(0,u.jsx)(g,{id:M,selectType:b,name:c,value:x,onChange:d,isSelected:a,selectorSize:m,isDisabled:o,...C})}),(0,u.jsx)(v,{colorVariant:w,description:t,label:s,selectorSize:m,supportText:S,isDisabled:o})]}),_=(0,u.jsxs)(i().Y1,{direction:"horizontal",align:"top"===y?"top-center":"center",gap:12,children:[(0,u.jsx)(v,{colorVariant:w,description:t,label:s,selectorSize:m,supportText:S,isDisabled:o}),(0,u.jsx)("div",{style:{...A.selectorWrapper,...A.rightAlignSelectorWrapper},children:(0,u.jsx)(g,{id:M,selectType:b,name:c,value:x,onChange:d,selectorSize:m,isSelected:a,isDisabled:o,...C})})]}),B=e?(0,u.jsx)("div",{style:A.additionalContentWrapper,children:e}):null;return(0,u.jsx)("label",{ref:T,style:{...A.container,...f},htmlFor:M,children:"left"===h?(0,u.jsxs)(u.Fragment,{children:[I,B]}):(0,u.jsxs)(u.Fragment,{children:[B,_]})})}));function v(e){const{description:t,label:o,supportText:n,selectorSize:r,isDisabled:l,colorVariant:c}=e;let d;return"large"===r?d="Page-Content/Text-Block":"normal"===r||void 0===r?d="Body-sm/Medium":"small"===r?d="Caption/Regular":(0,s().HB)(r),(0,u.jsxs)(i().Y1,{gap:4,children:[(0,u.jsxs)(i().Y1,{gap:2,children:[(0,u.jsx)(a().D,{styleKey:d,colorVariant:c||(l?"disabled":"primary"),children:o}),t?(0,u.jsx)(a().D,{styleKey:"Caption/Regular",colorVariant:l?"disabled":"secondary",children:t}):null]}),n?(0,u.jsx)(a().D,{styleKey:"Caption/Medium",colorVariant:"tertiary",children:n}):null]})}function g(e){const{selectType:t,selectorSize:n="normal",id:i,name:a,value:l,onChange:c,isSelected:d,isDisabled:m,...v}=e,g=(0,r().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,u.jsx)(p,{id:i,name:a,value:l,onChange:c,checked:d,disabled:m,selectorSize:n,...v});case"checkbox":return(0,u.jsx)("div",{style:g.checkboxWrapper,children:(0,u.jsx)(o(115562).W,{id:i,name:a,value:l,onChange:c,checked:d,disabled:m,selectorSize:n,...v})});case"none":return null;default:(0,s().HB)(t)}}},529803:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{}const r=new n},539412:(e,t,o)=>{o.d(t,{$y:()=>b,jc:()=>y,x9:()=>h});o(296540);var n=()=>o(564884),r=()=>o(484714),i=()=>o(56366),a=()=>o(212473),s=()=>o(922189),l=()=>o(69708),c=()=>o(209660),d=()=>o(511393),u=()=>o(529803),p=()=>o(780262),m=()=>o(807778),v=()=>o(671812),g=o(474848);function h(){const e=(0,i().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]),t=(0,r().v3)();return(0,i().K8)((()=>(0,m().Jq)(t)),[t])&&e}function y(){return(0,i().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,r().v3)(),t=y(),o=(0,i().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),n=(0,i().K8)((()=>(0,d().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(n,o),m=function(e){if(e)return;return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(n),h=function(e,t,o){if(t){const n=(0,v().a)(o);return o=>{n&&(f(t,e),n(o))}}return o=>{f(t,e),c().Ow()}}(e,n,t),b=function(e){if(e)return(0,g.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(n);return{clickAction:h,ctaMessage:b,primaryMessage:p,secondaryMessage:m,ctaIcon:n?a().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:n?b:m,isWorkspaceOwner:n,overdueInvoiceCount:o}}function f(e,t){(0,n().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(401497),i=()=>o(98126),a=()=>o(62856),s=o(474848);function l({loadingMessage:e}){const t=(0,r().DP)(),o=(0,a().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:o?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(i().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:t.text.secondary},children:e}):void 0]}):void 0})}},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>i,RH:()=>r,Yi:()=>s,ls:()=>n});const n=32,r=202,i=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},610101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return!1}}const r=new n},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(645873);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},614415:(e,t,o)=>{o.d(t,{Wx:()=>i,fM:()=>n,sM:()=>r});const n=new(o(645873).O2)("framer-motion",(async()=>await Promise.all([o.e(44711),o.e(53321),o.e(37043)]).then(o.bind(o,301716))));function r(e){return e.useAnimation()}function i(e,...t){return e.useInView(...t)}},621837:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.65 2.65 10.7 10.7",svg:(0,o(474848).jsx)("path",{d:"M8 2.65a.75.75 0 0 1 .75.75v3.85h3.85a.75.75 0 0 1 0 1.5H8.75v3.85l-.004.077a.75.75 0 0 1-1.492 0L7.25 12.6V8.75H3.4a.75.75 0 0 1 0-1.5h3.85V3.4A.75.75 0 0 1 8 2.65"})},r=(0,o(340498).wt)("plusFillSmall",n)},627503:(e,t,o)=>{o.d(t,{a:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},r=(0,o(340498).wt)("duplicateSmall",n)},685100:(e,t,o)=>{o.r(t),o.d(t,{MoveOrDuplicateProgress:()=>le().A,MoveToMenuRenderer:()=>ae,MoveToOrCreateMenu:()=>n().v8,MoveToSnackbarButtons:()=>se().F});var n=()=>o(963248),r=(o(898992),o(581454),o(737550),o(296540)),i=()=>o(726637),a=()=>o(484714),s=()=>o(56366),l=()=>o(30537),c=()=>o(165358),d=()=>o(69708),u=()=>o(95313),p=()=>o(901389),m=()=>o(333334),v=()=>o(301953),g=()=>o(962910),h=()=>o(297175),y=()=>o(417392),b=()=>o(500758),f=()=>o(691298),S=()=>o(188669);o(354520);const x=(0,o(340498).xh)("squareOnSquarePlus",{default:{loader:()=>o.e(59994).then(o.bind(o,904789))},small:{loader:()=>o.e(59994).then(o.bind(o,728567))},fill:{loader:()=>o.e(59994).then(o.bind(o,205317))},fillSmall:{loader:()=>o.e(59994).then(o.bind(o,62428))}},["copy","duplicate","clone","replicate","add","plus"]);var w=()=>o(201980),k=()=>o(284371),C=()=>o(761652),T=()=>o(347063),M=()=>o(241021),A=()=>o(838239),I=()=>o(227358),_=()=>o(107683),B=()=>o(697650),j=o(474848);function R({isOpen:e,onClose:t,collectionToMoveStore:o,onMoveDataSourceOnly:n,onMoveDataSourceAndViews:r}){const i=(0,s().K8)((()=>o.getParentCollectionViewBlockStore()),[o]),a=(0,s().K8)((()=>{const e=o.getParentCollectionViewBlockStore(),t=null==e?void 0:e.getCollectionStores();return 1===(null==t?void 0:t.length)&&!(0,w().w9s)(o.getDescription())}),[o]),l=(0,s().K8)((()=>(0,h().WO)({collectionViewBlockStore:i,collectionStore:o})),[i,o]),c=(0,s().K8)((()=>(0,h().h0)({collectionViewBlockStore:i,collectionStore:o}).filter((e=>"form_editor"===e.getType())).length),[i,o]),u=c>0,p=(0,B().useCollectionNameOrDefault)(o);return(0,j.jsx)(_().s,{isOpen:e,onDismiss:t,onClosed:t,areaConstraint:{width:{type:"min",length:380}},render:()=>(0,j.jsx)(T().tf,{header:(0,j.jsx)(A().Y,{iconAndTitle:(0,j.jsx)(I().Z,{iconGroup:x,title:(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.title",defaultMessage:"Moving data source {dataSourceNameWithIcon}",values:{dataSourceNameWithIcon:(0,j.jsx)(C().A,{store:o,iconSize:22,style:{fontWeight:k().Wy.semibold},useInvertedColors:!1})}})}),description:a?(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.losingDescription.description",defaultMessage:"{numViews, plural, one {This database has {numViews} view based on this data source. Moving it will also remove the database description.} other {This database has {numViews} views based on this data source. Moving it will also remove the database description.}}",values:{numViews:l}}):(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.description",defaultMessage:"{numViews, plural, one {This database has {numViews} view based on this data source.} other {This database has {numViews} views based on this data source.}}",values:{numViews:l}})}),footer:(0,j.jsx)(M().a,{layout:"vertical",primaryButtons:[{buttonType:"primary",onClick:r,label:(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceAndViewsButton.label",defaultMessage:"{numViews, plural, one {Move data source and {numViews} view} other {Move data source and {numViews} views}}",values:{numViews:l}})}],secondaryButtons:[{buttonType:"secondary",onClick:n,isDisabled:u,label:(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceOnlyButton.label",defaultMessage:"Move data source only"})}],secondaryButtonTooltip:u?(0,j.jsx)(d().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceOnlyButton.collectionHasFormView.tooltip",defaultMessage:"{formViewCount, plural, one {Delete <dataSourceNameChunk>{dataSourceName}</dataSourceNameChunk>’s form to move the data source only} other {Delete <dataSourceNameChunk>{dataSourceName}</dataSourceNameChunk>’s forms to move the data source only}}",values:{dataSourceNameChunk:(...e)=>(0,j.jsx)("b",{children:e}),dataSourceName:p,formViewCount:c}}):void 0})})})}var P=()=>o(493552),V=()=>o(820156),O=()=>o(534177),E=()=>o(895876),L=()=>o(71304);function D({error:e,destinationCollectionViewBlockStore:t,collectionToMoveStore:o}){const n=(0,d().tz)(),r=(0,a().v3)(),i=(0,s().K8)((()=>(0,L().Qe)(o,n,r)),[o,n,r]),l=(0,s().K8)((()=>(0,L().Qe)(t,n,r)),[t,n,r]),c=(0,s().K8)((()=>o.getDatabaseType()),[o]),u=(0,s().K8)((()=>{var e;return null===(e=t.getOwnedTypedCollectionStores()[0])||void 0===e?void 0:e.getDatabaseType()}),[t]);switch(e){case"cannotMoveCollection":return(0,j.jsx)(q,{destinationCollectionViewBlockTitle:l,collectionTitle:i});case"cannotMoveViews":return(0,j.jsx)(N,{destinationCollectionViewBlockTitle:l,collectionTitle:i});case"cannotMoveTypedCollection":return(0,j.jsx)(W,{collectionType:c,existingCollectionType:u});default:(0,O().HB)(e)}}function q({destinationCollectionViewBlockTitle:e,collectionTitle:t}){return(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyCollections.title",defaultMessage:"Maximum number of data sources ({maxDataSourceCount}) reached",values:{maxDataSourceCount:V().A}}),(0,j.jsx)(P().D,{styleKey:"Body/Regular",color:"error",children:(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyCollections.message",defaultMessage:"{titlesAreDefined, select, true {Remove a data source from {destinationCollectionViewBlockTitle} to move {collectionTitle}.} other {Remove a data source from the database to move this data source.}}",values:{titlesAreDefined:Boolean(t&&e),collectionTitle:(0,j.jsx)(P().D,{styleKey:"Body/Semibold",style:{display:"inline"},children:t}),destinationCollectionViewBlockTitle:(0,j.jsx)(P().D,{styleKey:"Body/Semibold",style:{display:"inline"},children:e})}})})]})}function N({destinationCollectionViewBlockTitle:e,collectionTitle:t}){return(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyViews.title",defaultMessage:"Maximum number of views ({maxViewCount}) reached",values:{maxViewCount:V().L}}),(0,j.jsx)(P().D,{styleKey:"Body/Regular",color:"error",children:(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyViews.message",defaultMessage:"{titlesAreDefined, select, true {Remove views from {destinationCollectionViewBlockTitle} to move {collectionTitle} and views.} other {Remove views from the database to move this data source and views.}}",values:{titlesAreDefined:Boolean(t&&e),collectionTitle:(0,j.jsx)(P().D,{styleKey:"Body/Semibold",style:{display:"inline"},children:t}),destinationCollectionViewBlockTitle:(0,j.jsx)(P().D,{styleKey:"Body/Semibold",style:{display:"inline"},children:e})}})})]})}function W({collectionType:e,existingCollectionType:t}){const o=(0,E()._V)(e),n=(0,E()._V)(t);return(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.cannotMoveTypedCollection.title",defaultMessage:"Cannot move a {collectionTypeName} data source into a database with a separate {existingCollectionTypeName} data source.",values:{collectionTypeName:o,existingCollectionTypeName:n}}),(0,j.jsx)(P().D,{styleKey:"Body/Regular",color:"error",children:(0,j.jsx)(d().sA,{id:"dataSourceMoveToMenu.errorDialog.cannotMoveTypedCollection.message",defaultMessage:"Please select a different destination."})})]})}var z=()=>o(998531),F=()=>o(245241),H=()=>o(805751),K=()=>o(404277),U=()=>o(89924),$=()=>o(722872),Q=()=>o(272509),G=()=>o(135599),Y=()=>o(970585),Z=()=>o(845566),J=()=>o(572748),X=()=>o(587989),ee=()=>o(276303),te=()=>o(478495);function oe(e){const{autocompleteQuery:t,desktopWidth:o,onAccept:i,onAutocompleteQueryChange:l,onCancel:c,onMouseEnter:u,collectionToMoveStore:p}=e,m=(0,a().WS)();(0,r.useEffect)((()=>(Z().x.reset(),()=>{Z().x.reset()})),[]);const v=(0,s().uB)(void 0,Y().A),g=(0,s().K8)((()=>(0,ee().wc)()),[]),h=(0,s().K8)((()=>(0,ee().NA)()),[]),y=(0,s().K8)((()=>(0,Q().I)(g)),[g]),b=(0,s().K8)((()=>(0,ee().L2)(S().Ay.state)),[]),f=(0,s().K8)((()=>{var e;return null===(e=p.getParentCollectionViewBlockStore())||void 0===e?void 0:e.id}),[p]),x=(0,G().W)({type:F().Vz.BlocksInSpace,query:t,limit:b,source:"move_to_menu",filters:{requireEditPermissions:!1,excludeSurrogateCollections:!0,excludeTemplates:!1},excludedBlockIds:[f].filter((e=>void 0!==e)),options:{disable:!1,overrideSpaceStore:g},peopleBlocksToInclude:"none"}),w=(0,r.useMemo)((()=>[p]),[p]),k=(0,J().t)({allItemsToMoveAreNavigable:!1,forceShowPrivatePageOption:!1,isAddTo:!1,isCreateIn:!1,isTurnIntoPage:!1,showDataSources:!1,onAccept:i,parentBlockId:void 0,query:t,searchResults:x,itemsToMove:w}),C=(0,s().K8)((()=>(0,ee().R3)()),[]),T=(0,r.useMemo)((()=>{if(C)return m?(0,j.jsx)(n().Xy,{autocompleteQuery:t,onAutocompleteQueryChange:l,isDataSource:!0,menuListStore:v,isLoading:x.isResultsLoading}):(0,j.jsx)(U().A,{isInput:!0,children:(0,j.jsx)(n().Xy,{autocompleteQuery:t,onAutocompleteQueryChange:l,isDataSource:!0,menuListStore:v,isLoading:x.isResultsLoading})})}),[C,m,t,l,v,x.isResultsLoading]),M=(0,r.useMemo)((()=>m?{onMouseEnter:u,menuType:$().gu.Modal,title:(0,j.jsx)(d().sA,{defaultMessage:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:(0,j.jsx)(d().sA,{defaultMessage:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:c,header:T}:{onMouseEnter:u,menuType:$().gu.Popup,width:o,header:T}),[m,u,c,T,o]);return h&&g?(0,j.jsxs)(H().A,{debugName:"DataSourceMoveToMenu",capture:!0,allowMenuList:!0,allowEsc:!0,allowLeft:!0,allowTabUntab:!1,allowUndo:!1,children:[(0,j.jsx)(z().N,{debugName:"DataSourceMoveToMenu",capture:!0,onEsc:c}),(0,j.jsx)(K().A,{...M,footer:(0,j.jsx)(n().n5,{isCreateIn:!1,isAddTo:!1,allItemsToMoveAreNavigable:!1}),children:t||m?(0,j.jsx)(X().c,{sections:k,error:void 0,menuListStore:v,initialFocus:t?0:void 0,loading:x.isResultsLoading,canLoadMore:x.hasMoreResults,onLoadMore:()=>{var e;return null===(e=x.fetchAdditionalServerResultsOnChange)||void 0===e?void 0:e.call(x,b)}}):(0,j.jsx)(te().Cr,{spaceStore:g,spaceViewStore:h,onAccept:i,itemsToMove:[p],moveToPagesOnly:y,forceShowPrivatePageOption:!1})})]}):null}function ne(){const e=(0,a().v3)(),t=(0,s().K8)((()=>{const e=S().Ay.state;if(e.isOpen&&e.blocksToMove)return{autocompleteQuery:e.autocompleteQuery,blocksToMove:e.blocksToMove,isAddTo:e.isAddTo,isOpen:e.isOpen,forceShowPrivatePageOption:Boolean(e.forceShowPrivatePageOption)}}),[]),o=i().A.isMobile,r=Boolean(null==t?void 0:t.isOpen);if((0,f().A)({shouldPreserveTextSelection:r,shouldPreserveBlockSelection:!1,shouldRestoreSelection:r&&!o}),void 0===t||!t.isOpen)return null;const l=()=>{if(S().Ay.state.isOpen&&S().Ay.state.blocksToMove){const{flowId:t,blocksToMove:o,moveToContext:n}=S().Ay.state;u().X3(e,{from:n,render_type:"web",target_block_ids:o.map((e=>e.id)),flowId:t})}m().VN({environment:e,clearSelection:!0})},{autocompleteQuery:c,blocksToMove:d,isAddTo:p}=t;return(0,j.jsx)(n().v8,{autocompleteQuery:c,blocksToMove:d,onAutocompleteQueryChange:t=>{if(S().Ay.state.isOpen){S().Ay.setState({...S().Ay.state,queryLimit:b().p1,autocompleteQuery:t});const{flowId:o,moveToContext:n}=S().Ay.state;u().cn(e,{flowId:o,from:n})}},onAccept:async t=>{if(!S().Ay.state.isOpen||!S().Ay.state.blocksToMove)return;const o=S().Ay.state.blocksToMove,n=await(0,b().OY)({environment:e,blocks:o,from:"moveTo",moveToArgs:{moveToValue:t,destination:(0,b().sZ)(t)}});if(!n.confirmed)return void l();for(const i of o){const t=await g().rW({environment:e,block:i,action:"move"});"user_canceled"===t?l():t.length>1&&S().Ay.state.isOpen&&S().Ay.setState({...S().Ay.state,blocksToMove:t})}if(S().Ay.state.isOpen){const{flowId:o,blocksToMove:n,moveToContext:r,openedTimeMs:i,autocompleteQuery:a}=S().Ay.state,s="space-private-pages"===t.type?-1:n.findIndex((e=>e.id===t.id));u().uU(e,{from:r,render_type:"web",type:t.type,target_block_ids:n.map((e=>e.id)),time_to_select_ms:Date.now()-i,selected_item_index:s,query_length:a.length,flowId:o})}const{shouldClearPagePermissions:r}=n;(async({value:t,shouldClearPagePermissions:o})=>{await m().zA({environment:e,value:t,useSudoMode:S().Ay.state.isOpen&&S().Ay.state.useSudoMode,renderType:"web",shouldClearPagePermissions:o})})({value:t,shouldClearPagePermissions:r})},onCancel:l,desktopWidth:330,isAddTo:p,isCreateIn:!1,forceShowPrivatePageOption:t.forceShowPrivatePageOption})}async function re({environment:e,moveToValue:t,shouldMoveViews:o,handleCancel:n,menuState:r,intl:i}){var a;if(!r.collectionToMoveStore||!t)return;const s=(0,b().Il)(t);if(s&&!function(e){const{destinationCollectionViewBlockStore:t,collectionToMoveStore:o,shouldMoveViews:n}=e;if(n){const e=(0,h().WO)({collectionViewBlockStore:o.getParentCollectionViewBlockStore(),collectionStore:o});return t.canAddCollectionView(e)}{const e=(0,h().h0)({collectionViewBlockStore:t,collectionStore:o}).some((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.id}))?0:1;return t.canAddCollectionView(e)}}({destinationCollectionViewBlockStore:s,collectionToMoveStore:r.collectionToMoveStore,shouldMoveViews:o}))return void p().f1((0,j.jsx)(D,{error:"cannotMoveViews",destinationCollectionViewBlockStore:s,collectionToMoveStore:r.collectionToMoveStore}));const l=await(0,b().OY)({environment:e,blocks:[],from:"moveTo",moveToArgs:{moveToValue:t,destination:(0,b().sZ)(t)}});if(!l.confirmed)return void n();const{dataSourceSessionId:c,dataSourceFrom:d,moveToContext:v,collectionToMoveStore:g,useSudoMode:y,openedTimeMs:f,autocompleteQuery:S,flowId:x}=r;u().Aw(e,{data_source_session_id:c,data_source_from:d,from:v,render_type:"web",target_collection_id:g.id,original_collection_block_id:null===(a=g.getParentCollectionViewBlockStore())||void 0===a?void 0:a.id,time_to_select_ms:Date.now()-f,query_length:S.length,flowId:x}),m().Y8({environment:e,value:t,useSudoMode:y,renderType:"web",shouldClearPagePermissions:l.shouldClearPagePermissions,shouldMoveViews:o,intl:i})}function ie(){const e=(0,a().v3)(),t=(0,d().tz)(),o=(0,s().O$)(S().Ay),n=(0,r.useCallback)((()=>{var t;if(m().VN({environment:e,clearSelection:!0}),!S().Ay.state.isOpen||!S().Ay.state.collectionToMoveStore)return;const{dataSourceSessionId:o,dataSourceFrom:n,moveToContext:r,collectionToMoveStore:i}=S().Ay.state;u().z$(e,{data_source_session_id:o,data_source_from:n,from:r,render_type:"web",target_collection_id:i.id,original_collection_block_id:null===(t=i.getParentCollectionViewBlockStore())||void 0===t?void 0:t.id})}),[e]),i=(0,r.useCallback)((()=>{S().Ay.state.isOpen&&"dataSource"===S().Ay.state.variant&&S().Ay.setState({...S().Ay.state,isConfirmationModalOpen:!1,destination:void 0})}),[]),l=(0,r.useCallback)((async(r,i)=>{o.isOpen&&await re({environment:e,moveToValue:r,shouldMoveViews:i,handleCancel:n,menuState:o,intl:t})}),[e,o,n,t]),g=(0,r.useCallback)((async e=>{if(!o.isOpen||!o.collectionToMoveStore)return;const t=(0,b().Il)(e);if(t){const e=void 0!==o.collectionToMoveStore.getDatabaseType(),n=o.collectionToMoveStore.getParentCollectionViewBlockStore();if(e&&n&&!v().i_({originBlockStore:n,destinationBlockStore:t}))return p().f1((0,j.jsx)(D,{error:"cannotMoveTypedCollection",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore})),void c().log({level:"info",from:"DataSourceMoveToMenuModal",type:"cannotMoveTypedCollection",data:{message:"Cannot move typed collection because origin and destination blocks have different app_id values.",collectionId:o.collectionToMoveStore.id,collectionType:o.collectionToMoveStore.getDatabaseType(),originBlockId:n.id,originBlockAppId:n.getFormat().app_id,destinationBlockId:t.id,destinationBlockAppId:t.getFormat().app_id}});const r=null==t?void 0:t.canAddCollection();if(!r.canAddView&&"tooManyCollections"===r.reason)return void p().f1((0,j.jsx)(D,{error:"cannotMoveCollection",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore}));if(!r.canAddView&&"tooManyViews"===r.reason&&0===(0,h().WO)({collectionViewBlockStore:t,collectionStore:o.collectionToMoveStore}))return void p().f1((0,j.jsx)(D,{error:"cannotMoveViews",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore}))}0!==(0,h().WO)({collectionViewBlockStore:o.collectionToMoveStore.getParentCollectionViewBlockStore(),collectionStore:o.collectionToMoveStore})?S().Ay.state.isOpen&&"dataSource"===S().Ay.state.variant&&S().Ay.setState({...S().Ay.state,isConfirmationModalOpen:!0,destination:e}):await l(e,!1)}),[o,l]),y=(0,r.useCallback)((t=>{o.isOpen&&(S().Ay.setState({...o,queryLimit:b().p1,autocompleteQuery:t}),u().cn(e,{flowId:o.flowId,from:o.moveToContext}))}),[e,o]);return void 0!==o&&o.isOpen&&o.collectionToMoveStore?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(oe,{autocompleteQuery:o.autocompleteQuery,collectionToMoveStore:o.collectionToMoveStore,onAutocompleteQueryChange:y,onAccept:g,onCancel:n,desktopWidth:330}),(0,j.jsx)(R,{isOpen:o.isConfirmationModalOpen,onClose:i,collectionToMoveStore:o.collectionToMoveStore,onMoveDataSourceOnly:()=>l(o.destination,!1),onMoveDataSourceAndViews:()=>l(o.destination,!0)})]}):null}function ae(){const e=(0,a().v3)(),t=(0,s().K8)((()=>{const e=S().Ay.state;if(e.isOpen)return{renderType:e.renderType,isOpen:e.isOpen,rect:e.rect,alignmentToOrigin:e.alignmentToOrigin,placementToOrigin:e.placementToOrigin,variant:e.variant}}),[]),o=(0,r.useCallback)((()=>"dataSource"===(null==t?void 0:t.variant)?(0,j.jsx)(ie,{}):(0,j.jsx)(ne,{})),[t]);return(0,j.jsx)(y().Ay,{popupType:i().A.isMobile?l().n.BottomSheet:l().n.Popup,alignmentToOrigin:(null==t?void 0:t.alignmentToOrigin)??"start",placementToOrigin:null==t?void 0:t.placementToOrigin,open:void 0!==t&&"mobileNative"!==t.renderType&&t.isOpen,render:o,originRect:null==t?void 0:t.rect,onDismiss:()=>{m().VN({environment:e,clearSelection:!0})},trapFocus:!0})}ae.displayName="MoveToMenuRenderer";var se=()=>o(554060),le=()=>o(575650)},689094:(e,t,o)=>{o.d(t,{W:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("plus",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"})})},691298:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=()=>o(502438),i=()=>o(693202);const a=function({shouldPreserveTextSelection:e,shouldPreserveBlockSelection:t,shouldRestoreSelection:a,onClearSelection:s}){const l=(0,o(484714).v3)(),c=(0,n.useRef)(e),d=(0,n.useRef)(""),u=(0,n.useRef)({selectionState:null,textSelectionState:null}),p=(0,n.useCallback)((()=>u.current),[]),m=(0,n.useCallback)((()=>{d.current=window.location.href,i().default.hasSelection()&&(u.current.textSelectionState=i().default.cloneState()),(0,o(749804).I)({environment:l}),t&&(r().default.isSelected()&&(u.current.selectionState=r().default.cloneState()),o(778417).IU({environment:l}))}),[l,t]),v=(0,n.useCallback)((()=>{u.current={selectionState:null,textSelectionState:null},d.current="",null==s||s()}),[s]),g=(0,n.useCallback)((()=>{const{selectionState:e,textSelectionState:o}=u.current;window.location.href===d.current&&(o&&"mode"in o&&"editing"===o.mode&&i().default.setState({...i().default.state,...o}),t&&e&&r().default.setState({...r().default.state,...e})),v()}),[v,t]);return(0,o(852507).l)((()=>{c.current=e,e&&m()})),(0,n.useEffect)((()=>(c.current&&!e?a?g():v():!c.current&&e&&m(),c.current=e,()=>{a?g():v()})),[e,v,g,m,a]),{clearSavedSelection:v,restoreSavedSelection:g,getSavedSelection:p}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},765974:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.02 2.5 15.95 14.38",svg:(0,o(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},r=(0,o(340498).wt)("exclamationMarkTriangleFill",n)},766854:(e,t,o)=>{o.d(t,{H:()=>x,Q:()=>S});o(898992),o(672577);var n=()=>o(242422),r=()=>o(929219),i=()=>o(700500),a=()=>o(179034),s=()=>o(201980),l=()=>o(557281),c=()=>o(384944),d=()=>o(381678),u=()=>o(476492),p=()=>o(646736),m=()=>o(406792),v=()=>o(765957),g=()=>o(148832),h=()=>o(622811),y=()=>o(491848),b=()=>o(482871);function f(e,t,o){const r=(0,d()._)(e),i=null==r?void 0:r.id;if(!i||!o)return;if(!n().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const a=t.getSpaceStore();return a&&(0,p().dp)(a,i).isMember()?[{role:"editor",type:"user_permission",user_id:i}]:void 0}function S(e){const{collectionContextStore:t,transaction:o}=e;return(0,y().w)({collectionContextStore:t,transaction:o}),x(e)}function x(e){var t,o,n;const{environment:d,collectionContextStore:p,groupsPointer:y,insertAtIndex:S,shouldCoerce:x,templateStore:w,transaction:k,from:C,tracker:T,inMemoryRecordCache:M,isKeyboard:A,title:I}=e,_=m().default.DO_NOT_USE_markLegacy("collections.add_item_lag");m().default.DO_NOT_USE_measureAfterNextFlushLegacy(_,{environment:d,getData:()=>({...u().kz(p),from:C.createBlock})});const B="collectionTypedView"===p.contextType,j=p.databaseType,R=p.collectionStoresStore.state,P=R.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||R[0],V=null===(t=v().default.state.sidebarSpaceStore)||void 0===t?void 0:t.id,O=v().default.state.currentUserSettingsStore,E=B&&j&&V&&O&&[...O.getAllPreferredCollections(V),...O.getPreferredCollectionsOfType(V,j)]||[];let L;const D=y[0];if("group_header"===C.createBlock&&"location"===D.value.type){const e=D.value.value;if(e){L=R.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else L=function(e,t){for(const o of e){const e=t.find((e=>e.id===o&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(E,R);const q=L??P,N=null==q?void 0:q.getSpaceId(),W=p.collectionViewStore(),z=p.getViewType(),F=c().Wv({environment:d,type:i().xd.page,inMemoryRecordCache:M,transaction:k,spaceId:N,tracker:T,permissions:f(d,q,N),properties:{title:(0,s().x9d)(I)}});if(!q||!W||!z)return{coercionSucceeded:!0,newStore:F};const H=null===(o=p.groupsStore.getGroupState(y))||void 0===o?void 0:o.groupUiParentStore;if(!H)return{coercionSucceeded:!0,newStore:F};const K=g().B.createChildStore(H,{table:a().ev,id:F.id});w&&r().A.state.online&&l().n5({title:"template",environment:d,store:F,templateStore:w,isKeyboard:A??!1,isCreateIn:!1,transaction:k,from:C.initCollection??"collection_group_actions"});const U=(0,h().j)({environment:d,store:F,collectionStore:q,collectionContextStore:p,groupsPointer:y,shouldCoerce:x,transaction:k}),$=(null===(n=p.groupsStore.getGroupState(y))||void 0===n||null===(n=n.reducerResultStore.state)||void 0===n?void 0:n.blockIds)||[],Q=void 0!==S?S:$.length;if(p.permissionScopesStore.state.canEditContent||B){const e=[...$.slice(0,Q),K.id,...$.slice(Q)];(0,b().z)({resultIds:e,collectionViewStore:W,collectionContextStore:p,transaction:k})}return{coercionSucceeded:U,newStore:K}}},786702:(e,t,o)=>{o.d(t,{w:()=>i});var n=()=>o(726637),r=()=>o(651784);function i(e){const t=(0,r().parseRoute)({url:e,baseUrl:n().A.domainBaseUrl,publicDomainName:n().A.publicDomainName,isMobile:!1,protocol:n().A.protocol,currentUrl:void 0});return"page"===t.name?t.blockId:"team"===t.name?t.peekViewBlockId:void 0}},803074:(e,t,o)=>{o.d(t,{C4:()=>f,Nf:()=>x,qM:()=>S});o(16280),o(944114),o(898992),o(430670),o(581454);var n=()=>o(726637),r=()=>o(617871),i=()=>o(388693),a=()=>o(519831),s=()=>o(161479),l=()=>o(534177),c=()=>o(572088),d=()=>o(594794),u=()=>o(972435),p=()=>o(252833),m=()=>o(543665),v=()=>o(559506),g=()=>o(901389),h=()=>o(510683),y=()=>o(384944);const b=(0,o(69708).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function f(e,t,o,r){const i=null==t?void 0:t.getSpaceStore();if(!i)return;const a=(0,c().jw)(o.id).length;if(n().A.isMobile&&r&&!a){const e=u().A.formatMessage(b.mobileAdminError);throw g().f1(e),new Error(e)}if(n().A.isMobile&&!r&&!a){const e=u().A.formatMessage(b.mobileError);throw g().f1(e),new Error(e)}if(!a&&r&&i.canAdmin()||!a&&!r)try{await h().Jq({environment:e,integration:o,spaceId:i.id,from:"collection_settings_property_type"})}catch(s){const e=u().A.formatMessage(b.authError);throw g().f1(e),new Error(e)}if(!(0,c().jw)(o.id).length){const e=u().A.formatMessage(b.authError);throw g().f1(e),new Error(e)}}function S(e){const{environment:t,pattern:o,integration:n,parentCollectionStore:r,transaction:i}=e;if(!o.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const c=new(m().m)(t,(0,d().zP)({environment:t,table:a().Vl,spaceId:r.pointer.spaceId})),u={};o.connected_relation_sub_schemas&&(0,l().WP)(o.connected_relation_sub_schemas).map((([e,o])=>{const n=new(m().m)(t,(0,d().zP)({environment:t,table:a().Vl,spaceId:r.pointer.spaceId})),l={bot_id:void 0,external_object_id:void 0,uri:e,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o,sync_state:void 0,pattern_name:void 0},p={id:n.id,version:0,space_id:(0,s().e)(r.pointer.spaceId),parent_table:a().Vl,parent_id:c.id,alive:!0,format:l,schema:{}};u[e]=n.id,y().zv({store:n,data:p,transaction:i})}));const v={id:c.id,version:0,space_id:(0,s().e)(r.pointer.spaceId),parent_table:a().Vl,parent_id:r.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,p().Fe)({pattern:o,integration:n})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${n.id}/${o.name}`,integration_id:n.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o.connected_relation_properties,sync_state:void 0,pattern_name:o.name,related_external_object_uris_to_instance_ids:u},schema:{}};return y().zv({store:c,data:v,transaction:i}),c}async function x(e){const{bot:t,connected_relation_properties:o}=e;if(t.integration_id===r().Iy||t.integration_id===r().mn)return await async function(e){var t,o,n;const{environment:r,objectName:a,spaceId:s,bot:l}=e,c=await v().callApi({eventName:"describeSalesforceObject",environment:r,data:{spaceId:s,objectName:a,botId:l.id}});if("success"!==(null==c?void 0:c.type))return{error:i().qh.FAILED_TO_FETCH_SALESFORCE_PROPERTIES};var d,u;if((null===(t=c.data)||void 0===t?void 0:t.responseStatus)===i().qh.REAUTHENTICATION_REQUIRED||(null===(o=c.data)||void 0===o?void 0:o.responseStatus)===i().qh.NO_USER_API_ACCESS)return{error:`${null===(d=c.data)||void 0===d?void 0:d.responseStatus}:${null===(u=c.data)||void 0===u?void 0:u.userType}`};const p=null==c||null===(n=c.data)||void 0===n?void 0:n.properties;if(p){return{value:p.flatMap((e=>{const t=e.custom?e.label:e.relationshipName||e.label;return"User"===e.referenceTo||"Group"===e.referenceTo?[{id:e.name,name:t,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible},{id:`mapped_${e.name}`,name:`${t} (Notion User)`,isSelected:!1,type:"person",metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]:[{id:"Name"===e.name?"title":e.name,name:"relation"===e.type?t:e.label,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]}))}}return{error:i().qh.NO_PROPERTIES_FOUND}}(e);const n=[],a=o;for(const r in a){const e=a[r];null!=e&&e.name&&null!=e&&e.type&&n.push({id:r,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1},isAlreadySynced:!1})}return{value:n}}},933117:(e,t,o)=>{o.d(t,{A:()=>m});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(30537),i=()=>o(496603),a=()=>o(534177),s=()=>o(722872),l=()=>o(404277),c=()=>o(939740),d=()=>o(45552),u=()=>o(89924),p=o(474848);const m=function({renderOrigin:e,onClick:t,items:n,getKey:r,renderItem:i,selectedItem:a,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:d,menuTitle:u,width:m,minWidth:v,disabled:y,originGap:b,buttonPopupStore:f,sameWidthAsOrigin:S}){const x=(0,o(56366).uB)(f,o(463830).A),w=d??(o(726637).A.isMobile?s().gu.Modal:s().gu.Popup);return(0,p.jsx)(o(406699).A,{popupType:h(w),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:x,placementToOrigin:"bottom",onClick:t,render:e=>(0,p.jsx)(g,{parent:e,items:n,getKey:r,renderItem:i,selectedItem:a,onSelect:l,dontCloseParentOnSelect:c,menuType:w,menuTitle:u,width:m,minWidth:v}),disabled:y,originGap:b,sameWidthAsOrigin:S})};function v(e,t,o,r,i,a,s,l){return{key:0,render:e=>(0,n.createElement)(u().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:a}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,a,s),l||o.close()}})))}}function g({parent:e,items:t,getKey:o,renderItem:n,selectedItem:r,onSelect:u,dontCloseParentOnSelect:m,menuType:g,menuTitle:h,width:y,minWidth:b}){const f=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,i)=>{const a=v(t,i,e,o,n,r,u,m);f.push(a)}));else{const i=v(t,0,e,o,n,r,u,m);f.push(i)}const S=(0,p.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:i().SL(i().Bq(t),(e=>i().n4(e,r))),sections:f});let x;switch(g){case s().gu.ActionSheet:x={menuType:s().gu.ActionSheet};break;case s().gu.Modal:x={menuType:s().gu.Modal,title:h,right:(0,p.jsx)(d().DoneMenuText,{}),onClickRight:e.close};break;case s().gu.Popup:x={menuType:s().gu.Popup,width:y||160,minWidth:b};break;default:(0,a().HB)(g)}return(0,p.jsx)(l().A,{...x,children:S})}function h(e){switch(e){case s().gu.ActionSheet:return r().n.SlideUp;case s().gu.Modal:return r().n.BottomSheet;case s().gu.Popup:return r().n.Popup}}},933371:(e,t,o)=>{o.d(t,{X:()=>n});const n=o(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},940563:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightRightIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,o(474848).jsx)("path",{d:"m17.442 9.558-5.4-5.4a.625.625 0 0 0-.884.884l4.333 4.333H3a.625.625 0 1 0 0 1.25h12.491l-4.333 4.333a.625.625 0 1 0 .884.884l5.4-5.4a.62.62 0 0 0 0-.884"})},r=(0,o(340498).wt)("arrowStraightRight",n)},970236:(e,t,o)=>{o.d(t,{E:()=>a});o(296540);var n=()=>o(401497),r=()=>o(284371),i=o(474848);function a(e){const{color:t="gray",style:o,content:a,...s}=e,l=(0,n().IS)((e=>({badge:{alignSelf:"center",marginInlineStart:6,padding:"2px 4px",background:e[t].background.secondaryTranslucent,color:e[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:r().Wy.medium,lineHeight:1.3,...o}})),[t,o]);return(0,i.jsx)("div",{style:l.badge,...s,children:a})}},995847:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,xMarkSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.17 3.17 9.66 9.66",svg:(0,o(474848).jsx)("path",{d:"M12.642 3.358a.625.625 0 0 0-.884 0L8 7.116 4.242 3.358a.625.625 0 1 0-.884.884L7.116 8l-3.758 3.758a.625.625 0 0 0 .884.884L8 8.884l3.758 3.758a.625.625 0 1 0 .884-.884L8.884 8l3.758-3.758a.625.625 0 0 0 0-.884"})},r=(0,o(340498).wt)("xMarkSmall",n)}}]);