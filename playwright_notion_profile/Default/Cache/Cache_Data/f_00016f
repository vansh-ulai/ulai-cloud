"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6626,25700],{6027:(e,t,n)=>{n.d(t,{F:()=>q});var i=()=>n(726637),o=()=>n(662303),r=()=>n(825237),a=()=>n(945778),s=()=>n(142748),d=()=>n(201980),l=()=>n(751735),c=()=>n(209199),u=()=>n(496603),m=()=>n(284371),p=()=>n(972435),g=()=>n(569028),h=()=>n(613735),v=()=>n(337567),f=()=>n(896628),S=()=>n(231297),b=()=>n(892632);const I=630,A=1200,y=(0,n(100622).O4)({theme:"light"}),w=240,_="white",U=200,k=96,B=150,x=184,C=100,M=145,P=23,D=347,E=24,T=100,O=100,W=100,H="black",N=96,j=68,L=y.text.tertiary,R=40,V=(0,n(69708).YK)({builtWithNotion:{id:"socialMediaPreview.madeWithNotion",defaultMessage:"Made with Notion"}}),Q='"Apple Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Noto Color Emoji","Segoe UI Symbol","Android Emoji",EmojiSymbols';function F(e){return new Promise(((t,n)=>{const i=new Image;i.onload=()=>t(i),i.onerror=n,i.crossOrigin="anonymous",i.src=e}))}function $(e,t){return`${m().Wy.bold} ${t}px ${m().xf({pageFont:e,locale:o().locale})}`}function z(e){const t=m().Wy.medium,n=m().xf({pageFont:e,locale:o().locale});return`${t} ${R}px ${n}`}function K({context:e,text:t,font:n,color:i,x:o,y:r,direction:a}){e.font=n,e.textAlign="ltr"===a?"left":"right",e.textBaseline="top",e.direction=a,e.fillStyle=i,e.fillText(t,"ltr"===a?o:A-o,r)}async function q({store:e,environment:t}){var n;if(e.pathIsDead()||!(0,s().ot)((0,g().E)(e))||(0,v().dL)(e)||e.inMemoryRecordCache.recordHasOverride({pointer:e.pointer,userId:t.currentUser.id}))return;const o=d().q4_(e.getTitleValue())||"",m=null===(n=e.getIcon())||void 0===n?void 0:n.icon,R=function(e,t){var n;const o=null===(n=t.getCover())||void 0===n?void 0:n.cover;if(o)return r().wY({url:o,width:A,permissionRecord:t.pointer,stripGoogleIconQuery:!0,baseUrl:i().A.domainBaseUrl,fullyQualified:!1,userId:e.currentUser.id})}(t,e),q=e.getFormat(),Y=new OffscreenCanvas(A,I),G=Y.getContext("2d"),{title:X,fontSize:J,direction:Z}=function(e,t){const n=document.createElement("div");n.dir="auto",n.style.direction="auto",n.style.width="auto",n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.font=$(t,N),n.style.top="110vh",n.innerText=e;const i=A-T-O,o=document.body;o.appendChild(n);const r="rtl"===window.getComputedStyle(n).direction?"rtl":"ltr";if(n.clientWidth<i)return o.removeChild(n),{title:e,fontSize:N,direction:r};if(n.style.font=$(t,j),n.clientWidth<i)return o.removeChild(n),{title:e,fontSize:j,direction:r};let a=e;for(;n.clientWidth>i;)a=a.substring(0,a.length-1),n.innerText=`${a}…`;return o.removeChild(n),{title:`${a}…`,fontSize:j,direction:r}}(o,q.page_font),ee=$(q.page_font,J),te=D+(m?P:0),ne=te+E+J;if(G){!function(e){e.fillStyle=_,e.fillRect(0,0,A,I)}(G),await async function({context:e,coverImageUrl:t,icon:n,coverPosition:i=.5}){if(t){const n=await F(t),o=n.width*(w/A),r=((0,u().Et)(i)?1-i:.5)*(n.height-o);e.drawImage(n,0,r,n.width,o,0,0,A,w)}else{const t=(0,h().b)({icon:n,themeMode:y.mode}),i=t?(0,l().X4)(t,.1):y.home.cards.coverPhoto.base;e.fillStyle=i,e.fillRect(0,0,A,w),e.fillStyle="rgb(0,0,0,1)"}}({context:G,coverImageUrl:R,icon:m,coverPosition:q.page_cover_position}),await async function({context:e,store:t,icon:n}){if(n)if((0,a().A)(n))e.font=`${U}px ${Q}`,e.textAlign=(0,c().A1)()?"right":"left",e.textBaseline="top",e.fillText(n,(0,c().A1)()?A-k:k,B);else{const o=r().wY({url:n,baseUrl:i().A.domainBaseUrl,fullyQualified:!0,permissionRecord:t.pointer,width:x,userId:void 0}),a=await F(o);e.drawImage(a,(0,c().A1)()?A-C:C,M,x,x)}}({context:G,store:e,icon:m}),K({context:G,text:X,font:ee,color:H,x:T,y:te,direction:Z}),K({context:G,text:p().A.formatMessage(V.builtWithNotion),font:z(q.page_font),color:L,x:W,y:ne,direction:(0,c().A1)()?"rtl":"ltr"});const n=await Y.convertToBlob();!function({store:e,file:t,environment:n}){b().QM({environment:n,file:t,bucket:"secure",record:e.pointer,isFileBlock:!1,onComplete:t=>{S().createAndCommit({userAction:"SocialMediaPreviewImageUploadStore.updateSocialMediaPreviewImage",environment:n,canUndo:!1,perform:n=>{f().lm({store:e,url:t,transaction:n})}})},retryWhenOffline:!0})}({store:e,environment:t,file:new File([n],"SocialMediaPreviewImage.png",{type:"image/png"})})}}},86168:(e,t,n)=>{n.r(t),n.d(t,{heartIcon:()=>o,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.39 2.87 15.21 14.76",svg:(0,n(474848).jsx)("path",{d:"M10.016 17.634a.6.6 0 0 1-.142-.017.5.5 0 0 1-.177-.054C9.399 17.41 2.4 13.721 2.4 7.73c0-2.27 1.251-4.16 3.114-4.704 1.587-.462 3.246.161 4.486 1.64 1.24-1.478 2.9-2.101 4.485-1.64C16.348 3.569 17.6 5.46 17.6 7.73c0 5.992-6.999 9.681-7.297 9.834a.6.6 0 0 1-.287.07m-3.45-13.51q-.353 0-.702.101C4.54 4.611 3.65 6.019 3.65 7.729c0 4.613 5.104 7.851 6.35 8.573 1.246-.722 6.35-3.96 6.35-8.573 0-1.71-.89-3.118-2.214-3.504-1.287-.375-2.637.31-3.61 1.833-.229.36-.823.36-1.053 0-.796-1.248-1.846-1.934-2.908-1.934"})},o=(0,n(340498).wt)("heart",i)},243581:(e,t,n)=>{n.d(t,{r:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.48 3.92 13.04 12.85",svg:(0,n(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},o=(0,n(340498).wt)("arrowBranch",i)},247123:(e,t,n)=>{n.d(t,{QU:()=>p,f2:()=>m,r6:()=>g});n(581454),n(296540);var i=()=>n(56366),o=()=>n(401497),r=()=>n(611648),a=()=>n(69708),s=()=>n(534177),d=()=>n(765957),l=()=>n(2143),c=()=>n(131842),u=n(474848);function m(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:a}=(0,i().K8)((()=>{const{mainEditorCurrentBlockStore:e,sidebarSpaceStore:t}=d().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),s=(0,o().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingInlineStart:12,paddingInlineEnd:12,paddingBottom:12,marginTop:15,marginBottom:5,marginInlineStart:-12,marginInlineEnd:-12},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[]);if(!n||!a)return null;const m=Date.now();return(0,u.jsx)(l().H,{type:r().A.Y,style:s.scroller,children:t.permissionChanges.map((([e,t],i)=>{const o={timestamp:m,space_id:a.id,type:"permission-changed",permission_data:{before:e,after:t}};return(0,u.jsx)("div",{style:s.editContainer,children:(0,u.jsx)(c().A,{rootStore:n,edit:o})},`${e.type}-${i}`)}))})}function p(e){return["remove","restrict"].includes(e.type)?(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function g(e){switch(e.type){case"remove":case"restrict":return(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,u.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw s().HB(e)}}},300451:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{settingOpen:"initial",permissionItem:void 0,from:void 0,sudoModeStore:void 0,location:"",faviconUrl:null,previewImageUrl:null,hideBreadcrumbs:!1,hideLikeButton:!1,hideSearch:!1,hideWatermark:!1,enableDuplicateAsTemplate:!1,hideShare:!1,customHeaderBlockIds:[],googleAnalyticsId:void 0,theme:void 0,enableQna:!1,hideUpsellBanner:!1}}}const o=new i},435212:(e,t,n)=>{n.d(t,{Kz:()=>r,Sc:()=>a,as:()=>o});var i=()=>n(564884);function o(e,t){(0,i().u)({environment:e,event:{eventName:"open_customize_site",eventProperties:t}})}function r(e,t){(0,i().u)({environment:e,event:{eventName:"update_site_customization_settings",eventProperties:t}})}function a(e){(0,i().u)({environment:e,event:{eventName:"close_customize_site",eventProperties:{}}})}},500128:(e,t,n)=>{n.d(t,{K:()=>a});n(296540);var i=()=>n(59226),o=()=>n(204330),r=n(474848);function a(e){const{children:t,featureFlag:n,...a}=e;return(0,i().X)(n)?(0,r.jsx)(o().R,{...a}):t}},525700:(e,t,n)=>{n.d(t,{Bp:()=>T,DD:()=>R,E9:()=>te,F$:()=>Z,H6:()=>M,HE:()=>P,HY:()=>O,JI:()=>K,Nf:()=>q,P8:()=>J,U0:()=>L,V_:()=>Y,XL:()=>V,Xz:()=>Q,aD:()=>D,aN:()=>z,d7:()=>$,d8:()=>B,j4:()=>G,n0:()=>X,pu:()=>N,sd:()=>F,uH:()=>W,uY:()=>ee,wl:()=>E,yF:()=>j,zV:()=>C});n(16280),n(944114),n(898992),n(354520),n(581454),n(296540);var i=()=>n(726637),o=()=>n(68263),r=()=>n(161479),a=()=>n(101628),s=()=>n(245241),d=()=>n(69708),l=()=>n(496603),c=()=>n(498212),u=()=>n(559506),m=()=>n(496414),p=()=>n(384944),g=()=>n(27579),h=()=>n(471995),v=()=>n(231297),f=()=>n(594794),S=()=>n(976721),b=()=>n(562800),I=()=>n(40226),A=()=>n(380682),y=()=>n(300451),w=()=>n(676870),_=()=>n(435212),U=n(474848);const k=(0,d().YK)({savingSiteSettings:{id:"siteSettingsActions.publishingSiteSettings.loadingMessage",defaultMessage:"Saving site settings…"}});function B(e){const{environment:t,store:n,type:i,header:o,domainId:s,settings:d}=e,l=n.getSiteStore();if(l)return l.id;let c=s;var u;c||(c=null===(u=b().Nq(n.getSpaceStore()))||void 0===u?void 0:u.id);const m=(0,f().JH)({environment:t,table:a().Eu,spaceId:(0,r().e)(n.getSpaceId())});v().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const r=p().vt({environment:t,table:m.table,args:{id:m.id,type:i,spaceId:m.spaceId,blockId:n.id,domainId:c,currentUserId:t.currentUser.id,header:o??{},settings:d??{}},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e});return p().zv({store:n.getFormatStore(),data:{site_id:r.id},transaction:e}),r.id}})}function x(e){const{environment:t,siteRootBlockStore:n,domainId:i}=e;let o=n.getSiteStore();if(o||(B({environment:t,type:"site",store:n,domainId:i}),o=n.getSiteStore()),o)return o}function C(e){const{environment:t,domainId:n,resetWatermark:i}=e,o=x(e);o&&o.isDefined()&&(v().createAndCommit({userAction:"publishSite.updatePublicDomain",environment:t,canUndo:!0,perform:e=>{o.getDomainId()!==n&&v().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updatePublicDomainId({domainId:n,currentUserId:t.currentUser.id})})}}),v().createAndCommit({userAction:"publishSite.resetWatermark",environment:t,canUndo:!0,perform:e=>{if(i){const n=o.getHeader();v().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateHeader({header:{...n,hideWatermark:!1},currentUserId:t.currentUser.id})})}}}),h().D6({label:(0,U.jsx)(d().sA,{id:"publishSiteSettings.publicDomain.confirmation",defaultMessage:"Successfully updated domain for all pages within this site"})}))}function M(e){const{environment:t,siteRootBlockStore:n,isSearchEngineIndexingEnabled:i}=e,o=x(e);if(!o)return;"form"!==o.getType()&&v().createAndCommit({userAction:"publishSite.updateSeoEnabled",environment:t,canUndo:!0,perform:e=>{o&&o.isDefined()&&i!==o.isSearchEngineIndexingEnabled()&&(v().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateIsSearchEngineIndexingEnabled({isSearchEngineIndexingEnabled:i,currentUserId:t.currentUser.id})}),i&&e.postSubmitCallbacks.push((async e=>{e||await u().callApi({eventName:"enqueueScanContentTask",environment:t,data:{pagePointer:{id:n.id,table:"block",spaceId:(0,r().e)(n.pointer.spaceId)}}})})))}})}function P(e){const{environment:t,store:n,seoTitle:i,seoDescription:o}=e;v().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const r=n.getFormat().seo_title,a=n.getFormat().seo_description;r===i&&a===o||(p().zv({store:n.getFormatStore(),data:{seo_title:i,seo_description:o},transaction:e}),(0,w().NZ)(t,{target_block_id:n.id,new_title:i??null,new_description:o??null}),h().D6({label:(0,U.jsx)(d().sA,{id:"siteSettingsEditor.publishSeoChanges.confirmation",defaultMessage:"Successfully updated the SEO settings"})}))}})}function D(e){y().A.setState({...y().A.state,settingOpen:e})}function E(){y().A.setState({...y().A.state,settingOpen:"initial"})}function T(e){A().A.setState({...A().A.state,siteSettingContentType:e})}function O(e){var t,n,i,o;const{siteRootBlockStore:r,permissionItem:a,from:s,sudoModeStore:d}=e,l=r.getSiteStore(),c=null==l?void 0:l.getHeader(),u=(null==c||null===(t=c.customItems)||void 0===t?void 0:t.map((e=>e.blockId)))||[];y().A.setState({settingOpen:"initial",permissionItem:a,from:s,sudoModeStore:d,faviconUrl:(null==l?void 0:l.getFaviconUrl())||null,previewImageUrl:(null==l?void 0:l.getPreviewImageUrl())||null,hideBreadcrumbs:null==c?void 0:c.hideBreadcrumbs,hideLikeButton:null==c?void 0:c.hideLikeButton,hideSearch:null==c?void 0:c.hideSearch,hideShare:null==c?void 0:c.hideShare,hideWatermark:null==c?void 0:c.hideWatermark,enableDuplicateAsTemplate:a.allow_duplicate,customHeaderBlockIds:u,googleAnalyticsId:null==l?void 0:l.getGoogleAnalyticsId(),theme:null==l||null===(n=l.getSettings())||void 0===n?void 0:n.theme,enableQna:null==l||null===(i=l.getSettings())||void 0===i?void 0:i.enableQna,hideUpsellBanner:null==l||null===(o=l.getSettings())||void 0===o?void 0:o.hideUpsellBanner})}async function W(e){var t;const{environment:n,store:i,siteRootBlockStore:r}=e,a=x({environment:n,siteRootBlockStore:r}),s=null==a?void 0:a.getType();if(!a||"form"===s)return;const l=y().A.getState(),p={},g=function(e,t){var n,i,o,r,a,s,d,l,c,u;const m=H(e.customHeaderBlockIds,null===(n=t.getHeader())||void 0===n?void 0:n.customItems);return e.faviconUrl!==(t.getFaviconUrl()||null)||e.previewImageUrl!==(t.getPreviewImageUrl()||null)||m||e.hideBreadcrumbs!==(null===(i=t.getHeader())||void 0===i?void 0:i.hideBreadcrumbs)||e.hideSearch!==(null===(o=t.getHeader())||void 0===o?void 0:o.hideSearch)||e.hideShare!==(null===(r=t.getHeader())||void 0===r?void 0:r.hideShare)||e.hideLikeButton!==(null===(a=t.getHeader())||void 0===a?void 0:a.hideLikeButton)||e.hideWatermark!==(null===(s=t.getHeader())||void 0===s?void 0:s.hideWatermark)||e.googleAnalyticsId!==t.getGoogleAnalyticsId()||e.theme!==(null===(d=t.getSettings())||void 0===d?void 0:d.theme)||e.enableQna!==(null===(l=t.getSettings())||void 0===l?void 0:l.enableQna)||e.hideUpsellBanner!==(null===(c=t.getSettings())||void 0===c?void 0:c.hideUpsellBanner)||(null===(u=e.permissionItem)||void 0===u?void 0:u.allow_duplicate)!==e.enableDuplicateAsTemplate&&e.permissionItem&&e.from}(l,a);if(!g)return;let f;if(m().m({message:k.savingSiteSettings}),l.enableQna)try{f=await async function(e){var t,n,i,o;const{environment:r,siteStore:a}=e,s=null===(t=a.getSettings())||void 0===t?void 0:t.siteUserId;if(s)return s;if(!((null===(n=a.getDomainStore())||void 0===n?void 0:n.getDomainName())??(null===(i=b().Nq(a.getSpaceStore()))||void 0===i?void 0:i.domain_name)))throw new Error("no domain on site");const d=b().Ix({spaceStore:a.getSpaceStore(),domainId:null===(o=a.getDomainStore())||void 0===o?void 0:o.id}).split(":")[0],l=`${(0,c().S2)(a.id)}@${d}`,m=await u().callApi({eventName:"createEmailUser",environment:r,data:{email:l}});if("failed"===m.type)throw new Error("failed to create qna user");return m.data.userId}({environment:n,siteStore:a})}catch{return m().V(),void h().D6({label:(0,U.jsx)(d().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})})}const{serverCommitResult:I}=v().createAndCommit({userAction:"publishSite.updateSiteSettingsInEditor",environment:n,canUndo:!0,perform:e=>{if(a&&a.isDefined()){var t,i,o;(a.getFaviconUrl()||null)!==l.faviconUrl&&(v().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateFaviconUrl({faviconUrl:l.faviconUrl,currentUserId:n.currentUser.id})}),p.favicon=l.faviconUrl);(a.getPreviewImageUrl()||null)!==l.previewImageUrl&&(v().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updatePreviewImageUrl({previewImageUrl:l.previewImageUrl,currentUserId:n.currentUser.id})}),p.preview_image=l.previewImageUrl);const r=a.getHeader();let s=r;const d=H(l.customHeaderBlockIds,null==r?void 0:r.customItems);d&&(s={...s,customItems:d},p.custom_headers=d.map((e=>e.blockId))),(null==r?void 0:r.hideBreadcrumbs)!==l.hideBreadcrumbs&&(s={...s,hideBreadcrumbs:l.hideBreadcrumbs},p.hide_breadcrumbs=l.hideBreadcrumbs),(null==r?void 0:r.hideLikeButton)!==l.hideLikeButton&&(s={...s,hideLikeButton:l.hideLikeButton},p.hide_like_button=l.hideLikeButton),(null==r?void 0:r.hideSearch)!==l.hideSearch&&(s={...s,hideSearch:l.hideSearch},p.hide_search=l.hideSearch),(null==r?void 0:r.hideShare)!==l.hideShare&&(s={...s,hideShare:l.hideShare},p.hide_share=l.hideShare),(null==r?void 0:r.hideWatermark)!==l.hideWatermark&&(s={...s,hideWatermark:l.hideWatermark},p.hide_watermark=l.hideWatermark),s&&r!==s&&v().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateHeader({header:s,currentUserId:n.currentUser.id})});a.getGoogleAnalyticsId()!==l.googleAnalyticsId&&(v().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateGoogleAnalyticsId({googleAnalyticsId:l.googleAnalyticsId,currentUserId:n.currentUser.id})}),p.google_analytics_id=l.googleAnalyticsId);(null===(t=a.getSettings())||void 0===t?void 0:t.theme)!==l.theme&&(v().applyOperation({transaction:e,store:a,operation:a.getModel().ops.updateTheme({theme:l.theme,currentUserId:n.currentUser.id})}),p.theme=l.theme);(null===(i=a.getSettings())||void 0===i?void 0:i.enableQna)!==l.enableQna&&(l.enableQna?f&&v().applyOperation({transaction:e,store:a,operation:{pointer:a.pointer,command:"update",path:["settings"],args:{enableQna:l.enableQna,siteUserId:f}}}):v().applyOperation({transaction:e,store:a,operation:{pointer:a.pointer,command:"update",path:["settings"],args:{enableQna:l.enableQna}}}));(null===(o=a.getSettings())||void 0===o?void 0:o.hideUpsellBanner)!==l.hideUpsellBanner&&v().applyOperation({transaction:e,store:a,operation:{pointer:a.pointer,command:"update",path:["settings"],args:{hideUpsellBanner:l.hideUpsellBanner}}})}}});try{await I}catch{return m().V(),void h().D6({label:(0,U.jsx)(d().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})})}if((null===(t=l.permissionItem)||void 0===t?void 0:t.allow_duplicate)!==l.enableDuplicateAsTemplate&&l.permissionItem&&l.from){const e=(0,o().Yi)(l.from);if(!(await(0,S().Hc)({oldPermissionItem:l.permissionItem,newPermissionItem:{...l.permissionItem,allow_duplicate:l.enableDuplicateAsTemplate},wasInherited:e!==i.id,environment:n,store:i,sudoModeStore:l.sudoModeStore,location:"published_site_settings"})))return m().V(),void h().D6({label:(0,U.jsx)(d().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})});p.enable_duplicate_as_template=l.enableDuplicateAsTemplate}m().V(),(0,_().Kz)(n,{settings_changed:p}),h().D6({label:(0,U.jsx)(d().sA,{id:"siteSettingsEditor.publishChanges.confirmation",defaultMessage:"Changes published"})})}function H(e,t){const n=e.map((e=>({type:"block",blockId:e})));if((t||0!==n.length)&&(!t||!(0,l().n4)(n,t)))return n}function N(e){y().A.setState({...y().A.state,faviconUrl:e})}function j(e){y().A.setState({...y().A.state,previewImageUrl:e})}function L(e){y().A.setState({...y().A.state,hideLikeButton:e})}function R(e){y().A.setState({...y().A.state,hideBreadcrumbs:e})}function V(e){y().A.setState({...y().A.state,hideSearch:e})}function Q(e){y().A.setState({...y().A.state,hideWatermark:e})}function F(e){y().A.setState({...y().A.state,hideShare:e})}function $(e){y().A.setState({...y().A.state,enableDuplicateAsTemplate:e})}function z(e){const t=y().A.state.customHeaderBlockIds.concat([e]);y().A.setState({...y().A.state,customHeaderBlockIds:t})}function K(e){const t=y().A.state.customHeaderBlockIds.filter((t=>t!==e));y().A.setState({...y().A.state,customHeaderBlockIds:t})}function q(e){y().A.setState({...y().A.state,googleAnalyticsId:e})}function Y(e){y().A.setState({...y().A.state,theme:e})}async function G(e){const{environment:t,spaceStore:n,query:i,siteRootBlockId:o}=e;if(!n)return;const r=await u().callApi({eventName:"searchPagesInSite",environment:t,data:{query:i,spaceId:n.id,filters:s().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:!0,editedBy:[],ancestors:[o],inTeams:[]}),sort:{field:"relevance"},limit:10,source:"sites_custom_header_builder_search"}});return"failed"!==r.type?r.data:void 0}async function X(e){const{environment:t,blockStore:n,slug:o}=e,r=await u().callApi({eventName:"updatePublicPageSlug",environment:t,data:{spaceId:n.getSpaceId(),blockId:n.id,slug:o,clientVersion:i().A.version}});if("success"!==r.type)return{error:r};h().D6({label:(0,U.jsx)(d().sA,{id:"customSlugInput.updateSuccess.toast",defaultMessage:"Successfully updated URL for this page"})})}function J(e){y().A.setState({...y().A.state,enableQna:e})}function Z(e){y().A.setState({...y().A.state,hideUpsellBanner:e})}function ee(e){const{environment:t,store:n,pageVisitSource:i}=e,o=I().R({store:n,pageVisitSource:i});(0,g().L)({environment:t,url:o})}function te(e){const{environment:t,siteStore:n,embedSettings:i}=e;v().createAndCommit({userAction:"embedSite.updateEmbedSettings",environment:t,canUndo:!0,perform:e=>{p().zv({store:n.getSettingsStore(),data:{embedSettings:i},transaction:e})}})}},557297:(e,t,n)=>{n.d(t,{lz:()=>r,nO:()=>o,wl:()=>a});var i=()=>n(645873);const o={chatSidebar:new(i().O2)("chatSidebar",(()=>Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(45158),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(35564),n.e(87487),n.e(28463),n.e(2703)]).then(n.bind(n,942646)))),chatSidebarActions:new(i().O2)("chatSidebarActions",(async()=>await Promise.resolve().then(n.bind(n,118078)))),chatSidebarHelpers:new(i().O2)("chatSidebarHelpers",(async()=>await Promise.resolve().then(n.bind(n,890754)))),chatSidebarModeButton:new(i().O2)("chatSidebarModeButton",(async()=>await Promise.all([n.e(75134),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(90825),n.e(16471),n.e(37353),n.e(29151),n.e(87248),n.e(67539),n.e(41383),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(4422),n.e(4330),n.e(55162),n.e(71003),n.e(55753),n.e(28866),n.e(22001),n.e(71386),n.e(4351),n.e(6331),n.e(69144),n.e(42660),n.e(55997),n.e(40828),n.e(12341),n.e(96402),n.e(84166),n.e(70359),n.e(29595),n.e(16448),n.e(10442),n.e(16434),n.e(45769),n.e(46080),n.e(75902),n.e(99809),n.e(47160),n.e(32254),n.e(34442),n.e(31276),n.e(35738),n.e(77747),n.e(35564),n.e(8501),n.e(91347),n.e(32994),n.e(1499),n.e(94814)]).then(n.bind(n,256499)))),dockedSidebar:new(i().O2)("dockedSidebar",(async()=>await Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(45158),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(35564),n.e(87487),n.e(28463)]).then(n.bind(n,675803)))),mobileChatModal:new(i().O2)("mobileChatModal",(async()=>await Promise.all([n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(87249),n.e(71621),n.e(88924),n.e(92845),n.e(56369),n.e(5834),n.e(48486),n.e(2411),n.e(89296),n.e(46414),n.e(9294),n.e(11676),n.e(91256),n.e(40563),n.e(67494),n.e(44584),n.e(53141),n.e(87487),n.e(63454)]).then(n.bind(n,257819))))},r=(0,i()._h)(o.chatSidebar,(e=>e.ChatSidebar)),a=(0,i()._h)(o.chatSidebarModeButton,(e=>e.ChatSidebarModeButtonPopupContents))},676870:(e,t,n)=>{n.d(t,{EN:()=>o,Ex:()=>r,NZ:()=>a,T6:()=>s,kW:()=>d});var i=()=>n(564884);function o(e,t){(0,i().u)({environment:e,event:{eventName:"open_publish_modal",eventProperties:t}})}function r(e,t){(0,i().u)({environment:e,event:{eventName:"change_domain",eventProperties:t}})}function a(e,t){(0,i().u)({environment:e,event:{eventName:"update_seo_settings",eventProperties:t}})}function s(e,t){(0,i().u)({environment:e,event:{eventName:"page_unpublish",eventProperties:t}})}function d(e,t){(0,i().u)({environment:e,event:{eventName:"page_publish",eventProperties:t}})}},858341:(e,t,n)=>{n.d(t,{m:()=>l});var i=()=>n(988083),o=()=>n(496603),r=()=>n(155959),a=()=>n(693202);const s=o().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),d=o().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150);function l(e,t,n){const{device:o,RouterStore:l}=e;if(!(0,r().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===l.state.route.name,i=o.isAndroid&&o.isMobileNative,r="editing"===a().default.state.mode;if(e&&i&&!r)return void s(t,n)}if((0,r().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===l.state.route.name,i=o.isIOS&&o.isMobileNative;if(e&&i)return void d(t,n)}i().A.setState({...i().A.state,phase:t,estimatedKeyboardWebViewOverlap:n})}},976721:(e,t,n)=>{n.d(t,{Dw:()=>U,Hc:()=>_,o5:()=>w});n(16280),n(296540);var i=()=>n(564884),o=()=>n(165358),r=()=>n(243581),a=()=>n(340498),s=()=>n(273900),d=()=>n(68263),l=()=>n(179034),c=()=>n(519831),u=()=>n(161479),m=()=>n(69708),p=()=>n(496603),g=()=>n(701763),h=()=>n(901389),v=()=>n(579627),f=()=>n(231297),S=()=>n(125565),b=()=>n(247123),I=()=>n(406792),A=()=>n(437487),y=n(474848);async function w({newRole:e,...t}){const n=t.oldPermissionItem,i=(0,p().o8)(n);return i.role=e,await _({newPermissionItem:i,...t})}async function _(e){const{oldPermissionItem:t,newPermissionItem:n,wasInherited:r,environment:a,store:m,sudoModeStore:p,restrictingVisibility:h,fromPermissionWrapper:S,trustedDomainsLoggingData:b}=e;if(!(0,s().nK)(t,n))throw new Error("Permission type mismatch.");const y=!!p&&p.shouldSaveTransactionWithSudoMode(m),w=(0,s().$q)(t.role,n.role);if(r&&w!==n.role||h){return await U({environment:a,useSudoMode:y,store:m,permissionItem:n,fromPermissionWrapper:S,shouldInherit:!0,trustedDomainsLoggingData:b})}m.table===l().ev&&!m.isTopLevel()&&t.role!==n.role&&w!==t.role&&g().MR(a),f().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:a,canUndo:!0,useSudoMode:y,perform:t=>{const i=I().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");v().wd({environment:a,store:m,permissionItems:[n],transaction:t,pagePermissionChangeLocation:e.location,metric:i,fromPermissionWrapper:S})}}),"trusted_domain_permission"===n.type&&o().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,u().e)(m.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:m.id,oldPermissionItem:t,newPermissionItem:n,trustedDomainsLoggingData:b}}});if((0,d().tb)(t)&&(0,d().tb)(n)&&m.table===c().Vl){var _;const e=null===(_=m.getParentBlockStore())||void 0===_?void 0:_.id,o="none"===n.role&&"none"!==t.role,r="none"!==t.role&&"none"!==n.role&&t.role!==n.role;o?(0,i().u)({environment:a,event:{eventName:"delete_db_row_permission_rule",eventProperties:{permission_property_info:t.property_info,permission_role:t.role,share_menu_session_id:A().Ay.state.sessionId,collection_id:m.id,collection_view_block_id:e}}}):r&&(0,i().u)({environment:a,event:{eventName:"update_db_row_permission_rule",eventProperties:{permission_property_info:n.property_info,old_permission_role:t.role,new_permission_role:n.role,share_menu_session_id:A().Ay.state.sessionId,collection_id:m.id,collection_view_block_id:e}}})}return!0}async function U(e){const{environment:t,useSudoMode:n,store:i,permissionItem:o,fromPermissionWrapper:s,shouldInherit:d,trustedDomainsLoggingData:l}=e,c="none"===(null==o?void 0:o.role)?{type:"remove",permissionItem:o}:{type:"restrict"};return!!("user_permission"===(null==o?void 0:o.type)&&(null==o?void 0:o.user_id)===t.currentUser.id||(await h().Gh({message:(0,b().r6)(c),description:(0,y.jsx)(S().A,{isSmall:!0,isMultiline:!0,children:(0,y.jsx)(m().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,b().QU)(c),icon:(0,r().r)({height:a().Ev.xl,width:a().Ev.xl})})).accept)&&(f().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:n,perform:e=>{v().wW({environment:t,store:i,permissionItem:o,shouldInherit:d,transaction:e,fromPermissionWrapper:s,trustedDomainsLoggingData:l})}}),!0)}}}]);